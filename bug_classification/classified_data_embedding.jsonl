{"project_id": "Alacritty", "bug_id": "1", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Scrolling vim in tmux while a separate pane is printing causes corruption\n\nDescription:\nGiven this setup ![image](https://cloud.githubusercontent.com/assets/4285147/18794329/df0f1182-8173-11e6-9908-0847d7ae9a6d.png) Scrolling a vim split **while the middle left pane is printing** will cause vim to become corrupt as shown in this screenshot: ![image](https://cloud.githubusercontent.com/assets/4285147/18794367/117e31c0-8174-11e6-83a7-4051d52dd870.png) I have a theory that this is because writing to the _pty_ is not synchronized at all. The input thread simply writes to the file descriptor when it has data to write. The only way to test if this is true would be implementing an actual event loop for I/O. The easiest way to do that is dropping mio into the pty thread and sending all writes from the input handling over the mio channel.\n\nDiscussion:\nI actually managed to reproduce it with a slightly simpler tmux arrangement. It did not seem to be an issue when there was not a vertical split on the bottom. This may suggest that it's not concurrent read + write that's an issue but instead something to do with printing data while not in a scrolling region. ![image](https://cloud.githubusercontent.com/assets/4285147/18794470/841b0fc8-8174-11e6-9fc3-6b46ec86b45b.png)"}
{"project_id": "Alacritty", "bug_id": "2", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Resizing doesn't work properly on macOS\n\nDescription:\nThe out-of-band resize events on macOS don't trigger a refresh. Need to make it possible to kick the event loop from that resize handler.\n\n"}
{"project_id": "Alacritty", "bug_id": "3", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Doesn't shutdown properly from EOF on macOS\n\nDescription:\nJust open Alacritty and hit ` ` to repro\n\n"}
{"project_id": "Alacritty", "bug_id": "4", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Sometimes reading from pty doesn't trigger a draw\n\nDescription:\nSeems to have happened since the last major refactor.\n\nDiscussion:\nResolved in a91a3f2"}
{"project_id": "Alacritty", "bug_id": "5", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Use XDG_CONFIG_PATH value\n\nDescription:\nCurrently hardcoded to `$HOME/.config`, but that's not necessarily correct. https://whitequark.github.io/rust-xdg/xdg/struct.BaseDirectories.html#method.find_config_file\n\n"}
{"project_id": "Alacritty", "bug_id": "6", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: UK keyboard layout: '#' and '~' key not working on Linux with x11\n\nDescription:\nI've just quickly followed the dependencies for keyboard input. It looks like alacritty depends on [glutin](https://github.com/tomaka/glutin/) which for linux depends on [winit](https://github.com/tomaka/winit) and I found the following lines are commented out in the most recent version [src/api/x11/events.rs#L177](https://github.com/tomaka/winit/blob/master/src/api/x11/events.rs#L177) and [src/api/x11/events.rs#L270](https://github.com/tomaka/winit/blob/master/src/api/x11/events.rs#L270). This seems to be relevant to my issue but I am unsure why it has been commented out. If this is the reason then the layout of my keyboard is irrelevant and most likely other linux users would have the same problem. Having encountered the issue while using alacritty I'm submitting an issue here but should I also post an issue on winit? Or is there another reason for this issue?\n\nDiscussion:\nThis problem would need to be fixed upstream in `winit` as you've suggested. Alacritty is actually on an older for of `glutin` from before the split, and so there would still be some work here to get an upstream patch.\n---\nI'll see if I can fix it tomorrow. Any particular reason you are using an older version of `glutin`? Is it changing too often?\n---\nThere was a couple of features needed for this project that I was having trouble getting feedback on. Specifically, keyboard modifiers needed to be parsed out of the underlying windowing system event and passed with `glutin::Event::KeyboardInput`. I also needed the received `char`(s) to be passed with the event. The latter feature was necessary for either running a key binding or printing the character. For example, you wouldn't want `Command-C` to also print a `c` when trying to copy the selection.\n---\nIn any case, it's on my list to try and upstream the patches and get back on the main glutin tree.\n---\nI found a fix for this issue! Here are the diffs that I am applying on top of https://github.com/jwilm/glutin/commit/af7fe340bd4a2af53ea521defcb4f377cdc588cf which is the version of glutin alacritty currently depends on: This is obviously just a temporary solution waiting for proper patches upstream so I don't know if you'd want to make these changes in your version of glutin. This works for me so I just wanted to share! ðŸ˜ƒ It's possible other useful keys are not yet enabled but I haven't encountered them yet. Great work with alacritty! I see it's becoming very popular, definitely deserved!\n---\nShould be fixed by https://github.com/rust-windowing/winit/pull/1266.\n---\nCan we confirm this is fixed ? If so, the issue can be closed\n---\nif you can see the mentioned PR isn't yet landed."}
{"project_id": "Alacritty", "bug_id": "7", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: PgUp and PgDown don't work\n\nDescription:\nN/A\n\n"}
{"project_id": "Alacritty", "bug_id": "8", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: `alt` key don't work\n\nDescription:\nexample:\n\nDiscussion:\nI had no idea this was a thing. I've looked into this a bit, and ALT seems to be quite a special case for terminal emulators. When there's a key pressed with alt, the terminal emulator should send the escape character (`27` or `\\033` or `\\x1b`) followed by the character that was pressed.\n---\nShould be fixed :smile:\n---\nAlso, thanks a lot for the curses script; it was very helpful!"}
{"project_id": "Alacritty", "bug_id": "9", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Scrolling should not write to the pty when one of the mouse modes isn't active\n\nDescription:\nN/A\n\n"}
{"project_id": "Alacritty", "bug_id": "10", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Improve error handling for font loading\n\nDescription:\nCurrently there's a failing assertion that the user sees as a backtrace. cc #21\n\nDiscussion:\nRefactored fontconfig usage to not panic. Still need to have some better error handling when fonts are not found."}
{"project_id": "Alacritty", "bug_id": "11", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: alacritty does not draw background color for (some) invisible characters\n\nDescription:\nFor example in htop. ![alacritty_bg_example](https://cloud.githubusercontent.com/assets/3718129/21730333/8a3f97ce-d44f-11e6-98e5-e4ac73e3a115.png) Easily visible in this command: because it is entirely invisible in alacritty, but visible in other terminal emulators\n\nDiscussion:\nThanks for the report! This should be relatively easy to fix as soon as I can make some time.\n---\n@jwilm Duplicate issue #123 logged. Hopefully this will provide some extra testing scenarios. Would it be possible to point to the general direction where this sort of thing is handled in the alacritty codebase? Maybe as a beginner task that is easy to fix?\n---\nThe logic for when to skip a cell [is in term.rs](https://github.com/jwilm/alacritty/blob/master/src/term/mod.rs#L135-L136). It uses [`Cell::is_empty()`](https://github.com/jwilm/alacritty/blob/master/src/term/cell.rs#L90-L94) for checking if the cell should normally be displayed. The `is_empty()` logic should be updated for other non-printable characters. Edit: perhaps using https://doc.rust-lang.org/std/primitive.char.html#method.is_whitespace\n---\nThe problem seems to be elsewhere. I completely commented out the skipping code in term.rs but the output still looks exactly the same, so this issue is either not related to blank characters, or it's located elsewhere in the code.\n---\nI can confirm what @d3rrial has described. I tried to comment out the is_empty code and the issue still persists. I think if you have a theme like gruvbox in vim that isn't rendering properly the problem becomes a little bit more interactive / visible. It seems that you just simply can't \"reach\" these characters that aren't being rendered. I'll try and record a gif or a video to demonstrate or maybe try to print out the on the screen what characters are in the empty space.\n---\nHere is a gif of me moving around in vim a little bit and adding some text. Hopefully this helps to visualise the issue a little more. ![gif of issue](http://g.recordit.co/CsISsSMi0j.gif) I'm not too sure what invisible character (if any) vim tries to render when there is no text in a region, but maybe it might differentiate from the example given in the issue description?\n---\n@jwilm I noticed in the test folder a [json dump of the grid](https://github.com/jwilm/alacritty/blob/master/tests/ref/vim_simple_edit/grid.json) whilst in vim. Is there any easy way to produce this whilst in alacritty? I'm thinking this might serve as a useful debugging tool for figuring out what characters background colours aren't being rendered.\n---\nThe easiest way to find out what isn't drawn is probably to look what ncurses uses to fill those line endings with. Maybe it's not invisible characters, maybe it's calculating a line length that's too short? What would happen if, for every line, an invisible (`' '`) character would be appended to the last column?\n---\nThat would make sense. It seems that alacritty is rendering the background colour only for places that have text. The rest of the area appears to be the default alacritty background colour. I imagine a JSON dump of the grid would still help to confirm this though - right? A total guess from knowing nothing about the architecture of this project (or rust) - I would guess that a cell with truly nothing in it would be populated with null, therefore the majority of an empty vim document would be a grid of cells where `c` (as seen in the struct below) is null. Although I'm not sure if a `char` in rust can be null? EDIT: I should've read further down in the code. It would seem (if I'm reading this correctly) that a cell in alacritty defaults to an empty string with (what I can only imagine is) the default fg and bg colour. I guess this would be consistent with what we are seeing?\n---\nAn empty cell is actually populated with `' '` and the default colour: So the problem I guess is that white space characters ('\\n', '\\t', ...)don't update the relevant cells with a colour update\n---\n@basile-henry I guess that seems like the issue then. I guess the first place to start would be to find out where these cells are created in alacritty and what is done with these white space characters?\n---\n@CarwynNelson I think the modification would need to be where the white space characters are handled. First let's start with '\\n' in `src/term/mod.rs`: This should update the current line and add colour data to the cells that need it. I'll see if I can implement that\n---\nJust looking at where `linefeed` is used in `Impl ansi::Handler for Term` and it seems that it should only be called when scrolling past the end of the scroll region? Of course looking at the debug log shows `linefeed` being called when I simply move the (vim) cursor down one line. I'm guessing I'm not understanding this correctly. Could somebody explain to me what is actually going on in this part of the code? EDIT: Here i'm assuming the `scroll_region.end` is the end of everything that should be visible on screen. In other words I was guessing that this code is to do with shifting the view up so that the line out of view can be rendered. If that makes any sort of sense.\n---\nOh right I guess maybe this is for movement rather that input, I'll keep looking for where white space characters are actually handled as input\n---\nActually the gif I posted above explains this quite nicely. You can see the `linefeed` debug being printed out even though nothing new is really being rendered. Could this bit of code be to do with moving at all - rather than just rendering \"new\" things on screen? EDIT: I think it may be easier to see this and find the code responsible with a step through debugger. I'm heading off for a little bit now - but maybe by the time I get back somebody would've beat me to the bug fix :P EDIT EDIT: I'm going to throw a guess out there and say that the easiest place to fix this would be the renderer? Although it would be more desirable to fix it further up the chain where it is easier to unit test. Commenting out loud here :)\n---\n@CarwynNelson ~~I think I've managed to fix it here: https://github.com/basile-henry/alacritty/commit/537471dfd3324162c98d9837da258f9ffa2875f8~~ Would you mind trying this commit before I make a PR? ðŸ˜ƒ At the moment I'm only fixing '\\t' and '\\n' any other white space chars I should fix? EDIT: sorry, some issue with normal linefeed"}
{"project_id": "Alacritty", "bug_id": "12", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Scrolling breaks in vim with ttymouse=sgr on Linux\n\nDescription:\nScrolling always goes down regardless of which way the mouse wheel moves.\n\n"}
{"project_id": "Alacritty", "bug_id": "13", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: [Ranger] Bright colors do not get transferred correctly to bg color\n\nDescription:\n![ranger](https://user-images.githubusercontent.com/312503/27095152-fdadcb06-506c-11e7-9460-d11924b360f2.png) Urxvt top, alacritty bottom. When using ranger with alacritty I noticed that the colors do not match with the ones I get with urxvt. It seems like ranger uses the current color of the file type to draw the background. However in alacritty it doesn't seem to take into account that the bold text changed the color and instead uses the non bright color to draw the bg strip.\n\nDiscussion:\nThere's a config option to draw bold text with bright colors. Please make sure you've got that enabled and that your bright colors are configured differently than normal colors.\n---\nIf you mean `draw_bold_text_with_bright_colors: true` then I have that activated, yes. As you can see in the screenshot, the bold text has a different color than the bg color with alacritty. Here is my color settings:\n---\nOh, sorry. I misunderstood. Sounds like a bug.\n---\n@jwilm It seems like the problem is the \"invert\" color terminal code: Paste that into your terminal and you will see that the inverted bold is not correctly handled. I did take a look at where the bright color computation happens and I think that it happens too late in the pipeline to be able to handle this. Because as it is now, the fg and bg colors are split of long before the bright check happens. So it is impossible to know if the bg color should be bright or not."}
{"project_id": "Alacritty", "bug_id": "14", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: If a job is running in the background, the terminal won't exit\n\nDescription:\nIf I do, for example, this: xclock & disown and then exit, the terminal gets unresponsive and won't exit; and I have to use my WM's \"destroy\" utility to get rid of it.\n\nDiscussion:\nSounds like a bug; thanks for the report!\n---\nIn this case, `io_thread.join()` in `main.rs` never actually joins. After `join()` is called, we receive one more event of kind `is_hup()` which (as far as I can see) we should respond to by shutting down the event loop. We currently just loop again, which in turn causes the event loop to wait forever and never allow it to join to the main thread. Hilarity ensues.\n---\n@lukaslueg I'm not seeing the same thing you are This breaks the outermost loop, and the thread function returns.\n---\nYes. My goggles, they do nothing. But `join()` never returns..."}
{"project_id": "Alacritty", "bug_id": "15", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: thread 'main' panicked at 'index 50 out of range for slice of length 48', /checkout/src/libcore/slice.rs:578\n\nDescription:\nArch Linux, `alacritty-git`, happens with both rust stable and nightly from rustup.\n\nDiscussion:\nI am running into the same problem, it seems to crash in glyph loading : I tried to do a `git bisect` on this, and I found that 4b4a187fbd0cd47cdf6be5614ccfa473f356dac0 is responsible. But this commit does not build :\n---\n@gutigen, you still can use 28700ed for the moment but I don't know how to tell it to AUR.\n---\n@stammw use `source=($pkgname::git+https://github.com/jwilm/alacritty.git#commit=28700ed)` in PKGBUILD\n---\nFor me this happens if the `x`/`y` offsets (`font.offset.{x,y}` in `alacritty.yml`) are so big that the glyph size becomes negative. (I'm not sure if I'm using those words correctly; I know very little about font rendering.)\n---\nI just checked out master, and the problem seems to have disapeared.\n---\nWas testing out Alacritty earlier today and ran into this. Built from master (using Rust 1.16.0), running on Arch Linux, and it only happens when I set the font size to something smaller than `10.0` (though the \"breaking point\" appears to be at `9.5` but I initially wanted to set it to `9.0`).\n---\nYou've got what may be a duplicate bug here: #185 I'll cross-post some digging I did (seems to have to do with pitch and width calculations, and perhaps width being larger than pitch?): I've run into this issue as well (specifically the 'index 68 out of range for slice of length 64' version of the panic). Here is some gdb info at the point where the panic occurs in font/src/mod.rs: Note that pitch = 4, while the difference between start and end (i.e. bitmap.width()) is 8. On our last iteration, we end up here (some variables omitted): Not sure how best to fix it. My stopgap is to replace line 216 in mod.rs with: ...but I'm sure there's a better way. Let me know if there is any other info from the trace you need."}
{"project_id": "Alacritty", "bug_id": "16", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Vim theme background colours not rendered properly\n\nDescription:\nI have the [gruvbox](https://github.com/morhetz/gruvbox) theme setup for vim but the background colour does not seem to be rendering properly. Alacritty on the left vs iterm2 on the right\n\nDiscussion:\nThis should be a duplicate of #85\n---\nI also have colour issues with vim. I use the solarized dark theme in alacritty and vim. Works in st and gnome-terminal. ![vimissue](https://cloud.githubusercontent.com/assets/492753/21737361/2bb3c832-d478-11e6-96ed-a880de6523a2.png)\n---\nThanks @d3rrial I will close this issue and link to it in #85.\n---\n@NickeZ Your issue is probably a separate one: alacritty re-defines terminal colors in its config file. By default, white is 0x424242 for example, which is absolutely ludicrous. I'd recommend you try defining those colors by hand again within the .alacritty.yml config file, in accordance with your solarized dark theme. Maybe also open a new issue. I'm interested to see what comes of this.\n---\nShould this be closed? #85 is closed but with the current build In `vim` I can see background colors not rendering correctly when I page up/down: ![apr-18-2017 21-02-00](https://cloud.githubusercontent.com/assets/2729079/25162895/f3d5093c-247a-11e7-8670-8fc6aa2356da.gif)\n---\nCan confirm, I have the same bug with current master. My repo does include the supposed fix commit a66d19f6337e1dfc756680b8fcb960f84453e783. I've configured Vim to use 24bit colours, and can verify with `vim | cat -v` that it's sending the 24bit escape codes (`^[[38;...m` and `^[[48;...m`).\n---\nAlso witnessing the issue on master today.\n---\n@lwouis I thought we had an issue tracking this specifically, but I can't seem to find it right now.\n---\nWould someone experiencing this issue mind taking #720 for a spin? I believe it should fix this issue.\n---\n@jwilm Can confirm #720 fixes vim background issue for me\n---\nSame here. #720 fixes it.\n---\n#720 fixes it for me too. Thank you! It also fixed the basic background color which was not taking into account outside of Vim. Amazing! On the left is before #720. On the right is with #720. ![selection_010](https://user-images.githubusercontent.com/106195/29208550-c98fedc6-7e8a-11e7-9a84-fa1072f3895a.png) Opening a file in Vim without scrolling ![selection_011](https://user-images.githubusercontent.com/106195/29208549-c98e996c-7e8a-11e7-964d-fbda8adea047.png) Opening a file in Vim, then scrolling down ![selection_012](https://user-images.githubusercontent.com/106195/29208548-c98bf568-7e8a-11e7-8435-fd4f13512860.png)"}
{"project_id": "Alacritty", "bug_id": "17", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: \"out of bounds\" crash - access beyond last row?\n\nDescription:\nRunning the irssi irc client continuously in tmux on a remote machine causes alacritty to always crash after irregular amounts of time. The window has 81 rows, so it seems something is trying to access rows that don't exist. Alacritty version is 9f79d72109b5745c32a8c0bdd4d17799f827fbba from github. Run as: Full backtrace: The durations after which crashes have occurred: Running on OSX 10.11.6.\n\nDiscussion:\nAdded to see what's going on, and this is the result: so the cursor appears at column 0 one line beyond the screen. Hope it helps in tracking the error down. The error is triggered when my network connection has issues and my ssh session - running irssi in tmux - goes down. I'll figure out how to set `cursor.line` to `grid.num_lines() - 1` for now to see what happens.\n---\nAn instance with the solution in 559cfabbe198dbbf21804c201dca46d070eb6cf6 has been running for over a week now without any crashes. Before applying the fix, alacritty would crash several times per day. It can be tested with: which sets the scroll region to 10 - 20, positions the cursor on line 25, and emits linefeeds, or - simpler - I also noticed that a test for newline_with_cursor_beyond_scroll_region was added in 87468b5c00858684ab0a17f9e1821aa374f74924 but not activated. Maybe it can be done with:\n---\nThis was resolved."}
{"project_id": "Alacritty", "bug_id": "18", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Problem loading fonts\n\nDescription:\nHello, I am trying to use this font: [ypn envypn](https://ywstd.fr/p/pj/#envypn) My configuration looks like this: But i get the following error: Did i miss something? I tried to adjust the size and the offset to see if there would be any difference but it's the same, is this a bug?\n\nDiscussion:\nHmm, would you mind running this again with `RUST_BACKTRACE=1 alacritty`? Hard to say what the problem is with the short error.\n---\nI think that this might be fixed with #590. At least for me, I got the same error when I tried to use bitmap fonts before that was merged. But now it seems to be working nicely :)\n---\nSorry for the delay.. Ok, i recompiled alacritty and now works if i set the font size to 10.0. But the font which alacritty displays is the version with the pixelsize set to 13, I tried to put the pixelsize to 15, but i don't know how. I tried with a lot of numbers from 10 to 20 and i can't display the correct terminal font size. Thank you for the response.\n---\nYeah, I also had that problem. It took a while for me to figure out which size the font wanted. @jwilm In most other programs I used, it either auto adjusts the size to the nearest correct one, or it prints out the available font sizes. Perhaps alacritty could do something like this? I would be really happy if it for example printed out this instead:\n---\nWith [bitmap] `xos4 Terminus` font the only working `size` in range 1.0-50.0 is `9.0` and alacritty says: and it only works if dpi is default 96x96. If I set dpi to 48x48 or 192x192, for example, or change size to any other value, alacritty says So I assume the issue is not really about uninformative error message, but about really strange font matching (or https://github.com/jwilm/alacritty/issues/619 should be reopened, if it's a separate issue). There are multiple font sizes installed here: so I don't really understand why size 12 is always used, why it can be used with `size=9.0` (not 12.0) and why dpi setting affects this at all.\n---\nI'm also experiencing this issue with Terminus, but no sizes seem to work for me.\n---\nI can confirm that `xos4 Terminus` is working for me with `size: 9.0`.\n---\nStill having the same issue with `ypn envypn` font.\n---\nRunning with the environment variable `FC_DEBUG=16777215` prints a lot of info from `fontconfig`. BTW, tried freetype2's FT2_DEBUG (i.e. FT2_DEBUG=\"any:10\") but it did not yield anything. I think that the first issue is that `FcFontMatch` in fontconfig does not pick the right PCF file. When configuring alacritty for the Terminus font with size 32.0, `/usr/share/fonts/terminus/ter-112n.pcf.gz` gets picked (size 12). This, regardless of the font size that is passed to the match. I have lots of other `ter*.pcf.gz` files for other sizes, of course, and fontconfig prints _something_ about them. The second issue is the font size disagreement inside freetype2 or around alacritty's use of it - I am not sure, have not delved into these pieces of code too much.\n---\n[Tamzen](https://github.com/sunaku/tamzen-font) used with `Tamzen for Powerline` works with `size: 9.0` but nothing else\n---\nI've managed to fix this problem in pull request #776, more testers are welcomed."}
{"project_id": "Alacritty", "bug_id": "19", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Prevent decreasing font size beyond the minimal value\n\nDescription:\nLinux, X11. Extracted from https://github.com/jwilm/alacritty/pull/949#issuecomment-353494090 ----- I played with holding Ctrl +/- and found a silly issue, posting just in case you can immediately think of a simple fix, otherwise I guess it's not worth looking into: - Hold Ctrl + . The value reaches its maximum value (274 in my case) and stays there, pressing Ctrl + further has no effect. Pressing Ctrl - once reduces font size to 272. - Now hold Ctrl - . The value reaches its minimum value (2 in my case), but further presses of Ctrl - change the value to 2, again and again. If I press Ctrl - 10 times after I already reached the minimal value of 2, then pressing Ctrl + once will have no effect - the font size will stay at 2. I have to press Ctrl + 10 times to compensate for my earlier actions, before further presses of Ctrl + begin to actually increase the font.\n\nDiscussion:\nI can confirm this too.\n---\nI don't believe that #949 fixed the issue described in https://github.com/jwilm/alacritty/issues/842#issuecomment-344752082 The issue is with this call to Atlas#insert. If the font size is increased until it is too big to fit into a single atlas, Atlas#insert will always return an Err. This leads to load_glyph recursing infinitely, since inserting the glyph into an Atlas will never succeed.\n---\nThanks @Aaron1011. I reopened the other issue.\n---\n@Aaron1011 It does actually fix the issue tho. The issue was never that the glyph was too big for a single atlas. Have you tested it out yourself? With #949 the crash doesn't happen anymore when increasing font size. The problem was that the atlas never changed, so there was never a new atlas that was created. In theory you could run into problems with glyphs being too big for a single atlas, but I don't think that's even possible to happen because of gpu restrictions. I've played around with it a bit myself and the max font size goes up to a limit and then just stops. The worst thing I was able to reconstruct was that a few glyphs didn't show up anymore because my gpu driver was spouting errors about textures being too big. I don't think fitting a single glyph into an empty atlas has ever been the actual issue. Or can you still reproduce the issue after #949. I did initially play with changing the recursion strategy, but it turned out for me that after I fixed the obvious problem, all the other issues were resolved too."}
{"project_id": "Alacritty", "bug_id": "20", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Invoking Paste/PasteSelection commands in editor (vim, nano) mangles pasted text with existing text\n\nDescription:\nA screencast comparing gnome-terminal (left) to alacritty (right) will do better than words: ![alacritty-paste-in-editor-inserts](https://user-images.githubusercontent.com/522085/29365327-90b114c0-8264-11e7-9948-abfe3bc64387.gif) The key_binding I invoked is visible on the screencast, it is: ... and I tried `PasteSelection`, with the same results. Am I doing something wrong or is it a bug? This is alacritty master @ 4e9b1c590e8b0990f5f43fa9d7c53a31a92840a8 vs. gnome-terminal 3.18.3, no tmux, under Ubuntu 16.04.3 LTS.\n\nDiscussion:\nInteresting bug, I wondered why I haven't seen it before, apparently I can reproduce it in `nano`, but not in `vi`, `vim` or `nvim`. Curious why...\n---\nI did some testing and if you have `\\n` you get smashed lines, `\\r\\n` you get doubled lines, `\\r` you get correct lines. Demonstration [![thumbnail](https://i9.ytimg.com/vi/b7vCdwta0Zo/default.jpg?sqp=CKDr5c8F&rs=AOn4CLASaFp_WmXuGwTk6VAL7SIbP9daRw)](https://youtu.be/b7vCdwta0Zo) Not sure whether this info helps though.\n---\nSame goes for other curses editors like _joe_. It also results linefeeds to be eaten, so multiple lines become One (like a coherent group of superheroes ;-)).\n---\nOn a brief observation what I see is that alacritty inserts **\\n** within the paste buffer while xterm inserts **\\r** there. I have the feeling that CR and LF is mixed up on pasting (both reading and writing side, possibly).\n---\nWhen pasting a single `\\n`, `nano` behaves as if `^J` or `F4` (justify paragraph) had been pressed: Before pasting: After pasting: Pasting `before\\nafter` seems to give the same results as typing `before after`:\n---\nIn case it matters (probably not, but it may spare duplication of efforts): I verified (on macOS) that `nano` does *not* set alacaritty in bracketed paste mode (`nvim` does). Altering `input.rs` to always force bracketed paste does alter the behaviour in `nano`, but unfortunately the new behaviour, too, is incorrect. Use `echo -e '\\e[?2004h'` if you are curious to test it yourself: no need to alter `input.rs` and recompile (see https://en.wikipedia.org/wiki/ANSI_escape_code#Bracketed_paste_mode).\n---\nApparently, non-bracketed pasting *is* the issue here. When the \"enter\" key is hit, a `CR` (`^M`) is generated (see http://invisible-island.net/xterm/ctlseqs/ctlseqs.html). In non-bracketed mode, `LF`s (`^J`) in pasted data have to be replaced with `CR`s in order to simulate keypresses. In non-bracketed mode, applications have no way of distinguishing if data comes from the keyboard or the clipboard, so it seems sensible that a terminal must simulate keypresses. To me it is not 100% clear to what extent a terminal is supposed to do that (ie: whether octets corresponding to other control characters or maybe to bytes with the high bit set should be processed). Maybe data bytes should be interleaved with `^V`s? Or maybe bracketed mode is how pasting is supposed to work and applications that don't use it are at fault? Anyhow, replacing `\\r` with `\\n` seems an improvement and it is what [jediterm](https://github.com/JetBrains/jediterm) does."}
{"project_id": "Alacritty", "bug_id": "21", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Alacritty's `-v` flag does not work\n\nDescription:\nAlacritty's `-v` flag is used to help with debugging issues and print what is currently going on in the application. This should provide similar output to `RUST_LOG=... alacritty`. However with recent versions of alacritty, the output of `-v` is completely empty. This should be fixed so that `-v` outputs debug information again. The different levels of this flag (`-v`, `-vv`, `-vvv`) are all broken and should be fixed to recover the original functionality. So `-v` should print minimal debug information and `-vvv` should print everything we have.\n\n"}
{"project_id": "Alacritty", "bug_id": "22", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Scrolling region regression\n\nDescription:\nScrolling regions are broken when there's a fixed bar at top _and_ bottom. This is best demonstrated by `htop`.\n\nDiscussion:\nThis is most easily reproduced by opening two buffers in vim using the tabbed layout which should cause a fixed line to appear at top and bottom of screen. Next, hit control up/down in one of the open buffers (assuming it's got lots of lines), and half the screen should remain empty.\n---\nResolved."}
{"project_id": "Alacritty", "bug_id": "23", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Cursor disappears on first column in vim\n\nDescription:\nMoving the cursor down in vim while on the first column causes the cursor to disappear until moved to the second column of a non-empty line. This is on macOS or Linux, vim or neovim, on the scrollback branch at 14a76ec5c78fde8d4fbf1d78e0108ded13a7edc2. Reproduce: `vim <(echo 'one\\ntwo\\n\\nthree')` and scroll down.\n\nDiscussion:\nThanks for filing the issue! I also noticed a problem of the cursor disappearing when using vim-fugitive and `:Gblame`.\n---\nThanks, @jwilm.\n---\nThis was fixed."}
{"project_id": "Alacritty", "bug_id": "24", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Scrollback: `reset` Still Allows Scrollback\n\nDescription:\nSystem: X11 on Arch Linux Using the latest scrollback branch, `reset` still allows me to scroll up afterwards, assuming you initially activate the scrollback ability by entering enough text vertically. On a related note, `clear` may also need to be looked at, but I'm unsure if there's a spec for it, as both `xterm` and `urxvt` handle it differently. On `urxvt`, I'm able to scroll back up assuming I've filled the vertical space enough to allow scrolling, while `xterm` seems to never allow me to scroll back, regardless of the amount of text entered.\n\nDiscussion:\nThanks for the report!"}
{"project_id": "Alacritty", "bug_id": "25", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Scrollback: `reset` Still Allows Scrollback\n\nDescription:\nSystem: X11 on Arch Linux Using the latest scrollback branch, `reset` still allows me to scroll up afterwards, assuming you initially activate the scrollback ability by entering enough text vertically. On a related note, `clear` may also need to be looked at, but I'm unsure if there's a spec for it, as both `xterm` and `urxvt` handle it differently. On `urxvt`, I'm able to scroll back up assuming I've filled the vertical space enough to allow scrolling, while `xterm` seems to never allow me to scroll back, regardless of the amount of text entered.\n\nDiscussion:\nThanks for the report!"}
{"project_id": "Alacritty", "bug_id": "26", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: scrollback: thread 'pty reader' panicked at 'attempt to subtract with overflow', src/index.rs:168:28\n\nDescription:\nalacritty @ scrollback , 8e8ecdd, debug build ` in the new debug alacritty window: `\n\nDiscussion:\nThis probably only happens in alacritty verbose mode.\n---\nI can reproduce it both with and without verbose output. However it only happens in debug mode for me, not in release mode. I'll be looking into it, thanks for the report.\n---\nThis bug's origin is [here](https://github.com/jwilm/alacritty/blob/scrollback/src/ansi.rs#L982) and can be reproduced by running `printf '\\e[1000L'`. I'll look into writing up a quick fix."}
{"project_id": "Alacritty", "bug_id": "27", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Invert escape sequence incorrect\n\nDescription:\nThe command `echo -e \"Normal \\e[101;91mTest \\e[7mInverted\"` will print `Inverted` with the default foreground color as background and the default background color as foreground. The correct behavior would be to print it the same as `Test`. This bug is due to the following code: https://github.com/jwilm/alacritty/blob/master/src/term/mod.rs#L385-L389\n\nDiscussion:\nThe current behavior _should_ match urxvt. Is this a case we didn't cover?\n---\nThis [script](https://github.com/jwilm/alacritty/blob/master/scripts/fg-bg.sh) should check every combination Edit: inlined\n---\nIt does match `urxvt`, however I think that's simply because `urxvt` is doing this incorrectly. ![](https://u.teknik.io/VjFKF.png) (Top to bottom: Alacritty, urxvt, xterm, termite) I'd personally trust the behavior of XTerm and VTE more than urxvt. It seems to me like Alacritty is following a bad example here. **EDIT**: Also, just to list another advantage: It seems like currently we're trying to match urxvt, but this requires adding an additional special case to our codebase. If we'd stick with XTerm's behavior the code would actually be simpler from what I can tell.\n---\nOkay, I've compared `urxvt`, `XTerm` and `Alacritty`, I've excluded `Termite` because it does not invert the cell color for selection. I'd say `urxvt` has some edge-cases where things are weird and it does not handle the `Hidden` attribute at all (neither does `Alacritty` at the moment). In contrast `XTerm` is very consistent and supports the `Hidden` attribute. In `XTerm` no matter which circumstances are present, the foreground color and background color are always inversed upon selection, even if the cell is `Hidden`, the foreground color which would be present is still used for the inverse. Rendering text with the same foreground and background color on top of each other also doesn't exhibit any special behavior, it is rendered as \"invisible\" (see Screenshot in previous comment) and when inversed with selection, the cells simply do not change at all (it inverses from red on red to red on red). I think this makes the most sense, it should be easy to implement and come without any surprises for the user. I'll send a PR which implements this behavior if anyone is interested in giving it a shot.\n---\nbtw, did you test with transparency? Some of our logic is specifically around handling that properly.\n---\nI did not, but that's a great point, I'll throw that in too."}
{"project_id": "Alacritty", "bug_id": "28", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: [Regression] broken `htop` display\n\nDescription:\ncurrently affected master: 715d4f8 working revision: 82c9235 ![spectacle qq8577](https://cloud.githubusercontent.com/assets/3148759/24270236/4009e116-100c-11e7-9a1a-c3ce0ffb343c.png) Steps to reproduce: 1. `htop` 2. wait a few seconds bisect: 96a1503040787006a45a69dc55916d983d96421e is the first bad commit\n\nDiscussion:\n@zetok, I can't reproduce this on the latest master. Can you retest? If it's still occurring, are you running this under Linux or Mac? (Could be render system dependent.)\n---\n> Can you retest? I did test against latest master. > If it's still occurring, are you running this under Linux or Mac? (Could be render system dependent.) Linux.\n---\nperhaps relevant, my `alacritty.yml`:\n---\nSomething in between 715d4f8...7bc1691 improved situation, most likely a66d19f6337e1dfc756680b8fcb960f84453e783. There are still missing characters on 7bc1691: ![spectacle tj7267](https://cloud.githubusercontent.com/assets/3148759/25053461/4c0c8366-214f-11e7-9165-6a9b1595f7dd.png) NB: on #494 there are no missing characters.\n---\nActually, nvm, situation didn't improve, now it just takes a lot longer (a few minutes) for `htop` to be completely broken.\n---\nIs there any other info you can provide? I cannot reproduce this on latest master. * Are you resizing the window at all? * Approx window dimensions * OS * htop version * TERM value Not sure what else to ask for right now. I've been running htop for a while now with no issue.\n---\nI can reproduce this on d372f2e. It only happens for me when using tmux. (It doesn't occur when using tmux in roxterm.) > - Are you resizing the window at all? No. Resizing seems to force a refresh and gets rid of the corruption temporarily. Forcing a refresh in tmux (C-b r) does the same thing. > - Approx window dimensions It seems to happen at any window size, but more frequently when there are fewer columns. 40 (rows) x 119 (columns) is one size I tested that seems to corrupt quickly, for example. > - OS Arch Linux > - htop version 2.0.2 > - TERM value screen-256color\n---\nI see similar artifacts on macOS when using a TERM of xterm-256color or screen-256color. For the latest version of tmux you have to use tmux-256color. When I use that terminfo definition everything renders perfectly as expected. See the following describing this on Arch Linux: https://wiki.archlinux.org/index.php/tmux#Setting_the_correct_term\n---\nI still see the problem when I set that to tmux-256color.\n---\nHas anyone had this happen _outside_ of tmux?\n---\nYes, i have these bugs without tmux.\n---\n>Has anyone had this happen outside of tmux? Yes, never used tmux/screen, just bare alacritty. - Are you resizing the window at all? No. - Approx window dimensions 66% and 50% of screen width under ~default i3 on 1920x1080 display - OS: Gentoo - htop version: 2.0.2 - TERM value: xterm-256color - default value from alacritty's config >Not sure what else to ask for right now. I've been running htop for a while now with no issue. I think that issue might have something to do with htop showing one or more cores being utilized at 100%.\n---\nOut of curiosity, of those who can still reproduce this bug, with or without tmux, could you try to see if you can also reproduce #540? I've just tried on latest `master` https://github.com/jwilm/alacritty/commit/32248471667dbdea33fca5e12fa0cb8a43482106, I can also confirm weird rendering of `htop`, but it happens (much more often / only) inside tmux. The #540 is however reproducible both with and without tmux, and I'm still wondering if this is the same bug. Look at the missing rows and at the `USER` column, `tmux` is on the left. ![alacritty](https://cloud.githubusercontent.com/assets/1177900/26034837/1bb7b92a-38c3-11e7-9f42-0fdb9b174df2.gif)\n---\n@maximbaz what's your terminfo file for tmux-256color look like? Seems like it might be declaring a feature that tmux doesn't support.\n---\nHm, is this the file `/usr/share/terminfo/t/tmux-256color`? It consists of a bunch of escape sequences, I'm certain I haven't modified it ðŸ™‚ I've just tried tmux with the default config (where $TERM is `screen`) and the default config with just one override (`set -g default-terminal xterm-256color`, which makes $TERM `xterm-256color`), in both cases I see that same refreshing issue in htop."}
{"project_id": "Alacritty", "bug_id": "29", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Terminal alternate mode is toggled, not set.\n\nDescription:\nTry running `tput smcup` or `tput rmcup`. Both do the same thing. **Toggle** alternate mode. `smcup` is supposed to activate, and `rmcup` disable.\n\n"}
{"project_id": "Alacritty", "bug_id": "30", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Touchpad scrolling is janky\n\nDescription:\nI don't know exactly what's going on, but when I scroll with the touchpad it requires me to scroll a lot before it will even register, and then it scrolls a ton at once.\n\nDiscussion:\nAccording to hwinfo it's a \"ETPS/2 Elantech Touchpad\", if that helps at all\n---\nCould you run alacritty with `alacritty --print-events`, try scrolling, and pastebin the log? My initial guess is that we are getting funny data out of winit.\n---\nHuh, I experience that too, although I always blamed tmux for this - but no, in sakura terminal the scrolling is smooth. The log: https://gist.github.com/maximbaz/7cc8521f033e04a53924416f26332164 What happens in the log: - Alacritty starts, I type \"tmux\", then \"tree\", then cancel with with Ctrl+C after a bit. - Scroll up with touchpad with my usual speed of scrolling (nothing is being scrolled in tmux) - Scroll up much faster (tmux begins to scroll up) - Scroll up with usual speed again (nothing is being scrolled in tmux) - Scroll up much faster (tmux scrolls up) - Close tmux and then terminal with Ctrl+D.\n---\nThanks @maximbaz. Here's the interesting part. All of these events have fractional line deltas. Alacritty [assumes that they will be integer values], and the floats are truncated accordingly. This is obviously wrong. We'll need to track a bit more state to get this right. [assumes that they will be integer values]: https://github.com/jwilm/alacritty/blob/492d1bd3d56af94d4d1d05e17fb8a6acf354a170/src/input.rs#L354-L364\n---\nHeh I can certainly see why it is made like that ðŸ™‚ This is a one stop of a scroll with an external mouse: And this is one stop of a scroll with touchpad: I wonder if you have a general idea how to normalize values coming from touchpad? ---- It is also surprising that scrolling with mouse produces way more WindowEvents than scrolling with a touchpad. Mouse, full list of events for one scroll stop: Touchpad:\n---\n@Ralith is this behavior normal for trackpads on x11? (**TLDR:** external mouse wheel gives integer line deltas, trackpad gives fractional line deltas). I'm trying to figure out if this should be resolved in winit or Alacritty. The trackpad events almost seem like they should be generating a pixel delta instead of line delta.\n---\nThis is the intended behavior. Alacritty should not be truncating scroll values; if they were guaranteed to be integers, then winit wouldn't use floats there in the first place. The meaning of a fractional line delta is literally a fraction of a line (or more generally, a scroll unit). Smooth scrolling devices are not in general directly related to pixels, after all.\n---\n@Ralith thank you for the clarification! For some reason I had it in my head that smooth scrolling would always use pixels as a reference.\n---\nIs this a new issue? I just started using alacritty and it just so happens that I encountered this issue just now.\n---\n8a65870 fixes this. I'm unfamiliar both with Rust and with alacritty's structure, so this is indubitably the wrong way to do it (the state is getting passed all over the place, I used terrible names, and it's largely just a result of changing stuff until the compiler was happy without really knowing what I was doing). A review of how I should have done this would be very welcome :)\n---\n@lheckemann not a new issue, but I don't think a lot of people were likely to encounter it. It requires running x11 on a laptop with a trackpad that generates fractional line deltas in an application that supports scrolling with someone who uses the mouse in terminal. Probably why is hasn't been reported until recently. Love that you've put together a patch for it! I would be happy to provide feedback. Would you mind putting up a PR so we can use the GitHub review tool on it?"}
{"project_id": "Alacritty", "bug_id": "31", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Excessive memory usage/leak during selection with less\n\nDescription:\n> Which operating system does the issue occur on? Linux X11 On Alacritty 0.2, when working with large text files (in the order of millions of lines) I am using as I don't want the terminal itself to deal with such large numbers of lines. Nonetheless, is set to 100000 lines. When I select lots of text in less using the mouse cursor, and exceed the upper or lower screen edge with the selection, Alacritty freezes and starts continuously consuming more and more memory. I managed to SIGSTOP it at 25.5GB, and it would've killed my system had I not managed to do that. It seems something related to selections triggers a severe memory leak or unbound loop. I will try to provide better repro steps when I have the time.\n\nDiscussion:\nOk, managed to repro. - Open with a text file that contains a few screens worth of lines at least. - Scroll down a few screens - Select everything with the mouse, from bottom to top - Keep mouse selection button pressed - Scroll up using the mousewheel, **fast**, (mwheel events needs to be passed through to less) - When less reaches the top, release mouse selection button, while still scrolling up - Alacritty freezes and starts consuming memory\n---\nWow, sounds bad. Thanks for the report. Prioritizing as high.\n---\nI was trying to reproduce this earlier. I'm not sure if it's related but there also seems to be a behavior issue with the selection if you scroll down at least one line in something like `less`, then select at least two lines including the status line at the bottom, then scroll back up.\n---\nFurther info: Tested on 0.2.0 with commit 1887722ef5b6ac1 (not tested without) and 0.2.1, both are affected. I've also added that you have to release the selection button to the repro steps.\n---\nVideo of reproduction on my system http://cl.ly/3142fd7366ed.\n---\nI have same issue, happened during text selection, but I'm not sure whether I was in less at the time. Anyways, I never had time to stop it, so it brought down the whole system.\n---\nWith the commit applied, I can't reproduce the bug anymore. Thanks!"}
{"project_id": "Alacritty", "bug_id": "32", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Inverted Selection when Faux Scrolling\n\nDescription:\nRather than attempt to describe the problem in detail, here are the steps to reproduce. 1. Run `man man` 2. Scroll down at least one line 3. Select the some text from both the status line and the line above it 4. Scroll up You should see the selection become inverted.\n\n"}
{"project_id": "Alacritty", "bug_id": "33", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Alacritty won't start if window.dimensions.columns and lines is 0\n\nDescription:\nI have following in my config: This seems to be breaking alacritty now with: I think it's broken by change: https://github.com/jwilm/alacritty/commit/d05d16f023b27fc4707478668db73d6860918956#diff-f3f442280fb5120848272b348120ec52L156 Although [comment in the default config](https://github.com/jwilm/alacritty/blob/master/alacritty.yml#L19) says the `0` is valid:\n\nDiscussion:\nI was not aware that specifying 0 was allowed here. I would have expected optional values to use `Option` instead. I'll fix this asap to make it work again, but in the future there might be a better stylistic approach to optional values.\n---\nWould you mind testing if https://github.com/jwilm/alacritty/pull/1782 works?"}
{"project_id": "Alacritty", "bug_id": "34", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Selecting large amounts of text makes highlight disappear\n\nDescription:\n> Which operating system does the issue occur on? Linux X11 When selecting text and scrolling at the same time using the new scrolling->history feature, there is a visual bug concering the selected text. When more text is selected than fits on the viewport, and the viewport is scrolled so that **only** selected text is visible, the selection marker (inverted colors) disappears. If the viewport is scrolled so that only parts of its contents are selected, the selection marker shows up fine.\n\nDiscussion:\nThanks for the report! I believe that nobody actually ever tested selection while scrolling, since it's a bit awkward to do with a mouse. Currently it seems like the selection only updates during mouse movement, not when scrolling. But since scrolling changes the text under the cursor, it should also update the selection. I believe implementing this should work around the issue of selection disappearing and it should provide the added benefit that selection during scroll feels more responsive.\n---\nOkay, so it turns out my original comment on this issue was a bit misguided. The selection not updating when scrolling and the issue reported here are entirely separate. **Edit:** See #1598 for the other issue I've mentioned in here and #1597 for a solution to this issue.\n---\nConfirmed fixed. Thank you!"}
{"project_id": "Alacritty", "bug_id": "35", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Cursor not hollow when window starts unfocused\n\nDescription:\nPlatform: Linux X11 (i3 specifically) When launching a new instance of alacritty, the cursor is a solid block despite the window being out of focus (I have `no_focus [tiling]` set in my i3 config). Focusing the window, then un-focusing it behaves correctly. For reference, the related settings are the defaults of `cursor_style: Block` and `unfocused_hollow_cursor: true`.\n\nDiscussion:\nThanks for the report! Sounds like a bug.\n---\nhttps://github.com/jwilm/alacritty/pull/1569 resolves this issue on i3. I'd love some testing on macOS/Wayland if possible, but it should be good to go the way it is."}
{"project_id": "Alacritty", "bug_id": "36", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Underlining \"jumps\" spaces between underlined text\n\nDescription:\n## System | | | |------------------|-------------------------------| | Operating System | Arch Linux | | Rust Version | Stable, 1.31.1 | | Display Server | X11 | ## Summary Ever since proper underlining was implemented in #1078, standalone Alacritty renders underlines that \"jump\" the spaces between underlined sections of text (see image below). Using #1921 does not change this behavior. ![image](https://user-images.githubusercontent.com/28582702/50556234-3888fd00-0c8b-11e9-9504-75f4daa90d52.png) ## Extra I only noticed this because I fired up an Alacritty instance outside of tmux. For whatever reason, tmux properly handles the underlines between underlined-but-not-connected sections of text. See below for \"expected\" output, produced from within a tmux session: ![image](https://user-images.githubusercontent.com/28582702/50556586-f0200e00-0c8f-11e9-9a29-34cfa56ad2ee.png) Potentially relevant `alacritty -vvv`:\n\nDiscussion:\nFixed in https://github.com/jwilm/alacritty/pull/1961. Thanks for the report!"}
{"project_id": "Alacritty", "bug_id": "37", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: [regression] padding is breaking few things\n\nDescription:\nUsing f182afa > Which operating system does the issue occur on? OSX. This is a regression. ### 1. the documentation says it's using non-DNPI-scaled values But I don't think that's true. For example, `18` looks like `72` hardware pixels. ### 2. the last line of the terminal is not rendered. STR: - set padding y to `2` - run terminal - press enter until the prompt reaches the last line - press enter one more time, see how the prompt is hidden ### 3. the mouse coordinate is calculated wrong - set padding y to `20` - run terminal - type `man man` - double click on any word, see how the wrong word is select (one line below)\n\nDiscussion:\n8161798 doesn't have these issues.\n---\n@paulrouget Could you share the output of `alacritty -v`? Specifically the cell size, window size and number of columns and lines. Also would you mind testing https://github.com/jwilm/alacritty/commit/dba3cccf6948fb993e02d03ca8891fbc7f6cd3e6? If the issue doesn't happen with that commit, it might be good to just revert the last change temporarily to fix the stable release. Also it is true that the padding is scaled by DPI now. The documentation needs to be updated.\n---\nNote that I was able to reproduce this on my system, so it's not necessary anymore to produce further debug output. I'll try to fix this asap."}
{"project_id": "Alacritty", "bug_id": "38", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Crash when I `cat` a file\n\nDescription:\nOn windows, I tried cat attached txt file and it crashed. [protonmail_gray.txt](https://github.com/jwilm/alacritty/files/2488781/protonmail_gray.txt)\n\nDiscussion:\nThe only thing I can see with this which might cause issues is that it's missing a newline at the end of the file. That shouldn't crash anything, but would you mind adding a newline to the end of the file, just to troubleshoot where the issue is coming from? Also, just to make sure: When you say 'it crashed', you're talking about Alacritty? Or are you talking about `cat`?\n---\nI tried with missing newline and Alacritty still crashes, the window suddenly disappears [protonmail_gray.txt](https://github.com/jwilm/alacritty/files/2488813/protonmail_gray.txt)\n---\nDoes `cat` work with any other file? It looks like there should be nothing special about the new version of the file you've sent. No special characters, escape sequences or missing newlines.\n---\n[tags.txt](https://github.com/jwilm/alacritty/files/2488826/tags.txt) This file works fine, it'sâ€¦ really strange ^^'\n---\n@Geobert When starting Alacritty from a different instance of Alacritty and you make it crash, is there any error output?\n---\nUnfortunately, no :(\n---\nOh, that seems quite unusual. So Alacritty just closes and you get thrown back to the shell in the terminal emulator you've used to start it? Is the return code `0`?\n---\nOo yes it isâ€¦ this is beyond weird ![image](https://user-images.githubusercontent.com/72570/47111192-c20f5e00-d24a-11e8-8b46-6da8a6c630df.png)\n---\nI can't test on Windows, but it looks like Alacritty chooses to close down itself. It probably shouldn't be super complicated to figure out why that is, but it would require some debugging. Maybe @zacps can take a look at this? Would be interesting to see if this can be reproduced first.\n---\nI suppose on your system, it does not crash?\n---\nHi. @chrisduerr, I noticed both protonmail_gray.txt start with Byte Order Mark `EF BB BF`. Is it problem?\n---\nGood catch @PrsPrsBK I've changed the encoding and it does not crash any more!\n---\n@Geobert It does not crash on my system, since I'm running Linux. But great catch @PrsPrsBK. Not sure why this would be a problem though.\n---\n@Geobert It's nice! @chrisduerr I had bad experiences due to BOM. I see, it need to see `cat`'s output (if exists), if I would like to know in detail. thanks. *added later* I did not experience the problem, I had just noticed BOM and wrote."}
{"project_id": "Alacritty", "bug_id": "39", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Can't clear warning/error with `clear` or `CTRL-L` in tmux\n\nDescription:\nWhich operating system does the issue occur on? Fedora release 29 (Twenty Nine) If on linux, are you using X11 or Wayland? X11 The warning/error which is displayed by Alacritty at the bottom of the terminal doesn't go away, if I press `CTRL-L` or type `clear` inside the terminal. It obviously works, if I'm outside of tmux, just not inside.\n\nDiscussion:\nThanks for reporting this issue. I haven't considered tmux when adding the keybinding, but it makes sense that there might be some conflicts here. I'm not sure if there would be a way to fix this so that `C-L` and `clear` work, but it should definitely work to add a new keybinding, so hopefully that will fix it for everyone.\n---\nI've looked into which escape sequences are sent in `tmux` when running the `clear` command, just to check if there's something Alacritty could hook into to remove the errors and warnings when running that. Based on my testing, there's no nice escape sequence sent which would allow for that, so I'd probably just recommend adding a new key action which then can be used. Just for documentation, these escapes are sent when running `clear` inside of `tmux` on my system:\n---\n> Based on my testing, there's no nice escape sequence sent which would allow for that, so I'd probably just recommend adding a new key action which then can be used. Yeah, no worries, I'm just going to do that. Maybe an option inside the config to disable the warning displayed on the bottom would be a good idea? I don't know.\n---\n@OkanEsen I'm not a huge fan of that idea. These warnings should be fixed, rather than ignored. Most cases this is something which can be easily resolved by the user.\n---\nYeah, just gave it a second thought and I agree with you. I think the issue can be closed, if that's okay.\n---\nI'll close it with the PR for the action. I'll open that in a sec.\n---\nI've opened the PR (https://github.com/jwilm/alacritty/pull/1814), feel free to test if this resolves the problem for you."}
{"project_id": "Alacritty", "bug_id": "40", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Selection misses first character\n\nDescription:\nSelecting in alacritty often misses the first character. Other terminals (such as urxvt and xterm) always include the first character in the selection even if only part of it is selected. Edit: I should add that this was tested on scrollback@4631ca4 Alacritty: ![alacritty_selection](https://user-images.githubusercontent.com/11533746/41203662-c6730ec4-6cc9-11e8-8bc7-17063ada0a63.gif) Urxvt ![urxvt_selection](https://user-images.githubusercontent.com/11533746/41203932-76730916-6ccd-11e8-8411-eb5b864c4065.gif)\n\nDiscussion:\nThis was an intentional design decision and I'm not sure if there's any intention to change it. As far as I'm concerned I think it's the proper behavior to select a cell only if most of it is inside the selection.\n---\nPerhaps it isn't what I thought. Fiddling with text selection in chrome, I see similar behaviour where it only includes the character beneath the cursor if more than half of it is selected. This logically makes sense; however, in practice, alacritty is consistently failing to select as expected. Though I am now noticing another issue that may be the root cause of this. The start of the selection does not seem to be tied to where the mouse down event happened. You can click on a cell, wait, and then move the mouse quickly to start selecting and if you moved fast enough, the first cell of the selection will not be where you first clicked. ![alacritty_fast_selection](https://user-images.githubusercontent.com/11533746/41206251-db244258-6cf0-11e8-949e-a823315400ff.gif)\n---\nI'm not able to reproduce this, could you provide some additional system information?\n---\nHardware: Asus UX430UA OS: Arch Linux x64 Kernel: 4.13.12-1-ARCH GPU: Intel UHD Graphics 620 GPU Driver: i915 Window Manager: I3 Let me know if you need any more specifics. At some point in the next week I should be able to run some tests in more generic environments\n---\nI've tried this on a slower machine and there I'm able to reproduce this issue. I'm not quite sure what's going on here but it seems like a bug. It's potentially possible that this is caused by winit but I'd say it's unlikely, once the mouse down event is received alacritty should know the start position, so it's likely that there's some kind of problem in alacritty. Now the only question left is if this is also present on the scrollback branch. I'll try to test this whenever I've got the time, but if you want to test this on your machine too @jrouleau it would be much appreciated. **EDIT:** Note that I'd personally say that the original issue mentioned here is probably a wontfix. I can imagine that a configuration option could be introduced if someone is willing to do the work, but it's unlikely the default behavior is going to be changed. However the bug should definitely be fixed, so I'd use this issue to track the progress on fixing that bug. If you want to create a separate issue for tracking a configuration option for sub-cell selection start, feel free to do so. But it's probably going to be low priority, at least for me.\n---\nI have this issue on my laptops as well, and I can confirm that it also happens on the master branch. It should be noted that this issue doesn't seem to be caused by a selection starting just in the middle, you can drag your cursor over almost the whole letter and have it missed. Further, if you click, and very slowly drag after a short pause it works as intended pretty reliably.\n---\n@chrisduerr I use and discovered the issue on the scrollback branch so it is definitely present there too.\n---\nThanks for looking into this! I'll take a peek at the code when I've got some time. Sounds like it's either a super simple fix or some really painful racing condition or something like that. :D\n---\nI've opened a PR which should fix this (#1389). I don't think there are going to be any issues with this, but testing is still always welcome! :)"}
{"project_id": "Alacritty", "bug_id": "41", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: How to disable URL launcher?\n\nDescription:\nHow to completely disable URL launcher? Every time I am trying to highlight an URL and then browser shows up, I would like to disable it.\n\nDiscussion:\nIt seems like this regression has been introduced when the configuration files have been merged. It's still possible to disable URL launching by setting the `launcher` to `true`, but an option to disable this completely should be supported explicitly.\n---\nFixed in #2059.\n---\n@joeky888 I'm assuming you mean that when you try to select that sometimes you simply click on accident and it then opens the URL. If you are seeing the URL open when clicking and dragging your cursor over a URL to select, that is a bug, which I cannot reproduce on my machine.\n---\n> you simply click on accident Yeah, that's not a bug. > Fixed in #2059. Thanks.\n---\nWith the version 0.8.0 the `url.launcher` is deprecated, to disable xdg launcher in version 0.8.0:\n---\n> With the version 0.8.0 the `url.launcher` is deprecated, to disable xdg launcher in version 0.8.0: > > its working. when you hover with the mouse on `git:(master)`, for example, its not a URL anymore. yay. thanks man.\n---\nFyi mouse is disabled by default for hints. So you can just remove the entire `mouse` section.\n---\nFor my fellow Googlers, you can actually have it both ways. I don't like that URLs open when I double-click them, because that makes them annoying to select for copying. However, I also often want to open URLs in my default browser, so it would be nice to be able to do that as well. This configuration enables ctrl+click on links to open them using xdg-open: And I can now double-click to select.\n---\ni can say you are a pro googler\n---\nThe solutions in this report seem to work for regular links but not for all cases. When I get certain errors in gcc, there are often hyperlinks included. Running a hello world without stdio.h will result in: `warning: implicit declaration of function â€˜printfâ€™ [-Wimplicit-function-declaration]` where -Wimplicit-function-declaration will be a hyperlink to gcc.gnu.org No matter how I configure alacritty, it seems impossible to disable the link feature and a single click on the error message will open a browser. How do I disable ALL hyperlinks in alacritty?\n---\nYou set the `hyperlinks: false` for the default regex hint?\n---\n> You set the hyperlinks: false for the default regex hint? This seems to be ignored no matter how I set it. Here is the config: It still executes xdg-open when a link is clicked on.\n---\nHow does this work in the new Alacritty where it uses TOML instead of Yaml? The above regex when converted to TOML doesn't load.\n---\nFound it: https://github.com/alacritty/alacritty/issues/5246#issuecomment-1878166299"}
{"project_id": "Alacritty", "bug_id": "42", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Decreasing font size too much causes division by zero\n\nDescription:\nWhich operating system does the issue occur on? Windows. I have also tested on Linux/X11 and could not reproduce there. Version of alacritty: 4380d0864b1098909bdcfec132b866c34924517e How to reproduce: 1. Open alacritty 2. Press `Ctrl`+`-` to scale the font down until it disappears 3. Move mouse over the window 4. alacritty crashes with the following stack trace: When I add a following check, it hits the newly added panic on hitting the last `Ctrl`+`-` to scale the font down:\n\nDiscussion:\nThere is a check for font size in [change_font_size](https://github.com/jwilm/alacritty/blob/4380d0864b1098909bdcfec132b866c34924517e/src/term/mod.rs#L895) that ensures font size is `FONT_SIZE_STEP` (0.5) at minimum. However, I think that a check for font size is not sufficient, since the cell size depends on the font metrics (and so only indirectly on font size). So I think a proper fix would be to calculate the font metrics for new size first and only update the font size and glyph cache if the new cell dimensions are valid."}
{"project_id": "Alacritty", "bug_id": "43", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crash when live reloading history size\n\nDescription:\nWhen reducing the history size at runtime by changing the config with live reload enabled, Alacritty will crash if the user isn't scrolled all the way to the bottom. The history will also never grow, but only shrink.\n\n"}
{"project_id": "Alacritty", "bug_id": "44", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Reset not resetting alternate screen correctly\n\nDescription:\nWhen entering the alternate screen buffer (`echo -e \"\\e[?1049h\"`) and resetting the terminal (`reset`), the screen is cleared and everything is reset, however Alacritty is not back in the normal screen buffer. This shows itself in no scrollback history being available, even after trying to switch out of the alt screen buffer again.\n\n"}
{"project_id": "Alacritty", "bug_id": "45", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty can't start with a full disk\n\nDescription:\nAlacritty does not seem to be able to start if it is not able to write to the disk. This is not ideal in case you want to open a terminal to deal with that very situation and are unable to. This is on Linux, with xorg.\n\nDiscussion:\n@NotAFile This is hopefully fixed by https://github.com/jwilm/alacritty/pull/1991. I had to take a guess what specifically caused this issue for you, but this should be the only file creation which is done by Alacritty that hasn't been handled until now. Please let me know if this did not solve your problem. In that case it would probably be helpful to provide a stack trace to pinpoint the exact problem."}
{"project_id": "Alacritty", "bug_id": "46", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Mocp drawing is broken\n\nDescription:\n> Which operating system does the issue occur on? Linux > If on linux, are you using X11 or Wayland? X11 I could have sworn this was fixed in the past. But I can not find the previous issue for this, so I guess this might have been on IRC (or it was only in my dreams...) The issue is that mocp uses a terminal command to draw/redraw the progress bar. However it seems like this command is not working as it should in alacritty. The issue happens when playing an audio file and the progress bar is moving along the bottom: ![mocp2](https://user-images.githubusercontent.com/312503/50513401-e03dd980-0a97-11e9-80c3-a6edf6f861a0.png) The the progress bar hits the same position as the square bracket time stamp, the left most cell will vanish and there will be a gap in the progress bar too. IIRC, this was a problem in the early days of alacritty too. But back then it was because the terminal command code used in this operation was not implemented. So this is a regression of sorts. But I don't know when the regression happened... This happens with `TERM` set to either alacritty or xterm\n\nDiscussion:\nIs [this](https://github.com/jwilm/alacritty/issues/612) the previous issue you're talking about? I'm not sure if the space in the line above the bar is related, I don't see how that would affect things. However I'm unaware of how mocp draws things, so I'm not sure why this wouldn't work. A complete background change shouldn't be an issue and the escape sequence from the previous issue works just fine for me.\n---\n@chrisduerr nope, that was a separate issue. That still works as it should. EDIT: IIRC, the space was relevant as mocp would trigger an optimized redraw command when the progress bar reached that location.\n---\nThe problem with an `optimized redraw command` is that it might not be 100% sound and cause issues with Alacritty, since some programs rely on slow drawing terminals or just partial damaging of the viewport instead of full redraws. Would be good to find an independent example to make it clear that this is actually an issue with Alacritty and not just `mocp` trying to use a 'hack' for redrawing faster which isn't guaranteed to work properly by the various terminal specifications.\n---\nI think was a simple term code that it used. It's using ncurses from drawing IIRC. It there a way to see the term codes sent in a debug mode?\n---\nThe command `alacritty -vv` will print all unhandled escape codes sent. To print every escape code, you'd have to modify the code. However there will likely be A LOT of escape codes.\n---\nThis works as it should in the 0.1.1 release. So this seems to be a regression. I'll try to narrow down the commit that broke it.\n---\nThanks, that will likely help a ton. Especially if it was a small commit which broke things.\n---\nIt seems like it is 0c3e28617a95b4ca30ad9bdbb9114f1e4d41dce5 that breaks it. 21f888ec4149e3078830dfcf9a17adda0ec7623a works as it should.\n---\n~~Here's a simple minimal command for reproducing this issue:~~ ~~It seems like the `\\e[10X` escape sequence should change the color for the next 10 cells, however since tabs are more than one cell long, things get messed up.~~ **Edit:** It seems that this escape looks similar to the issue, but comparing Alacritty to XTerm, Termite and URxvt here looks like Alacritty is doing everything correct.\n---\nI should note that this is a redraw issue. It renders fine at first. But some new draw commands seems to mess up the existing cells. I also noticed some problems in weechat where letters disappear from the input field if I move the text cursor over them. But I haven't checked if it is 0c3e286 that is the cause for this too yet...\n---\nI have never encountered anything like that in weechat and I'm using that on a daily basis. Are you running these inside of tmux?\n---\nNo, I'm running it without tmux/screen. ![out](https://user-images.githubusercontent.com/312503/50561632-c953ed00-0d0c-11e9-8052-1abab3939115.gif) ![out2](https://user-images.githubusercontent.com/312503/50561727-cc031200-0d0d-11e9-9d07-683f0bb47e8b.gif)\n---\nI can not reproduce this. Which shell are you running? Are you certain this is caused by the commit you've linked (do both these issues get fixed with the previous commit?)?\n---\nYes both gets fixed if I revert the changes made to `src/term/mod.rs` in 0c3e286\n---\nI'm also affected by this in Emacs terminal mode and can confirm that reverting [0c3e286](https://github.com/jwilm/alacritty/commit/0c3e28617a95b4ca30ad9bdbb9114f1e4d41dce5) resolves the issue. The symptoms are exactly the same as the animated GIFs as shown in [the comment above](https://github.com/jwilm/alacritty/issues/1933#issuecomment-450649585): when moving the cursor to the right, the character glyph under the previous position randomly vanishes. (BTW, reverting has a minor conflict because of some refactor that has already happened in `src/renderer/mod.rs`.)\n---\nIf it helps, my `TERM` is `xterm-24bits` whose terminfo definition came from this: https://www.gnu.org/software/emacs/manual/html_node/efaq/Colors-on-a-TTY.html ."}
{"project_id": "Alacritty", "bug_id": "47", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: alacritty-0.2.4: URLs can be incorrectly extended onto the next line\n\nDescription:\nWhich operating system does the issue occur on? Probably any If on linux, are you using X11 or Wayland? X11, but I don't think that's relevant There is a minor bug in the URL grabber. I'm running irssi in an alacritty, and this is an excerpt of my session: 13:17 * Grimes examines the latest issue of Stars and Stripes 13:22 https://www.geologyin.com/2018/12/largest-known-diamond-in-north-america.html 13:22 * ShowTitle Largest Known Diamond in North America Found It just so happens that the URL in the middle line ends **EXACTLY** in the last column of the terminal. When I click the link to open it, alacritty does not realize that the URL ends there, and wraps around and grabs the timestamp from the next line and appends it to the URL, which then does not resolve because largest-known-diamond-in-north-america.html13:22 does not exist. I'm not certain how alacritty can best detect this condition. Clearly I can work around it **in this use case** by making my URL handler strip anything that looks like an Irssi timestamp off the end of the URL, but that's not going to work for everyone.\n\nDiscussion:\nIt should be possible to check the last cell of the row for the line break flag and only wrap around if this is not present.\n---\nThis has been fixed in #2192. Please let me know if this does not solve the problem for you.\n---\nI will keep a watch out for an opportunity to retest this as soon as 0.3.0 hits Gentoo."}
{"project_id": "Alacritty", "bug_id": "48", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crash when resizing with URL highlight\n\nDescription:\nThe URL highlight stores the state of the last URL highlight with the position of the URL start position. However when resizing, it's possible that the indices of this point change which will cause a crash if the old positions are not within the grid anymore. The best approach to fix this seems to be to clear the URL highlight state when the window is resized.\n\n"}
{"project_id": "Alacritty", "bug_id": "49", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Alacritty doesn't close until the first event after exiting shell\n\nDescription:\nWhich operating system does the issue occur on? Linux, Ubuntu 18.04 If on linux, are you using X11 or Wayland? Running Wayland with XWayland (`env WAYLAND_DISPLAY= alacritty`) When I leave the shell with ^d or \"exit\", alacritty will stay alive until I do the next thing (move my mouse, click, type a character, or defocus). I'd expect it to die immediately after exiting the shell. Screen recording of the issue: https://webmshare.com/DdYGG glxinfo:\n\nDiscussion:\nAccording to #1342 this issue is not only present with Wayland, so removing the wayland tag and changing the title to be more accurate. More information about this problem on X11 is present in the referenced issue.\n---\nI took a peek at this one. Looks like when https://github.com/jwilm/alacritty/blob/6cbae83f174fa6d114ea66b1f8dd6185950ca835/src/event.rs#L384 is blocking, it doesn't notice `SHOULD_EXIT` until an event occurs. This blocks the main loop as well. New to the codebase, but it seems like the super hacky solution is to send a `notify` to the process handler upon `SIGCHLD`; the more reasonable solution is finding out how to do away with the unsafe `SHOULD_EXIT`.\n---\nThis is the same as #915 right?\n---\nYes it is, thanks for the heads-up."}
{"project_id": "Alacritty", "bug_id": "50", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crash on startup Windows: not yet implemented\n\nDescription:\nWhich operating system does the issue occur on? Windows Crashing on launch of a fresh install of v0.2.6 with no prior installs I tried removing the font settings completely from the genereated alacritty.yml but it didn't change anything\n\nDiscussion:\nDoes this occur with the default config? @zacps This is the first time I've seen this. Is there any reason why this should lead to a hard crash instead of falling back to the normal weight/slant and printing a log message?\n---\nYes, it was the default config alacritty generated\n---\nI've created a PR here: #2021. Testing would be appreciated since I don't have a Windows 10 machine myself. I'll release another version once this is resolved."}
{"project_id": "Alacritty", "bug_id": "51", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crash when clicking on highlighted URL\n\nDescription:\nWhich operating system does the issue occur on? **Linux** If on linux, are you using X11 or Wayland? **X11** Hi, I am running 022f0782 and when I click on a link inside vim, alacritty closes abruptly and outputs:\n\nDiscussion:\nDo you have xclip installed? Can you reproduce this with a previous commit or did this commit introduce the regression? Or has this never worked before?\n---\nHi @chrisduerr, >Do you have xclip installed? Yes: `xclip/testing,now 0.13-1 amd64 [installed]` (Debian testing) I tried many revisions trying to bissect the problem but couldn't find a previous working commit. It seems to me it's a dependency problem (cargo taking latest available version of a crate so whatever I choose as a commit revision I still get the bug once compiled). Do you have any hint of what crate might be failing so I could 'force' some kind of version?\n---\nAre you running a 32bit system or running the 32bit binary on a 64 bit system? Does this only happen when launching URLs or does this happen in other cases too? If you click on links in vim, are you pressing `shift`? Because otherwise this wouldn't open the URL. So just clicking in vim does not break things, right? Or are you using some kind of vim plugin for this? Can this be reproduced outside of vim at all? In something like `less` or `man` for example? Is this only with a precompiled binary, or does this issue happen also when compiling Alacritty yourself? Also if you click on links, are these links in a huge text document or can this be reproduced when the file in vim is *only* a short URL? Sorry for such a barrage of questions, but hopefully these should help quickly narrow down the issue. Feel free to answer only those you can easily answer so we can quickly get an idea of what might be going on.\n---\n> Are you running a 32bit system or running the 32bit binary on a 64 bit system? I am compiling via `cargo build --release` each time, I am on a 64 bit system. > Does this only happen when launching URLs or does this happen in other cases too? I though it was vim but actually this happens whenever I click on a url, in a program or not, simply cat test.txt and then clicking on a displayed url makes it crash! ðŸ˜• > If you click on links in vim, are you pressing `shift`? Because otherwise this wouldn't open the URL. So just clicking in vim does not break things, right? Or are you using some kind of vim plugin for this? Crash happens when I use shift or not. I don't use any `vim` plugin. > Can this be reproduced outside of vim at all? In something like `less` or `man` for example? Yes, even in the terminal within no other text editor. > Is this only with a precompiled binary, or does this issue happen also when compiling Alacritty yourself? I haven't tested with a precompiled binary yet, will do :+1: > Also if you click on links, are these links in a huge text document or can this be reproduced when the file in vim is _only_ a short URL? No, a simple one liner file with a url to let say https://google.com will do it. > Sorry for such a barrage of questions, but hopefully these should help quickly narrow down the issue. Feel free to answer only those you can easily answer so we can quickly get an idea of what might be going on. No matter, tell me if I can help / do some further testing!\n---\n> I though it was vim but actually this happens whenever I click on a url, in a program or not, simply cat test.txt and then clicking on a displayed url makes it crash! confused That's very odd. Can you get it to crash when clicking on non-url text? Or when selecting text? That would indicate that the clicking itself is the problem and nothing URL related. If it is URL related then there are two options really. Either it's related to URL parsing, or it's related to launching the URL. You can try setting the `launcher` to `None` (as documented in the config file) and that should disable URL launching. So that would be a good way to test if things still crash in that case. If this fixes the crash, the next step would be to check if something trivial like `/bin/true` also produces the crash.\n---\n> > I though it was vim but actually this happens whenever I click on a url, in a program or not, simply cat test.txt and then clicking on a displayed url makes it crash! confused > > That's very odd. Can you get it to crash when clicking on non-url text? Or when selecting text? That would indicate that the clicking itself is the problem and nothing URL related. It doesn't crash when I click on non-url text, nor when selecting text. I guess it's URL related then :thinking: > If it is URL related then there are two options really. Either it's related to URL parsing, or it's related to launching the URL. You can try setting the `launcher` to `None` (as documented in the config file) and that should disable URL launching. So that would be a good way to test if things still crash in that case. You are right: setting `launcher` to `None` fixes the crash! > If this fixes the crash, the next step would be to check if something trivial like `/bin/true` also produces the crash. Setting `launcher` to `/bin/true` makes it crashing again. Having error message homologous to my first post: We are making progress aren't we? Don't hesitate to ask further tests, as I can reproduce this rather easily :+1:\n---\n> You are right: setting launcher to None fixes the crash! > Setting launcher to /bin/true makes it crashing again. Having error message homologous to my first post. That's very interesting, so it must be related to code which is only run when the launcher is enabled, significantly reducing the possible culprits. Assuming you're not on the latest commit, this can only mean the error is in this part of the codebase: https://github.com/jwilm/alacritty/blob/master/src/input.rs#L675-L683 I've recently changed the way that daemon processes are launched, so I think the best bet would be to revert that change. Can you check if 32cb48774ad139c7f4fe9864e28fefeaa1009c79 is a broken commit and if c6ab2a8867ad0d064d67dc5e32138cbb3d3ab833 is working? If that's the case, then something's wrong with the double fork.\n---\n* c6ab2a8 is working â†’ Yes * 32cb487 is a broken commit â†’ Yes\n---\nCan you verify if adding `::libc::setsid();` after [this line](https://github.com/jwilm/alacritty/blob/master/src/util.rs#L102) (before the `Ok(())`) resolves the issue?\n---\nHi, I am afraid it doesn't... ðŸ˜• Error message is different though, `xlib` related?\n---\nJust one more attempt out of desperation, what happens if you move the `setsid` call *before* the call to fork?\n---\nJust to shorten the feedback loop a bit, I've got two more things I'd like you to try if moving the setsid does not work.: This creates a 1:1 copy of glibc's daemon method assuming it's called with the parameters `1, 1`, so if daemon doesn't crash, neither should this. And just to make sure the issue isn't the callsite and the problem is unrelated to redirection of stdout/in/err, this is worth another shot: If you're willing to help with troubleshooting and testing these three things, that would help a lot. Unfortunately everything's working great on my system. If neither of these give any new insights, I think it would be fine to just revert the code and suppress the deprecation warning, since macos hasn't actually deprecated `daemon` but is just discouraging its use.\n---\nHehey good news! :sparkles: * Test 1: >Just one more attempt out of desperation, what happens if you move the setsid call before the call to fork? Still crash ðŸ˜• * Test 2: Still having a crash ðŸ˜• * Test 3: Works! ðŸ˜Ž No crash at all!\n---\n> Hehey good news! Unfortunately this does not mean good news. Test 2 was an attempt from me to reproduce exactly what `libc::daemon(1, 1)` does without having to use the `libc::daemon` call. As far as I can tell this is identical to the code in glibc's `daemon` function, but at this point I'm fine with reverting this change. Thanks for all the help with debugging this."}
{"project_id": "Alacritty", "bug_id": "52", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: MacOS keymap assumes QWERTY\n\nDescription:\nI use a normal keyboard with the System Settings >> Keyboard layout remapping to the Dvorak layout. Everything with respect to the keymap works great (as far as I can tell) except for Cmd-key combinations. Here's what I'm seeing with `--print-events` when I type Cmd-v (which should paste, but instead just types 'v'): Period on the QWERTY keyboard corresponds to \"v\" in Dvorak, so it seems as though for some reason, with the Cmd-key down, alacritty is getting the raw- not OS-remapped- key events? In the event in question, both `Some(Period)` and `Some(\"v\")` are in the event. An awkward but effective workaround is to use these keybindings:\n\nDiscussion:\nJust want to add that Alacritty uses `Control-Shift-C` and `Control-Shift-V` for copy and paste out-of-the-box, so you can always just use these keyboard shortcuts instead.\n---\nI can confirm that this is happening for me on OSX (10.13.1) using Colemak instead of Qwerty. I added a custom keybinding to create new windows, as follows: I thought that this simply wasn't working. Then I hit `cmd+k` (which is normally `cmd+n` on a qwerty keyboard), and it popped open a new window.\n---\nSee https://github.com/tomaka/winit/issues/343 regarding the handling of dead keys which may or may not relate to this issue. The TL;DR is that there's work that need to happen in winit to support this\n---\nI can confirm this issue on macOS 10.13.3 using bÃ©po instead of qwerty. Any updates?\n---\nI, too, am a DVORAK user on the Mac where the **Command**-key combinations are being interpreted as the QWERTY key. For completeness in the workaround listed above, I also added bindings for the font size keybindings as I use those frequently. Here is my complete list with the original version above the hack-y workaround.\n---\nI can also confirm this is still an issue. Nothing but querty is supported it seems.\n---\nFor anyone interested: I have added the following for macOS with german (qwertz) keyboard layout\n---\nThe following PR attempts to fix this upstream: https://github.com/tomaka/winit/pull/755. If anyone is willing to test that this resolves that problem, the help would be much appreciated.\n---\nWithout digging into winit more than that PR itself: I'm not sure. What I can say is with the current tomaka:master I see `Period` is registered as pressed twice, the second time with a `ReceivedCharacter('v')` (still): However with the current Toqozz:master I see the `Period` press once, then a `Press` and `Release` for `V`:\n---\n@guildencrantz Is that running the example in the winit repo? Also which key are you actually pressing, with which keyboard layout (so what would there be at the same position with qwerty)? Is there never any Release event for Period?"}
{"project_id": "Alacritty", "bug_id": "53", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Can't input \"@\" on German keyboard with\n\nDescription:\nI'm using alacritty on Windows with WSL via wslbridge (from wslttz 1.9.3) On my Windows laptop I've got a German keyboard layout which has the right ` ` key called ` ` and that is used to input `\"@\"` via ` + `. However in alacritty that combination does nothing.\n\nDiscussion:\nCan confirm that this does not work with norwegian layout as well. Norwegian layout meta-key button creates works AltGr 0 } &#xa0; AltGr 2 @ &#xa0; AltGr 3 Â£ yes AltGr 4 $ &#xa0; AltGr 5 â‚¬ yes AltGr 7 { &#xa0; AltGr 8 [ &#xa0; AltGr 9 ] &#xa0; AltGr \\ Â´ yes AltGr Â¨ ~ yes\n---\nDoes using Ctrl-AltGr work?\n---\n@zacps no.\n---\nJust for the record, it seems this only applies to windows. I can insert @ with AltGr+Q without any issues on linux.\n---\nIt certainly applies to macOS (10.13.x).\n---\nSame here on French Azerty, none of the AltGr combinations are working\n---\nI'm seeing a version of this on macOS with a UK keyboard. AltGr + the number keys gives me the expected characters (AltGr + 2 = â‚¬, AltGr + 4 = Â¢) for every number... _except_ for AltGr + 3, which should give a `#`, and which is the only one I actually care about being able to enter into terminal. This key combination just does nothing at all. On the plus side, I guess I have an excuse not to comment my code any more.\n---\nsame here macos (just installed with brew)\n---\nThis still persists on Windows 1809 with v0.2.5 and ConPTY but only in WSL, it works fine in PowerShell. Interestingly when running `ssh` (the Windows native one) from PowerShell it doesn't work in `ssh` either. Both works in `cmd.exe`\n---\n@niklas88 What output do you get when running `alacritty --print-events` and press AltGr + Q? I'd imagine it should be possible to work around this using a scancode mapping.\n---\nmacOS here (`AltGr` + `L` should result in `@`):\n---\n@ncreuschling Since you're getting the `event: ReceivedCharacter('@')` output, it seems like a keybinding might be triggered that prevents this from working properly. Something similar shows up for @thisconnect who also appears to be running macos. On Windows it might be different, so it might be helpful to get confirmation if `ReceivedCharacter('@')` is also printed. In the following is a patch which applies additional debug information. It would be helpful if anyone who runs into the issue, but `ReceivedCharacter('@')` is printed, could run this. The `--print-events` flag is not necessary: *Note: This can be applied simply by saving it to a file and running `git apply /path/to/file` in the Alacritty git repository.*\n---\nFirst of all - thank you for your effort. The patched Alacritty (against c54115516717d6fd429065158d81a93c0818fefa) now prints: Then: I have not modified any settings in the `key_bindings:` block. They remain the same as the original `alacritty_macos.yml`.\n---\n@ncreuschling Looks like removing the `Quit` mapping on `Command + Q` should resolve this problem for you. Though I'm not entirely sure why `RAlt + L` would trigger a keybinding for `Command + Q`. I'd like some feedback on the Windows side of things, it would be interesting if this is caused by the same thing. @ncreuschling I've got another patch if you're willing to help out. It seems like the `--print-events` code can't really be what's received by Alacritty, because the virtual keycodes are different from the bindings in the config. The following should print exactly which keys are received: Maybe that can get us a step closer to figuring out what exactly is going on. This should hopefully print the `Command + Q` keys that are actually getting triggered."}
{"project_id": "Alacritty", "bug_id": "54", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Keybinding open -n -a /Application/Alacritty.app not working\n\nDescription:\nWe've had a hack for a while on macOS to open multiple windows as a workaround to #607. I dusted of my MBP this morning and found that it's not working. Running the command from a shell in Alacritty works just fine, but the keybinding version causes Alacritty to exit immediately. Seems that this may be a problem with how we create child processes. If this is a dupe, I blame GitHub search\n\nDiscussion:\nThis seems to fix it, but it's not a 100% solution. Including a `wait()` here means all commands are blocking, but removing the `wait()` would result in zombies accumulating (#976).\n---\nI'm using a MBP at work on a regular basis and at least the `SpawnNewInstance` action has worked great for me before. I'll test this again later just to make sure, but I'd be surprised if it suddenly broke.\n---\nI tried that as well; for me, it flashes a new window for fraction of a second. ðŸ˜ž\n---\nMy MBP is on macOS 10.13... may be part of my `SpawnNewInstance` issue. Haven't looked at the code for it though.\n---\nI'm using 10.14.3 and just re-tested and `SpawnNewInstance` works great. However running `open -na /Applications/Alacritty.app` as a command in a key binding results in a -10810 error. Could you try applying this change again: https://github.com/jwilm/alacritty/pull/2193/files? This fixed the issue for me. I had to revert this change because of issues on some Linux systems (https://github.com/jwilm/alacritty/issues/2211) even though I'm unsure what caused these issues. But potentially we could use `daemon` on Linux and `fork` on Linux. Though if you have any idea what could have caused these issues on Linux, I'd be very curious to hear. I basically recreated glibc's `daemon` call 1:1 and it still didn't show the same behavior.\n---\nOne difference between glibc's `daemon()` and yours is that glibc calls `_exit(2)`, while you call `std::process::exit(0)`, which I assume maps to `exit(3)`. `exit(3)` will cause at-exit handlers to run (registered with either `atexit(3)` or `on_exit(3)`). `_exit(2)` terminates the process \"immediately\".\n---\nHuh that's interesting, I wasn't aware of that. Though I'm not sure why that would cause a fatal X IO error on some systems, it seems like it shouldn't do that.\n---\nMe neither. But there may be a system-installed at-exit handler that closes/frees something that triggers the X IO error maybe. Just one example; C++ uses at-exit handlers to execute global variables' destructors. In any case, I think `_exit()` is the appropriate call to use in this scenario.\n---\nIt actually looks like glibc calls `_exit(0)` and not `_exit(2)`. @dvergeylen if you're willing to look into this, I'd be curious if you can make this work by changing things to either `libc::_exit(0)`.\n---\n> It actually looks like glibc calls _exit(0) and not _exit(2). I meant `_exit(2)` as in `man 2 _exit` ;)\n---\nOoooooh, that explains a lot of things. And it does indeed [call `libc::exit`](https://github.com/rust-lang/rust/blob/9ebf47851a357faa4cd97f4b1dc7835f6376e639/src/libstd/sys/unix/os.rs#L540-L542) instead of `libc::_exit`. So it might be worth to test that out. Though maybe that will cause macOS to fail again, I'm not sure.\n---\n> Though maybe that will cause macOS to fail again, I'm not sure. If it does, maybe it's related to `setsid`? Your PR that changed daemon -> fork didn't call `setsid()`.\n---\nIf you take a look at the linked issue, you'll be able to see that `setsid` was one of the first things we've tested. So I don't think that's it. Good idea though.\n---\n> I tried that as well; for me, it flashes a new window for fraction of a second. ðŸ˜ž Also getting this with `SpawnNewInstance` on latest master (090842bd), on macOS 10.14.4.\n---\nInterestingly, for me: works well for me in version 0.3.0, commit [`6757acb`](https://github.com/jwilm/alacritty/commit/6757acbb824e8be9968529a66e9a75a0a2ea2f5d), on MacOS 10.11.6. For the record, I replaced this old keybinding:\n---\nI'm on macOS 10.14.4, and compiled Alacritty from source on revision 22eff1b5506faa13da65f84f761a462e8f1fd01b. I can confirm that `SpawnNewInstance` has stopped working for me as well, when it previously worked on `v0.2.7`. Edit: Seems to work without issue on `v0.2.9`.\n---\nUsing a variant of @jwilm 's workaround on macOS 10.14.4 (18E226). Made similar patch in `ActionContext::spawn_new_instance()`.\n---\n@leonbreedt Could you test the patch I've proposed? Here is it again to make applying a little simpler:\n---\n@chrisduerr applied to 651823192495d6e70e98bd09fce4f233028384fa (no other changes, reverted the workaround in `src/event.rs`). Tested using the following key binding: seems to do the trick so far."}
{"project_id": "Alacritty", "bug_id": "55", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Freeze prompt during reflow\n\nDescription:\nIf scrollback history is available, but the prompt currently is *not* at the bottom of the terminal emulator, resizing Alacritty with lines longer than the current width of the terminal will continually move down the prompt. Demonstration: ![bug](https://giant.gfycat.com/LittlePoliteGrosbeak.gif) The behavior for alt screen and normal screen when the prompt is at the bottom of the terminal (or there is no scrollback) seems correct. So the goal would be to fix this without touching anything else.\n\n"}
{"project_id": "Alacritty", "bug_id": "56", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Double-width characters breaking URL launching\n\nDescription:\nAlacritty's URL launcher is checking for empty cells to stop parsing URLs. However if a character is double-width, the cell after it is always empty even though it's technically still occupied by the previous character. As a result of this, the URL https://çŒ«.ç§»åŠ¨/ is parsed as https://çŒ«, which is a valid URL but does not match the desired outcome.\n\n"}
{"project_id": "Alacritty", "bug_id": "57", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Cursor has different dimensions depending on shape\n\nDescription:\nThis is probably best demonstrated with a picture: ![image](https://user-images.githubusercontent.com/9433472/54887059-9beb8b00-4e86-11e9-802d-b41382a6a5c4.png) With the hollow cursor, there's a 2-pixel gap between the top of the cursor and the edge of the cell. Interestingly, the size of the gap appears to stay at 2 pixels even with an increased font size (36 instead of 12): ![image](https://user-images.githubusercontent.com/9433472/54887098-0bfa1100-4e87-11e9-8fa7-8e12f9c29a9d.png) It also happens with the vertical bar cursor (which I hadn't noticed until I increased the font size!): ![image](https://user-images.githubusercontent.com/9433472/54887085-ecfb7f00-4e86-11e9-85d1-9f573221d593.png) Ubuntu 18.04, X11, Alacritty 0.2.9 and still present on latest master (3e36d714fec8139a1e506036a394b343bd1a8bb4)\n\nDiscussion:\nI'd assume that these issues are only present with the hollow and I-Beam cursors, right? So the underline and block are both correct?\n---\nYep, underline and block cursors both look fine.\n---\n@anowlcalledjosh Do you have a font offset set? I think that might be the cause of this.\n---\nI do! Changing the offsets doesn't appear to affect the height or width of the hollow cursor, or the height of the beam cursor, so I think you're right.\n---\n(and so the underline cursor *is* affected, I just didn't have an x-offset specified when I originally tested it)\n---\nThanks, I've identified the issues then and am working on a fix. Will update once there's a PR."}
{"project_id": "Alacritty", "bug_id": "58", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: screen is just black\n\nDescription:\nWindows 10 home edition, Alacritty-v0.2.5.exe. I've also tried with 0.2.4 and get the same results. I suppose this is something environmental - I mean you'd have noticed if this thing just didn't work on Windows! - but I've no idea what. When I run Alacritty, I just get a black screen, and a cursor. Typing gives the impression that I might be getting black text on a black background, the cursor looks as though it's moving the right amount.\n\nDiscussion:\nMight be a font rendering issue maybe? Try running Alacritty from a different terminal like the cmd.exe, does it produce any output? Errors should be written to stderr if anything went wrong. I'd assume you're using the default config, right?\n---\nSame output whether starting from cmd.exe or from file explorer. No errors visible. Yes, default config. Edit: You weren't suggesting that I'd get a different result from cmd.exe; you were suggesting that I might see some errors. I don't.\n---\nWhich GPU do you have? Might been an issue with OpenGL shader support.\n---\nATI Radeon HD 3600\n---\nIn theory that should just support the minimum required OpenGL version for Alacritty. Would you mind testing out the example in the glutin repository? You can find it here: https://github.com/tomaka/glutin. If you've got Rust setup, you can just run that using `cargo run --example window` after cloning the repository. That also uses OpenGL to draw a Window, but if that doesn't work it's not something caused by Alacritty directly.\n---\nthat glutin example works fine (I see a pink background and a many-hued triangle)\n---\nCould you share the output of `alacritty -v`? Maybe that'll give some more insights.\n---\n(the log file contains the same things)\n---\nI threw some more `v`s at it - it doesn't look much more interesting to me, but here goes anyway:\n---\nIt looks like a font is actually found and the glyph cache is filled properly. Testing the ConPTY backend by enabling the `enable_experimental_conpty_backend` might be another thing that could be tested, but I'm pretty sure this has to be related to rendering and OpenGL.\n---\nI set `enable_experimental_conpty_backend: true` in the config - and it made no difference at all that I can see. (I also set `enable_experimental_conpty_backend: foo` and got a warning about that, so I'm pretty sure I'm changing the right file).\n---\nThe output of `alacritty -v` should change from printing `[INFO] Using Winpty agent` to `[INFO] Using Conpty agent`. Unless your Windows 10 install is not up to date, in which case you should probably update first.\n---\nack, I do see that change - but the alacritty window remains black.\n---\nJust noting that I don't see this problem on my Windows PC at work (the problem persists at home, though). Well, it was always near-certain that this must be something environmental; but I guess it's reassuring to have that confirmed.\n---\nYeah, as mentioned before my suspicion is an issue with the GPU and potentially OpenGL/GLSL support. The best way to confirm that would probably be to swap out the GPU, but obviously that's easier said than done.\n---\nSame issue here, only my cursor won't even move when I type ðŸ¤£ `.\\alacritty.exe -vvv` only responds on resizing the window. Task Manager says Alacritty is running on __GPU 0__, i.e. UHD 630 integrated graphics in my case (instead of the dedicate GTX1050m), dunno if this helps...\n---\n@smdsbz Can you force it to run on the dedicated GPU?\n---\n> @smdsbz Can you force it to run on the dedicated GPU? Unfortunately, no luck, it just stays blank like it's dead (but it __does__ respond to config changes like `render_time` on the fly, which gets displayed properly and fluctuates on mouse over). One thing worth noticing is that it initially starts with GPU 1, then after few seconds, it falls back to GPU 0. I've tried both starting it with the _Run with graphics processor_ option in the right-click menu, and changing the default config in the nVidia panel, behaves the same. Looks like it fails to communicate with the shell to me.\n---\nCould you test a different shell? Like powershell, cmd and maybe bash?\n---\nActivity on this thread prompted me to have another go with the latest version - 0.3.0 RC 3 - and with that I get this interesting-looking error message: Does that help? (I suspect that @smdsbz and I are seeing different issues.)\n---\nHmm, the code in my latest failure looks new since I opened this, so I imagine we now have three problems cluttering this single issue. Sorry about that."}
{"project_id": "Alacritty", "bug_id": "59", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: crashes on cat /dev/urandom\n\nDescription:\nWhich operating system does the issue occur on? linux If on linux, are you using X11 or Wayland? x11 alacritty @ 28636923e02a6cfac0fc950b963623cbcad5fda9 build with `RUSTFLAGS=\"-C opt-level=3 -C debuginfo=2 -C debug-assertions=y\"` `\n\nDiscussion:\nLooks like the issue is at https://github.com/jwilm/alacritty/blob/master/src/url.rs#L114, which clearly has absolutely no respect for Unicode at all. In general I'd say that most instances of `chars().enumerate()` are probably a bad idea and this is actually done correctly (using `char_indices()` just a couple of lines above that. I've included a fix for this in https://github.com/jwilm/alacritty/pull/2230 since it's kinda related to URL issues, that fixes the issue."}
{"project_id": "Alacritty", "bug_id": "60", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: URL highlight issues\n\nDescription:\nThe URL \"test@https://example.org\" does not get highlighted correctly. This is likely related to trimming the start of URLs with special characters, the origin should be updated appropriately to fix this. If the mouse is over a URL and the URL is recognized and highlighted, but the user presses enter until the URL moves away from the cursor, the URL will still be highlighted making it impossible to remove the highlight. If the display offset is not equal to 0 (so user is scrolled up), there is another issue with URL detection which will highlight the wrong cells. Adding the display offset to the line number might fix this.\n\n"}
{"project_id": "Alacritty", "bug_id": "61", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Rendering issue with vifm\n\nDescription:\n_Thank you for an awesome terminal!_ :pray: I'm seeing an issue with the cursor rendering with [`vifm`](https://github.com/vifm/vifm) in `alacritty`. This is the first time I've noticed it - I'm not seeing this issue with any other curses app. ![Peek 2019-04-21 16-18](https://user-images.githubusercontent.com/2284724/56471421-a03da080-6452-11e9-8b61-b1cea7c2fc21.gif) Here's my cursor settings in alacritty: I'd love to see this fixed, give me a ping if **I can help in any way**. :beers:\n\nDiscussion:\nI didn't try to reproduce it (too long to install this terminal) and just guess this is a stable behaviour of the terminal. If that's the case, this is likely to be a problem of `alacritty`, as the issue doesn't appear in other terminals as far as I can tell and I know that the blacked out character appears where hardware cursor is positioned by `vifm`. In normal mode the terminal cursor is invisible, yet `alacritty` displays it.\n---\n@sQVe Which version of Alacritty are you using? Can you reproduce this with the latest master?\n---\n@chrisduerr Sorry for not providing it in the initial report. I'm running the latest code from `master`, so yeah - I can reproduce it.\n---\n@chrisduerr I just tried to downgrade to `0.2.9` and I'm not getting this issue with that release.\n---\nI'm asking because this was fixed in https://github.com/jwilm/alacritty/commit/0d060d5d801e3abb55035269138d819d38fc175b, so please make sure you're running the latest version not just the latest master from a few days ago. If it still occurs then I can't reproduce this. Does this happen inside of vim too? Or inside of the normal bash/zsh/shell prompt? Or only in vifm?\n---\n@chrisduerr I just ran a rebuild and still seeing the issue. I can replicate in both zsh and bash normal / default prompt. I cannot replicate it inside `nvim`. Did you set the cursor to a specific color?\n---\nYou said that downgrading to 0.2.9 fixed the issue, but I'd assume that 0.3.0 would do it too? Since the cursor rework was just recently after 0.3.0. Otherwise this would be a separate issue. I haven't been able to test this with vifm yet though, since it does not install on my system.\n---\n@chrisduerr, what's the issue with the installation? Regular `./configure && make` should give you a build to try (just run it as `src/vifm`).\n---\n@chrisduerr Yes I would think so. I don't have the possibility to try it out now currently though. I can try later if it is useful.\n---\nIt would be. Knowing which commit broke it is extremely helpful for figuring out what the issue might be.\n---\n@chrisduerr Roger. I'll try it out ASAP. Most likely in an hour or two. If possible I'll try to narrow it down further to a specific commit.\n---\n@chrisduerr I've now had the time to debug this further. With `HEAD` at 0d060d5d801e3abb55035269138d819d38fc175b, I'm seeing the issue I initially reported: ![0d060d5d801e3abb55035269138d819d38fc175b](https://user-images.githubusercontent.com/2284724/56476075-380eaf00-6492-11e9-9e83-de289ccfab98.png) With `HEAD` at 371d13f8ef95157c97f7de9964bcbc89d4a8e930, I'm also seeing an issue, but inverted: ![371d13f8ef95157c97f7de9964bcbc89d4a8e930](https://user-images.githubusercontent.com/2284724/56476077-3ba23600-6492-11e9-8415-28b562462e41.png) With `HEAD` at a47d716daace7c197392854754406a06454ec380, I'm seeing **no issue**: ![a47d716daace7c197392854754406a06454ec380](https://user-images.githubusercontent.com/2284724/56476080-3f35bd00-6492-11e9-9d45-15d0a4e176a7.png)"}
{"project_id": "Alacritty", "bug_id": "62", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Alacritty window rescales during startup\n\nDescription:\nWhen I start alacrity, it first creates a large window which is then very quickly resized to the final size (~70%). The resizing is really fast and wouldn't bother me but my window manager (fvwm2) places the window based on the original size and that means that the window position ends up not being what it is supposed to be. Ubuntu 16.10. Default alacritty.yml except that I changed the font size to 13.\n\nDiscussion:\nThanks for filing this issue. The problem here is we need to know some font metrics to know the proper window size to create, but we can't know the font metrics without having the DPI scaling factor which comes from the window. Glutin needs a way to get the DPI scaling info for a monitor without actually creating a window.\n---\nA workaround might be to open a window to get the DPI scaling factor, then close it and open a new one with the correct size. Not great but perhaps better than the current state of affairs.\n---\nSent from Alto On Monday, February 13, 2017 at 12:28 PM Titus von der Malsburg wrote: A workaround would be to open a window to get the DPI scaling factor, then close it and open a new one with the correct size. Not great but perhaps better than the current state of affairs. â€” You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHub, or mute the thread.ï¿¼\n---\nI personally find the resizing extremely distracting, especially for something I open on a regular basis. A possible workaround could be allowing one to detect the dpi scaling factor (e.g launch with a flag, giving the output), which could then be added to alacritty.yml (if it's found in there, there then wouldn't be a need to resize)\n---\nAlacritty will resize the window after it has been mapped even if the window size has already been altered (e.g. by an `xdotool` command). As an example of where this might happen, tdrop (which is a wrapper to run programs as dropdowns) uses xdotool to set the window size before alacritty resizes itself (see noctuid/tdrop#38 for the original issue). This behavior is not a big issue w.r.t. using xdotool since `-d 0 0` can be used to prevent it, but I found it unexpected.\n---\n@jwilm Could you change the parameters we enter in the config file so that we enter dimensions in pixels and you calculate the lines and columns after you initialize the window? At least that way, the window manager can make good decisions on where to place the window.\n---\nI also find the offset placement of the initial window after resizing for font metric, to be irritating. Indeed the font metrics should be available first (as noted in the comments inside the source code), _then_ window dimensions and correct position can be determined, before the window gets mapped to the screen, thereby allowing the WM to put it in the correct spot. I've been perusing the sourcecode to see if I can help here, as I've done some amount of simple window programming in C against xlib, but Rust is brand new to me and I'm rather lost trying to follow the code. Therefore I can only offer some thoughts on this issue: CLI tools like xdpyinfo, query the X Server for data; if there's an X server running, there's a $DISPLAY which can be queried for DPI info and other stuff; DISPLAY can be queried before making any windows, so shouldn't need to create a (hidded or unmapped or invisible) window just to query it for info about its DISPLAY. But in line with what jwilm wrote above on 07 Jan., seems to me it should be something for Glutin to deal with, not Alacritty. If Glutin supplied the DPI early on, Alacritty could compute size and window placement before mapping, negating need of a resize. Meanwhile: 2) assuming that font size will not typically be changed once the user has a font he/she is happy with, perhaps the glyph-cache (and/or associated metric data) could be saved in ~/.config/alacritty or similar location. Then, upon startup, Alacritty could see if the font & size is the same as it was last time (compare saved cache data against font in config file); if it is, window dimensions and therefore position, can be already known before mapping. But if the font/size HAVE changed since last execution, we're back at square one, with a resize needed that will result in the window placement being \"off\" after resize. Again, as mentioned in comments in source code: ideally this stuff be calculated before the window gets created/mapped, then at least the WM can place it just once, in the right spot.\n---\nCan someone check if https://github.com/jwilm/alacritty/pull/2307 fixes this?\n---\n@chrisduerr still seeing the behavior with that branch. The default size will typically stick and be fine, but is not a realistic use-case. If you set the configuration file to a given terminal size in cols/lines (e.g my preferred ratio of 90/27) it still resizes down. I suspect that the issue you were trying to address is a secondary one mentioned in a comment (resizing even if the size was already set by xdotool or similar), rather than the resizing on startup in general (the actual bug). The original comment by @jwilm suggests that the issue is with lack of API support within glutin, but as per the two bugs above (tomaka/glutin#1096 and tomaka/winit#785) that's not apparently an issue. What exactly is stopping us from figuring out the font metrics before actually creating a window at this point? If there is something, could the one with that knowledge also follow up in tomaka/winit#785?\n---\n> If you set the configuration file to a given terminal size in cols/lines (e.g my preferred ratio of 90/27) it still resizes down. If you set window dimensions and the DPI factor is not equal to 1, it's impossible not to resize at startup. > The original comment by @jwilm suggests that the issue is with lack of API support within glutin, but as per the two bugs above (tomaka/glutin#1096 and tomaka/winit#785) that's not apparently an issue. The issue is exactly what vberger has said in the winit issue. It's pointless that we're able to get the DPI for all displays when we do not know which display the window is going to be spawned on.\n---\nAt this point, I think the question becomes \"how do other terminals handle it?\" I don't experience the same problems in, say, Konsole. All of my displays (at least at home) have a non-1 DPI factor, but all of my displays per-system also have identical DPI factors (same-size displays with same resolution in all multi-display setups). Surely there's some way for alacritty to handle these common scenarios with equal grace to virtually every other alternative?"}
{"project_id": "Alacritty", "bug_id": "63", "source_type": "github", "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "Title: Alacritty freezes on pasting from empty clipboard\n\nDescription:\nWhen pasting from empty clipboard alacritty gets frozen for 3-4 seconds. Arch Linux with X11 ( #2391 doesn't fixed it for me )\n\nDiscussion:\nI can confirm this is happening to me as well, in the same OS environment. Alacritty hangs, then prints the following:\n---\nRelated issue in one of our new dependencies: aweinstock314/rust-clipboard#54.\n---\nThis is a bug in x11-clipboard, I just published 0.3.2 to fix it.\n---\n@quininer Thanks a lot for that! The fix seems to work great based on my testing. What is the need for the timeout if this is not intentional? Is there a different way this might timeout?\n---\nX11 has many different implementations (both client and server) and it's hard to keep them reliable. If the other party panic after sending notify, we may never receive message."}
{"project_id": "Alacritty", "bug_id": "64", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Index out of bounds when selecting during `yes`\n\nDescription:\nWhen creating a selection while running the `yes` command, Alacritty will crash with an index out of bounds exception.\n\nDiscussion:\nFor further info: I can reproduce this using `while true; do echo no; done` and selecting. Theoretically, any high-output command that induces fast scrolling would cause this.\n---\nAnother interesting detail might be that I *think* I've specifically tested this in the past, so it's possible that there has been a regression and it might be worth bisecting this issue.\n---\nYou were right. Bisect gives me bf353059a0f10bbccec754deb0e182cec3f6efe0 as the first bad commit. I don't think I'll have enough time to try to fix it this week, but hopefully this helps you or somebody else who wants to fix it.\n---\nThanks for bisecting, that should hopefully make troubleshooting a lot simpler!\n---\nDoing a bit more testing: the problem appears to stem from the `span.map()` at https://github.com/jwilm/alacritty/commit/bf353059a0f10bbccec754deb0e182cec3f6efe0#diff-7e09fea17462febd06d3b5bdd2b4512aR145. Commenting out both branches makes the problem disappear, and uncommenting either one reveals it again. I've also noticed that lowering the `history.scrollback` config makes the issue appear earlier (I've been testing at 100 lines). ---- I think I've narrowed it down further... maybe: using `grid[span.{start,end}.line][span.{start,end}.col]` anywhere inside that `map` causes the same issue. Using `span.{start,end}.line` or `.col` in e.g. a tuple, the issue does not manifest. Maybe there's a problem with indexing the Grid?\n---\n> Maybe there's a problem with indexing the Grid? Most definitely. I'd assume that the selection is stored at a specific position and then rotated (moved up) until it leaves the grid. So trying to access it then will lead to an access outside of the grid, leading to an IOOB. Though I haven't had the time to look at this yet, so this is only a guess.\n---\n> I'd assume that the selection is stored at a specific position and then rotated (moved up) until it leaves the grid. So trying to access it then will lead to an access outside of the grid, leading to an IOOB. I did some testing and this seems to be exactly what the issue is. If I prevent span.{start,end}.line from going larger than the number of lines in the grid then no IOOB will occur."}
{"project_id": "Alacritty", "bug_id": "65", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Characters inserted into neovim since foreground/background request escape codes added\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 Seemingly randomly (I can't tell what causes the bug to occur some times but not others, or why one escape is displayed in one instance but another at another time) when starting neovim since f790070, escapes get input as if I typed them, for example after starting nvim the most recent time it starts in command mode with `:.rgb:0/0/0^G` as the typed out command, another one is starting in search mode with either `/0` or `/0/0`. ![image](https://user-images.githubusercontent.com/24554283/59545850-b3b93500-8ef2-11e9-8956-40c600879214.png)\n\nDiscussion:\nGetting the output of `alacritty -vvv | grep \"Writing escape sequence for dynamic color code\"` would be very helpful I think. I personally can't reproduce this with the latest master, so I can only take guesses here. Could you try this with an empty nvim config and give detailed instructions on how you're causing this? I'd also be very interested in seeing if this can be reproduced with XTerm. The following patch might also solve it already, please give that a try if you've got some time:\n---\nOh, I think I've figured it out. I think this will be fixed if you set your background color to anything above hex `0F/0F/0F`. I think the problem is that `0/0/0` is written as single-digits.\n---\nAttempted to fix this in https://github.com/jwilm/alacritty/pull/2544, please let me know if that does it for you.\n---\nEach line looks the same to me, each one is for one opening of nvim the exact same way (and I didn't this time but I previously tested with both `nvim -u NORC` and `nvim -u NONE`, #2544 seems to have just increased how many 0s there are. The first picture attached is related to the second line, the second picture to the third line, the third one to the last line, and all other lines had nothing weird upon opening nvim ![Screenshot 2019-06-15 10-33-51](https://user-images.githubusercontent.com/24554283/59552830-bd29b800-8f59-11e9-94ec-213bca56a82a.png) ![Screenshot 2019-06-15 10-34-11](https://user-images.githubusercontent.com/24554283/59552838-cfa3f180-8f59-11e9-9d41-de74df7ce13b.png) ![Screenshot 2019-06-15 10-39-03](https://user-images.githubusercontent.com/24554283/59552841-d29ee200-8f59-11e9-9d3b-f4a0e519e971.png)"}
{"project_id": "Alacritty", "bug_id": "66", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty v0.3.0-rc2 does not start (Error creating GL context)\n\nDescription:\nAlacritty release: v0.3.0-rc2 OS: Debian GNU/Linux buster/sid x86_64 Kernel: 4.19.0-4-amd64O DE: GNOME 3.30.2 GPU: NVIDIA Quadro FX 880M using X11 ## notes: * alacritty version v0.2.9 works fine * `cargo run --example window` works fine when cloned glutin master * tried both installing from released deb file and building from sources\n\nDiscussion:\nCould you bisect which exact commit broke this for you?\n---\n0f96a62218cfc78b56606f0dcc334d59202edf7c is the first bad commit Also I chacked last commit (e98ea64c748f1cce673c97adbc72e6a9a3c11e5f) and the same error still occurs.\n---\nI just investigated glutin repo and found that example window works on master, but it does not work with 0.20 release, the commit that did fix the issue was tomaka/glutin@600030ac41abdb7a03e0ed735a179ea10e249a4f\n---\nSounds like it would be beneficial to wait for the next glutin release before releasing 0.3. Thanks for looking into this.\n---\n@doubleloop I'd be interested in getting feedback on #2253. Does that PR fix the build issues for you?\n---\nJust verified it does not (it produces segfault, I posted stack trace in [PR comment](https://github.com/jwilm/alacritty/pull/2253#issuecomment-480236516))\n---\nThat backtrace is kinda surprising because it fails at the following code: Which is actually before any of Alacritty's OpenGL routines run. So in theory you should be able to repro this with my glutin fork. Could you take the glutin `window.rs` example and add all these flags (you can test both `with_srgb(true)` and `with_srgb(false)` and report back if you can make the glutin example fail like that? If it does fail, it would also be interesting which option causes the failure, so removing them until the failure is gone would likely be another good troubleshooting step as follow-up.\n---\nGlutin example segfaults if `with_vsync(true)` is added: I tested all other flags and they do not cause any problem. `with_vsync` segfaults both on glutin master and on your fork\n---\nSo does removing this from Alacritty allow you to run it again?\n---\nYes, just checked this.\n---\nThen I'd propose a temporary workaround for BSD which disables vsync. Does removing vsync cause any issues that would deem Alacritty unusable to you? It wouldn't be worth adding this as a workaround if Alacritty is still unusable though technically working.\n---\n> a temporary workaround for BSD I use debian >Does removing vsync cause any issues I can not observe any, alacrity is fully usable for me.\n---\nOh, sorry. For some reason I confused this issue with https://github.com/jwilm/alacritty/issues/2244. I'm not entirely sure why vsync was enabled since I can't reproduce any errors of the original commit message, so I'm not sure if I want to make this change before the 0.3.0 release. It's also possible that it might have impact on performance and resource usage, the latter being difficult to benchmark for me.\n---\nReported upstream in https://github.com/tomaka/glutin/issues/1135."}
{"project_id": "Alacritty", "bug_id": "67", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Windows: Focus with mouse highlights text\n\nDescription:\nOperating System: Windows Pretty sure this doesn't happen in Linux. ### Behavior summary When focusing the window with a mouse click, all characters are highlighted up until the character clicked on. ### Expectation The window is simply focused, no extra selection occurs. ### Extra This is especially irritating in combination with #2050. (`selection: save_to_clipboard: false` doesn't seem to work, resulting in pasting half the terminal screen back into the prompt)\n\nDiscussion:\nThis issue was already raised for macOS [here](https://github.com/jwilm/alacritty/issues/1291) where it was initially implemented for all platforms. The behavior was then reverted for Linux/BSD because it's not expected there in [this PR](https://github.com/jwilm/alacritty/pull/1540). This was all before Windows support was added, so it made sense back then to just check if the platform is not macOS. It seems like all that is needed here, would be to add another check to make sure that this behavior is also present on Windows to match macOS. I've created a PR to fix this issue, I'd appreciate help with testing: https://github.com/jwilm/alacritty/pull/2172\n---\nI built from this PR (with the build fix) and I'm still getting the same behaviour. Just to verify, I built this with `cargo build --release`. Is this correct? (Not sure if you can/how to download binaries build by TravisCI?)\n---\nYou can not download binaries build by travis. However you do build using `cargo build`, the release is optional in this case. Please make sure you have the right branch selected. Please let me know if you can't make it work and I'll have to test myself.\n---\nI can confirm the issue is not yet fixed. ![2019-03-13_16-20-12](https://user-images.githubusercontent.com/28582702/54320921-ff82d800-45ab-11e9-9c53-fb9d11c0d91f.gif)\n---\nI've just tested this on my Windows test system and can not reproduce it. Could someone confirm that this issue still exists when running powershell in both ConPTY and WinPTY?\n---\nHow would I do that? If it's just toggling \"Use legacy console\" in Powershell: nothing changed, unfortunately. I also tried toggling every possible setting in options, but there was no change. Running it from `cmd` and doing the same things exhibits the same behavior. Windows 10 Version 1803 (OS Build 17134.648) -- from `winver`, if it helps.\n---\nYour Windows 10 version seems extremely outdated (about 1 year?). Could you try updating to see if that fixes the problem?\n---\nI'm on version 1809, build 17763.379. Unfortunately still the same with both Winpty and Conpty (didn't know this was a thing). I'm definitely running the correct build, I checked that the PR changed lines exist in my source, and changed the window title to be sure it's a fresh build.\n---\nConPTY does not exist until version 1810. Please make sure you're using the latest version of Windows to ensure that this is not caused by some issues with the outdated WinPTY.\n---\nThanks for the tip on 1809. Dunno why I never got it. However, issue is the same and I can't find any mention of an 1810 update. I assume your system is part of the Insider program, then?\n---\nI believe 1809 is actually the latest. I am experiencing this issue as well, however I am on an older windows version 1803 build 17134.523 as this is my work laptop. Tonight I would be able to test this at home on my own PC.\n---\n> Thanks for the tip on 1809. Dunno why I never got it. However, issue is the same and I can't find any mention of an 1810 update. I assume your system is part of the Insider program, then? That was my mistake actually, sorry. Since this was the October update, I thought the version number would be 1810 (2018.10). If that version is present (1809), then the ConPTY option will work and is available. Could the people who are able to reproduce share a bit more information about how to reproduce this? I feel like this would be a pretty simple bug to fix, but unfortunately I can not reproduce it. It would be interesting to get some information about the system, is this reproducible with both mouse and touchpad? Does it matter which other application is open? Since it might not be trivial for me to fix it, this would probably be a great issue for someone interested in trying to contribute to Alacritty. I can help with getting started if someone is willing to dive in.\n---\nTurns out I've managed to reproduce it. The issue is that the `Focused` event comes *after* the `MouseInput` event, so when clicking the window it will always be focused.\n---\nWell that would explain it. I tried some different commits. Issue was introduced in [104b866cb6fa1b0674abdd2bdd3668f280939ca8](https://github.com/jwilm/alacritty/commit/104b866cb6fa1b0674abdd2bdd3668f280939ca8) I think.\n---\nTurns out a straight-forward and simple fix for this issue is currently not possible with the window library Alacritty is using. I've opened a bug upstream to discuss this issue and possible solutions for it: https://github.com/tomaka/winit/issues/817\n---\nThanks to Osspial, this just got fixed upstream. Can anyone recompile Alacritty against the latest winit git version to confirm this works? The easiest way to test that is probably to put the following in the last line of Alacritty's Cargo.toml:\n---\nConfirmed fixed! Woohoo! ðŸŽ‰\n---\nYep, it also works on my machine!"}
{"project_id": "Alacritty", "bug_id": "68", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Panic due to error in config\n\nDescription:\n## System OS: Antergos Linux, Kernel v. 5.0.6 Display Server: X11 WM: i3 Compositor: compton (afaik irrelevant here) Alacritty version 0.2.9 (similar problems occurred in previous versions as well, though) ## Summary In case of certain configuration errors, e.g. when the colors: primary: background property is set twice in a row, alacritty will panic: ## Expectation Fallback to default setting ## Output\n\nDiscussion:\nOur upstream parsing dependency does not strive to propagate errors if the file is invalid, giving no guarantees that there will not be a runtime crash. The best approach might be to verify the validity of the input file first before starting to try and parse it with serde, https://github.com/chyh1990/yaml-rust might be a good choice for this.\n---\n:+1: Also happened to me. I was tweaking the font settings, and copied the current `family: ` line and pasted it below, and alacritty immediately crashed and wouldn't relaunch. I had to launch a different terminal to edit the alacritty.yml file before I could start it again. Not a showstopper, but kinda annoying."}
{"project_id": "Alacritty", "bug_id": "69", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Cursor colour is incorrect after displaying ~2000 lines of dmesg\n\nDescription:\nUbuntu 18.04, X11, alacritty 0.3.0 This is the weirdest bug: if I open a new terminal and run `dmesg`, the cursor consistently turns red. ![image](https://user-images.githubusercontent.com/9433472/56462153-3b346d00-63b6-11e9-84b6-beee4a1361ce.png) Typing doesn't make it change colour, but backspacing over characters makes it turn white (the original colour). Running `dmesg` again in the same terminal results in it turning white also; after this, I can't reliably reproduce the bug in the same terminal window. The following file reproduces this (just `cat` it): [dmesg.txt](https://github.com/jwilm/alacritty/files/3100590/dmesg.txt) If I truncate that file much more, it no longer causes this to happen. Here's my alacritty config:\n\nDiscussion:\nI can't reproduce this myself, but chances are there's just an escape sequence in there that changes the cursor colors? Can you reproduce this in a different terminal emulator?\n---\nMore investigation (slightly stream-of-consciousness, sorry): At some point, the background for selected text after the end of the line changes colour, which is approximately when the cursor ends up red instead of white: ![image](https://user-images.githubusercontent.com/9433472/56463429-f9aebc80-63cb-11e9-9e25-b033cebae147.png) Interestingly if I tab-complete the filename (printing an extra 3 lines of text) before printing the file, the selected-text background changes colour 3 lines earlier: ![image](https://user-images.githubusercontent.com/9433472/56463435-0a5f3280-63cc-11e9-95be-11d645263833.png) Pasting all the text from the start of the session until the line before the colour change into a file results in a file 1024 lines long, which seems suspicious. (This isn't just due to some weirdness of a particular line in the test file â€“ I can remove the first line, and the first strange line still appears after 1024 lines have been printed.) I also just tested and I can reproduce this on latest master, 0d060d5d801e3abb55035269138d819d38fc175b. I've never seen it happen in any other terminal emulator (I've just tested gnome-terminal and xterm). It's not to do with cursor-colour codes; I can reproduce it by running this Python program:\n---\nThat actually sounds extremely similar to an issue that has been solved in https://github.com/jwilm/alacritty/pull/2328. The only differente being that in this issue it was about underline/strikeout and not background color. Which is kinda interesting because this was likely introduced with scrollback in 0.2 (a long time ago) and I've just noticed it the other day. I've actually tried out a more aggressive change but that lead to some test failure, however I'd propose trying that to see if it solves the issue for you. Could you try changing the `&template` [here](https://github.com/chrisduerr/alacritty/blob/e3a20a2c840330540e3943d1fb67f2c8b0a20640/src/term/mod.rs#L1323-L1338) (in both cases), to `&Cell::default()` and see if that fixes it for you?\n---\nYep, that appears to fix it.\n---\nI'll investigate this issue further, thanks for letting me know.\n---\n@anowlcalledjosh Could you test if #2599 fixes this for you?\n---\nbelatedly: yep, af30f3735a5e402509cb14b994576d0ea4799557 fixes it. thanks!"}
{"project_id": "Alacritty", "bug_id": "70", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Insert cursor disappearing in Neovim\n\nDescription:\nI've have noticed an issue with the cursor in **INSERT** mode in `neovim`. After having `neovim` open in `alacritty` for a while the cursor disappears when in insert mode. I'm having a hard time replicating the issue. ![Peek 2019-04-23 10-52](https://user-images.githubusercontent.com/2284724/56567834-0989f480-65b6-11e9-895f-042eb233d43e.gif) Worth noting is that restarting `neovim` does not fix the issue. I have to restart `alacritty` for it to disappear. I did not notice this issue with version `0.3.0`. **EDIT:** I also now noted that the cursor does not respect my set color. I have: But it looks like this: ![Peek 2019-04-23 10-58](https://user-images.githubusercontent.com/2284724/56568327-09d6bf80-65b7-11e9-8bcb-1b450abefa0f.gif) I'm running `alacritty` built from https://github.com/jwilm/alacritty/commit/4fbae5e397c514c245432a6415a4c99c52b7978f on **Arch Linux** with Xorg.\n\nDiscussion:\nIt's not just NeoVim... for me it disappears in normal ZSH shell... [![asciicast](https://asciinema.org/a/SciyUWI6u7eSJX49faYToor4C.svg)](https://asciinema.org/a/SciyUWI6u7eSJX49faYToor4C)\n---\nGetting the same issue as @sQVe. Are there some new configuration variables we should be aware of? I haven't updated mine since 0.3.0.\n---\nI've start noticing the same issue in neovim (in my case, since in fish shell cursor is fine). Alacritty respects the cursor colors in my config at startup, but it's stops doing so after some time spending in neovim ( 1 - 2 hours, maybe I'm lucky and not getting it triggered very fast).\n---\nThat looks extremely odd and I'm not able to reproduce it at all. I think some more background information might help out here. When you say it's hard to reproduce, do you mean this rarely happens? Or does it happen reliably, but it seems to happen after an arbitrary amount of time? Also does this happen with every cursor, or do only certain cursors like the underline and beam go invisible? Or only the block cursor? If you try changing the cursor using `printf \"\\e[?1Xq\"` (replace X with 1/3/5), are all the cursors invisible or can you get it to show up again with certain cursors? Does `reset` fix this issue? > I also now noted that the cursor does not respect my set color. Does this also only happen after a certain time, or will these never get accepted?\n---\n@chrisduerr For me this wrong behaviour hits me immediately when I try to move my cursor back... It seems to be that regression has been introduced after `a47d716` - so in the `cfc20d4f34`\n---\nIf a47d716daace7c197392854754406a06454ec380 broke this for you that would certainly be very surprising to me. I would have expected 371d13f8ef95157c97f7de9964bcbc89d4a8e930 to cause this problem. Can someone else maybe help with bisecting? I'd be curious if a47d716 is actually the culprit.\n---\nI should clarify, the issue is only happening to me while inside Neovim. I just ran `reset` and it _seems_ to have fixed the issue. If it happens again I'll keep an eye out for any patterns that trigger it.\n---\n@chrisduerr It's hard to reproduce because it seems to happen randomly, at least for me. It does happen quite quickly though. I had to restart my terminal around 30-40 times today, 8 hour work day. I've only seen an issue with the \"insert cursor\", i.e. the narrow line cursor. The cursor color had the same behavior as above. At first it works and when the insert cursor disappears the cursors are reverted to default setting. I'll try to check the rest later today. ðŸ‘Š\n---\nIf `reset` fixes the issue that would at least indicate that there's some terminal state which gets corrupted. Though getting the exact commit breaking this would probably still help out a ton. I currently don't have any clue where this could be coming from, so anything that would help me repro or narrow down the issue would be extremely helpful. So far the only reported platform is Arch with X11, is anyone here not running X11?\n---\nYes, I have the same issue when using neovim on my mac. And in my case it happens immediately when I open neovim.\n---\nAlso seeing something similar on neovim + tmux immediately after opening neovim. Not only the cursor disappears, but the screen also goes blank (and different parts of it show up and go blank as I navigate through the file). Testing on Mac. Interestingly enough, if I open neovim with no plugins/custom configurations (``nvim -u NONE``), the issue is gone. So it works fine with barebone neovim, but it also works fine when using other terminal emulators. I'll try to identify which neovim configuration/plugin is triggering the issue and I'll see if I can find some time to bisect alacritty too\n---\nI've tried adding some debug statements in hope that this might shed some more light on what exactly is going on when the cursor disappears. If someone who's capable of reproducing this reliably could try running this diff and send me the output it would be much appreciated.\n---\nI have the same issue on Fedora, although not reliably. I tried compiling with your debug statements, and it stopped happening :/\n---\nCannot reproduce on a47d716daace7c197392854754406a06454ec380 . Was using this commit all day.\n---\n@chrisduerr I've ran alacritty with your diff. I was able to get the broken cursor behavior, but the output, in the moment of switching to the wrong behavior, was the same as with the 'normal' cursor. Anyway here is the log. I've opened the file with neovim and start moving my cursor down and then up, until I got my cursor inverted, then closed terminal ( when HollowBlock messages appear). [log.txt](https://github.com/jwilm/alacritty/files/3109885/log.txt) I will try to debug it with rr and gdb. I hope that I'll find something.\n---\nI've done some testing under gdb and figured out that this [`if`](https://github.com/jwilm/alacritty/blob/e9813031f6e308984cb5547aa1049839cb75745f/src/term/mod.rs#L379) in pair with its `else` returns absolutely the same things whether cursor final colors are broken or not, so probably the colors are fine here. In my test I was moving from `(0,0)` cell in alacritty to `(1,0)`, both times from the same line in the file. CursorStyle - block, `cursor.cursor == Rgb(171,178, 191)`, `cursor.text == Rgb(40,44,52)`. Compiled alacritty with `--debug` and used `rust-gdb` as a debugger. The results of examining `return` statements with gdb `p` command are in the file. `If` branch is marked with `if:` and `else` with `else:` [log_next.txt](https://github.com/jwilm/alacritty/files/3110369/log_next.txt)\n---\n@kchibisov @chrisduerr For me a47d716 is fine, cfc20d4f34 introduced the problem."}
{"project_id": "Alacritty", "bug_id": "71", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Weird carat behavior when scrolling\n\nDescription:\nUsing the latest Alacritty, on Gentoo, and under Sway I see this interesting behavior when scrolling. I think the best way to describe it is to show it: [![Demo](https://i.imgur.com/Z9PlPfP.gif)](https://i.imgur.com/tLckMYA.mp4) P.S. Click on image for full video.\n\nDiscussion:\nCan you reproduce this in X or XWayland? Also does setting a different cursor (using `printf '\\e[4q'` for example) fix this?\n---\n@chrisduerr If the issue is about cursor, I can reproduce it on X11 with zsh just by opening new `alacritty` instance typing `ls -laF` bunch of times, then `Ctrl + l`, `ls -laF` and scroll up. It only happens when your prompt isn't at the bottom of the screen though (in the middle e.g). Update: Cursor will become hidden, when the current prompt will go offscreen .\n---\nHuh, I don't think I was able to reproduce this in bash on macOS at work, but on X11/Arch/zsh I can reproduce it when following your steps. I'm surprised I haven't noticed this, so my guess would be that this might be a regression. Testing the previous versions and bisecting the broken commit if those work might be a good idea.\n---\n@chrisduerr I'll bisect in a moment.\n---\nThat would be much appreciated, thanks for the help!\n---\n@chrisduerr This one cfc20d4f34dca535654cc32df18e785296af4cc5\n---\nMy best bet would be the following line which hasn't been carried over in the cursor rework: https://github.com/jwilm/alacritty/commit/cfc20d4f34dca535654cc32df18e785296af4cc5#diff-7b3174257e73247b46a5a32b142d45beL440 I'm not sure *why* it is required, but replacing `self.cursor.line` with `self.inner.line` might be worth investigating. If that's not it, I'd have to look into this a bit more.\n---\n@chrisduerr I've applied the following diff on top of the cfc20d4 and it seems like it resolves the issue.\n---\nHuh, that seems like an interesting pitfall. Do you want to send a PR or should I do that later? I think it might be worthwhile to add a comment to this line to state that this is intentional and why it's needed.\n---\n@chrisduerr I'll send it."}
{"project_id": "Alacritty", "bug_id": "72", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Double binding - ScrollPageUp\n\nDescription:\nWhen setting a binding like: The ScrollPageUp gets triggered twice, and I miss lines in the buffer. After a suggestion from irc, I removed the keybinding, and it works as expected. There might be an issue that register binding twice. The issues appears on: Linux X11 using git master from 2019/07/05\n\n"}
{"project_id": "Alacritty", "bug_id": "73", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Double-click selects trailing tab\n\nDescription:\nRun this: and double-click `select`. Observe that the cell after the word is also highlighted, and pressing ctrl-shift-C will copy the tab character. Alacritty 0.3.3, Ubuntu 18.04, X11\n\nDiscussion:\nI've verified this on the latest master branch.\n---\nAdding `\\t` to `semantic_escape_chars` in alacritty.yml fixes this for me.\n---\nSounds like that might be a reasonable change. I don't see why it wouldn't be part of it already, since a normal whitespace is already in there. So likely just an oversight."}
{"project_id": "Alacritty", "bug_id": "74", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Regression with scrolling performance\n\nDescription:\nWhile doing some tests with profile guided optimization, I've noticed that normal scrolling (the type that is done by `yes`), is extremely slow on the latest master. I've tested this with the version I'm currently running (f002171) and there's no such performance issue there. So somewhere in between 707f4293667d4d8564ab0afc13128463c2ee7fd5 and f002171 there must have been a change significantly impacting the performance of scrolling content inside of Alacritty. My best bet would be https://github.com/jwilm/alacritty/commit/0815774cbfb9d1421b8077d5d9d641faf5f818c1, however I haven't bisected it yet, so I'll update this issue when I've got some additional information.\n\nDiscussion:\n@chrisduerr I've decided to bisect it (I'm always running `perf` to test for the performance changes, when sending `PR`s, so was a little bit surprised, that I didn't noticed it in a first place). So, af30f37 has introduced the issue. The result of `perf stat -r 10 vtebench -b 10000000 scrolling` on 0815774 is on af30f37 and on f002171\n---\nThat definitely makes some sense, though it surprises me the impact is so huge. I'll take a look if there's a good way to resolve this properly. The `occ` of Row might have to be fixed/reworked a bit."}
{"project_id": "Alacritty", "bug_id": "75", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Underline starting in last line not rendered when scrolled up\n\nDescription:\nIf an underline is started in the last line while scrolled up in the terminal, the underline is not rendered correctly. This applies both for underlines printed using the escape sequence and for underlines created for URL highlighting. Quick investigation shows this might be caused by the `update_lines` method or some other step in the rendering process. It seems like the cells have the underline flag set correctly, or at least some flags have an underline flag set, I haven't checked if they're the correct cells yet.\n\nDiscussion:\nSeems like `strikethrough` is also affected. However selecting any cell (even empty) on line with underline + strikethrough shows both underline and strikethrough correctly.\n---\nSince strikeout and underline are handled pretty much exactly the same way, this does make sense. Good catch on the selection though. I'd expect this to be relatively easy to resolve once the cause is found, however I was caught up with finishing up my PR for moving Alacritty to rfind_url.\n---\n@chrisduerr I guess, I've found a starting point and it seems like something is super weird here. The code, which is seems to be responsible for it is [here](https://github.com/jwilm/alacritty/blob/54dca06bfbac50da0adb33c928e376b5c7986c4a/alacritty_terminal/src/renderer/rects.rs#L78). This \"if\" condition is **always** false and the cell.column, cell.line values are super odd. Also I've never seen `cell.line == size_info.lines()`. You're probably have more ideas on what's going on here, since I'm not very familiar with rendering code atm. I'll continue watching into this to learn about rendering, but anyway waiting for your feedback on this one. Edit: I've never hit `process::exit(127)` in 5mins of outputting/scrolling/0 scrollback.\n---\nThe issue was caused by this rework 6716c81c08c10477d2370d7e1ca56e31348a7fa3. The `cell.lines` seems correct on the commit before rework I've mentioned(they're counted from zero, but values looks fine, since they can reach size_info.lines()).\n---\nI'll take a look at the code later, but `cell.line == size_info.lines()` looks like an off-by-one error to me. I'd assume `cell.line` is zero based. However I don't understand why it would have worked previously. Same with the columns.\n---\n> I'll take a look at the code later, but cell.line == size_info.lines() looks like an off-by-one error to me. ~~For me, it's off by 7(random number) in case I create underline on the last line.~~ Nevermind, `alacritty` was rendering debug output too fast (instant update) and the needed lines were sent out of scrollback buffer without noticeable screen update. So yeah, seems like off-by-one. I think I can send a PR to fix this in an hour or less.\n---\nJust an update to the issue. The issue is presented only with the last underline in the last line ![Screenshot_Tue 30 Jul 2019 11:58:34 PM MSK](https://user-images.githubusercontent.com/27620401/62165193-92879900-b326-11e9-9d85-b571c394a944.png) This is also presented when underlining on a prompt regardless of the position, but your cursor should be to the left to underlined text. Just move a cursor across the url to get the broken behavior. Oh, and in case of current prompt, you should just place any symbol to the right of underlined text, and it will be highlighted properly (with cursor on the left side)."}
{"project_id": "Alacritty", "bug_id": "76", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Interpretation of \"private\" CSI diverges from other terminals.\n\nDescription:\nPlease don't threat CSI sequences with \"private use\" ( , ?) chars the same as sequences without with the same final character. These are code space extensions and often have quite different functions. Interpreting them the same as the sequence without will create glitches and confuse applications. The same applies to the intermediates (` !\\\"#$%&'()*+,-./`). Properly ignoring unknown sequences is essential for the ongoing terminal ecosystem evolution as new sequences are allocated. The current code in ansi.rs: `csi_dispatch` seems to get both these sequence parts in `intermediates` but mostly ignores them, except for select cases. The following is based on information of the sequences interpreted by xterm, vte/gnome-terminal, konsole and rxvt-unicode. Also see my ongoing [documentation project](https://terminalguide.netlify.com/seq/) for further details. I think for the currently implemented sequences the only ones that should trigger with an non empty `intermediates` are: * `J` and `K` for `intermediates` exactly `?`. Strictly this is for protected cells, but it's commonly implemented on terminals that don't actually implement protected cells (if protected cells are not supported it behaves like the non `?` version) * And of course `h` and `l` for `intermediates` exactly `?`. Similar to what alacritty currently does. * possibly `n` for `intermediates` exactly `?`. The expected behavior here is different from the not `?` versions and alacritty should either ignore them or properly implement this different behavior. alacritty currently only supports 5 and 6 so a proper implementation can just add a additional `?` in the output for the dec private variants. * `q` should set cursor style only when `intermediates` is exactly ` ` (space). Without it's a different sequence understood by xterm (and DEC compatible terminals; DECLL). Currently i think the following claimed sequences are misinterpreted: But in the future there are a lot more that have different meanings with non empty `intermediates`\n\nDiscussion:\nThanks for going into so much detail about the issue. It sounds like a very sane suggestion though I'd have to look into it myself to get a full grasp of the issue at hand.\n---\nAny news on this? Anything i can do to help this along?\n---\nWhile I think I understand the general situation, it's hard for me to judge what exactly needs to be done to resolve this. I'm also not aware of any serious bugs this *currently* causes in the wild. Because of this other issues have had priority for now. The best way to help is obviously always to contribute, but I don't expect that from anyone. Other than that this will just have to wait until I can get around to it.\n---\nI don't have much clue about rust. So i'm reluctant to open a PR, because i expect whatever i come up would be highly unidiomatic. Basically csi_dispatch in ansi.rs would need to include `intermediates` in addition to `action` in the matching. With almost all matches only triggering if `intermediates` is empty. The 'q' match would need to be modified to match on `action == 'q' && intermediates == [' ']`. The matches for 'l' (reset mode) and 'h' (set mode) would need to work with both `intermediates == []` and `intermediates == ['?']` but the modes are different namespaces (i.e. `\\e[12h` is [send receive mode](https://terminalguide.netlify.com/mode/12/) while `\\e[?12h` is [cursor blinking mode](https://terminalguide.netlify.com/mode/p12/)) I think alacritty might work with just those sequences. One step more would be to think about the other combination from my start post and thinking about what alacritty should respond to \"Secondary Device Attributes\" (`\\e[>c`). If you want to see which sequences (`action` + `intermediates`) other terminals support the documentation for vte (gnome-terminal, etc) at https://terminalguide.netlify.com/seq/ is fairly complete (all toplevel CSI sequences are listed and most have a description). I'm happy to help reviewing a possible PR for this, or course. I'm not sure if this currently causes bugs in the wild, i would expect software that does terminal identification based on responses to get confused by getting a \"Primary Device Attributes\" when asking for \"Secondary Device Attributes\". The library i'm working with certainly does."}
{"project_id": "Alacritty", "bug_id": "77", "source_type": "github", "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "Title: Pasting from empty clipboard throws error\n\nDescription:\nMinor observation, pasting from an empty clipboard, e.g. after a reboot, throws an error. OS: macOS Mojave 10.14.4 Alacritty version: bf353059a0f10bbccec754deb0e182cec3f6efe0\n\nDiscussion:\nThis has been fixed in #2391, thanks for the report."}
{"project_id": "Alacritty", "bug_id": "78", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Hovering mouse over message bar results in crash\n\nDescription:\nWhen you hover mouse over message bar `alacritty` will crash, this issue was introduced by 9dddf649a15d103295f4ce97b8ae4c178c9623e0 and presented on master.\n\n"}
{"project_id": "Alacritty", "bug_id": "79", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Wayland clipboard intermittently broken\n\nDescription:\nWhich operating system does the issue occur on? Fedora 30, on both alacritty 0.3.3 and alacritty master. I'm running in gnome-session-wayland-session 3.32.0. If on linux, are you using X11 or Wayland? Wayland. This issue doesn't occur in X11 at all. I noticed that sometimes, neither the Selection nor Clipboard works at all. I can't fix it without restarting alacritty. I ran a test just running it from my shell from another alacritty instance many times, and it's 50-50 each trial if the clipboard is either completely broken, and never works, or always works. I've added some debug statements: The output is as follows: So it seems the data is passed into `smithay-clipboard`, but it doesn't come out again.\n\nDiscussion:\nWhen I'm in a broken alacritty session, pasting text copied from other applications into alacritty doesn't work as well, but copying text in alacritty and then pasting to another application works. So it seems to me that just the clipboard loading is broken in any case. That it either fails all the time or never within one session could indicate a race-condition during startup.\n---\n@trimental Any idea?\n---\n@chrisduerr i have a suspicion this could be to do with registering a seat for the clipboard however Iâ€™ll have to do a bit of testing\n---\n@pschyska replicating this issue whilst using WAYLAND_DEBUG=1 could be useful. And if you know how to, putting a debug here https://github.com/Smithay/smithay-clipboard/blob/master/src/threaded.rs#L206 would be useful Iâ€™ll continue trying to replicate it on my machine\n---\n> @pschyska replicating this issue whilst using WAYLAND_DEBUG=1 could be useful. Attached a logfile. [debug.log](https://github.com/jwilm/alacritty/files/3317153/debug.log) > And if you know how to, putting a debug here https://github.com/Smithay/smithay-clipboard/blob/master/src/threaded.rs#L206 would be useful I'm afraid I don't. I don't know much about rust and I keep getting compile errors because the types don't implement Display or Debug. Additionally, the changes I do make directly in \".cargo/registry/src/github.com-1ecc6299db9ec823/smithay-clipboard-0.3.3/\" don't seem to take effect on subsequent alacritty builds. (I used `cargo build` in the .cargo directory above). If you can send me a patch with useful println!() statements and tell me how to build it I'm happy to try it out.\n---\nSorry @trimental, disregard above log. I had some changes I did for testing in copypaste. Here is a log taken when it *works*: [debug.working.log](https://github.com/jwilm/alacritty/files/3317175/debug.working.log) Here is a log when it doesn't: [debug.log](https://github.com/jwilm/alacritty/files/3317176/debug.log)\n---\nI use alacritty 0.3.3 on arch with Gnome 3.32, and after 0.3.3 neither primary nor secondary buffers work for me on wayland session at all. Never, no conditions like OP mentioned, it simply doesn't work. Although Ctrl-Shift-c and pasting to Firefox works, neither Ctrl-Shift-c nor primary selection works in alacritty.\n---\nSo I tried some inspection in lldb on the line you indicated earlier. First of all, I found it odd that lldb stopped *two* threads on that breakpoint at the same time. Is that supposed to happen? The breakpoint was immediately hit after I ran the program. I then evaluated the arguments to `implement_seat`. I have to admit I have no clue about any of this :smirk:. Can you tell me what you are looking for specifically @trimental ?\n---\nI think I'm seeing two threads because alacritty actually starts two clipboard context. When I change this I'm unable to reproduce the issue anymore! (I tried it about 20 times so far). Could there be a race because two clipboard threads are started simultaneously.\n---\n@pschyska @Freyr666 If you could test branch https://github.com/Smithay/smithay-clipboard/tree/roundtrip-before-n-after with it would be appreciated :)"}
{"project_id": "Alacritty", "bug_id": "80", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Color issue introduced in commit 629e24\n\nDescription:\nWhich operating system does the issue occur on? >(linux 5.1.5) If on linux, are you using X11 or Wayland? > Wayland (sway) While testing the latest master I ran into an issue where the entire terminal will turn green. Doing a git bisect points towards commit 629ea247cdccc33c6df0037f357ba9be48c7178d I looked over the commit but could not find any obvious issues with the code, but then again I barely know rust. Let me know I you need any more info in order to debug.\n\nDiscussion:\nWould you mind creating ref test `alacritty --ref-test` in case you can reliably repro the issue? P.s. Close your alacritty with WM hotkey and not `Ctrl-D` (due to this #2625)\n---\nHere's the output from --ref-test, is it supposed to be like this? [alacritty.recording](https://gist.github.com/7415963987456321/818b56394fb1de8374e6f115c7d11609) I thought for a second that the issue was with my greeting message, a small ascii logo and output from neofetch run through lolcat, however it seems that disabling that feature still results in everything being green.\n---\nJust realized that runnng alacritty with -e `alacritty -e htop` results in normal output.\n---\nI want to believe this is a configuration issue, could you try running without any custom shell configurations (backup your `.bashrc` or equivalents). The fact `alacritty -e htop` works makes me think something your shell is doing is causing this.\n---\nDo you have a script which tries to set your terminal colors outside from what is done through the Alacritty config? Also, just to make clear, when you shut down the ref test, the entire terminal was green at that point, right? Ref tests replay all escapes that were sent to the application, so this is only useful if the last state your terminal was in was erroneous.\n---\n@nixpulvis I usually run fish shell, setting the shell to bash(I have no custom options in my bash setup) with chsh results in the shell being displayed normally. @chrisduerr Ah, yes of course, forgot to mention that I run pywal, that might be the culprit. I just tried reloading another pywal colorscheme and that changes the result. So my pywal color-scheme is generated from my wallpaper, while rolling through some wallpapers I noticed that about half of them give the terminal the green color, sometimes varying in tint, while others work normally. So it seems the issue lies with how pywal is changing the colorscheme of the terminal. I don't know why it has started doing the green background all of a sudden though... is this a bug with how alacritty interprets the colorscheme from pywal? Everything used to work fine before commit 629ea247cdccc33c6df0037f357ba9be48c7178d .\n---\nSeems like the #rrggbb format has been broken with the xparsecolor rework. Minimal repro: `echo -e \"\\e]11;#090B13\\007\"`.\n---\nFixed in https://github.com/jwilm/alacritty/pull/2763."}
{"project_id": "Alacritty", "bug_id": "81", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Links without a space after it\n\nDescription:\nIf there is text after a link with non white space delimiter between them hovering over this text will show the underline under the link and clicking it will open the link but the underline is only under the link not the text. Additionally if there is a second link in this text it will not detected. Example: A markdown link `[http://example.com](http://example.com)` I'm on macos using 0.3.2\n\nDiscussion:\nI can reproduce, looks like there's a bit of a problem with the combination of brackets here. > the underline is only under the link not the text If I understand you correctly, you mean that the [text] part of the URL should get underlined? This is not intended and will not be supported. So I'd like to limit this feature to the incorrect detection of URLs with the combination of brackets here.\n---\nThe correct text is underlined. The bug is that the text after the link when click will cause the link before it to open even though the link wasn't clicked"}
{"project_id": "Alacritty", "bug_id": "82", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: message bar displays ANSI escape codes on warning/error\n\nDescription:\nWhich operating system does the issue occur on? - Fedora 29 - alacritty-0.3.2 - rustup 1.18.3 If on linux, are you using X11 or Wayland? - X11 --- I am missing `xclip` on my system, so alacritty is (correctly) giving me an error about this in the message bar. However, it looks like the message has ANSI color escapes that aren't being handled: ![image](https://user-images.githubusercontent.com/1066487/58286397-80581000-7d63-11e9-972d-9395df6245a7.png) I'm guessing these escapes correspond with the color red, since that's what's displayed when I invoke alacrity from another terminal: ![image](https://user-images.githubusercontent.com/1066487/58286454-9ebe0b80-7d63-11e9-8929-1ae4d2d80002.png) **Expected Behavior**: alacritty should either: 1) Parse the ANSI codes and use the correct color (harder to implement) or 2) Filter out the ANSI escape codes (easier to implement)\n\nDiscussion:\nI think the second suggestion is probably the most reasonable, it should give the best balance. However, there is a third option: Not using color when logging. If possible the other options should be preferred since they are less limited, but that would obviously be the easiest solution of all of them.\n---\nI think I kinda like just not printing color when logging. That's how many programs handle this. Otherwise, option 2 seems better if only because I don't want to deal with contrast on a colored message bar."}
{"project_id": "Alacritty", "bug_id": "83", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: 0 Width Vertical Block Selections\n\nDescription:\nI've uncovered a bug while testing #2719 (as noted there). Basically we shouldn't allow empty vertical block selections of width 0. This can cause a situation where it looks like there is no selection, but in fact there is one. Since a selection prevents actions like clicking a URL, this can lead to strange user interactions. ![block-selection-url-bug-2019-09-07_00 03 52](https://user-images.githubusercontent.com/715947/64469624-18a3b600-d103-11e9-91bb-0f7f675d2fda.gif) To reproduce on master, create a 0 width N height block selection, and then attempt to click a URL. I believe a proper fix for this is to disallow 0 width block selections, similarly to how other selections disappear.\n\nDiscussion:\nFix was extremely simple, let me know if https://github.com/jwilm/alacritty/pull/2793 solves all the problems you've found!"}
{"project_id": "Alacritty", "bug_id": "84", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Visual bell animation stalls\n\nDescription:\nThe event loop stalls before completion of visual bell animation, even when the dirty bit is still set.\n\nDiscussion:\nI'm still seeing (what I think is) this issue on 0.4.0. I cause a bell, it mostly finishes the animation, but there's still an overlay of red (bell color) until I type another key. The opaqueness varies from bell to bell. Using Xorg version 1.20.6 GPU: 08:00.0 VGA compatible controller: NVIDIA Corporation GK208B [GeForce GT 710] (rev a1) Bell config: visual_bell: animation: Linear duration: 200 color: '0xff0000'\n---\nNote: I'm able to reproduce this on one computer with the above information, but not my laptop.\n---\n@virtualdxs Would you mind opening a separate issue for this?\n---\nWill do."}
{"project_id": "Alacritty", "bug_id": "85", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Crash on `ESC [ Pn; Pn r` with Invalid Range\n\nDescription:\nCurrently if you run `echo -e '\\e[15;1r'` in debug mode, Alacritty will panic. This is because a range should start with a smaller number than it ends with. XTerm (and I) think that a sequence like this should simply be ignored. It's also worth noting that XTerm also ignores a range where `A=B` so `echo -e '\\e[15;15r'` would also be ignored.\n\n"}
{"project_id": "Alacritty", "bug_id": "86", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: reset selection when removing chars from before selection?\n\nDescription:\nalacritty @ 9ff2838844df45b6a1f20621ced870e9e1855ec8 I can type something like `Hello, this is a test.`, then I select the word \"this\", move the cursor to the start of \"this\" and remove the substring \"Hello, \" which will cause the selection to become \" a t\" as the text shifts to the left but the selection stays in place. This looks odd imo. It even looks a bit stranger when I double-click-select and the selection will automatically select the 1-2 words that are under the position that I clicked at initially, as the text scrolls by during deletion. The actual clipboard content still represents the initially clicked test at least. Which operating system does the issue occur on? linux If on linux, are you using X11 or Wayland? linux 5.3.5-1-MANJARO, x11\n\n"}
{"project_id": "Alacritty", "bug_id": "87", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: hovering over very long lines slows down alacritty\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? Wayland Reproduce: `head -c81920 /dev/urandom | base64 | tr -d '\\n'` It also seems to happen with /dev/zero\n\nDiscussion:\n\"Slows down\" sounds like major understatement: it freezes Alacritty 0.3.2 (on X11) with 100% CPU usage for 20s. The longer the line, the harder it hits: 163840 causes 53 seconds hang.\n---\nJust to clarify, this should already be fixed by https://github.com/jwilm/alacritty/pull/2413, however that introduces some other problems so I'm not ready to mark this as resolved yet. Hopefully that PR will end up in a state that automatically resolves this issue too though."}
{"project_id": "Alacritty", "bug_id": "88", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: If an SGR escape sequence sets the background color to the terminal background color, it is not opaque\n\nDescription:\n> Which operating system does the issue occur on? Arch Linux > If on Linux, are you using X11 or Wayland? Wayland --- I realized this when a [truecolor program](https://gitlab.com/xPMo/snippets/blob/master/c/truecolors.c) I wrote appeared with a noticeable hole in it. Because I use opacity in my terminal, I can see the background through it, instead of it being completely opaque due to the escape code. Example using `0x303030` background with opacity `0.0`: ![iExample](https://i.imgur.com/9NgL3Am.png) As you can see, when `\\e[48;2;48;48;48m ` is printed, instead of a solid grey, it is completely transparent.\n\nDiscussion:\nItâ€™s a known thing and not a bug, since it was done intentionally iirc. The main problem with this behavior is that itâ€™s not documented in config file. This thing exist for achieving transparency in alt-screen apps like alsamixer/vim/mutt etc. If you dont want this behavior just change background color a bit.\n---\n> This thing exist for achieving transparency in alt-screen apps like alsamixer/vim/mutt etc. Ah, I'm used to urxvt, which does not do this. I understand why this behavior exists; a program explicitly setting the background to the same as its default color probably has the intention of resetting the background. The program I was using broke this assumption, since it intends to print arbitrary colors. [`pixterm` is another program](https://github.com/eliukblau/pixterm) which will have this issue; if an image is printed which happens to have a pixel match the background color, a noticeable hole will appear. I would like to disable this behavior for this reason, or even better change it so that only the 16-color black causes this. I'll try and patch this myself, so leave this issue closed unless someone else wants this behavior.\n---\n> I would like to disable this behavior for this reason, or even better change it so that only the 16-color black causes this. I'll try and patch this myself, so leave this issue closed unless someone else wants this behavior. As I said, just slightly change your background color, you're already using opacity setting, so you shouldn't notice it. Otherwise you have to change how alacritty rendering works.\n---\n> slightly change your background color ... you shouldn't notice it If I'm understanding you correctly, you're talking about something like setting `black: '0x000020'` and `background: '0x00001F'`, right? That way `\\e[40m` will display in `#000020`, and not trigger the opacity setting. This won't help if I want to use `pixterm` or a similar program. If my background is `0x000020`, then I'll see a hole whenever pixterm displays an image with `#000020`. If I slightly change it to `0x00001F`, then I'll see a hole whenever pixterm displays an image with `#00001F`. I could view any image with any colors in pixterm, so any background will cause this papercut somewhere.\n---\nWhile setting the color to the background color should give transparency, specifying a truecolor should not cause any transparency. @kchibisov is already working on a patch to fix this, so hopefully we can get the best of both worlds here again (seems like there was a regression in e964af8a5ea390d96667e80873060d33079134fd)."}
{"project_id": "Alacritty", "bug_id": "89", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Background is semi opaque during visual bell animation\n\nDescription:\nArch Linux, Wayland(sway) and X11 (i3 + compton) During visual bell animation background is transparent(not fully though) with disabled transparency. Edit: Was able to repro on v0.3.3, so probably an old bug.\n\nDiscussion:\nAlso note that the animation does not finalize. 1. Set duration to 500ms 2. Cause bell to trigger 3. Observe 3 draws with opacity ~0.8, ~0.7 and ~0.4 4. Observe that no further draw calls is made, resulting in an unfinished animation. Typing will cause the animation to progress (however, it doesn't always finalize completely). terminal.dirty is still true, so it would appear that the event loop is stalled. Maybe we need to force a draw event somehow if the terminal is still dirty.\n---\nThis is a bit surprising to me since we draw our visual bell *above* the normal terminal background. There might be an issue with the operations we perform (say we render in replace, instead of merging). > terminal.dirty is still true, so it would appear that the event loop is stalled. Maybe we need to force a draw event somehow if the terminal is still dirty. The terminal's `dirty` flag shouldn't be cleared when an animation is still going on. You can see that in `event.rs` pretty clearly.\n---\n> The terminal's dirty flag shouldn't be cleared when an animation is still going on. You can see that in event.rs pretty clearly. As I said, the terminal is set to dirty, but no further draw calls are made. Either something else ends up clearing the bit outside of the assignment in event.rs, or the event loop has stalled. I did not investigate further yesterday.\n---\nSplit out as #2914\n---\n> As I said, the terminal is set to dirty, but no further draw calls are made. Either something else ends up clearing the bit outside of the assignment in event.rs, or the event loop has stalled. I did not investigate further yesterday. Yeah, I didn't understand what you meant with your initial comment, however it seems like you've already figured it out. Thanks."}
{"project_id": "Alacritty", "bug_id": "90", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Modifier state is wrongly set while switching between windows\n\nDescription:\nWhich operating system does the issue occur on? Linux, Fedora 30. If on linux, are you using X11 or Wayland? X11, i3. I'm using latest master branch. Sometime, randomly, the up arrow key doesn't work. Switching focus to another window and focus back again fix the issue. I saw this issue since #2438 , I also remember some guy mentioned it in the discussion. EDIT: Scenario: I use i3wm, switching between windows is done by Logo+L. Which certain timing of Logo+L, logo modifier is turn on when it should not be, this can be seen in --print-events. The state was wrong right after it was passed from glutin in the event loop, this suggests the bug is of glutin.\n\nDiscussion:\nWhile using Vim, `k` doesn't work as well, not only up arrow.\n---\n@nixpulvis I think you've run into this before, right? > While using Vim, k doesn't work as well, not only up arrow. This sounds interesting, does the key not work at all, so is it just swallowed? Can you reliably reproduce this?\n---\n@chrisduerr I did notice an issue with the up arrow key once, but never anything with 'k'. This does indeed sound like the same issue, sadly I haven't noticed it again in a while, and I have no idea how to reproduce.\n---\n@nixpulvis I recommend you to read though #2907. Since this issues are identical imho.\n---\n@juchiast would you mind to post `print-events` logs, since iirc you can reliably repro this issue now? Also type some random character(e.g. `a`) for us to understand when the issue start happening.\n---\n[Alacritty-8292.log](https://github.com/jwilm/alacritty/files/3767026/Alacritty-8292.log) [Alacritty-8293.log](https://github.com/jwilm/alacritty/files/3767029/Alacritty-8293.log) The bug happens on Alacritty-8292.log. 8293 is the other terminal that I use to reproduce the bug. The bug happens on the section after the last `Focused(true)`.\n---\nUpdated the description, I think this can be reproduced with glutin-only.\n---\nI was also able to repro it occasionally, while I was using X11, pretty strange issue though.\n---\nReported upstream in https://github.com/rust-windowing/winit/issues/1259.\n---\nWell, I have a similar issue on Wayland."}
{"project_id": "Alacritty", "bug_id": "91", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Black border around terminal area\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 Ever since commit d76bb0c69793eda42d0e46d4a7c7218b8a3a4a37, after resizing the window, I have a black bar around the terminal area within the terminal window. Also text rendering is kind of fuzzy (and smaller) compared to previous versions.\n\nDiscussion:\nHere is a screenshot of `make menuconfig` from the Linux kernel to show what I mean, this is supposed to take up the entire terminal: ![image](https://user-images.githubusercontent.com/33690/67920989-7c76b800-fb63-11e9-8c2a-e6dec887e84f.png)\n---\nThanks for the report, this is a known issue though it hasn't been tracked as issue yet. There's an upstream fix here: https://github.com/rust-windowing/winit/pull/1252 So once that is merged, this will be resolved."}
{"project_id": "Alacritty", "bug_id": "92", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Don't delete lines above the cursor on CSI Ps M\n\nDescription:\n`Alacritty` should clamp `Ps` to not go above cursor, so if you're on the bottom line, typing `echo -e '\\e[1000;M'` shouldn't delete all the thing above and should be clamped to `1`. P.s. All the other terminals clamp it(vte based, xterm, kitty).\n\nDiscussion:\nAh, interesting, thanks for investigating this.\n---\nShould be fixed in https://github.com/jwilm/alacritty/pull/2985."}
{"project_id": "Alacritty", "bug_id": "93", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Key binding mode replacement consistency\n\nDescription:\nThis is a follow-up to https://github.com/jwilm/alacritty/pull/2642. Currently the idea is that whenever a user defines a binding with a bigger scope `mode`, that the default binding is overwritten. The idea behind this is that the user's binding will always work for all scopes he has defined, while default bindings are left untouched as much as possible. This already works well when staying either only in positive, or in negative modes, but as soon as modes are mixed like `Alt` and `~Alt` things get messed up. Overwriting a default binding by only overwriting the `~Alt` one for example, will currently also disable the `Alt` binding. This is inconsistent with what would be expected by the user, since he has only requested a change in Alacritty's behavior in this specific mode. I think to make sure that we do not create a regression in another area by fixing this, it's probably useful to lay out a table with all possible relevant combinations and creating dedicated tests for them to assure that the specification and implementation match up properly this time.\n\nDiscussion:\nHere's a table of the currently intended overwriting behavior: **ALL:** All terminal modes. **A:** A terminal mode other than **B**. **B:** A terminal mode other than **A**. **~Y:** Mode **Y** not set. **X:** Replace binding. **0:** Keep binding. | | ALL | A | ~A | B | ~B | A + B | ~A + B | A + ~B | ~A + ~B | |---------|-----|---|-----|---|-----|-------|---------|---------|---------| | ALL | X | X | X | X | X | X | X | X | X | | A | X | X | 0 | 0 | 0 | X | 0 | X | 0 | | ~A | X | 0 | X | 0 | 0 | 0 | X | 0 | X | | B | X | 0 | 0 | X | 0 | X | X | 0 | 0 | | ~B | X | 0 | 0 | 0 | X | 0 | 0 | X | X | | A + B | X | X | 0 | X | 0 | X | X | X | 0 | | ~A + B | X | 0 | X | X | 0 | X | X | 0 | X | | A + ~B | X | X | 0 | 0 | X | X | 0 | X | X | | ~A + ~B | X | 0 | X | 0 | X | 0 | X | X | X | A short summary would be that a binding is removed, when either of the bindings contains any mode of the opposing binding."}
{"project_id": "Alacritty", "bug_id": "94", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Windows: startup_mode: Maximized no longer works\n\nDescription:\nSystem: Windows 10, Alacritty 0.3.3. Using `startup_mode: Maximized` has the same effect as `startup_mode: Windowed`. However, `Fullscreen` works fine. This seems to be a regression compared to before.\n\nDiscussion:\nWhen you say regression, where did it regress from? I'd assume you mean 0.3.2? Generally it would be nice to have a specific commit hash which broke it, but I'd assume that was a winit/glutin update. So before testing that, the #2438 PR should probably be tested, which updates Alacritty to the latest version of winit.\n---\nI am able to replicate this, but different behavior I think. If I use `startup_mode: Maximized` the window starts at the top left of my screen and \"thinks\" it is maximized. (i.e it displays the \"Restore\" icon vs Maximize icon), example: https://i.imgur.com/Jc4CWw0.png If I restore it and maximize again, it then maximizes correctly. Also, I tested several older versions of Alacrity, `Maximized` does nothing for me before v0.3.3-rc1. All builds before that just start the window normally. All builds after cause the behavior mentioned. I've also tested the #2438 PR, it behaves identically to the most current release (0.3.3)\n---\nI confirm @JDTX comment: it does not exactly behaves like `Windowed` like I said, but like JDTX described. I can only test further after the weekend for the previous working version (the option used to be called `start_maximized` then).\n---\nOkay, but then it's not a regression. The following patch might fix this, could someone try it?\n---\n@chrisduerr Your patch had some issues, There was an extra \")\" character from \"any\" that wasn't removed, I removed the extra \")\" and got another compilation error: I removed `if window.is_x11()`, it compiled, but `startup_mode: Maximized` still behaves the same.\n---\nIt would be nice if someone could test the examples of https://github.com/rust-windowing/glutin. The normal window example can be run with `cargo run --example window`, though the following diff needs to be applied first: If that doesn't work, this needs to be reported to winit.\n---\n@chrisduerr The example had the same results, I've reported the issue upstream w/ winit. https://github.com/rust-windowing/winit/issues/1009\n---\nSeems like upstream is fixed now with https://github.com/rust-windowing/winit/pull/1013"}
{"project_id": "Alacritty", "bug_id": "95", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Lagging while using nano, vim, etc.\n\nDescription:\nWhich operating system does the issue occur on? `Ubuntu 16.04` If on linux, are you using X11 or Wayland? `X11` When I use nano it isn't loaded immediately, after I press a key it gets rendered. even while typing in nano, A key press will load the previous key and not the current key. Even when exiting, the save file option is shown only after I press some key. This issue remains with any editor I use. Even when using `git log --graph --pretty='\\''%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %Creset'\\'' --abbrev-commit` command, it gets rendered only after I press some key. Following is the video to showcase the issue. ![simplescreenrecorder-2019-03-26_14 22 30](https://user-images.githubusercontent.com/26005890/54984228-6ce32f80-4fd4-11e9-98c0-f0c079789787.gif) If you need any other info related to system config or want me to try out some experiments, I can help. EDIT 1 : Using `alacritty 0.2.7`\n\nDiscussion:\nAnother thing I noticed is, everything works perfectly when I use a new instance of alacritty. But when an instance stays inactive for a while, it starts lagging. Sometimes writing in the terminal starts lagging.\n---\nCan you reproduce this in another terminal emulator? What if you try a different shell (`bash`, `zsh`, `fish`)? And finally, can you see if this is reproducible on the latest master? I don't have this issue and that's what I'm currently running. Even checking out the 0.2.7 tag doesn't give me the same behavior.\n---\nCould you try running Alacritty with `alacritty --print-events` to show if Alacritty is updated with a delay or if the key events are actually coming in *after* the key is pressed (with a delay).\n---\n@cole-h > What if you try a different shell (`bash`, `zsh`, `fish`)? The issue remains irrespective of what I use. > Can you reproduce this in another terminal emulator? I'm unable to reproduce. > can you see if this is reproducible on the latest master? I will try it and let you know.\n---\n@chrisduerr, Following is the output of the `print-events`.\n---\n@svaderia I'm sorry if I've been a bit unspecific, but the event log itself doesn't actually help. I'd like to know if the events arrive when you press the keys, or if they are delayed. The goal here is to find out if the key events arrive late, or if they arrive as soon as you press the key, but Alacritty doesn't update for a while.\n---\n@chrisduerr I got your point. I checked it, the event arrives at the time of key press but alacritty doesn't update till I press the next key. Another thing I noticed is, the delay only happens when I'm using alacritty in full screen mode (That is my default and preffered choice). It works perfectly fine when I resize it.\n---\n> @chrisduerr I got your point. I checked it, the event arrives at the time of key press but alacritty doesn't update till I press the next key. That's very odd, it would mean that Alacritty is not redrawing appropriately. Do you use compton as a compositor or a full package like Gnome/KDE?\n---\nI'm using Gnome and not Compton.\n---\nIf you have the chance to easily test on Wayland, it might be interesting to see if that changes things. Some hardware information might also be useful. Which GPU and driver are you using?\n---\n> If you have the chance to easily test on Wayland, it might be interesting to see if that changes things. Will let you know. > Some hardware information might also be useful. Which GPU and driver are you using? GPU : GM108M [GeForce 840M] driver : i915\n---\n> driver : i915 That's an intel iGPU driver though, right? So probably not what's being used for the 840M? If you're actually using the Nvidia GPU with the correct driver, that shouldn't be an issue though.\n---\nAh, my bad. Using `NVIDIA binary driver - version 387.26 from Nvidia-387`\n---\n@chrisduerr I'm using Alacritty's latest \"master\" (91aa683bcd060b2ac2f621a388a6448f564d0537) and am experiencing this issue with any program that makes frequent updates to the terminal (eg, apt install , vim [:PlugUpdate], etc). Few screen updates take place until I press a key on my keyboard, then everything updates at once. This issue does NOT exist in Alacritty v0.2.9 for me; everything works flawlessly there. Both \"latest master\" and \"v0.2.9\" were compiled from source on my machine. OS: Linux Mint 19.1 Laptop: Dell XPS 15 GPU: GeForce GTX 1050 Nvidia Driver Version: 390.116\n---\nSee below for a screencast using Vim and the latest version of Alacritty. The left terminal is alacritty, the right terminal is Gnome-Terminal. I'm using Screenkey to print my keys at the end so you can see exactly when I press them: ![screencast](https://user-images.githubusercontent.com/3723671/55291365-dcc63100-53ab-11e9-964b-32804fb6b8ce.gif)"}
{"project_id": "Alacritty", "bug_id": "96", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: focused terminal turns invisible with chunkwm when opening another application\n\nDescription:\nWhich operating system does the issue occur on? MacOS 10.13.3 Alacritty version: 03f9e0cd9a417550d53f34f7b9671a488363d411 A focused alacritty terminal turns invisible when another app is opened. I'm using [chunkwm](https://github.com/koekeishiya/chunkwm) (a tiling window manager) so the alacritty terminal gets resized when I open another app. The contents of the alacritty terminal become visible when I focus the window again. I attached a gif showing this in action, the red outline shows which window has focus. If I had to guess, this weird combination of a window being resized but losing focus that causes the terminal to stay invisible. This is really just an annoyance :) ![alac](https://user-images.githubusercontent.com/86304/36497669-ce8a28ce-16f0-11e8-970a-3477855cbdb9.gif)\n\nDiscussion:\nHmm If I had to guess the window probably isn't redrawn even though it should be. However there should be a redraw issued after resizing, not sure why it doesn't happen. There have been some issues with transparency in the past, would you mind testing this with transparency disabled? You can disable it by setting the `true` ![here](https://github.com/jwilm/alacritty/blob/master/src/window.rs#L200) to `false`.\n---\nI still see the same behavior with that change. FWIW I have transparency off in my config `background_opacity: 1.0`. I also tried running alacritty with `-vvv` and this is what I see: There's no output when the terminal gets resized and turns invisible. I see the following output when I focus the terminal.\n---\nLooks like it's not receiving resize events until the window is focused. That's a bit odd.\n---\n@chrisduerr it's due to the macOS event loop model and winit's implementation. There's a PR in the pipeline which runs the event loop on a coroutine which is then suspended when receiving resize events thereby allowing us to redraw as it's received. https://github.com/tomaka/winit/pull/237\n---\nHmm seems like the author of that PR got frustrated :(\n---\nI have exactly the same problem. Waiting for [winit PR](https://github.com/tomaka/winit/pull/237).\n---\nThere's some more interesting info about this in https://github.com/jwilm/alacritty/issues/1798.\n---\nThis happens to me as well, but I'm running **Amethyst v0.12.2**\n---\nIssue is still there with the newest stable Alacritty and Amethyst (0.3 and 0.13). Any updates?\n---\nIf you're interested in tracking progress, I'd recommend subscribing to the upstream issue. I'm struggling with this myself on macOS, however there's nothing Alacritty can do here. Once it's fixed upstream, it will be resolved in Alacritty within a short period of time.\n---\nThanks\n---\nIt looks like that PR has been closed due to the creation of EventLoop 2.0. See https://github.com/rust-windowing/winit/issues/459 for the new Event Loop system PR.\n---\n@alexmaras you can follow the work being done on the new event loop integration in #2438. I'd be curious to hear if this solves the issue @jwkvam described.\n---\n@nixpulvis `run_return` is steel not implemented in `winit` on macOs, so you can't run #2438 on macOs atm. For reference [winit#1005](https://github.com/rust-windowing/winit/issues/1005).\n---\nI've noticed that https://github.com/jwilm/alacritty/pull/2438 seems to fix this issue. If anyone is interested in confirming this for other WMs (I've been using yabai), please let me know."}
{"project_id": "Alacritty", "bug_id": "97", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Unable to launch when a virtual display is connected: 'assertion failed: validate_hidpi_factor(dpi_factor)'\n\nDescription:\nArch 5.2.4 and X11. I am using `intel-virtual-output` for my virtual display. [here](https://gist.github.com/Zer0897/4ac7d084fd9c924ad76f445ca3cd643d) is the output of `xrandr`. Let me know if you need anything else.\n\nDiscussion:\nI'd assume when you clone https://github.com/rust-windowing/winit and then run `cargo run --example window`, you get the same crash?\n---\nEverything seems to work fine with `winit`\n---\n@Zer0897 Could you test #2438 or `winit v0.19.1`?\n---\nNo luck with #2438\n---\n`winit v0.19.1` does give me the same error\n---\nDo you have `Xft.dpi` set in `.Xresources`?\n---\nI did not. Adding it has no affect.\n---\nOdd, would you mind restarting x11/rebooting. The assertion that was triggered can be reached if winit fails to retrieve Xft.dpi.\n---\nNo change I am using [a minimal display manager](https://wiki.archlinux.org/index.php/CDM) and [xmonad](https://xmonad.org/) as my window manager. Not sure if that means anything.\n---\nCould you try this one `env WINIT_HIDPI_FACTOR=1 alacritty`?\n---\nThat worked! The virtual display must not be picking up the settings correctly.\n---\nIf winit works, but v0.19.1 doesn't, that sounds like it has been fixed in the latest winit. Could you test the latest glutin (https://github.com/rust-windowing/glutin) and downgrading glutin to the latest release in case the latest master works.\n---\nBoth `gluten` master and `v0.21.0` work fine.\n---\nAre you *positive* you've tested #2438? The text in the code snippet says you're on your master branch.\n---\nOh nice catch! Forgot to checkout the branch after cloning the fork. That runs perfectly! @chrisduerr\n---\nThanks for checking again, then everything makes sense. Marking this issue as fixed by the mentioned PR."}
{"project_id": "Alacritty", "bug_id": "98", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: window.decorartions: none not working on Windows 10\n\nDescription:\nOS: Windows 10 Enterprise (10.0.17763 Build 17763) alacritty version: alacritty 0.3.3 (cc3e4d3) My config: It all works fine, until I set the `decorations` attribute to `none`. When I start alacritty with that config, a **window opens without any error, but it is not visible** Output of alacritty.exe -vv run in Powershell:\n\nDiscussion:\nCould you try running the `window` examlpe in https://github.com/rust-windowing/glutin? This is the patch you need to apply to disable decorations for the example: You can apply patches using `git apply patch.file` and then run the example using `cargo run --example window`.\n---\n@chrisduerr I was able to replicate the problem that was described by the OP. Figured I'd lend a hand. The glutin example you provided with the patch runs fine on my machine. It just shows a white empty window. I tested a few Alacritty releases and discovered [0.3.0](https://github.com/jwilm/alacritty/releases/tag/v0.3.0) introduced the bug. [0.3.0 RC3](https://github.com/jwilm/alacritty/releases/tag/v0.3.0-rc3) works fine. I decided to spot test the commits between 0.3.0 RC3 and 0.3.0 and found that [this commit to window.rs](https://github.com/jwilm/alacritty/commit/6757acbb824e8be9968529a66e9a75a0a2ea2f5d#diff-2ce3f8d26915325bbd02de9e0056281e) caused it. Every commit before then works fine when `decorations: none` is used. Hope that helps you.\n---\nCould you try with #2438?\n---\nI got a runtime error trying to run that PR ![image](https://user-images.githubusercontent.com/24833917/59957950-96d9b000-9464-11e9-8703-e3a1e7ac81e6.png) This is what I ran to get that PR and build it:\n---\nCould you uncomment this line: https://github.com/jwilm/alacritty/pull/2438/files#diff-65362e8e7fbdb92518e6216cd7f10722R575 I think that's causing the unimplemented error, but it should be irrelevant for working properly.\n---\nDid you mean comment the line out instead of uncomment? If so, I commented it out, got a warning about dead_code, but it compiled. Running it didn't result in a runtime error, but the problem persists.\n---\nSince the glutin example was just a white window instead of the rectangle it is supposed to render, I've reported this problem upstream: https://github.com/rust-windowing/winit/issues/979\n---\n@JDTX This should have been fixed 4 days ago in winit, I'm not sure if the version you've tested already had that fix in or not. Could you test the #2438 PR again, I've bumped it again so the IME failure should not arise anymore and the latest winit version should be included. Would be much appreciated.\n---\n@chrisduerr I received a compilation error with the latest code from the PR.\n---\n@chrisduerr That looks like you use the former name of `with_visible` which was renamed in https://github.com/rust-windowing/winit/commit/2b89ddec15c897 on June 12 (almost 2 weeks ago).\n---\n@felixrabe Thanks for the information. I ran these two commands against the PR to update them, @chrisduerr It built with the above changes, and it works now with decorations set to none! ![image](https://user-images.githubusercontent.com/24833917/60081257-0cf54580-96f7-11e9-8f6c-216054d88313.png)\n---\nThanks for the help with testing, looks like this will get fixed as soon as the glutin Evlp2 PR is merged."}
{"project_id": "Alacritty", "bug_id": "99", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Opacity setting not applied\n\nDescription:\nWhich operating system does the issue occur on? Linux -- Ubuntu 19.04 dev If on linux, are you using X11 or Wayland? X11 This issue might be more question on how to debug this rather than there is an actual issue. Recently I updated alacritty to the latest master (dbce674d7012fe09b3ab9ac0aeeb1c748bb7afce) and install using `cargo deb --install`. My opacity setting is no longer being applied. I have also recently gotten an external gpu and have been messing with the gpu drivers (switching between nvidia versions and nouveau) so I'm not necessarily convinced this is an issue with the latest Alacritty. When running under sway window manager the opacity works, but under gnome (3.32) on X11 the opacity setting does not. I have tried running alacritty with the `-vvv` option but haven't seen any errors or logs that seem relevant. I'm still learning about how all the pieces work together recently switching over from mac to linux so I'm not sure where to look next for why the opacity is not working.\n\nDiscussion:\nI'm not aware of an isuse with opacity on Linux. The only two things that are commonly issues with this is that people think it's a transparency (not opacity, which is the opposite) setting and that no compositor is running. I'd expect GNOME on X11 to be running a compositor by default, however making sure that compositing is working properly is probably your best bet. There's likely no logging in Alacritty's output because Alacritty doesn't run into any issues. If Alacritty attempts to render a transparent window and there is no issue, but the window manager doesn't render it with transparency, there's little Alacritty can do since it doesn't know anything about that.\n---\nAfter updating alacritty I had similar issues, now transparency doesn't work. I am using xcompmgr as the compositor, and all the settings are the same than before updating alacritty.\n---\nI've verified myself with `compton` and i3 and I can not reproduce this issue. Transparency works as expected. I'm curious if a fully transparent window with `background_opacity: 0` will have a black background or if it will have the background set in the `colors` section?\n---\nI tried with compton just in case, and still transparency doesn't work on alacritty. When opacity is set to 0 it seems that alacritty only displays a black background\n---\nUpdate, I don't have this problem with version 0.2.9\n---\nUpdate2: Seems that the commit which introduced the problem was \"0f96a62\"\n---\nI am also experiencing this issue, after upgrading to 0.3.0. The `background_opacity` setting does change the background, but just the shade (`0.0` is plain black, `1.0` is the set color) `i3` with `compton`, on `0.3.0-rc1` ([latest ebuild](https://gitweb.gentoo.org/repo/gentoo.git/tree/x11-terms/alacritty/alacritty-0.3.0_rc1.ebuild))\n---\n> i3 with compton, on 0.3.0-rc1 (latest ebuild) Now that is interesting, it's pretty much the same system I've just tested it on and things worked great. Could you share some more system information (especially GPU+drivers and kernel version)?\n---\nAlso would be interesting to have this re-tested with latest master since this bumps the Glutin version.\n---\nI use the kernel driver for intel graphics (integrated gpu) I'll try with master and see if things change\n---\nMaster does seem to fix the issue, though I'm not entirely sure (when I run `target/debug/alacritty --version`, it returns `alacritty 0.2.9`). I've seen the ebuild for 0.3.0 which uses sed to replace version number, so I'm guessing someone just forgot to bumb the version number somewhere ? Or am I going the wrong way about this ?\n---\nThe version number usually stays the same until the next release is made, so that's intentional. I would have expected you to run maybe Nvidia since that's the most likely to show difficulties, but I guess you're running mesa too then. Note that I'm running amdgpu with mesa on Archlinux and everything's working for me. I'd be interested in getting some more hardware information from everyone who can reproduce this issue, including kernel version, gpu driver, glxinfo output and compositor/WM. Maybe that can give us some hints. Since this was apparently caused by an upstream change, I've also reported the issue upstream here: https://github.com/tomaka/winit/issues/832 If anyone here is willing to bisect winit to check where this issue might be coming from, that would be very helpful. It might be a bit laborious but would hopefully give us a pretty good idea of what caused this. If someone is interested and needs help, please let me know. If someone found the bad commit, please report it to the upstream issue.\n---\n[Here](http://dpaste.com/1AQT5BA.txt) is my glxinfo output\n---\nSame for me, with master it seems to work fine. I'm using Gentoo, Linux 5.0.5, nvidia, xcompmgr and dwm. Here is my glxinfo http://dpaste.com/1EVK7XQ\n---\nOh I totally misunderstood @FliiFe and thought he said master does **not** fix the issue, oops. Looks like the issue is resolved then.\n---\nStill cannot apply opacity since alacritty 0.3.0 OS: Arch Linux WM: kwin5 GPU driver: xf86-video-radeon Tried both glutin 0.21.0-rc1 and 0.21.0-rc2 (changing `PossiblyCurrentContext` to `PossiblyCurrent`)\n---\nMy glxinfo is pasted here: https://fars.ee/5J07\n---\nI've reopened the upstream issue: https://github.com/tomaka/winit/issues/832\n---\nThe same problem is also reproduced on my another PC with Intel integrated GPU. OS: Arch Linux WM & Compositor: kwin5 Mesa: 19.0.1-2 GPU driver: modesetting DDX with i965 kernel driver glxinfo: https://fars.ee/YoO6 On this Intel machine, I did a git bisect on the commit history of alacritty. the last good commit (that can show transparency) is cd8d537bed98559ed49c1465db84ecec5393119f and the first bad commit (that shows total opacity) is 6757acbb824e8be9968529a66e9a75a0a2ea2f5d ."}
{"project_id": "Alacritty", "bug_id": "100", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: crash on suspend-resume cycle with 0.2.3\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 Crash after suspending and resuming my laptop, this is 100% reproducible. Setting RUST_BACKTRACE=1 does not produce anything meaningful, I would probably need debugging symbols in my system C libraries.\n\nDiscussion:\nCan you check if this is reproducible with the winit example? It's available here: https://github.com/tomaka/winit. You should be able to test it by running the following command: `git clone https://github.com/tomaka/winit && cd winit && cargo run --example window` If this can be reproduced with just the winit example, this should probably be reported upstream in the winit issue tracker. Feel free to open an issue yourself if you can reproduce it, otherwise I'll create one.\n---\nThe same thing happens with the winit example, this is at least somewhat recently added. I know I have been able to suspend/resume with alacritty running before.\n---\nI filed a but upstream at winit: https://github.com/tomaka/winit/issues/705\n---\nhttps://github.com/rust-windowing/winit/pull/1158 was merged, which should in turn fix this alacritty crash.\n---\nThis will be fixed with https://github.com/jwilm/alacritty/pull/2438.\n---\nThis still happens on my machine\n---\nThis also happens on my machine every morning, alacritty just hangs, but can see a cursor on the top left, but thats it. When the pc suspends for just an hours, alacritty usually just takes a few minutes to redraw."}
{"project_id": "Alacritty", "bug_id": "101", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: File URLs not working with leading `/`\n\nDescription:\nCurrently file paths do not work properly, since our URL parser allows only either zero or two slashes in the scheme. So a scheme like `file:/` or `file:///` is not allowed, however these are required for absolute paths (like `file:/root` or `file:///root`). So we need to special case the logic for the `file` scheme and allow 0, 1, 2 and three slashes as scheme separators. We might potentially just want to throw out this check completely for paths.\n\nDiscussion:\nI think I'd be in favor of just removing the path check altogether. I'd think if we find one of our schemes (e.g. `https`, `file`, `mailto`, etc) in the form ` :` I'd expect to be reading the path next. Some schemes seem to have restrictions on what that path can be, or must be. For example `https:` must be followed by `//`, however IDK if we want to go to this level of validation.\n---\n> For example https: must be followed by // I'm not sure that's true? But since `/` are legal characters inside of URLs, I don't think I'm entirely against using only `:` for separation. Thinking about it, there shouldn't be any problems with over-reporting URLs because of this, because the most likely case would be `:` separator without any `/`, which is already legal. So the only thing that is not legal is `:/` or `:///` (or more slashes). I personally can't think of any case where people would be upset when excessive slashes are recognized as URLs.\n---\n> I'm not sure that's true? Yea it's not. :sweat: And technically the first slash isn't part of the path either. But the details of this here aren't as important for our application since we aren't trying to parse out each component of the URL to spec. We simply want to recognize a URL when we see one."}
{"project_id": "Alacritty", "bug_id": "102", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Shift-Delete in vim's command mode isn't working as expected\n\nDescription:\nWhen I enter command mode `:` in vim, and type something, then start deleting with shift pressed, it simply moves the cursor instead of deleting the characters. I've tested this with both `alacritty` and `xterm-256color` as my `$TERM`. I'm curious why it works in insert mode, or generally everywhere else, just not in command mode. Other terminals don't seem to have this behavior.\n\nDiscussion:\nI can't reproduce this in neovim, so I'd assume it's vim specific. Do you get any different output when pressing shift+del in Alacritty vs a different terminal, when pressing ctrl+v to print the raw key escape?\n---\nFWIW I can repro in neovim."}
{"project_id": "Alacritty", "bug_id": "103", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: OSC52 and tmux set-clipboard does not work\n\nDescription:\nWhich operating system does the issue occur on? Arch Linux If on linux, are you using X11 or Wayland? X11 tmux sends OSC 52 to Alacritty without the c parameter, i.e. the first parameter here %p1%s is blank. This is the equivalent of running: (if you hit Ctrl+Shift+V afterwards, your clipboard should not change) However this works with the %p1%s parameter set to 'c'. (if you hit Ctrl+Shift+V afterwards, your clipboard should have 'blabla' in it) Alacritty doesn't accept an empty parameter which is supposedly allowed in the spec. If we could add support for this, that would be awesome! For tmux users, the workaround is to override the terminfo for alacritty:\n\nDiscussion:\nAnyway the code in tmux that spits out the escape sequence is doing something like Xterm apparently defaults to 's0' if this field is empty, St just sets both the clipboard and selection buffers. Haven't investigated other terminals. The relevant code in Alacritty is in alacritty_terminal/src/ansi.rs: Relevant code in xterm: Relevant code in st (just straight up ignores the first parameter):\n---\n@yiyangc91 Did this work in a previous release? I feel like I might have broken that in a recent refactoring, I probably missed the `zero or more` in the spec, but you're completely right. We can probably just default to `c`, or the primary clipboard. I think that makes the most sense.\n---\nFixed in https://github.com/jwilm/alacritty/pull/3038.\n---\n@chrisduerr I didn't actually test this with a previous release - I just started using alacritty a day ago haha. Thanks for the super fast response though! That's so awesome.\n---\nPS: It looks like the terminfo entry that comes with the Homebrew installation of Alacritty does not include an `Ms` entry; is this intentional?\n---\nMy apologies: I was still using a previous version. Will update (which should fix it)."}
{"project_id": "Alacritty", "bug_id": "104", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Window close \"X\" button freezes alacritty\n\nDescription:\nWhich operating system does the issue occur on? Windows 10 (insiders build 19033) On my system, attempting to close Alacritty with the X button in the title bar causes it to crash. The whole application freezes. The CPU usage is 0% so I assume some kind of deadlock. It's been a problem for a few months; not sure when it got introduced. I'd wondered about looking into it myself, but don't have the time right now. I might take a look in the New Year if it's still an issue then. I'm running powershell as my shell. ConPTY backend. (I'd been waiting for the glutin event loop update to land in case that fixed it. Then saw some similar work for WinPTY which I wondered if would fix it - doesn't seem to have helped.) See example in this GIF (goes to not responding right at the end): [![Image from Gyazo](https://i.gyazo.com/facca0b47b773434d52e3c70c547b091.gif)](https://gyazo.com/facca0b47b773434d52e3c70c547b091)\n\nDiscussion:\n> It's been a problem for a few months; not sure when it got introduced. Have you been running off master, or can you confirm that this was already an issue in v0.3.3?\n---\nWorks fine in the \"portable\" 0.3.3. (I just downloaded to verify). The issue is in my local compiled version. I've been running off master for some time.\n---\nIt would be very useful to try out how the winit example behaves, just to make sure this is not an issue with winit in general. But I think it should be easy to troubleshoot this just by checking where it hangs, however I don't think I've heard any similar reports, which is a bit surprising to me.\n---\nThe \"X\" works correctly for the `window` example on `winit/master`. Worth mentioning that Alacritty also closes correctly if I quit the shell with an `exit` command instead of via the GUI. I wonder if it's related to #2695 ?\n---\n@davidhewitt Could you try something like `sleep 10 && exit`? And then don't touch anything until it exits.\n---\nI've just tried with the powershell command `sleep 5; exit`. * If I don't touch _anything_, then Alacritty never closes. * If I wait 10 seconds and then touch the mouse or keyboard, Alacritty instantly closes when I touch the the input device. * If I wiggle my mouse the whole time, Alacritty closes after 5 seconds. So this is an interesting one too - seems like Alacritty is waiting for one final tick of the window event loop in order to close ðŸ˜„\n---\nThat's what #2695 is about, but you're saying that this is not true for this issue, right? No matter if you click or press any keys, the window doesn't close?\n---\nIndeed. The window just hangs after I click the \"X\". Clicking on the window a few times eventually leads to the windows crash prompt: ![image](https://user-images.githubusercontent.com/1939362/69761884-99051080-1160-11ea-8f08-3267a6817b19.png)\n---\nThen I'd assume that the issues are completely unrelated and your assumption of a deadlock somewhere is not unlikely. We don't have many places where something like this could occur, since we basically just run two different threads, so I'd assume this wouldn't be too hard to troubleshoot with access to a Windows machine.\n---\nI got similar issue after upgrade from 0.3.3 to version 0.4. windows 10 1909: I use the below line as icon start target. It works fine. But when the close button in window is clicked, the window will be freeze.\n---\nI managed to find some time to play with this on a flight. It is indeed a deadlock, in Microsoft's `ClosePseudoConsole` API. I suspect it's an unfortunate misuse of the API by Alacritty; in the deadlocking case the in/out pipes are dropped long before `ClosePseudoConsole` is called. I suspect that some change since `0.3.3` caused the drop order to change. I've got a WIP workaround; I'll push it in the next week or so once I've had time to finish it off and have an internet connection. Edit: managed to finish it off on the airport free wifi ðŸ˜„"}
{"project_id": "Alacritty", "bug_id": "105", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Index out of bounds (scroll-back)\n\nDescription:\nHey :wave:, I noted today when running `jest` (_a JavaScript test runner_) that `alacritty` crashed consistently. This is only happening when running it `jest` with the `--watch` option and scrolling. Reproduce the following way: - Run `jest --watch` in a project with a couple of failing tests. - Scroll up to, lets say, the first failing test. - Modify and save a watched file, triggering a rerun of `jest` and resulting in `alacritty` crashing (output available below with `RUST_BACKTRACE=full`). ### System OS: Arch Linux Version: `alacritty 0.4.0` output Linux/BSD: X11, i3wm only ### Logs Crashes: Font/Terminal size: :pray:\n\nDiscussion:\nCould you compile `alacritty` with debug symbols? `alacritty` compiling with them by default (I guess your distro stripped them), so just cloning repo and running `RUST_BACKTRACE=full cargo run --release` + your program should be enough. Also please share your config.\n---\n@kchibisov You can find my config at: https://github.com/sQVe/dotfiles/blob/59d2ec83c4679eb6a9d16173a79da188cfa35b9e/config/alacritty/alacritty.yml I'll try to get back to you with the rest ASAP.\n---\n@sQVe Could you try changing `tabspaces: 2` to `tabspaces: 8`? I'm just asking, since you shouldn't touch this setting, unless you know what you're doing.\n---\n@kchibisov Made no difference.\n---\n@kchibisov I hope this is what you wanted :confused: :smile:\n---\nOh, thx, so it's crashing on assertion now.\n---\n@sQVe Could you test v0.3.3? just `git checkout v0.3.3`.\n---\n@kchibisov I'll try it as soon as I get to work tomorrow!\n---\n@kchibisov Working fine in `alacritty 0.3.3`.\n---\nCould you test this commit 182a9d5c2e01ec9b155fc7edf547e8e6de2f2bd5 and the one before it?\n---\n@kchibisov Getting this output when trying:\n---\n@sQVe try running `cargo update -p glutin`, it should compile just fine after it."}
{"project_id": "Alacritty", "bug_id": "106", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Terminal print `6c6c6c` into the prompt after executing `cat`\n\nDescription:\n# System | | | |------------------|-------------------------------| | Operating System | Linux 4.19.81-1-MANJARO | | Rust Version | 1.38.0 | | Display Server | X11 | | Window Manager | i3 | | Compositor | compton | # Summary Alacritty v0.3.3 print `6c6c6c6c6c` characters into the prompt after executing `cat` or similar program. This happen everytime on a few files. Number of `6c` printed depends on the amount of file's content printed (more content = more `6c`). Seems like alacritty issue, because: - both ZSH and BASH print this characters in alacritty - terminator and gnome-terminal works fine (no `6c6c6c` characters) # Behavior ( `|` stands for cursor position) # Expectation ( `|` stands for cursor position) # Extra An example of a file having this issue: [sample.zip](https://github.com/jwilm/alacritty/files/3848102/sample.zip)\n\nDiscussion:\nThere are a lot of special characters in that file and it's not unlikely that one of these causes issues. URxvt also shows similar behavior, however I cannot say why XTerm and VTE do not. It probably makes sense to investigate a minimal repro case, but generally I don't think it should be a problem. However if there's some reasonable workaround we might as well make use of it.\n---\n\\033[6c is alacritty's DA response so almost certainly the file contains some sequences of \\033[c. alacritty differs from xterm in that in xterm DA is only responded to if it matches exactly \\033[c - parameters aren't allowed, try for example: ~~~~ printf '\\033[999c' ~~~~ This class of problems is not very fixable, you can't cat binary data to the terminal and have no risk of something unexpected happening.\n---\nThank you for responses. You are right, when I try `printf '\\033[999c'` it prints `6c`. I don't really understand, why alacritty differ from other terminals in this matching. Why does it expect parameters?\n---\n@Matmaus it doesn't expect them, it just doesn't ignore the sequence if they are present - but it doesn't really matter if it does or not. Don't cat binary files to the terminal. If you must, use cat -v.\n---\nOk, in the case, this is not considered as a bug, I'll close the issue. But still, `cat -v ` is not a right solution for me. For example: **alacritty**: ![2019-11-15-143024_952x140_scrot](https://user-images.githubusercontent.com/31512884/68946897-5c2a3880-07b4-11ea-906d-2c17b6639c5b.png) VS **terminator**: ![2019-11-15-143105_953x128_scrot](https://user-images.githubusercontent.com/31512884/68946928-7106cc00-07b4-11ea-9e74-522a31396b36.png) `cat` without `-v` is much more pretty and readable in my opinion. The only solution is (for this issue) to use another terminal.\n---\n@Matmaus We'll implement a fix for it to follow other terminals, so, please, reopen your bug. @nicm Thanks for your investigation into this issue. P.s. @Matmaus , since you're trying to preview pdf's in terminal, just try a cli pdf reader, I guess.\n---\nWell, then I'll reopen the issue. Thank you guys @chrisduerr @nicm @kchibisov . I like alacritty, it's pretty fast. @kchibisov I don't use `cat` just for PDFs and don't mean to use it as a \"document\" reader. Rather I use `cat` to see quickly a raw content of a file, regardless its type (may be unknown). This issue is related to more file types, not just a PDF. Also, PDFs could have a much printable text mixed with binary parts.\n---\n@Matmaus - the point we are trying to make is that you will see funny stuff if you cat binary data to any terminal. Try something like `printf '\\033]2;'` in xterm or terminus - the terminal will hang. Your binary data could contain that. If you want to view binary data safely, load it into an editor, or use cat -v, or strings(1), or hexdump/od. Or just live with occasional terminal strangeness :-).\n---\n@nicm Thank you for explaining. I have tried it and nothing happened, but I know what do you mean. So thanks, good to know."}
{"project_id": "Alacritty", "bug_id": "107", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Padding does not take effect until I start typing\n\nDescription:\nWhich operating system does the issue occur on? macOS 10.14.4 I have Alacritty's window padding settings set to the default of: When I open a new Alacritty window, there is 0 padding, but when I begin to type the padding setting goes into effect and is set to `10px`. I've tried removing my config file and uninstalling and reinstalling Alacritty, but it still does this even with a fresh install.\n\nDiscussion:\nDoes the prompt spawn in a window without any padding? What happens when you set the padding to something huge like `100`? Does moving the mouse or starting a selection cause the padding to pop up?\n---\n@chrisduerr Correct, the window initially has no padding at all. When I set the padding to `100`, the window is larger, but the padding is still `0`. Moving the mouse doesn't do anything, but clicking on the window does cause the padding to appear,\n---\nI've just tested this on my macbook and I'm not able to reproduce it at all. Are you using the default window manager or a third party one? Also which Alacritty version are you using?\n---\nYes, I am using the default window manager.\n---\nI also noticed that clicking _anywhere_ will cause the padding setting to take effect. If I click outside of Alacritty, onto the desktop, into another program window, it will cause it to start working.\n---\n0.3.0 upgrade fixed this for me. Thank you!\n---\nActually, I was wrong: the only difference is that now moving the cursor over the Alacritty window does cause padding to take affect.\n---\nI made a video about this problem, but it only appears when I type Chinese characters. Link is [Here](https://youtu.be/bsOJ84x2wn8) system: **macOS** alacritty version: 0.3.0 padding: 2\n---\n@INCHMAN1900 Same problem.\n---\nThat looks different from my issue. Mine starts with 0 padding and then registers the padding after I type anything. Yours starts with padding and then removes it after typing Chinese characters.\n---\nAnother strange thing about this: if I comment out the `padding` setting entirely, the window opens, and when I move my cursor over it I can still see the text adjust by only a pixel or so, even though there is no padding set. However, if I set the `padding` to `0` each, it does not do this; the text stays in place 100%.\n---\n@andrewbanchich The default padding of the latest release is `3x3`. This has been changed on master though, but that's likely what you're experiencing.\n---\nSo I just wiped by entire MacBook's hard drive and reinstalled macOS. The first thing I did was install Homebrew, then `brew cask install alacritty`, then changed `padding` in the config file to `x: 20` and `y: 20`. This still happens.\n---\nI'd be very curious if the #2438 PR fixes this, however it's not possible to test this since there's still some upstream fixes missing. Once that's done, it's probably worth re-testing. I'll also try to reproduce this on my laptop at work again, but iirc last time I tried I was not successful. @andrewbanchich Which apple device are you running specifically? Not that it should matter much, but it might be insightful.\n---\nThanks! I'm really curious what is causing this. I tried outputting logs in debug mode and the ones that appear when the padding appears are `glutin`, but I don't see anything that looks out-of-place. I'm on macOS Mojave 10.14.5 MacBook Pro (15-inch, 2018) Processor: 2.2 GHz Intel Core i7 Memory: 16 GB 2400 MHz DDR4 Graphics: Intel UHD Graphics 630 1536 MB\n---\nJust fyi, I've tested this again at work and still was not able to reproduce it. Though I'm running the macOS tiling window manager chunkwm. If anyone else is capable of reproducing this, I'd be very curious.\n---\nI've tested on friends laptop with macOs 10.14.5 (13-inch, 2018) + touch bar and I was able to reproduce this issue with plain `bashrc`. But the one thing I've noticed, that it doesn't \"bad\" every time. For e.g. when launching `alacritty -e htop` every thing is fine and when launching `alacritty -e bash` also fine, but starting from dock/spotlight (so in this case `alacritty` invokes default shell(bash) with `--login`) results in the following issue.\n---\nAnd from my own tests, it happens in bash, zsh, and fish."}
{"project_id": "Alacritty", "bug_id": "108", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty crashes after MacOS Catalina update\n\nDescription:\nThe issue occurs on MacOS Catalina. This is the error it throws after I try to run it from the commandline with `-vvv`.\n\nDiscussion:\nDoes it happen in debug mode? Also would you mind to `cargo build --release` and then launch `lldb target/release/alacritty` and posting instruction where it fails and a backtrance.\n---\n~~Just to clarify, this probably happened with the packaged Alacritty release, right? I think compiling from source might just fix this.~~\n---\n@chrisduerr it's not, you can see the command `cargo run --release` in the provided output.\n---\nOh, guess I need some new glasses, please disregard. Thanks @kchibisov.\n---\nThere are some previous issues with similar problems on the latest nightly compiler. So changing from nightly to stable (or the other way around) might help.\n---\n@chrisduerr I tried the latest nightly, didn't help. I also tried in debug, didn't change anything. @kchibisov I tried running with lldb and this is the output:\n---\nThis is odd. Is your bug similar to #2905 (startup options, etc)? Also would you mind to test `v0.3.3`?\n---\nI'm currently running `alacritty 0.3.3 (3475e44)`.\n---\n@voider1 so, its working, right? So I assume this commit broke it for you 729eef0c933831bccfeac6a355bdb410787fbe5f.\n---\nAlso, I still need a backtrace output from `lldb`, to get one you should type `bt all` on crash.\n---\nHere's the output:\n---\n@voider1 Could you repro with default config? Just run `alacritty --config-file /dev/null`? If you can't repro with it would you mind sharing your config `window` section?\n---\n~Also could you test #2910?~ Just retest latest master, since PR Iâ€™ve mentioned was merged.\n---\nI retested with the latest master, using `--config-file /dev/null` and that does the trick. Weird thing is, on my other Mac (running the same version) my config works."}
{"project_id": "Alacritty", "bug_id": "109", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Wrap line if double-width character is in last column\n\nDescription:\nAlacritty already correctly wraps lines when the max number of text in a row is reached, however with double-width characters things change a little bit. If a double-width character is printed in the last cell, a line break needs to be inserted before it. This is because there's only one cell left but the cell is two cells wide, leading to everything going beyond the first cell getting cut off. When testing, special care should be taken not to break selection and text reflow. Both these features make the assumption that the last cell will be filled when a row is 'full'.\n\nDiscussion:\nIt seems like printing zero-width characters at the end of the line after all columns are occupied is also buggy, since it breaks the line even though it should not."}
{"project_id": "Alacritty", "bug_id": "110", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Duplicated lines on window maximisation\n\nDescription:\nFedora 31 with Sway git (352a3e1f) and alacritty HEAD as of today (24651a6). Switching window between FS and windowed several times gives a duplicated line each time, with the result: ![screen2](https://user-images.githubusercontent.com/12971/66564114-23fd5d80-eb57-11e9-9c1d-c69ac02f902f.png) For reference my PS1 is Possibly duplicate of #1668 but this is a different platform and shell so posted a new bug. Thanks!\n\nDiscussion:\nDo you get the same behavior when reducing window size below the width of your prompt and then increasing it again? This looks like the issue you get when resizing the prompt, which Alacritty cannot resolve (this is present in all terminal emulators supporting reflow).\n---\nI guess it's similar behaviour, although wasn't aware that behaviour (which I've noticed in general use) was a shell issue. However in this case the terminal remains wider than the prompt, so I'm not sure if it is the same problem or not. I'm only ever toggling between a single window on a 1080p (techically 4K@2x) screen as above and fullscreen.\n---\nCould you share the output of `alacritty -v`? That will log the window sizes and should tell us if it randomly resizes to dimensions which are too small.\n---\nDoesn't seem to be...\n---\nHave you tested other shells? Which shell are you using?\n---\nbash 5.0.7, I hadn't tried with other shells but interestingly does not happen with zsh.\n---\nCan you repro in another terminal emulator, just as sanity check? And if you have more lines than just the terminal visible, are those affected too? Usually with stuff getting duplicated it's because the terminal is redrawing itself (only the active prompt), so only that line should get duplicated.\n---\nDoes not occur in kitty (from source) or in rxvt-unicode (from Fedora repo). It is just the active prompt that is duplicated, with other content reflowed correctly.\n---\n@tokyovigilante Are you running the default Alacritty configuration? If not, could you give that a shot? Also just to make sure, do you have the Alacritty terminfo installed and in use? Another thing worth a shot would be to set the history size to `0` and see if the issue is that lines are pulled from the history. And testing out bash's default `PS1` instead of your own would rule that out.\n---\nTurns out my `PS1` is the culprit it seems, doesn't occur with the bash default. Guess I can have a play with cutting that down and figuring out why it's causing issues. I am indeed using the Alacritty terminfo.\n---\n@tokyovigilante we've discussed your issue on IRC and I've bisect a commit, when we introduced this problem c4d2725e14ca9488b1b086024bf827c66945ae7b. However you can add `\\e[0m` to your prompt's end or before the last `space` char.\n---\n@kchibisov nice, thanks! That does indeed solve the issue, however does mean that my terminal input is not in bold as I prefer. Is there any way to preserve that?\n---\nShould probably pick a bolder font. Your prompt's escapes shouldn't leak into the input.\n---\n@chrisduerr Fair point, but a lot of the utilities I use use bold for differentiation so I prefer to have the default in a regular font (using Source Code Pro for reference). Should I expect this to work with something like `trap 'tput sgr0' DEBUG`?\n---\nYou can have a semibold font and then still have the separation between bold and semibold text. I'm running Fira Mono Medium myself. Using the prompt to color or style text is bound to mess with things. But that's completely your choice, the issue might be related to that, but that's not the root cause of it. So it will be fixed in the future should you choose to stick with it.\n---\nGreat, thanks. I'll keep an eye on this in the meantime.\n---\nMinimal repro in bash: - `export PS1=\"\\e[31;1mTEST > \"` - shrink and grow terminal"}
{"project_id": "Alacritty", "bug_id": "111", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Underline and Strikethrough Bleed Into Current Line on Backspace\n\nDescription:\nWhen I run `printf \"\\e[4;9mTEST asd\\n\"` once to get our next prompt stuck with terminal attributes of underline and strikethough, then type at least 2 characters, finally using the arrow keys (or ctrl-a ) and delete any but the last character of the text you entered, and notice that the styles bleed onto the right of the terminal. A gif's worth a million words (even if it's of horrid quality): ![QlrVhaj](https://user-images.githubusercontent.com/715947/56397609-99284f80-6212-11e9-8f39-f02079336406.gif)\n\nDiscussion:\nI also have this problem. I am also experiencing a (related?) rendering problem, where the Underline of the font is sometimes a few pixels and cuts through the chars. Running Arch with the Awesome-Fonts. This issue was not present yesterday, and I don't believe I changed any config files."}
{"project_id": "Alacritty", "bug_id": "112", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: On `wsl.exe --shutdown`, Alacritty doesn't close the window until an event is fired\n\nDescription:\nUnlike #915 and the handful of duplicates that have followed it, this is on *Windows*. Iâ€™m currently running Alacritty 28cf90d1308ecd14d9a5646909f7637ddbf105ff (HEAD~3). Windows Insider Preview, and Alacritty is running `wsl.exe -d arch -u me`, where arch is a WSL 2 machine. When I run `wsl.exe --shutdown` (â€œImmediately terminates all running distributions and the WSL 2 lightweight utility virtual machine.â€), the program that Alacritty was running is killed off, but the Alacritty window remains around until I press a key, move the mouse or something similar. This is not applying to normal exits; this WSL shutdown is the primary way of triggering it that Iâ€™ve found, though I *think* Iâ€™ve triggered it in other ways before as well.\n\nDiscussion:\nCan you reproduce this with something like `sleep 10; exit`?\n---\nYes.\n---\nInteresting, so that would indicate that it's a problem with quitting in general. On Windows the PTY handling is significantly different, so that means our Signal handling might not be accurate, but if I understand you correctly you're using WSL 2, right? IIRC, WSL 2 is just Linux VMs, which would mean that you installed our Linux version and create a Linux PTY? So if you start up with `alacritty -v` there will be no mention of ConPTY or WinPTY, correct? Maybe there's a problem with signal handling through WSL 2 then?\n---\nThis is all Windows Alacritty, not Linux Alacritty. (I am running no X server or similar, and donâ€™t intend to.) With alacritty running `cmd.exe` instead of `wsl.exe -d arch -u me`, `sleep 1 && exit` behaves just as it did in WSL, not closing the window until the next input event (meanwhile, `sleep 0 && exit` does close the window immediately, in both cmd and wsl). I therefore conclude that WSL is not a contributing factor. This has all been using ConPTY. When I switch to WinPTY, quitting the shell *at all* makes Alacritty hang, with infinite `[YYYY-MM-DD HH:MM] [INFO] wait_object_0` log lines when run with `-v`. Judging by the thread stacks and the cycle counts for the two key threads (main one and event loop proxy), I suspect that something in the event loop handler is posting a new message to the event loop, so that it ends up with some kind of busy waiting deadlock. I believe that to be a completely different bug, and one thatâ€™s probably a deal more severe, because you canâ€™t even force close the window once itâ€™s in this state, due to where in the event loop itâ€™s hungâ€”got to kill the process manually. Workaround to avoid this bug: never quit the shell, instead use the window close button. Iâ€™m on Windows 10 build 19002 (the current Windows Insider Preview build at the time of writing). I donâ€™t believe this window closing bug is related to that (I only switched over to WIP this week, and Iâ€™ve definitely experienced the bug before), though I believe the other bug with WinPTY only affects WIP.\n---\n> I therefore conclude that WSL is not a contributing factor. That's great to know, thanks. > Alacritty hang, with infinite [YYYY-MM-DD HH:MM] [INFO] wait_object_0 log lines when run with -v. Judging by the thread stacks and the cycle counts for the two key threads (main one and event loop proxy), I suspect that something in the event loop handler is posting a new message to the event loop, so that it ends up with some kind of busy waiting deadlock `wait_object_0` is not related to any cross-platform Alacritty code. I suspect this is Windows PTY related. As such, it is completely unrelated to the event loop (proxy). > I believe that to be a completely different bug, and one thatâ€™s probably a deal more severe, because you canâ€™t even force close the window once itâ€™s in this state That's quite interesting though, since it would be a regression. I wonder if that's due to the Windows version you're running or because of an Alacritty change.\n---\n@chris-morgan I can't repro your issue(wsl + `sleep 10; exit`), would you mind to try `v0.3.3` (or bisecting)? I've tried both WinPTY and ConPTY\n---\nHi, not the OP but I did manage to reproduce it on `v0.3.3`. The trick is not to have the alacritty in fullscreen and keep the mouse pointer away from the window. The window sticks around for as long as the mouse doesn't move ![alacritty-sticking-cropped](https://user-images.githubusercontent.com/377311/67336939-17e1aa80-f51e-11e9-81f6-0a8530eade17.gif)\n---\nMight be something connected to log file handling. Doesn't reproduce for me with `persistent-logging` enabled or when running with increased verbosity.\n---\nThat might also cause some racing condition to not happen though, so I would be a bit careful following down this path. Very interesting observation though, wondering if the issue on latest master can also be resolved with these changes?\n---\n@chrisduerr: Just tested the same thing on 9e0b9d5de1b8fe2d9d8ed80f73b4ad0fda171f22 debug build with both - `nightly-x86_64-pc-windows-msvc unchanged - rustc 1.40.0-nightly (7979016af 2019-10-20)` - `stable-x86_64-pc-windows-msvc unchanged - rustc 1.38.0 (625451e37 2019-09-23)` App seems to be going into a live-lock where it consumes just below 2 CPU cores and never exits also stops reacting to Windows events and redrawing. Persistent logging or increasing verbosity have no effect on that. I guess that's a separate issue.\n---\nOk, I reproduced the problem on `v0.3.3` tag (cc3e4d3d5cb2f658d6faef02e4216b9342451efc) with profiler attached. Here's the hot path where alacritty seems to be spending most of it's time while it's window is sticking around ![image](https://user-images.githubusercontent.com/377311/67434300-d0245700-f5e1-11e9-8b2f-61a0de05204c.png)\n---\nAnd it's similar on master (9e0b9d5) but with 50% of time stuck in the above unwinding and the other 50% of the time in this stack ![image](https://user-images.githubusercontent.com/377311/67435698-99037500-f5e4-11e9-84d4-069ed72bd0ae.png)\n---\nAfter debugging with different config settings this seems to be 2 issues on top of each other: 1. When shell exits on its own or crashes, Alacritty window does not close itself until next Windows event is received. It's also [busy-looping here](https://github.com/jwilm/alacritty/blob/master/alacritty_terminal/src/event_loop.rs#L315) in `pty reader` thread. This happens with both ConPTY and WinPTY. 2. With WinPTY only, in the same scenario, main thread is busy looping in [`winit main loop`](https://github.com/rust-windowing/winit/blob/master/src/platform_impl/windows/event_loop.rs#L249). There `winuser::PeekMessageW` doesn't block and returns the same event on every iteration. No new events seem to be received by the Window and it has to be terminated from task manager. This only happens on the current master but I could reproduce it on `v0.3.3` tag.\n---\nSecond issue was introduced in 729eef0c933831bccfeac6a355bdb410787fbe5f\n---\n@chrisduerr: Ok, I think I found the reason for the livelock. It seems to be a mix of how now there's separate IO loop and UI loop and how the winit EventLoop 2.0 seems to be working on Windows. So, when internal process exits, the IO thread keeps spamming window with `User::Wakeup` messages from [`pty_read`](https://github.com/jwilm/alacritty/blob/master/alacritty_terminal/src/event_loop.rs#L254) since it's part of [`event_loop`](https://github.com/jwilm/alacritty/blob/master/alacritty_terminal/src/event_loop.rs#L354). This seems to be a lot faster then the [main `winint` loop](https://github.com/rust-windowing/winit/blob/master/src/platform_impl/windows/event_loop.rs#L241), at least with WinPTY. The current implementation of the loop doesn't exit unless the windows events queue is empty indicated by call to [`winuser::PeekMessageW`](https://github.com/rust-windowing/winit/blob/master/src/platform_impl/windows/event_loop.rs#L249) returning 0, but it never is, because of `User::Wakeup` events stacking up there. This seem like a bug in `winint` itself, because it seems that setting [`*control_flow = ControlFlow::Exit`](https://github.com/jwilm/alacritty/blob/master/alacritty/src/event.rs#L354) in handler is not enough to terminate the loop on Windows, there's an assumption that all the events will be handled as well. Ive throttled `User::Wakeup` sending with `thread::sleep(time::Duration::from_millis(1))` and it seems to have resolved the issue. The right solution would be to either fix the `winit` handling of `ControlFlow::Exit` on Windows or get Alacritty to stop the `event_loop` when it sets `ControlFlow::Exit`.\n---\n> The current implementation of the loop doesn't exit unless the windows events queue is empty Do you mean on winit's side or on our event loop processing side? Because we definitely quit our loop even if it is not empty. > This seem like a bug in winint itself, because it seems that setting *control_flow = ControlFlow::Exit in handler is not enough to terminate the loop on Windows, there's an assumption that all the events will be handled as well. Thas makes it sound like you mean that regardless of us setting the control flow to `Exit`, a new iteration of our event loop is triggered? Do I understand that correctly? That would definitely be a winit bug. We need to verify that we actually do set `Exit` though.\n---\nI think the main problem is on `winit` side. Alacritty seems to be setting `ControlFlow::Exit` correctly but this doesn't ever get checked by winit because of long queue of `User::Wakeup` events that Alacritty is sending from `pty reader` thread. Currently, the only issue on Alacritty side is, it expects glutin/winit loop to exit before terminating `pty reader` loop. But the latter keeps spamming event loop with events that prevent winit main loop from terminating. I'll see if I can make a small winit only app that reproduces the bug and report it with them.\n---\nIt also might be related to the [caveats](https://docs.rs/winit/0.20.0-alpha4/winit/platform/desktop/trait.EventLoopExtDesktop.html#caveats) or `run_return` method that you're using.\n---\nYeah the lacking winit API certainly doesn't help with this. But maybe we can work around it by changing our behavior too.\n---\nDefinitely the issue on `winit` side, isolated it here https://github.com/cfiet/winit-windows-events-bug/blob/master/src/main.rs"}
{"project_id": "Alacritty", "bug_id": "113", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Alacritty doesn't display emoji\n\nDescription:\nI know, I know. Anyway, iTerm 2 and Terminal.app are both able to display emoji: ![example](https://i.imgur.com/bpSPscs.png) but alacritty isn't: ![example](https://i.imgur.com/TOLO7IX.png)\n\nDiscussion:\nGood to have a tracking issue for it :)\n---\nIt would be nice to be able to define a specific font for these (emoji one, for example, as not all fonts have all emojis defined), maybe even an utf8 code point range? This could also be used for something like https://github.com/ryanoasis/powerline-extra-symbols without the need to patch existing fonts.\n---\n@topaxi, in case fontconfig is configured correctly, and alacritty supports fallback fonts (https://github.com/jwilm/alacritty/issues/45), there is no need for that kind of custom functionality.\n---\n@ton, nice!\n---\nAlacritty doesn't display the icons in powerline fonts: https://github.com/powerline/fonts/tree/master/Inconsolata I presume that bug should go here. Let me know if I should file another one.\n---\nOn Arch Linux with Infinality and `ttf-noto-fonts-emoji-ib` I see an illegibly tiny dot-type-thing in place of emoji. ![2017-01-08-165400_944x1036_scrot](https://cloud.githubusercontent.com/assets/799439/21754299/12b989c4-d5c3-11e6-9982-ecba4ccdad8a.png) termite (`vte3-ng`-based) for comparison (note that while these emojis print correctly, they only use one rendering \"space\" because of how VTE works sans-patches. The patches make life more miserable anyway) ![2017-01-08-165213_944x1036_scrot](https://cloud.githubusercontent.com/assets/799439/21754293/f796747c-d5c2-11e6-9f42-e9140a622ff4.png)\n---\nYou might have some monochrome emoji on FreeType systems now\n---\nGlad to have monochrome emojis for now: ![Image](http://i.imgur.com/TcamFhu.png) For color Linux support it looks like you'd have to have support for _SVG in Open Type_ fonts, such as https://github.com/eosrei/emojione-color-font\n---\nSVGinOT is not the only option, it's complicated in Linux ðŸ™‚ For example, [eosrei/emojione-color-font](https://github.com/eosrei/emojione-color-font) that you mentioned is a custom build of EmojiOne to add support for Firefox via SVGinOT technology, but the official [Ranks/emojione](https://github.com/Ranks/emojione/tree/master/extras/fonts) has [emojione-android.ttf](https://github.com/Ranks/emojione/blob/master/extras/fonts/emojione-android.ttf) which provides color emoji via CBDT/CBLC technology for all Chrome-based apps, as well as all GTK+ apps if you install a patched cairo. By the way, the font from the official repo consists of the EmojiOne v3, which is a redesigned version of older EmojiOne v2, and the community is [working right now](https://github.com/Ranks/emojione/issues/477) to add the latest Unicode 4.0 emojis in the font. So, in summary it would be a pity to support only SVGinOT stack. **UPDATE 1:** CBDT/CBLC fonts seem to work in Firefox as well now. **UPDATE 2:** cairo merged the patch in upstream, so it also supports CBDT/CBLC. In other words, CBDT/CBLC technology is supported almost in all apps now on Linux. Alacritty should support it too. **UPDATE 3:** With no configuration from my side, Sakura terminal now supports CBDT/CBLC technology to show colorful emojis (do they just use cairo?): ![image](https://user-images.githubusercontent.com/1177900/32016435-4322e6ce-b9c4-11e7-9753-be2941fa95fd.png)\n---\nHuh, just hearing about CBDT/CBLC. Definitely sounds like a good solution too, as long as I can get my color emoji.\n---\nAny update in this space? I'd love to get the Rocket emojis back ðŸ˜„\n---\nEmoji works for me, but they are rendered semi-transparent. macOS using Fira Code\n---\n@maximbaz, I'am afraid CBDT/CBLC isn't supported by Firefox yet. I've tried current stable and Quantum under linux, here is what I get from https://pixelambacht.nl/chromacheck/ ![capture du 2017-11-06 10-44-39](https://user-images.githubusercontent.com/8804879/32434887-a6d399ba-c2df-11e7-9450-d7769eeca18e.png) What version are you using?\n---\nI'm using Chromium on daily basis, but I have a EmojiOne font installed (which I was told is using CBDT/CBLC format) and latest official Firefox and emojis are being rendered in color: ![image](https://user-images.githubusercontent.com/1177900/32435343-ea9bbfd2-c2e0-11e7-9c9a-b0efc870c88d.png) This website that you are referring to shows no support in both Firefox and Chromium in my case, I'm not sure if we can trust it.\n---\non macOS 10.13.2 i copied ðŸš€ and i pasted it in Alacritty and it showed up perfectly fine.\n---\ni believe this was fixed in https://github.com/jwilm/alacritty/pull/956\n---\nUnfortunately only for Mac, the issue is still valid for Linux.\n---\n@maximbaz do you know whether there is anything required to have colored emojis in sakura?"}
{"project_id": "Alacritty", "bug_id": "114", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Crash with OOB after c84cd0fdb0335fa873f397e95a0a728be0fe15f5\n\nDescription:\nbasically you can try to repro it by staring selection and moving a cursor clockwise outside of the window, it should crash at some point. More investigations showing that it's related to First cell in a row, however I don't have a formal prove of it right now.\n\n"}
{"project_id": "Alacritty", "bug_id": "115", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Unbounded recursion while printing error message\n\nDescription:\nNote: This issue is not about the actual issue that causes alacritty to not start, but about the crash during printing the error message. ### System OS: Linux (Alpine Edge), running on a Raspberry Pi 4 Version: alacritty 0.4.1 (a0403c7a16) Linux/BSD: Wayland, sway Windows: -- (doesn't apply) ### Logs Stdout (cropped, the details part of the message is apparently printed recursively): Stderr (after the stack overflowed): ### Additional Info https://github.com/alacritty/alacritty/blob/c84cd0fdb0335fa873f397e95a0a728be0fe15f5/alacritty/src/main.rs#L111-L115 The `println!()` in line 113 is the last line I can reach in GDB.\n\nDiscussion:\nFunny, I just bumped into this today trying again to run this on an incompatible ARM setup. Glad it's already fixed!"}
{"project_id": "Alacritty", "bug_id": "116", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: TMUX: Pane scrolling output affect other panes selection\n\nDescription:\nHi, issue occurs with tmux. When top pane starts scrolling output, every bottom panes starts to move selections too. It works only with top pane. See gif. ![Alacritty](https://btwiusearch.net/tmux.gif) # Expectation I checked it with Konsole and it works as expected. See gif. ![Konsole](https://btwiusearch.net/tmux_konsole.gif) [alacritty.log](https://github.com/jwilm/alacritty/files/3850791/alacritty.log) [alacritty.events.log](https://github.com/jwilm/alacritty/files/3850794/alacritty.events.log)\n\nDiscussion:\nBesides Alacritty scrolling handling. How `konsole` behaves when your selection in an active pane (pane where you're outputting text) reaches the top of it? I'm interested in both cases top and bottom.\n---\nHi, in konsole selection just cancelled when reached the top. See gif. ![tmux](https://user-images.githubusercontent.com/4666566/69038736-7b66d700-09fb-11ea-8bed-442944a4bb89.gif)\n---\nThis should be fixed with #3218. I've tried to model the behavior with scrolling regions based on what I personally think is reasonable, since I did not have Konsole for testing and Termite just clears the selection. If you're willing to help with testing, please let me know if it behaves like you would expect @house-of-vanity."}
{"project_id": "Alacritty", "bug_id": "117", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Alacritty can't change size of bitmap fonts without a restart\n\nDescription:\nIt seems like we should do a bit more for some bitmap fonts to make them change their size dynamically.\n\n"}
{"project_id": "Alacritty", "bug_id": "118", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Powershell starts up with extra stuff prepended to the current directory name\n\nDescription:\nAfter updating to the latest version, when Alacritty starts, either from the `Open Alacritty Here` context menu, or when running it from a previous Alacritty instance, the path has `Microsoft.PowerShell.Core\\FileSystem::\\\\?\\` prepended to. For example, if I open Alacritty in `C:\\home` my prompt says `PS Microsoft.PowerShell.Core\\FileSystem::\\\\?\\C:\\home>`. Other than the long prompt, everything seems to work properly. If I run `cd C:\\home` then the prompt appears how I would expect it to on startup: `PS C:\\home>`. Oddly enough, if I start a powershell 6 terminal, then run `alacritty.exe` inside there, the resulting instance of Alacritty does not have this long prompt. It does print `Cannot load PSReadline module. Console is running without PSReadline.` above the prompt only in that case though. ### System OS: Windows 10 Version: alacritty 0.4.1 (4d9253b) Windows: ConPTY\n\nDiscussion:\nHave you confirmed that downgrading to a previous version fixes this problem? Or could this just be an unfortunate collision of multiple updates at the same time? Also, if you have a Rust toolchain installed, it would be extremely helpful to get the exact commit which broke this. That would likely make fixing it far easier.\n---\nAfter upgrading Alacritty I got the same problem (on `cmd.exe`). The commit that broke this is f632919134414e31ffd3ae9b5732d673deb0adf5. My guess is that [this remark](https://github.com/alacritty/alacritty/pull/3117#discussion_r360699960) is mistaken and you have to hope that the process can handle the UNC path. Using again `dunce::canonicalize` in `alacritty_terminal/src/tty/windows/winpty.rs` (on latest master) fixes the issue on my end. I do not know what causes the PSReadline module error though.\n---\nThat sounds like a very good guess @enizor, thanks! @davidhewitt could you look into this? I'm not sure if we actually want to add `dunce` as a depedency, but if that should be the problem, we could potentially un-UNC things ourselves.\n---\nI guess that `CreateProcessW` (which is what we give the UNC path to) is forwarding it on unmodified, which upsets cmd.exe. Alas. The documentation for `CreateProcessW` stated UNC paths were fine (as far as that API was concerned). > we could potentially un-UNC things ourselves. I'll make a patch this evening to do exactly this.\n---\n> I'll make a patch this evening to do exactly this. I'd imagine we're talking about a controlled environment here, where we don't receive a UNC path from Windows. So including `dunce` just for that seems very overkill and it'll likely cover a ton of edge cases we don't care about. However if it turns out not to be worth it to copy their code 1:1 ourselves, please let me know and we can rethink our strategy. Thanks a lot for your quick reply!\n---\nSounds like the cause has probably been found, but I can confirm that if I uninstall 0.4.1, then install 0.4.0 then the prompt does not have the extra stuff, and then if I re-install 0.4.1 the extra stuff reappears."}
{"project_id": "Alacritty", "bug_id": "119", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Semantic selection when double clicking closing bracket doesn't work\n\nDescription:\nIf you double click on an opening bracket `( hello )`, it'll select till the closing bracket, however the opposite isn't true.\n\n"}
{"project_id": "Alacritty", "bug_id": "120", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Alacritty reverts the font change after moving across the monitors\n\nDescription:\nI'm not sure that it's a desired behavior, however I feel like if a user changed font size from `X` to `Y` on a monitor `1` and then moved a window from a monitor `1` to a monitor `2` we should speculate with the updated font size and not with the default one. So the font size on a monitor `2` should be `Y * scale_factor` and not `X * scale_factor`. In addition to this the next update after moving alacritty from `1` to `2` will be based on `Y` and not `X`, so it seems like a bug to me.\n\nDiscussion:\nYou're absolutely correct. The new font size should just be the rescaled version of the current font size, not of the config."}
{"project_id": "Alacritty", "bug_id": "121", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Trackpad Scroll events are ignored when scrolling really slow (less than one px per event)\n\nDescription:\nAs title. This is caused by casting the `lpos.y` to an i32.\n\n"}
{"project_id": "Alacritty", "bug_id": "122", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: One emoji is rendered huge\n\nDescription:\n### System OS: Void Linux Version: alacritty 0.4.2-dev (50c1fd0) Linux/BSD: Wayland, Sway This text: looks like this (note the bow emoji being huge): ![2020-02-27-130741](https://user-images.githubusercontent.com/102547/75434628-ec0a8180-5962-11ea-9cb6-8d923dfacd3e.png) The alacritty config: https://0x0.st/ibPH.yml Yesterdays alacritty master didn't have this issue.\n\nDiscussion:\nCould you bisect? I canâ€™t repro this issue.\n---\nIt seems like you've disabled scaling of bitmap fonts, however our workaround for this case were broken a while ago.\n---\nThanks, that fixed it. Btw I've never changed scaling of bitmap fonts. (I presume it's done in fontconfig?) I use default font settings from the distro.\n---\nItâ€™s done by `/etc/fonts/conf.avail/10-scale-bitmap-fonts.conf` IIRC. You can check `fc-conflist` to check whether itâ€™s enabled for you."}
{"project_id": "Alacritty", "bug_id": "123", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: copy/paste broke on wayland after switching to console\n\nDescription:\nOn archlinux using sway after switching to console copy/paste does not work in windows opened before switching. ~~Until version 0.4.0 the same issue existed for paste but it got fixed :)~~\n\nDiscussion:\nI'm aware of this issue and it was never fixed iirc. Switching to console can kill clipboard in some alacritty instances for whatever reason, so purely random thing.\n---\nyou are right :( it coincidentally worked on my first test.\n---\nI can reproduce this on NixOS unstable.\n---\nI have also reproduced this by putting my computer to sleep (`systemctl suspend`). Every terminal instance I had open can no longer copy/paste to/from anywhere (even itself). Uncertain if suspending reproduces every time. Will update tomorrow whether or not that is the case -- might make this easier to resolve. `alacritty 0.4.1-dev (8a833406)` EDIT: A bit late, but confirmed that sleeping and waking causes this issue.\n---\nsuspend and tty switch should trigger the same events, so it's a bit expected for them to cause this issue.\n---\nI have the same issue on sway here.\n---\nSame issue on Wayland, Gnome, Fedora here (only sharing because I don't think this is Sway specific, but another Wayland funtime)\n---\nThis issue is annoying enough that I was about to try debugging it, but it looks like it has already been **fixed on master**! I can definitely reproduce it with 0.4.1 on sway 1.2, but not anymore using b72903e720ca1fef2ed450c1026eb8331efc0288. Not sure which commit actually fixed it.\n---\n@kchibisov Could you take another look at this? I don't see any reason why it would be fixed, so I'd be a bit cautious about closing this prematurely.\n---\nI also don't see any point why this thing could be closed tbh. We did literally nothing about it since v0.4.1 so it's likely a luck or someone stopped switching to console that often. I'll take a look on this thing right after I'll finish other Wayland/font related stuff.\n---\nsadly still occures for me on current master\n---\nYes, I may have spoken too soon :( . I even gave it a day, but the issue seems to be less reproducible than I thought.\n---\nWithout having any underlying knowledge on how our clipboard behaves (in general, much less on Wayland), I would hazard a guess that this takes a while to manifest. I've previously suspended for a few minutes at a time and the issue doesn't crop up, but if I suspend overnight (usually around 7-8 hours), all of my terminals lose clipboard functionality upon wake. It's unfortunate that this takes so much time to (reliably) manifest.\n---\nA few weeks later, I can definitely confirm that the issue completely vanished for me after moving to b72903e after all. Unfortunately, as @cole-h said, it seems to be very hard to reproduce, so I can't really bisect the commits in between. Even worse, if I run the stable version of alacritty in parallel to the mentioned commit, switching to a TTY reliably breaks C&P **in the pre-release alacritty only**. It is only when I run nothing but that pre-release commit that I don't get this issue anymore."}
{"project_id": "Alacritty", "bug_id": "124", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Wrong mouse cursor size on Wayland\n\nDescription:\nMouse cursor is small, ~20px. Looks like system cursor settings are not respected. Have HiDPI display. Sway scale setting is default (=1). All other apps (including XWayland ones) show mouse cursor 40px sized. With `WINIT_UNIX_BACKEND=x11` cursor sized properly. **OS:** Arch Linux, kernel 5.4.15 **Version:** 0.4.1 **Compositor:** sway alacritty -vv [2020-01-30 16:14] [INFO] Welcome to Alacritty [2020-01-30 16:14] [INFO] Configuration loaded from \"/home/user/.config/alacritty/alacritty.yml\" [2020-01-30 16:14] [DEBUG] Estimated DPR: 1 [2020-01-30 16:14] [DEBUG] Estimated Cell Size: 13 x 29 [2020-01-30 16:14] [DEBUG] Estimated Dimensions: None [2020-01-30 16:14] [INFO] Device pixel ratio: 1 [2020-01-30 16:14] [INFO] Initializing glyph cache... [2020-01-30 16:14] [INFO] ... finished initializing glyph cache in 0.023989566s [2020-01-30 16:14] [INFO] Cell Size: 13 x 29 [2020-01-30 16:14] [INFO] Padding: 0 x 0 [2020-01-30 16:14] [INFO] Width: 800, Height: 600 [2020-01-30 16:14] [INFO] PTY Dimensions: Line(20) x Column(61) [2020-01-30 16:14] [INFO] Initialisation complete [2020-01-30 16:14] [DEBUG] New num_cols is 73 and num_lines is 36 [2020-01-30 16:14] [INFO] Width: 956, Height: 1045\n\nDiscussion:\nYou're correct, `XCURSOR_SIZE` isn't respected in a version of SCTK(our Wayland toolkit) winit(our windowing library) is using. The new version of SCTK solved this problem, however it'll take time for it to hit alacritty, since winit should update to it first, it also requires rust 1.40.0, so it's unlikely soon. However I'll try to ask whether we can get a fix for some old versions...\n---\nOk, thank you for explanation."}
{"project_id": "Alacritty", "bug_id": "125", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: ToggleSimpleFullScreen increases window height by one line each time\n\nDescription:\n### System OS: macOS 10.14.6 Version: alacritty 0.4.1 (4d9253b) ### Logs Crashes: N/A Font/Terminal size: `alacritty -vv` Keyboard and bindings: `alacritty --print-events` ### Description of bug Using the `ToggleSimpleFullScreen` action increases window height by one line each time it's invoked on macOS. It also intermittently shows an extra line in the prompt when in full screen. ![output](https://user-images.githubusercontent.com/54970/73114400-f7a4fb80-3f11-11ea-8371-15adf5d1291d.gif) Thereâ€™s also a similar bug where if you start in `SimpleFullScreen` and then change back to `Windowed` mode, it doesnâ€™t respect the window dimensions set in the configuration file. Instead it seems to revert to 84 x 32, until you start toggling as described, when the height slowly increases as shown above. ### How to reproduce Add a binding for `ToggleSimpleFullscreen` and set the `startup_mode` for `window` to `Windowed`. Then at launch toggle back and forth via a keybinding (doesn't seem to matter which, but mine was Command+Return).\n\nDiscussion:\nSo winit is basically increasing window size by 22 when going back to from SimpleFullscreen as far as I can see.\n---\n@msanders Could you try to set decorations to `none` in a config and retest?\n---\n@kchibisov: Disabling window decorations indeed fixes it (although it still shows the extra prompt line in full screen).\n---\nopened upstream bug https://github.com/rust-windowing/winit/issues/1420"}
{"project_id": "Alacritty", "bug_id": "126", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Command key on macOS remains activated after window changes (cmd+TAB)\n\nDescription:\nSince upgrade stable versions from 0.4.0 to 0.4.1 I have experienced that the command key seems to remain in a activated state when changing windows with cmd+TAB. The result is then either unresponsive keys until cmd is pressed and released again, or when hitting keys like Q or H, the window quits or hides accordingly. Also, it seems be reproducible consistently when you cmd+TAB to an \"empty window\" (i.e. on macOS some programs can run without graphical window). ### System OS: macOS Version: alacritty 0.4.1 (4d9253b)\n\nDiscussion:\nCould you, please, provide us the with `alacritty --print-events`? Oh and press `A` char right after you've released `Cmd`, so it'll be easier to track where it happens.\n---\nThe same issue has been found on Wayland already and we're working with upstream on a fix: https://github.com/rust-windowing/winit/issues/1365\n---\n@kchibisov, here is the output from the moment I make the change to another window and back before lastly pressing Q on its own, which makes Alacritty quit (full output can be seen [here](https://pastebin.com/raw/mqMw1XXY)).\n---\nSo the modifers are correct on chars, however they are absolutely in correct in terms of ModifersChanged event. Since alacritty switched to track events based on information from them, it's just assumes that you have Command Pressed, because there's no event for released mods...\n---\n> So the modifers are correct on chars, however they are absolutely in correct in terms of ModifersChanged event. Since alacritty switched to track events based on information from them, it's just assumes that you have Command Pressed, because there's no event for released mods... Yeah, so seems like the upstream issue is correct. It's the same issue as on Wayland.\n---\n>It's the same issue as on Wayland. On Wayland we have similar issue, not the same issue, since on it our modifiers are always correct, besides one minor case when your app loses keyboard focus and you can't type in it. However the macOS one is more serious, since it actually breaks things for keyboard input, not just some abstract thing, which exists due to a Wayland nature.\n---\nJust to summarize the discussion from the linked issue (and its counterparts) and make sure I'm understanding correctly, the `ModifiersChanged` event in `winit` is not triggered by a \"release\" of modifiers around entering or leaving a window, since such an event is not fired. So, when you _leave_ Alacritty via Cmd-Tab, that modifier is effectively \"stuck,\" since your window lost focus while a modifier was held down. Both the macOS and Wayland implementations seem to have used the same assumption. You can replicate this by Cmd-Tabbing _into_ Alacritty, and typing. The Command key does not seem to be pressed when you do this. But when you Cmd-Tab _out_ of Alacritty and then restore focus to it (by mouse, or whatever) Alacritty behaves as if the Cmd modifier is still pressed from before. PR rust-windowing/winit#1381 seems to take a promising approach to solving this issue: if modifiers are depressed when either entering or leaving a window, an additional event is emulated; if entering the window, an event is sent with the current modifier state; and if leaving, an event is sent with an empty modifier state to reset the set of modifiers. The aforementioned PR seems, to me, to only be missing complementary implementations for macOS and Windows. --- A patch _could_ be implemented downstream, e.g. [here](https://github.com/alacritty/alacritty/blob/a82df6ac4309f16bd1c75d13f1f4f1b9f79582eb/alacritty/src/event.rs#L559-L572), perhaps by resetting the `modifiers` field on `Processor ` to `ModifiersState::empty()` if the window lost focus? If a fix is coming upstream, though, is it better to just wait?\n---\n> If a fix is coming upstream, though, is it better to just wait? Indeed.\n---\nHello, I just would like to mention that the issue is also present on X11\n---\nJust wanted to add that clicking on URLs (and losing focus that way) with a modifier key held is also a consistent way to trigger this issue. One that I personally run into a lot.\n---\nIt is really annoying and I did some temporary fix. > Just disabled **cmd+m** keybinding on Mac Mojave https://apple.stackexchange.com/a/186510/290655\n---\nFYI, testing a locally-built alacritty with the following patch to apply (and be compatible with) rust-windowing/winit#1381 fully resolved this issue for me. (Note: once those changes are released, a change like this would be required to maintain compatibility with upstream `winit`.)\n---\n@tantonini If this is also present on X11, could you open a separate issue for that?\n---\nUntil this is resolved I started using a less than ideal workaround:"}
{"project_id": "Alacritty", "bug_id": "127", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crashes on start on Windows\n\nDescription:\nAfter installing the latest version, Alacritty crashes on start with an error pop-up. I've tried running it with and without a config file but no luck. Any ideas? ### System OS: Windows 10 Version: 0.4.1 (installed via msi installer) Windows: ConPTY ### Error output #### Alacritty: Runtime Error panicked at 'assertion failed: `(left == right)` left: `1`, right: `0`', C:\\Users\\travis\\.cargo\\git\\checkouts\\winit-c2fdb27092aba5a7\\d1c6506\\src\\platform_impl\\windows\\dark_mode.rs:135:13\n\nDiscussion:\ncc @davidhewitt\n---\nThe crash is outside of alacritty as far as I can see, so it's a winit bug.\n---\nThat's a file I helped with in winit so I'll help figure this one out. @Number7tSeven what Windows 10 version are you running? (e.g. Insiders Fast Ring, October 2018 update, etc)\n---\nI see. Since the error seems to have something to do with winit's handling of Windows dark mode I tried it with light mode but with no luck. I still get the same error.\n---\n@davidhewitt, I am running October 2018 update (1809).\n---\nProbably a good idea to try and update.\n---\nI think old Windows should also work in this case tbh, so if winit crashes on some old windows(2018 isn't that old tbh), so it's a bug, I guess.\n---\nWe tested the patch on several OS versions and were satisfied that it worked correctly from April 2018 update onwards iirc. I'll have another read through and @Number7tSeven may come back with a patch that I'll ask you to try (if I can't get an old vm running)\n---\nThanks. I can understand if you don't want to support older versions of Windows though.\n---\n:+1: will see what I can find later when I investigate\n---\nThe release is still officially supported by Microsoft (see https://support.microsoft.com/en-us/help/13853/windows-lifecycle-fact-sheet), both for Home and Enterprise users. So Alacritty should definitely work on it.\n---\nApologies for the delay on this. I just now found time to set up a VM running Windows 10 October 2018. Two interesting things to note: - I can reproduce this crash on a fresh install of Windows 10 October 2018 (build number `10.0.17763.1`, according to the welcome message in `cmd.exe`). - If I use windows update to install all security updates (_but not upgrade to March 2019 or November 2019_), then this crash no longer occurs. `cmd.exe` shows build number `10.0.17763.973` after all these updates are installed. So @Number7tSeven I recommend that if you install a few updates, Alacritty will start working. You don't have to upgrade your Windows OS version, just a few recommended patches :) Given that my conclusion is that a properly patched Windows 10 October 2018 is supported, I'm reluctant to attempt to create a patch to fix the crashing build.\n---\n> Given that my conclusion is that a properly patched Windows 10 October 2018 is supported, I'm reluctant to attempt to create a patch to fix the crashing build. Since Alacritty supports only the latest supported version of Windows, we do not support running outdated versions of the operating system and such configurations are not recommended.\n---\nI'm running Windows 10 Enterprise LTSC 1809 and got the same problem. It is the latest version of Windows in LTSC channel so it couldn't be upgraded. Since 1809 is the latest version in LTSC channel, I think it should be supported.\n---\nThis should be fixed in the next release, we just need to wait for another version of our winit depedency (see https://github.com/rust-windowing/winit/commit/0ae78db6cb5568152f0e32ac3cf4e8cb43e28920)."}
{"project_id": "Alacritty", "bug_id": "128", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Mouse cursor rendered in low-res on a HiDPI Wayland output\n\nDescription:\n> Which operating system does the issue occur on? Linux > If on linux, are you using X11 or Wayland? Wayland, Sway git master roughly equivalent to 1.1rc2. On a HiDPI output, with scaling set to 2, the mouse cursor set by Alacritty is a low-res one. I.e. it is probably rendered to a surface that has **not** had its buffer scale set. This means the compositor (Sway in this case) will scale it. See the difference below. When the cursor is hovering over the title bar, it is rendered by Sway itself, in high-res. When it's hovering over the window content, it is rendered in low-res. ![high-res](https://user-images.githubusercontent.com/14031526/57793492-bbde5300-7741-11e9-8f65-9da7ddee2f5a.png) ![low-res](https://user-images.githubusercontent.com/14031526/57793499-be40ad00-7741-11e9-8d77-d7a3e773fbcd.png) I realize it's likely this isn't a bug in Alacritty per sÃ©, but in one of its (wayland) dependencies.\n\nDiscussion:\nCan you reproduce this with the examples from https://github.com/rust-windowing/glutin? The simple `window` example should do the job. I'd assume that this is an issue that needs to be handled upstream in winit.\n---\nIt reproduces with the `window` example. Is winit the correct upstream project to report this to?\n---\n> Is winit the correct upstream project to report this to? Yes, I'd appreciate it if you would report it there and link the issue. Otherwise I can also open an issue upstream, though I can't help much with reproducing or answering potential questions.\n---\nIt was already reported * https://github.com/rust-windowing/winit/issues/727 * https://github.com/Smithay/client-toolkit/issues/47\n---\nOh yeah searching the issue trackers is a great idea! Thanks for the links.\n---\n> * [rust-windowing/winit#727](https://github.com/rust-windowing/winit/issues/727) > > * [Smithay/client-toolkit#47](https://github.com/Smithay/client-toolkit/issues/47) These bugs have been fixed"}
{"project_id": "Alacritty", "bug_id": "129", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Failed to open input method\n\nDescription:\nWhich operating system does the issue occur on? Ubuntu 18.04 If on linux, are you using X11 or Wayland? X11 the error:\n\nDiscussion:\nProbably best to report this upstream with winit/glutin. I don't think there's anything Alacritty can do about this. However would you mind giving the #1403 PR a shot first? It's a big glutin/winit version jump, so it's possible that this resolves the issue.\n---\nThis looks like it could be the same as tomaka/winit#636\n---\nThanks for keeping use updated. Looks like that might be related.\n---\nAt my setup this error was caused by setting `/etc/locale.conf` to an invalid language that was activated inside `/etc/locale.gen` on Arch. After fixing this, it works fine.\n---\nHaving the same issue on LM19 tara, any fix?\n---\nHaving the same issue on Gentoo Linux as well; any fix?\n---\nHmm, it seems I need to change my locale to C for it to work...\n---\nOkay, it seems that it specifically doesn't like my language `eo.utf8`, but works fine on simply `eo`.\n---\nI'm also running Ubuntu 18.04 on X11 and having the same issue. Later I found that my `/etc/default/locale` was: After changing to: problem was fixed.\n---\nNoticed the same behavior on manjaro 18.0.4 with x11 and actual 0.3.3 alacritty installed via manjaro repositories. Fixed it by moving the binary file to a different path `/opt/alacritty/alacritty` and creating a shell script under `/usr/bin/alacritty`, which simply sets the language without the `.UTF-8`-ending, as suggested by @happysmash27 : *$@ expands to the script arguments* My quick test to verify a still utf-8 compatible terminal was to create a `utf8.txt` file with some utf-8-only chars: Running `cat utf8.txt` correctly displayed all chars in alacritty and everything else seems to work normally. After launching alacritty it is possible to export the original LANG value with `.UTF-8`-ending, to ensure compatibility with other programs, f.e. by modifying the `.bashrc`."}
{"project_id": "Alacritty", "bug_id": "130", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: ANSI SGRs after an unknown SGR are incorrectly ignored\n\nDescription:\nAn escape sequence like this: ESC[31;10;44mHelloESC[0m ... will render incorrectly with a red foreground and black background, instead of a red foreground and blue background. It's because of this block in ansi.rs, in vte::Perform: ('m', None) => { if args.is_empty() { handler.terminal_attribute(Attr::Reset); } else { for attr in attrs_from_sgr_parameters(args) { match attr { Some(attr) => handler.terminal_attribute(attr), None => { unhandled!(); /* The \"return\" below causes all attributes after an unknown one to be ignored! */ return; }, } } } }, Because the return causes control to bail out without processing any further attributes. Removing the return corrects the issue, but I don't know what else it may break.\n\nDiscussion:\nAwesome, thank you!"}
{"project_id": "Alacritty", "bug_id": "131", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Donâ€™t allow setting HollowBlock and hidden cursors in config\n\nDescription:\nWe shouldnâ€™t allow both mentioned cursors in a config file, since they are only for internal usage and was leaked due to serde tbh. Also you canâ€™t use Hollow cursor, since thereâ€™s no way to restore it.\n\nDiscussion:\n> Also you canâ€™t use Hollow cursor, since thereâ€™s no way to restore it. That's not entirely true, you can use `echo -e \"\\e[0 q\"` to restore it regardless of what your current cursor is.\n---\nOh, with reset sure, but you should do it manually most of the time, I guess.\n---\nHi I would be interested to have a HollowBlock cursor by default. I reverted #3410 and everything seems to work fine, I probably miss something but what is the reason this has been removed ?\n---\nBecause the hollow block cursor makes no sense as a normal terminal cursor."}
{"project_id": "Alacritty", "bug_id": "132", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Selection in Alt-screen isn't cleared on mode leave\n\nDescription:\nif you run `alt-screen-random-write` from `vtebench`, select something during it, when it finish, you'll go back to a normal mode and won't see any selection. if you start it again you'll see your old selection from it. I guess we should just always clear selection on mode toggle.\n\n"}
{"project_id": "Alacritty", "bug_id": "133", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Winit events aren't logged with /dev/null config file\n\nDescription:\nWhen running Alacritty with the command `alacritty --config-file /dev/null --print-events`, events are initially printed, however after a config reload + events cleared event, no further winit events are logged.\n\n"}
{"project_id": "Alacritty", "bug_id": "134", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Index out of bounds panic when highlighting.\n\nDescription:\nIt seems like a regression of #3233. Reproduce it by clicking and dragging inside the window and releasing outside the window, but only if the cursor is above and to the right of the starting position. After bisecting, it looks like 6832b86aa7a9adb386394e1caaf373e65297be4e is the culprit. ### System OS: Linux Version: alacritty 0.4.2-dev (bb0a214) Linux/BSD: Wayland/Sway ### Logs\n\nDiscussion:\nThank you!"}
{"project_id": "Alacritty", "bug_id": "135", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Incorrect mouse position\n\nDescription:\nUsing the mouse to select text is off when on Retina screen. Bug introduced in https://github.com/alacritty/alacritty/commit/c34ec12c309695e4c14d8e50b5f3f54198f70775 ### System OS: macOS Version: master Reproduction: Open Alacritty on retina screen Try to select text Selection is off from actual cursor position\n\nDiscussion:\nstart-up log: [Alacritty-91939.log](https://github.com/alacritty/alacritty/files/4050322/Alacritty-91939.log)\n---\nopened upstream issue https://github.com/rust-windowing/winit/issues/1389\n---\nConfirmed by adding the following to top-level Cargo.toml that winit `master` fixes the issue.\n---\nCan reproduce on Linux/Wayland as well.\n---\n@ddevault are you using some master version of alacritty? it shouldn't be a problem on v0.4.1. As for a master version, I've fixed upstream, so we just waiting on a new release of our windowing library.\n---\nAye I'm using master, I switched to the stable release for now."}
{"project_id": "Alacritty", "bug_id": "136", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Ctrl+q not working\n\nDescription:\nWhich operating system does the issue occur on? macOS `Ctrl+q` is not working unless I add this line to `key_bindings`: Other `Ctrl` keys seem working with default `key_bindings` config.\n\nDiscussion:\nSame with me, i use `ctrl + q` for tmux prefix\n---\nSame here with macOS 10.12.6 @aioutecism 's solution did work for me.\n---\nSame problem macOS 10.13.4 @aioutecism's fix also did not work for me. I bisected the problem and it seems to have been introduced in 765949f256aefcc513d0bfb46b64d315f9c2f3d2\n---\nSame problem here after just upgrading to newest version of Alacritty.\n---\nSame problem for me on maxOS 10.13.6 with Alacritty(master branch b41c6b736d67d61e92b174dfea58ae46813934cd) above v0.2.1 solved my problem\n---\nSame issue on v0.2.5 and Mac 10.14.2. Solution posted by @aioutecism / @LittleKey works around the issue.\n---\nSame issue on v0.2.8 and Mac 10.14.3 . Thanks works around.\n---\nIssue persists on v0.3.3 and Mac 10.14.5 Work around solves the issue.\n---\nCan someone share the output of `alacritty --print-events` up until the point the ctrl+q keys are pressed?\n---\nYes. **Here's the output with an unmodified alacritty.yml file** (doesn't have the Ctrl-q remap): **Here's the output with the modified alacritty.yml file:**\n---\nDo you have another binding for Ctrl+Q in your config? In the 'broken' case it's already sending a `ReceivedChar('\\u{11}')`, so it seems like it should be working properly.\n---\nIt sends it one Ctrl+Q if I press Ctrl+Q twice in a row (haven't tested if there's a timeout). This is what I get if I only click ctrl+q once.\n---\n@jeremydr2 Wait, so you're saying only the second ctrl+q works? Do you release both q **and** control when pressing it twice? It looks like you're pressing RControl, have you tried using LControl?\n---\nHere's a log where I press Ctrl+q twice, letting go of both buttons fully; only one `\\u{11}` is generated. Mac keyboards only have one control button. You can remap modifier keys on macs, but there's no option to map it to RControl or LControl. ![image](https://user-images.githubusercontent.com/23303256/68499596-78c4ee80-0251-11ea-8c83-9cc1fe0e6863.png)\n---\nReported upstream in https://github.com/rust-windowing/winit/issues/1267."}
{"project_id": "Alacritty", "bug_id": "137", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: alacritty doesn't close unless it is visible on sway\n\nDescription:\nWhich operating system does the issue occur on? sway on Arch Linux If on linux, are you using X11 or Wayland? Wayland How to reproduce: Run a command like \"sleep 3 && exit\" and then either: - switch to another workspace - open another window using a tabbed layout You'll see alacritty doesn't close itself after 3 seconds, like it should, until it is visible again.\n\nDiscussion:\nI can repro on #2438 + sway.\n---\nIf I understand this correctly, I can repro this on 3475e44 on macOS 10.11, by just switching to another application. As you may see on this gif, Alacritty's window closes only when I move the cursor back to it: https://i.imgur.com/dKx5XP5.gif\n---\n@for-coursera I think its a different one, would you mind trying to repro on `v0.3.3`?\n---\n@kchibisov You mean downloading 0.3.3 release (cc3e4d3), and not the latest master, which I did test it on?\n---\nyep, since I think it's a recent regression in your case.\n---\n@kchibisov You are right indeed, it closes just fine in 0.3.3 release. Hope this will be brought back :)\n---\n@kchibisov I think it is the same regression on sway On sway version 1.2 (Sep 26 2019, Arch Linux) and alacritty 0.3.3 it works correctly. If I sleep && exit, switch to another workspace and wait. the workspace I left alacritty on disappears (alacritty was the only thing open in it) after the sleep elapses.\n---\n@Tacklebox I can repro this issue on `v0.3.3` and the original one was before evlp2 merge(massive changes to event loop). my sway version is 1.2-d19f4f7b (Oct 16 2019, branch 'master'). So, I'm not sure that it's a regression, if it was the same one, then I should be able to repro it on Windows/X11, however I can't. P.s. I can repro this issue even on quite old versions (`v0.3.0`)\n---\nUpstream bug https://github.com/rust-windowing/glutin/issues/1231. @for-coursera Please, open a separate issue for macOS, since this bug is a Wayland specific one."}
{"project_id": "Alacritty", "bug_id": "138", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Always render emojis with default color\n\nDescription:\nI'm on macOS. Here's my ridiculous tmux status bar. I name all my windows emojis because it makes me happy. I tried out Alacritty. But was disheartened when I realized it inverts the color on any window tab with activity. And it's most noticeable if you use colorful emoji as your window titles.\n\nDiscussion:\nYour terminal emulator might actually be telling Alacritty to invert the colors. Judging by the black/white mix, I'd assume that's exactly how that is achieved. Now if emojis should be affected by that is a different question, but that's likely what's going on. So if you would set the manual color codes instead of using the inversion escape, that should resolve the problem.\n---\nThat seems plausible, but this doesn't happen in Terminal or iTerm 2. On 12/05, Christian Duerr wrote: >Your terminal emulator might actually be telling Alacritty to invert the colors. Judging by the black/white mix, I'd assume that's exactly how that is achieved. > >Now if emojis should be affected by that is a different question, but that's likely what's going on. So if you would set the manual color codes instead of using the inversion escape, that should resolve the problem. > >-- >You are receiving this because you authored the thread. >Reply to this email directly or view it on GitHub: >https://github.com/jwilm/alacritty/issues/1864#issuecomment-444692351\n---\nIt's hard for me to test this since I do not have any colored emojis installed, but it should be pretty simple to try and reproduce that behavior. Try running this escape sequence in bash: `echo -e \"\\e[7mINVERTED: \\U1F600\\e[0mNORMAL: \\U1F600\"` This should print one inverted emoji and one normal one. In theory both should look the same in iTerm/Terminal.app but look different in Alacritty. Note that I don't think this works in the version of bash which is installed on macOS by default, so you might need to replace the unicode escapes with emojis yourself or update bash.\n---\nThanks so much @chrisduerr. Your test worked perfectly. Your hunch was right. Terminal.app Alacritty Still no idea how to fix.\n---\nIt should be possible to work around this by changing the formatting of the tmux statusline. A more proper solution would be to prevent emojis from getting inverted though.\n---\nI'm not sure what you mean by \"changing the formatting\"? It's the name of the window. How do I tell tmux to render them not inverse? On 12/09, Christian Duerr wrote: >It should be possible to work around this by changing the formatting of the tmux statusline. > >A more proper solution would be to prevent emojis from getting inverted though. > >-- >You are receiving this because you authored the thread. >Reply to this email directly or view it on GitHub: >https://github.com/jwilm/alacritty/issues/1864#issuecomment-445551838\n---\n@chrisduerr update: I noticed that this affects everything. Not just tmux. You probably already inferred that but I just wanted to make sure it was documented that emoji always invert their colors when highlighted.\n---\nChanged the title to include the following issue: https://github.com/jwilm/alacritty/issues/2160\n---\n@chrisduerr I'd like to give this issue a try! Could you point me in the right direction? I wonder how to test that that emojis themselves are unaffected by inversion...\n---\nCells are inversed [here](https://github.com/jwilm/alacritty/blob/master/src/term/mod.rs#L286-L292) so any fix would likely be placed there too. The tougher task would be figuring out what's an emoji and what isn't. I don't know if there's any official way to detect this and there might be, but if there's not we'd likely have to resort to matching the char value against a list of unicode characters to include (like everything in the range of 1F600â€”1F64F).\n---\n@chrisduerr I can't reach that file unfortunately. Is there any `mod.rs` in the project at all? I would like to give this issue a try too.\n---\nLooks like the file has moved and I haven't linked to a fixed commit. This should be the correct path: https://github.com/jwilm/alacritty/tree/34c54e7e0eb7c28406df112d118b82280be2adee/alacritty_terminal/src/term/mod.rs#L285-L294\n---\n@felipesere do you see a more appropriate solution? I think it is really possible to check `cell.c` against a list of emoji range in unicode but this way Alacritty would support emojis only manually, hence when new emojis appear, they will be inverted and should be manually added to the range."}
{"project_id": "Alacritty", "bug_id": "139", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: [wayland] Clipboard amnesia with alacritty and geany\n\nDescription:\nFedora 31 AND Void (musl) [different hardware] 0.4.2 wayland gnome and wayland sway The problem manifests solely with the geany editor for me but perhaps there are other applications. To reproduce, have an alacritty terminal open, open the geany editor. Select some text in geany and Copy, verify that Paste in geany works as intended. It should. Attempt Paste in alacritty terminal. Nothing is produced. Attempt Paste in any other application. Should work as intended. Repeat the attempt in firefox (or some other application), Paste works as intended in alacritty. Now attempt Copy in alacritty after selecting some text. Paste works in alacritty and firefox. Attempting Paste in geany produces nothing. geany seems to be using xwayland but the problem is absent for other xwayland applications. **In Fedora 31, When using gnome-terminal instead of alacritty, the issue is entirely absent.** **In Void sway, When using sakura instead of alacritty, the issue is entirely absent.** On Fedora the alacritty config is entirely default. On void the alacritty config has been taken from someone's dotfiles and is customized.\n\nDiscussion:\nSounds like you might be mixing Wayland and XWayland applications?\n---\n> Sounds like you might be mixing Wayland and XWayland applications? Yes but that is not supposed to be a problem. And it it isn't for all the other xwayland applications I use. The bug seems to be with the combination of geany and alacritty. Perhaps geany uses some deprecated API or something but alacritty should still be compatible. Sakura and gnome-terminal are wayland terminals just like alacritty.\n---\n> Yes but that is not supposed to be a problem. Since when? Afaik it has always been a problem and has nothing to do with Alacritty itself. We just write to the clipboard of the display server we're currently on, everything else is up to the WM/compositor. > it it isn't for all the other xwayland applications I use Alacritty is not an XWayland application. @kchibisov you probably know more about this, but it sounds like there's not much we could/should do here?\n---\nI don't know since when but I have no problem copying between any xwayland and wayland windows other than geany and alacritty. And I post this here because geany has no problem with other wayland terminals. Therefore alacritty is at fault here by not playing nice in some way. > Alacritty is not an XWayland application. Perhaps there is a misunderstanding? Because gnome-terminal and sakura are not xwayland applications either but unlike alacritty they have no problem here... As was stated in the original post.\n---\nCould you post `WAYLAND_DEBUG=1 alacritty 2> debug.txt` output during you reproducing the issue?\n---\nVoid musl sway: https://paste.ubuntu.com/p/BqzSg79bBy/\n---\nthx, seems like it is fixable.\n---\nHey, same issue here on Sway running on Void. Geany uses GTK3, it is also Wayland native (`Using GTK+ v3.24.14 and GLib v2.64.1 runtime libraries`). In the meantime, `GDK_BACKEND=x11 geany` does the trick.\n---\nWith `alacritty 0.5.0` on Void Linux and this [alacritty.yml](https://github.com/Ypnose/dotfiles/blob/master/gui/alacritty.yml), I'm still unable to paste text from `alacritty` to `geany` and vice versa.\n---\nCould you show a `WAYLAND_DEBUG=1 alacritty` log? When pasting to alacritty window.\n---\nwell, paste from geany should work(works for meâ„¢), however paste to geany from alacritty doesn't, since it actually uses UTF8_STRING even for paste, so I'll reopen issue to track it.\n---\nThanks for your help. Here the [log](https://gist.github.com/Ypnose/bb919c5de0a9c2aa7a7b17c8923081b5)\n---\nI can confirm that copying from geany works when pasting to alacritty. copying from alacritty does not work when pasting to geany. Using \"echo 'test' | wl-copy\" in alacritty (alacritty is likely irrelevant) does work and successfully pastes test\\n into geany."}
{"project_id": "Alacritty", "bug_id": "140", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Garbage left over in buffer after resizing window\n\nDescription:\nAlacritty's behaviour when resizing the terminal window is a bit odd (doesn't match other terminal emulators I've tried). I'm not sure if this is a bug, or working as intended. To reproduce on latest master: * Open a small window, and generate a screen-full of data (e.g. `ls -al /usr/bin`). ![image](https://user-images.githubusercontent.com/1403503/77237296-58148a00-6b9d-11ea-8490-cc74feb52641.png) * Open something like `vim`, then resize the terminal to be a bit bigger. ![image](https://user-images.githubusercontent.com/1403503/77237301-69f62d00-6b9d-11ea-8a74-57f8d6ca1665.png) * Quit `vim`. ![image](https://user-images.githubusercontent.com/1403503/77237305-75e1ef00-6b9d-11ea-99f0-7725aedf87b8.png) At this point, there is now a bunch of garbage output from the original command _below_ the current prompt, and a Ctrl + L is necessary to make the terminal usable again. Not a huge deal, but a papercut nonetheless.\n\nDiscussion:\nWhat platform are you on? What terminfo do you use? What's your ncurses version? Which Alacritty version is this? Can you reproduce this with other shells? Please provide some more information, otherwise there's no way to help.\n---\n@chrisduerr sorry about that, I could reproduce it on every setup I tried so I assumed it was configuration-independent. I can reproduce this on: * GNOME shell (X11, default Debian Buster version) * GNOME shell (Wayland, default Debian Buster version) * sway (Wayland, master) ~My colleague mentioned that he's seen this same behaviour on the Windows build from the _Releases_ tab, but I can't verify this myself (I've asked them to try again, and will update when they do).~ They have not been able to reproduce this anymore. I mentioned in the first post that this was on Alacritty master, but I could've been more clear. I use the `xterm-256color` terminfo. I have the default `ncurses` version that ships with Debian Buster, which appears to be `6.1+20181013-2`. `nano` also functions as a reproduction instead of `vim`. For reference, the same steps on other terminals I've tried produce the below results: * `uxterm` ![image](https://user-images.githubusercontent.com/1403503/77240545-899d4d80-6bbd-11ea-9fa7-41979316e767.png) * `kitty` ![image](https://user-images.githubusercontent.com/1403503/77240550-9fab0e00-6bbd-11ea-9429-adc57bb59c61.png) * `gnome-terminal` ![image](https://user-images.githubusercontent.com/1403503/77240556-b6e9fb80-6bbd-11ea-98e7-78519a7bcf40.png) The exact mechanism by which these terminals deal with the resize vary, but all three are immediately usable after exiting `vim`. Things seem to be correct in the v0.4.0 and v0.4.1 .deb package from _Releases_. ![image](https://user-images.githubusercontent.com/1403503/77240778-42648c00-6bc0-11ea-82aa-31b14652e6e4.png) The issue happens reliably in the v0.4.2 RC 3 build.\n---\nSince the number of commits was not too large and I had a bit of free time, I bisected what I suspect is the cause: This change appears to have been introduced in https://github.com/alacritty/alacritty/pull/3115. The issue is not present in its parent commit, f48204eee20ddb0a3b23c10d27e3c75fbcd3f7f3."}
{"project_id": "Alacritty", "bug_id": "141", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Alacritty can not show current path in window title when folder contain some characters\n\nDescription:\n1. Open alacritty and mkdir a folder named \"æœ¬\". 2. Change path to new folder æœ¬. 3. Titlebar doesn't show current path, instead it shows æœªå‘½åçª—å£(unamed window). ![1](https://user-images.githubusercontent.com/7030257/79199317-689be580-7e67-11ea-962e-d20737638139.png) Alacritty can show path in window title when folder name changes to other Chinese character like \"æˆ\". ![2](https://user-images.githubusercontent.com/7030257/79199846-232be800-7e68-11ea-8173-b3682e0d8744.png) \"æœ¬\" and \"æˆ\" are Chinese characters, and they are all in common use. And i tried xterm, it can show both two path correctly. ### System OS: archlinux Version: 0.4.2 Linux/BSD: X11, Openbox\n\nDiscussion:\nIf you run `echo -e \"\\e]2;æœ¬\\x9c\" && sleep infinity`, does that work?\n---\n> If you run `echo -e \"\\e]2;æœ¬\\x9c\" && sleep infinity`, does that work? Alacritty's screenshot after run this command. ![3](https://user-images.githubusercontent.com/7030257/79283472-8bbba900-7eea-11ea-8de0-0dfede1ff362.png)\n---\nOkay, so that means it's either a limitation in your window manager, or one set by winit. I'd assume running `alacritty --title \"æœ¬\"` also doesn't work then? Could you test if it is possible to set your window title to this character in another application?\n---\nAfter i run `alacritty --title \"æœ¬\"` in alacritty, it open another alacritty window with title æœ¬. ![4](https://user-images.githubusercontent.com/7030257/79284358-fa9a0180-7eec-11ea-8a32-ec1275026252.png) Other application like xterm and firefox can show æœ¬ in window title. ![5](https://user-images.githubusercontent.com/7030257/79284467-51074000-7eed-11ea-8c4e-a541c457575c.png) ![6](https://user-images.githubusercontent.com/7030257/79284746-28cc1100-7eee-11ea-9e68-7335b177c9bb.png)\n---\n> After i run alacritty --title \"æœ¬\" in alacritty, it open another alacritty window with title æœ¬. Huh, that's kinda interesting. There might be some difference between setting and updating the title. Just to make absolutely sure if this is in Alacritty or one of its depedencies, could you run the following command to start Alacritty (without --title): That should log all attempts to change the title to stdout. I'm curious if it contains the correct title.\n---\nScreenshot after running `alacritty -vvv | grep \"Setting title to\"` in alacritty ![7](https://user-images.githubusercontent.com/7030257/79286362-eb1db700-7ef2-11ea-9bd6-016075271cd1.png) . And screenshot with title contain æœ¬. ![8](https://user-images.githubusercontent.com/7030257/79286479-52d40200-7ef3-11ea-813d-72da840d60f0.png)\n---\nGreat bug, thanks for finding that! Turns out this unicode symbol actually contains the String Terminator byte (`\\x9c`), which Alacritty interpreted as a terminator for the OSC escape sequence. Since the C1 String Terminator is not used by any application I'm aware of, I've removed support for terminating OSCs using it, fixing this bug: https://github.com/alacritty/vte/pull/53.\n---\nI am happy that I could help. Thank you for your work."}
{"project_id": "Alacritty", "bug_id": "142", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: MacOS stack overflow on f99220f\n\nDescription:\nRunning alacritty build from master at ref f99220f causes a runtime error immediately when starting up. The following PR caused this: https://github.com/alacritty/alacritty/pull/3817 Using the commit before works fine ### System OS: macOS Version: alacritty 0.5.0-dev (f99220f) ### Logs\n\nDiscussion:\nseems like something in my config is causing the crash. I'll try to narrow down what that might be\n---\nturns out I had the following enabled:\n---\nThis change seems related? https://github.com/alacritty/alacritty/pull/3817/files#diff-ea4b6eaf3ab7cf0a075ab93242874a31L45\n---\nThe crash also happens on Windows 10 with ConPTY: `thread 'main' has overflowed its stack`. Commenting out the `# Window class (Linux only):` section of the config fixes it for me as well."}
{"project_id": "Alacritty", "bug_id": "143", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Line rotation invalidating grid\n\nDescription:\nIt seems like our rotation of the grid does not behave correctly. This means that it is possible to delete history outside of the visible region by repeatedly running the escape to scroll down the viewport. The rotation also does not update the display offset, which could potentially lead to index out of bounds crashes. This can be reproduced like this: * `echo \"test\"` * `ls -lah` until \"test\" is gone in history * `echo -e \"\\e[1000T\"` -> Content is incorrectly deleted from history * `echo \"test\"` * `ls -lah` until history is present * `sleep 3 && echo -e \"\\e[10T\"` * Scroll to top of history -> Content scrolls down, display offset is beyond its limit\n\n"}
{"project_id": "Alacritty", "bug_id": "144", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Regression in font rendering in 0.4.3 vs 0.4.2\n\nDescription:\n### System: OS: macOS 10.14.6 ### Settings: - `use_thin_strokes: false` - `defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO` There is already some discussion of this in the comments of #3804, but I'm opening a separate issue specifically for this issue. With `use_thin_strokes: false` set, font rendering appears to be worse in 0.4.3 than it was in 0.4.2: 0.4.2: 0.4.3: The change is quite subtle, but it definitely looks less smooth in 0.4.3. For what it's worth, this (0.4.3) looks similar to other font rendering on my system when `defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO` is not set (i.e. without subpixel anti-aliasing).\n\nDiscussion:\nCould you bisect the issue? And please make sure Alacritty is restarted after disabling font smoothing in the config. An educated guess would tell me that https://github.com/alacritty/alacritty/commit/77f2d6e853f1ad54e6dc844a811b78daeb463e76 is the only thing that could have possibly changed this. So that's probably a good place to check.\n---\nUsing the font Victor Mono Light on my machine (macOS 10.15.3) makes for a more dramatic difference: 0.4.2: ![Screen Shot 2020-06-03 at 13 10 19](https://user-images.githubusercontent.com/17414927/83672271-98c85080-a59b-11ea-8964-003569a5d65d.png) 0.4.3: ![Screen Shot 2020-06-03 at 13 05 04](https://user-images.githubusercontent.com/17414927/83672194-8221f980-a59b-11ea-9a93-a6e7f978ed15.png) I can do some bisecting starting with 77f2d6e853f1ad54e6dc844a811b78daeb463e76 real quick\n---\nLooks like a good guess, the regression first appears in 77f2d6e853f1ad54e6dc844a811b78daeb463e76. Font looks fine in its parent\n---\nCan you try to revert this specific change? https://github.com/alacritty/alacritty/commit/77f2d6e853f1ad54e6dc844a811b78daeb463e76#diff-91c8eb5607beecf6f1ff9718907e2df6\n---\nLooks like that does the trick! ~I'll open a quick PR with the revert~\n---\nThat would break emoji support on macOS unfortunately. We need to look for a different solution than just reverting it.\n---\nOh yes I see that was the point of the PR it was in. It does look _better_ than the screenshots in #1864, but not perfect: ![image](https://user-images.githubusercontent.com/17414927/83676460-50f7f800-a5a0-11ea-9c67-8a0e1027e9ef.png)\n---\nYeah, the transparent parts of an emoji will just always be black without this change.\n---\nNote that it might be easy to work around this by checking if the glyph is colored and setting the opacity of the fill color based on that. The `self.is_colored()` function should be available and is used later in the method anyways, so extracting that into a variable and checking it might just work out. Are you interested in trying to make this work @thornjad?\n---\nI'm interested in trying it out! I'm pretty busy for a few hours but will take a stab at it tonight\n---\nFWIW, with `use_thin_strokes: true`, I think fonts look significantly better in 0.4.3 than they did in 0.4.2. If you revert to the old behaviour, it would be great to have a setting that kept the current rendering method :)\n---\n> FWIW, with use_thin_strokes: true, I think fonts look significantly better in 0.4.3 than they did in 0.4.2. If you revert to the old behaviour, it would be great to have a setting that kept the current rendering method :) The goal is to have both. Obviously `use_thin_strokes` should still be working, while the little bug that affects all rendering methods should be resolved. So the rendering should be identical to setting `defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO` with `use_thin_strokes: true` on 0.4.2.\n---\nSo switching the background alpha based on `self.is_colored()` does appear to get everything we want for emoji transparency, plus text renders nicely!\n---\nDo you know of anything else I should check/test (besides tests and rustfmt) around this fix before opening a PR?\n---\nNope, should be all good."}
{"project_id": "Alacritty", "bug_id": "145", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: macOS font fallback\n\nDescription:\nAlacritty doesn't show certain UTF-8 characters, for example, like the Russian ruble sign `â‚½` iTerm on the left, Alacritty on the right Using default config settings macOS version 10.14.6\n\nDiscussion:\nWhatâ€™s your output of `locale` in alacritty?\n---\nOutput of `locale` in Alacritty: @kchibisov\n---\nYou seem to be using different fonts here. Does switching the Alacritty font to what you're using in iTerm fix this?\n---\nCurrent font in iTerm Updated alacritty config in `/Users/mota/.config/alacritty/alacritty.yml` Restarted Alacritty but some symbols still show up as blank\n---\nWould you mind launching `Alacritty` from iterm and retesting? This probably sounds a bit odd, but I need to check something.\n---\nSame problem when launching Alacritty from iTerm; see gif ![dXnQOwjp6I](https://user-images.githubusercontent.com/168240/64933111-4e7a2600-d7f8-11e9-8519-a537e6e339e4.gif)\n---\nCould you try the default macOS terminal? Does that behave like iTerm or Alacritty?\n---\nThe default macOS Terminal.app behaves like iTerm where the symbols are displayed as expected\n---\nI'm not sure about the close of this issue, but could you retest @miguelmota the latest master?\n---\nSince you're locale is already en_US.UTF-8, this is not a locale issue. So 7901b45 should not have closed this, thanks @kchibisov.\n---\nI built from master but still having the same problem where some characters don't show up. ![1588321363565_image_png](https://user-images.githubusercontent.com/168240/80792939-957c1800-8b4a-11ea-9bd6-26fd253e4c77.png)\n---\nThanks for one more testing. I guess it's related to a bit strange font fallbacks behavior on macOS, so you should manually add some fonts to a list, which OS is giving you for a font you've requested, so it seems like it's not fully covering them or something like that. However I'm not sure why missing glyph isn't showing, however when I was testing it, I didn't get missing glyph either.\n---\nHmm maybe the glyph isn't missing? This might sound strange, but usually when a glyph is missing a character is rendered that shows that it is. However in this case nothing is rendering. Usually the only scenario where nothing is rendered should be when a font actually renders the glyph as nothing. So maybe the problem isn't that there is no fallback font found that has this glyph, but the issue is that there is a font and it just doesn't render anything?\n---\n>This might sound strange, but usually when a glyph is missing a character is rendered that shows that it is. However in this case nothing is rendering. I know, but it's something I can repro quite easy with emojis and leaving only 1 font, which doesn't have them. Like emojis are not rendered at all, but missing glyph isn't presented. That could happen if our font backend is error out somewhere, so we're ending up with nothing in place."}
{"project_id": "Alacritty", "bug_id": "146", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Inconsistent locale when running from command line vs from dock\n\nDescription:\nWhich operating system does the issue occur on? Macos, Alacritty version 0.3.3, Swedish keyboard I installed Alacritty via homebrew If I start alacritty via the Icon in the dock/ Applications folder then the Ã¥Ã¤Ã¶ characters doesn't work, Ã¥ and Ã¤ does nothing and Ã¶ prints `(arg: 6)` however, if I open Alacritty by running `/Applications/Alacritty.app/Contents/MacOS/alacritty` in iTerm2, then those characters works just fine is env/dotfiles loaded differently or something?\n\nDiscussion:\n> is env/dotfiles loaded differently or something? @RichoDemus You can actually compare them by typing `env`, seems like locale problem. Also, could you share your `shell` section from `alacritty.yml`? On macOS your `shell` should have arg `--login` to work properly. It has this flag by default, but if you've changed it somehow, it can break things.\n---\nThanks 2 things: I can definitely see env differences, it seems like when I launch it from iterm it enherits some stuff from there (I see a bunch of iterm things) but also things like `LC_CTYPE=UTF-8` is missing when it doesn't work and `SHLVL=2` is 1 when it doesn't work and 2 when it works I did however try to just type `export SHLVL=2` and `export LC_CTYPE=UTF-8` but that didn't fix it I'm not entirely familiar with how the config works, I've copy-pasted the alacritty.yml file from the repo into `~/.config/alacritty/alacritty.yml` is that then the only file that config is read from or are there multiple? (and they kinda override each other) anyway, the whole shell section is commented out there, so I guess the `--login` thing should apply then\n---\n@RichoDemus `SHLVL` indicate how much shells you are in. So if you open terminal, then `echo $SHLVL` then `bash` and then `echo $SHLVL` the variables would be different ( `n` and `n + 1`). So, setting this one manually is probably a bad idea. `alacritty` can use only the one config at the time. However, you should ensure, that config in `~/.config/alacritty/alacritty.yml` is actually in use. You can do this by launching `/Applications/Alacritty.app/Contents/MacOS/alacritty --print-events` from `iterm` and searching for line `[INFO] Configuration loaded from` ( one of the first lines). How did you changed `LC_CTYPE`, just typing export or you've set in your shell configuration? You should probably set `LC_CTYPE` in your `SHELL` configuration file.\n---\nUsing `alacritty -v` instead of `--print-events` should usually be a better choice here since it produces a lot less output. Generally this really does seem like a login shell issue, so it might be a good idea to uncomment the shell section in the used config and adding the `--login` parameter manually.\n---\nThanks for the responses! `SHLVL`: noted, thanks `-v`: I tried starting with the -v flag and it loads the correct conf. however, I added the flag when I started it from the command-line (and thats where Ã¥Ã¤Ã¶ behaves properly) I don't know how I would add a flag when starting it by clicking the icon `-LC_TYPE`: I added that to my `.bash_profile` (and it shows up in env), but no difference `--login `: I tried uncommeting that but there's no difference.\n---\nI'd assume that more than just `LC_CTYPE` is different, right? Could you compare the `locale` output on the two different Alacritty instances?\n---\nThey're both\n---\nThat looks like a really odd locale. I'd expect all of them to be `en_US.UTF-8` or similar (depending on your system language). Other macOS locale issues seem to indicate the same thing. Do you have any weird language setup in your OS?\n---\nI'm not very good with locales, but I don't think I have a weird language setup. I have a macbook pro with a built in swedish keyboard, all buttons work exactly as expected in all other programs like browsers, iTerm2, intellij, including alacritty when run from the command-line I found this about the \"C\": https://unix.stackexchange.com/questions/87745/what-does-lc-all-c-do setting `LC_ALL` explicitly to `sv_SE.UTF-8` resulting in: makes no difference\n---\nI'd like to backtrack a few steps to the original issue of being able to launch just fine from a different terminal, but not from the application menu. Clearly there needs to be some difference in environment, otherwise this wouldn't happen. The most likely to be at fault for this is still the locale. If other stuff in the environment variables is different, please let me know. So the question really is about why the locale isn't set with the login shell and why changing the locale doesn't make things work. Instead of `export`ing the locale, I think it might be worth a try to set it in the `env` section of the Alacritty config. That way it should be set for the Alacritty process and the shell both. Otherwise it would just be set for the shell. I think both mirroring the iterm locale and setting everything to `sv_SE.UTF-8` should be worth a shot.\n---\nThere are some differences but I don't think they're related, the one that works has the following extras: I believe those are things inherited by iterm Alright! after adding to my alacritty yml it now works properly! ðŸ’¯ Thank you so much for you help and patience! setting it to `\"C\"` has the same faulty behaviour as before I am fine with that solution, but why could it be that I need to set it in my yml and not just in my bash profile?\n---\n> I am fine with that solution, but why could it be that I need to set it in my yml and not just in my bash profile? That almost seems like your systems language/locale is a bit messed up. I'd assume the problem is not with the shell rendering incorrect characters, but rather with Alacritty being unable to understand your keycodes. You could try changing your OS language settings and changing them back to what they were then, in hope that this would update it.\n---\nChanging locale back and forth did nothing But I was reminded that I actually have a weird setup (sorry, didn't cross my mind) I have a swedish keyboard with swedish keyboard mappings. but my OS is in english and all my programs are in english (including `man` and `git` and stuff, so something with `locale` is english), so I guess my locale is a bit of a hybrid\n---\nI'm not sure if there's anything Alacritty can do when your locale isn't set appropriately. Though I'm not sure where iTerm is getting its locale from.\n---\nhow do you mean appropriately? I do think that having a different language for the keyboard and the OS/apps is a valid use case, this is the first time I've run into problems or are you more referring to that it seems like macos isn't reporting it to alacritty properly?\n---\n> or are you more referring to that it seems like macos isn't reporting it to alacritty properly? I am. It seems like iTerm has additional locale settings set, where Alacritty does not. However Alacritty does spawn a login shell and should read the same environment that other macOS applications do. So the question is why iTerm gets that info and Alacritty doesn't. I'd say this is odd for macOS to do, in general I've never seen any locale issue on systems other than macOS. But I can't guarantee you that this is a macOS issue.\n---\nOk, let me know if there's anything I can do to help troubleshoot it, otherwise you can close this :) and thanks again\n---\nI've reported the issue upstream at https://github.com/rust-windowing/winit/issues/943, maybe they have an idea at what could be going on.\n---\nI'm seeing the same problem with slight differences. I use a font with extra powerline characters, so that's how I noticed it, but can't see Scandinavian characters either. (I'm Norwegian) However, I have the exact same environment settings in both iTerm2 and Alacritty, and when launching Alacritty from Alfred and from iTerm2. They're en_US.UTF-8 as they should be. I have this new variable though: when I launch my shell with Tmux configured to automatically launch, it fails to show the extended characters, but when I comment that out, everything is fine. I can then manually launch tmux, and everything is fine. This also happens when I set tmux as my `shell program` in alacritty.yml\n---\n@tofagerl You should pass `--login` flag to your shell (`alacritty` doing this by default). This is how your shell section in `alacritty.yml` should look like. Edit: `By default` means when you haven't set your shell explicetly in a config file."}
{"project_id": "Alacritty", "bug_id": "147", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Reflow not wrapping cursor correctly\n\nDescription:\nWhen the grid width is changed and content reflows, the cursor should reflow with the content. This is necessary to make sure that writes will be correct when occuring during a resize. Repro: * Run `echo -n \"[LONG LINE]\" && sleep 10 && echo -n \"xxx\"` * Shrink terminal to wrap the long line, before sleep is done -> The `xxx` is written at the wrong location, it should be right after `[LONG LINE]`\n\nDiscussion:\nyeah, seems like cursor position is indeed broken. Just reflowing during the following command results in 'spaces' between output, however it should be contiguous line."}
{"project_id": "Alacritty", "bug_id": "148", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Mouse click positions are not accurate until after the mouse moves in the focused window\n\nDescription:\nMac OS 10.14.4 Alacritty v0.3.2 Repro: This is easiest to reproduce (and happens pretty commonly) when using a trackpad because that makes it easier to send a click without any tiny movements of the pointer. 1) Open a file in an editor with mouse support (for example vim with mouse enabled). 2) Position the mouse pointer over some line in that file and click. The cursor should move the that location. 3) Switch focus to some other applicaiton (not alacritty) on your computer. 4) Move the mouse to a position over the alacritty window when it **_does not_** have focus. 5) Click without moving the mouse. The alacritty window should now have focus. 6) Click again without moving the mouse. The click is triggered where the mouse was positioned before the alacritty window lost focus. As soon as you move the mouse with the alacritty window focused the clicks will now appear in the correct position. This is easy to observe in text editors. For example, double clicks typically highlight the entire symbol your mouse is currently over. You can see the symbol under the old location where your mouse was get highlighted. I have recreated the same scenarios with other utilities as well. tmux with mouse mode on will show the same problem when switching focus away and back to the alacritty window and clicking without moving the mouse. Pane selection will not be accurate until you move the mouse over a focused alacritty window.\n\nDiscussion:\nCan this be reproduced without any application running inside of Alacritty and without mouse mode enabled? So just by starting a selection?\n---\nYes, it can be reproduced with a double click that selects text. Mouse clicks are triggered at the position where the pointer was before the alacritty window loses and regains focus.\n---\nJust to make sure, when running `alacritty --print-events`, are new events actually printed when moving the mouse over the window while it is not focused?\n---\nNo events are printed while the alacritty window does not have focus. Below is a sample of the output. I was moving the mouse over the window between the entries for the `Focused(false)` and `Focused(true)` events.\n---\nThanks for testing, that sounds like it's because of our dependency winit not handling this correctly on macOS. Which should also mean that it works on other platforms (I'm not able to reproduce on Linux). Could you confirm that this is the case by running `cargo run --example window` in the https://github.com/rust-windowing/glutin example? That should also not show any events while the window is not focused, if it really is because of our dependency.\n---\nSorry, I don't currently have a rust development environment setup on this computer. If you know someone else that does and could test they might be able to get you an answer faster.\n---\nTried it but I'm getting this when running it:\n---\nReported upstream in https://github.com/rust-windowing/winit/issues/942."}
{"project_id": "Alacritty", "bug_id": "149", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Windows: startup_mode: Maximized no longer works\n\nDescription:\nSystem: Windows 10, Alacritty 0.3.3. Using `startup_mode: Maximized` has the same effect as `startup_mode: Windowed`. However, `Fullscreen` works fine. This seems to be a regression compared to before.\n\nDiscussion:\nWhen you say regression, where did it regress from? I'd assume you mean 0.3.2? Generally it would be nice to have a specific commit hash which broke it, but I'd assume that was a winit/glutin update. So before testing that, the #2438 PR should probably be tested, which updates Alacritty to the latest version of winit.\n---\nI am able to replicate this, but different behavior I think. If I use `startup_mode: Maximized` the window starts at the top left of my screen and \"thinks\" it is maximized. (i.e it displays the \"Restore\" icon vs Maximize icon), example: https://i.imgur.com/Jc4CWw0.png If I restore it and maximize again, it then maximizes correctly. Also, I tested several older versions of Alacrity, `Maximized` does nothing for me before v0.3.3-rc1. All builds before that just start the window normally. All builds after cause the behavior mentioned. I've also tested the #2438 PR, it behaves identically to the most current release (0.3.3)\n---\nI confirm @JDTX comment: it does not exactly behaves like `Windowed` like I said, but like JDTX described. I can only test further after the weekend for the previous working version (the option used to be called `start_maximized` then).\n---\nOkay, but then it's not a regression. The following patch might fix this, could someone try it?\n---\n@chrisduerr Your patch had some issues, There was an extra \")\" character from \"any\" that wasn't removed, I removed the extra \")\" and got another compilation error: I removed `if window.is_x11()`, it compiled, but `startup_mode: Maximized` still behaves the same.\n---\nIt would be nice if someone could test the examples of https://github.com/rust-windowing/glutin. The normal window example can be run with `cargo run --example window`, though the following diff needs to be applied first: If that doesn't work, this needs to be reported to winit.\n---\n@chrisduerr The example had the same results, I've reported the issue upstream w/ winit. https://github.com/rust-windowing/winit/issues/1009\n---\nSeems like upstream is fixed now with https://github.com/rust-windowing/winit/pull/1013"}
{"project_id": "Alacritty", "bug_id": "150", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Copy/Paste failure under wayland/KDE\n\nDescription:\nWhen run under wayland with kde/plasma as the compositor, copy/paste using ctrl-shift-{C,V} does not work. This is a regression from 0.4.3. ### System OS: Linux (Fedora 32) Version tested: 92ea355eeea538bd868eaebdc03469630aba281c Works in: c723247c26d00e26d645cb97fa7c73b65260aef3 Logs are from opening a terminal; selecting a word from the command prompt text; hitting ctrl-shift-C, ctrl-shift-V; then ctrl-c if it worked; then ctrl-D to exit. ## Broken ## Working\n\nDiscussion:\nCould you bisect this?\n---\nThere's no need for bisect.\n---\nI've fixed the issue upstream, so once https://github.com/smithay/client-toolkit will be updated, and then `smithay-clipboard` will be updated, I'll pull fix into `alacritty`.\n---\ncopy and past in current release also fails on Ubuntu 18.04\n---\n>copy and past in current release also fails on Ubuntu 18.04 That's a different issue, the issue here isn't presented in any release. On Ubuntu 18.04 (GNOME Wayland) middle click paste is not working, since it's not supported by GNOME Wayland on Ubuntu you're using. Only `Ctrl + Shift + C`/`Ctrl + Shift + V` should work."}
{"project_id": "Alacritty", "bug_id": "151", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Fix goto match end in search\n\nDescription:\nCurrently the SearchEndNext and SearchEndPrevious match act exactly like the SearchNext and SearchPrevious action, however this is not how vim works. In vim, regardless of direction the `gN` action always jumps to the next match start to the left of the cursor, while the `gn` action always jumps to the next search end to the right of the cursor. While both approaches might seem reasonable at first, vim's approach has a significant advantage wrt predictability and automation of the movement. By always knowing which direction the motion goes to, this allows for mappings that predictably navigate inside the current match regardless of the global search direction. So deleting until the end of the match would always be `dgn` for example, regardless in which direction the user has jumped to it. So to improve the ability to compose this binding and make it easier to use for vim users, we should emulate vim's behavior rather than sticking closer to the SearchNext and SearchPrevious bindings.\n\n"}
{"project_id": "Alacritty", "bug_id": "152", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alert user when specified font cannot be found\n\nDescription:\nWhen an unknown font is specified, the Alacritty window will not open, and it doesn't create any error boxes. For example, when this is in my `alacritty.yml`: and I don't have Fira Code installed, Alacritty will simply not open. Running Alacritty from the command line with the `-v` flag reveals why: It works fine once Fira Code is installed, but in the case where you copy over a config file to a new computer (where an uninstalled font is specified in the config), it can be difficult to diagnose why Alacritty doesn't open - I for example didn't know what the issue was until I found out that I could run the executable with the `-v` flag. It's very confusing if nothing happens when Alacritty is run (without flags). It would be helpful to new users if Alacritty either - produced an error window specifying the issue or - reverted to the default font and showed the error in the bottom like it does with other errors. ### System OS: Windows Version: `alacritty 0.4.3 (c723247)` Windows: ConPTY\n\nDiscussion:\n> I for example didn't know what the issue was until I found out that I could run the executable with the -v flag. Are you sure that is the case? Errors are logged regardless of command line flags and as you can see, the unrecoverable error also doesn't have a logging level in front of it, so it wouldn't make sense that it only becomes visible with `-v`.\n---\nRegardless of logging, we should make our best attempt to at least startup though. So I think it would be a worthwhile change to try again if the default font does not manage to load successfully.\n---\nCould you check if https://github.com/alacritty/alacritty/pull/3945 fixes this problem for you? It should fallback to the default font and print an error if it could not be loaded.\n---\nApologies for the late reply. I have built and run #3945, and it seems to work just fine as per the screenshot: ![image](https://user-images.githubusercontent.com/16561050/87208901-6e8f4e80-c310-11ea-9ac6-1389f10cd01d.png) I think this is a very neat addition that should make the issue much clearer to the user! Thanks for the impressively quick reply and fix. :)"}
{"project_id": "Alacritty", "bug_id": "153", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Crash during search with too narrow window\n\nDescription:\nIf the window's width is smaller than the search bar's label length and the search regex is changed, Alacritty will crash.\n\n"}
{"project_id": "Alacritty", "bug_id": "154", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Wrapping cursor causes crash\n\nDescription:\n1. Generate some output (e.g. run `ls -hal`) 2. Input spaces until the cursor wraps to the next line 3. Increase the window width until the cursor no longer wraps to the next line 4. Reduce window width until cursor wraps again 5. Alacritty crashes This could be related to #3910. ### System OS: Linux Version: alacritty 0.5.0-dev (18cf806a) Linux: X11, dwm (no compositor) ### Logs `alacritty -vv` yields:\n\nDiscussion:\n> Input spaces until the cursor wraps to the next line Note that this doesn't seem to be necessary. Just inputting a bunch of spaces without moving it to the next line and then shrinking the window size seems sufficient.\n---\nThis should be fixed in #3966. If you're interested in testing it, please let me know if it works.\n---\nWorks fine now. Thanks for the quick fix."}
{"project_id": "Alacritty", "bug_id": "155", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Reflow deleting history\n\nDescription:\nWhen holding space until the cursor is on the next line of the prompt, then growing the shell width, content above the cursor will be deleted and the cursor is moved upwards. Repro: * run `bash` or `zsh` (only ones tested, others probably also affected) * `ls -lah` to write some content * space until on the next line * grow terminal width -> The `ls` content is deleted\n\n"}
{"project_id": "Alacritty", "bug_id": "156", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: hintfull setting is not respected\n\nDescription:\nI've configured hintfull in fontconfig: This is recognized by alacritty. I've not disabled antialiasing for any font. Therefore alacritty uses the following code path: https://github.com/alacritty/alacritty/blob/fde2424b398dadd2310686b365041189decd1d63/font/src/ft/mod.rs#L491 hintfull is not applied in this case. Disabling antialiasing via fontconfig makes the font ragged in alacritty and other programs and is therefore not an option. This problem is specific to alacritty. Hinting works as expected in all other programs I'm using. The following patch fixes the problem: Current master with antialiasing enabled: ![2020-03-30-094447_412x159_scrot](https://user-images.githubusercontent.com/1882250/77887817-87955780-726b-11ea-82f6-ce6df9e3588d.png) Current master with the patch applied and antialiasing enabled: ![2020-03-30-094529_371x156_scrot](https://user-images.githubusercontent.com/1882250/77887820-882dee00-726b-11ea-8380-a058be7c5f36.png) Current master with antialiasing disabled: ![2020-03-30-094617_345x151_scrot](https://user-images.githubusercontent.com/1882250/77887821-882dee00-726b-11ea-9113-ccf5c1733ce2.png)\n\nDiscussion:\nAll 3 screenshots are different for me tbh. The following patch doesn't make any sense, since AA shouldn't be turned off. I feel like our FreeType loading flags are not optimal in some cases.\n---\n>All 3 screenshots are different for me tbh. Yes that is the point. The second screenshot (Current master with the patch applied and antialiasing enabled) is the desired result. This is how fonts are rendered in all other programs and how I want them to be rendered. >The following patch doesn't make any sense, since AA shouldn't be turned off. Of course I'm not saying that this patch should be applied. It merely shows that alacritty's decision to use the antialiasing configuration in fontconfig to make hinting decisions leads to inconsistent results.\n---\n>The following patch doesn't make any sense, since AA shouldn't be turned off. And of course AA **isn't** turned off even with the patch applied as you can see from my screenshots.\n---\nFWIW each font on my system, except bitmap/emoji fonts require AA according to Fontconfig, and alacritty is just following it. However I really feel like our loading flags are a bit messed up or we're not using AA correctly.\n---\nSmall contribution to debugging this: I took some screenshots comparing Alacritty on hintfull against urxvt on every level of hinting. Antialiasing is on in each screenshot, the font is DejaVu Sans Mono, size 12 on urxvt, 9.5 on Alacritty (I don't know why those settings differ and how this factors in the issue here, but 9.5 seems to give me the same font size as my usual urxvt does). Renderer | rendered ------------ | ------------ Alacritty, hintfull | ![alacritty_hintfull](https://user-images.githubusercontent.com/2761682/86283685-bbbd4300-bbe1-11ea-8372-11065dd22139.png) urxvt, hintfull | ![urxvt_hintfull](https://user-images.githubusercontent.com/2761682/86283686-bc55d980-bbe1-11ea-8a9e-1170c307cf27.png) urxvt, hintmedium | ![urxvt_hintmedium](https://user-images.githubusercontent.com/2761682/86283689-bcee7000-bbe1-11ea-94e5-75cd55a18980.png) urxvt, hintslight | ![urxvt_hintslight](https://user-images.githubusercontent.com/2761682/86283693-be1f9d00-bbe1-11ea-9065-af10e79bd42f.png) urxvt, hintnone | ![urxvt_hintnone](https://user-images.githubusercontent.com/2761682/86283692-bd870680-bbe1-11ea-8f04-91c76ab279e8.png) The difference is small, but noticeable. I also notice that Alacritty's render on hintfull doesn't match with any hint level with urxvt. I tried to see how the patch proposed in the first message of this issue changes the rendering, the code seems to have changed quite a bit since it was posted and applying it does not change anything (to my knowledge) to the rendering. I also tried to compare the load flags actually used on my setup in both Alacritty and urxvt on hintfull, they were the same (`0x0` in both case, the default). This is just my particular setup but load flags don't seem to be a problem. For reference, some config files on my setup (archlinux, last git version of urxvt and Alacritty): .Xresources .alacritty.yml .fonts.conf\n---\nThe previous patch is certainly not sufficient. It still has the desired effect on my laptop but does nothing on my desktop. Probably because I'm setting rgba to none on my desktop. I'm now using the following patch: With patch: ![2020-07-01-230001_310x66_scrot](https://user-images.githubusercontent.com/1882250/86291048-ba464780-bbee-11ea-8eb3-977dca5e1b4b.png) Without patch: ![2020-07-01-230032_310x66_scrot](https://user-images.githubusercontent.com/1882250/86291061-bf0afb80-bbee-11ea-87af-4c0c9954a543.png)\n---\nUrxvt uses xft for font rendering, and as far as I can tell, the load flags are very similar to Alacritty's. Urxvt maps both _slight_ and _medium_ to `FT_LOAD_TARGET_LIGHT`. I believe this is different from Alacritty. For _full_, it uses `FT_LOAD_TARGET_DEFAULT`, unless rgba has been enabled, in which case it uses one of the `FT_LOAD_TARGET_LCD` modes. This matches Alacritty, I think? All the above assuming antialiasing **is** enabled. In addition to this, it sets the `FT_LOAD_NO_HINTING` flag for _hintnone_. See https://github.com/freedesktop/xorg-libXft/blob/c418dc7594f98359ae10815f62ee3efc0a511cf8/src/xftfreetype.c#L568 As for the sharpened variant seen in the images posted in https://github.com/alacritty/alacritty/issues/3534#issuecomment-652644842, the only way I get something like that _anywhere_ is if I do `export FREETYPE_PROPERTIES=\"truetype:interpreter-version=35\"`. I.e. use the legacy freetype interpreter (the default up to FreeType 2.6).\n---\n>As for the sharpened variant seen in the images posted in #3534 (comment), the only way I get something like that anywhere is if I do `export FREETYPE_PROPERTIES=\"truetype:interpreter-version=35\"` That's in fact what I'm using. >I.e. use the legacy freetype interpreter (the default up to FreeType 2.6). \"legacy\" seems a bit ambiguous. interpreter-version=35 is a fully supported setting of freetype.\n---\n>For full, it uses FT_LOAD_TARGET_DEFAULT, unless rgba has been enabled, in which case it uses one of the FT_LOAD_TARGET_LCD modes. This matches Alacritty, I think? ![2020-07-03-185439_265x58_scrot](https://user-images.githubusercontent.com/1882250/86487576-bc2f1880-bd5e-11ea-95de-042f7f16669a.png) This is how urxvt renders the same font. It seems much closer to the patched alacritty version than the unpatched one.\n---\nIf I were to guess, I'd say that the `FREETYPE_PROPERTIES` environment variable is \"lost\" in whatever the context is when the freetype library is loaded. For what it is worth: I can reproduce this, in the sense that what urxvt renders is _clearly_ different depending on the setting of `FREETYPE_PROPERTIES` (and yes, looks pretty much like the screenshot in https://github.com/alacritty/alacritty/issues/3534#issuecomment-653622778 - not sure if I use the same font though). But what Alacritty renders looks identical, regardless of what `FREETYPE_PROPERTIES` is set to.\n---\n@kchibisov I think this is a freetype-rs bug. Freetype pulls in the `FREETYPE_PROPERTIES` variable in [`FT_Set_Default_Properties()`](https://github.com/aseprite/freetype2/blob/fbbcf50367403a6316a013b51690071198962920/src/base/ftinit.c#L111). I do not see **any** calls to this function, or to `FT_Init_Freetype()` (from which it is called) in freetype-rs.\n---\nFunnily enough, the FT_Set_Default_Properties API was added to freetype in 2017 because I reported to the freetype developers that hinting was broken in chromium: https://savannah.nongnu.org/bugs/?49187. Like freetype-rs, chromium also uses FT_New_Library instead of FT_Init_Freetype (via skia.) After calling FT_New_Library, skia calls FT_Set_Default_Properties. Whether freetype-rs should call FT_Set_Default_Properties for you is unclear. But it should certainly expose the API.\n---\n[offtopic] @mahkoh the \"new\" interpreter is what eventually lead me to use bitmap fonts whenever possible :laughing: [/offtopic]\n---\n@dnkl For some reason I was under the impression that alacritty didn't support bitmap fonts. Maybe this was a problem in the very early days of alacritty. In urxvt I'm using terminus.\n---\n@mahkoh I don't use Alacritty as my daily driver anymore, but yes, it does support bitmap fonts."}
{"project_id": "Alacritty", "bug_id": "157", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Cursor reflow inserting whitespace\n\nDescription:\nWhen swiftly resizing the window while output is currently being printed, some whitespace is occasionally inserted incorrectly. It appears there is no data getting deleted though. ![tmp](https://user-images.githubusercontent.com/8886672/87368412-2325ac00-c56d-11ea-9d1d-3cafc7daf81c.png)\n\n"}
{"project_id": "Alacritty", "bug_id": "158", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Message bar text unreadable\n\nDescription:\nMessage bar has harcoded yellow or red background but foreground color is from `colors.primary.background`. It is easy to see that it cannot work both with light or dark themes. I think either message barâ€™s background color could be get from `colors.normal.{yellow,red}` or use also hardcoded (black) foreground color for messages. ### System Version: `alacritty 0.5.0`\n\nDiscussion:\nIt seems like it got accidentally changed during some refactoring. It always was black on yellow/red.\n---\nI don't really like this change as well tbqh. I'd rather use foreground color in my case, since it's a bit more readable. If anything, I'd use foreground color over red/yellow colors from the config, but that's it. ![picture](https://user-images.githubusercontent.com/27620401/90116669-7a7e8e00-dd5e-11ea-92ee-2f68aa0d30e8.png)\n---\nI think this should be solved by pulling the yellow/red color from the user's theme, to keep things more consistent."}
{"project_id": "Alacritty", "bug_id": "159", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Autoscrolling should be triggered from selection expansion\n\nDescription:\nIf you try to expand selection with rmb and move to top/bottom of the viewport it's not triggering auto scrolling, like it does with lmb.\n\n"}
{"project_id": "Alacritty", "bug_id": "160", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Multiline URLs do not highlight correctly\n\nDescription:\nIt seems like some commit in the past has broken URL highlighting for URLs that span over multiple lines. ![test](https://user-images.githubusercontent.com/8886672/91643066-9ef58e00-ea1f-11ea-82bb-0e14be28ab39.png) The URL still seems to be opened correctly, the issue is just with highlighting.\n\nDiscussion:\nThis regression was introduced in b904207b1979bb86f86c2a7db1720ce04571508a."}
{"project_id": "Alacritty", "bug_id": "161", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Crash when try to select message bar.\n\nDescription:\nTo repro: make alacritty render message bar, then start selecting, and move your mouse over it, alacritty should crash.\n\nDiscussion:\nIt doesn't crash for me? That would also be a regression.\n---\nI'm also unable to make this crash, perhaps I'm not trying hard enough.\n---\nThe problem's actually not with moving it above the message bar during selection, but below it. Leaving the window while the mouse is held down. I'm not entirely sure if it crashes once you're inside the padding or you've left the window, but that should make the repro pretty easy."}
{"project_id": "Alacritty", "bug_id": "162", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Index out of bounds crash in copy-mode-vi in tmux\n\nDescription:\nRun tmux in alacritty, go to copy-mode-vi, and keep pressing `k` key to move cursor up. It will crash. ### System OS: macOS Version: alacritty 0.5.0 (a6681e3) Tmux: tmux 3.1b ### Logs Crashes: STDERR, STDOUT\n\nDiscussion:\nCould you give some more detailed instructions? I cannot reproduce this. If you compile Alacritty from source it should also come with a more useful backtrace, which would help a lot.\n---\nCould you also share alacritty and tmux configurations?\n---\nHere's alacritty configuration And tmux configuration\n---\nMore information added. I can not reproduce it locally. I run tmux in alacritty, then ssh into a server, run GNU screen in remote server, press `ctrl+a [` goto copy mode, then keep pressing `k` key, finally it crash. I used the binary version alacritty downloaded from github release page.\n---\n> I used the binary version alacritty downloaded from github release page. Are you able to compile it from source? That would be very useful.\n---\nFollow the instruction [here](https://github.com/alacritty/alacritty/blob/master/INSTALL.md), download alacritty-0.5.0 source code, and then run `make app` to compile alacritty. Here's the backtrace. Looks like the same as I've provided before. What can I do to produce more useful backtrace?\n---\nYou'd want to just run it with `cargo build`, not by making the app.\n---\nYou may also do `cargo run`, so it'll spawn alacritty.\n---\nHere's the `cargo run` output\n---\nShould be fixed with https://github.com/alacritty/alacritty/pull/4115, thanks."}
{"project_id": "Alacritty", "bug_id": "163", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Selection selects by 2 chars after catting file with unicode\n\nDescription:\nIf you cat a file like https://github.com/alacritty/vtebench/blob/master/benchmarks/unicode/symbols scroll to a point where you catted it, and try to select something, selection will always select by 2 chars. ![record](https://user-images.githubusercontent.com/27620401/94349182-00bf0d00-004b-11eb-8e8d-dad8dd983f76.gif)\n\nDiscussion:\nThe regression was introduced in 6832b86aa"}
{"project_id": "Alacritty", "bug_id": "164", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Can't place window on secondary monitor since 0.5.0\n\nDescription:\n### System OS: Windows Version: alacritty 0.5.0 (a6681e3) ### Problem Up until now I was using: to place the window on a secondary monitor located to the left of the primary one. Since 0.5.0 the window is always placed as if the `x` value was `0`.\n\nDiscussion:\nDoes this work with positive X coordinates? And are you capable of pinpointing which commit broke this?\n---\nYes, positive values work as expected. No idea about the commit, don't follow the development that closely. To paint the picture a bit better, this is my setup: ![image](https://user-images.githubusercontent.com/538801/89111803-62536880-d45a-11ea-87a6-471bd70a8495.png) Number **2** is primary, so 0x0 coordinates are in its left top corner, and I'm trying to use `x: -1920` to place the window to the left edge of the monitor **1**.\n---\n> No idea about the commit, don't follow the development that closely. Can you share the version? Did it work correctly in 0.4.3?\n---\nReported upstream in https://github.com/rust-windowing/winit/issues/1640.\n---\nThis looks like an Alacritty bug, not a Winit bug. Alacritty's `set_outer_position` wrapper takes a `PhysicalPosition ` instead of a `PhysicalPosition `, which discards any negative coordinates: https://github.com/alacritty/alacritty/blob/9167461eb35687872a7670b2e7105a56244f7a48/alacritty/src/window.rs#L337-L339 Winit's `set_outer_position` function is generic over the position type, so if Alacritty passes it a type with negative numbers it should handle them fine.\n---\nYou're absolutely right. Though this means that it **did not** work in 0.4.3 and was not introduced recently. Thanks for spotting that @Osspial.\n---\nThis should be fixed in https://github.com/alacritty/alacritty/pull/4067 @darsain, please test this if you're able."}
{"project_id": "Alacritty", "bug_id": "165", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Message bar text shouldn't be computed based on byte length\n\nDescription:\nThere are some string length checks for the message bar which use the byte length (see [here](https://github.com/alacritty/alacritty/blob/62c300c14ce7a96373e0094763e9fd035b6b9b6d/alacritty/src/display.rs#L419)). Generally I don't think unicode and fullwidth characters have been considered much for the message bar. However since it's possible for user config to show up inside the message bar, it's possible to have these unicode symbols present here.\n\nDiscussion:\nHi, I would like to help with this issue. I'll post a pull request shortly!"}
{"project_id": "Alacritty", "bug_id": "166", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crash when font: x: #someLargeNegativeNumber\n\nDescription:\nAlacritty crashes when I set x offset of the font a large negative number like -10. ### System OS: Linux Version: 0.5.0 Linux/BSD: Manjaro MATE ### Logs Crashes: SIGABRT Font/Terminal size: Fullscreen, no decorations, Fira NERD Font:11, x:-10(yes), y:0 Keyboard and bindings: `alacritty --print-events` Created log file at \"/tmp/Alacritty-80782.log\" [2020-10-29 19:54:49.419330298] [INFO] Welcome to Alacritty [2020-10-29 19:54:49.419424188] [INFO] Configuration loaded from \"/home/ayb/.config/alacritty/alacritty.yml\" [2020-10-29 19:54:49.514412960] [INFO] Device pixel ratio: 1.001312255859375 [2020-10-29 19:54:49.520361420] [INFO] Initializing glyph cache... [2020-10-29 19:54:49.576928628] [INFO] ... finished initializing glyph cache in 0.056511375s [2020-10-29 19:54:49.576955261] [INFO] Cell Size: 1 x 18 [2020-10-29 19:54:49.576960889] [INFO] Padding: 0 x 0 [2020-10-29 19:54:49.576968556] [INFO] Width: 800, Height: 600 [2020-10-29 19:54:49.581499131] [INFO] PTY dimensions: Line(33) x Column(800) [2020-10-29 19:54:49.603094211] [INFO] Initialisation complete [2020-10-29 19:54:49.603125127] [INFO] glutin event: NewEvents(Init) [2020-10-29 19:54:49.609036592] [INFO] glutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(18))), event: Key(KeyboardInput { scancode: 28, state: Released, virtual_keycode: Some(Return), modifiers: (empty) }) } [2020-10-29 19:54:49.609229717] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: Resized(PhysicalSize { width: 800, height: 600 }) } [2020-10-29 19:54:49.609241208] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: Resized(PhysicalSize { width: 1920, height: 1028 }) } [2020-10-29 19:54:49.609315672] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: CursorEntered { device_id: DeviceId(X(DeviceId(2))) } } [2020-10-29 19:54:49.609342122] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: CursorMoved { device_id: DeviceId(X(DeviceId(2))), position: PhysicalPosition { x: 913.0, y: 659.0 }, modifiers: (empty) } } [2020-10-29 19:54:49.609353158] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: Focused(true) } [2020-10-29 19:54:49.609358212] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: CursorMoved { device_id: DeviceId(X(DeviceId(2))), position: PhysicalPosition { x: 913.0, y: 659.0 }, modifiers: (empty) } } [2020-10-29 19:54:49.609384215] [INFO] glutin event: MainEventsCleared [2020-10-29 19:54:49.609390052] [INFO] glutin event: RedrawRequested(WindowId(X(WindowId(58720258)))) [2020-10-29 19:54:49.609393898] [INFO] glutin event: RedrawEventsCleared [2020-10-29 19:54:49.623089649] [INFO] Width: 1920, Height: 1028\n\n"}
{"project_id": "Alacritty", "bug_id": "167", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: thread 'main' panicked at 'failed to read wayland events: Invalid argument (os error 22)'\n\nDescription:\nAlacritty randomly crashes with this message after some time of normal work. It happens when I do not use it and it's even not on my current workspace. It crashes with whatever application was running in it. ### System OS: Linux Version: alacritty 0.5.0 Linux/BSD: Wayland, sway ### Logs Last lines of log from `RUST_BACKTRACE=full WAYLAND_DEBUG=1 alacritty`:\n\nDiscussion:\nFor what it's worth, I have the same issue starting with Alacritty's update to 0.5.0. The stack trace is almost identical, but maybe there is an informative difference. OS: Arch Linux (2020-08-13) Version: 0.5.0 DE/WM: Sway (Wayland)\n---\n>For what it's worth, I have the same issue starting with Alacritty's update to 0.5.0. The stack trace is almost identical, but maybe there is an informative difference. I'm not sure how are you determining stacktraces without debug symbols. Also, could someone include **full** log of `WAYLAND_DEBUG=1` and stacktrace with debug symbols.\n---\n>Also, could someone include full log of WAYLAND_DEBUG=1 It would be way too long, because there may be hours before the crash occurs. >and stacktrace with debug symbols. I don't know how to enable building the debug symbols for rust in Gentoo.\n---\nhttps://github.com/Smithay/client-toolkit/pull/140 may be related if you're running out of FDs on the keyboard mapping change. Can't tell otherwise without better logs.\n---\n@danieldg yeah, that's a good call, I guess in my case I have a situation where sway was leaking and alacritty is also leaking in a smithay-clipboard. So with recent patches to sway it no longer leaks, however alacritty still does via it.\n---\nThe patch was send https://github.com/Smithay/smithay-clipboard/pull/24 upstream and it'll be included in `0.5.1` release."}
{"project_id": "Alacritty", "bug_id": "168", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Crash when releasing the left mouse button during a selection while the pointer is outside of the alacritty window (Wayland)\n\nDescription:\nI've noticed an issue, under Wayland/[Hikari](https://hikari.acmelabs.space/), when I make a selection with the intention of copying it to the clipboard, and release the left mouse button while the mouse pointer is outside of the alacritty window, that once I return the mouse pointer back to the alacritty window, it results in a crash. I did not have this issue with 0.4.2 ### System OS: Debian Buster 10.5 Version: alacritty 0.5.0 Linux/BSD: Hikari wayland compositor ### Logs\n\n"}
{"project_id": "Alacritty", "bug_id": "169", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Glyphs sometimes cut off (need to draw background in single pass)\n\nDescription:\nI'm getting a visual glitch which causes the right half of certain characters to be missing. Restarting alacritty fixes it. It happens when working with han characters, which are double width. I haven't been able to figure out the exact situation when it occurs. It seems to occur most often after displaying a lot of characters, so perhaps it's due to a cache getting filled up. In this image, the first han character on the screen is okay, and the last three are truncated. ![half-characters](https://user-images.githubusercontent.com/1945/30730024-a89c2482-9f18-11e7-95e1-e6aec2e34d14.png)\n\nDiscussion:\nI believe this is due to us not drawing the entire background in a single pass. When the first glyph cache gets filled up, Alacritty starts batching draw calls by texture. This is supported by what you've described > occur most often after displaying a lot of characters and > Restarting alacritty fixes it I'm updating the title to reflect the required action here."}
{"project_id": "Alacritty", "bug_id": "170", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Unable to launch alacritty with Fullscreen startup mode on Wayland\n\nDescription:\nWhich operating system does the issue occur on? Arch Linux If on linux, are you using X11 or Wayland? Wayland Logs?\n\nDiscussion:\nAre you using an nvidia GPU? To get a useful backtrace it would probably be nice to compile Alacritty from source if possible.\n---\nI'm using an AMD Vega 64 GPU, do I need to set any debug flags on compile?\n---\nNo, just run it using `RUST_BACKTRACE=1 cargo run` and see if it crashes. That should print all the debug info necessary.\n---\nThat looks better\n---\nWould you mind providing some info about your setup, like multiple monitors or smthing like that, and are you running alacritty with default config?\n---\nYeah, looking at the error, it seems like you don't have any output connected? It would also be nice if you could test if the examlpes of https://github.com/rust-windowing/glutin crash too. You can run them using `cargo run --example window`.\n---\n> Would you mind providing some info about your setup, like multiple monitors or smthing like that, and are you running alacritty with default config? I just have the one monitor connected via HDMI, I'm not running the default config, but it does work fine in xorg. I deleted my custom config and ran alacritty and it worked fine, it looks like a configuration handling issue. > Yeah, looking at the error, it seems like you don't have any output connected? It would also be nice if you could test if the examlpes of https://github.com/rust-windowing/glutin crash too. You can run them using `cargo run --example window`. glutin works fine.\n---\nThat sounds like it was recently fixed upstream. I'd assume that the #2438 also works then?\n---\nThat PR does actually show an error with the config, but it still dies.\n---\n@sjug What's your `sturtup_mode` in a config, It's `Fullscreen`, right? So try setting it to `Windowed` and then toggling fullscreen.\n---\nOh yeah, this only seems to crash when executing `current_monitor` which is not done by the examples by default. You'll have to run `cargo run --example fullscreen` in the glutin examples and then press `F` to toggle it to fullscreen. That should crash it, right?\n---\n> @sjug What's your `sturtup_mode` in a config, It's `Fullscreen`, right? So try setting it to `Windowed` and then toggling fullscreen. @kchibisov Yes you're right, changing it to windowed allows it to start (and not panic). Then toggling fullscreen works fine. > Oh yeah, this only seems to crash when executing `current_monitor` which is not done by the examples by default. You'll have to run `cargo run --example fullscreen` in the glutin examples and then press `F` to toggle it to fullscreen. That should crash it, right? @chrisduerr When I run that command it asks me to select a monitor, so I select my only monitor `0`. Then it starts the example in full screen and I can toggle it with `F` back and forth no issue.\n---\n> @kchibisov Yes you're right, changing it to windowed allows it to start (and not panic). Then toggling fullscreen works fine. This seems to explain why the example works. Apparently when calling `current_monitor` *too early* it seems to return no outputs for you. But if we call it later it seems to work fine. If you apply the following diff to glutin master, it might be possible to reproduce the crash: You can test after running `git apply ` with the `cargo run --example window` command.\n---\n@chrisduerr Right on\n---\nSee https://github.com/rust-windowing/winit/issues/793."}
{"project_id": "Alacritty", "bug_id": "171", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: ToggleFullscreen doesn't work the first time and does not shrink resolution when going back to windowed mode\n\nDescription:\n1. Using ToggleFullscreen to switch from windowed to fullscreen mode doesn't work at first time (another 2x ToggleFullscreens are needed) 2. Toggling between windowed and fullscreen mode does not toggle the size of terminal window (it stays at fullscreen resolution) ### Reproduction Set `ToggleFullscreen` to F11 Set `decorations` to `none` Run alacritty Use F11 to toggle fullscreen ### Effects 1. When toggling into fullscreen for first time, resolution is set to 1920x1050 2. When toggling back into windowed mode, resolution does not go back to the previous windowed resolution ### Expected 1. Toggling into fullscreen sets resolution to 1920x1080 2. Toggling back into windowed mode sets resolution back to resolution before fullscreen mode ### System OS: Fedora 32 Version: 0.4.3 Wayland, no custom compositor/WM, GNOME environment ### Logs `alacritty -vv`\n\nDiscussion:\nI've got a couple of questions wrt to this bug: - Does this happen only with decorations set to `none`? - What's your `startup_mode` in the config? Windowed? - Does this same issue happen when running XWayland?\n---\n* Sorry, decorations is set to `full` and this bug does not happen on `none` * Yes, `startup_mode` is `Windowed` * Both on GNOME on Xorg and XWayland this issue does not appear Also one thing I have noticed On Wayland the title bar is plain white rectangle (with minimize, maximize and close buttons), while on Xorg/XWayland the bar looks the same as in other programs\n---\n> On Wayland the title bar is plain white rectangle (with minimize, maximize and close buttons), while on Xorg/XWayland the bar looks the same as in other programs That's intended, it's due to GNOME Wayland not having server-side decorations. > Sorry, decorations is set to full and this bug does not happen on none This applies to both issues, right? I've submitted an issue upstream in https://github.com/rust-windowing/winit/issues/1601.\n---\nYes, this applies to both issues\n---\nToggleFullscreen also does not bring back the decorations when toggling back to windowed mode\n---\nFiddling with ToggleFullscreen (going fullscreen, then windowed, resizing and going fullscreen again) crashes the terminal EDIT: crash happens if toggling back to windowed mode made the window lose its decorations\n---\nLooks like ToggleFullscreen always leaves a gap at the bottom of screen when going from windowed with decorations to fullscreen\n---\nI'll try to build alacritty from source and paste the backtrace here\n---\n\n---\nI noticed that snapping (not sure if that is the right term) the window to one side of my desktop does not resize the render buffer either. Manually resizing window by dragging its border fixes it. This might be the same bug as this problem?\n---\n> Looks like ToggleFullscreen always leaves a gap at the bottom of screen when going from windowed with decorations to fullscreen That is most likely this winit bug: https://github.com/rust-windowing/winit/issues/1509\n---\n> I noticed that snapping (not sure if that is the right term) the window to one side of my desktop does not resize the render buffer either. Manually resizing window by dragging its border fixes it. > > This might be the same bug as this problem? Exactly\n---\nThank you so much for fixing this."}
{"project_id": "Alacritty", "bug_id": "172", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Remapped Caps Lock to Escape does not work\n\nDescription:\nI've run into issues trying to replicate one feature from my urxvt setup: > Exiting Vi mode using a Caps Lock (which is mapped to Escape in my WM). I have remapped Caps Lock to Escape in my Sway configuration as follows: Ideally, Alacritty would interpret me pressing Caps Lock as Escape, but that does not seem to be the case. See the following logs for when I press Escape and Caps Lock respectively: The behavior is the same for both my laptop keyboard and an external USB keyboard. A less ideal work-around would be to map Caps Lock to `ToggleViMode` directly, but I can't seem to be able to map Caps Lock at all. Apart from this issue, Alacritty is working great for me so thanks all the good work done! ### System OS: Linux Version: alacritty 0.5.0-dev (f0cb1e7c) Linux/BSD: Wayland, Sway ### Logs Crashes: N/A Font/Terminal size: N/A Keyboard and bindings: See above.\n\nDiscussion:\nThe patch upstream is available there, but not that folks care. https://github.com/rust-windowing/winit/pull/1534\n---\nThat's sad to hear. I tried the patch and it does indeed solve the this. Thanks for the patch, let's hope it gets merged soon.\n---\nI mean, I have a power to merge it myself, I just want to get a response from other folks, however I may just change just escape at some point. In the meantime you can bind it via scancode, which you can obtain via `alacritty --print-events`.\n---\nRight, I understand. I'll use the scancode in the meantime then. Thanks!\n---\ni did not have a problem using sways `xkb_options caps:escape` or `xkb_options caps:swapescape`. not in alacritty version 0.4.3 nor the build on dd32447b (yay -S alacritty-git)"}
{"project_id": "Alacritty", "bug_id": "173", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Limit the maximum length of the title\n\nDescription:\nWhen trying to set a long window title either with ANSI escape codes or on the command line, `alacritty` closes with a panic. Not that I want to use such long titles, but this happened to me because I configured zsh to set the window title to the currently running command. I found a similiar issue for `kitty`, which was [solved](https://github.com/kovidgoyal/kitty/commit/2e3037ce3a3f937067d9d50417aafae19a93dd88) by limiting the title that will be send to the window manager to 2048 bytes. ### System OS: Linux Version: `alacritty 0.4.3` Linux/BSD: swaywm + Wayland ### Logs\n\nDiscussion:\nit's libwayland limitation, nothing alacritty can do about other than shrink the title for you.\n---\nI'm not closing this issue to track title shrinking. One more thing is flood with title events, that could also crash or deadlock, due to libwayland again.\n---\nGenerally I wouldn't be opposed to just limit it on all platforms. I think that would probably be the easiest solution. Generally an implementation in winit might make sense?\n---\n>Generally an implementation in winit might make sense? it's not true on all platforms, and so I've proposed such change in sctk https://github.com/Smithay/client-toolkit/issues/110. So we can avoid limiting very long titles. However I do belive that there's no value in very long titles, since you won't see them any way. And that's the thing I've suggested in the past to limit them to 1024 chars in alacritty_terminal, when managing the title stack, though the idea was rejected. But I was coming from the exact same crash, and so we have an issue in sctk due to that. There're other ways to crash due to libwayland-client though, like spamming with title udpates.\n---\n> I've suggested in the past to limit them to 1024 chars in alacritty_terminal Yeah, I still don't think that's the right choice. Either SCTK or winit should be better. I agree that having titles longer than 1024 probably doesn't make a ton of sense on any platform.\n---\nHello I would like to contribute a solution. When you say winit, are you referring to alacritty/src/window.rs?\n---\nWe mean https://github.com/rust-windowing/winit . But I don't really like to put it in winit on all platforms, I'd rather put it somewhere else, on a platforms where it breaks things, like Wayland, and so added it to either it directly or smithay-client-toolkit library, which it's using.\n---\nI've assigned myself, since the original issue is fixed upstream and title is limited right now on Wayland. if we want to do something like that in alacritty as well. Let me know, since I don't really see a reason for it."}
{"project_id": "Alacritty", "bug_id": "174", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: [wayland-client error] Attempted to dispatch unknown opcode 0 for wl_shm, aborting.\n\nDescription:\nAlacritty does not launch in Gnome on a wayland session. Works in Gnome X11 and in sway session on same machine. OS: Fedora 33 Pre-Release Gnome: 3.37.90 Wayland: 1.18.0-2 Version: 0.5.0 and 0.6.0-dev commit 5ee7ae8a274fcc58754aa5a91a14b1dedbb87583 logs stack trace Message: Process 21749 (alacritty) of user 1000 dumped core. Stack trace of thread 21749: #0 0x00007f881894dbc5 raise (libc.so.6 + 0x3dbc5) #1 0x00007f88189368a4 abort (libc.so.6 + 0x268a4) #2 0x0000560b447dc50d _ZN14wayland_client3imp5proxy16proxy_dispatcher17h337ff8d0d37a0733E (alacritty + 0x1a750d) #3 0x00007f881853ef33 dispatch_event.isra.0 (libwayland-client.so.0 + 0x6f33) #4 0x00007f881853f19c wl_display_dispatch_queue_pending (libwayland-client.so.0 + 0x719c) #5 0x00007f88185416ef wl_display_roundtrip_queue (libwayland-client.so.0 + 0x96ef) #6 0x0000560b449e2b23 _ZN14wayland_client11event_queue10EventQueue14sync_roundtrip17h99b292052c928c16E (alacritty + 0x3adb23) #7 0x0000560b446fa61d _ZN22smithay_client_toolkit3env11Environment20from_display_with_cb17h27cf1234e65d2ffeE (alacritty + 0xc561d) #8 0x0000560b447c75f6 _ZN5winit13platform_impl8platform7wayland10event_loop18EventLoop$LT$T$GT$3new17h09c7387da55e48c6E (alacritty + 0x1925f6) #9 0x0000560b44745e1d _ZN9alacritty4main17h5d705b9366cf9fb5E (alacritty + 0x110e1d) #10 0x0000560b449c1e33 _ZN3std10sys_common9backtrace28__rust_begin_short_backtrace17h07251042be723e2aE (alacritty + 0x38ce33) #11 0x0000560b44745a2d main (alacritty + 0x110a2d) #12 0x00007f88189381a2 __libc_start_main (libc.so.6 + 0x281a2) #13 0x0000560b4469925e _start (alacritty + 0x6425e)\n\nDiscussion:\nCould you provide `WAYLAND_DEBUG=1 alacritty` log, also could you check whether the previous version of gnome works, or does it work on `weston`? I feel like it's a new gnome bug.\n---\n> Could you provide `WAYLAND_DEBUG=1 alacritty` log, also could you check whether the previous version of gnome works, or does it work on `weston`? I feel like it's a new gnome bug. Worked on prior version of gnome, log added. Thanks\n---\nThat seems like a gnome bug honestly, you may try weston here, but it'll work, guess. Also, how have you tested the previous version of gnome? The same system, but with just old version of it, or you've rolled back the entire system? In general, I'd suggest trying to test weston. You may also try to test https://github.com/rust-windowing/winit/pull/1653, but I'm not sure that it'll help.\n---\nOh, could you try building alacritty from source? Maybe that's what is required to be done? Just doing `cargo run` should be enough, I guess.\n---\nThe only relevant change in gnome is likely https://gitlab.gnome.org/GNOME/mutter/-/merge_requests/804.\n---\nPre-Loading of Fedora 33 it was working with Gnome 3.36. It also works with Sway on the same machine currently. Additional stack trace, running compiled from source from target/debug. Rust version 1.46.0 Thanks\n---\nWould you mind testing example from here https://github.com/smithay/client-toolkit You should clone the repo and then run\n---\n\n---\nCould you try it in environment with presented `WAYLAND_DISPLAY`? you can check for `echo $WAYLAND_DISPLAY` before running. That assumes that you're running Wayland compositor.\n---\nOh, wait, it seems like you've got disconnected, sorry, no need to retest."}
{"project_id": "Alacritty", "bug_id": "175", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Zerowidth characters not rendering in last column\n\nDescription:\nThe following code should show the problem:\n\nDiscussion:\nThis is actually our terminal is writing zerowidth character to a wrong glyph when it reaches the end of the line, the zerowidth vector is empty for the last glyph in the row. I've logged it from the renderer and it gets the following information for the last 3 chars in the row. As you can see one of them has 2 zero width chars. The code I've used to dump is the following:"}
{"project_id": "Alacritty", "bug_id": "176", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: When in fullscreen other windows can't be above alacritty (eg via alt-tab)\n\nDescription:\n### System OS: Windows Version: 5\n\nDiscussion:\nit's a fullscreen, so I don't expect anything to be above it, you likely want maximize, right?\n---\n> it's a fullscreen, so I don't expect anything to be above it, you likely want maximize, right? Nope. Are you on a Windows system? All the Windows terminals/consoles let you either move or alt-tab other windows on top of of the full screen mode, Windows users kind of expect this and without, it's hurting productivity. Terminal/consoles in full-screen != video player in full-screen. also a screen shot for you (this chrome window above full-screen WSL): ![image](https://user-images.githubusercontent.com/43666255/89188369-da2aab80-d59e-11ea-91e0-1c3a06611c7d.png) besides: everytime you alt tab a window on that full-scrreen display with alacritty, alacritty flickers (like it is broken or so)\n---\n>Nope. Are you on a Windows system? No. I don't use proprietary systems. @Osspial sorry for pinging here, are you aware whether it should be done somewhere in winit, or it's already exposed by winit, but we're not utilizing it in alacritty?\n---\nI can confirm that switching from a full screen alacritty to another app gives focus to another app. However alacritty stays on top of everything and so the focus behavior is not visible. I had vs code \"behind it\" and the keyboard events went to vs code even though alacritty was above all. This happens only in alacritty and only in full screen.\n---\nyep, this is kind of annoying when you try to switch to a browser to check documentation and browser \"gets the focus\" but is invisible -- alacritty is on top of it and doesn't get any input.\n---\nBtw, windows terminal (new one) and cmd.exe have the same Alt-Enter to goto fullscreen and both allow to switch (alt-tab) to another windows/applications.\n---\nany progress?\n---\n> i donâ€™t use proprietary systems not super helpful. not all of us have the luxury of choosing what platform our employers support. would be nice to get an update on this. i much prefer using alacritty for performance, but windows terminal gets this seemingly basic behavior correct. then again windows terminal has to be restarted periodically...\n---\nAre there any plans for supporting this? I'm in the same boat as @p5a0u9l and the other modes are buggy for me (opacity rendering, weird scaling bugs, etc) so it would be really helpful if the alt+tab functionality worked on Windows.\n---\nThis looks like rust-windowing/winit#1540, which is fixed in upstream winit but not yet released."}
{"project_id": "Alacritty", "bug_id": "177", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Opacity 1.0 does not make background completely opaque\n\nDescription:\nWhich operating system does the issue occur on? Windows 10 build 17134.407 (1803). I tested on 0.2.4 and the latest master (f018043) with the opacity setting on 1.0 and once more with it commented out. If you look to the right side you see a picture of Goku (my windows desktop background). ![opacity-example](https://user-images.githubusercontent.com/5583518/50480203-dace8980-09da-11e9-9f9c-15e288fc0371.png)\n\nDiscussion:\nHas anyone been able to verify/reproduce this?\n---\nI believe I was able to reproduce this on Windows, however it has been a while since I've used Windows and I never use transparency. I'd definitely consider this confirmed though, I'm just not sure if it's an issue on ALL Windows systems (I ran it on Win 7).\n---\nI don't want to use transparancy either. Is there a way besides the opacity setting to completely disable it? That would be a sufficient workaround for me at least.\n---\nI am seeing this too on Windows 10 with 77536e8fac303c1954d40e2db2bd083716b04a29. If I put the Alacritty window over something dark I can see a \"shadow\".\n---\nAha! https://github.com/tomaka/winit/blob/master/src/platform/windows/window.rs#L680 - winit is overriding our full opacity with almost full opacity. Perhaps it would be worth checking for full opacity at start and creating an opaque window if the user has set the opacity to 1.0? This would be a simple change at https://github.com/jwilm/alacritty/blob/master/src/window.rs#L301 but it would mean that changing from opacity = 1.0 to opacity < 1.0 would require a restart, and vice versa. I think the proper change would be to set/unset WS_EX_LAYERED based on the opacity value. This isn't something exposed by winit but can be done with https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setwindowlonga if we can get the HWND. This does break the abstraction offered by winit somewhat, but it would be nice to get this fixed.\n---\n> Perhaps it would be worth checking for full opacity at start and creating an opaque window if the user has set the opacity to 1.0? While this would resolve some issues, I'm really not a fan of making less things auto-reload. I personally use the live reload a ton for testing and it was one of the first things I noticed which are really cool about Alacritty. In general I'd say the same thing about this that I've already mentioned on other issues. It would be nice to fix this issue rather than building a hack on top of a hack. > I think the proper change would be to set/unset WS_EX_LAYERED based on the opacity value. This isn't something exposed by winit but can be done with https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setwindowlonga if we can get the HWND. This does break the abstraction offered by winit somewhat, but it would be nice to get this fixed. We should go through winit and if necessary fixes should be made in winit. Trying to mess with these things in Alacritty is just going to cause trouble and require ugly platform-specific code.\n---\nAdding a gif of the issue for reference. `alacritty 0.3.3 (cc3e4d3)` ![2019-10-29_08-43-42](https://user-images.githubusercontent.com/4148195/67747071-39fc9080-fa28-11e9-8384-db6e3e32c916.gif) GPU: AMD Radeon RX 480.\n---\nI recently ran across this issue. For me, turning off HDR for the monitor \"fixed\" the issue. Can anyone else having issues with this confirm if that also resolves it for them?\n---\n@davidhewitt I don't have HDR on my monitor and it's an issue here.\n---\nFor those who are interested, I filed a PR to fix this in winit: https://github.com/rust-windowing/winit/pull/1621. Hopefully my patch is correct and lands/gets released soon so this problem can go away. :)\n---\nMy PR for winit (rust-windowing/winit#1621) just merged, so the next release from them should resolve this issue."}
{"project_id": "Alacritty", "bug_id": "178", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Config reload does not work if config is broken on launch\n\nDescription:\nWhen using a broken configuration file to launch Alacritty, fixing the error will not remove the error from Alacritty. Instead live reload is completely disabled if the config file has any errors. It's not necessary to live reload config files that are missing or have invalid permissions, but for configuration files which can be read without any problem the live config reload should always be enabled. I'm not certain this has behaved different previously, but I think this might be a regression introduced by CLI config overrides.\n\n"}
{"project_id": "Alacritty", "bug_id": "179", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Underline cursor cannot be seen on underlined text.\n\nDescription:\nHello, I am using emacs in the cli and it uses underline as the highlight (for linting and such). When I place the cursor on the underlined text the cursor is hidden by the underline. Is there a way to somehow render the cursor in a different color to enable it to be seen? I tried the different settings and checked the issues but I could not find the answer. Maybe the simplest solution would be to set the underline color to the cursor color with priority. Or just reorder rendering and firstly draw underline and override it with the cursor. ## Step to reproduce I set the cursor color to pink to better visualize it. ![image](https://user-images.githubusercontent.com/26434056/76800047-19648580-67d3-11ea-8c31-83b21d3220ba.png) Now when I go into tmux `copy-mode` and move the cursor to the first letter of the word \"[u]nderline\" ![image](https://user-images.githubusercontent.com/26434056/76800351-bf17f480-67d3-11ea-9e95-abd0870a7a87.png) ### System OS: Linux Version: alacritty 0.4.1 Linux: Wayland, sway ### Logs Font/Terminal size:\n\nDiscussion:\nIf your cursor's white, I don't think there's anything we should change about this imho. But we should definitely render the cursor above underlines. It might be worth noting that the position of underline/cursor depends on your font though. I'd assume most fonts do not have this problem and render the cursor below the underline.\n---\nI just noticed after updating to 0.4.2 that the issue is now less prevalent. ![image](https://user-images.githubusercontent.com/26434056/78031147-6c0d7800-7363-11ea-8c1a-dd782204c19b.png) But I don't know if the fix was intended or a side-effect of some other change (just from looking at the commits). Since nobody pinged this PR. I still think its rendered under the text decorations (underline), and only the bottom part of the cursor is seen.\n---\nWe changed roundings, etc. However it wasn't fixed and just a side effect that cursor is a bit bigger in some edge cases now, so you can see it here.\n---\nThis might be fixed with https://github.com/alacritty/alacritty/pull/4373. Or at least it might make fixing this easier."}
{"project_id": "Alacritty", "bug_id": "180", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Cursor vanishes when there're a lot of altases around\n\nDescription:\nTo repro you can 'cat' symbols file from vtebench unicode benchmark, enter vi mode, and then trying to enable selection, the cursor will vanish on certain glyphs, but will wok on other glyphs. ![picture](https://user-images.githubusercontent.com/27620401/98787870-1dec4700-2411-11eb-90df-d66a67ac747d.png)\n\n"}
{"project_id": "Alacritty", "bug_id": "181", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Windows: panic due to DirectWrite errors, seemingly related to attempting to render missing glyphs\n\nDescription:\nFound this while working on a separate patch for crossfont and discovering that even vanilla master alacritty (with the default crossfont release and default Consolas font) will crash given the cargo output from attempting to build itself. This might be more suited to crossfont itself, though the fact that the error (which is supremely unhelpful on the Win32 side) is handled earlier in the log suggests that an alacritty fix might also be feasible. ### System OS: Windows Version: alacritty 0.7.0-dev (fdc10d2) Linux/BSD: X11/Wayland, DE or Compositor and WM Doesn't say anything about ConPTY or WinPTY in any output, unfortunately. ### Logs Log output for `.\\target\\debug\\alacritty.exe -vv --print-events -e 'cargo build'`: at which point it panics with\n\nDiscussion:\nThanks for the report, this is actually an error inside of Alacritty and not crossfont. It seems like rendering `\\0` on Windows does not give you the missing glyph symbol, which is a bit troublesome.\n---\n@r-c-f could you check if https://github.com/alacritty/alacritty/pull/4619 fixes this for you?\n---\n@chrisduerr Indeed it does, thank you"}
{"project_id": "Alacritty", "bug_id": "182", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: [wayland-client error] A handler for wl_pointer panicked.\n\nDescription:\nalacritty latest upstream revision crashes on launch ### System OS: Linux 5.9.1-arch1-1 #1 SMP PREEMPT Sat, 17 Oct 2020 13:30:37 +0000 x86_64 GNU/Linux Version: alacritty 0.6.0-dev (812c8bc) Linux/BSD: Wayland (sway) Windows: PTY dimensions: Line(35) x Column(88) ### Logs Crashes: Font/Terminal size: Keyboard and bindings: ``bash\n\nDiscussion:\nWhat cursor theme and size are you using?\n---\nHi, yeah it is indeed the cursor theme! I am using [bridge](https://www.gnome-look.org/p/999983/) thanks!"}
{"project_id": "Alacritty", "bug_id": "183", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Ctrl-Shift-C crash the alacritty\n\nDescription:\nHi, When I try to copy some text to the clipboard with Ctrl-Shift-C the terminal is suddenly exit. I'm using tmux with zsh if it's relevant. ### System OS: Linux Ubuntu 18.10 Version: alacritty 0.6.0-dev Linux/BSD: X11 ### Logs I executed the command `RUST_BACKTRACE=1 alacritty --print-events -vv` in order to get logs about the terminated terminal\n\nDiscussion:\nfwiw the crash is not on x11 but on Wayland, since yoiu're using Wayland, could you tell us more precisely what version are you using? And if it's not the latest master could you retry?\n---\n> fwiw the crash is not on x11 but on Wayland, since yoiu're using Wayland, could you tell us more precisely what version are you using? And if it's not the latest master could you retry? How can I check which version am I using?\n---\n>How can I check which version am I using? alacritty --version\n---\nOh I wrote under `Version` the version of alacritty inatead of the OS alacritty 0.6.0-dev\n---\nOh, wait, are you running it installed from some package manager and not from source? Usually `0.x.0-dev` refers to some version from git master, and has little to do with releases, so I've assumed that you're running self build version. In anyway, you can try the latest master to see whether it crashes, etc.\n---\nfor some reason I thought I installed it via package-manager I'll remove and reinstall it and then I'll update\n---\n\n---\nWell, it could mean that something packaged version from master, it's not really a big deal, but it's not actually a release candidate, since packing has nothing to do with alacritty maintainers, it's not our problem. Anyway, if you can try to test whether latest master works for you let us know.\n---\nok Which file should I download which can be installed in Ubuntu?\n---\nYou should clone the repository and build it yourself according to the INSTALL.md.\n---\nOk I'll do it Thanks\n---\nI installed Alacritty version 0.5.0 and it behaves the same I used [this link](https://github.com/alacritty/alacritty/blob/master/INSTALL.md#debianubuntu) to install it\n---\nWhat error do you get when starting Alacritty from a terminal?\n---\nAs I've suggested you should try latest master, it shouldn't crash, since it's 'impossible' for it do so. Also provide `WAYLAND_DEBUG=1` log.\n---\n> What error do you get when starting Alacritty from a terminal? Full log exist [here](https://pastebin.com/Vsqa36y2) > As I've suggested you should try latest master, it shouldn't crash, since it's 'impossible' for it do so. Also provide `WAYLAND_DEBUG=1` log. I installed it with `cargo` as it is suggested in the Install.md (AFAIK master is ~~ 0.5.0, as I have, or am I wrong?..)\n---\n>installed it with cargo as it is suggested in the Install.md (AFAIK master is ~~ 0.5.0, as I have, or am I wrong?..) No, master is 0.6.0-dev. You can install from git via `cargo install --git https://github.com/alacritty/alacritty`, just doing `cargo install alacritty` will pull it from `crates-io`.\n---\n> > installed it with cargo as it is suggested in the Install.md (AFAIK master is ~~ 0.5.0, as I have, or am I wrong?..) > > No, master is 0.6.0-dev. You can install from git via `cargo install --git https://github.com/alacritty/alacritty`, just doing `cargo install alacritty` will pull it from `crates-io`. But in the first place (my first state, on the first comment) I was running on 0.6.0-dev\n---\n>But in the first place (my first state, on the first comment) I was running on 0.6.0-dev yes, but master branch is updated frequently, and so the potential fix is after date when you've posted. And also you've been likely using it from PPA, since I don't see a hash that is included in git versions, which is some fixed version of 0.6.0 that is closed to 0.5.0.\n---\nok I'll try it and update Thanks\n---\nbuild from master branch and it still happens.. Full log exist [here](https://pastebin.com/pabWmAcy)\n---\nCould you tell a bit more what you're copying, etc, and how much data you're trying to copy. It literally fails to write to a pipe that it got from your system's compositor.\n---\nI tried to copy the sentence \"echo test\"\n---\nIdk, could you apply it should prevent crash, but I'm not sure that it'll write anything to clipboard."}
{"project_id": "Alacritty", "bug_id": "184", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Graphical artifacts with window transparency\n\nDescription:\nWhich operating system does the issue occur on? MacOS (10.12.6 - Intel Iris Pro graphcis) So when I have window transparency turned on (background_opacity: 0.85) I sometimes see graphical artifacts where text is rendered in the background of what was previously on my terminal. An image is attached. This occurs both within tmux and outside of tmux after detaching. I cant seem to figure out what makes it occur or why its displaying a particular text but its pretty reproducible for me.\n\nDiscussion:\nAnother interesting thing with this issue is that it shows different text in the background depending on whether Alacritty is in focus or not. Any clue where the weird background text could be coming from?\n---\nSame issue here, I recorded a screencast demoing the issue: ![alacritty-artifacts2](https://user-images.githubusercontent.com/147409/39093849-cc556e0c-462e-11e8-95f2-4ce1f1edcfda.gif) (As you might notice, it's easily repeatable when hiding Alacritty via Cmd+H) - Running: 1b7ffea136f55236729258ddbc6841282de91ae9 - Best reproduced on light (e.g. white) background - `background_opacity: 0.85` - Font: `Go Mono` - `use_thin_strokes: false`\n---\nSame issue here on a MacBook Air running OS X 10.13.5.\n---\nSame issue on Macbook Pro 10.12.16 ![image](https://user-images.githubusercontent.com/149870/43061704-132eef78-8e0b-11e8-965b-c9dbd3123e76.png) You can't actually see the background effect in this screen shot - _only_ the ghosting effect. I had just closed a split where the lighter part is.\n---\nSeeing the same issue here with `background_opacity: 0.5`, running on Macbook Pro 10.14.2 with Radeon Pro 560X graphics.\n---\nThe problem is window shadow, I had the same problem with iTerm2 borderless patch and removing shadow fixed the issue. Would it be possible to add an option to remove window shadow?\n---\nSame issue here with `background_opacity: 0.3` on a 2017 Macbook Pro with Iris Pro graphics.\n---\nI'm having this issue with `background_opacity: 0.6` on a 2018 MacBook Pro (15). Is there no fix for this anywhere in the pipeline for the semi-near future?\n---\nRe: #2490, these are the steps to reproduce on macOS Mojave 10.14.5 1. Enable window trasparency 2. Resize an alacritty window, note the position of any existing text on the window at the maximum size scaled to by dragging the corner 3. Once the redraw happens, there are artifacts of the on-screen text as it appeared just before releasing the resize-drag. These seem to be a part of the window background and are unselectable. Other notable behaviours: 1. The artifacts are not visible if the window focus is lost. They are restored on restoring window focus 2. Resizing the window after this replaces the old artifacts with new ones. 3. These don't seem to exist in full-screen mode. Related screenshot ![Screen Shot 2019-05-29 at 09 48 26](https://user-images.githubusercontent.com/3663231/58562694-bed44b80-81f7-11e9-969f-c85d43d263a6.png)\n---\nAny update on this issue? @jwilm\n---\nI tried adding setHasShadow() to the winit library as @tomaskallup advised. It's working as expected.\n---\nIt seems like it's something required for transparent windows on macOS, since I found other links to use the `setHasShadow_(NO)` for transparent windows as well as using `setOpaque(NO)`. I feel like managing such thing directly in alacritty based on config opacity value is a way to go. winit already provides us with method to get `ns_window`, so it should be something simple as add a bunch of `cfg` and call proper method where we're updating/setting opacity. However it'll require someone with macOS to implement it(not me). if anyone is interested in doing it, let me know.\n---\n> I feel like managing such thing directly in alacritty based on config opacity value is a way to go. Is it? I don't think it makes a lot of sense to allow users to set transparency unless it actually works. So winit should set this if it isn't possible to make this work otherwise."}
{"project_id": "Alacritty", "bug_id": "185", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: PTY not read entirely with --hold CLI parameter\n\nDescription:\n~~Running `alacritty --hold -e bash -c 'column -s, -t < weather.csv'` does not print anything. `alacritty --hold -e bash -c 'ping google.com'` works. The column command in a normal window works. But the column command doesn't seem to work when launched with `alacritty --hold -e bash -c'...`.~~ ~~It used to work but recently I found it seems to have broken. Now the window is just blank.~~ When running a command at startup and passing the `--hold` option, the PTY is not always read entirely. Commands like `alacritty --hold -e echo test` often do not print the text written to the PTY. Adding a little `sleep` fixes the problem, so it's likely a problem with the PTY being dropped before it is read entirely since usually without the `--hold` option it's not important to read all of it.\n\nDiscussion:\n@Squirreljetpack You said it used to work, can you check where exactly this broke? The `--hold` command is fairly \"new\", so I'm a bit surprised it ever worked.\n---\nI can reproduce this issue on my Linux machine, but not on macOS. The issue is somewhat intermittent however.\n---\nI believe the issue is due to the PTY not being drained after shutting down, which is usually not necessary since the window just closes. But that's why I'm curious if it worked previously, since that hasn't changed.\n---\nI cannot recall when exactly I last tried this as it has been a while. Sorry that I cannot be more specific ;/ it cannot be too long ago - definitely it was working 2 months ago I think.\n---\nCan you try a version from 2+ months ago then?\n---\nI can reproduce this issue on `v0.4.0`, so it's broken likely from the addition of that feature. It could be worked around by adding delay before printing something like `alacritty --hold -e sh -c \"sleep 1; echo hello\"`. And I'd expect that issue to be from the addition (or close to it), since the parser and event loop communication haven't changed for quite a long time.\n---\nYeah, I think there's just a bit of confusion present here. So I think this issue should just be used for a general `--hold` PTY issue. The whole regression thing should probably be ignored. The column command also seems unrelated."}
{"project_id": "Alacritty", "bug_id": "186", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Add support for partially mapping untagged enums\n\nDescription:\nUntagged enums like the cursor style at the moment do not support mapping only one of its fields. The following configuration produces an error: Since we usually have defaults for every field and there is no noticable difference between this and other mappings, it should be possible to map this partially without getting any errors.\n\n"}
{"project_id": "Alacritty", "bug_id": "187", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: When using an input method, the first character following an arrow key is lost.\n\nDescription:\nUsing input method immediately following an arrow key press causes the first character to be lost. Here is a video clip to demonstrate this problem: https://fars.ee/Perq.webm. In this clip, I tried to type \"ceshi\" (which should result in \"æµ‹è¯•\"), space (to commit the text), left key, \"ceshi\", space; the second \"ceshi\" only types in the second character \"è¯•\". ### System OS: Linux Version: 0.6.0 (04cbf767) (also happens on 116faba7) Linux/BSD: X11 Plasma ### Logs Keyboard and bindings: [events.log](https://github.com/alacritty/alacritty/files/5710839/events.log)\n\nDiscussion:\nCan you reproduce this in a different shell like `bash`?\n---\nYes.\n---\nCould you share the output of `alacritty --print-events | grep \"ReceivedCharacter\"`.\n---\nHere is it:\n---\nHmm interesting, looks like this might actually be an issue with Alacritty, but I'm having trouble reproducing it. Can you reproduce this by copy/pasting these two symbols, or does this only happen when inserting them using IME? And do other terminals show similar behavior or do things right?\n---\nI can't reproduce by copying and pasting. Other terminals do things right. I've tested `termite` with `GTK_IM_MODULE=xim`, and `konsole`.\n---\nDo you have your IME setup for single cell width characters too? I'd be curious if this only happens with fullwidth characters or also with half width.\n---\nNot sure I fully understand your questions, but here's what I have done: I tried to type \"ceshi\", enter (to commit the pre-edit string, not the text), down arrow key, \"ceshi\", enter. The result is \"ceshieshi\", which means the \"c\" in the second \"ceshi\" is also lost. `--print-events` output looks normal.\n---\nInteresting, I thought it would have been the fullwidth character creating the issue. But it seems like halfwidth also cause troubles. I'm surprised this was never reported by anyone before though, since this seems like something people should quite commonly run into. You're not in insert mode though, right? So when you go left and start typing normally without IME, you don't delete any characters? I'll have to see if I can reproduce this myself, but I'll have to setup IME first.\n---\nI've been able to reproduce this, I'll take a look, thanks.\n---\nHm, while someone else was able to reproduce this issue, I am not able to reproduce it myself using fcitx. Which IME do you use?\n---\nI'm using fcitx5.\n---\nI'd assume this would be fairly easy to fix when able to reproduce it, but unfortunately it seems difficult to troubleshoot without it.\n---\nHi, I could easily produce this with fcitx so I don't think it's related to the fcitx5 using a new xim implmentation via xcb-imdkit. 1. Type something in the terminal 2. Press Ctrlt +Alt +H to trigger the spell check in fcitx (normally you should see a notification on desktop) 3. Press left 4. type \"app\" 5. Use mouse to select the candidate, only \"pp\" got typed into alacritty. So I think the tricky part to reproduce it is that you can't press any modifier key between step 3. 4. 5, otherwise the bug could not be triggered. I actually suggest you try this: https://github.com/fcitx/xcb-imdkit/ compile it with standard cmake procedure (need xcb, xcb-util, xcb-util-keysyms, should be generally available on any distribution), no need to make install it. After compile it you should be able to find test_server under build/test directory. First run `./test_server` Then start alacritty with `XMODIFIERS=@im=test_server alacritty` Then press \"Ctrl+Space\" in alacritty, check if press \"t\" will produce \"hello worldä½ å¥½ä¸–ç•Œì¼ã…‡ã„¹è²´æ–¹å…ƒæ°—ï¼Ÿâ˜º\". If so, then it's working, then you can reproduce it with 1. Press Left 2. Press \"t' 3. only \"ello worldä½ å¥½ä¸–ç•Œì¼ã…‡ã„¹è²´æ–¹å…ƒæ°—ï¼Ÿâ˜º\" is committed to the alacritty.\n---\nI ran into the same problem, with ibus + rime. Downgrading to version alacritty-0.5.0 solved this.\n---\n> I ran into the same problem, with ibus + rime. Downgrading to version alacritty-0.5.0 solved this. That sounds very helpful. Could someone bisect the exact commit that broke this?\n---\n1d00883f10500675bbe2bb62916d6a16499972ee is the bad commit. I don't understand the code but the commit message looks quite related.\n---\nVery, very interesting. Could someone share their full `alacritty --print-events` log with me? Suppress chars should only ever go to `true` when there's a key binding triggered, so this doesn't make a ton of sense to me. Also could one of you try the latest master?\n---\nalacritty_log: Notes: - 16:38:58.280292610-16:38:58.443140558 I opened alacritty; - 16:39:10.370873621-16:39:11.476050654 I typed â€œæµ‹è¯•â€ normally - 16:39:24.425510975-16:39:24.579286081 I hit right arrow key - 16:39:34.972854135-16:39:37.034641535 I typed â€œæµ‹è¯•â€ but only â€œè¯•â€ showed up - 16:39:52.516228851-end I closed this window\n---\n> I hit right arrow key Oooooh, right. Now I finally understand it. That's what is triggering the key binding and that's exactly what is causing the problem. Arrow keys are implemented using keybindings, but since they don't generate any `ReceivedCharacter` events the suppression for the binding is never released. So then when the IME text shows up the first character releases the key suppression. Thanks a bunch for that, fix should be trivial now.\n---\nVery glad that we made progress! Thank you for maintaining this excellent project! Happy new year~"}
{"project_id": "Alacritty", "bug_id": "188", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty 0.7.1 Crashes with segmentation fault (core dumped)\n\nDescription:\nAlacritty 0.7.1 Crashes with segmentation fault (core dumped) ### System OS: Linux (Arch Linux) Arch Kernel Version: 5.10.5-arch1-1 GPU: Radeon RX 5500 XT Graphics Driver: mesa/radeonsi (amdgpu) Version: alacritty 0.7.1 (a852eb85) Compositor: Wayland WM: Sway ### Logs ### Core dump\n\nDiscussion:\nThere seem to be a lot of mentions of `radeonsi_dri` in your backtrace. Which means that this looks very much like a driver bug. Does this crash at startup, or during usage? Also a core dump with debug symbols would probably be more useful.\n---\n@chrisduerr it crashes when I close it actual, not on startup, not during usage\n---\nCan you reproduce this? Like does Alacritty **always** coredump when closing it?\n---\nyes, it always happens. it started with version 0.7.1.\n---\nCan you provide the coredump with debug symbols? And if it started with version 0.7.1, can you verify that previous versions worked correctly?\n---\nI just double checked version 0.6, it works fine. I've tried to debug version 0.7.1. please check the attached debug.log file [debug.log](https://github.com/alacritty/alacritty/files/5813538/debug.log)\n---\nCould you bisect the exact version that broke this? Looks like a Wayland issue, if you can get me the commit it might be easy to triangulate this. Unfortunately your gdb logs don't include the full backtraces of the crashed threads, it would be **very** useful to have those. Once we know which Wayland command panicked, we should be able to figure out if this is a Wayland or Alacritty bug.\n---\nSee upstream issue: https://github.com/Smithay/smithay-clipboard/issues/32\n---\n@chrisduerr Thanks\n---\n@chrisduerr I've included stacktrace, let me if this is useful [alacritty_stacktrace.log](https://github.com/alacritty/alacritty/files/5824346/alacritty_stacktrace.log)\n---\nSee this patch for a minimal fix: https://github.com/Smithay/smithay-clipboard/issues/32#issuecomment-761757708\n---\nYeah, this also happens to me when using `alacritty -t some_window_name` and there's a `for_window` rule defined for `some_window_name` on `sway`'s configuration.\n---\n> Yeah, this also happens to me when using alacritty -t some_window_name and there's a for_window rule defined for some_window_name on sway's configuration. What exactly do you mean by that? It happens when you *start* Alacritty? This bug should only occur when Alacritty is closed.\n---\n@chrisduerr yeah, the segmentation fault happens when I close it, if I have started alacritty under my described conditions"}
{"project_id": "Alacritty", "bug_id": "189", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Fails at high resolution\n\nDescription:\n### System OS: Linux (NixOS) Version: 0.4.1 Linux/BSD: X11, KDE/XMonad Trying to run at 5120x1440 results in alacritty hanging for a minute or so, and then opening a blank window (Sometimes black, sometimes yellow), that cant be interacted with at all. Dropping the resolution back to 3840x1080, alacritty works as expected. `alacritty -vvv`: The minute hang is at \"Initializing glyph cache\" Digging around a little more, starting with no configuration crashes outright, narrowing down why, it looks like ommiting `window/dimensions/[columns,lines]` results in: My settings are 80/24, which results in the hang and then blank window, adjusting them a little results in a hang, adjusting them too much results in the crash above.\n\nDiscussion:\nCould you try to run it with `WINIT_HIDPI_FACTOR=1 alacritty`?\n---\nThat's got it working, yeah, thanks very much.\n---\nWhat's your GPU + driver? The thing is that our windowing library computing DPI automatically based off some display metrics, so I guess something is going wrong and it returns DPI of 718, which is a lot. I'm not sure whether the issue is directly in a library we're using or in your setup, but at least I think it(library) should reject odd values like the one we're seeing and just return `1`.\n---\nRunning an RTX2060 with nvidia drivers 440.36, just tested and had the same problem on a GTX1050 as well, same drivers. I just tried to run it on the intel integrated gpu, but unfortunately it doesn't seem to be able to run at 5120x1440 at all, xrandr sees the mode but fails to switch to it. I've never really used the igpu on this machine so I'm not sure if that's a limitation of the hardware or an issue with my setup.\n---\nCould you try nouveau? Edit: In addition, could you also start your session in a lower resolution with proprietary drivers and change resolution to a higher value with xrandr?\n---\nAlright so nouveau wouldn't boot with the 2060 and I didn't want to dig too far into it, but it did boot just fine with the GTX1050, *and* alacritty just fine with nouveau Back on the nvidia drivers, starting session at a lower resolution and then going to high res, alacritty works as expected, no problem. Just for comparison, start session in high resolution -> drop to lower resolution -> start alacritty -> return to high resolution makes the alacritty window freeze\n---\n>Alright so nouveau wouldn't boot with the 2060 and I didn't want to dig too far into it, but it did boot just fine with the GTX1050, and alacritty just fine with nouveau No problem here, so nouveau seems fine, then we can safely assume that your driver is setting some weird values and our XRANDR based computation is in winit. >Back on the nvidia drivers, starting session at a lower resolution and then going to high res, alacritty works as expected, no problem. Do you mean that you can spawm new instances just fine here? In this case maybe something is going wrong with startup. >Just for comparison, start session in high resolution -> drop to lower resolution -> start alacritty -> return to high resolution makes the alacritty window freeze I guess it's just your session is messed up, and it's using the same broken values here. I'll create some patch for winit, to log the values we're getting from XRANDR, however I feel like it should just fallback to 1 if the DPI is greater than, idk, 4-5.\n---\nCould you provide me the output from this patch on our windowing library? I'm not familiar with how you run binaries on NixOS. But you should do the following. `git clone https://github.com/rust-windowing/winit`, apply my patch to it with `git apply`, and then do `cargo run --example window`. Use your proprietary driver here, which is getting us a broken behavior.\n---\n> I'll create some patch for winit, to log the values we're getting from XRANDR Winit should be getting the same values you get when running `xrandr` directly. So there shouldn't be a need to clone the repository and provide this information. Just posting the output of the `xrandr` command should be sufficient."}
{"project_id": "Alacritty", "bug_id": "190", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Cannot jump between matches in reverse vi mode search\n\nDescription:\nWhen trying to jump between matches in reverse search with vi mode, the vi cursor gets stuck on matches without being able to jump between them. This regression has been introduced in 08e111dfae15d2428d87c3a80c68d858b144d287.\n\nDiscussion:\nReleasing a bugfix version to resolve this probably makes sense, but it's not severe enough to immediately push for another release. Giving it a week or so to catch possible other bugs seems reasonable."}
{"project_id": "Alacritty", "bug_id": "191", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Search outside of vi-mode does not advance correctly\n\nDescription:\nIt seems like the vi-less search isn't quite working properly. When a result exists multiple times, the first jump to the next element always requires two keypresses to advance the search. Then on linewrap the last match before the linewrap is skipped and instead it goes right back to the one at the top, which again needs two confirmations before advancing over it.\n\n"}
{"project_id": "Alacritty", "bug_id": "192", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Searching for .+/.* will freeze Alacritty\n\nDescription:\nThere seems to be an issue with searching for certain regexes like `.*`, which cause Alacritty to freeze. This is likely a regression introduced in 530de00049c2afcc562d36ccdb3e6afa2fe396a5.\n\nDiscussion:\nFWIW - I've been seeing a system wide freeze as of `a954e07` on 20.10. I've since switched to `xterm` and no longer seeing freezes.\n---\n@jrowlingson just to be clear. - Your comment doesn't sound related to this issue, or is it only still freezing when you search for a regex like `.*`? - System-wide meaning Alacritty is somehow freezing your whole DE/OS, that seems like another thing altogether?"}
{"project_id": "Alacritty", "bug_id": "193", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Vi cursor should recover position after leaving search\n\nDescription:\nWhen starting the search with the vi cursor in the last line, it will automatically get pushed up to keep it in place relative to the grid's content. However when the search is cancelled without picking any match, the cursor is not moved down again. Ideally my vi cursor position should not change at all when entering and leaving search, even if the cursor is at the far bottom. At the very least outside of the alt screen this should be possible and I believe it has worked this way in the past. **Edit:** I have confirmed that this worked in the past (tested with v0.5.0).\n\n"}
{"project_id": "Alacritty", "bug_id": "194", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Missing Wayland Input Redraws\n\nDescription:\nI just updated to `alacritty 0.8.0-dev (530de000)`, and while using Wayland I now experience an issue where Alacritty seems to be missing redraw requests. Input will be received correctly, but the display isn't updated until another input is received. This causes the display to lag behind my typing (for example) by exactly one keystroke.\n\nDiscussion:\n@chrisduerr this issue seems to be caused by the latest commit (530de000).\n---\n> This issue seems to be caused by the latest commit (530de00). That doesn't surprise me, I expected there to be a few bugs with how big this change was. The terminal damage tracking code has been removed so all the damage tracking is now done through `Wakeup` events and externally in the UI. I'd assume that's probably the most likely candidate for this regression.\n---\nCan you maybe check where it is getting stuck at? I'd assume the `draw` function is never executed and it will return `false` on the dirtiness check?\n---\nHi, I'm experiencing this as well. And would like to provide an information to help to resolve the issue. > Can you maybe check where it is getting stuck at? I'd assume the draw function is never executed and it will return false on the dirtiness check? Though, I have no idea how to check this.\n---\nI hesitate to comment here, because a couple of things in my situation are very different. I saw and see this input lag (exactly one keystroke) too, but I see it running Alacritty on X11 and not Wayland - everything is good on Wayland - and I also saw it several days ago, so before this commit mentioned by @nixpulvis. Some additional info for my case - when the terminal is tiny (20 columns, 10 lines) it is completely fine. It starts happening when the window is larger, typically 50+ columns. I only see this happening on one particular machine - a brand new Dell XPS 13 (9310) - which has a lot of teething problems anyway, such as poorly supported networking, power management, and what seems like instability with the i915 drivers, though where exactly in the stack that is I don't know. I mention this because there may be several disparate causes in my case. Anyways, if you have a recipe I can use for tracking down where this happens, I would love to provide a trace. Edit to add - I'm using Alacritty 0.7.1 on Arch Linux.\n---\n> Edit to add - I'm using Alacritty 0.7.1 on Arch Linux. This is exclusively about the latest commit on master.\n---\n@chrisduerr OK, my preliminary investigation led me to the the order in which `draw` and the `Receiver` end of the `event_loop::Notifier` are being called. On X11 everything looks normal: However on Wayland, the call to `draw` comes in before the `Msg::Input` is received. I can't recall the details of how the notifier is scheduled at the moment, but I can try and continue looking into this if you'd like me to.\n---\n> I can't recall the details of how the notifier is scheduled at the moment, but I can try and continue looking into this if you'd like me to. I'd love that if you've got the time to do so. Of course I'm open for questions if you have any. ~~Generally they `Input` itself shouldn't matter, since of course all input goes through the PTY before mutating the grid state.~~ ~~So for input to be relevant, there should be a `Wakeup` after it has been processed. It might be necessary to put debug statements on the wakeup send and receive end to see if the wakeup coming after the PTY update might just be dropped.~~ Oh, I think I just realized the bug. We need to move the `dirty` flag from being active within just one event loop iteration to just be available for the entire execution by storing it on the `Processor`. See this part of the code: https://github.com/alacritty/alacritty/blob/master/alacritty/src/event.rs#L1095-L1099\n---\nhttps://github.com/alacritty/alacritty/pull/4741 should fix this, testing would be appreciated.\n---\n@chrisduerr, hi I tested this commit and it is MUCH better now, feels like the issue is fixed. thx again for awesome alacritty, -m"}
{"project_id": "Alacritty", "bug_id": "195", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Cursor thickness is increased incorrectly on wide cells\n\nDescription:\nWhen a cursor like the underline is below a wide cell, its thickness is increased (I'd assume doubled).\n\nDiscussion:\nHi @chrisduerr I'd like to work on this issue, but how can I set wide cell on my pc?\n---\nI noticed this by typing `echo \"https://example.org/testæ±‰å­—\"`. Just copy/pasting this and moving your cursor on top of one of the Chinese characters should be sufficient."}
{"project_id": "Alacritty", "bug_id": "196", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Partially visible hints create invisible labels\n\nDescription:\nWhen only the tail of a hint is visible due to the hint being broken over multiple lines, the hint mechanism is still triggered but no hint label is shown. As a result, the next input is swallowed or a hint is triggered unexpectedly. Ideally in this case the hints should either not be part of the hint selection, or the label should be rendered above the first visible part of the hint. Since a single cell is enough for rendering any hint label, allowing the interaction with a partially visible hint seems the most reasonable option.\n\n"}
{"project_id": "Alacritty", "bug_id": "197", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Cursor position incorrect when scrolling into history\n\nDescription:\nIt seems like a recent commit has introduced a regression where the cursor is displayed at the wrong position when scrolled into history. If the history is filled, the screen is cleared and then the user scrolls up, the cursor no longer is at the prompt position.\n\n"}
{"project_id": "Alacritty", "bug_id": "198", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Crash when coming back from full screen on i3\n\nDescription:\nOpening alacritty, setting it to full screen and coming back gets it to crash with the following backtrace: Full logs: Note that it doesn't happen with every geometry and seems to be linked to the size of the window on opening. Opening a terminal on an empty workspace, going fullscreen and then back doesn't trigger the crash. Opening a second one while splitting vertically and trying to reproduce the bug only works with the newly opened one, not the original one even though their current size is the same.\n\nDiscussion:\nWhich version is this?\n---\nCurrent master, 05917b27405f797bca817fa68305c08b74897997\n---\nAh great, that makes sense. Thanks.\n---\nLooks to me like the mouse cursor position isn't correctly clamped to the viewport after a resize positioned it outside of the window.\n---\nI can even trigger the crash when opening alacritty if my mouse is below where it would open but only on the left side Also ![clamps](https://user-images.githubusercontent.com/3650385/114851020-aa949a00-9de1-11eb-86c5-a76d11008495.jpg)\n---\nAh, that's likely due to it resizing on start."}
{"project_id": "Alacritty", "bug_id": "199", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: No response to mouse event when on tmux\n\nDescription:\nThere is no response from tmux to mouse event(click, drag or scroll) when on tmux with Alacritty. So nothing happens on tmux and can't do these operation with mouse such as switching a pane or a window, pane buffer scrolling and text selection even if enables tmux mouse config (`set -g mouse on`). On the other hand, they have been worked correctly that the scrolling or text selection with mouse which are implemented by Alacritty such as vi mode and mouse events with shift key pressing. This problems isn't caused on tmux with xterm, urxvt or st. This regression maybe have been caused on 9cb5562 because doesn't happen this problem on 1f46bb7 which is just before 9cb5562. ### System OS: Linux Version: alacritty 0.8.0-dev (9cb5562) Linux/BSD: X11, Xmonad tmux: next-3.3 (9af78c8)\n\nDiscussion:\nThanks!"}
{"project_id": "Alacritty", "bug_id": "200", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Resize does not keep viewport in place\n\nDescription:\nIt seems like there was a regression with resizing the viewport, where content would be incorrectly moved around when a long line was resized while inside of the scrollback history. https://user-images.githubusercontent.com/8886672/110221220-d78c8d80-7ec2-11eb-9a8e-58885a582591.mp4 I have not yet bisected this, but I'm fairly sure this worked correctly previously without moving the viewport around.\n\nDiscussion:\nAre you sure this worked previously? Tried to bisect the issue earlier and couldn't find a working version all the way down to v0.5.0. Nevertheless, I came up with a solution and sent a PR."}
{"project_id": "Alacritty", "bug_id": "201", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Vi cursor position incorrect when scrolled up\n\nDescription:\nWhen entering vi mode without the terminal cursor visible, the vi cursor is created outside of the visible region. This leads the cursor being invisible and the viewport jumping around as soon as the cursor is moved.\n\n"}
{"project_id": "Alacritty", "bug_id": "202", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Properly overwrite wide chars\n\nDescription:\nCurrently when the cursor is positioned above a wide char, or a wide char spacer, the underlying cell is simply overwritten without considering the previous fullwidth character content. This can be reproduced with the following two escapes: This writes a character in the spacer of the first full width character, leading to overlapping glyphs. This overwrites the first full width character, which first seems to render correctly, however selecting the leftover wide char spacer will lead to the selection expanding across the other full width character incorrectly. I'm not sure if this is ever a problem in practice, since usually content is cleared before it is rewritten to ensure correct behavior, but Alacritty's current behavior is probably the farthest away from correct in any of the terminal emulators I've tested. The proper solution would likely to overwrite the entire fullwidth glyph when a character is written in either of its two cells, but there is one terminal that behaves differently (Kitty), which just doesn't write the character to the grid at all if it is written to the location of the spacer. A proper resolution would likely not be very complicated, however certainly have some negative performance impact since I'd expect it to require two additional conditionals in the `input` function whenever any character is written. If there's a solution that can circumvent these in the hot path that would probably be ideal.\n\n"}
{"project_id": "Alacritty", "bug_id": "203", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Mouse enabled hint only highlights first match\n\nDescription:\nWith this simple hint: And the following text in the grid: Only the first `foo` will be highlighted on mouseover. This does not seem to be an issue for the keyboard hints.\n\nDiscussion:\nHuh, that's somewhat odd. This isn't an issue with the URL hint.\n---\nI stand corrected actually: It seems like multiple URLs do **not** work correctly in all cases. The only thing that works is multiple URLs found through sub-matching as a result of `post_processing`."}
{"project_id": "Alacritty", "bug_id": "204", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Observed CSI query responses out of order\n\nDescription:\nI like to query the background color via a `\\033]11;` query. To make it possible to detect if a terminal does not support it, I also append a second just general DA1 query, so that I can see in the response immediately if I only get a response for that, so I conclude that the terminal can't answer the first and don't have to wait until I reach some timeout. However, alacritty is answering these requests out of order: Below you see first the background color request followed by the `\\033[c` DA1 query. The response to the DA1 query arrives first and a few moments later the response to the background color arrives. #### Actual result: responses out of sequence #### Expected result: responses in sequence of query I'd expect that the result would be in sequence of the queries: With this out-of-sequence response, my plan to use it as a detection if a specialized query is supported of course won't work as intended. Is out-of-order response generally something that I have to expect from a terminal emulator or is this particular issue a bug in alacritty ? ### System OS: Linux Version: `alacritty 0.8.0-dev (a954e07)` _compiled from head_ Linux/BSD: X11 (Context: I intend to use the double-query in http://timg.sh/ to be able to quickly detect terminals that don't have the background color query feature)\n\nDiscussion:\n> Is out-of-order response generally something that I have to expect from a terminal emulator or is this particular issue a bug in alacritty? I'm not sure if there's any hard guarantee on the order of responses, but this particular instance is due to the fact that Alacritty has to delegate the color response to the UI, while being able to write the terminal identification directly to the PTY. I'd say generally Alacritty should behave properly here, but I wouldn't make any guarantee for other terminals. Your \"solution\" is obviously not a proper way to query for capabilities.\n---\nIs there a recommended way how to be able to determine if a query is supported by a terminal without having to time-out on a request ?\n---\nQuerying for terminal capabilities. Though chances are you'll still have to timeout for some stuff that doesn't have a capability."}
{"project_id": "Alacritty", "bug_id": "205", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Primary selection not updated\n\nDescription:\n### System OS: Linux Version: alacritty 0.7.1 (a852eb85) Linux/BSD: Gnome Wayland (Manjaro) ### Issue I'm using primary selection a lot. I've recently installed alacritty on my new system, and for some reason, I can select some text once, paste it using middle mouse click, and if I select another text in the terminal the primary selection buffer isn't updated, which means when I do another middle mouse click it pastes the first content I selected. I don't know if that's an issue with alacritty itself or my system but this doesn't happen in applications like Firefox and such. Also, weird behavior, if I change my current app (alt-tab, change of virtual desktop), I am able to select and paste again, only once, again.\n\nDiscussion:\nAre there any output logs?\n---\nNot that I can see. The `-vvv` logs doesn't show anything when I select, and with events shown there's so much output I can't distinguish what's going on. I'll try to filter that out.\n---\nThe alt tabbing sounds strange to me. If the clipboard thread crashed, I would understand, but if it recovers that sounds like everything should be working fine. Does copying to the clipboard work, not the primary selection buffer? If so that should mean that Alacritty is still able to communicate properly with Wayland. If that works just fine, I'd honestly try to test with a different compositor since GNOME is usually a bit suspect.\n---\nhappens to me as well. 100% reproducible. I can provide any logs, just tell me what is needed. Small screen cast showing the problem: https://gofile.io/d/L5J7N0 ---- PS `alacritty -vvv` simply does not emit any new log entries when selecting text\n---\nNote that I wasn't facing that issue when I wasn't on Wayland. Otherwise, that's the exact same thing as @axxapy. Tried grepping on the output of `alacritty --print-events` but I quite don't know what I'm looking for to be honest.\n---\n> Does copying to the clipboard work, not the primary selection buffer? If so that should mean that Alacritty is still able to communicate properly with Wayland. If that works just fine, I'd honestly try to test with a different compositor since GNOME is usually a bit suspect. Copy/Paste (Ctrl+Shift+C/Ctrl+Shift+V): same issue\n---\nOn Sway I get nothing of the sort, but I can reproduce this on Weston (for the clipboard only, seeing as how they don't even implement the primary selection). [Here's the full wayland log when it happens](https://github.com/alacritty/alacritty/files/5890994/wl-log.txt) if that is more useful.\n---\n@r-c-f By reproduce you mean you can not only get the clipboard to stop working, but it also starts working again once you switch between applications? > The -vvv logs doesn't show anything when I select, and with events shown there's so much output I can't distinguish what's going on. I'll try to filter that out. If someone can check the logs and grep for `clipboard` with at least warn and debug enabled, that might be helpful. There should be the errors `Unable to load text from clipboard` and `Unable to store text in clipboard` emitted when a store/load fails for some reason.\n---\nI don't see any errors/warnings or any mention of clipboard or selection running as:\n---\nJust `alacritty -vvv | grep \"clipboard\"` should be sufficient. Though that would mean that the clipboard thinks it is operating smoothly, which kinda makes me suspect that it might be a compositor problem. Maybe @vberger knows what's going on?\n---\n> Just `alacritty -vvv | grep \"clipboard\"` should be sufficient. This produces no output. > which kinda makes me suspect that it might be a compositor problem. Maybe, but other applications (firefox, konsole, gnome-terminal, thunderbird) don't seem to encounter this problem.\n---\n@chrisduerr Indeed. Grepping through logs for the relevant wayland events while repeatedly copying random text without changing focus, one sees from alacritty a pattern like and so on, whereas with weston-terminal (which is functioning as one expects) there is At a glance I would guess the proximate cause is the absence of the `wl_data_source.cancelled()`, with the effect that the old `wl_data_source` -- still entirely valid so far as the protocol is concerned -- is being used, no matter how many new ones are successfuly created and offered to the compositor. Once another client sets the selection the cycle is broken as `cancelled()` is finally received. If the `WAYLAND_DEBUG` logs under GNOME show the same thing it would be unlikely to be a compositor bug, but even if it isn't I would strongly suspect that it's not really alacritty proper that is at fault but one in the chain of dependencies that are actually speaking Wayland to the compositor.\n---\nIt looks like a regression. It works for me if I build alacritty 0.6.0 (04cbf76). A manual bisect shows the failure was introduced on this commit: - https://github.com/alacritty/alacritty/commit/116faba7c607f1b2cb56c390d44b33a52603f642 So it looks like an issue with the https://github.com/Smithay/smithay-clipboard crate.\n---\nI've reported the issue upstream in https://github.com/Smithay/smithay-clipboard/issues/33. If anyone has additional information, I'd recommend posting it there.\n---\nI can confirm that currently working workaround is to downgrade alacritty to 0.6.0 Tested on gnome 3.38.3 (arch linux, kernel 5.10.11)"}
{"project_id": "Alacritty", "bug_id": "206", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Synchronize updates with terminal clients\n\nDescription:\nWhenever I use ` ` or ` ` in vim while scrolling through a large file the screen flickers - it looks like for a moment the screen goes black and then the new content is redrawn, but it takes enough time to be noticeable and annoying. What's perhaps more interesting is that when I scroll half of the page via ` ` only the bottom part of the window flickers, while top one does not. This issue is observed both inside and outside of tmux. Other terminal emulators don't have this issue. * My `alacritty` is built with `cargo` from sources, repo at commit d5ab4183c69e37e8d309acf7b38c2071106bceb7. * OS: Arch linux with kernel `4.10.13-1-ARCH` * Graphics: * drivers: `intel (unloaded: modesetting)` * GLX Renderer: `Mesa DRI Intel Ivybridge Mobile` * GLX Version: `3.0 Mesa 17.1.0` I have also reproduced it on a different machine, with nvidia's GPU, alas low in terms of performance: * The same repository commit (d5ab4183c69e37e8d309acf7b38c2071106bceb7) * OS: Arch linux kernel `4.11.2-1-ARCH` * Graphics: * driver: `nvidia` * GLX Renderer: `Quadro 600/PCIe/SSE2` * GLX Version: `4.5.0 NVIDIA 381.22` * Direct Rendering: `Yes` Do you have any idea what could be a problem here? This issue prevents me from using `alacritty` on a daily basis, because said flashing constantly distracts me. This problem is also mentioned in #555\n\nDiscussion:\nI've experienced this as well. This bug turns out to be an interesting problem! To see why we get the flickering and why it's difficult to resolve, consider how the read/parse/draw loop works: 1. Some data arrives from the pty. The I/O thread reads this into a buffer. 2. I/O thread locks the terminal state struct and runs that buffer through the parser. 3. I/O thread registers that terminal is dirty and requests a draw. 4. I/O thread releases lock on terminal state, blocks for another read. 5. The render thread acquires lock, draws frame, and calls swap buffers. The call at the end to swap buffers will block for ~17ms, and another frame cannot be drawn until it returns. The flickering happens because: 1. Just enough data is read to cause the terminal to scroll 2. frame is drawn 3. more data arrives to fill in scrolled area, but it cannot be drawn until next frame To me, this seems like a problem with terminal protocol. There's no framing, so we cannot know whether more data is coming or not. Since we can't fix terminal protocol, we're left with doing something heuristical like trying to read with a short timeout. The trick with such a heuristic is providing sufficient time for related data to arrive without ever causing a frame skip. If you or anyone else has other ideas on how to address this, or even ideas about how such a heuristic could work, I'm all ears. I've been thinking about this problem for a while and haven't come up with a solution I love.\n---\n@fuine I'm using this plugin, and not experienced the flicker with it, might want to check it out: https://github.com/yuttie/comfortable-motion.vim. It's also pretty cool to use.\n---\n@jwilm thanks for the explanation, I will think about that problem. @asilvadesigns I've tried that plugin before but I don't like the CPU overhead that it brings to the table\n---\nThere is also ongoing work in neovim to improve the terminal gui. For example: https://github.com/neovim/neovim/pull/6816 When using alacritty in neovim I notice a lot more cursor flickering than with other terminals. However, I think this is a problem with vim/neovim because there as been quite a few pull requests that tries to clean up the terminal ui code so that the cursor doesn't jump around so much when drawing updates. (Like this one: https://github.com/neovim/neovim/pull/6366) Speaking of which, @jwilm could there perhaps be a debug mode in alacritty where you can step though the screen updates? That is, you can freeze the screen and then step through the cell updates. I think it would be really helpful when debugging flickering issues in neovim (so you can see what neovim does when it redraws the cursor position for example).\n---\nIf your program operates as described, which I am taking on trust and have not looked at your program to check, then _this does_ have its roots in your program. Programs like vim and nvim collect screen output into in-memory buffers and flush it at certain points. (This is their own buffering system. Of course, full-screen programs that use standard I/O buffering instead, still do the same thing.) This results (as one can see from tools like `truss`, `dtrace`, and `strace`) in all output for things like scrolling operations or full screen redraws being sent often in one giant `write()` system call, often several KiB in one big lump. Your best strategy in receiving this is to attempt to read and process all of that lump in one go before letting your renderer lock the terminal state for a vertical blanking interval. It is a falsehood to say that there's no way of doing this. There are three different approaches, each with their own tradeoffs: * For programs based upon `kevent()`, the `EVFILT_READ` events contains the number of bytes available to read in the `data` field of the event structure. It also signals EOF separately from this. * Making the pseudo-terminal master use non-blocking I/O tells `read()` to return if there are no more data. This somewhat complicates hangup processing as a side-effect, as `read()` returning zero bytes can mean either temporarily no more data or pseudo-terminal EOF. * There is a `FIONREAD` generic `ioctl()` available (at least) on the BSDs, on Solaris, and on Linux for terminal devices. Instead of simply reading a portion, processing it whilst holding a lock, sending the other thread a shoulder-tap, then going back to look for another portion; make your program repeatedly read and process all portions until the master side of the pseudo-terminal is drained of output sent from the slave side, and only send the shoulder-tap when that is the case. Or make your rendering side use a snapshot of the terminal state, and not lock the terminal state for the entire length of time that takes to render.\n---\n> Instead of simply reading a portion, processing it whilst holding a lock, sending the other thread a shoulder-tap, then going back to look for another portion; make your program repeatedly read and process all portions until the master side of the pseudo-terminal is drained of output sent from the slave side, and only send the shoulder-tap when that is the case. That's actually how alacritty currently works: https://github.com/jwilm/alacritty/blob/3c8514ba103d5d987d2269c421a3cc09e6784904/src/event_loop.rs#L259-L307 However, I think the idea of snapshotting the terminal state instead of holding a lock sound promising.\n---\nNo, that's not how that code works. That reads a portion, processes it whilst holding a lock, sends the other thread a shoulder-tap _the first time around_, and then releases the lock and goes back to look for another portion. That's not the same as sending the shoulder tap after the master has been drained; it is not the same as checking that there's no more to read before sending a shoulder tap. Moreover, programs like `nvim` _easily_ will cause multiple iterations of that loop with a single screen refresh, or scroll. A redraw of a mere 80&times;25 window with syntax colouring on, for example, can easily generate between 6KiB and 8KiB of output in 256-colour mode; more in true-colour mode. (I have managed to cut this down a bit for the `nvim` people, but this is what current release `nvim` does.) Programs such as `nvim` can easily generate far more output in one lump for a single scroll/redraw than you are reading there in each iteration. And the initial clear screen or scroll command that comes early in the output leaves part of the terminal blank _until_ they re-draw what is on it later in the output. So the problem behaviour is as described. You are starting the render, locking the terminal state for a vertical blanking interval, when there's more than half of the `nvim` refresh/scroll output yet to be read from the pseudo-terminal and processed and half of the terminal is temporarily blank. The fix is to process it _all_ before rendering. Then you won't get tearing like this.\n---\n@jdebp thanks for all the feedback. I'm working on this right now, and I think the way to go is just reading until getting an EWOULDBLOCK. > For programs based upon kevent(), the EVFILT_READ ... This sounds great, but there's no equivalent for epoll. > There is a FIONREAD generic ioctl() ... Doesn't work in my testing on macOS. Upon the event loop signaling read readiness, the ioctl just returns 0. > Making the pseudo-terminal master use non-blocking I/O tells read() to return if there are no more data. I've been experimenting with this approach locally with good results. Note that `nvim` sometimes sends another tiny chunk after the primary chunk when paging. Here's some logs showing bytes processed on each iteration. When WouldBlock is encountered, the renderer is notified and the terminal lock released. I'll follow up again here once there's a patch for others to try.\n---\nPlease see #650 for the patch I promised. Although it seems to resolve the issue with `neovim`, it doesn't have any affect with vim 7.4 (haven't tested with 8) since write batching was apparently added in neovim. I'm looking for some specific feedback on the patch. It seems that, on my system, this patch causes some hiccups where a frame is skipped, or input isn't delivered in a timely fashion. Could have been my imagination too. Would love to hear how it works for others!\n---\n@jwilm no flicker in neovim, or neovim in tmux!!"}
{"project_id": "Alacritty", "bug_id": "207", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Paste only pastes first byte with manual mouse selection\n\nDescription:\n### System OS: Linux Version: `alacritty --version` output: `alacritty 0.8.0-dev (cbcc129)` Linux/BSD: Fedora 33 ## Problem Manually selecting text using the mouse and then attempting to paste it only pastes the first byte that is *selected*: - If you select \"forwards\" (left to right), the first byte on the left of the selection will be pasted on middle click. - If you select \"backwards (right to left), the *last* byte on the right (aka the first byte selected) will be pasted on middle click. Notes: - *Double-clicking* a word and pasting with the middle mouse button works correctly. - *Triple-clicking* an entire line and pasting with the middle mouse button works correctly. I've run `alacritty` as follows but see no errors: This feels similar to #4735. Random thought: I wonder if there is any way to automate copy/paste testing in a CI environment?\n\nDiscussion:\nCould you share a recording of this in action? Also are you on X11 or Wayland?\n---\nHi @chrisduerr - sure: https://asciinema.org/a/tMNVg9O6TFtQCuTlbzEFbyZix\n---\nThis is on Wayland.\n---\nIs this a regression? If so, can you bisect it?\n---\nAlso could you please not use asciinema to report a terminal bug? It's rather useless for this.\n---\n@chrisduerr - Can you recommend a better recorder that works on Wayland? It's very easy to reproduce this bug so I'm not sure it's worth much effort getting a good recording tbh ;) I'm happy to bisect but won't be able to do this for a few days. But yes, it's a regression afaik.\n---\nI can't recommend anything on Wayland. But obviously something that actually records the screen is required to give a useful display of what's actually going on. If this happens on Wayland, that's likely the reason why I cannot reproduce it. A bisect in that case would probably be more useful than a recording.\n---\nI'd assume the issue is due to Wayland DoS protection and likely comes from https://github.com/alacritty/alacritty/commit/cbcc12944006603131119b73c2ad72ebccf4562d.\n---\n@chrisduerr - confirmed - that top commit cbcc129 is the problem.\n---\n@jamesodhunt Could you verify that #4979 solves your issue?\n---\nHi @chrisduerr - yep, works for me! Thanks."}
{"project_id": "Alacritty", "bug_id": "208", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Search mode focused_match using incorrect CellBackground/CellForeground colors\n\nDescription:\n### System OS: Linux Version: 0.7.2 Linux/BSD: X11, i3wm Tested with the default config. https://user-images.githubusercontent.com/33134232/116493381-798d7e00-a853-11eb-9a75-ed63188a5623.mp4 While in search mode, the focused match is expected to use the CellBackground/CellForeground colors like when selecting text. However, alacritty seems to be using the whatever colors are set under `search.matches` as the cell background/foreground.\n\nDiscussion:\nCould you test this with the latest master? This issue seems oddly familiar.\n---\nI'm not sure exactly what the issue here is honestly. First you set the `search.matches` colors to black on white, then tell the `focused_match` to invert it, thus causing you to see white on black. Personally, I make use of this default behavior to get the style I'm happy with: ![screenshot-2021-04-29T12:51:04Z](https://user-images.githubusercontent.com/715947/116553400-14c03b00-a8c8-11eb-94db-2d9453b25c00.png) The reason this _does_ seem like an issue is that a focused match acts like a selection, so it may seem weird to have it styled differently. That said, I'll add that the focused match's selection takes precedence over an actual selection for the purposes of the `CopySelection` action and `save_to_clipboard` option, perhaps making the existing behavior of distinct colors make some sense. Given how that works, I would expect the focused match colors to also take precedence over the selection's, which doesn't seem to be the case currently (see below image): ![screenshot-2021-04-29T13:01:10Z](https://user-images.githubusercontent.com/715947/116554762-8fd62100-a8c9-11eb-8159-cb4554b449bc.png) Am I missing some other history around this issue? I vaguely recall some other discussions.\n---\n> Could you test this with the latest master? This has the same behavior on master.\n---\n> First you set the search.matches colors to black on white, then tell the focused_match to invert it, thus causing you to see white on black. The inversion should not be applied on top of the match color, but based on the cell's color. There's no reason why it would be applied on top of the match color, that has no benefits.\n---\n> here's no reason why it would be applied on top of the match color, that has no benefits. Did you read the rest of my post? The focused match actually overrides the primary selection, so it makes sense to me to highlight it above. EDIT: It also does have the benefit of making every focused match the same color and thus easier to spot regardless of it's original color. As I said above, I'm currently quite happy with this behavior.\n---\n> The focused match actually overrides the primary selection, so it makes sense to me to highlight it above. It doesn't really make sense to have inversion semantics just for selection. > It also does have the benefit of making every focused match the same color If that's your goal, just set both to the same color. Zero point in using CellRgb for that."}
{"project_id": "Alacritty", "bug_id": "209", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: 100% CPU and freeze on Windows as regression of c6ed855\n\nDescription:\nAlacritty takes 100% CPU and freezes on Windows after c6ed855b. When line 227 hits for the first time, it returns `Ok(got: 488)`. But in later iterations, it always returns `Ok(got: 0)` and loops forever. It seems that `Ok(got: 0)` is an edge case on Windows and needs special handling like previous code. https://github.com/alacritty/alacritty/blob/c6ed855bfa036ffe5e3e3ea12819db6a1a25d4e1/alacritty_terminal/src/event_loop.rs#L225-L265 ### System OS: Windows Version: c6ed855b ### Logs\n\nDiscussion:\n> It seems that Ok(got: 0) is an edge case on Windows and needs special handling like previous code. Thanks a lot for pointing that out. I was curious for the longest time what the reason for the `Ok(0)` in the old code was and I couldn't find any way to reproduce it. Guess that answers the question. I've got a PR addressing some performance concerns lined up, I'll include the `Ok(0)` edgecase in that.\n---\nJust fyi, the same freeze happens on mac os as well"}
{"project_id": "Alacritty", "bug_id": "210", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Out of bound panic with text zooming\n\nDescription:\nCurrently reproducible with weechat (on a japanese channel). Zooming too much (with `ctrl`+`+`) leads to the following panic: `thread 'PTY reader' panicked at 'index out of bounds: the len is 98 but the index is 98', /home/ux/src/alacritty/alacritty_terminal/src/term/mod.rs:778:17` I'm unable to make a simple reproducible case so for now here is a video: https://user-images.githubusercontent.com/34467/119862930-51a83d80-bf19-11eb-899b-fcaf36b4650a.mp4 ### System OS: Linux/X11/i3wm Version: `alacritty 0.8.0 (a1b13e68)` and `alacritty 0.9.0-dev (3c61e075)` ### Logs `-vv`: [Alacritty-314389.log](https://github.com/alacritty/alacritty/files/6555458/Alacritty-314389.log)\n\n"}
{"project_id": "Alacritty", "bug_id": "211", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Cause crash when display multi byte character in tmux and resize window or change font size.\n\nDescription:\nI always use alacritty, thanks. ### Repro step 0. Run tmux session 0. Execute `for i in $(seq 1000); do echo '\\u3042'; done` in shell 0. Resize window or change font size many times ### System OS: Linux Version: alacritty 0.9.0-dev (3c61e07) X11, i3wm tmux 3.2 ### Logs Crashes: STDERR, STDOUT Font/Terminal size: `alacritty -vv`\n\nDiscussion:\nCould you go into a little more detail? I don't think I can reproduce the crash, at least it wasn't possible immediately. Are you just running the command once and then resizing or do you keep running it?"}
{"project_id": "Alacritty", "bug_id": "212", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Debug mode crash in hint update\n\nDescription:\nIt seems like searching in vi mode with history present causes Alacritty to crash in debug mode and freeze in release. Backtrace\n\n"}
{"project_id": "Alacritty", "bug_id": "213", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Crash when selecting text while selecting rapid text output\n\nDescription:\nCrash while selecting moving text. ### System OS: macOS (Big Sur 11.2.3) Version: alacritty 0.8.0-rc3 (706f476) ### Logs ### Video I ran `find . | perl -npe 's/\\w/x/g'` and selected text while it spewed. It very reliably crashes: https://user-images.githubusercontent.com/2621/117462177-3aba9080-af03-11eb-8099-a70a725a4c32.mov\n\nDiscussion:\nGreat find, thanks for testing the RC. I can reproduce, should probably be an easy fix."}
{"project_id": "Alacritty", "bug_id": "214", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Crash while resizing with 'index out of bounds: the len is 55 but the index mod.rs:796:17'\n\nDescription:\n### Description I am not entirely sure about the preconditions, but it seems to be related to the font. - Start `nvim` in the `alacrity` and open some file to edit - Keep resizing the window multiple times - crash Building alacrity with below diff seems fixing the issue: ### System OS: Linux archlinux Version: `alacritty --version` output The same issue happens to `0.8.0` as well. Linux: X11, awesomeWM ### Logs Crashes: STDERR, STDOUT Font/Terminal size: `alacritty -vv` config file: Keyboard and bindings: `alacritty --print-events`\n\nDiscussion:\nYour patch is correct, do you want to send a PR?\n---\nHave submitted a patch myself to speed up the process. Thanks for the report."}
{"project_id": "Alacritty", "bug_id": "215", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Panic in 'PTY reader' thread when printing large binary file to stdout\n\nDescription:\nAfter following the `refterm` saga, I generated a large binary file via `dd` from `/dev/urandom` and tried `cat`ing it to stdout to see how fast Alacritty got through it. Instead Alacritty unexpectedly panicked in the pty reader thread. I tried narrowing down the file to the bare minimum, but couldn't shrink it past this point and still reproduce the issue. I'll try doing a build with debug symbols in the upcoming couple of days to get a more useful stack dump. ### System OS: Linux (Arch Linux) Version: alacritty 0.8.0 (a1b13e68) DE: Gnome 40.3 ### Logs This zip contains the smallest file that still reproduces the issue in my install: [bad.zip](https://github.com/alacritty/alacritty/files/6833589/bad.zip)\n\nDiscussion:\nCan you reproduce that with the latest master?\n---\nI couldn't reproduce this on master or v0.8.0 . Not saying the issue doesn't exist just that it isn't deterministic. Arch Linux, Sway. Btw on my machine Casey's termbench https://github.com/cmuratori/termbench does not crash either in contrast to what he experienced.\n---\nLet me know if you can reproduce it.\n---\nReproduced on commit 7913aa557618ca0df8d5a144f9425cb9b357c815, and got a full backtrace: Build command: `cargo build --release`\n---\nI haven't yet narrowed it how it got to this state, but the issue appears to be that `point.column` is 0 when it reaches this line: The `point.column - 1` causes a 64-bit unsigned integer underflow. Following diff fixes the issue in my builds, though I'm sure it's not acceptable for merge or anything like that:\n---\n@Dar13 Do you know how to reproduce it?\n---\nWhile fixing this should be trivial, I'd **really** like to know how this edgecase can be created. I'm certainly not able to reproduce it. So I'm going to hold off on sending a patch until someone can provide repro instructions.\n---\nI'm having a hard time narrowing it down to something smaller than a 12K file, but I'm still working on it. Between work and other stuff, it might take me a few days.\n---\nI think chrisduerr means that for him like for me the catting the file does not panic. Maybe the dimensions of the alacritty window and font size matter.\n---\nYes, I cannot reproduce it. I ran `cat /dev/urandom` in the primary and alt screen for 30 minutes without any luck. So I'd ensure that you're running the version you think you're running and provide some **exact** details on what is necessary to reproduce this.\n---\n> I think chrisduerr means that for him like for me the catting the file does not panic. Maybe the dimensions of the alacritty window and font size matter. You're on to something re: alacritty window and font size, when the terminal window is made wider the underflow doesn't occur. When I launch alacritty, it has the following size: I can reproduce the underflow at this size reliably. If I make the window wider: then I don't see the underflow occur. Log from running with `-vvv`: [test.log](https://github.com/alacritty/alacritty/files/6854943/test.log), the line(s) that starts with `Point column is zero!` shows that the bug has been encountered Output from `--version`: `alacritty 0.10.0-dev (7913aa55)` I've been using this file in particular to reproduce, I can't shrink it down anymore without the issue going away: [bad3.zip](https://github.com/alacritty/alacritty/files/6854982/bad3.zip) If you still can't reproduce @chrisduerr, I'm fine with you ignoring/closing this issue until I find the time to get to the root cause.\n---\nCan reproduce with 30x120 dimensions.\n---\nIt seems like this is related to insert mode, where it is possible to move a wide character to the right of the row by inserting numbers in front of it. I believe the issue is that we do this by rotating the current line and then overwriting the existing text, however when the spacer of a wide character is rotated back to the beginning of the line and we then overwrite it, we end up trying to write to a cell that is now occupied by a wide char spacer in the first column. I should have a fix up in a bit.\n---\nThis is a little script for reproducing the issue:"}
{"project_id": "Alacritty", "bug_id": "216", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Scrolling in terminal scrolls Vi mode when display_offset != 0\n\nDescription:\nTo reproduce output something to generate scrollback and then do the following When output from `ls` or `cat ` appear the cursor will scroll for the amount of lines output, however it should stay still.\n\nDiscussion:\nHm, I feel like that might actually be a tough one. Since the vi cursor position is absolute from the bottom of the grid, we'd have to determine the display offset at scroll time which seems awfully inefficient.\n---\nI feel like it was working the way I described in the issue. At least in December.\n---\nBefore the grid indexing rework the vi mode cursor was viewport based, rather than using a global index. So that's why it worked before without any further trouble. Of course changing back to a viewport based indexing would be an option for the vi mode cursor. This issue also allows the vi mode cursor to leave the viewport, which is problematic."}
{"project_id": "Alacritty", "bug_id": "217", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Hint post processing crash\n\nDescription:\nAlacritty with the following config crashes when hovering over the `)` character. It only crashes with post processing enabled and I get no relevant output with `-vvv` or `--print-events`. `alacritty 0.9.0 (fed349aa)` on Linux + Wayland (sway)\n\n"}
{"project_id": "Alacritty", "bug_id": "218", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: `alacritty msg create-window` copies shell\n\nDescription:\n#5560 already tracks the option to specify a separate shell for Alacritty's `create-window` command, however by default the command of the first executable is still copied. This doesn't make much sense and can lead to confusing behavior. Ideally the parameters of the initial window should be largely ignored and replaced with the default. Then new parameters can be passed through the command when #5560 is resolved. Repro:\n\nDiscussion:\nI agree, but I don't think that every parameter should be ignored, since if you change opacity or colors with `-o` option in that case you'd like to keep changed options for newly created windows."}
{"project_id": "Alacritty", "bug_id": "219", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: On aarch64, crash on suspend/sleep since glutin 0.27 bump\n\nDescription:\nSince the bump to glutin 0.27, on my aarch64 laptop (Lenovo C630), when I suspend the desktop, or it goes to sleep, alacritty crashes. Forcing the glutin dependency back down to 0.26, and the crash no longer occurs. I'm assuming this is probably something that should go to the glutin repo, but I figured I would report it here. ### System OS: Linux (aarch64) Version: 0.10.0-dev (7913aa55) Linux/BSD: X11, Budgie WM ### Logs\n\nDiscussion:\nUpstream issue: https://github.com/rust-windowing/winit/issues/1972\n---\nThis is an issue for my AMD64 machine as well. More investigation into this issue shows the following PR: https://github.com/rust-windowing/winit/pull/1952\n---\nGetting this same issue, causes a great impact to workflow\n---\nYou shouldn't be hitting it, afaik, they bumped the required glutin version down to 0.26 in https://github.com/alacritty/alacritty/commit/d85f53dbe343cc939acb1fad7b69ba52df81f8e9 which should mean that alacritty should be using glutin 0.26, not 0.27 currently."}
{"project_id": "Alacritty", "bug_id": "220", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: macOS menu bar cannot be accessed in full screen mode\n\nDescription:\nWhen Alacritty is running in full screen mode you cannot access the menu bar. To reproduce, simply click the green `+` button to enter full screen mode, and attempt to access the system menu bar. It does not appear. This was also reported by @monokrome on #1252. ### System OS: macOS Version: alacritty 0.5.0 (a6681e3)\n\nDiscussion:\nThis was already reported upstream in https://github.com/rust-windowing/winit/issues/1195, though I don't think we have an Alacritty issue for it yet.\n---\nIs there a way to exit full screen without the menu bar present?\n---\nThe default macOS binding to toggle fullscreen is `Ctrl + Command + F`.\n---\nHas this been addressed for Alacritty yet? I've been playing around with options settings, but I haven't found a way to fix it yet.\n---\nThis issue also impacts me, and I found a recently opened promising PR on the upstream side: https://github.com/rust-windowing/winit/pull/2046. Just something to keep track of.\n---\nMerged upstream in https://github.com/rust-windowing/winit/pull/2053 Can't wait till this lands in alacritty!\n---\nSame issue in fullscreen mode."}
{"project_id": "Alacritty", "bug_id": "221", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty crashes when in vi mode and terminal clears\n\nDescription:\nAlacritty panics when receiving any clear ansi escape code (tested with `^[[2J` and `^[c`) when in vi mode near the top of a long buffer with the following message: ### Steps to reproduce ### System OS: Linux 5.14.11-arch1-1 Version: alacritty 0.9.0 (fed349aa), alacritty 0.10.0-dev (f90dd12e) Linux/BSD: Swaywm ### Logs\n\n"}
{"project_id": "Alacritty", "bug_id": "222", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Can't render Chinese characters in bold face\n\nDescription:\n### System OS: macOS Mojave Version: 0.4.1 ### Logs It's a bit weird when I type `alacritty` in terminal, outputing with `zsh: command not found: alacritty` ### Font configuration In alacritty: ![image](https://user-images.githubusercontent.com/30763967/73516016-3404ba00-4432-11ea-9bce-bc0ad789d627.png) In iTerm2: ![image](https://user-images.githubusercontent.com/30763967/73516043-441c9980-4432-11ea-8c44-b3fe34338a35.png) As the pictures show above, the characters `ä¸­æ–‡` is not correctly rendered as bold face in alacritty compared to iTerm2.\n\nDiscussion:\nAnd I can comfirm this issus exists in Manjaro Linux with alacritty 0.4.0.\n---\n@hkunzhe Could you retest latest master on your Linux system?\n---\nI only have the macbook pro on hand right now. And I may not able to access my working desktop with Manjaro Linux for a long time:) In addition, It's a bit weird when I type `alacritty` in terminal, outputing with `zsh: command not found: alacritty`. I installed alacritty with homebrew. What's wrong with this? Thanks for you great work with alacritty.\n---\nI've tested Linux parts and master performs correct now. It was fixed with #3163 a while ago. So we should do the same thing on macOS and likely Windows.\n---\nThanks for your quick action!\n---\n> In addition, It's a bit weird when I type alacritty in terminal, outputing with zsh: command not found: alacritty. I installed alacritty with homebrew. What's wrong with this? Because you're using macOS and macOS does not install applications as globally executable, but instead under the /Applications folder bundled in an .app. So you should execute /Applications/Alacritty.app/Contents/alacritty.\n---\n@chrisduerr, I got it. It should works with executing `/Applications/Alacritty.app/Contents/MacOS/alacritty`.\n---\nvim ~/.bash_profile Inside the file .bash_profile, insert the following line: export LC_ALL=en_US.UTF-8 source ~/.bash_profile\n---\nOn mac you can also do `open -a Alacritty --args `\n---\nWhat does your `$ locale` output, @hkunzhe?\n---\n> What does your `$ locale` output, @hkunzhe? ![image](https://user-images.githubusercontent.com/30763967/79990717-f4ef7d80-84e3-11ea-9429-db49251c95e6.png)"}
{"project_id": "Alacritty", "bug_id": "223", "source_type": "github", "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "Title: Single cell with block selection empty in vi mode\n\nDescription:\nIn vi mode, every selection should be treated as at least one cell wide. This is the case for every selection other than block selection. However, when trying to make a block selection that is only a single row wide, the selection is completely empty. This makes it impossible to copy a single column vertically from vi mode.\n\nDiscussion:\nThis worked just fine in 0.7.2."}
{"project_id": "Alacritty", "bug_id": "224", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Selection not copied after tab character\n\nDescription:\nThis morning, I had to come to the disappointing realization that... ehh.. that somebody is watching me. And it is not God. They are already knocking at my door, so I can only say that censorship has reached terminals too. Be careful! --- Jokes aside, here is a minimal, reproducible example: ### System OS: Arch Linux Version: `alacritty 0.7.2 (5ac8060b)` Linux/BSD: X11\n\n"}
{"project_id": "Alacritty", "bug_id": "225", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Vi mode search does not start at cursor\n\nDescription:\nWhen a vi mode search is started while the bottommost line on the buffer is filled, a search will move the vi cursor causing the search to start one line below the original vi cursor position. This can cause the search to wrap around the buffer, confusing the user (me in this case).\n\n"}
{"project_id": "Alacritty", "bug_id": "226", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Vi mode line indicator not hidden when hovering it with display offset\n\nDescription:\nIf vi mode is active and the cursor is in the top-right position, the vi mode line indicator is only hidden when the display offset is 0. If the display offset is 1 or higher, the cursor is hidden by the line number indicator. The indicator should be hidden regardless of the display offset when the vi mode cursor is below it.\n\n"}
{"project_id": "Alacritty", "bug_id": "227", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Invalid unicode can cause Alacritty to freeze while scrolling up\n\nDescription:\n### System OS: macOS Version: 50c7c2b469095d41a8fdf4c29589f39222a98f71 (git sha) ### Logs ![image](https://user-images.githubusercontent.com/709451/148524109-978f7e72-bc62-4a43-a0ec-bc6beb3da9ec.png) Here is the invalid text: Font/Terminal size: Keyboard and bindings:\n\nDiscussion:\nThis seems to be caused by an endless loop in the `regex_search` function called from `highlighted_at`. I'll take a closer look tomorrow but the search start/end might be located in a position we skip over? In my tests this only seemed to happen when scrolled into history, though not sure that's true yet.\n---\nIf by history you mean above the bottom of the viewport then yes. But not far up, like maybe 30 lines\n---\nStill happening it seems\n---\n@Jarred-Sumner If you can still reproduce this in the latest version of Alacritty master, please open an issue with concrete reproduction steps.\n---\nThis isn't entirely helpful, but I think the text after \"Hindi\" is the cause. Will try to narrow it down further"}
{"project_id": "Alacritty", "bug_id": "228", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Foreground working directory resolution fails frequently\n\nDescription:\nThis is a follow-up to #5659. It seems that the code responsible for determining the foreground process' working directory is frequently failing, causing the fallback to kick in with the empty working directory. In my initial tests it seemed like it always works in the first try, but any further attempts will fail. Since the fault appears to be with the `tcgetpgrp`/`master_fd` (https://github.com/alacritty/alacritty/blob/master/alacritty/src/daemon.rs#L61), this affects macOS, BSD and Linux.\n\n"}
{"project_id": "Alacritty", "bug_id": "229", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty fails to start in 10bit color mode\n\nDescription:\nI followed the following guide to enable 10bit color on my machine. 10bit color appears to working for other programs, but alacritty fails to start. (Guide from https://linuxreviews.org/HOWTO_enable_10-bit_color_on_Linux) ### System OS: Arch Linux Version: alacritty 0.7.1 (a852eb85) Linux/BSD: X11 & i3 Nvidia 3090 with driver 460.32.03\n\nDiscussion:\nHow does it fail to start? What error do you get?\n---\n### Error [2021-01-14 05:05:26.680909269] [ERROR] [alacritty] Alacritty encountered an unrecoverable error: Error creating GL context; Received multiple errors. Errors: `[NoAvailablePixelFormat, NoAvailablePixelFormat]`\n---\n(I was rebooting to go back into 10bit mode as you were responding, @chrisduerr !) I'm not an x11 expert, but what's interesting is that it can't get a PixelFormat, yet in nvidia-smi, `X Screen 0 depth` is recognized as `30`. This is despite the fact that I can't set the gpu to 10 bpc in the nvidia-smi interface, as the drop down only support depths of Auto, 6 bpc, and 8 bpc. This is using a 10bit monitor, verified hardware setup in Windows.\n---\nCan you start other OpenGL programs like glxgears?\n---\nAnd for clarification, removing the conf file and rebooting resets the reported depth to `24`, and alacritty starts normally. I encountered some sluggishness with other programs running in 10bit mode, so I'll be disabling 10bit for now. So personally, no rush for this issue. But long term, I imagine more users will run into the same problem. Shoutouts to all the devs for making such a great terminal emulator!\n---\n@chrisduerr glxgears runs just fine. Currently trying to find some image test sequences to specifically test 10bit is actually running, other than the control panel confirmation. Firefox is noticeably sluggish, though.\n---\n@chrisduerr Using the gradient test in this [video](https://github.com/jursonovicst/gradient/blob/master/test_sequences/3840x2160/gradient_3840-2160_0-100_yuv444p10_x265.mp4) , confirmed 10bit color is visible, viewing in VLC.\n---\nConfirmed also on Debian System 11 - with 30bit the same error appars, with 24bit all works as 'normal'. System: Desktop: Xfce 4.16.0 Debian GNU/Linux bullseye/sid Kernel: 5.10.0-3-amd64 x86_64 Mobo: ASUSTeK model: PRIME B550-PLUS CPU: model: AMD Ryzen 9 3900X bits: 64 type: MT MCP 12-Core NVIDIA GA104 [GeForce RTX 3070] Display: x11 server: X.Org 1.20.10 resolution: 1: 2160x3840@60Hz 2: 3840x2160@60Hz OpenGL: renderer: GeForce RTX 3070/PCIe/SSE2 v: 4.6.0 NVIDIA 460.39\n---\nThis crash is still present up to this day (just wanted to point that out so this doesn't die, this is really frustrating)\n---\nI am still experiencing the same thing! Same error as the other guy, too!\n---\nI think I'll have to just migrate to kitty, This is really sad\n---\nI was able to \"\"\"fix\"\"\" it by using this fork: https://github.com/abdelq/alacritty and editing the diffs in as seen in #5495. ( https://github.com/alacritty/alacritty/pull/5495/files/9094f176247eab3c270232bcba08250301b255a6 ) And I have no idea why nothing has been merged into the main branch yet."}
{"project_id": "Alacritty", "bug_id": "230", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: font.glyph_offset should live reload\n\nDescription:\nN/A\n\n"}
{"project_id": "Alacritty", "bug_id": "231", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Crash and assert triggered during search.\n\nDescription:\nWhile triggering Vi mode or sometimes starting search I've got the following crashes. To trigger assert you don't need to resize, I got it just from entering Vi mode. The following is following stacktrace is why I've started investigating in the first place.\n\nDiscussion:\nIt's pretty fast to trigger them if you `cat /dev/urandom` -> `trigger search or Vi mode`."}
{"project_id": "Alacritty", "bug_id": "232", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: SpawnNewInstance should not pass --command (-e) argument\n\nDescription:\nWhen alacritty is run with --command (-e) option, SpawnNewInstance is also passed this argument. My specific use case was running \"alacritty -e ranger\", and I expected SpawnNewInstance to give me a terminal for the directory I am currently parsing. Instead, it launched a new alacritty instance with ranger running. When I use ranger without invoking alacritty's --command option, it works as expected. I don't know if there's some other use case benefiting from the current behavior. I propose that it should be ignored like the --working-directory argument already is, as in the below code https://github.com/alacritty/alacritty/blob/9bbb296d1dc4f72e845695f22e903bcc1d66d5a3/alacritty/src/event.rs#L369-L372\n\nDiscussion:\nYou're absolutely correct. In fact if you do `alacritty msg create-window`, it should already behave as you would expect. Apparently it's just the `SpawnNewInstance` action that doesn't behave as intended. So you can use the command as a work around until this is fixed.\n---\nI just looked it up whilst switching from termite, nice to see someone opened the issue just 2 days ago !\n---\nIs there any alternative command to spawn a new instance through a key binding that actually inherits the --command param? I understand why it's unexpected behaviour for SpawnNewInstance but I grew to like it and made heavy use of it."}
{"project_id": "Alacritty", "bug_id": "233", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Wayland: alacritty ignores activated configure option, and instead relies on keyboard focus\n\nDescription:\nAlacritty seems to decide if it should draw the focused cursor or the unfocused one, depending on if it has keyboard focus, instead of relying on the `activated` configure option. Additionally it starts assuming it *has* keyboard focus, making it impossible to open an alacritty window, without focus (at least visually). It'd be nice if it would support the configure option, or at least start assuming it has no focus. ### System OS: Linux Version: alacritty 0.4.0 Linux: Wayland (kiwmi)\n\nDiscussion:\n> instead of relying on the activated configure option What exactly is the `activated` configure option?\n---\n@chrisduerr It's the compositors way of telling the window if it should draw itself in a focused, or an unfocused state (https://github.com/wayland-project/wayland-protocols/blob/733de76221223c2ad3ce94a588015e88c4c9dcc7/stable/xdg-shell/xdg-shell.xml#L752) Actually seems like the \"assuming focus\" part was fixed in bd6e5a9, but later broken again.\n---\nCould you share the output of `alacritty --print-events | grep \"Focus\"`?\n---\nNo output.\n---\nBut it does output something when you start focusing the window, right?\n---\nYes, `[2020-01-01 17:39] [INFO] glutin event: WindowEvent { window_id: WindowId(Wayland(WindowId(94711898852944))), event: Focused(true) }`.\n---\nAlso, could you share the output of this command when the `activated` option is not set? At least on X11 it seems like the default state is no focus and an explicit focus event is sent at startup, to fix this without upstream changes this would need to be the case on Windows/macOS and Wayland too.\n---\nIt prints nothing, no matter if it's set or not. Prints the line above as soon as the window gets keyboard focus.\n---\nThis should \"fix\" what bd6e5a9 fixed and 729eef0c broke, which might be enough, since every compositor seems to bungle the `activated` configure option with keyboard focus anyways.\n---\n@buffet This wont fix things in general tbh. We should fix this issue in our windowing library(winit) and make it send a proper Focused events on startup. While you can probably workaround the issue on Wayland with your diff, you'll break Windows (not aware of macOS here).\n---\n> This should \"fix\" what bd6e5a9 fixed and 729eef0 broke, which might be enough, since every compositor seems to bungle the activated configure option with keyboard focus anyways. You've said yourself that your compositor doesn't send focus at startup whet `activated` is disabled, so this would just break it for the majority of users. And yeah, as @kchibisov has correctly pointed out, it will also break Windows (though that could be fixed with a `cfg` annotation).\n---\nSee https://github.com/rust-windowing/winit/issues/1077 for upstream tracking."}
{"project_id": "Alacritty", "bug_id": "234", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Mouse text selection issue with multiple windows\n\nDescription:\n## Overview When at least 2 windows are open, text selection with mouse does not work properly. ### Steps to Reproduce 1. Open Alacritty 2. Put some text on the screen 3. Open a new window via `CreateNewWindow` (I have it bound to Command-N) 4. Put some text in the new window 5. Select any section of text with the mouse ### Expected Behavior The text is selected by the mouse at the location of the cursor ### Actual Behavior The text 2 lines above the location of the cursor is selected ### Workaround Don't use multiple windows ### Demo ![alacritty-multi--window-mouse-issue](https://user-images.githubusercontent.com/2954949/153506908-2ddeb235-6f69-40bd-af71-b5bb0a77af78.gif) ### System OS: macOS Big Sur 11.6.3 (20G415) Version: alacritty 0.10.0 (8a26dee) ### Logs Crashes: n/a Font/Terminal size: [`alacritty -vv`](https://github.com/alacritty/alacritty/files/8044702/alacritty-vv.log) Keyboard and bindings: [`alacritty --print-events`](https://github.com/alacritty/alacritty/files/8044709/alacritty-print-events.log)\n\nDiscussion:\nI'd assume it works when it's not tabbed? I mean when you have multiple windows, but you don't tab them.\n---\n> I'd assume it works when it's not tabbed? I mean when you have multiple windows, but you don't tab them. Correctâ€”multiple non-tabbed windows do not have the issue.\n---\nWhich macOS version is this?\n---\n> Which macOS version is this? Big Sur 11.6.3 (20G415) on an Intel Mac (2019)\n---\nJust tested this and the top of the window is also cut-off. So it's indeed pretty broken.\n---\n> > I'd assume it works when it's not tabbed? I mean when you have multiple windows, but you don't tab them. > > Correctâ€”multiple non-tabbed windows do not have the issue. It also seems to happen on fullscreen non-tabbed windows though, albeit with less of an offset to the selection.\n---\nAt least for tabbed windows a workaround seems to be to resize the window after creating a new tab. At least that worked for me.\n---\n> At least for tabbed windows a workaround seems to be to resize the window after creating a new tab. Can confirmâ€”works for me too\n---\nWeirdly, on my M1 Mac (Monterey, 12.1), `CreateNewWindow` actually creates a _new window_, and not a new tab in the same window. Not sure if this is a different issue.\n---\n> Weirdly, on my M1 Mac (Monterey, 12.1), CreateNewWindow actually creates a new window, and not a new tab in the same window. Not sure if this is a different issue. It depends on a macOS setting and the existence of decorations if a new tab or window will be opened.\n---\nDid some digging and the issue appears to be due to glutin / winit 1. not sending a WindowEvent::Resized sometimes when a new tabbed window is created (like if it's never been resized), and 2. even when it does send it it is often wrong and includes the size of the tabs area. I don't know if you would want to adopt this, but here's the workaround I came up with:\n---\nSorry, seems like I forgot to link to upstream. I've described whats needs doing here https://github.com/rust-windowing/winit/issues/2191\n---\nSo if you feel like fixing it, it's a matter of plumbing it in winit. Shouldn't be that hard if there's desire to fix it on macOS.\n---\nThank @kchibisov. I'm new to rust and am unfamiliar with winit, but I may give it a try if no one beats me to it.\n---\nIf you need help, I'm sure there'll be some people around on the #alacritty or #winit IRC (winit is also a Matrix room) to answer potential question.\n---\nFixed upstream: https://github.com/rust-windowing/winit/pull/2239\n---\nThanks for letting us know. Should be in Alacritty with the next winit version then."}
{"project_id": "Alacritty", "bug_id": "235", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Reopening Terminal\n\nDescription:\nWhen you exit the terminal in after running commands a dot it still under it. If you want to reopen the terminal you first have to quit the program, then click again to open up a terminal. ### System OS: macOS Version: alacritty 0.10.1 (2844606) ### Logs Crashes: STDERR, STDOUT Font/Terminal size: `alacritty -vv` Keyboard and bindings: `alacritty --print-events`\n\nDiscussion:\nA dot is still under it?\n---\nSorry, should have been more descriptive.\n---\nHow are you exiting the terminal?\n---\nI have been pressing the red circle at the top (the close button on Mac). This happens about 30% of the time.\n---\nDoes the same issue occur when you use `exit` or ^D?\n---\nI ran through it a few times and this seems to work much better! Thank you for the idea.\n---\nWhich shell are you using? I've never heard of anyone running into these kind of issues before and it kinda sounds like there might be something odd with your setup.\n---\nHere are my config files https://github.com/colin99d/configs. Nothing crazy. I am using ohmyzsh as my shell. I can send my zshrc if you like but its pretty generic.\n---\nI feel like a video/gif of the issue might help here. Perhaps you have multiple instances of Alacritty running and you're only closing one? Is there another Alacritty window hidden somewhere? Perhaps you pressed Command-H without realizing it? Also, please include version numbers with your OS description, thanks.\n---\nI am running MacOs version 12.3. I never run more than one instance of Alacritty thanks to tmux. Also, I have never purposely used `Command-H` before, and this issue happens frequently. [Here](https://drive.google.com/file/d/1VhbNwVJETMrHNvV6vIKSrF-ZCj9nTUyK/view?usp=sharing) is a link to a screen recording. Its still processing in Google Drive so it might not be available for a little bit longer.\n---\n@colin99d could you record a video that shows how you end up in this situation? I can see the issue, but I cannot see what you did to end up here. Also, it seems you have some kind of macOS skinning/theming going on? Or am I just completely out of the loop? Your menu bar looks very different than I expect. Could that be interfering with the way the close action performs? I'm not assigning blame to the issue (yet), I'm just curious why I don't experience this issue on my Mac (running macOS 12.3).\n---\nI just happens by pressing the red exit button. It happens roughly 30% of the time. I am not sure what macOS skinning/theming is, but I have not changed any settings like that on my Mac.\n---\nHave you tried it without tmux just running a basic bash shell?\n---\nI have had the issue when tmux was not being used. Should I try it in a different shell?\n---\n> I have had the issue when tmux was not being used. Should I try it in a different shell? Yes, I'd recommend just testing bash without any configs.\n---\nI tried disabling my alacritty configs and that did not fix the problem. However, I did make a discovery. When I close it in full screen mode the issue always happens. However, if the screen is not full the issue never happens. This behavior happens with bash and zsh shells\n---\n@colin99d So it **only** happens in fullscreen? Is there any other application sharing this behavior?\n---\nIt is only happening in fullscreen. No other applications do this. Also the other day it happened when typing `exit`.\n---\nWhich macos version are you on?\n---\nMonterey 12.3\n---\nCan confirm I experience the same behavior: 1. Open alacritty 2. Full screen alacritty 3. Terminate session any number of ways, ^D, exit, logout, etc. 4. alacritty continues running in the background, cannot start new session until it's manually killed macOS 12.2.1 Alacritty 0.10.1 zsh 5.8 bash 5.1.16 tmux 3.2a ** happens with and without tmux **\n---\nI can also confirm - alacritty 10.1: 1. open alacritty (defaults to fullscreen per config) 2. Exit using various methods 3. alacritty stays running, but I cannot recover the window - right-click -> terminate is the only way to get rid of it"}
{"project_id": "Alacritty", "bug_id": "236", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: CreateNewWindow on macos sometimes doesn't start shell correctly\n\nDescription:\nFor bug reports, the following information can help speed up the process. Please describe the bug that you have found and what you would expect to happen instead. I have my shell configured: When I start alacritty, then immediately create a new window, the new window is a bare zsh shell, without tmux. If I then close the second window and create another new one, it correctly runs tmux. Subsequent new windows seem to randomly either start tmux or not. ### System OS: macos Version: alacritty 0.10.0-dev (a1083d18) Linux/BSD: n/a ### Logs Crashes: STDERR, STDOUT Font/Terminal size: `alacritty -vv` Keyboard and bindings: `alacritty --print-events`\n\nDiscussion:\nThat seems rather surprising. You specifically mention macOS, but I'd assume that's just because you haven't tested any other OS? > Subsequent new windows seem to randomly either start tmux or not. Random as in there's no clear indicator of why this is? Or is there some form of pattern? Also I don't recall exactly, but if you increase logging I think it might list the full command spawned. Could you check if that prints more info? So using `-vvv`.\n---\n> You specifically mention macOS, but I'd assume that's just because you haven't tested any other OS? Correct! > Random as in there's no clear indicator of why this is? Or is there some form of pattern? No pattern as far as I can tell, except that the first invocation of `CreateNewWindow` never seems to start tmux. I tried `alacritty -vvv` but didn't see any output for the shell, here's the output (with annotation for when I called `CreateNewWindow`):\n---\nPlease test with the following patch: Hopefully that should make it obvious if the parameters we start your shell with are incorrect, or if your setup is just broken.\n---\nInteresting, when I first start alacritty: And then, when I `CreateNewWindow`:\n---\nAlso, I think there actually is a pattern: if I create a new window (which starts without the shell config), then close it, all subsequent new windows start correctly. If I don't close the first created window, then new windows continue to be created without the shell config.\n---\nOk, this is interesting, with this diff: Original instance: new window:\n---\nSounds to me like instead of getting `None` as `options` after creating a new window, you're getting `Some` with the working directory set. My first guess would be that it's related to the code responsible for setting the working directory with `CreateNewWindow`, shouldn't be too hard to track down.\n---\nIt appears to originate here: https://github.com/alacritty/alacritty/blob/master/alacritty/src/event.rs#L385-L391 I don't really understand: 1. why pass options here at all? 2. why does it pass `None` after closing the first new window?\n---\n> why pass options here at all? Because otherwise the working directory of the foreground process will not be used for new windows. Could you try https://github.com/alacritty/alacritty/pull/5617? I think the changes there might accidentally fix this.\n---\n#5617 doesn't fix it. I did a bit more digging and I think there's a couple of things going on actually: 1. [Here](https://github.com/alacritty/alacritty/blob/master/alacritty/src/event.rs#L385-L391), a new pty_config is created with *only* the working dir, and not any of the other pty config from alacritty.yml (most relevantly for this issue, the command). It seems like it should merge in the rest of the default options from `config` at some point? 2. The reason this *ever* works appears to be because of a bug. It looks like `foreground_process_path` returns an error and when I log it out [here](https://github.com/alacritty/alacritty/blob/master/alacritty/src/event.rs#L390), I see `InvalidSize`. Because that errors, we return `None` here, which causes the default config to be used downstream.\n---\nShould probably write a patch on top of #5617 then.\n---\nDid a bit more digging. I think I can send a PR to fix the first issue. For the second issue, I'm in way over my head. I tried the following diff to try to narrow down what's going on: The output looks like this: I don't understand why `master_fd()` changes between invocations, but I assume that's the root cause of the rest of the issues.\n---\nSent a PR to fix the CLI option issue and opened a separate issue for the foreground working directory determination: https://github.com/alacritty/alacritty/issues/5700"}
{"project_id": "Alacritty", "bug_id": "237", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Alacritty quits on launch\n\nDescription:\nAlacritty immediately quits on launch, before even showing the window. Neither reinstalling Alacritty nor restarting the machine seems to help. I deleted my Alacritty config file and that didn't fix anything, so my config has nothing to do with this issue. ### System OS: macOS 12.6 Version: alacritty 0.11.0 (8dbaa0b) ### Logs Output of `alacritty -vv` (gives back an exit code of 0):\n\nDiscussion:\nYour shell is exiting right way, try using empty config.\n---\n@kchibisov still quits on launch with an empty config, and the shell doesn't exit after Alacritty quits. Also, Alacritty.app crashes immediately too, so this doesn't have to do with my shell.\n---\nIf it crashes provide a stack trace, from what I see there's no crash or anything. I also see that your locale is broken. `Using environment locale: C/UTF-8/C/C/C/C`. Try running alacritty from other application and pass for example `alacritty -e sh` to it.\n---\nAlright, thanks for explaining, I had misunderstood you. `alacritty -e sh` works, and even `alacritty -e fish` and `alacritty -e /usr/local/bin/fish` work (my `SHELL` is `/usr/local/bin/fish`), but `alacritty` doesn't. That means you're correct. Still, Alacritty used to work just fine for me yesterday with the same version, so I'm not sure what is happening here. Any idea how I could fix this? > I also see that your locale is broken. Using environment locale: C/UTF-8/C/C/C/C. I ran this on the shell from which I'm launching Alacritty: Is that a broken locale?\n---\nIs your `zsh` working? Since the application you're running quits and `zsh` is the default shell.\n---\n`alacritty -e zsh` works, but note that I changed my shell to Fish using `chsh` .\n---\nSo I'd assume that `alacritty --config-file /dev/null` is also not working?\n---\nIndeed, that doesn't work too.\n---\nHm, maybe the shell you've `chsh` isn't working and you use shell from somewhere else. But it's hard to say why it stopped working that way though. For now you can specify the shell program explicitly in you configuration. I have a feeling that it could be something with fish and the way we try to run it as a login shell. In general you shouldn't use fish as a login shell unless you know what you're doing(It's not a POSIX compliant shell).\n---\n@mhmdanas if you symlink your `fish` shell into `/usr/bin/fish` and `chsh` this path will it work? I have a feeling that we fail to resolve your shell properly which seems strange.\n---\nYou could try to run `/usr/bin/login -flp $USER /bin/sh -c fish`. To be more precise `/usr/bin/login -flp $USER /bin/sh -c \"exec -a -fish /usr/local/bin/fish\"`\n---\n> Hm, maybe the shell you've `chsh` isn't working and you use shell from somewhere else. Running `chsh -s /usr/local/bin/fish` spews back `chsh: no changes made`, so it's the same shell. > For now you can specify the shell program explicitly in you configuration. Alright, I'll do that. Thank you for the advice. > In general you shouldn't use fish as a login shell unless you know what you're doing(It's not a POSIX compliant shell). Point taken, but I'll note that I just tried running `chsh -s /bin/zsh`, closing and reopening the terminal, and then doing this: So we can conclude this isn't a Fish-specific issue. > if you symlink your `fish` shell into `/usr/bin/fish` and `chsh` this path will it work? I have a feeling that we fail to resolve your shell properly which seems strange. macOS doesn't allow me to do that: > You could try to run `/usr/bin/login -flp $USER /bin/sh -c fish`. That works. > To be more precise `/usr/bin/login -flp $USER /bin/sh -c \"exec -a -fish /usr/local/bin/fish\"` Here is what happens when I try running that:\n---\nI actually figured out the cause: `/usr/bin/login -flp $USER /bin/sh -c \"exec -a -fish /usr/local/bin/fish\"` only works if `/bin/sh` points to Bash, but in my case I had actually changed it to point to Dash by running `sudo ln -sf /bin/dash /private/var/select/sh`. Switching back to Bash using `sudo ln -sf /bin/bash /private/var/select/sh` fixes the issue. Edit: I think the issue was introduced by https://github.com/alacritty/alacritty/pull/6221, was it not?\n---\nYeah, your issue is that your `exec` doesn't have the `-a` parameter? I've just tested on `macOS` and it seems to work fine for me, maybe you have something from brew?\n---\nI'm not sure if you missed what I said, but it's because I've configured `/bin/sh` to point to `/bin/dash` on my machine, and Dash's `exec` doesn't seem to support `-a`.\n---\nAh, so that's what is causing it... So if you switch your `sh` to `bash` it should work. @chrisnc It seems like your patch is causing issue with `dash`, since there's no `-a` for exec. Do you have any suggestions?\n---\n> Ah, so that's what is causing it... So if you switch your sh to bash it should work. Indeed. > @chrisnc It seems like your patch is causing issue with dash, since there's no -a for exec. Do you have any suggestions? I'm not @chrisnc of course, but here's my suggestion: If there's no equivalent for `-a` in POSIX sh, then `/bin/sh` should be replaced with `/bin/zsh` (just tested it and it works) in the command (it could be replaced with `/bin/bash` too, but macOS's Bash is ancient, and I reckon it might be even removed in the future)."}
{"project_id": "Alacritty", "bug_id": "238", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: palette query responses are malformed\n\nDescription:\n### System OS: Linux Version: alacritty 0.10.0-dev (ebf41d5f) Linux/BSD: X11/Compiz+XFCE It appears that Alacritty has recently added support for palette interrogation. That's great! Unfortunately, the responses are malformed. They ought be of the form `]4;N;rgb:XXXX/XXXX/XXXXST` or `]4;N;rgb:XX/XX/XXST` instead, Alacritty is replying with `]N;rgb:XXXX/XXXX/XXXXST` (note the missing `4;` at the front) not only does this diverge from other implementations, but it introduces an ambiguity: it is now impossible to distinguish between a reply for the default fg / default bg queries and palette indexes 10 and 11. this is causing problems for Notcurses with newer Alacritty, manifesting as a bunch of garbage on stdin: https://github.com/dankamongmen/notcurses/issues/2643\n\nDiscussion:\nGood catch, thanks. Should be fixed with https://github.com/alacritty/alacritty/pull/5982.\n---\n> Good catch, thanks. Should be fixed with #5982. fwiw, @nullcgt identified the problem. i was just passing it up =] thanks for the quick fix. i've verified it locally."}
{"project_id": "Alacritty", "bug_id": "239", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Restart fcitx5 cause Alacritty close.\n\nDescription:\n> Please describe the bug that you have found: Restart fcitx5 cause Alacritty close. > and what you would expect to happen instead: Alacritty should not be closed. ### System OS: Debian GNU/Linux bookworm/sid x86_64 Version: alacritty 0.12.0-dev (e9ee8dc) Display server: X11 Compositor: picom WM: dwm cargo build with only X11 support ### Logs [Alacritty-607924.log](https://github.com/alacritty/alacritty/files/9691451/Alacritty-607924.log)\n\nDiscussion:\nThe black two are xterm. https://user-images.githubusercontent.com/14966910/193454270-afad066a-7774-4ead-96c6-5bf7b51fd169.mp4 - RUST_BACKTRACE=1 alacritty [backtrace_1.log](https://github.com/alacritty/alacritty/files/9692500/backtrace_1.log) - RUST_BACKTRACE=full alacritty [backtrace_full.log](https://github.com/alacritty/alacritty/files/9692501/backtrace_full.log) So actually I should report to [rust-windowing/winit](https://github.com/rust-windowing/winit)?\n---\n> So actually I should report to rust-windowing/winit? Yeah, would be appreciated, thanks.\n---\nI think that it's not a new bug? The code that crashing is due to the error from the XIM, I personally can't repro that by killing and reenabling XIM, so it's something about your setup? No matter what I do it doesn't crash for me when I force kill or reload fcitx. The crash that you've triggered is due to error during closing the input method...\n---\nDoes the crash happens with `v0.10.1` at least? I'd assume so, since the failure that we can't open any input method...\n---\n> Does the crash happens with `v0.10.1` at least? I'd assume so, since the failure that we can't open any input method... I tested `v0.10.1` and that stable version doesn't have this problem. `v0.12.0-dev` (d721424) still has this problem.\n---\nCould you test 7d708d53f7ecb4c64db10ae44e7f4fca47c29a85 as well?\n---\nalacritty 0.11.0-dev (7d708d53) This problem does not exist.\n---\nThis problem has appeared since 5bbba69. After bump winit to 0.27.3.\n---\n@lolicon0930 Could you test this It should also dump styles during reload so please post them as well and try to mark somehow the ones you've got on reload.\n---\nalacritty 0.12.0-dev (d7214248) `$ alacritty &>log`\n---\nI've updated the branch, I think it should work now. Run `cargo update -p winit` and rebuild(It shouldn't print anything anymore as an indicator).\n---\nNo problem now.\n---\nGiven that fixed hasn't landed yet."}
{"project_id": "Alacritty", "bug_id": "240", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: 0.11-rc2: Alt key is no longer sent into WSL\n\nDescription:\nAlt key does not seem to be delivered into a running WSL instance as of 0.11-rc2. Works in 0.11-rc1. ### System OS: Windows Version: alacritty 0.11.0-rc2 (f4ce3ff) ### Logs In both cases I start a new Alacritty instance from PowerShell, wait a second for Fish to start, type \"test \". `--print-events` output for rc1: `--print-events` output for rc2: Here are the same logs, but with most of the \"randomness\" removed. Better suited for a side-by-side diffing, though some randomness is still present due to the event ordering. Less random rc1 log: https://gist.github.com/ilya-bobyr/acc3cd79ef0fc50ffec4be94adf37c7b Less random rc2 log: https://gist.github.com/ilya-bobyr/824ea9ecd1092ffc2b05704cb727aef3 Except for comments, my config contains the following:\n\nDiscussion:\nJust saying that alt key isn't working on my end as well(Win10). It looks like Alacritty is registering the Alt key but nothing happens in NeoVim. Trying other terminals (cmder, tabby, cmd, and QtNvim) all register the alt key and apply the keymap I have in nvim. Only Tabby was giving me some issues but overall worked with small adjustment but still working with Alt.\n---\nIs it just ALT+B, or are no alt keys working? It looks like the key isn't even received by Alacritty.\n---\nIt does not seem that any key is sent into WSL when it is modified with Alt. At the same time, I see the mouse cursor blinking every time I press Alt+Something. At first, I thought that it is sending those keys into the window menu or something like that. But no window level menu is active. Based on the change list between rc1 and rc2, I assumed it might be related to the IME changes. But the source diff is so small and does not seem to contain anything suspicious: https://github.com/alacritty/alacritty/compare/v0.11.0-rc1...v0.11.0-rc2 I do see `Alt+B` in the rc2 log: Cleaning it up a bit it seems to boil down to this: rc1 log shows this: Cleaned up it is: The big difference, it seems that for rc2, key press is only delivered as a `KeyboardInput` event, while for rc1, it is also delivered as a `ReceivedCharacter` event. [`ReceivedCharacter` docs](https://docs.rs/glutin/latest/glutin/event/enum.WindowEvent.html#variant.ReceivedCharacter) say: > ReceivedCharacter(char) > > The window received a unicode character. > > See also the `Ime` event for more complex character sequences. And the [`Ime` docs](https://docs.rs/glutin/latest/glutin/event/enum.WindowEvent.html#variant.Ime) say: > An event from an input method. > > Note: You have to explicitly enable this event using > `[Window::set_ime_allowed]`. I am not using IME, and I do not see any changes in the calls to `set_ime_allowed()`, but could it be still related? I may try compiling a local version and bisecting changes between rc1 and rc2, but do not realy on me, as I've never done it before and not sure how much effort would it be.\n---\nThere are changes in the versions of some of the dependencies between rc1 and rc2: [`v0.11.0-rc1...v0.11.0-rc2#diff-13ee4b2252`](https://github.com/alacritty/alacritty/compare/v0.11.0-rc1...v0.11.0-rc2#diff-13ee4b2252c9e516a0547f2891aa2105c3ca71c6d7a1e682c69be97998dfc87e) But, `glutin` version is not changed.\n---\n> But, glutin version is not changed. Winit version is, that's likely the problem. I'd be curious if someone could maybe bisect in winit. > The big difference, it seems that for rc2, key press is only delivered as a KeyboardInput event, while for rc1, it is also delivered as a ReceivedCharacter event. Yeah, the `ReceivedCharacter` event is what we actually need. As a temporary fix you could manually add a binding to your config that sends the characters, but I'd rather not release the RC with this breakage.\n---\nHere is a change in `winit` where they stopped emitting the `ReceivedCharacter` events for `Alt+key` combinations: [Windows: Update handling of system keypresses #2445](https://github.com/rust-windowing/winit/pull/2445) This change description says: > On Windows, fixed ALT+Space shortcut to open window menu. Though, it does not provide the reasoning for changing behavior for other `Alt+key` combinations. Part of the v0.27.3 release: https://github.com/rust-windowing/winit/compare/v0.27.2...v0.27.3 Windows sends a special [`WM_SYSCHAR` message](https://learn.microsoft.com/en-us/windows/win32/menurc/wm-syschar) in response to an `Alt+key` press, unlike the `WM_CHAR` message used for printable characters. I am running a head build of Alacrity on my Ubuntu systems as well. As there was no breakage there, I assume, on Unix platforms `winit` does send `ReceivedCharacter` when `Alt` is held. I've left a comment in the corresponding `winit` issue, as it seems to be breaking `winit` portability across platforms.\n---\nI am having the same issue with sending Alt keys not just in wsl2 but in powershell + ssh. Additionally, for some reason in wsl2 I also can't type the letter `s` in bash (but it's working in editors and such, and in powershell + ssh + bash it's not a problem).\n---\nFor `Alt` - it is a regression in `winit`, see https://github.com/rust-windowing/winit/issues/2504 for details. There is an attempt in `winit` to match Windows keyboard handing semantics better, but it is, unfortunately, incompatible with Unix and MacOS semantics. Currently, the suggested solution is to revert the change. My guess is that it will take some time for the change in `winit` and the next RC of Alactritty will include the fix. An alternative would be to downgrade `winit` to `0.27.2`. But the bump PR (https://github.com/alacritty/alacritty/pull/6326) says that it fixes two issues. And as `winit` seems to be working on a fix, it does not seem like a reasonable thing to do at the moment. `s` issue should be unrelated, as the change in `winit` only affected handling of `Alt` on Windows. @Palpatineli, you may want to create a new issue with regard to `s`, and provide event logs, as suggested in the new issue template.\n---\nIt could help if the patch that was proposed in winit could be tested with alacritty, but it could require some knowledge to handle it. Mostly you need to cherry-pick that patch into winit release branch and start from there."}
{"project_id": "Alacritty", "bug_id": "241", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Terminal not fully redrawing under certain conditions\n\nDescription:\n## System OS: Arch Linux Version: alacritty 0.11.0-dev (5c51d528) Linux/BSD: xorg 30bpp (nvidia driver) and Awesome WM ## Problem When minimizing and then unminimizing an alacritty terminal, or when switching to another window group and switching back to the original window group containing the alacritty terminal, the whole terminal is not redrawn, only the section next to the terminal cursor position is. ## Screenshots ***Correct terminal:*** ![correct-terminal](https://user-images.githubusercontent.com/63172412/167594616-1be6b2d3-44ef-4189-b31a-efcaf39793ec.png) ***Not fully redrawn terminal:*** ![not-fully-redrawn-terminal](https://user-images.githubusercontent.com/63172412/167594639-f5c7b87f-596b-444a-94d9-deb01d8add6d.png) ## Workaround Causing an event that triggers a full terminal redraw, such as maximizing the window, changing the font size (Ctrl+'+' or Ctrl+'-'), etc., is needed to restore full terminal content.\n\nDiscussion:\nThat's actually interesting, could you repro on `v0.10.1`? Also are you using some X11 compositor, can you try running without it? Also, under which circumstances it's happening that your window isn't fully redrawn? When the focus changes or when it becomes visible?\n---\n>could you repro on v0.10.1? v0.10.1 does not start on 30bpp xorg: `Error: Error creating GL context; Received multiple errors. Errors: '[NoAvailablePixelFormat, NoAvailablePixelFormat]'` Neither v0.10.1 nor v0.11.0-git exhibit the problem on 24bpp xorg. >Also are you using some X11 compositor, can you try running without it? I am not using a compositor. I tried to see if the behavior would be different with a compositor (I tried picom): it is the same. >Also, under which circumstances it's happening that your window isn't fully redrawn? When the focus changes or when it becomes visible? When it goes from not on the current \"virtual desktop\" to on the current \"virtual desktop\" (called \"tags\" in Awesome WM), or when it goes from minimized to non-minimized (while staying on the same \"virtual desktop\"). It redraws correctly when cycling through non-minimized windows of the current \"virtual desktop\", irrespective of the degree of overlap of the various windows.\n---\nBy the way, in case this might be relevant, the \"non-redrawn\" portion of the terminal \"captures\" what is under the terminal at the moment the window is un-minimized, or the \"virtual desktop\" containing the terminal is made current. That \"captured\" portion moves around with the terminal, until the terminal is minimized, or another \"virtual desktop\" is made current, or the terminal is redrawn (by maximizing, by changing font size, etc.). Example: ![image](https://user-images.githubusercontent.com/63172412/167685352-8ce39a13-93a2-4165-97d0-b99bb759d735.png)\n---\nIf you run it like `alacritty -o debug.highlight_damage=true` is it working?\n---\n> If you run it like `alacritty -o debug.highlight_damage=true` is it working? Yes it does. Result after un-minimizing: ![image](https://user-images.githubusercontent.com/63172412/167689911-2409d4b5-4472-4f3a-82b6-e4969867fadc.png)\n---\n@kchibisov Sounds like `swap_buffers_with_damage_supported` is reported to work without it actually working? Do we need to disable this on X11?\n---\n>Sounds like swap_buffers_with_damage_supported is reported to work without it actually working? Do we need to disable this on X11? That's strange, but I think it does work, but not in all cases? Since you can see cursor redrawn or something like that. I knew that it works given that the driver is nvidia(EGL under the hood), but I have no clue how it's working with it and why, given that it basically sends data to compositor... We can disable the extension all together on X11 if it matters, since it clearly will solve the issue, but it sounds like if we redraw on focus/minimize on X11 the issue will be solved as well (though, we can't hook to minimize/unminimize for now)?\n---\n> We can disable the extension all together on X11 if it matters, since it clearly will solve the issue, but it sounds like if we redraw on focus/minimize on X11 the issue will be solved as well (though, we can't hook to minimize/unminimize for now)? Actually now that you mention it, X11 should send the application expose events when restoring a minimized window, I'm pretty sure this translates to `Redraw` requests in winit/glutin. Do you know if we fully damage the window when this happens? It seems like we don't and we probably should. So maybe just adding a `self.ctx.terminal.mark_fully_damaged()` to [here](https://github.com/alacritty/alacritty/blob/9bbb296d1dc4f72e845695f22e903bcc1d66d5a3/alacritty/src/event.rs#L1106) could do it? @someuser-blip2 Could you check if the `--print-events` output contains a `RedrawRequested` event when you restore a minimized window?\n---\n> Could you check if the --print-events output contains a RedrawRequested event when you restore a minimized window? Without the 'highlight_damage' debug option ? Yes: `[13.204816141s] [INFO ] [alacritty] glutin event: RedrawRequested(WindowId(X(WindowId(75497474))))`\n---\nThat's the answer then I'd assume. We should force-redraw everything whenever receiving this event, but we do not.\n---\n@someuser-blip2 Could you test that the following patch fixes this? Unfortunately I have no hardware to confirm it actually works.\n---\n> Could you test that the following patch fixes this? It fixes the issue for both the restoration of minimized windows and for screen switching (which I suppose indicates the latter is implemented using the former for this WM).\n---\nBut there seems to be another condition that triggers the issue, that is not fixed by this patch: from time to time, the same issue occurs when a window is maximized. Unlike in the cases your patch fixed, it does not happen all the time. But it does happen from time to time, and it can be consistently triggered by maximizing/unmaximizing the window repeatedly enough times. **Example screenshots** *Incorrectly redrawn maximized window:* ![Incorrect redrawing](https://user-images.githubusercontent.com/63172412/168673108-28d42f57-dea7-41d7-8eda-601494c8c7b4.png) *Correctly redrawn maximized window:* ![Correct redrawing](https://user-images.githubusercontent.com/63172412/168673174-d1cefc70-47cd-4171-b1ae-5e74f8fa823a.png) *Unmaximized window:* ![Unmaximized](https://user-images.githubusercontent.com/63172412/168674061-e6ae9be0-2701-47e1-9cf5-893fc495d56e.png)\n---\nThe issue can also be triggered by resizing the window: below a screenshot after the window was expanded to the right using a mouse drag (mouse button released). As in the maximizing case, it does not happen all the time. But it happens much more often. ![resized window](https://user-images.githubusercontent.com/63172412/168680335-3d8b954d-f449-4c36-9601-b042c8b65565.png) :\n---\nLast case I noticed: incorrect redraw after closing a tmux pane. For example, after closing a pane, I could get this: ![image](https://user-images.githubusercontent.com/63172412/168683805-e4a1e1f1-df14-4a67-a837-0f1e46ecf59b.png) instead of this: ![image](https://user-images.githubusercontent.com/63172412/168683990-4620f60d-83c3-46a9-89fa-041c57441f1e.png)\n---\nIf you run with `alacritty -o debug.highlight_damage=true` do you see pink rectangles covering non-damaged regions with tmux? I'm asking since I can't repro none of those issues and I tend to think that it's better to disable damage related stuff on X11.\n---\n> If you run with alacritty -o debug.highlight_damage=true do you see pink rectangles covering non-damaged regions with tmux? I am not sure what should be considered damaged or non-damaged in the context of tmux, but I can describe what I see in this way: - after doing a pane operation (creating a new pane, resizing, closing, etc.), sometimes the whole terminal is marked as pink, sometimes it is only briefly fully marked as pink, and then only the cursor regions and other updating regions of panes (e.g. continuously changing regions of an htop output) are marked with pink rectangles. - when doing a display modifying operation in a pane (e.g. running an 'ls') while nothing is going on in another pane, sometimes only the affected pane has pink rectangles where one could expect some to be, sometimes the whole terminal is pink, including the non-changing panes. As a note, issues related to maximizing and resizing occur with or without running tmux in the terminal. And all the issues disappear when `debug.highlight_damage` is set.\n---\nYeah, that's expected that `debug.highlight_damage` will resolve the issue. As far as I can see there's a frame with the whole terminal marked as pinked, which could mean that there's something different going on with X11 damage thingy.\n---\nIt makes sense to me that a maximize would require full damage too, what I'm more confused about is that the tmux pane doesn't update damage correctly."}
{"project_id": "Alacritty", "bug_id": "242", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Redraw randomly hangs until a keypress\n\nDescription:\nUsing Alacritty (commit 6916537858d12e02478d618339d1b9f0e73a677a) on Ubuntu 16.04 with X11. It is better described with the following screencast. Here I'm repeatedly opening and closing `tig`, so the output should be the same in each iteration. The screen often stays in a partially redrawed state (marked by mouse cursor movement). Then it finishes redraw correctly when I'm pressing a key. ![screencast](https://user-images.githubusercontent.com/12503689/31335101-cb888a5a-acf9-11e7-9e91-b6db6f6d4564.gif)\n\nDiscussion:\nI have the same exact bug. Ubuntu 16.04 with X11. However, the interesting thing is this, bug appears only on when working in tmux. Also, this bug doesn't exist on my Arch desktop (even when I'm using tmux).\n---\nFor me it is the same with and without tmux. I guess it can be hard to debug. Please guide me how can I help with this, I'm familiar with rust.\n---\nWe've had a few isolated reports of this since the issue was originally \"fixed\". It's to the point I can no longer reproduce, but I am happy to advise you on doing the debugging if you're willing to get your hands dirty. There are two primary threads in Alacritty: 1. the parser thread, and 2. the render/input thread. The parser thread reads from the pty asynchronously and locks the terminal struct once it's got some data. With lock in hand, the parser runs and updates what is visible on the screen. After the buffer is drained and terminal updated, this thread sends an event to the render/input thread which should trigger a wakeup. This all happens within [`EventLoop::pty_read`](https://github.com/jwilm/alacritty/blob/68cca6eb381f88e861439ed6a1dda1ab6a7429d3/src/event_loop.rs#L247-L301). You might note that the render/input thread is only notified when the terminal `dirty` flag is not already set. As an initial sanity check, you might try disabling that check and always notify the render thread (this has a performance penalty which is why we don't already do it). At the same time, that might not actually be the problem and just change around timing enough to appear to solve the issue. Thus, this can be used to demonstrate that the dirty flag check is *not* the problem (would still have the issue), but it cannot conclusively conclude that it *is* the problem (issue might go away, but for different reason). In this latter case, you'll probably want to start adding some logging about when the render thread is kicked. The part where this is consumed on the render thread starts in [_main.rs_](https://github.com/jwilm/alacritty/blob/68cca6eb381f88e861439ed6a1dda1ab6a7429d3/src/main.rs#L168-L201). The first line in this loop will usually block and wait for events. Note that further down the loop, there's a check So either this check would be returning false, or control never reaches this point. Looking at [`Processor::process_events`](https://github.com/jwilm/alacritty/blob/master/src/event.rs#L336), this method is either blocking or polling for events based on initial state. Your draw problem ends up with it stuck blocking for events and never waking up, so we'll want to check that out. I would recommend adding some logging in that area. Finally, you might want to add some logging where the [`Awakened` event is handled](https://github.com/jwilm/alacritty/blob/68cca6eb381f88e861439ed6a1dda1ab6a7429d3/src/event.rs#L328). I'm happy to help review the logs you generate or guide you through more of the code. Please let me know how else I can help; I would love to fully squash this bug, and I need help from someone like yourself to do it.\n---\n@jwilm Thanks for a great guidance! Will find a spare time and start digging.\n---\nI think I might be hit by the same issue and I have stayed on a rather old version of alacritty because of this (24c32dc). I don't think I can spare much effort right now into digging this as well but I can try to see if any fix helps my case. This is on Ubuntu 16.04 based system as well, with an elderly Intel HD 4000, at least judging by the Xorg.log.\n---\n@jwilm Hey. I made some testing, but didn't figure out the issue. Firstly with debug build the problem is solving. I have an overclocked 4.7ghz cpu, so I guess it is a timing issue, which appears on fast enough cpus. Also commenting out `terminal.needs_draw()` also helps, but I believe it is not the root of the issue. I made a debug logging, and everything looks fine, `Awakened` event is triggered correctly, and causes redraw afterwards. Looks like the `terminal.draw()` renders a stale state. How can it be? _Edit_: wrong frequency.\n---\nThis issue just started happening to me for the first time. I've been using alacritty as my main terminal for about 6 months and haven't seen the problem before, until now. I was able to narrow down the context in which the problem happen, at least for me. It only happens when using a compositor (happens with both mutter/gnome and compton for me), and when there are multiple Alacritty windows open. It does not happen with composition and just one window. PS: Deleted my previous messages since they weren't really accurate\n---\nMight be related to #1227.\n---\nIt's happening on my i3-gaps + compton machine too. It seems that switching compton backend from `glx` to `xrender` helps.\n---\nsame issue: - running on ubuntu 16.04 - built from hash `512fc6109182523c50e55ca8729b056442f36823` - happens all the time, even outside of tmux, etc - on startup, alacritty terminal background is the same as the window behind* the terminal, until I press a key and it redraws - issue seems to happen once every 10 key strokes or so (pressing enter or control-c) - clicking on the screen or typing a character seems to cause a redraw whenever it gets behind\n---\nI have a hunch that this issue might be solved with #1518, since another similar issue was fixed with it. I've added this issue to the issues which will be automatically closed once that PR is merged. If anyone is able to reproduce this issue with #1518, please let me know and I'll remove the reference to this issue.\n---\nHi @chrisduerr I tried #1518 with #1403 and I'm still seeing the issue (randomly). No idea what's going on (is it related to the GPU?). This turns Alacritty a bit unusable :( (the only apparent way to force a redraw in my case by opening a new window and send the current (hanged) alacritty window to the back). @dominik-zeglen the compton change fixes the issue for you?\n---\nHuh, I was never able to reproduce this. But thanks for letting me know that #1518 does not fix this. I'll remove the auto-close message from the comments.\n---\nNot sure if this is the same issue, but on Arch Linux/X11/awesome, current master does not draw characters until a key press, mouse click or resize. Background color + opacity is drawn fine, but shell prompt only shows up after any of the three. I'll be offline until next Saturday but can help debug this next weekend. I don't recall the same issue on 0.2.0, but I might just not have noticed because the tiling modes cause a resize at startup.\n---\nIâ€™m experiencing the same issue with i3-gaps and compton. Switching compton to xrender works, but feels a bit sluggish in general.\n---\nI'm using i3-gaps and compton myself and I've never run into this issue. Which GPU are you using @loewenheim?\n---\nHereâ€™s the output of `lspci`:\n---\nI'm using i3-gaps with compton on version 0.3.2, this issue appeared when reflow support was added. Alacritty will stop redrawing until I mouse over it or press a key if I have it highlighted."}
{"project_id": "Alacritty", "bug_id": "243", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Crash while typing in neovim\n\nDescription:\nWhile on Wayland, I experience random crashes while typing in Neovim. Log is below. I cannot reproduce it other than by just using Neovim as I normally would. I also cannot reproduce it with a clean config, though since it happens seemingly at random I might've just not ran into it. But for that reason, I'm linking my config as of the time of this issue [here](https://github.com/Duckonaut/nvim/tree/9afe3c2be60f1990437cac97d61902bc4eeacb4c), plugins list is [here](https://github.com/Duckonaut/nvim/blob/9afe3c2be60f1990437cac97d61902bc4eeacb4c/lua/plugins.lua) When running under X11, this doesn't ever happen. ### System OS: Linux Version: alacritty 0.11.0 (8dbaa0bb) Linux/BSD: Wayland, Hyprland ### Logs The important bit: The entire log is attached here [alacritty-log.txt](https://github.com/alacritty/alacritty/files/9995695/alacritty-log.txt)\n\nDiscussion:\nIf you build alacritty from source and before that run `cargo update -p calloop` does it happen?\n---\nThanks for the fast fix, should I checkout at 0.11.0 or just do it on the latest source?\n---\nI'm not sure whether it's a fix or not. I'm just curios if one of the patch versions fix it. There's a 'fix' but not released. You can checkout on v0.11.0.\n---\nBe sure that `calloop` will be the version `0.10.3` when testing. You'll that in `cargo update -p calloop` output.\n---\nAlright, I was using the custom built alacritty for the past couple days. Admittedly a bit less than usual so that's the reason for the delay, but there's change. It doesn't visually crash, the window stays open, but it freezes. I managed to catch one log (happened to me 4 times), and it panicked like this\n---\n@Duckonaut could you try applying this patch. I hope it should fix your issue.\n---\n@Duckonaut what you see is perhaps similar to https://github.com/Smithay/calloop/pull/115#discussion_r1039485195? It seems the `already borrowed: BorrowMutError` fix that was released in `calloop 0.10.3` intruduced a different regression.\n---\n@MarijnS95 could you try the patch I've posted, it's a different approach to fixing this issue.\n---\n@kchibisov Thanks, I'll try that; looks much closer to how I expected https://github.com/Smithay/calloop/pull/110 / https://github.com/Smithay/calloop/pull/115 to be implemented...\n---\nI mean the issue is that one source decided to delete another source from the hook... So we need to clone them otherwise one will be removed in-between.\n---\nYes cloning is fine... But that obviously doesn't work when only cloning the keys and then still expecting every key to remain in the map when later iterating over them...\n---\nSorry for the delay again, the alternative fix did work and my problem seems to be gone"}
{"project_id": "Alacritty", "bug_id": "244", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Debouncer is constantly polling the events\n\nDescription:\nWith the notify v4 we were doing passive waiting, however update to notify v5 changed that and now we have active polling that wakes up every 10ms draining the battery.\n\n"}
{"project_id": "Alacritty", "bug_id": "245", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Font size seems to be impacted by the padding setting\n\nDescription:\nChanging the padding sometimes makes a bitmap font blurry: https://user-images.githubusercontent.com/34467/201967909-d2178e98-2da1-4e8c-8a22-56f253f3b9bc.mp4 ### System OS: Linux (Arch, X11, i3) Version: `alacritty 0.11.0 (8dbaa0bb)` ### Config Minimal repro config: Font: https://tobiasjung.name/downloadfile.php?file=profont-otb-2.zip ### Logs\n\nDiscussion:\nCan you try the same without live config reload? It looks like there are shader issues.\n---\n> Can you try the same without live config reload? It looks like there are shader issues. Yeah good call. Even resizing the terminal is enough to fix it.\n---\nYeah I feel like this might be an issue with your graphics driver. The window is only being partially resized. What happens when you run Alacritty using `LIBGL_ALWAYS_SOFTWARE=1 alacritty`?\n---\n> Yeah I feel like this might be an issue with your graphics driver. The window is only being partially resized. > > What happens when you run Alacritty using `LIBGL_ALWAYS_SOFTWARE=1 alacritty`? Reproducible with intel, radeon and software emulation\n---\nDoes it happen with a proper vector font too, or just with opentype bitmaps?\n---\nIt actually seems to happen with vector fonts as well. Though the glitch requires the window to be focused for the glitch to appear (and it's less obvious than with a sharp bitmap font): https://user-images.githubusercontent.com/34467/202699263-13c017a9-018b-4e51-a302-da69c7699822.mp4 Edit: close up: ![z](https://user-images.githubusercontent.com/34467/202700033-395187df-9633-4faf-82df-01647871655e.png)\n---\nIf you run with `MESA_DEBUG=1` do you see anything?\n---\n> If you run with `MESA_DEBUG=1` do you see anything? Nope it remains silent. I'm using mesa 22.2.3. It looks like a regression in alacritty though; I tried 0.7.0 and don't have the issue. I'll try to run a bisect.\n---\nNote: I'm using X11/i3 Something is strange though: I'm not able to reproduce in debug build, so I had to run the bisect in release mode. Maybe some unrelated cache issue with the rust build system, I'm not familiar with it.\n---\nHm, that could cause it I guess on X11, but it would be strange given that code hasn't change at all. It was just moved. I'll take a look and see once I have time for that. Thx for bisecting.\n---\n@ubitux assuming that you're on i3 if you toggle on/off full-screen is it getting fixed?\n---\n> @ubitux assuming that you're on i3 if you toggle on/off full-screen is it getting fixed? Yeah but a simple resize as well so that's expected"}
{"project_id": "Alacritty", "bug_id": "246", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Crashes when zooming in too much\n\nDescription:\n1. Hold Ctrl + + 2. Wait 3. Watch alacritty disappear ### System OS: Linux 6.1.10-zen1-1-zen Version: alacritty 0.12.0-dev (2d27fff7) Display server: X11 WM: xmonad ### Logs https://github.com/alacritty/alacritty/blob/2d27fff796791bf164af8605f97eda16fcb0f724/alacritty/src/renderer/text/atlas.rs#L264\n\nDiscussion:\nholy quick fix, batman"}
{"project_id": "Alacritty", "bug_id": "247", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Multiple windows aren't properly resized on Wayland\n\nDescription:\nIn some cases the old buffer could be submitted. We do resize everything, issue the call to EGL, however for whatever reason the dmabuf is still having old sizes until some draw command in the future(not the next one, since the next one after resize failed). I've used `wlhax` to debug it and there's a clear notion of old buffer and messed up state due to mesa, since `glViewport` is also wrong and relative to the old window, and not the current one. Which could only mean that for whatever reason resize failed.\n\nDiscussion:\nI just encountered a similar bug though I don't know if it is exactly what you are seeing. If the alacritty window is not focused, then, after resizing, the new area is not filled in by alacritty. This only happens when the window is resized quickly. I have traced this bug to the following lines: https://github.com/alacritty/alacritty/blob/56a69c0bfe5742aeda1c4942b748f5a842ce6773/alacritty/src/window_context.rs#L321-L325 This flag is set in https://github.com/alacritty/alacritty/blob/56a69c0bfe5742aeda1c4942b748f5a842ce6773/alacritty/src/display/mod.rs#L1109-L1111 However, there is nothing in that callback that would trigger alacritty to actually do any drawing. I believe that, in this callback, there should be something that triggers glutin to re-emit the `RedrawEventsCleared` event, e.g. a call to `request_redraw`. But I'm not sure how to best implement this. --- Now, why this only happens in multi-window mode I don't know.\n---\nThis might actually be a bug in mesa. 1. make_current causes mesa to allocate buffers for the current window size 2. If buffers are allocated, wl_egl_window_resize has no effect until the next swap call. 3. alacritty calls make_current and wl_egl_window_resize multiple times without intermediate swap calls. This would explain why, on the first swap call afterwards, you're seeing buffers allocated with the size as it was at the time of the first wl_egl_window_resize call. Only after this swap call does the last wl_egl_window_resize call take effect.\n---\nThis what I think is happening as well and thats what mesa dubugging showed me. We can resize before making current though as a work around. Since resize doesn't rrquire it.\n---\nI tried this but unfortunately the problem was still present.\n---\nAs a workaround I also tried simply filling the current buffer with the background color and then swapping immediately before the resize. This works consistently but unfortunately you will get a blank window while resizing.\n---\n@mahkoh I was trying to start https://gitlab.freedesktop.org/mesa/mesa/-/issues/6547 to figure it out. Though, it was marked as works as expected.\n---\n@mahkoh Have you tried\n---\nYes. https://user-images.githubusercontent.com/1882250/171935917-28aafe07-04be-454e-82c9-e162aa0f3626.mp4\n---\n@mahkoh if you combine it with https://github.com/alacritty/alacritty/pull/6079 does it fix the issue?\n---\nDon't get me wrong, I do think that it's something up with mesa, but at least getting it worked around isn't that bad, since it's a video driver...\n---\nSame result.\n---\nThe one thing that I find resolves the problem is to remove https://github.com/alacritty/alacritty/blob/56a69c0bfe5742aeda1c4942b748f5a842ce6773/alacritty/src/window_context.rs#L321-L325\n---\nHm, if that does resolve then I think wakeing up winit could work with the combination of moving `make_current`. I'll try to write something. thx.\n---\nworks for me. Edit: Slightly updated to avoid unnecessary redraws.\n---\nI wonder if we can send something that does just `RedrawEventsCleared` + Move the `current_context` logic after window resize but before renderer resize? So we won't have that dirty, but will have an event to wakeup the event loop in advance. Though, I'd have to test your logic a bit to understand whether it fixes or not. It's just in your particular issue the problem was that I think we've already done processing events for the rest of the windows for which the frame callback got triggered, so it doesn't woke up properly in your particular case, just forwarding event should do that + we should ensure that the buffer is new, which we can do by moving context related stuff in `handle_update`. I'll get to it tomorrow though, but thanks for your input, it does help a lot.\n---\n@mahkoh does this works #6109?\n---\nSame result: The bug is still there.\n---\n@mahkoh the issue is that your patch doesn't fix my issue, but mine doesn't fix yourth. To fix my issue I have to move `make_current` stuff after `window.resize`, once I do this it vanishes. So Let me try to force dirty bit..."}
{"project_id": "Alacritty", "bug_id": "248", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Mouse doesn't show up with mouse hide_on_typing set to true\n\nDescription:\n### System OS: macOS 13.0 (22A380) Version: lacritty 0.11.0 (8dbaa0b) ### Logs First enable the `hide_on_typing` in the config. Steps to reproduce: 1. Launch Alacritty. 2. Type something in the terminal and don't move your mouse, the cursor is hidden. 3. Switch to a different app using `command` + `tab`. 4. Switch back to Alacritty using `command` + `tab` and don't type anything yet. 5. Swipe fingers on the touchpad or move the mouse, the cursor doesn't show up. Expected behavior: - In step 5, the cursor should show up.\n\nDiscussion:\nI'd assume this can be reproduced with the `0.10.X` releases?\n---\n> I'd assume this can be reproduced with the `0.10.X` releases? It can be reproduced with alacritty 0.10.1 (2844606).\n---\nI observed the same behaviour with Alacrity 0.11.0 and macOS 13.0. However, when I press the shift key after the cursor is gone, it's coming back.\n---\nI'm surprised this isn't working, considering we call `set_mouse_visible(true)` whenever the window gets focused. Does Alacritty actually have window focus after tabbing back to it? So the cursor changes back from the box cursor?\n---\n> I'm surprised this isn't working, considering we call `set_mouse_visible(true)` whenever the window gets focused. > > Does Alacritty actually have window focus after tabbing back to it? So the cursor changes back from the box cursor? The cursor does change back from box cursor. I can also see it gets focused in the log when I run with `alacritty --print-events`.\n---\nI looked into this a bit myself. It seems like we call `set_mouse_visible(true)` when Alacritty *loses* focus. Here is what I found out: 1. When a user starts typing, `set_mouse_visible(false)`, and `Window.mouse_visible` is set to `false` accordingly. The mouse is invisible. 2. When Alacritty loses focus, `set_mouse_visible(true)` is called, and `Window.mouse_visible` is set to `true` accordingly. The mouse is visible in the other app. 3. When the user switch back to Alacritty, the mouse is **hidden** somehow, which breaks the mouse visible state tracking. I think issue only happens on macOS, since the bug could not be reproduced on my linux machine. When the user starts to give cursor input, `set_mouse_visible(true)` is called, however with `Window.mouse_visible` still being `true`, so `set_cursor_visible(true)` is never called in winit. https://github.com/alacritty/alacritty/blob/578e08486dfcdee0b2cd0e7a66752ff50edc46b8/alacritty/src/event.rs#L1213-L1219 I tried changing the logic to: then I did a bit of testing, and it seems the bug is fixed. In this bug report's step 5, the mouse is visible with input from the touchpad or mouse. This fix seems to work fine all other platforms. However, I am not sure if there is more complications on this. My concern is if we **really** want to show the cursor when a user switches back to Alacritty right away. I would expect two design choices: 1. A user finishes typing in Alacritty, switches to a different app, and switches back to Alacritty with the mouse visible. Then the user starts to type, the mouse is hidden again. The fix would support this logic: the cursor is visible whenever Alacritty gets focused. Let's call it mouse visibilities' eager mode. 2. A user finishes typing in Alacritty, switches to a different app, and switches back to Alacritty with the mouse **invisible**. If the user starts to type, the mouse remains invisible. Otherwise the user gives mouse input, the cursor is shown. In this case, the mouse is shown *lazily*. The mouse hidden as long as there is no cursor input, and the mouse is shown only when the user gives mouse input. Which design do people prefer? I am looking forward to receiving feedback on this.\n---\n@SheldonZhong It should still work fine when we call `set_mouse_visible(true)` in both branch cases, right? I think that would probably be the safest bet and I'm happy to merge that PR if you want to send it.\n---\nAlso just to clarify, any mouse input like clicking or click + drag makes the mouse visible again, even without this patch, right?\n---\n@chrisduerr No, it doesn't work when we call it in both cases. The reason is the same as what I described. > 2. When Alacritty loses focus, `set_mouse_visible(true)` is called, and `Window.mouse_visible` is set to `true` accordingly. The mouse is visible in the other app. > 3. When the user switches back to Alacritty, the mouse is hidden somehow, which breaks the mouse visible state tracking. When `Window.mouse_visible` is `true` and the mouse is actually invisible, all subsequent calls of `set_mouse_visible(true)` do not have any effect on changing the mouse to visible. https://github.com/alacritty/alacritty/blob/578e08486dfcdee0b2cd0e7a66752ff50edc46b8/alacritty/src/display/window.rs#L314-L322 Only when a user starts typing, i.e., when `set_mouse_visible(false)` is called, will `Window.mouse_visible` be set to `false`. With some mouse input, a call to `set_mouse_visible(true)` can actually change the mouse to visible. Without the patch being discussed here, any mouse input doesn't make the mouse visible. Refer to the step 5 in this issue.\n---\nIt seems like the bug is in winit itself. [Issue](https://github.com/rust-windowing/winit/issues/2539) submitted.\n---\nJust removing the cursor visibility call when losing focus fixes the issue for me. Commit below implements option 2 described [here](https://github.com/alacritty/alacritty/issues/6452#issuecomment-1296115182). On macOS at least, each window has its cursor visibility tracked separately, and this persists across focus changes, so there's no need to explicitly make the cursor visible when leaving the window, as the system already does this if the newly-focused window has a visible cursor. I still need to check other platforms, though. Update: Windows looks good, but it behaves slightly differently in the multi-Alacritty-window case: with two overlapping windows that both have the cursor hidden from typing, if you have the cursor in the overlapping region, move the mouse, and then alt-tab to the other window that still has the cursor \"hidden\", the cursor will remain visible, whereas on macOS the cursor will be hidden in the second window still. If you switch from an Alacritty window to another app's window, everything works the way I would expect; cursor is immediately visible in the other app, and is invisible when switching back to Alacritty. Update 2: X11 is similar to Windows. Alt-tab reveals the cursor immediately regardless of whether you are switching to another Alacritty window or whether that window previously hid its cursor. https://github.com/chrisnc/alacritty/commit/bf18866c1b47bbd19e590f639c5da6af6fc288b9"}
{"project_id": "Alacritty", "bug_id": "249", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Since 0.12.0 keyboard input does not work (macOS)\n\nDescription:\nFor bug reports, the following information can help speed up the process. Please describe the bug that you have found and what you would expect to happen instead. ### System OS: macOS 12.6.3 (21G419) Version: alacritty 0.12.0 (5a72819) ### Logs Font/Terminal size: [Alacritty-75137.log](https://github.com/alacritty/alacritty/files/11068753/Alacritty-75137.log) When I start Alacritty using the App Icon or Spotlight, the keyboard input (except Enter, Escape, Backspace and maybe some more) does not work. When I start Alacritty from Terminal it works just fine. Also tested using the default config.\n\nDiscussion:\nIs there a difference to `env` with and without starting it from a terminal?\n---\nI don't think so. Here is my output of `env` when startet from terminal. I can't give you the output when not startet from termninal since I can't type.\n---\nI could run `env` through history because arrow up does work. There is no difference.\n---\nCould you try do get a log from the `app` with `persistent_logging` and `print_events` from the `debug` section, using the default config https://github.com/alacritty/alacritty/blob/2df8f860b960d7c96efaf4f059fe2fbbdce82bcc/alacritty.yml#L883 The place where log file will be saved could be obtained by running with this config from the terminal.\n---\nHere is the log file when **not** starting from terminal using my personal config file (not the default): [Alacritty-90697.log](https://github.com/alacritty/alacritty/files/11070159/Alacritty-90697.log)\n---\nsame issue.\n---\n@daletman Did you perform any keyboard input during this log?\n---\nThis is sort of suspicious. >Using fallback locale: UTF-8 @daletman also, it seems like you haven't enabled the `print_events` log?\n---\nSame issue. OS: 13.3 (22E252) Version: 0.12.0 (1)\n---\nSame issue. I typically alternate between alphanumeric and Japanese input, with the default set to alphanumeric. In my case, when I switch to Japanese input and type any text, then switch back to alphanumeric, I am able to input alphanumeric characters.\n---\n> I typically alternate between alphanumeric and Japanese input, with the default set to alphanumeric. In my case, when I switch to Japanese input and type any text, then switch back to alphanumeric, I am able to input alphanumeric characters. Oh, but if the window loses focus, I can't input alphanumeric characters again. Similarly, I can't input alphanumeric characters unless I have first entered any text using Japanese input.\n---\nThere's not a single log that could help unfortunately, as in the one with `--print-events` output, which has keyboard input captured.\n---\nThis is the log with only `print-events` changed to `true` in the Default config [Alacritty-64626.log](https://github.com/alacritty/alacritty/files/11076425/Alacritty-64626.log) macOS: 13.2.1(22D68) version: 0.12.0(5a72819)\n---\nI'd assume that you've tried to type something? Because it shows that you've pressed spacebar once and that was about it?\n---\n@chrisduerr @kchibisov Here is a new log file with `print-events` set to `true`. Alacritty **not** started from terminal, after Alacritty started I type the letters `asdf` on german keyboard layout: [Alacritty-99660.log](https://github.com/alacritty/alacritty/files/11077787/Alacritty-99660.log)\n---\nI got the same issue, except when I launch alacritty with the `alacritty` command in another console everything works well.\n---\n@kchibisov This is very strange because I have the same exact system: OS: macOS 12.6.3 Version: alacritty 0.12.0 And **don't have this problem** ! (I have used all the RC without this problem). If I can help in comparing something etc ... just ask!\n---\nSame issue here.\n---\n> maybe this bug only affects some IME. I've two non-ABC IME, one has same issue, another is fine.\n---\nSame issue: OS: 13.2.1 (22D68) Alacritty: 0.12.0 If start from the terminal all good, but launchpad keyboard doesn't work"}
{"project_id": "Alacritty", "bug_id": "250", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: The backspace key is not functioning properly when typing in Chinese.\n\nDescription:\nFor bug reports, the following information can help speed up the process. Please describe the bug that you have found and what you would expect to happen instead. ### System OS: macOS 13.3.1 Version: alacritty 0.12.1-rc1 (110f81d) ### Logs Keyboard events: [Alacritty-22064.log](https://github.com/alacritty/alacritty/files/11449693/Alacritty-22064.log) The backspace key is not functioning properly when typing in Chinese. Specifically, when there is only one character left in the input method bar, pressing the backspace key once deletes two characters instead of one. ![alacritty-log](https://github.com/alacritty/alacritty/assets/16113120/4d692cc9-c346-45d6-a234-c555cc5f308c)\n\nDiscussion:\nYour log doesn't contain any keyboard events at all. Is it a standard macOS IME?\n---\nClosing as duplicate of #458. I don't think there's any point in trying to track down more macOS keybinding issues considering we already know the fix for it will likely be the new keyboard API.\n---\nSee https://github.com/rust-windowing/winit/commit/a9e168e10d819ad8c66ccb336df4e2878600c800\n---\nDo you think this might help with https://github.com/alacritty/alacritty/issues/6827?\n---\nIt was mentioned that `0.10.1` is also affected, but I've started breaking macOS input on regular basis since `0.11.0`. Though, they could try to test `rc-2`(once it appear).\n---\n> Your log doesn't contain any keyboard events at all. Is it a standard macOS IME? Yes, it is. I tried to compile #6924. The problem still exists. Keyboard events: [alacritty-0.12.1-rc1.log](https://github.com/alacritty/alacritty/files/11474888/alacritty-0.12.1-rc1.log) [alacritty-0.13.0-dev.log](https://github.com/alacritty/alacritty/files/11474891/alacritty-0.13.0-dev.log)\n---\nAre you sure that you've compiled it correctly? Because I can't repro that bug anymore.\n---\nYeah, looking at the log, you've compiled the wrong thing. Your hash doesn't match the one on the branch.\n---\n> Yeah, looking at the log, you've compiled the wrong thing. Your hash doesn't match the one on the branch. It works. Thank you."}
{"project_id": "Alacritty", "bug_id": "251", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Window clipping when maximized and `decorations` set to `none` on Windows\n\nDescription:\n![image](https://user-images.githubusercontent.com/25470747/202878783-3b943f98-53be-4229-a2bd-d3e38d4bf8f0.png)\n\nDiscussion:\nWhich version? Is this a regression or can you reproduce it with previous versions too?\n---\nI tried `0.9.0` and `0.10.0` but the `Windows + Up` key doesn't work to maximize the window. I also tried setting `startup_mode: Maximized` in my `alacritty.yml`, but it doesn't maximize on open for any version of `alacritty`.\n---\nWhat about adding a `Maximize` key binding manually?\n---\n`Maximize` keybind doesn't exist\n---\nHuh, you're right. Must have confused it with `Minmize`. Which Windows version are you on?\n---\nWindows 11 Version 21H2 (OS Build 22000.1281)\n---\nIt seems like a similar issue with https://github.com/alacritty/alacritty/issues/3662#issuecomment-1324785128, your capture is like to my capture.\n---\nReported upstream in https://github.com/rust-windowing/winit/issues/2568.\n---\nCan reproduce On Windows 10\n---\nThis issue is still reproducible for me when alt tabbing into minimized alacritty windows with `decorations: none`, changing `dynamic_padding` or adjusting `padding` `x` and `y`, had no effect. Rather instead of maximizing, which no longer breaks this, it still occurs on alt tabbing to minimized. alacritty 0.12.0 (5a728195) Windows 10\n---\nOne year later, I think Windows Terminal is an option you can try."}
{"project_id": "Alacritty", "bug_id": "252", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Selection wrong when search end on last line\n\nDescription:\nWhen the entire terminal is filled and a non-vi search is started for something in the last line, then the selection will shift up a line once the selection is confirmed.\n\n"}
{"project_id": "Alacritty", "bug_id": "253", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Maximizing windows on macOS/X11 doesn't cover the whole screen\n\nDescription:\n### System OS: macOS Version: f409f743724207e7a2a4c008ce74ea505ae6bbcf To reproduce: hold option key and double click a corner of the window. It is supposed to maximize the window and cover the whole screen. Notes: * It only happens on my second monitor (3840 x 2160). It is not reproducible when I maximize a window in the built-in monitor. * In my macOS setup, I auto hide the dock and notification bar. I found this commit f409f743724207e7a2a4c008ce74ea505ae6bbcf introduces the problem using git bisect. This is the screenshot with the `decorations` set to `transparent` `decorations: buttonless` `decorations: full` Pay attention to the small gaps around the window. This is the screenshot using 8a838710 with `decorations: buttonless`\n\nDiscussion:\nDoes it make a difference whether you enable/disable cell-precision resizing in the config?\n---\n@chrisduerr I am not aware of this setting in the config. Can you give me a pointer? I don't see the commit introduces a new setting. I can't find it in https://github.com/alacritty/alacritty/blob/master/alacritty.yml either.\n---\nYeah right nvm we decided against an option until people actually complained about it. This is probably a winit bug, I've opened an issue upstream: https://github.com/rust-windowing/winit/issues/2684\n---\nI'm experiencing this issue on Arch Linux as well. For now I am using the 8a838710e37665f5bdeb8c01d2f1d3e6fec976a6 commit which works fine.\n---\n>I'm experiencing this issue on Arch Linux as well. For now I am using the https://github.com/alacritty/alacritty/commit/8a838710e37665f5bdeb8c01d2f1d3e6fec976a6 commit which works fine. What window manager are you using?\n---\nSame situation, ![2023-02-13-09:01:56](https://user-images.githubusercontent.com/14966910/218349412-edaa43d7-a44a-4320-bed7-fbe29e0212fd.png) 8a83871 commit really works fine. ![2023-02-13-09:03:13](https://user-images.githubusercontent.com/14966910/218349429-a407b047-55ee-4977-8792-e3aae1bf1775.png)\n---\nAh, so dwm can't do window managing, that's sort of expected, I'd assume...\n---\n> > What window manager are you using? I am using AwesomeWM.\n---\n> Ah, so dwm can't do window managing, that's sort of expected, I'd assume... Well, it looks like it's time to switch to bspwm. lol\n---\nI mean we'll likely alter the behavior on X11, it's just not as trivial to fix like on macOS. Because on X11 it's just a hint for window manager, so wm can ignore it.\n---\nWell, in fact, I have planned to switch to bspwm. It's just because I'm too lazy to patch.\n---\nWas going to write an issue but then noticed this. Also it looks like a fix was merged on winit due to chrisduerr's issue. But yes, same for me on macOS, built in MacBook monitor, with the latest rc1 version:\n---\n**Just so you know. The macOS issue is fixed, but the fix is not included anywhere.** However, if you're on X11, do report if you have issue like that with the widnow manager you're seeing this.\n---\n> I mean we'll likely alter the behavior on X11, it's just not as trivial to fix like on macOS. Because on X11 it's just a hint for window manager, so wm can ignore it. I'm genuinely surprised dwm takes the hint into account at all. Leave it to suckless to partially implement a feature and as a result make things worse than not implementing it at all I suppose.\n---\nIt's really bad that dwm doesn't fill every window space, but now I switch to bspwm and it's fine. ![2023-02-16-08:52:05-s](https://user-images.githubusercontent.com/14966910/219230916-416e1c44-8fd7-4f13-bf9e-47a5f4d2f30f.png) ![2023-02-16-08:56:16-s](https://user-images.githubusercontent.com/14966910/219230937-fcda9cfc-32a2-43fa-b32c-69384a87870b.png)"}
{"project_id": "Alacritty", "bug_id": "254", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Unable to type into the terminal, only return key is accepted?\n\nDescription:\nI have tried to delete my config so that Alacritty starts with default configuration but i get the same behaviour. Its very strange cuz it was working until it begun to do this without any changes to the config or the app itself. ### System OS: macOS Version: both compiled from master and 12 RC1 macbook pro intel with Swedish keyboard. ### Logs\n\nDiscussion:\nProvide the `alacritty --print-events` when you can't type anything and some information about your setup, like whether you're using some special hardware, keyboard layout, and so on.\n---\n@kchibisov Well I cant run that command since it refuses to let me write it or paste it. If I run it in another terminal I get \"command not fount\". i ma going to provide some more info above.\n---\nThe executable is located in the `Alacritty.app`, so execute the binary from another terminal.\n---\n@kchibisov Added som logs to main post. Is this what you mean?\n---\nIf you do `alacritty --print-events --config-file=/dev/null` is it the same? It seems like something is crashing in apple framework...\n---\n@kchibisov I just copied some of it.\n---\nYou're not using any special software and such that might interact with the apple stack? I'd suggest to clone the repository and run `RUST_BACKTRACE=full cargo run`, but it seems like apple bug.\n---\n@kchibisov something that interacts with Apple Stack?? I am not sure what you mean by that. But I have been using Yabai alongside Alacritty and it does require SIP to be partially off if that is what you mean.\n---\n>But I have been using Yabai alongside Alacritty and it does require SIP to be partially off if that is what you mean. Could you try disabling yabai? It seems like something confuses default apple native libs leading to silent crash, which disables the input for you.\n---\n@kchibisov I stopped Yabai services in Brew but it has no effect to this problem. But then again why would Kitty operate normally if something from Apple crashes?\n---\nI mean, it crashes somewhere when trying to hide menu bar, which we don't do, so there's some sort of injection still present.\n---\nYou might try older alacritty versions, maybe some of them will work.\n---\n@kchibisov latest stable version 0.11 is indeed working. I can at least write in it but using mac I need the Winit update with Option key fixes.\n---\nCould you type into window from winit? When typing into that window, you should see something like `KeyboardInput` and `ReceivedChar`.\n---\n@kchibisov This is what I get but I could not see the characters i wrote in that window. Edit: It is very strange cuz RC1 has been working flawlessly since release and I even build from source that worked before that."}
{"project_id": "Alacritty", "bug_id": "255", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Wrong colors after update\n\nDescription:\nI updated Alacritty today by building from source from the latest git commit. Now, the green and blue colors seem to be swapped. I have not touched my config. It looks like the latest commit messed with something to do with the colors. Version 0.13.0-dev (cb7ad5b7). Interestingly, not all colors seem to be swapped, but notably the prompt and the output of ls --color=auto are.\n\nDiscussion:\nCould you show a screenshot before and on commit you've mentioned as well as share your config?\n---\nBefore: left. After: right. ![Screenshot from 2023-05-24 17-06-09](https://github.com/alacritty/alacritty/assets/78478547/a914c80e-4570-4bd0-b6da-b3aa78d1a992)\n---\nCould you run `alacritty --ref-test` and attach `alacritty.recording`(will create in the dir) as txt to the issue? it'll also create 3 json files, delete all of them.\n---\n[alacritty.recording.txt](https://github.com/alacritty/alacritty/files/11556332/alacritty.recording.txt)\n---\nThanks. cc @Andy-Python-Programmer\n---\nSame issue here. This may have something to do with `tmux`, as the issue doesn't show up when I do `alacritty --ref-test`.\n---\nThe `--ref-test` simply records all the bytes written to the pty interface, the provided record is sufficient and reproduces the bug.\n---\n> The `--ref-test` simply records all the bytes written to the pty interface, the provided record is sufficient and reproduces the bug. Interesting, when I launch with this it doesn't start in interactive mode, and thus doesn't launch tmux in my shell (which I have configured it to do in my `fish` config. The colors aren't broken when I'm not in tmux.\n---\nBefore: ![image](https://github.com/alacritty/alacritty/assets/35623921/58a4cc5a-e30c-42f0-adf2-54342ca14abe) After: ![image](https://github.com/alacritty/alacritty/assets/35623921/5981e819-eafb-49a5-8b9f-890cd6c8a376)\n---\nHere is a 256 palette table. Seems like the ordering changed from rows to columns, or something like that. Left side is before https://github.com/alacritty/alacritty/commit/cb7ad5b7e6893787c2006cc8cb09fbbc4711c0f7, right - just after applying the patch. ![image](https://github.com/alacritty/alacritty/assets/694419/c6a6f043-1a41-44fb-9f3b-56bb5c863e19)\n---\nhttps://github.com/alacritty/alacritty/pull/6952"}
{"project_id": "Alacritty", "bug_id": "256", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Crash during live search\n\nDescription:\nAlacritty will crash if you do the following from the repo: 1. `cargo run -- --config-file=/dev/null` 2. `cat -v /dev/urandom` 3. Start a search `Ctrl + Shift + F`. 4. Type `.` into it, so all characters will match 5. Do a fast resize to make it 1 cell width o closer. It's a regression from the 3bd5ac221ab3b122962063edd1f4c10f9f2d117f (Unify the grid line indexing types). Backtrace from the latest commit\n\n"}
{"project_id": "Alacritty", "bug_id": "257", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: changing windows display scale causes a crash\n\nDescription:\nsteps to reproduce: 1. start alacritty 2. minimize alacritty 3. change windows display scale 4. bringing alacritty back will cause the crash ### System OS: Windows Version: `alacritty 0.12.1 (5fdfd47)` ### Logs [0.000003700s] [INFO ] [alacritty] Welcome to Alacritty [0.000408900s] [INFO ] [alacritty] Version 0.12.1 (5fdfd47) [0.002749700s] [INFO ] [alacritty] Configuration files loaded from: \"C:\\\\Users\\\\jeff\\\\AppData\\\\Roaming\\\\alacritty\\\\alacritty.yml\" [0.012407700s] [INFO ] [alacritty] Window scale factor: 1 [0.068666100s] [INFO ] [alacritty] Using WGL [0.080416300s] [DEBUG] [alacritty] Loading \"Iosevka Curly\" font [0.099698200s] [INFO ] [alacritty] Running on AMD Radeon(TM) Graphics [0.099952300s] [INFO ] [alacritty] Using OpenGL 3.3 renderer [0.142406400s] [DEBUG] [alacritty] Filling glyph cache with common glyphs [0.174504900s] [INFO ] [alacritty] Cell size: 9 x 25 [0.174729800s] [INFO ] [alacritty] Padding: 0 x 0 [0.174869300s] [INFO ] [alacritty] Width: 800, Height: 600 [0.198863600s] [INFO ] [alacritty] PTY dimensions: 24 x 88 [0.250253900s] [INFO ] [alacritty] Initialisation complete [0.250894100s] [DEBUG] [alacritty_terminal] Term::resize dimensions unchanged [13.804558900s] [INFO ] [alacritty] Font size changed to Size(30) with scale factor of 1.25 [13.804808800s] [INFO ] [alacritty] Cell size: 12 x 31 [13.804960000s] [DEBUG] [alacritty_terminal] New num_cols is 2 and num_lines is 1 panicked at 'called `Option::unwrap()` on a `None` value', alacritty\\src\\display\\mod.rs:681:72\n\nDiscussion:\nCould you provide the `--print-events` log for me just so I can ensure that I understand the root cause correctly?\n---\n\n---\nThat's what I've thought. Thx."}
{"project_id": "Alacritty", "bug_id": "258", "source_type": "github", "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "Title: Segfault on shitty PPP hardware\n\nDescription:\nSeems like 6edb113f1490c3aaaf8d8019ca444effdb175b23 caused a regression which causes a crash on the PPP. I'd assume you might know what to do @kchibisov, otherwise I can look at glutin myself tomorrow.\n\n"}
{"project_id": "Alacritty", "bug_id": "259", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Hint regex with large chars amount. Hanging and continues memory consumption\n\nDescription:\n### Problem With the `Qm[0-9A-Za-z]{44}` as a hint regex pattern, Alacritty hangs upon activating Hints and memory consumption starts to growth continuously. But no issues with `sha256:([0-9a-f]{64})` pattern. No any hangs, hints highlighted almost immediately ### System Version: 0.12.2 OS: Ubuntu 20.04 Compositor: compton WM: xmonad ### Logs Crashes: NONE Font/Terminal size: [screenshot](https://github.com/alacritty/alacritty/assets/29537473/e70f66a4-9ef0-4e26-b012-0c8c985db0b0) Keyboard and bindings: After activating Hints with the mentioned pattern Alacritty hangs and stops reporting any events with `--report-events` option\n\nDiscussion:\nGoing to remove high priority from this since it shouldn't cause complete destruction anymore. But I still think we can probably do better. Potentially a lazily evaluated regex might perform more reasonably."}
{"project_id": "Alacritty", "bug_id": "260", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Keybindings don't work on Linux after migration to TOML\n\nDescription:\nI recently built version 13-dev and as suggested at the first start I did the migration of my config from YML to TOML. I don't see regressions on Mac so far, but on Linux all of my keybindings stopped working. To reproduce, I simplified my bindings to this: But, it doesn't work. ### System OS: Linux Version: alacritty 0.13.0-dev (4ad1aa32) Linux/BSD: Wayland, Gnome, Fedora ### Logs\n\nDiscussion:\nYes, it works now. Thanks!"}
{"project_id": "Alacritty", "bug_id": "261", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Regex `;*|rust` doesn't match anything in `rustfmt` string\n\nDescription:\nThe bug is present on master and on v0.12.3. It's enough to search for the following regex. The `;+|rust` works just fine.\n\nDiscussion:\nThis is likely due to the leftmost search for the pattern causing `;*` to match empty strings and ending in a dead state thereafter. I'm not sure if this can be solved without switching to a backtracking regex parser, but since users can relatively easily work around this, I don't think it's a big issue."}
{"project_id": "Alacritty", "bug_id": "262", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: SIGSEGV at exit on master (80d4dac)\n\nDescription:\nAlacritty crashes (SIGSEGV) on exit This issue was introduced with 80d4dac The underlying issue is that the `zwp_primary_selection_device_manager_v1` object seen in the backtrace is destroyed after the wayland connection is here: https://github.com/Smithay/wayland-rs/blob/8581b9d298e3bfc872a598380a09eb386a9db408/wayland-backend/src/sys/client_impl/mod.rs#L1022 ### System OS: Arch Linux (6.5.8-arch1-1) Version: alacritty 0.13.0-dev (80d4dac) Linux: sway, Wayland ### Logs Backtrace: Relevant Valgrind output:\n\n"}
{"project_id": "Alacritty", "bug_id": "263", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Crash during leaving search with selection\n\nDescription:\nI'm not sure what exactly triggered it, but that's the crash log\n\nDiscussion:\nHm, I'm not sure how to repro that, and it's weird that we've end up in such state, but, so I guess I'll just add debugging and wait until it happens again and then try to craft a test case out of output. I think I've seen it outside `cancel_search` as well at least once, but obviously I have only report for that sort of crash as of now.\n---\nOk, that has a bit more context.\n---\nThat's the patch I've had applied\n---\nhttps://github.com/alacritty/alacritty/assets/8886672/64085460-b957-47f4-8d63-aef158933e37"}
{"project_id": "Alacritty", "bug_id": "264", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Cursor is not damaged when blinking and scrolled up\n\nDescription:\nN/A\n\n"}
{"project_id": "Alacritty", "bug_id": "265", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: alacritty crashes when closed. Hyprland, Wayland\n\nDescription:\n### Steps to reproduce 1. open alacritty 2. close alacritty ### Expected behavior Alacritty closes ### Actual behavior crash ### System OS: Arch Linux (kernel 6.4.10-zen2-1-zen) Version: alacritty 0.12.2 (9d9982df) Compositor: Hyprland ### Logs Created log file at \"/tmp/Alacritty-3985.log\" [0.000000870s] [INFO ] [alacritty] Welcome to Alacritty [0.000026360s] [INFO ] [alacritty] Version 0.12.2 (9d9982df) [0.000031220s] [INFO ] [alacritty] Running on Wayland [0.000183220s] [INFO ] [alacritty] Configuration files loaded from: \"/home/user/.config/alacritty/alacritty.yml\" [0.049363487s] [INFO ] [alacritty] Using EGL 1.5 [0.051254478s] [ERROR] [sctk_adwaita] XDG Settings Portal did not return response in time: timeout: 100ms, key: color-scheme [0.058066502s] [TRACE] [crossfont] Number of fonts is 167 [0.058088242s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/noto/NotoSans-Bold.ttf\", index=0 [0.058133342s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 } [0.062155994s] [INFO ] [alacritty] Window scale factor: 1 [0.098153124s] [DEBUG] [alacritty] Loading \"Cascadia Mono\" font [0.098748704s] [TRACE] [crossfont] Number of fonts is 169 [0.098766484s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMono.ttf\", index=0 [0.098802854s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 } [0.100419245s] [TRACE] [crossfont] Number of fonts is 167 [0.100434975s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMono.ttf\", index=393216 [0.100478015s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 } [0.102089356s] [TRACE] [crossfont] Number of fonts is 170 [0.102104266s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMonoItalic.ttf\", index=0 [0.102135896s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Italic, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 } [0.103806807s] [TRACE] [crossfont] Number of fonts is 168 [0.103821397s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMonoItalic.ttf\", index=393216 [0.103857297s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold Italic, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 } [0.163398790s] [INFO ] [alacritty] Running on NVIDIA GeForce RTX 3070 Ti/PCIe/SSE2 [0.163411160s] [INFO ] [alacritty] Using OpenGL 3.3 renderer [0.164833451s] [DEBUG] [alacritty] Filling glyph cache with common glyphs [0.169027953s] [INFO ] [alacritty] Cell size: 19 x 38 [0.169037493s] [INFO ] [alacritty] Padding: 0 x 0 [0.169041903s] [INFO ] [alacritty] Width: 800, Height: 600 [0.169150793s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 182, g: 182, b: 182 } to Rgb { r: 120, g: 120, b: 120 } [0.169159753s] [TRACE] [alacritty] Deriving dim colors from normal colors [0.169163543s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 0, g: 0, b: 0 } to Rgb { r: 0, g: 0, b: 0 } [0.169167693s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 153, g: 0, b: 0 } to Rgb { r: 100, g: 0, b: 0 } [0.169171533s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 0, g: 166, b: 0 } to Rgb { r: 0, g: 109, b: 0 } [0.169175923s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 153, g: 153, b: 0 } to Rgb { r: 100, g: 100, b: 0 } [0.169180113s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 0, g: 0, b: 178 } to Rgb { r: 0, g: 0, b: 117 } [0.169184303s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 178, g: 0, b: 178 } to Rgb { r: 117, g: 0, b: 117 } [0.169188443s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 0, g: 166, b: 178 } to Rgb { r: 0, g: 109, b: 117 } [0.169192483s] [TRACE] [alacritty_terminal] Scaling RGB by 0.66 from Rgb { r: 191, g: 191, b: 191 } to Rgb { r: 126, g: 126, b: 126 } [0.169197293s] [INFO ] [alacritty] PTY dimensions: 15 x 42 [0.170674494s] [INFO ] [alacritty] Initialisation complete [0.171534584s] [TRACE] [crossfont] Number of fonts is 169 [0.172085635s] [TRACE] [crossfont] Number of fonts is 167 [0.172631735s] [TRACE] [crossfont] Number of fonts is 170 [0.173176275s] [TRACE] [crossfont] Number of fonts is 168 [0.173223045s] [INFO ] [alacritty] Font size changed to Size(48) with scale factor of 1 [0.173229555s] [INFO ] [alacritty] Cell size: 19 x 38 [0.173242155s] [DEBUG] [alacritty_terminal] New num_cols is 42 and num_lines is 10 [0.176676017s] [INFO ] [alacritty] Padding: 0 x 0 [0.176684147s] [INFO ] [alacritty] Width: 800, Height: 600 [0.176699347s] [TRACE] [alacritty_terminal] Carriage return [0.176713667s] [TRACE] [alacritty_terminal] Linefeed [0.177474488s] [TRACE] [alacritty_terminal] Setting mode: BracketedPaste [0.182479500s] [TRACE] [alacritty_terminal] Setting title to 'Some(\"~\")' [0.182490000s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Black)) [0.182495820s] [TRACE] [alacritty_terminal] Configuring charset G0 as Ascii [0.182500170s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.182504660s] [TRACE] [alacritty_terminal] Carriage return [0.182510380s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(BrightGreen)) [0.182515370s] [TRACE] [alacritty_terminal] Configuring charset G0 as Ascii [0.182519660s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.182524140s] [TRACE] [alacritty_terminal] Configuring charset G0 as Ascii [0.182528390s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.182532600s] [TRACE] [alacritty_terminal] Configuring charset G0 as Ascii [0.182536690s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.182540720s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Green)) [0.182547600s] [TRACE] [alacritty_terminal] Configuring charset G0 as Ascii [0.182551790s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.182556110s] [TRACE] [alacritty_terminal] Configuring charset G0 as Ascii [0.182560440s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.182564960s] [TRACE] [alacritty_terminal] Clearing line: Right [0.182569380s] [TRACE] [alacritty_terminal] Carriage return [0.182573800s] [TRACE] [alacritty_terminal] Moving forward: 11 [0.220945411s] [TRACE] [crossfont] Number of fonts is 169 [0.221510242s] [TRACE] [crossfont] Number of fonts is 167 [0.222062092s] [TRACE] [crossfont] Number of fonts is 170 [0.222611072s] [TRACE] [crossfont] Number of fonts is 168 [0.222647892s] [INFO ] [alacritty] Font size changed to Size(48) with scale factor of 1 [0.222654052s] [INFO ] [alacritty] Cell size: 19 x 38 [0.222663382s] [DEBUG] [alacritty_terminal] New num_cols is 50 and num_lines is 10 [0.228502306s] [INFO ] [alacritty] Padding: 0 x 0 [0.228512126s] [INFO ] [alacritty] Width: 958, Height: 538 warning: queue 0x7f5d78000ca0 destroyed while proxies still attached: zwp_primary_selection_offer_v1@4278190082 still attached wl_data_offer@4278190080 still attached zwp_primary_selection_device_v1@26 still attached zwp_primary_selection_device_manager_v1@22 still attached wl_data_device@25 still attached wl_seat@24 still attached wl_data_device_manager@23 still attached wl_registry@21 still attached warning: queue 0x55963971e5c0 destroyed while proxies still attached: xdg_wm_base@38 still attached wl_output@16 still attached wl_output@15 still attached wp_fractional_scale_manager_v1@14 still attached xdg_activation_v1@13 still attached zwp_text_input_manager_v3@12 still attached zwp_relative_pointer_manager_v1@11 still attached zwp_pointer_constraints_v1@10 still attached zxdg_decoration_manager_v1@9 still attached wl_seat@8 still attached wp_viewporter@7 still attached wl_subcompositor@6 still attached wl_compositor@5 still attached wl_shm@4 still attached wl_registry@2 still attached [3.401194155s] [INFO ] [alacritty] Goodbye Deleted log file at \"/tmp/Alacritty-3985.log\" fish: Job 1, 'alacritty -vvv' terminated by signal SIGSEGV (Address boundary error) ### Coredump [core.alacritty.1000.b9e9f6d8863e44978041ef467da814e5.3985.1692193963000000.zip](https://github.com/alacritty/alacritty/files/12360166/core.alacritty.1000.b9e9f6d8863e44978041ef467da814e5.3985.1692193963000000.zip) Stack trace of thread 3985: #0 0x00007f5d7e15c415 n/a (libwayland-client.so + 0x8415) #1 0x00007f5d7e15c573 n/a (libwayland-client.so + 0x8573) #2 0x00007f5d7e15e132 wl_proxy_marshal_array_flags (libwayland-client.so + 0xa132) #3 0x00007f5d7e15ebda wl_proxy_marshal_flags (libwayland-client.so + 0xabda) #4 0x00007f5d7d5a452f n/a (libnvidia-egl-wayland.so.1 + 0x852f) #5 0x00007f5d7d5a710f n/a (libnvidia-egl-wayland.so.1 + 0xb10f) #6 0x00007f5d7d2acdd0 n/a (libEGL_nvidia.so.0 + 0xacdd0) #7 0x00007f5d7d2a2c20 n/a (libEGL_nvidia.so.0 + 0xa2c20) #8 0x00007f5d7dc40cc6 n/a (libc.so.6 + 0x40cc6) #9 0x00007f5d7dc40e10 exit (libc.so.6 + 0x40e10) #10 0x00007f5d7dc27cd7 n/a (libc.so.6 + 0x27cd7) #11 0x00007f5d7dc27d8a __libc_start_main (libc.so.6 + 0x27d8a) #12 0x00005596383a01b5 n/a (alacritty + 0x8a1b5) Stack trace of thread 4008: #0 0x00007f5d7dd039df __poll (libc.so.6 + 0x1039df) #1 0x00007f5d76934caf n/a (libnvidia-eglcore.so.535.98 + 0x1534caf) #2 0x00007f5d7693361a n/a (libnvidia-eglcore.so.535.98 + 0x153361a) #3 0x00007f5d7dc8c9eb n/a (libc.so.6 + 0x8c9eb) #4 0x00007f5d7dd1123c n/a (libc.so.6 + 0x11123c) ELF object binary architecture: AMD x86-64\n\nDiscussion:\nTry latest master\n---\nsame\n---\nThe one crashing on your trace is nvidia though. Could you try different drivers?\n---\nalready tried 530.*, 535.* versions open source(https://github.com/NVIDIA/open-gpu-kernel-modules) and proprietary. The result is the same. As far as i know nouveau does not support 30* series cards.\n---\nThe issue is in user space stuff (egl lib from nvidia). Well, the issue might resolve over time then. Would suggest to try other egl applications, like github.com/rust-windowing/glutin/ and https://github.com/emersion/hello-wayland/tree/opengl\n---\nShould i report this to https://github.com/NVIDIA/egl-wayland ?\n---\nif it happens with https://github.com/emersion/hello-wayland/tree/opengl then yes.\n---\nno issues with https://github.com/emersion/hello-wayland/tree/opengl\n---\nDoes it happen with https://github.com/rust-windowing/glutin ?\n---\nYes\n---\nMaybe it wants `eglTerminate()` in the end, can't think of anything else at this point. Will send a patch later, but it shouldn't really matter...\n---\nOk. Thanks. I will report this to https://github.com/NVIDIA/egl-wayland\n---\n> Maybe it wants `eglTerminate()` in the end, can't think of anything else at this point. Will send a patch later, but it shouldn't really matter... This would fix the problem. When an EGL application exits we will try to clean up any remaining unterminated EGLDisplays. This includes releasing and Wayland resources associated with them. The issue here is that the Wayland display connection is being closed by another .fini hook, which happens to run before ours. Xlib lets libraries register a callback to be invoked when a Dispaly is closed, which avoids this sort of problem. Unfortunately Wayland doesn't have anything like that. So we have no way of knowing whether the wl_display associated with a given EGLDisplay is still valid.\n---\n>This would fix the problem. When an EGL application exits we will try to clean up any remaining unterminated EGLDisplays. This includes releasing and Wayland resources associated with them. The issue here is that the Wayland display connection is being closed by another .fini hook, which happens to run before ours. Hm, I guess. mesa works fine here though, but I guess it really depends how you do things internally and what your constraints are. It's a bit weird that you try to clear arbitrary resources though, given that we don't inform termination by any means and all objects we drop are dropped before the `wl_display` is being dropped, including all the EGL resources, so it's a bit weird that all of that ends to crash. Are you destroying resources synchronously and `eglTerminate` would work like a barrier? It's not clear how do you hook up to termination, unless you hook `exit` itself. The `eglTerminate` is not called due to how fragile it's in libraries unless we have `private/ref counted` version of it, which is not supported by mesa yet...\n---\n> It's not clear how do you hook up to termination, unless you hook exit itself. We register an \\_\\_attribute__((destructor)) function which is invoked when libEGL.so is unloaded or the program exits. We need to do this because otherwise resources might be leaked if a program calls dlclose but keeps running.\n---\nHm, yeah, in our case it's on program exit since we don't call `dlclose` and intentionally leak on exit. I could call `eglTerminate` in alacritty, but such thing can't be automated reliably without display platform extensions, because `RAII` guard calling `eglTerminate` without any extension doing private/ref counting is a foot gun (unless library owns everything which is not the case)... Btw, does nvidia supports `EGL_KHR_display_reference`? If it does I could just use it and it should work, because with it we can sort of reliably call `eglTerminate` and not blow up everything.\n---\n> Btw, does nvidia supports EGL_KHR_display_reference? We do.\n---\nHm, yeah, then I guess I'll just push this https://github.com/rust-windowing/glutin/pull/1609 myself, because the main issue is that I have no way to test this thing before... Thx for clarifying.\n---\n@pd2s could you run `git clone --depth 1 https://github.com/kchibisov/glutin -b egl-display-reference && cd glutin && cargo run --example window` and tell whether it crashes for you?\n---\nunfortunately, it does [core.window.1000.7f286f2d7dd1480aa12168c897572172.6020.1692254105000000.zip](https://github.com/alacritty/alacritty/files/12366230/core.window.1000.7f286f2d7dd1480aa12168c897572172.6020.1692254105000000.zip)\n---\nCould you apply this patch on top of branch you've cloned And post the output of it?"}
{"project_id": "Alacritty", "bug_id": "266", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Truncated text on copy to clipboard\n\nDescription:\n### Issue Description Copy selection gets truncated to about 65k chars. I'm not that experienced with rust but poked a little around and maybe this is useful: - The final call where the text gets cut occures somewhere around here: https://github.com/alacritty/alacritty/blob/d40198da53f4c1c882901e364aca59e9b2ef2367/alacritty/src/clipboard.rs#L73 - I've added a debug log message right before that to log the length of `text`, which is actually correct. - I've replaced `text` with a temporary variable initialized with about 2 MiB of text from a file using `include_str!(\"clip.txt\")`. The length is correct but after the text gets passed into `clipboard.set_contents()` it's truncated again - I've created a minimal test app using the example code and the same `include_str!(\"clip.txt\")` of [copypasta/examples/hello_world.rs](https://github.com/alacritty/copypasta/blob/94e44c83dbaf08582309b297f0ae3b1b8cd1b17c/examples/hello_world.rs) and that does actually works as expected, the clipboard is not truncated. ### Steps to reproduce - Build & Run - Generate output larger then about 65k chars, I used `journalctl --since today --no-pager` - Select all - Copy to clipboard using default keybinding `Ctrl+Shift+C` - Paste clipboard into other application, i.e. VS Code or gedit ### System OS: Linux - Fedora 37 Workstation (Gnome3 Wayland) Version: alacritty 0.12.0 (via `cargo install alacritty`) and alacritty 0.13.0-dev (commit d40198da53f4c1c882901e364aca59e9b2ef2367) ### Logs Crashes: N/A Config: [alacritty.txt](https://github.com/alacritty/alacritty/files/11184617/alacritty.txt) Font/Terminal size: `alacritty -vv` -> [Alacritty.log](https://github.com/alacritty/alacritty/files/11184609/Alacritty.log) Keyboard and bindings: `alacritty --print-events` -> [Alacritty.log](https://github.com/alacritty/alacritty/files/11184607/Alacritty.log)\n\nDiscussion:\nYeah, that's a known issue with our Wayland clipboard. The limitation arises from the linux pipe limitation(usually such thing is solved via async writing to the `fd`).\n---\nI could've misunderstood you, but the issue is not present when using the example code ([copypasta/examples/hello_world.rs](https://github.com/alacritty/copypasta/blob/94e44c83dbaf08582309b297f0ae3b1b8cd1b17c/examples/hello_world.rs)) of the crate which Alacritty uses. That example code does not write async to the `fd`, afaik."}
{"project_id": "Alacritty", "bug_id": "267", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Xorg Clipboard paste's content is \"lagged behind\"\n\nDescription:\nAfter a day or two of Alacritty instance uptime, I notice that clipboard updates (usually copies) from other programs get \"lagged behind\". When performing a paste action, the old (i.e. wrong) content gets emitted. I have to wait a second between a copy from one program, until I paste in Alacritty. A new Alacritty instance being spawn does not exhibit this behavior, and sees updated clipboard content without a lag. This might be a copypaste issue or a x11-clipboard issue, but I'm not sure how to debug this. ### System OS: Linux Version: alacritty 0.4.2 (f68de375b67d) Linux/BSD: X11\n\nDiscussion:\nMaybe there's something with our X11 clipboard and it has a lot of events to care and lags behind, and new instance has nothing to process and works just fine.\n---\nThat sounds about right - I'll look into that code.\n---\nExperimenting with the following program running in the background: After a few hours of uptime, I don't see a lag yet, but I do see occasional errors: These errors don't appear in a fresh invocation of the program. It's only a clue for now.\n---\nPinging @quininer as this may be an issue in `x11-clipboard`.\n---\nInteresting, I will try to reproduce it. I doubt it is related to the desktop environment. I currently use kde wayland, so I can only try it under xwayland and xvfb.\n---\nI have been running for a while, and it seems that no errors appear.\n---\nFWIW I can confirm that this definitely still happens, although given that it *seems* to happen only on long sessions repro is quite challenging.\n---\nI just tried switching from `st` to `alacritty` and on my 3rd day of `alacritty` have now experienced this problem. **version**: alacritty 0.9.0 **os**: ArchLinux **wm**: dwm 6.2 (with 1 patch) The problem easily starts happening after running my main `alacritty` instance for merely 8 hours.\n---\nI am also seeing this issue with Alacritty 0.9.0 on Wayland / river. It would seem that this was also discussed in other places: https://githubmemory.com/repo/alacritty/copypasta/issues/32\n---\nSame thing here, I have to paste twice in order to get the new content from the clipboard. When I open a new `alacritty` instance, everything works as expected. I'm running it for about 5 days or so. version: alacritty 0.9.0 os: Ubuntu 20.04\n---\n### System OS: ArchLinux Version: alacritty 0.12.0 (5a728195) Linux/BSD: X11 awesomewm > I have to wait a second between a copy from one program, until I paste in Alacritty. In my situation, no matter how long I waited, previous content or empty content(rarely) is pasted frst. https://github.com/alacritty/alacritty/assets/70215835/bd9db995-19c4-45e3-9741-bdababcf1aa4\n---\nI started noticing this just over the last couple of days when I'd never seen it before. I can't think of anything relevant I've changed. I have one particular terminal open, right now, that has been routinely dropping pastes (I can paste small bits of plain text multiple times in a row and some are just dropped, sometimes up to 50% of them) or lagging behind and pasting old content. The other two alacritty siblings it has, which are about the same age, don't exhibit this at all. No other program is doing this.\n---\nHere is code to reliably (so far, 100%) reproduce the problem, using gtk because I already knew how to handle it. This is certainly a bug somewhere in the alacritty application, not an X11/wayland bug. To reproduce: 1. Run this program 2. As soon as it prints \"paste now\" paste into an alacritty terminal. You have a 7 second grace period since alacritty, internally, uses a 3 second timeout. 4. Wait until it prints \"timeout-done\" 5. Nothing will happen in the alacritty window. 6. That alacritty window is now stuck in this buggy state, permanently. 9. Go copy some other random text and paste it into the alacritty window. 10. Alacritty will show \"some-text\" instead of whatever you just pasted. Someone mentioned it was using sync::mpsc channels, and my best guess is that something is using a channel to send loads from the clipboard, but stops reading it after the timeout. If setting the clipboard succeeds within 3 seconds it's fine, if it fails it's fine, but if it succeeds after 3 seconds then the stale value is being sent on a channel that no one is listening to. The next time a load is requested it starts a load but receives the stale value on that channel. Also breaks the copypasta demo application posted above: https://github.com/alacritty/alacritty/issues/3601#issuecomment-615479746\n---\n@awused you've got it! Glad my hunch around copypasta was correct ðŸ˜„ ."}
{"project_id": "Alacritty", "bug_id": "268", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: Blocking paste freezing Alacritty\n\nDescription:\n# Issue I'm on Gentoo, running Sway (and thus Wayland.) The clipboard has never really worked on Wayland, it's consistently a mess. Talks with @chrisduerr and @cmr suggested that it should be fixed on master. Today I compiled master with rustc 1.34.2 to try, and it seems like it is still not working. # How to reproduce 1. Running Sway (might work on other Wayland WMs?) 2. Open Firefox with `GDK_BACKEND=wayland` set. 3. Select and copy some text on Firefox. 4. Switch to another workspace where Alacritty is. 5. Paste text (ctrl+shift+v) The result should be a freeze and eventually a crash. On a release build I get this: On a debug build with backtracing I get this:\n\nDiscussion:\nI just realized I was running on my branch with an updated Cargo.lock. Here's the backtrace on upstream master:\n---\nHave you tried out the Wayland clipboard support previously and it worked, or is this the first time testing? It seems to me like the issue is due to the clipboard code causing troubles with our windowing code, even though they should be clearly separated. Could you try checking out the commit which introduced native clipboard support and run just that commit without updating the dependencies (so build from lockfile)? Maybe an update has caused a regression here.\n---\n> Have you tried out the Wayland clipboard support previously and it worked, or is this the first time testing? I had the latest Alacritty release before, and it did not work. > Could you try checking out the commit which introduced native clipboard support and run just that commit without updating the dependencies (so build from lockfile)? What commit is that?\n---\n> What commit is that? Should be https://github.com/jwilm/alacritty/commit/9e89aaa477369b20a06f4b9f636d7fd543c4c985. Additionally, can you see if installing `wl-clipboard` solves your issue? While not ideal -- installing a package for cross-client clipboard support -- it's the best Wayland has, at the moment. I currently use that and haven't had any problems with copying and pasting between Firefox and Alacritty.\n---\nI have tested this without `wl-clipboard` using just the sway compositor inside of X, so it should work properly just with a clean Sway install. However I mainly tested copying between Alacritty instances. Does this only happen when copy/pasting between Firefox and Alacritty @lovesegfault? Or is it all applications and Alacritty, or even Alacritty and Alacritty?\n---\n@chrisduerr Between Alacritty instances it's fine. Only when copying from something else _into_ Alacritty that things go nuts. I've recently experienced an additional case, where the paste will succeed but in a weird way. First it will freeze, for a few (20-30) seconds. Then, _sometimes_, the paste will succeed but it will paste a _bunch_ of times, and in the end there will be ` ...` Pretty weird!\n---\n@cole-h I already had `wl-clipboard` installed from the get-go.\n---\nIf there's ` ` at the end and it throws you into paste mode (should be shown in the status line in vim), that's a vim thing. The reason why there's multiple of those is probably because it pastes a bunch of times. So I'd assume that should be fixed once the root cause is resolved.\n---\n@chrisduerr I've experienced the \"freeze + repeated pastes\" on multiple terminal applications. Namely, Vim, Neovim, Weechat, Radare2, and gopass.\n---\n@lovesegfault can you see if 0.3.2 works for you? I'm also running gentoo and also noticed that the clipboard is broken in the latest master. However, it works for me with 0.3.2.\n---\nThe latest master completely reworked the clipboard, so testing 0.3.2 would not really be beneficial.\n---\nThis issue seems to have disappeared with FF 67. Weird.\n---\n@chrisduerr I was not able to replicate this issue with another gtk wayland application and @lovesegfault reports it to be fixed with FF 67. I think this was likely to have been an issue with wayland firefox. In that case, is this issue still active or should it be closed?"}
{"project_id": "Alacritty", "bug_id": "269", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Alt + 4 wrongly sends escape sequence inside Alacritty+Neovim (Swedish/Nordic kb layout!)\n\nDescription:\nOS: macOS Ventura 13.6.1 Version: Current commit: https://github.com/alacritty/alacritty/tree/a10fb8adc0857633be428d673ab8d36d2a90193a (but same issues since kitty key protocol) Keyboard layout: Swedish/Nordic option_as_alt = \"None\" Key events: Same output for command line inside Alacritty, Inside Neovim, Inside Neovim inside Tmux: _Alt + 4_ inside Alacritty command line outputs **$** _Alt + 4_ inside Alacritty+Neovim from Insert mode it switches to Normal mode and then sends the keycode which result in my caret ending up at the end of the line instead of inserting a **$** _Alt + 4_ inside Alacritty+Tmux+Neovim correctly inserts **$** inside Neovim I had a similar issue when Alacritty switched from \"alt_send_esc\" to \"option_as_alt\", \"option_as_alt\" = \"None\" has been working correctly ever since the following issue was filed: https://github.com/alacritty/alacritty/issues/6637#issuecomment-1420837553 Back then i had to comment out a section that appended an escape sequence/bytes to make it work, after that issue a fix was implemented and it has worked natively ever since then. But now something has changed (i think it changed after switching to the kitty keyboard protocol?), it is as if the option \"None\" doesn't work anymore, it seems to have no effect, but i have not tested it out properly, instead; this time i simply commented out code again to get it to work as i expect it to: https://github.com/alacritty/alacritty/blob/master/alacritty_terminal/src/term/mod.rs#L94-L95 After commenting out/removing: Once again Alacritty works as expected, always inserting a **$** no matter if i am just using Alacritty cmdline, Alacritty + Neovim, Alacritty + Tmux + Neovim I have only used it for 1 hour so far but so far there has been no negative issues for me without those lines, i am sure there is some unforseen issues i will run into in the future but for now, Alacritty works as expected So, in latest commit, it seems like **option_as_alt = \"None\"** isn't respected, or something else is going on? And it is weird that it works in Alacritty+Tmux+Neovim but not Alacritty+Neovim, i don't know how Tmux is handling events, is it stripping out the escape sequence? Anyway, with my \"fix\" i can use Alacritty properly again but it not a nice solution\n\nDiscussion:\nCould you check kitty as well? For me it works the same way as you describe alacritty works, so I'd assume you won't be able to use it as well? It all looks like neovim bug, if it matters, but I guess the thing is that your `Alt` is not really an `Alt`, but rather compose in such case?\n---\nhttps://github.com/alacritty/alacritty/pull/7446\n---\n>And it is weird that it works in Alacritty+Tmux+Neovim but not Alacritty+Neovim, i don't know how Tmux is handling events, is it stripping out the escape sequence? it doesn't support mode that broke it for you, so it's not relevant with it.\n---\n> Could you check kitty as well? For me it works the same way as you describe Alacritty works, so I'd assume you won't be able to use it as well? > Kitty works properly, inserting **$** in every scenario > #7446 > This fixes the issue i was having, now it properly inserts **$** everywhere as expected so in that regards both Kitty & Alacritty now works the same However, binding M- (alt) in tmux does not work as expected (works properly in Kitty) -Up & -Down works as Home/End in alacritty (going to the end or beginning of line) M-Left works as \"Backspace\" This may be a completely different issue though, or a non issue depending on setup. I tried to follow the flow of the SequenceBuilder and payload, but i am way to unfamiliar with the Alacritty codebase to follow it properly, especially how the \"payload\" mutates in the various TermMode states, especially now with all the kitty_event_* The original issue is solved as far as i can tell though. Thank you\n---\n>This may be a completely different issue though, or a non issue depending on setup. I tried to follow the flow of the SequenceBuilder and payload, but i am way to unfamiliar with the Alacritty codebase to follow it properly, especially how the \"payload\" mutates in the various TermMode states, especially now with all the kitty_event_* Does it happen with default config as well? I can't repro that on macOS with tmux, arrows with Alt work as expected from what I can tell, and I've just used your bindings pretty much."}
{"project_id": "Alacritty", "bug_id": "270", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: alacritty migrate: Configuration file migration failed: parsing error: Unable to locate config file\n\nDescription:\nFresh after upgrading to alacritty 0.13.0, I saw in the release notes that there's been a migration from yaml to toml. I ran `alacritty migrate` as instructed, but it failed with: Obviously, the file is there. There is a parsing error, but the exact cause seems to be misreported. After playing with it a bit, I found that running `alacritty migrate -i` (skipping imports) succeeds. The only import in my yaml was `colorscheme.yml`. To be honest, I don't remember what exactly that is, but I've decided to create this issue, because `Unable to locate config file` is misleading and maybe this will help other people. It's unfortunate that `migrate` fails with a vague error on a [former valid config](https://github.com/Randoragon/dotfiles/blob/b45d7534595d6e3cc6550d616294f8e5bb4c49a4/alacritty/.config/alacritty/alacritty.yml). I don't mean this to come off as picky though, thanks for taking the effort of making this migration smooth! ### System OS: Arch Linux, X11, bspwm, picom Version: alacritty 0.13.0 (78fa4d6f)\n\nDiscussion:\nyeah, it should likely tell which file it failed to locate correctly.\n---\n> It's unfortunate that migrate fails with a vague error on a former valid config. Just to be 100% clear, this is still a valid configuration file and there's no plan to change that. Missing imports is an intentionally supported feature. Seems like migration just doesn't account for that, it should be a warning instead.\n---\nThanks for posting. I imagine quite a few others ran into this problem, like myself. The correct solution was to first migrate the `coloscheme.yml` files and afterwards rename the imports in the `alacritty.yml` before migrating. Maybe this could be done automatically or the user could be prompted to do so in the warning message of the migrate command.\n---\nSame error here. I am on Arch and my config is in ~/.config/alacritty/alacritty.yml\n---\nI could migrate manually. What do the following look like after migration?\n---\n> I could migrate manually. What do the following look like after migration? Comments are not preserved by the parser, for obvious reasons. Each keybinding is converted to a toml entry like so: You can very easily verify this yourself by saving the snippet you've posted into a `file.yml`, and running `alacritty migrate -c file.yml`, which should create `file.toml`. The `-c` option is documented in `alacritty migrate --help`. Mind that the problem described in this issue is strictly tied to importing non-existent files. This appears to have been solved, a fix should be available in 0.13.1 (whenever that is released), and until then it's very easy to avoid the problem manually by passing the `-i` flag as I described, or getting rid of the redundant import entries from your config, or using the development branch where the fix is present. It's not really clear from your explanation if our problems are at all related.\n---\nThis issue just happened to me. I had to manually edit the file (which was located at the correct path despite `alacritty migrate` supposedly failing to locate it)."}
{"project_id": "Alacritty", "bug_id": "271", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Long startup times on sway/Wayland since winit 0.28\n\nDescription:\n### System OS: Linux, openSUSE Tumbleweed Version: 0.12.0 Linux/BSD: Wayland, sway ### Logs Log with the error For comparison: Log on i3 without the error ### Description Since I updated to version 0.12.0 alacritty takes really long (around 20 - 40 seconds) until a window is displayed. This happens both for the first started instance as for instances started later and also for new windows of the same process. Via bisecting the update to winit 0.28 seems to be the first commit affected which makes sense imo: 1c878a0476257d328113efcd7088f1aa53f42e56 I also provided a log of a startup on i3wm/X11 were alacritty starts in around one second. So far no change in my config seems to help and the bug persists when using the default config shipped by openSUSE - Changing the renderer and window decorations makes no difference.\n\nDiscussion:\nIt was already discovered and detected that broken `xdg-portal` setup is the cause for this issue. There's no solution other than fixing it or removing entirely. You can also build with https://github.com/alacritty/alacritty/blob/2df8f860b960d7c96efaf4f059fe2fbbdce82bcc/alacritty/Cargo.toml#L91 disabled(just remove a line) or use something like https://github.com/alacritty/alacritty/pull/6758 (which solved such things on a more fundamental level). There's also an upstream change which added timeout for `portal` stuff(100ms), but it's not really a solution.\n---\nThank you for the fast answer! If I understand that right https://github.com/rust-windowing/winit/pull/2676 would fix this issue too? As a workaround I am now using a custom build with the dependency removed as you suggested - Let's see how fast the issue is resolved. :)\n---\nYeah, that will also solve the issue. It's just we can't really make a release with this branch for a while. We might add a patch release, which adds a `100ms` timeout, but it's not really a solution...\n---\nYes, I understand that - For now I am happy with my workaround, let's see how this moves forward.\n---\nWanted to chime in and say I was experiencing this as well on Wayland/Hyprland -- I downgraded to 0.11 to temporarily deal with it.\n---\nJust a general note here, fix your portals setup if you use them. You'll have such latency with GTK applications as well.\n---\n> fix your portals setup if you use them Is there a link or some other info on the setup problem you're referring to? I'm having a hard time coming up with a searchable Google query from the descriptions in this issue\n---\n`xdg-desktop-portal` given that you have such issue you likely installed it yourself, I've assumed that you're aware of such thing. See https://github.com/swaywm/sway/issues/5732\n---\nBe aware that it'll happen if and only if you have portals installed on your system, if you don't have them, you won't ever face it(like I don't have them at all).\n---\nThank you for taking the time to link the root cause, I was able to fix my portal setup on sway via their wiki entry: https://github.com/swaywm/sway/wiki#gtk-applications-take-20-seconds-to-start From my perspective this issue can be closed, especially because https://github.com/rust-windowing/winit/pull/2676 is merged now too, but you could keep it open until a new release."}
{"project_id": "Alacritty", "bug_id": "272", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Crashing on GNOME Wayland\n\nDescription:\nI'm using zellij inside alacritty on Ubuntu 22.04. Sometimes when selecting text in zellij, alacritty crashes. The panic message is shown below. zellij copies the selected text into the system clipboard, so this might be related. ### System OS: Linux (Ubuntu 22.04) Version: alacritty 0.12.0-dev (2a2d38fc) Linux/BSD: Wayland ### Logs Output:\n\nDiscussion:\nCould you provide `WAYLAND_DEBUG=1` log during it, otherwise it seems impossible to understand what is happening. I'd guess some issue with cursor image.\n---\nAlso, are you using nvidia binary driver? Just in case.\n---\nI've got the same problem and I managed to capture the log 8642.323] wl_display@1.delete_id(2739) [ 368642.351] wl_display@1.delete_id(2736) [ 368642.363] zwp_text_input_v3@16.done(4122) [ 368643.149] wl_display@1.delete_id(2730) [ 368643.169] wl_callback@2730.done(6604591) [ 368643.479] wl_buffer@72.release() [ 368643.492] wl_callback@2736.done(5844) [ 368644.071] -> wl_surface@25.frame(new id wl_callback@2736) [ 368644.095] -> wl_surface@25.attach(wl_buffer@72, 0, 0) [ 368644.103] -> wl_surface@25.damage_buffer(0, 0, 2486, 1537) [ 368644.156] -> wl_surface@25.commit() [ 368644.169] -> wl_display@1.sync(new id wl_callback@2730) [ 368644.186] -> zwp_text_input_v3@16.set_cursor_rectangle(2472, 1525, 0, 0) [ 368644.201] -> zwp_text_input_v3@16.commit() [ 368645.269] wl_display@1.delete_id(2730) [ 368645.287] wl_buffer@2734.release() [ 368645.421] -> wl_buffer@2734.destroy() [ 368645.426] zwp_text_input_v3@16.done(4123) [ 368645.802] wl_display@1.delete_id(2736) [ 368645.820] wl_callback@2736.done(6604594) [ 368659.340] wl_buffer@71.release() [ 368659.383] wl_callback@2730.done(5844) [ 368660.329] -> wl_surface@25.frame(new id wl_callback@2730) [ 368660.361] -> wl_surface@25.attach(wl_buffer@71, 0, 0) [ 368660.372] -> wl_surface@25.damage_buffer(0, 0, 2486, 87) [ 368660.428] -> wl_surface@25.damage_buffer(0, 1412, 2486, 125) [ 368660.504] -> wl_surface@25.commit() [ 368660.521] -> wl_display@1.sync(new id wl_callback@2736) [ 368660.549] -> xdg_toplevel@39.set_title(\"Zellij (dirty-science) - Pane #1\") [ 368660.557] -> zwp_text_input_v3@16.set_cursor_rectangle(2472, 1525, 0, 0) [ 368660.583] -> zwp_text_input_v3@16.commit() [ 368660.596] -> wl_shm_pool@27.create_buffer(new id wl_buffer@2739, 1208025376, 2506, 45, 10024, 0) [ 368660.908] -> wl_subsurface@29.set_position(-10, -45) [ 368660.940] -> wl_surface@28.attach(wl_buffer@2739, 0, 0) [ 368660.953] -> wl_surface@28.damage_buffer(0, 0, 2506, 45) [ 368660.972] -> wl_surface@28.commit() [ 368660.986] -> wl_surface@30.attach(nil, 0, 0) [ 368661.001] -> wl_surface@30.commit() [ 368661.015] -> wl_surface@32.attach(nil, 0, 0) [ 368661.030] -> wl_surface@32.commit() [ 368661.037] -> wl_surface@34.attach(nil, 0, 0) [ 368661.052] -> wl_surface@34.commit() [ 368661.077] -> wl_surface@36.attach(nil, 0, 0) [ 368661.087] -> wl_surface@36.commit() [ 368666.089] wl_display@1.delete_id(2734) [ 368666.114] wl_display@1.delete_id(2736) [ 368666.118] zwp_text_input_v3@16.done(4124) [ 368666.852] wl_display@1.delete_id(2730) [ 368666.876] wl_callback@2730.done(6604615) [ 368667.204] wl_buffer@72.release() [ 368667.218] wl_callback@2736.done(5844) [ 368667.858] -> wl_surface@25.frame(new id wl_callback@2736) [ 368667.882] -> wl_surface@25.attach(wl_buffer@72, 0, 0) [ 368667.890] -> wl_surface@25.damage_buffer(2460, 1487, 26, 50) [ 368669.997] -> wl_surface@25.commit() [ 368670.006] -> wl_display@1.sync(new id wl_callback@2730) [ 368670.027] -> zwp_text_input_v3@16.set_cursor_rectangle(2472, 1525, 0, 0) [ 368670.045] -> zwp_text_input_v3@16.commit() [ 368670.489] -> xdg_toplevel@39.set_title(\"Zellij (dirty-science) - Pane #1\") [ 368670.512] -> xdg_toplevel@39.set_title(\"Zellij (dirty-science) - Pane #1\") [ 368670.530] -> wl_shm_pool@27.create_buffer(new id wl_buffer@2734, 1208476464, 2506, 45, 10024, 0) [ 368671.132] -> wl_subsurface@29.set_position(-10, -45) [ 368671.160] -> wl_surface@28.attach(wl_buffer@2734, 0, 0) [ 368671.176] -> wl_surface@28.damage_buffer(0, 0, 2506, 45) [ 368671.190] -> wl_surface@28.commit() [ 368671.196] -> wl_surface@30.attach(nil, 0, 0) [ 368671.213] -> wl_surface@30.commit() [ 368671.218] -> wl_surface@32.attach(nil, 0, 0) [ 368671.228] -> wl_surface@32.commit() [ 368671.233] -> wl_surface@34.attach(nil, 0, 0) [ 368671.244] -> wl_surface@34.commit() [ 368671.248] -> wl_surface@36.attach(nil, 0, 0) [ 368671.260] -> wl_surface@36.commit() [ 368674.953] wl_display@1.delete_id(2730) [ 368674.972] wl_buffer@2739.release() [ 368674.981] -> wl_buffer@2739.destroy() [ 368674.989] zwp_text_input_v3@16.done(4125) [ 368675.327] wl_display@1.delete_id(2736) [ 368675.351] wl_callback@2736.done(6604624) [ 368675.695] wl_buffer@71.release() [ 368675.709] wl_callback@2730.done(5844) [ 368676.285] -> wl_surface@25.frame(new id wl_callback@2730) [ 368676.307] -> wl_surface@25.attach(wl_buffer@71, 0, 0) [ 368676.316] -> wl_surface@25.damage_buffer(0, 0, 2486, 1537) [ 368677.169] -> wl_surface@25.commit() [ 368677.188] -> wl_display@1.sync(new id wl_callback@2736) [ 368677.211] -> zwp_text_input_v3@16.set_cursor_rectangle(2472, 1525, 0, 0) [ 368677.221] -> zwp_text_input_v3@16.commit() [ 368677.868] wl_display@1.delete_id(2739) [ 368677.897] wl_display@1.delete_id(2736) [ 368677.908] wl_buffer@2734.release() [ 368677.914] -> wl_buffer@2734.destroy() [ 368678.041] wl_display@1.delete_id(2734) [ 368678.061] zwp_text_input_v3@16.done(4126) [ 368689.590] -> xdg_toplevel@39.set_title(\"Zellij (dirty-science) - Pane #1\") [ 368689.644] -> wl_shm_pool@27.create_buffer(new id wl_buffer@2734, 1208025376, 2506, 45, 10024, 0) [ 368690.007] -> wl_subsurface@29.set_position(-10, -45) [ 368690.040] -> wl_surface@28.attach(wl_buffer@2734, 0, 0) [ 368690.054] -> wl_surface@28.damage_buffer(0, 0, 2506, 45) [ 368690.070] -> wl_surface@28.commit() [ 368690.074] -> wl_surface@30.attach(nil, 0, 0) [ 368690.088] -> wl_surface@30.commit() [ 368690.093] -> wl_surface@32.attach(nil, 0, 0) [ 368690.104] -> wl_surface@32.commit() [ 368690.124] -> wl_surface@34.attach(nil, 0, 0) [ 368690.142] -> wl_surface@34.commit() [ 368690.151] -> wl_surface@36.attach(nil, 0, 0) [ 368690.214] -> wl_surface@36.commit() [ 368691.498] wl_display@1.delete_id(2730) [ 368691.530] wl_callback@2730.done(6604640) [ 368691.985] wl_buffer@72.release() [ 368692.004] wl_callback@2736.done(5844) [ 368692.855] -> wl_surface@25.frame(new id wl_callback@2736) [ 368692.893] -> wl_surface@25.attach(wl_buffer@72, 0, 0) [ 368692.904] -> wl_surface@25.damage_buffer(0, 0, 2486, 87) [ 368692.916] -> wl_surface@25.damage_buffer(0, 1412, 2486, 125) [ 368695.558] -> wl_surface@25.commit() [ 368695.583] -> wl_display@1.sync(new id wl_callback@2730) [ 368695.637] -> zwp_text_input_v3@16.set_cursor_rectangle(2472, 1525, 0, 0) [ 368695.685] -> zwp_text_input_v3@16.commit() [ 368700.906] -> xdg_toplevel@39.set_title(\"Zellij (dirty-science) - Pane #1\") [ 368700.950] -> wl_shm_pool@27.create_buffer(new id wl_buffer@2739, 1208476464, 2506, 45, 10024, 0) [ 368701.279] -> wl_subsurface@29.set_position(-10, -45) [ 368701.299] -> wl_surface@28.attach(wl_buffer@2739, 0, 0) [ 368701.327] -> wl_surface@28.damage_buffer(0, 0, 2506, 45) [ 368701.358] -> wl_surface@28.commit() [ 368701.364] -> wl_surface@30.attach(nil, 0, 0) [ 368701.378] -> wl_surface@30.commit() [ 368701.385] -> wl_surface@32.attach(nil, 0, 0) [ 368701.401] -> wl_surface@32.commit() [ 368701.407] -> wl_surface@34.attach(nil, 0, 0) [ 368701.424] -> wl_surface@34.commit() [ 368701.430] -> wl_surface@36.attach(nil, 0, 0) [ 368701.447] -> wl_surface@36.commit() [ 368701.469] -> xdg_toplevel@39.set_title(\"Zellij (dirty-science) - Pane #1\") [ 368701.487] -> wl_shm_pool@27.resize(-1876688896) [ 368714.090] -> wl_shm_pool@27.create_buffer(new id wl_buffer@2740, 1208927552, 2506, 45, 10024, 0) [ 368714.873] -> wl_subsurface@29.set_position(-10, -45) [ 368714.900] -> wl_surface@28.attach(wl_buffer@2740, 0, 0) [ 368714.908] -> wl_surface@28.damage_buffer(0, 0, 2506, 45) [ 368714.917] -> wl_surface@28.commit() [ 368714.920] -> wl_surface@30.attach(nil, 0, 0) [ 368714.926] -> wl_surface@30.commit() [ 368714.928] -> wl_surface@32.attach(nil, 0, 0) [ 368714.944] -> wl_surface@32.commit() [ 368714.947] -> wl_surface@34.attach(nil, 0, 0) [ 368714.958] -> wl_surface@34.commit() [ 368714.962] -> wl_surface@36.attach(nil, 0, 0) [ 368714.973] -> wl_surface@36.commit() [ 368716.322] wl_display@1.delete_id(2730) [ 368716.346] wl_buffer@2734.release() [ 368716.351] -> wl_buffer@2734.destroy() [ 368716.356] zwp_text_input_v3@16.done(4127) [ 368716.469] wl_display@1.error(wl_shm_pool@27, 2, \"shrinking pool invalid\") wl_shm_pool@27: error 2: shrinking pool invalid thread 'main' panicked at 'failed to dispatch wayland event queue: Os { code: 71, kind: Uncategorized, message: \"Protocol error\" }', alacritty/src/event.rs:1438:30 stack backtrace: 0: rust_begin_unwind at /rustc/a55dd71d5fb0ec5a6a3a9e8c27b2127ba491ce52/library/std/src/panicking.rs:584:5 1: core::panicking::panic_fmt at /rustc/a55dd71d5fb0ec5a6a3a9e8c27b2127ba491ce52/library/core/src/panicking.rs:142:14 2: core::result::unwrap_failed at /rustc/a55dd71d5fb0ec5a6a3a9e8c27b2127ba491ce52/library/core/src/result.rs:1814:5 3: core::result::Result ::expect at /rustc/a55dd71d5fb0ec5a6a3a9e8c27b2127ba491ce52/library/core/src/result.rs:1064:23 4: alacritty::event::Processor::run::{{closure}} at ./rust/tools/alacritty/alacritty/src/event.rs:1436:25 5: winit::platform_impl::platform::sticky_exit_callback at ./.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.5/src/platform_impl/linux/mod.rs:849:9 6: winit::platform_impl::platform::wayland::event_loop::EventLoop ::run_return at ./.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.5/src/platform_impl/linux/wayland/event_loop/mod.rs:539:13 7: winit::platform_impl::platform::EventLoop ::run_return at ./.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.5/src/platform_impl/linux/mod.rs:748:56 8: as winit::platform::run_return::EventLoopExtRunReturn>::run_return at ./.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.5/src/platform/run_return.rs:62:9 9: alacritty::event::Processor::run at ./rust/tools/alacritty/alacritty/src/event.rs:1370:25 10: alacritty::alacritty at ./rust/tools/alacritty/alacritty/src/main.rs:189:18 11: alacritty::main at ./rust/tools/alacritty/alacritty/src/main.rs:83:17 12: core::ops::function::FnOnce::call_once at /rustc/a55dd71d5fb0ec5a6a3a9e8c27b2127ba491ce52/library/core/src/ops/function.rs:248:5 note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace. Deleted log file at \"/tmp/Alacritty-23898.log\" I'm running Alacritty on a local machine, ssh to remote host and run Zellij on it and Hellix. The problem can be reproduced by scrolling a pretty big file up and down, what's interesting is that it is much harder to reproduce if WAYLAND_DEBUG=1 is set I'm running Ubuntu 22.04 LTS in Parallels on Mac. So probably it is not a video driver\n---\n@PolyMeilex That seems like a crash is in `sctk-adwaita` buffer handling? The Seems like a surface created by it to draw titlebar.\n---\nI'd assume if you disable decorations in the config it'll fix itself?\n---\nit is pretty hard to reproduce with WAYLAND_DEBUG=1 but I can try without it. How can I disable decorations?\n---\nYou don't need to repro with `WAYLAND_DEBUG=1`. `alacritty -o window.decorations=none`\n---\nI've run it with `alacritty -o window.decorations=none` for a couple of hours now, and so far I've not been able to reproduce the crash. I have a Intel graphics card, so Nvidia shouldn't be an issue.\n---\nThat's quite weird, the error originates from `wayland-shm`, it returns `shrinking pool invalid` protocol error whenever client request a pool resize with size smaller than the current one. The weird thing is that SCTK has an internal check before sending the request `if newsize > self.len` EDIT: This size also looks interesting: `wl_shm_pool@27.resize(-1876688896)`\n---\nI have reproduced this problem about 10 times now. it looks like a race to me. It happens when when a lot of output appears very fast. For me it has nothing to do with selecting. But I'm also using zellij over ssh.\n---\nThe only race is the race with compositor or your compositor is acting up. if the situation won't change we'd have to revert the decorations patch, since it confuses GNOME given the purpose of it is to respect GNOME. Maybe the issue is with the text context and `sctk-adwaita` does something weird here with `crossfont`.\n---\n>EDIT: This size also looks interesting: wl_shm_pool@27.resize(-1876688896) Maybe you have some sort of overflow when drawing title text or something like that? Could anyone repro that issue with debug build and provide a backtrace for that? I think the problem is that it overflows somewhere and submits the wrong buffer. Just do `RUST_BACKTRACE=full cargo run`, I hope that it'll panic if you try to repro.\n---\nI've managed to capture a backtrace:\n---\n> It happens when a lot of output appears very fast. Tried `cat /dev/urandom`, sadly it did not do the trick. Did same with selecting also without any luck. `alacritty` from master, tested both in debug and release `zellij` 0.33.0 from crates.io `gnome` 43.0 Not sure if this is just so hard to reproduce, or it simply does not happen on my setup\n---\nIt could be the issue with the GNOME you're using, since they likely use GNOME 42, but you're using GNOME 43. In general if you really want to you can setup qemu vm with ubuntu 22.04, usually it's the only way to go with such bugs.\n---\nI've been refraining from using Zellij with Alacritty for a few weeks, but I am also getting crashes (not as frequent) when using Micro (editor) directly with Alacritty. I am running Arch, so I am on the latest of pretty much everything, specifically Gnome 43.1.\n---\nWell since I can't reproduce this, it would be nice if someone could build Alacritty without `wayland-csd-adwaita` feature just remove this line: https://github.com/alacritty/alacritty/blob/d92a8a0e16eda3df7566e5c995aa0d258b6b76f7/alacritty/Cargo.toml#L91 And confirm that going back to default decorations indeed solves the problem.\n---\n@PolyMeilex it does, since `decorations: none` in alacritty config fixes it as well from what was stated above.\n---\nThat's not the same thing, decorations none disables decorations all together, disabling the feature disables adwaita code, so we can check if the same thing happens with default sctk decorations. (most likely not, but it would minimize amount of code that has to be checked)\n---\n> Well since I can't reproduce this, it would be nice if someone could build Alacritty without `wayland-csd-adwaita` feature just remove this line: > > https://github.com/alacritty/alacritty/blob/d92a8a0e16eda3df7566e5c995aa0d258b6b76f7/alacritty/Cargo.toml#L91 > > And confirm that going back to default decorations indeed solves the problem. I tried this, and it doesn't seem to crash any more when `wayland-csd-adwaita` is removed.\n---\nWell, I have to correct that, now I got a crash even with `wayland-csd-adwaita` removed. But seems to happen far less frequently. Unfortunately didn't set `RUST_BACKTRACE`, so this is the output I got:\n---\n@Tiwalun do you get a crash for `none` decorations btw in the config?"}
{"project_id": "Alacritty", "bug_id": "273", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: `startup_mode: Maximized` stopped working recent GNOME Wayland\n\nDescription:\nThis stopped working after upgrading from Fedora 35 to 36. From the log it seems that Alacritty starts in 800x600, switch size to 2560x1408 (which is about the size of my screen) but then goes back to 800x600. The Alacritty version in Fedora 36 is 0.10.1 whereas in 35 it was 0.9.0. But I tried to run Alacritty from source using the v0.9.0 tag, and I see the same issue, i.e. even 0.9.0 doesn't start maximized on Fedora 36 either. So maybe something else changed in Fedora 36 that interfers with Alacritty? Anything I can do to investigate further? ### System OS: Linux (Fedora 36) Version: 0.10.1 Linux/BSD: Grome on Wayland ### Logs Font/Terminal size: `alacritty -vv`\n\nDiscussion:\nIs `Fullscreen` startup mode working?\n---\n@kchibisov yes, `Fullscreen` seems to work correctly.\n---\nI could try to take a look once I have time, but it seems more like gnome broke something...\n---\nExperiencing the same issue. Identical config with `startup_mode: Maximized` fails on Fedora 36 (Gnome 42.2 / Wayland) but works fine on Ubuntu 22.04 (Gnome 42.2 / X11). Tried building from source on Fedora to match Ubuntu's `0.11.0-dev` version provided by `apt` (since Fedora's rpm package is at `0.10.1`) but the issue remained. Tested on: - [alacritty.yml](https://gist.github.com/georgegach/4f2b0491b34384c90e73849f4fd62620) - Fedora: `alacritty 0.11.0-dev (e09ff0b4)` and `alacritty 0.10.1 from dnf rust-alacritty-0.10.1-1.fc36.src.rpm` - Ubuntu: `alacritty 0.11.0-dev from apt 0.10.1+1-20220711T020155~jammy-e09ff0b4`\n---\nThe culprit in my case was `decorations: none`. Certainly a Wayland issue. Running Alacritty with `WAYLAND_DISPLAY= alacritty` in XWayland temporarily fixes the issue for me. Here are the `-vv` logs on empty config, with options passed as params on XWayland and Wayland if it helps maintainers in any way.\n---\nI'm experiencing the same issue. Having the line `decorations: none` makes the `startup_mode: Maximized` stop working.\n---\nSame on Arch Linux with Alacritty Version: 0.10.1-2. See https://github.com/LeoMeinel/dot-files/issues/4 for more details and https://github.com/LeoMeinel/dot-files/commit/0687c5772545dce289e85de87188021c8c25b945 for a way to fix this (that shouldn't be necessary)\n---\nNot sure if this should be a separate issue, but in Plasma Wayland, Alacritty never started in maximized mode despite no `decorations` option. It looks like it somehow fails to resize, or the compositor refuses to do so. Operating System: Arch Linux KDE Plasma Version: 5.25.5 KDE Frameworks Version: 5.97.0 Qt Version: 5.15.5 Graphics Platform: Wayland alacritty -vv\n---\n@kchibisov For the record, this issue has been reported upstream too. https://bugs.kde.org/show_bug.cgi?id=457867 After my quick debugging, I see an issue on client side. In particular, it appears like alacritty calls `xdg_surface.set_window_geometry` without attached buffer before receiving the first configure event. This is a no-no thing, most compositors silently handle that, but there's a proposal to make it a protocol error because it makes no sense to call set_window_geometry without a buffer. I believe that this maximization issue is going to be resolved if alacritty starts updating the window geometry when there's a buffer. For example, this is alacritty's wayland debug log when running with kwin_wayland That `xdg_surface@24.set_window_geometry(0, 0, 800, 600)` right after creating `xdg_toplevel` confuses async geometry code in kwin, ideally we should post a protocol error in that case. Note that the behavior may differ across compositors because every compositor handles async geometry updates differently, but alacritty should not touch the window geometry until it attaches a buffer. This is most likely a bug in whatever toolkit alacritty uses under the hood.\n---\nThat's actually a disaster for us. Since it would mean that on wayland will have a special handling of that. The problem is that. 1. We create a Window 2. We run an event_loop and commit buffers via swap buffers. This will be even more interesting since it'll become on a different thread latter on. And given that swap buffers and window handling is done by 2 different libraries and we have multiple threads/windows involved it means that we're better off not using the request at all. I'm not even sure we can solve that for multithreaded apps reliably given that you must create event queues around for that in the current design. It's always nice that protocols got adjusted over time due and compositors change behavior for a stable protocols in such ways. Since this code was working without issues for like years in multiple compositors and started to break only when realization came.\n---\n@kchibisov While looking at the wayland debug log, I've also noticed that alacritty or its toolkit attaches a buffer of size 800x600 even though it has received a configure event with size 1920x1007 This may be culprit too. However, because of that set_window_geometry without attached buffer, you can still have issues when running kwin_wayland. So, there seems to be two issues actually. :( edit: full wayland debug log just in case [log.txt](https://github.com/alacritty/alacritty/files/9560519/log.txt)\n---\nI mean I understand the issue, I'm just saying that it can't be solved directly in alacritty right now, it'll require changing like 2-3 libraries down the road for that. Think of it like I need to change Qt(just example) to fix that in alacritty. And some other problem that this \"Qt\" library is in the middle of updating their \"libwayland\" wrapper and in beta for \"Qt-6\" for like 6 month already. That Qt reference is an example, but you should get an understanding of why this can't be easily solved right now and takes some amount of time...\n---\nHaving same issue on Arch linux (alacritty version: `0.11.0`). And from reading comments looks like its related to wayland. Can title be changed to reflect that its not related to Fedora specifically but wayland, so its easier to find for other people.\n---\n~~i upgraded my system, not exactly sure what things got updated which caused this, but now hack mentioned in https://github.com/LeoMeinel/dot-files/issues/4 gives this error~~ ~~> thread 'main' panicked at 'Failed to set the cursor: XError { description: \"BadDrawable (invalid Pixmap or Window parameter)\", error_code: 9, request_code: 149, minor_code: 4 }', /build/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.4/src/platform_impl/linux/x11/util/cursor.rs:126:35 note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace~~ ~~and `startup_mode: Maximized` works as expected.~~ EDIT 1: back to same behaviour after a restart. not sure what happened. the hack works again without a panic. EDIT 2: Got the same error again, here is the full log, looks like its related my amd APU driver. full log > amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 thread 'main' panicked at 'Failed to set the cursor: XError { description: \"BadDrawable (invalid Pixmap or Window parameter)\", error_code: 9, request_code: 149, minor_code: 4 }', /build/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.4/src/platform_impl/linux/x11/util/cursor.rs:126:35 note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace EDIT 3: Got it again, though stacktrace might be helpful to debug but not alot of info there. What makes this annoying is that hack only works sometimes and i need to comment out the hack when it fails to run, which is very annoying when alacritty is your default terminal. full log with RUST_BACKTRACE=full > amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 amdgpu: Failed to allocate a buffer: amdgpu: size : 18446744072990294016 bytes amdgpu: alignment : 2097152 bytes amdgpu: domains : 4 amdgpu: flags : 6 thread 'main' panicked at 'Failed to set the cursor: XError { description: \"BadDrawable (invalid Pixmap or Window parameter)\", error_code: 9, request_code: 149, minor_code: 4 }', /build/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.27.4/src/platform_impl/linux/x11/util/cursor.rs:126:35 stack backtrace: 0: 0x56381e6efcb6 - 1: 0x56381e5a608c - 2: 0x56381e6c4d84 - 3: 0x56381e6f1ee1 - 4: 0x56381e6f2e20 - 5: 0x56381e6f29e2 - 6: 0x56381e6f2956 - 7: 0x56381e6f2940 - 8: 0x56381e382f32 - 9: 0x56381e3831b2 - 10: 0x56381e7a55ed - 11: 0x56381e3a8522 - 12: 0x56381e503ba9 - 13: 0x56381e3ba6b2 - 14: 0x56381e3eb688 - 15: 0x56381e428f09 - 16: 0x56381e3e7958 - 17: 0x56381e4a5429 - 18: 0x56381e4bd693 - 19: 0x56381e49d057 - 20: 0x7f285f2cd290 - 21: 0x7f285f2cd34a - __libc_start_main 22: 0x56381e38c485 - 23: 0x0 -\n---\nI have same problem on Ubuntu 22.04.2 LTS Temporal fix: `nano ~/.local/share/applications/Alacritty.desktop` ![image](https://user-images.githubusercontent.com/109800286/221354177-6745303b-d6f1-4bf1-9c92-4579e4f9ec7a.png)\n---\n@StackOverflowExcept1on your issue is unrelated, alacritty just exits without issues for you, likely your shell program crashed.\n---\nI just tried @StackOverflowExcept1on's workaround, and it seems to fix the `Maximized` issue for me :tada:"}
{"project_id": "Alacritty", "bug_id": "274", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Alacritty crashes sometimes when switching between different tty on wayland\n\nDescription:\nAlacritty crashes sometimes when switching between different tty on wayland. To reproduce you can run `dbus-run-session startplasma-wayland` in 2 different tty, launch alacritty there and try to switch between them. It doesn't happen consistently, but after several attempts it crashes. ### System OS: Linux Version: alacritty 0.9.0 Linux/BSD: Wayland, KDE ### Logs When crash happens it writes `wl_display@1: error 0: invalid object 42`, `-vv` doesn't add much info, only `[INFO ] [alacritty] Goodbye` in the next line.\n\nDiscussion:\nCan you reproduce this with the window example from https://github.com/rust-windowing/winit?\n---\nIt doesn't work for me for some reason. `cargo run --example window` gives: Probably it can't find some wayland library as I use nixos...\n---\nok, figured it out - had to add wayland and libxkbcommon to LD_LIBRARY_PATH. After that it launched but didn't draw a window, just spammed terminal with messages:\n---\nTry glutin window examples from https://github.com/rust-windowing/glutin. There should be window example `cargo run --example window`.\n---\nIt panics for me: Probably some other library is missing, or just specifying LD_LIBRARY_PATH isn't enough...\n---\nGlutin should work just as well as Alacritty compiled from master. Does that also not work for you?\n---\nCould you provide `WAYLAND_DEBUG=1 alacritty 2> out.txt` logs? It should help a lot to see what exactly crashes it. Also make sure that you're running latest alacritty's build from master.\n---\n> Glutin should work just as well as Alacritty compiled from master. Does that also not work for you? I believe it won't work with just `cargo run`. I have to make nixos environment that is used to build alacritty which requires some manual work. Will try to do it later. > Could you provide WAYLAND_DEBUG=1 alacritty 2> out.txt logs? Sure, here are the logs (from alacritty 0.9.0, will try with master later): [out.txt](https://github.com/alacritty/alacritty/files/7775011/out.txt)\n---\nIt seems like a race somewhere in your display server. The pointer got released, however the server still send events for it? I'm not sure that we can do something about that, since we dropped the pointer in alacritty, then synchronized the state and we still got something for it, so libwayland-client failed to dispatch events to this object since it was longed dropped. (It's clear from the logs),\n---\nReported to kde: https://bugs.kde.org/show_bug.cgi?id=447917\n---\nThat's not quite how this all comes together. For a given client owned object (like pointer): 1) client creates a proxy 2) client deletes a proxy from it's side 3) server acks back (wl_display::delete_id) that the object has been deleted from the server side From the logs step 3 hasn't happened. You can have events in flight between steps 2 and 3. That's not a sign of kwin being in the wrong. It is a race, but an expected one that the client has to handle. libwayland will treat the proxy as being in destroyed and silently drop these incoming messages so you're right that you shouldn't have to deal with it at an application level. There's one rust library that doesn't wrap libwayland. Can you point me in the right direction to report there.\n---\n@davidedmundson well, we use that library, but we're using its libwayland backend, so libwayland is involved here. The version of it that we're [using](https://github.com/Smithay/wayland-rs/tree/7e87db2ae48d81a52039e727065266782c55f8ff)."}
{"project_id": "Alacritty", "bug_id": "275", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Can't bind to LBracket, RBracket under Wayland\n\nDescription:\nAlacritty doesn't seem to pick up `virtual_keycode` for `LBracket`, `RBracket` under Wayland. Attempting to bind to these keys has no effect. Running under xwayland the keys are picked up as expected. ### System OS: Linux Version: `alacritty 0.5.0-dev (1ddd3118)` from AUR `alacritty-git` Linux/BSD: Wayland, sway ### Logs\n\n"}
{"project_id": "Alacritty", "bug_id": "276", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: WindowEvent missing virtual keycode on Linux\n\nDescription:\nI have the following mapping in my config: The \"hi\" text is meant to represent something else, but just using that as an easy placeholder. tmux is not running. Just upgraded but the same thing happened in 0.4.1. On my Mac, when I hit Ctrl+Shift+-, it prints \"hi\" as expected. On my linux box (details below), nothing happens. A `print-events` log is attached. I basically just launched alacritty, hit Ctrl+Shift+- and then Alt+F4. It looks like the character that's received is `\\u{1f}` for some reason. Based on the log output, I then tried changing the config to use the word `Subtract` instead of `Minus` but still nothing happens. I feel like this is just something I'm doing wrong, not a bug or anything, but I have no idea what it is. Thank you! ### System OS: Linux - Ubuntu 19.10 Version: `alacritty --version` output `alacritty 0.4.2-rc1` Linux/BSD: X11/Wayland (default Gnome installation that comes with ubuntu) ### Logs Crashes: STDERR, STDOUT Font/Terminal size: `alacritty -vv` Keyboard and bindings: `alacritty --print-events` [output.txt](https://github.com/alacritty/alacritty/files/4333216/output.txt)\n\nDiscussion:\nCould you provide `alacritty --print-events` while you're reproducing this issue and not `strace` mixed output, thanks.\n---\nYes, of course. How do I do that? The command I'm running right now is `alacritty --print-events | tee output.txt`.\n---\nJust do `alacritty --print-events > out.txt` and post the txt file here, don't forget to repro your issue during it.\n---\n[out.txt](https://github.com/alacritty/alacritty/files/4333326/out.txt) Done.\n---\nSeems like `Shift + Minus` doesn't work, however `Control + Minus` works. The problem is that we don't get a virtual key code from https://github.com/rust-windowing/winit , so bindings is failing. This issue is true for both X11 and Wayland AFAICS. The `\\u{1f}` is a correct value btw, so the problem is virtual key code. I'd recommend to bind by scancode on Linux for now(12 in your case).\n---\nThis is likely related to rust-windowing/winit#1443 , but I'm not sure, since we have Wayland here. cc @chrisduerr .\n---\nJust to be sure, I tried again with an almost empty config. The only thing in the file is. and still had the same problem. Also, I don't know if this helps at all, but pressing Ctrl+Shift+- though I assume that's pretty normal.\n---\nAs I said, `Control + Shift + Minus` doesn't have virtual key code, so the only option is to bind by scancode, as I said before. I can repro this bug on my system with both backends.\n---\nYeah, this is identical to the X11 winit issue. The `DeviceEvent` contains a key but the `WindowEvent` does not.\n---\nOh sorry, sorry. Didn't see that. Thank you!!"}
{"project_id": "Alacritty", "bug_id": "277", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Using dead keys as shortcut keys\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 It seems like you cannot set keyboard shortcuts to dead keys. I'm using `setxkbmap -layout se,us` which means that the plus sign `+` on the american layout is a dead key in the Swedish layout. This in turn means that the key cannot be used as a shortcut key even if I'm currently using the US layout.\n\nDiscussion:\nThis is the events I get when I press the key:\n---\nAnd this is what it looks like when I decrease the font size:"}
{"project_id": "Alacritty", "bug_id": "278", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: MacOS keymap assumes QWERTY\n\nDescription:\nI use a normal keyboard with the System Settings >> Keyboard layout remapping to the Dvorak layout. Everything with respect to the keymap works great (as far as I can tell) except for Cmd-key combinations. Here's what I'm seeing with `--print-events` when I type Cmd-v (which should paste, but instead just types 'v'): Period on the QWERTY keyboard corresponds to \"v\" in Dvorak, so it seems as though for some reason, with the Cmd-key down, alacritty is getting the raw- not OS-remapped- key events? In the event in question, both `Some(Period)` and `Some(\"v\")` are in the event. An awkward but effective workaround is to use these keybindings:\n\nDiscussion:\nJust want to add that Alacritty uses `Control-Shift-C` and `Control-Shift-V` for copy and paste out-of-the-box, so you can always just use these keyboard shortcuts instead.\n---\nI can confirm that this is happening for me on OSX (10.13.1) using Colemak instead of Qwerty. I added a custom keybinding to create new windows, as follows: I thought that this simply wasn't working. Then I hit `cmd+k` (which is normally `cmd+n` on a qwerty keyboard), and it popped open a new window.\n---\nSee https://github.com/tomaka/winit/issues/343 regarding the handling of dead keys which may or may not relate to this issue. The TL;DR is that there's work that need to happen in winit to support this\n---\nI can confirm this issue on macOS 10.13.3 using bÃ©po instead of qwerty. Any updates?\n---\nI, too, am a DVORAK user on the Mac where the **Command**-key combinations are being interpreted as the QWERTY key. For completeness in the workaround listed above, I also added bindings for the font size keybindings as I use those frequently. Here is my complete list with the original version above the hack-y workaround.\n---\nI can also confirm this is still an issue. Nothing but querty is supported it seems.\n---\nFor anyone interested: I have added the following for macOS with german (qwertz) keyboard layout\n---\nThe following PR attempts to fix this upstream: https://github.com/tomaka/winit/pull/755. If anyone is willing to test that this resolves that problem, the help would be much appreciated.\n---\nWithout digging into winit more than that PR itself: I'm not sure. What I can say is with the current tomaka:master I see `Period` is registered as pressed twice, the second time with a `ReceivedCharacter('v')` (still): However with the current Toqozz:master I see the `Period` press once, then a `Press` and `Release` for `V`:\n---\n@guildencrantz Is that running the example in the winit repo? Also which key are you actually pressing, with which keyboard layout (so what would there be at the same position with qwerty)? Is there never any Release event for Period?"}
{"project_id": "Alacritty", "bug_id": "279", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: UK keyboard layout: '#' and '~' key not working on Linux with x11\n\nDescription:\nI've just quickly followed the dependencies for keyboard input. It looks like alacritty depends on [glutin](https://github.com/tomaka/glutin/) which for linux depends on [winit](https://github.com/tomaka/winit) and I found the following lines are commented out in the most recent version [src/api/x11/events.rs#L177](https://github.com/tomaka/winit/blob/master/src/api/x11/events.rs#L177) and [src/api/x11/events.rs#L270](https://github.com/tomaka/winit/blob/master/src/api/x11/events.rs#L270). This seems to be relevant to my issue but I am unsure why it has been commented out. If this is the reason then the layout of my keyboard is irrelevant and most likely other linux users would have the same problem. Having encountered the issue while using alacritty I'm submitting an issue here but should I also post an issue on winit? Or is there another reason for this issue?\n\nDiscussion:\nThis problem would need to be fixed upstream in `winit` as you've suggested. Alacritty is actually on an older for of `glutin` from before the split, and so there would still be some work here to get an upstream patch.\n---\nI'll see if I can fix it tomorrow. Any particular reason you are using an older version of `glutin`? Is it changing too often?\n---\nThere was a couple of features needed for this project that I was having trouble getting feedback on. Specifically, keyboard modifiers needed to be parsed out of the underlying windowing system event and passed with `glutin::Event::KeyboardInput`. I also needed the received `char`(s) to be passed with the event. The latter feature was necessary for either running a key binding or printing the character. For example, you wouldn't want `Command-C` to also print a `c` when trying to copy the selection.\n---\nIn any case, it's on my list to try and upstream the patches and get back on the main glutin tree.\n---\nI found a fix for this issue! Here are the diffs that I am applying on top of https://github.com/jwilm/glutin/commit/af7fe340bd4a2af53ea521defcb4f377cdc588cf which is the version of glutin alacritty currently depends on: This is obviously just a temporary solution waiting for proper patches upstream so I don't know if you'd want to make these changes in your version of glutin. This works for me so I just wanted to share! ðŸ˜ƒ It's possible other useful keys are not yet enabled but I haven't encountered them yet. Great work with alacritty! I see it's becoming very popular, definitely deserved!\n---\nShould be fixed by https://github.com/rust-windowing/winit/pull/1266.\n---\nCan we confirm this is fixed ? If so, the issue can be closed\n---\nif you can see the mentioned PR isn't yet landed."}
{"project_id": "Alacritty", "bug_id": "280", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Running vim with TERM=xterm triggers paste at startup\n\nDescription:\nWhen using TERM=`xterm` (also `xterm-256color` or `rxvt`), starting vim within Alacritty causes it to paste the contents of its default \"yank\" register at startup. This behavior was introduced in 0589b718 (DECRPM/DECRQM support) and it seems to be triggered by running `report_private_mode` for `NamedPrivateMode::BlinkingCursor`. If I add a `return` [here](https://github.com/alacritty/alacritty/blob/5adfc4fb00d1b523bd17bbd73515d30636de0a0e/alacritty_terminal/src/term/mod.rs#L1888) to disable that single mode, the problem is no longer visible. I don't think the \"paste\" effect is related to Alacritty - it seems to be caused by the escape code sending a `p` character and triggering Vim's native paste function. The problem does not happen when using TERM=`alacritty`. I can also work around it by adding `set t_RV=` to my `.vimrc`. ### System OS: Linux, Fedora 39, Wayland + sway Version: alacritty 0.13.0-dev (5adfc4fb) vim: `vim-enhanced-9.0.2120-1.fc39.x86_64`, version `VIM - Vi IMproved 9.0 (2022 Jun 28, compiled Nov 22 2023 00:00:00) Included patches: 1-2120`, no `.vimrc` or Vim scripts installed ### Logs `alacritty --print-events -vvv` [0.000011001s] [INFO ] [alacritty] Welcome to Alacritty [0.000073520s] [INFO ] [alacritty] Version 0.13.0-dev (5adfc4fb) [0.000083699s] [INFO ] [alacritty] Running on Wayland [0.001041483s] [INFO ] [alacritty] Configuration files loaded from: \"/home/mark/.config/alacritty/alacritty.toml\" [0.001344690s] [INFO ] [alacritty] winit event: NewEvents(Init) [0.001359709s] [INFO ] [alacritty] winit event: Resumed [0.013034949s] [INFO ] [alacritty] Using EGL 1.5 [0.013077610s] [DEBUG] [alacritty] Picked GL Config: buffer_type: Some(Rgb { r_size: 8, g_size: 8, b_size: 8 }) alpha_size: 8 num_samples: 0 hardware_accelerated: true supports_transparency: Some(true) config_api: Api(OPENGL | GLES1 | GLES2 | GLES3) srgb_capable: true [0.019888308s] [INFO ] [alacritty] Window scale factor: 1 [0.023789666s] [DEBUG] [alacritty] Loading \"Monaspace Krypton\" font [0.034054872s] [TRACE] [crossfont] Number of fonts is 78 [0.034085650s] [TRACE] [crossfont] Got font path=\"/home/mark/.local/share/fonts/MonaspaceKrypton-Medium.otf\", index=0 [0.034160012s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Medium, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 } [0.036077884s] [TRACE] [crossfont] Number of fonts is 77 [0.036102200s] [TRACE] [crossfont] Got font path=\"/home/mark/.local/share/fonts/MonaspaceKrypton-ExtraBold.otf\", index=0 [0.036152295s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: ExtraBold, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 } [0.037999493s] [TRACE] [crossfont] Number of fonts is 81 [0.038025111s] [TRACE] [crossfont] Got font path=\"/home/mark/.local/share/fonts/MonaspaceKrypton-Italic.otf\", index=0 [0.038077351s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Italic, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 } [0.039953613s] [TRACE] [crossfont] Number of fonts is 81 [0.039976106s] [TRACE] [crossfont] Got font path=\"/home/mark/.local/share/fonts/MonaspaceKrypton-BoldItalic.otf\", index=0 [0.040027975s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold Italic, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 } [0.063213712s] [INFO ] [alacritty] Running on NVIDIA T1000 8GB/PCIe/SSE2 [0.063229843s] [INFO ] [alacritty] OpenGL version 3.3.0 NVIDIA 535.129.03, shader_version 3.30 NVIDIA via Cg compiler [0.063241515s] [INFO ] [alacritty] Using OpenGL 3.3 renderer [0.065284304s] [DEBUG] [alacritty] Enabled debug logging for OpenGL [0.065300475s] [DEBUG] [alacritty] Filling glyph cache with common glyphs [0.067956833s] [INFO ] [alacritty] Cell size: 9 x 17 [0.067971120s] [INFO ] [alacritty] Padding: 2 x 4 [0.067978554s] [INFO ] [alacritty] Width: 800, Height: 600 [0.068103582s] [TRACE] [alacritty] Deriving dim colors from normal colors [0.068131455s] [INFO ] [alacritty] PTY dimensions: 34 x 88 [0.070240641s] [INFO ] [alacritty] Initialisation complete [0.070269326s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: Resized(PhysicalSize { width: 800, height: 600 }) } [0.070290236s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.071294658s] [DEBUG] [alacritty] [gl_render] Buffer detailed info: Buffer object 2 (bound to GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (0), GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (1), GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (2), GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (3), GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (4), and GL_ARRAY_BUFFER_ARB, usage hint is GL_STREAM_DRAW) will use VIDEO memory as the source for buffer object operations. [0.074929539s] [INFO ] [alacritty] winit event: AboutToWait [0.074987159s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 658480640 }, requested_resume: None }) [0.075007408s] [INFO ] [alacritty] winit event: AboutToWait [0.089908550s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 658548769 }, requested_resume: None }) [0.089935952s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: Resized(PhysicalSize { width: 956, height: 582 }) } [0.089955479s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: Focused(true) } [0.089969696s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: ModifiersChanged(Modifiers { state: ModifiersState(0x0), pressed_mods: ModifiersKeys(0x0) }) } [0.089989735s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.090020964s] [DEBUG] [alacritty_terminal] New num_cols is 105 and num_lines is 33 [0.091533404s] [INFO ] [alacritty] Padding: 2 x 4 [0.091549304s] [INFO ] [alacritty] Width: 956, Height: 582 [0.093220556s] [INFO ] [alacritty] winit event: AboutToWait [0.097553677s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 676769933 }, requested_resume: None }) [0.097571220s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: CursorEntered { device_id: DeviceId(Wayland(DeviceId)) } } [0.097580698s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: CursorMoved { device_id: DeviceId(Wayland(DeviceId)), position: PhysicalPosition { x: 504.8828125, y: 388.15234375 } } } [0.097593072s] [INFO ] [alacritty] winit event: AboutToWait [0.119807439s] [TRACE] [alacritty_terminal] Setting title to 'Some(\"mark@c3p-214:~/src/alacritty\")' [0.119884937s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 683368107 }, requested_resume: None }) [0.119905245s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Title(mark@c3p-214:~/src/alacritty)) }) [0.119919132s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [0.119937667s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.119947245s] [TRACE] [alacritty_terminal] Setting private mode: BracketedPaste [0.119962705s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Green)) [0.119977753s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.119986540s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Green)) [0.119996689s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.120004885s] [TRACE] [alacritty_terminal] Setting attribute: Reset [0.121483681s] [INFO ] [alacritty] winit event: AboutToWait [0.121526843s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 705032877 }, requested_resume: None }) [0.121538054s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [0.121551570s] [INFO ] [alacritty] winit event: AboutToWait [0.121572189s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 705092020 }, requested_resume: None }) [0.121583401s] [INFO ] [alacritty] winit event: AboutToWait [0.133095039s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 708507774 }, requested_resume: None }) [0.133119416s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.134407308s] [INFO ] [alacritty] winit event: AboutToWait [0.667850590s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356164, tv_nsec: 732963178 }, requested_resume: None }) [0.667878874s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyV), logical_key: Character(\"v\"), text: Some(\"v\"), location: Standard, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"v\"), text_with_all_modifiers: Some(\"v\") } }, is_synthetic: false } } [0.667902198s] [INFO ] [alacritty] winit event: AboutToWait [0.668111858s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 251509065 }, requested_resume: None }) [0.668128269s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [0.668145011s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.669547020s] [INFO ] [alacritty] winit event: AboutToWait [0.669586546s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 253095626 }, requested_resume: None }) [0.669601534s] [INFO ] [alacritty] winit event: AboutToWait [0.719575737s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 266974131 }, requested_resume: None }) [0.719599312s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyV), logical_key: Character(\"v\"), text: Some(\"v\"), location: Standard, state: Released, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"v\"), text_with_all_modifiers: Some(\"v\") } }, is_synthetic: false } } [0.719624270s] [INFO ] [alacritty] winit event: AboutToWait [0.777839094s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 303169319 }, requested_resume: None }) [0.777862889s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyI), logical_key: Character(\"i\"), text: Some(\"i\"), location: Standard, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"i\"), text_with_all_modifiers: Some(\"i\") } }, is_synthetic: false } } [0.777891033s] [INFO ] [alacritty] winit event: AboutToWait [0.778105992s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 361483401 }, requested_resume: None }) [0.778128324s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [0.778147200s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.779284616s] [INFO ] [alacritty] winit event: AboutToWait [0.779323851s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 362832941 }, requested_resume: None }) [0.779339090s] [INFO ] [alacritty] winit event: AboutToWait [0.851089095s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 366831475 }, requested_resume: None }) [0.851112630s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyI), logical_key: Character(\"i\"), text: Some(\"i\"), location: Standard, state: Released, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"i\"), text_with_all_modifiers: Some(\"i\") } }, is_synthetic: false } } [0.851137257s] [INFO ] [alacritty] winit event: AboutToWait [0.911604209s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 434682516 }, requested_resume: None }) [0.911631301s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyM), logical_key: Character(\"m\"), text: Some(\"m\"), location: Standard, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"m\"), text_with_all_modifiers: Some(\"m\") } }, is_synthetic: false } } [0.911659635s] [INFO ] [alacritty] winit event: AboutToWait [0.911873121s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 495252244 }, requested_resume: None }) [0.911895574s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [0.911916324s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [0.913094006s] [INFO ] [alacritty] winit event: AboutToWait [0.913132970s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 496642341 }, requested_resume: None }) [0.913148029s] [INFO ] [alacritty] winit event: AboutToWait [0.985811003s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 501385432 }, requested_resume: None }) [0.985839577s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyM), logical_key: Character(\"m\"), text: Some(\"m\"), location: Standard, state: Released, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"m\"), text_with_all_modifiers: Some(\"m\") } }, is_synthetic: false } } [0.985860337s] [INFO ] [alacritty] winit event: AboutToWait [1.636821418s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356165, tv_nsec: 745155452 }, requested_resume: None }) [1.636849050s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(Enter), logical_key: Named(Enter), text: Some(\"\\r\"), location: Standard, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Named(Enter), text_with_all_modifiers: Some(\"\\r\") } }, is_synthetic: false } } [1.636877184s] [INFO ] [alacritty] winit event: AboutToWait [1.637001010s] [TRACE] [alacritty_terminal] Carriage return [1.637021178s] [TRACE] [alacritty_terminal] Linefeed [1.637033692s] [TRACE] [alacritty_terminal] Unsetting private mode: BracketedPaste [1.637045304s] [TRACE] [alacritty_terminal] Carriage return [1.637101942s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 220444585 }, requested_resume: None }) [1.637124334s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [1.637145114s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [1.638239037s] [INFO ] [alacritty] winit event: AboutToWait [1.638277630s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 221787031 }, requested_resume: None }) [1.638293170s] [INFO ] [alacritty] winit event: AboutToWait [1.647383729s] [TRACE] [alacritty_terminal] Setting private mode: SwapScreenAndSetRestoreCursor [1.647415379s] [TRACE] [alacritty_terminal] Pushing 'Some(\"mark@c3p-214:~/src/alacritty\")' onto title stack [1.647430227s] [TRACE] [alacritty_terminal] Setting private mode: CursorKeys [1.647440156s] [TRACE] [alacritty_terminal] Setting keypad application mode [1.647449524s] [TRACE] [alacritty_terminal] Setting private mode: BracketedPaste [1.647458301s] [TRACE] [alacritty_terminal] Setting private mode: ReportFocusInOut [1.647474412s] [TRACE] [alacritty_terminal] Setting scrolling region: (0;33) [1.647487026s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.647497415s] [TRACE] [alacritty_terminal] Setting private mode: BlinkingCursor [1.647510671s] [TRACE] [alacritty_terminal] Unsetting private mode: BlinkingCursor [1.647520940s] [TRACE] [alacritty_terminal] Pushing 'Some(\"mark@c3p-214:~/src/alacritty\")' onto title stack [1.647530528s] [TRACE] [alacritty_terminal] Pushing 'Some(\"mark@c3p-214:~/src/alacritty\")' onto title stack [1.647542742s] [TRACE] [alacritty_terminal] Setting attribute: CancelReverse [1.647539736s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 221976021 }, requested_resume: None }) [1.647553202s] [TRACE] [alacritty_terminal] Setting attribute: CancelItalic [1.647567850s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(CursorBlinkingChange) }) [1.647573290s] [TRACE] [alacritty_terminal] Setting attribute: CancelStrike [1.647585152s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(CursorBlinkingChange) }) [1.647590663s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.647600101s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.647600612s] [INFO ] [alacritty] winit event: AboutToWait [1.647614228s] [TRACE] [alacritty_terminal] Clearing screen: All [1.647634657s] [TRACE] [alacritty_terminal] Going to: line=1, col=0 [1.647646920s] [TRACE] [alacritty_terminal] Reporting device status: 6 [1.647662019s] [TRACE] [alacritty_terminal] Going to: line=1, col=0 [1.647671347s] [TRACE] [alacritty_terminal] Going to: line=2, col=0 [1.647684782s] [TRACE] [alacritty_terminal] Reporting device status: 6 [1.647694681s] [TRACE] [alacritty_terminal] Going to: line=2, col=0 [1.647706604s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.647715230s] [TRACE] [alacritty_terminal] Reporting secondary device attributes [1.647738154s] [TRACE] [alacritty_terminal] Requested write of escape sequence for color code 10: color[256] [1.647750227s] [TRACE] [alacritty_terminal] Requested write of escape sequence for color code 11: color[257] [1.647770355s] [TRACE] [alacritty_terminal] Unsetting private mode: ShowCursor [1.647779452s] [TRACE] [alacritty_terminal] Going to: line=1, col=0 [1.647788910s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(BrightBlue)) [1.647820200s] [TRACE] [alacritty_terminal] Going to: line=2, col=0 [1.647850147s] [TRACE] [alacritty_terminal] Going to: line=3, col=0 [1.647879733s] [TRACE] [alacritty_terminal] Going to: line=4, col=0 [1.647909069s] [TRACE] [alacritty_terminal] Going to: line=5, col=0 [1.647938585s] [TRACE] [alacritty_terminal] Going to: line=6, col=0 [1.647967831s] [TRACE] [alacritty_terminal] Going to: line=7, col=0 [1.647997067s] [TRACE] [alacritty_terminal] Going to: line=8, col=0 [1.648026423s] [TRACE] [alacritty_terminal] Going to: line=9, col=0 [1.648055718s] [TRACE] [alacritty_terminal] Going to: line=10, col=0 [1.648085195s] [TRACE] [alacritty_terminal] Going to: line=11, col=0 [1.648114721s] [TRACE] [alacritty_terminal] Going to: line=12, col=0 [1.648144127s] [TRACE] [alacritty_terminal] Going to: line=13, col=0 [1.648173493s] [TRACE] [alacritty_terminal] Going to: line=14, col=0 [1.648198791s] [TRACE] [alacritty_terminal] Going to: line=15, col=0 [1.648221484s] [TRACE] [alacritty_terminal] Going to: line=16, col=0 [1.648243817s] [TRACE] [alacritty_terminal] Going to: line=17, col=0 [1.648266069s] [TRACE] [alacritty_terminal] Going to: line=18, col=0 [1.648288422s] [TRACE] [alacritty_terminal] Going to: line=19, col=0 [1.648310844s] [TRACE] [alacritty_terminal] Going to: line=20, col=0 [1.648333187s] [TRACE] [alacritty_terminal] Going to: line=21, col=0 [1.648355609s] [TRACE] [alacritty_terminal] Going to: line=22, col=0 [1.648378022s] [TRACE] [alacritty_terminal] Going to: line=23, col=0 [1.648400415s] [TRACE] [alacritty_terminal] Going to: line=24, col=0 [1.648422777s] [TRACE] [alacritty_terminal] Going to: line=25, col=0 [1.648447074s] [TRACE] [alacritty_terminal] Going to: line=26, col=0 [1.648475117s] [TRACE] [alacritty_terminal] Going to: line=27, col=0 [1.648498241s] [TRACE] [alacritty_terminal] Going to: line=28, col=0 [1.648520624s] [TRACE] [alacritty_terminal] Going to: line=29, col=0 [1.648543126s] [TRACE] [alacritty_terminal] Going to: line=30, col=0 [1.648565539s] [TRACE] [alacritty_terminal] Going to: line=31, col=0 [1.648587872s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648594584s] [TRACE] [alacritty_terminal] Going to: line=32, col=87 [1.648602129s] [TRACE] [alacritty_terminal] Moving forward: 9 [1.648609062s] [TRACE] [alacritty_terminal] Going to: line=10, col=44 [1.648618229s] [TRACE] [alacritty_terminal] Going to: line=12, col=44 [1.648627207s] [TRACE] [alacritty_terminal] Going to: line=13, col=40 [1.648637276s] [TRACE] [alacritty_terminal] Going to: line=14, col=36 [1.648645602s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Blue)) [1.648658426s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648665449s] [TRACE] [alacritty_terminal] Going to: line=15, col=31 [1.648678604s] [TRACE] [alacritty_terminal] Going to: line=17, col=38 [1.648689525s] [TRACE] [alacritty_terminal] Going to: line=18, col=29 [1.648699214s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Blue)) [1.648707199s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648716657s] [TRACE] [alacritty_terminal] Going to: line=20, col=29 [1.648724502s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Blue)) [1.648732517s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648744079s] [TRACE] [alacritty_terminal] Going to: line=21, col=29 [1.648752295s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Blue)) [1.648760009s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648767243s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Blue)) [1.648774597s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648783835s] [TRACE] [alacritty_terminal] Going to: line=22, col=29 [1.648793603s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(Blue)) [1.648801348s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.648810676s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.648817419s] [TRACE] [alacritty_terminal] Setting private mode: ShowCursor [1.648876070s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 232377336 }, requested_resume: None }) [1.648892522s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(PtyWrite()) }) [1.648903703s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(PtyWrite()) }) [1.648913101s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(PtyWrite()) }) [1.648922449s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(ColorRequest(256)) }) [1.648932678s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(ColorRequest(257)) }) [1.648943599s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [1.648957125s] [INFO ] [alacritty] winit event: AboutToWait ^[[>0;2000;1c[1.649079608s] [TRACE] [alacritty_terminal] Reporting private mode Named(BlinkingCursor) [1.649100107s] [TRACE] [alacritty_terminal] Unsetting private mode: ShowCursor [1.649109004s] [TRACE] [alacritty_terminal] Going to: line=32, col=77 [1.649118171s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649117059s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 232510239 }, requested_resume: None }) [1.649126647s] [TRACE] [alacritty_terminal] Going to: line=32, col=78 [1.649134442s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(PtyWrite()) }) [1.649137839s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649147227s] [TRACE] [alacritty_terminal] Going to: line=32, col=79 [1.649149120s] [INFO ] [alacritty] winit event: AboutToWait [1.649154290s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649161023s] [TRACE] [alacritty_terminal] Going to: line=32, col=80 [1.649167746s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649176152s] [TRACE] [alacritty_terminal] Going to: line=32, col=81 [1.649182905s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649189728s] [TRACE] [alacritty_terminal] Going to: line=32, col=82 [1.649196370s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649202822s] [TRACE] [alacritty_terminal] Going to: line=32, col=83 [1.649209435s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649215807s] [TRACE] [alacritty_terminal] Going to: line=32, col=84 [1.649221999s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649228181s] [TRACE] [alacritty_terminal] Going to: line=32, col=85 [1.649234533s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649240715s] [TRACE] [alacritty_terminal] Going to: line=32, col=86 [1.649246866s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 ^[[?12;2$p[1.649290379s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 232802445 }, requested_resume: None }) [1.649305077s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [1.649318362s] [INFO ] [alacritty] winit event: AboutToWait [1.649408755s] [TRACE] [alacritty_terminal] Going to: line=32, col=77 [1.649420597s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649427811s] [TRACE] [alacritty_terminal] Setting attribute: CancelReverse [1.649435596s] [TRACE] [alacritty_terminal] Setting attribute: CancelItalic [1.649442278s] [TRACE] [alacritty_terminal] Setting attribute: CancelStrike [1.649449121s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.649455534s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.649461926s] [TRACE] [alacritty_terminal] Clearing screen: All [1.649535786s] [TRACE] [alacritty_terminal] Going to: line=1, col=0 [1.649543441s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(BrightBlue)) [1.649565072s] [TRACE] [alacritty_terminal] Going to: line=2, col=0 [1.649585972s] [TRACE] [alacritty_terminal] Going to: line=3, col=0 [1.649606591s] [TRACE] [alacritty_terminal] Going to: line=4, col=0 [1.649627160s] [TRACE] [alacritty_terminal] Going to: line=5, col=0 [1.649647700s] [TRACE] [alacritty_terminal] Going to: line=6, col=0 [1.649668289s] [TRACE] [alacritty_terminal] Going to: line=7, col=0 [1.649688938s] [TRACE] [alacritty_terminal] Going to: line=8, col=0 [1.649709617s] [TRACE] [alacritty_terminal] Going to: line=9, col=0 [1.649730277s] [TRACE] [alacritty_terminal] Going to: line=10, col=0 [1.649751126s] [TRACE] [alacritty_terminal] Going to: line=11, col=0 [1.649771846s] [TRACE] [alacritty_terminal] Going to: line=12, col=0 [1.649794309s] [TRACE] [alacritty_terminal] Going to: line=13, col=0 [1.649815128s] [TRACE] [alacritty_terminal] Going to: line=14, col=0 [1.649836048s] [TRACE] [alacritty_terminal] Going to: line=15, col=0 [1.649856838s] [TRACE] [alacritty_terminal] Going to: line=16, col=0 [1.649878439s] [TRACE] [alacritty_terminal] Going to: line=17, col=0 [1.649899499s] [TRACE] [alacritty_terminal] Going to: line=18, col=0 [1.649924987s] [TRACE] [alacritty_terminal] Going to: line=19, col=0 [1.649945707s] [TRACE] [alacritty_terminal] Going to: line=20, col=0 [1.649966416s] [TRACE] [alacritty_terminal] Going to: line=21, col=0 [1.649987086s] [TRACE] [alacritty_terminal] Going to: line=22, col=0 [1.650007625s] [TRACE] [alacritty_terminal] Going to: line=23, col=0 [1.650028184s] [TRACE] [alacritty_terminal] Going to: line=24, col=0 [1.650051258s] [TRACE] [alacritty_terminal] Going to: line=25, col=0 [1.650072128s] [TRACE] [alacritty_terminal] Going to: line=26, col=0 [1.650092707s] [TRACE] [alacritty_terminal] Going to: line=27, col=0 [1.650113276s] [TRACE] [alacritty_terminal] Going to: line=28, col=0 [1.650133915s] [TRACE] [alacritty_terminal] Going to: line=29, col=0 [1.650154515s] [TRACE] [alacritty_terminal] Going to: line=30, col=0 [1.650175064s] [TRACE] [alacritty_terminal] Going to: line=31, col=0 [1.650195843s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650202255s] [TRACE] [alacritty_terminal] Going to: line=32, col=87 [1.650209319s] [TRACE] [alacritty_terminal] Moving forward: 9 [1.650216282s] [TRACE] [alacritty_terminal] Going to: line=10, col=44 [1.650225430s] [TRACE] [alacritty_terminal] Going to: line=12, col=44 [1.650233104s] [TRACE] [alacritty_terminal] Going to: line=13, col=40 [1.650241470s] [TRACE] [alacritty_terminal] Going to: line=14, col=36 [1.650249676s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Indexed(81)) [1.650258382s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650264424s] [TRACE] [alacritty_terminal] Going to: line=15, col=31 [1.650274503s] [TRACE] [alacritty_terminal] Going to: line=17, col=38 [1.650283230s] [TRACE] [alacritty_terminal] Going to: line=18, col=29 [1.650291335s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Indexed(81)) [1.650298368s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650306113s] [TRACE] [alacritty_terminal] Going to: line=20, col=29 [1.650313327s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Indexed(81)) [1.650320310s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650329237s] [TRACE] [alacritty_terminal] Going to: line=21, col=29 [1.650336521s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Indexed(81)) [1.650343514s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650350578s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Indexed(81)) [1.650357170s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650364945s] [TRACE] [alacritty_terminal] Going to: line=22, col=29 [1.650373101s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Indexed(81)) [1.650379783s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650387618s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.650394031s] [TRACE] [alacritty_terminal] Setting private mode: ShowCursor [1.650400152s] [TRACE] [alacritty_terminal] Bell [1.650409029s] [TRACE] [alacritty_terminal] Unsetting private mode: ShowCursor [1.650415441s] [TRACE] [alacritty_terminal] Going to: line=32, col=77 [1.650422004s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.650425360s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 232859945 }, requested_resume: None }) [1.650428196s] [TRACE] [alacritty_terminal] Going to: line=32, col=77 [1.650439317s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Bell) }) [1.650443996s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.650449977s] [TRACE] [alacritty_terminal] Going to: line=10, col=44 [1.650451620s] [INFO ] [alacritty] winit event: AboutToWait [1.650456650s] [TRACE] [alacritty_terminal] Setting attribute: Foreground(Named(BrightBlue)) [1.650465216s] [TRACE] [alacritty_terminal] Going to: line=12, col=44 [1.650477570s] [TRACE] [alacritty_terminal] Going to: line=13, col=40 [1.650486136s] [TRACE] [alacritty_terminal] Going to: line=14, col=36 [1.650495333s] [TRACE] [alacritty_terminal] Going to: line=15, col=31 [1.650505343s] [TRACE] [alacritty_terminal] Going to: line=17, col=38 [1.650513979s] [TRACE] [alacritty_terminal] Going to: line=18, col=29 [1.650524148s] [TRACE] [alacritty_terminal] Going to: line=20, col=29 [1.650534248s] [TRACE] [alacritty_terminal] Going to: line=21, col=29 [1.650544377s] [TRACE] [alacritty_terminal] Going to: line=22, col=29 [1.650554556s] [TRACE] [alacritty_terminal] Setting attribute: Reset [1.650562451s] [TRACE] [alacritty_terminal] Going to: line=32, col=87 [1.650568994s] [TRACE] [alacritty_terminal] Going to: line=0, col=0 [1.650575165s] [TRACE] [alacritty_terminal] Setting private mode: ShowCursor [1.650613969s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 234127117 }, requested_resume: None }) [1.650628096s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Wakeup) }) [1.650640460s] [INFO ] [alacritty] winit event: AboutToWait [1.650738456s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 234181601 }, requested_resume: None }) [1.650756350s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [1.652064591s] [INFO ] [alacritty] winit event: AboutToWait [1.652102814s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 235612255 }, requested_resume: None }) [1.652117532s] [INFO ] [alacritty] winit event: AboutToWait [1.667361137s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 235743906 }, requested_resume: None }) [1.667384812s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: RedrawRequested } [1.668563306s] [INFO ] [alacritty] winit event: AboutToWait [1.715821418s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 267607376 }, requested_resume: None }) [1.715843740s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(Enter), logical_key: Named(Enter), text: Some(\"\\r\"), location: Standard, state: Released, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Named(Enter), text_with_all_modifiers: Some(\"\\r\") } }, is_synthetic: false } } [1.715869910s] [INFO ] [alacritty] winit event: AboutToWait [3.642906975s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356166, tv_nsec: 470382269 }, requested_resume: None }) [3.642931802s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(ShiftLeft), logical_key: Named(Shift), text: None, location: Left, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Named(Shift), text_with_all_modifiers: None } }, is_synthetic: false } } [3.642955918s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: ModifiersChanged(Modifiers { state: ModifiersState(SHIFT), pressed_mods: ModifiersKeys(0x0) }) } [3.642972700s] [INFO ] [alacritty] winit event: AboutToWait [3.644680522s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356168, tv_nsec: 226536925 }, requested_resume: None }) [3.644701141s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(SuperLeft), logical_key: Named(Super), text: None, location: Left, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Named(Super), text_with_all_modifiers: None } }, is_synthetic: false } } [3.644712162s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: ModifiersChanged(Modifiers { state: ModifiersState(SHIFT | SUPER), pressed_mods: ModifiersKeys(0x0) }) } [3.644724736s] [INFO ] [alacritty] winit event: AboutToWait [3.877900624s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356168, tv_nsec: 228284613 }, requested_resume: None }) [3.877936192s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94409532888736)), event: CloseRequested } [3.877957192s] [INFO ] [alacritty] winit event: AboutToWait [3.877997288s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 356168, tv_nsec: 461506870 }, requested_resume: None }) [3.878010774s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(94409532888736))), payload: Terminal(Exit) }) [3.879979292s] [INFO ] [alacritty] winit event: AboutToWait [3.879996034s] [INFO ] [alacritty] winit event: LoopExiting [3.887926825s] [INFO ] [alacritty] Goodbye\n\nDiscussion:\n>starting vim within Alacritty causes it to paste the contents of its default \"yank\" register at startup. We don't have such a concept. >This behavior was introduced in https://github.com/alacritty/alacritty/commit/0589b7189445e5ee236a7ab17b4f3a2047543481 (DECRPM/DECRQM support) and it seems to be triggered by running report_private_mode for NamedPrivateMode::BlinkingCursor. If I add a return [here](https://github.com/alacritty/alacritty/blob/5adfc4fb00d1b523bd17bbd73515d30636de0a0e/alacritty_terminal/src/term/mod.rs#L1888) to disable that single mode, the problem is no longer visible. And how it's our issue? vim asked us to paste status whether the mode is active or not, we pasted status? Like it clearly got what it asked for and bugged during handling. >The problem does not happen when using TERM=alacritty. I can also work around it by adding set t_RV= to my .vimrc. The only supported term is `alacritty`.\n---\nAh, I just can't read.\n---\nSee https://github.com/alacritty/alacritty/pull/7398\n---\n#7398 fixes the problem for me. Thanks very much for your help, and thanks for all your work on Alacritty!"}
{"project_id": "Alacritty", "bug_id": "281", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Messages are not updated on sway if the dialog has the same size as the previous one\n\nDescription:\n### System OS: ArchLinux Version: 0.12.2, but also happens in the current master branch, and at least since 0.10.0 DE: Sway ### Steps to reproduce 1. Edit the alacritty config, such that two messages with same length are emitted on startup: On the current master branch this can be done, by adding attributes x and y to window section top generate 2 warnings. On version 0.12.2, the window padding x and y value can be set to `a` to generate 2 errors. 2. Click on the cross to close the first message. ### Expected result The second message is now shown. Clicking again on the cross, closes the dialog. ### Actual result The first message is still shown. Clicking again on the cross, closes the dialog, so the first click was processed. ### First analysis If messages result in dialog boxes of different size, the size and the text is updated. Only if the dialog box size is unchanged, the text isn't changed either. I couldn't reproduce the error on GNOME/Wayland or KDE/X11. If more the 2 messages with same dialog size are shown, the text of the first messages stays until the dialog gets closed the correct number of times. Some other actions trigger a text update (f.e. focusing another window, pressing enter) while others don't (f.e. pressing a non-enter key). If the first message is a warning and the second message an error, the color isn't updated either. ### Debugging results Clicks correctly result in a call to `Display::draw`, which sees the new message. However, there seems to be no damage rect for the dialog box, which might be the reason, why the box text and color isn't updated. If `Display::swap_buffers` uses `surface.swap_buffers` instead of `surface.swap_buffers_with_damage`, the error does not occur. However, I am a bit confused, whether this is really the underlying cause, because there isn't a damage rect on GNOME or KDE either, and the error doesn't occur there.\n\nDiscussion:\nCould you test with the `alacritty -o debug.highlight_damage=true`? It should draw the purple rectangles over the things being damaged.\n---\nIt doesn't draw a purple rect over the dialog box, except for the last message, when the dialog box is closed, then the purple rect extend over the message box, that is no longer shown.\n---\nBut they wouldn't be visible anyway, because `Display::draw` calls `self.highlight_damage` before drawing the message box.\n---\nAh, but it works correctly, right? Since it should disable all the damage tracking if you use it.\n---\nIf this debug option makes a difference than it's a damage tracking bug, otherwise some redraw/dirty logic.\n---\nIt does work correctly, yes.\n---\nAdding after https://github.com/alacritty/alacritty/blob/e35e5ad14fce8456afdd89f2b392b9924bb27471/alacritty/src/display/mod.rs#L942-L943 fixes the issue.\n---\nYeah, it's a damage tracking issue then. Thx for testing."}
{"project_id": "Alacritty", "bug_id": "282", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Key bindings broken after migration\n\nDescription:\nBefore the migration I was using key_bindings to remap `shift+enter` to `ctrl+J` I had this in my yml: After migration, I have ended up with: Which obviously would not work. If I change it to: I get this error: ![image](https://github.com/alacritty/alacritty/assets/20520590/4d8e3bd4-7351-4731-ab6d-3a880e163f19) How to properly migrate my binding? ### System OS: Linux arch 6.6.8-arch1-1 Version: alacritty 0.13.0 (78fa4d6f) Linux/BSD: X11, dwm ### Logs Font/Terminal size: `alacritty -vv` output Keyboard and bindings: `alacritty --print-events` output\n\nDiscussion:\nTry `\\u000a`.\n---\n> \\u000a That did not work like ctrl-J\n---\n> Which obviously would not work. Did you actually try it? The migrated config is correct.\n---\nThat's a bug due to us routing the `Esc` bindings via the `paste` function and we force replace `\\r` to `\\n` in it, thus the config is correct, but we not allow it anymore.\n---\n> > Which obviously would not work. > > Did you actually try it? The migrated config is correct. I have tried all mentioned variants. Unchanged toml did not work\n---\n> That's a bug due to us routing the `Esc` bindings via the `paste` function and we force replace `\\r` to `\\n` in it, thus the config is correct, but we not allow it anymore. Was that intended? Will you fix it? Can I set some flag in yml config so it keeps using it without warnings?\n---\n> Can I set some flag in yml config so it keeps using it without warnings? Ignore that. Even if I ignore warning, v13 does not work with yml\n---\nIt was not intended.\n---\nOk feel free to close it if you do not want to fix. I have moved on to `\\u000b`(ctrl+K) which is ok for me (workaround to use shift+enter for the apps that do not support that like fzf)\n---\nSee https://github.com/alacritty/alacritty/pull/7478"}
{"project_id": "Alacritty", "bug_id": "283", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Powerline font cut off on 0.13\n\nDescription:\nAfter updating to 0.13, powerline icons have started rendering incorrectly. On 0.12 it used to render as expected, but now it's cutting off the \"points\" of the powerline triangles. Here's a screenshot of what it looks like: ![new](https://pyazo.com/32da3ce6-8d78-469d-b2ff-d81b09ba7390.png) And here's what it used to look like before (downgraded to 0.12 for the screenshot): ![old](https://pyazo.com/633569b7-0e7a-49f5-9eb0-8e8235c09353.png) I use the IosevkaTerm font with NerdFont patches (https://www.nerdfonts.com/font-downloads) Here's my config, after migrating to toml: gruvbox.toml just defines some colors and I get the same behaviour with and without that file included. ### System OS: Linux Version: alacritty 0.13.0 (78fa4d6f) Linux: X11, i3, no compositor ### Logs Crashes: N/A Font/Terminal size: `alacritty -vv` Keyboard and bindings: `alacritty --print-events`\n\nDiscussion:\nYeah, narrow fonts will probably break like that because they can't create a `45` angle which was intended for powerline glyphs.\n---\nYou can disable builtin box drawing or use `Extended` variant of iosevka for now.\n---\n@kchibisov What do you plan to change about this?\n---\n@chrisduerr we can try to draw with different angle when the cut is too much or we may opt-out of drawing powerline when the cut will be too big with the way we try to. If you have suggestion let me know.\n---\nThe built-in powerline seems broken, since it is offset from the top. So it's also not able to draw things correctly. Considering that, I'm not sure what we're doing is much worse.\n---\n>The built-in powerline seems broken, since it is offset from the top. I don't quite get what you mean here, like that it draws from outside the cell by 1px? From what I can see in the font it's not like that, the angle is just different and that's about it (I've used that font and it's just different angle). We can also try to draw with different angle when we detect big cut.\n---\n> I don't quite get what you mean here, like that it draws from outside the cell by 1px? It's one pixel farther from the top than from the bottom.\n---\nyeah, but it doesn't really matter as long as it's not massively cut? Like there's no definition that the angle should be exactly 45, like it still meets at the center of the cell (at least you can patch the font to start correctly within cell boundarios and it'll have the same 60 angle).\n---\nIt appears that this is not entirely fixed: https://github.com/alacritty/alacritty/assets/1794388/f9a243ce-cf07-4584-a8cd-229d7b4a12fc This is Iosevka Term. Note how for some of the first small sizes (starting from 10.5) it still uses the built-in drawing, even though one pixel or so is cut off."}
{"project_id": "Alacritty", "bug_id": "284", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Font is blurry after config migration to toml\n\nDescription:\nAfter migration to toml using `alacritty migrate`, the fonts on my terminal look terrible. They were fine before upgrading to the latest version and being forced to migrate. Here's how it looks: ![image](https://github.com/alacritty/alacritty/assets/35728385/b6387987-1263-4c4c-b83c-338ee7ad3c68) Also, trying to select text causes the wrong text to be selected. Again, it worked perfectly in the previous version. Here's my current config file: ### System OS: Linux Version: alacritty 0.13.0 (78fa4d6f) Linux/BSD: Wayland, KDE Plasma ### Logs Font/Terminal size: Keyboard and bindings: Trying to do this fills the terminal with This is probably not ideal, although I don't know if this is related to this bug.\n\nDiscussion:\nCould you post `WAYLAND_DEBUG=1 alacritty --print-events` log?\n---\nis it blurry regardless of font size or the size is just small? Maybe making it larger improves things.\n---\nHere's the output of `WAYLAND_DEBUG=1 alacritty --print-events`: [Alacritty-25372.log](https://github.com/alacritty/alacritty/files/13786439/Alacritty-25372.log) And it's always blurry, no matter what the size of the font is.\n---\ncould you please add `WAYLAND_DEBUG=1` you're still missing it, it's on `stderr` not stdout, so you have to redirect.\n---\nSeeing the same thing in v0.13.0 (Fedora 39 KDE) on first open which is to reduced window - like the resolution is off. Maximize the window and the resolution is restored. Restore/reduce the same window and it is still correct. Something seems to be skewing the resolution of the window on first opening,\n---\nAs I said, without a `WAYLAND_DEBUG=1 alacritty --print-events` and telling which resolution and scaling are you using I can't help with anything, and I'm 99% sure that it's a bug in KDE.\n---\nJust updated to v0.13.0 and same problem. My mouse is also two lines up from the line selected, and I have to maximize the window and take it back to normal to have the great â€œresolutionâ€. ### System OS: Arch Linux (CachyOS) Version: alacritty 0.13.0 Linux/BSD: Wayland, KDE Plasma 5.27.10 Resolution: 2240x1400 Scaling: 150% Shell: fish 3.6.4 ### Alacritty Alacritty startup resolution: 941x714 ### Logs [AlacrittyLog.txt](https://github.com/alacritty/alacritty/files/13787752/AlacrittyLog.txt)\n---\nCould anyone post an actually requested log, please?\n---\nLike it should look close to\n---\nAnd closed it in the **bugged** state, not the correct state.\n---\nI'm not sure what you're asking for. I did give you the output of what you wanted. And the start of the log file is exactly like your example too.\n---\nI don't see `wl_registry` in any file attached to this issue (comes from `WAYLAND_DEBUG=1`), I only see `--print-events`.\n---\n@kchibisov is this the log file you want ? [AlacrittyLog.txt](https://github.com/alacritty/alacritty/files/13787914/AlacrittyLog.txt) This is when open in bugged state, modifying the window size to get the correct \"text resolution\" and closing it.\n---\n@XNarno now it's missing `--print-events`, as I said, I need both which you get with `WAYLAND_DEBUG=1 alacritty --print-events`.\n---\nFrom the wayland log you've gave me alacritty doing everything correctly and it'll indicate a bug in `kwin` and not alacritty.\n---\nalacrittyLog is when closed in bugged state. alacrittyLogClosedInResized is when opened in bugged state, resized to \"solve\" the problem and closed. It should be good now ^^' [alacrittyLog.txt](https://github.com/alacritty/alacritty/files/13787970/alacrittyLog.txt) [alacrittyLogClosedInResized.txt](https://github.com/alacritty/alacritty/files/13787971/alacrittyLogClosedInResized.txt)\n---\nThey both still lack `--print-events`, but it doesn't actually matter.\n---\nI don't understand why because it's all I got from my terminal ^^'\n---\nRun this `WAYLAND_DEBUG=1 alacritty --print-events >log.txt 2>&1`.\n---\nOkay, sorry I didn't know how to do it ^^' Log0 is when no resizing: [log0.txt](https://github.com/alacritty/alacritty/files/13787997/log0.txt) [log.txt](https://github.com/alacritty/alacritty/files/13787998/log.txt)\n---\nIt seems like the bug should go away as soon as you type something, no? Also, you should run with `alacritty --config /dev/null` for that I guess.\n---\nNo It don't when I type something, even after sending a command. Edit: Running with `alacritty --config /dev/null` don't make the bug occur. So it's all about the config I think.. EDIT : FOUND ! I don't know why for now but removing the entire `[window.dimensions]` section from the config file alacritty.toml worked. (Mine was set to columns = 100 and lines = 30)\n---\n>EDIT : FOUND ! I don't know why for now but removing the entire [window.dimensions] section from the config file alacritty.toml worked. (Mine was set to columns = 100 and lines = 30) yeah, I'm like already half through the fix since log was more than enough."}
{"project_id": "Alacritty", "bug_id": "285", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Slow startup after upgrading to 0.13.0.\n\nDescription:\nAfter upgrading to version 0.13.0 this morning and converting the .yml configuration to .toml, my terminal experiences a delay of about 3 seconds during the initial startup. After the first instance is up, the startup time for subsequent instances is super fast. However, after some minutes, the newly spawned terminal is delayed again, even though there is already a running instance. Here is the output of strace -T alacritty -e false, where the poll() operation takes 2.3 seconds: [log.txt](https://github.com/alacritty/alacritty/files/13785524/log.txt) ### System OS: Arch Linux x86_64 6.6.8-arch1-1 Version: alacritty 0.13.0 (78fa4d6f) Linux: X11, AwesomeWM, no compositor CPU: AMD Ryzen 5 5600H with Radeon Graphics (12) @ 4.280GHz GPU: AMD ATI Radeon RX 5500/5500M / Pro 5500M GPU: AMD ATI Radeon Vega Series / Radeon Vega Mobile Series ### Config ` ### Logs Crashes: No Font/Terminal size: `alacritty -vv` Keyboard and bindings: `alacritty --print-events`\n\nDiscussion:\nTry 0.12.3 again. This is almost certainly a driver initialization issue.\n---\nHm, it actually looks not like a driver init issue, since the GL code is not what is being executed in the relevant logs, since between the picked config and `Window scale factor` there's **no** GL codes at all. It would be nice to know what exactly blocks for that long though... Probably window creation itself just got slower by that amount.\n---\nYou may try something like that to profile And then just move this `t1` logging to locale the issue. Though, if you globally updated the system a reboot might fix it.\n---\nwrt pattern it looks really like a driver issue, but I'm just confused that there's no GL/GLX code run where you actually block for that long, so maybe it's something else...\n---\nHere is your log after applying the patch:\n---\n@notgull do you have an idea what could cause it, since it's likely after your x11rb changes?\n---\nBesides, @hitori1403 , I'd suggest to either reboot and then bisect this to locate the issue.\n---\nAlready rebooted; the issue persists. Switched to the old version 0.12.3, and it works perfectly with no delays. WezTerm also affected.\n---\nyeah, but wezterm has nothing to do with anything alacritty uses and we don't use what wezterm is using, at least directly in any code I'm aware of. This error could also make GTK apps to start with delay, but at this point I'd suggest to just bisect.\n---\nAfter bisecting, I found that commit 80d4dacc is causing a problem.\n---\nCould you `git checkout 6071a7bf` (the last working commit), and then apply this patch: I'd expect it to fail, and then apply this This thing should probably work.\n---\nI am experiencing the same issue, but to a smaller extent. The initial delay is around 1 second. Arch Linux + KDE.\n---\nThe first patch failed, but the second patch is working like a charm. Thank you.\n---\nI mean, we just bisected to exact commit @hitori1403 .\n---\nGot it. I'm looking forward to your fixes in the next version. Thanks!\n---\nCan't reproduce on latest Xubuntu; on latest `master`, window builds in 3.9ms for me\n---\nI mean, it could be wm related, since for now it was kwin or awesome.\n---\nI am experiencing noticeably slow startup after this upgrade too.\n---\n@hitori1403 Can you run `xtrace` on the Alacritty executable and upload the full logs to Gist? It would give us a better picture of what's happening."}
{"project_id": "Alacritty", "bug_id": "286", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Crashes on Walyand with scaling: `Buffer size (...) is not divisible by scale (2)`\n\nDescription:\n### System OS: Linux Version: master (starting from 659550e) Linux/BSD: Wayland (Sway 1.8.1) ### Logs [`WAYLAND_DEBUG=client alacritty --print-events`](https://github.com/alacritty/alacritty/files/13820433/alacritty.log) This seems to be introduced with update to winit 0.29.8, https://github.com/rust-windowing/winit/commit/63d52aae32feb5448cbed95aae0384663910d13a is the likeliest suspect.\n\nDiscussion:\nCould you post `WAYLAND_DEBUG=1 alacritty --print-events` log?\n---\n> Could you post `WAYLAND_DEBUG=1 alacritty --print-events` log? Already included in the report.\n---\nAh, sorry, haven't noticed that it was _attached_. This should fix it\n---\n> This should fix it :+1:, can confirm that it works with the winit patch."}
{"project_id": "Alacritty", "bug_id": "287", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty 13.x `-o` option improperly merges config settings\n\nDescription:\nWhen using -o to override config options, alacritty 13 doesn't properly merge the new values into the existing config. This is a regression in 13; it worked properly in 12.x. ### System OS: Linux Version: alacritty 0.13.1 Linux/BSD: X11 ### Logs My config contains But when I run `alacritty -o env.TERM=\\\"xterm-256color\\\"` with alacritty 13.x, `WINIT_X11_SCALE_FACTOR` is not set from the config. ### Steps to reproduce: then run `echo $WINIT_X11_SCALE_FACTOR` in the new terminal and see an empty string. If running `alacritty -o env.TERM=xterm-256color` with alacritty 12.x, it works as expected and both environment variables are properly set. #### Working example: then run `echo $WINIT_X11_SCALE_FACTOR` in the new terminal and see `randr`, read fresh from the config.\n\nDiscussion:\nI'm not entirely sure how this worked before, but this should fix it: https://github.com/alacritty/alacritty/pull/7619."}
{"project_id": "Alacritty", "bug_id": "288", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Alacritty freezes/stops responding when on a secondary monitor\n\nDescription:\n### Expected Behavior When moving a terminal window from my primary monitor to my secondary monitor or when opening a terminal window on my secondary monitor it should react normally. ### Observed Behavior As soon as the terminal window is on the secondary monitor, it freezes and does not accept any further input. The \"X\" on the decoration also does nothing, until the window manager detects that the application is not responding and offers to kill it. A downgrade to `alacritty 0.12.3` prevents this issue. If you want me to run any short experiments, let me know. But this is my work account so I'll only see messages during the week. ### System * OS: Linux Debian Bookworm * Version: Version 0.13.1 (fe2a3c56) * Build from source with rust 1.75, but the version from cargo install has the same issue * Both Debug and Release builds are effected * Version 0.13.0 (also build from source) exibits the same behavior * Linux/BSD: X11/xfce ### Logs #### Version 0.13.1 Debug Build #### Version 0.13.0 Debug Build #### Version 0.13.1 Release Build\n\nDiscussion:\ncc @notgull\n---\n@Marco-Kaulea What is the output of the `xrandr` command?\n---\n@notgull Here you go.\n---\nI am experiencing this same issue, and I bisected, it appears the problem started with this commit:\n---\nWeirdly, I have a triple monitor setup, and one of my secondary monitors works fine. The other alacritty freezes 100% of the time.\n---\n@chutz it's all also, under xfwm?\n---\n> @chutz it's all also, under xfwm? Yes, I am running it under xfwm4 4.18.0\n---\n@chutz Post your `xrandr` output as well please.\n---\nI have similar issue on Wayland (gnome-shell) when using the secondary monitor and the laptop lid is closed.\n---\n@przepompownia you're issue is likely that https://github.com/alacritty/alacritty/issues/7465 . In general you should open a separate thread of it's not related to gnome suspension stuff, which you can verify with `alacritty --print-events | grep Occluded`, once you get `Occluded(true)` alacritty will stop rendering until `Occluded(false)`.\n---\n@kchibisov let me observe such logs. Indeed, I have `startup_mode = 'Fullscreen'` in my config. Another thing: I never got freeze in Neovim - unlike in bash or Midnight Commander."}
{"project_id": "Alacritty", "bug_id": "289", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Compose keys bug: intermediate keystrokes/characters are typed\n\nDescription:\nOn version 0.13.1, when I type ` 'a`, instead of just getting an `Ã¡`, I get `'Ã¡`. I've recently updated a bunch of system dependencies and alacritty to 0.13.1 using `cargo install` (I don't know which version I was using before). It might be a problem with some other package on my system, but compose keys work fine in other applications (like firefox, libreoffice, and termit). ### System OS: Linux (Debian GNU/Linux) Version: alacritty 0.13.1 Linux/BSD: Wayland and Sway ### Logs Keyboard and bindings: [`alacritty --print-events`](https://github.com/alacritty/alacritty/files/14496095/compose.log)\n\nDiscussion:\n>On version 0.13.1, when I type 'a, instead of just getting an Ã¡, I get 'Ã¡. Install with `--locked`. But yeah, the bug is present upstream.\n---\nThank you for the quick reply and fix. I can confirm that this is fixed in 0.13.2."}
{"project_id": "Alacritty", "bug_id": "290", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: hints.enabled action=\"Select\" mouse.enabled=true results in selection of the whole line (instead of just the hint)\n\nDescription:\nUsing the following configuration snippet: The Select action select the whole line containing the hint, not just the hint text. For example: If I do something like `ls -l --hyperlink=auto` only the files get underlined as I hover over them, but when clicked the whole line is selected. This doesn't change even if I uncoment the `mouse.mods` line. Is this the intended behavior? The man 5 alacritty states: So I would expect only the hint's text to be selected. If it's not a bug / the current behavior is already established, would you consider something like \"SelectHintOnly\" action? ### System OS: Linux (Fedora 38) Version: alacritty 0.13.1 Linux/BSD: X11, KDE5 / KWin\n\nDiscussion:\nSeems like this issue is specifically due to the mouse being used to select the hint. It works just fine with the keyboard. It also works just fine for regex hints.\n---\nStill would be nice if it could be fixed. I'm trying to optimize some workflows and being able to select/copy stuff like filenames with a single click (even when they contain spaces etc.) would be really nice. Maybe a `CopyText` action that would copy the displayed hint text instead of the hyperlink could be even nicer. Also the docs could probably use a little bit of clarification: now the description for `Copy` action states: `Copy the hint's text to the clipboard.` which in case of a hyperlink is a little misleading/ambiguous. Also, as I understand, currently the `mouse.mods` option serves two distinct purposes and any of the `mouse.mods` options need to be satisfied for the hints to be highlighted (underlined) on mouse-over. So maybe a special `NoOp` action could be introduced for people that want the mouse-over highlighting always-on but require a modifier to invoke any of the actions / commands (yes I know I could introduce a no-op command as a workaround).\n---\n> So maybe a special NoOp action could be introduced for people that want the mouse-over highlighting always-on but require a modifier to invoke any of the actions / commands (yes I know I could introduce a no-op command as a workaround). This is not something I'm interested in. The highlight shows users when they can interact with a link, so underlining without the ability to click it would just be misleading and awkward.\n---\n> This is not something I'm interested in. The highlight shows users when they can interact with a link, so underlining without the ability to click it would just be misleading and awkward. I would agree in case of regex hints (where I know/control how I set them up), but in case of hyperlinks some distinction could be really useful. If I use a new/unfamiliar program that uses hyperlinks, there should be some way to discover they are there (different styling / mouse cursor / whatever). Think of it as a web page where all the links are styled just as normal text, no cursor change on hover and you need a special keyboard combo to click-though them. On the other hand, leaving the default no-modifier hyperlink activation on could be a security nightmare (a random click into the terminal could get you owned). It's not a big deal, I have the \"Select\" action set up right now for no-mods, and if no action is required one could do something like a `/bin/true` command instead to get just the highlighting. I was just considering all the uses cases. Hints/hyperlinks are a very nice feature, but one should take care to set them up properly.\n---\n> If I use a new/unfamiliar program that uses hyperlinks, there should be some way to discover they are there It is up to the application to make that clear to you. If they want to underline their hyperlinks, they're easily capable of doing so. If they don't, they don't want them to be highlighted.\n---\n#7824"}
{"project_id": "Alacritty", "bug_id": "291", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Setting window position from CLI works only for one axis\n\nDescription:\nUpgrading from alacritty 0.12 I found myself unable to set *both* `x` and `y` positions from CLI, but I can set either *one*. Examples: It feels like a latter position drops the former one. Interestingly, if I set both `x` and `y` in the alacritty.toml and run alacritty with neither `x` nor `y` specified from the CLI, then both positions get applied correctly. https://github.com/alacritty/alacritty/issues/7267 is possibly related. ### System OS: Debian Version: alacritty 0.13.0 Linux: X11, BSPWM\n\nDiscussion:\nCan you try `\"window.position={ x = 333, y = 444 }\"`?\n---\nIt works fine that way, thank you.\n---\nSince position is a `Delta` it's deserialized directly and doesn't benefit from our abstractions which allow overriding. Not a huge deal, but might be nice to look into a workaround. Since it's defined in Alacritty it should be fixable without too many issues.\n---\n~~I'm afraid I was too fast to report it working. The method you suggested works fine when I run it in a shell indeed, but when I try to run it via my hotkey daemon (`sxhkd`, namely), neither `x`, nor `y` position don't work anymore (no matter if set both at once, or each separately).~~ Sorry, it was mistake on my side (had to escape the `{}` symbols), the way you suggested works fine.\n---\n>I'm afraid I was too fast to report it working. The method you suggested works fine when I run it in a shell indeed, but when I try to run it via my hotkey daemon (sxhkd, namely), neither x, nor y position don't work anymore (no matter if set both at once, or each separately). that's different issue though if they don't work at all.\n---\n>Since position is a Delta it's deserialized directly and doesn't benefit from our abstractions which allow overriding. Not a huge deal, but might be nice to look into a workaround. Since it's defined in Alacritty it should be fixable without too many issues. maybe we can accumulate cli options and then apply the end union of all that was passed at once?\n---\n> maybe we can accumulate cli options and then apply the end union of all that was passed at once? That would probably work as a backup. But even incrementally these shouldn't override each other. Otherwise we might not support overriding just one when they're defined in the config.\n---\nI mean, union is what it's all about? because same options later should purge previous, but different will just merge."}
{"project_id": "Alacritty", "bug_id": "292", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: alacritty msg create-window leaves a unix fifo behind\n\nDescription:\nI like my terminals popping up fast, so I use this script to start them: Curiously, starting a new window and closing it reliably leaves an extra fd behind. The way I monitor it is I lookup the `alacritty` pid and then run this loop: The delta between the initial set of FDs and after the second window is closed is this single FIFO. % diff /tmp/{1,3}.txt 28a29 > alacritty 17550 greg 30u unix 0x000000003920e72d 0t0 167503 type=STREAM (CONNECTED) Starting more windows adds more such FIFOs left behind. ### System OS: Linux 6.1.0-21-amd64 (also OpenBSD) Version: alacritty 0.13.2 Linux/BSD: X11 ### Logs FDs right after the first process starts [1.txt](https://github.com/alacritty/alacritty/files/15329794/1.txt) FDs when the second window is opened [2.txt](https://github.com/alacritty/alacritty/files/15329795/2.txt) FDs after the second window is closed [3.txt](https://github.com/alacritty/alacritty/files/15329796/3.txt)\n\nDiscussion:\nVery odd, I can confirm this behavior, but even explicitly shutting down the socket streams does not seem to fix it. This does not fix it: This does: So I'd assume the issue is somewhere in-between. Don't have time to look more into it myself but I figure it shouldn't be that hart to narrow down further.\n---\nhttps://github.com/alacritty/alacritty/pull/7991 fixes the issue I was able to reproduce. Please let me know if you can still see any leaks after this patch."}
{"project_id": "Alacritty", "bug_id": "293", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: No transparency after last update\n\nDescription:\n### System OS:macOS Version: alacritty 0.14.0-dev (7077a5f4) ### Problem Opacity stopped working. Alacritty's background is black when opacity=1 and becomes grey with opacity=0 without turning transparent\n\nDiscussion:\nHave you confirmed downgrading to a21adf1a5073329501cca7dccd8a9f7d7baecc88 fixes the issue?\n---\nTested all versions and then messed up and gave you wrong info, sorry! It stopped working in 48c088a. Last working commit in a77f77c.\n---\nWhich macOS version, also does https://github.com/alacritty/alacritty/pull/7965 fix it?\n---\nI tested both with my config and #7965 doesn't seem to fix it, it's somewhat transparent but not as before. This is at 235bfe7729bb94c30434eae361e9d4fed0ea382b This is last working commit for me a77f77c Config on both: Full config\n---\n@madsmtm @kchibisov Looks like a macOS winit regression?\n---\nNote: https://github.com/alacritty/alacritty/issues/153#issuecomment-2131365935 I came here to voice issues with emoji rendering on Linux Mint\n---\nhttps://github.com/rust-windowing/winit/pull/3722 should fix this.\n---\nI changed my mind, we're going to go through with https://github.com/rust-windowing/winit/pull/3722, and it will likely be included in Winit v0.30.2."}
{"project_id": "Alacritty", "bug_id": "294", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Font size with two screens and 0.13.x\n\nDescription:\n### System OS: Linux Arch Version: Install this one https://aur.archlinux.org/packages/alacritty-git Linux/BSD: X11/Wayland & I3 I try the beta version of alacritty according to the AUR package. I end up with a â€œstrangeâ€ bug, I got two screen, on the â€œmainâ€ screen the font are huge (around 36 times pressing ctrl+- to get the same size as the other) but on the second screen the font size are smaller (than alacritty 0.12.3) but still almost normal (one or two time with ctrl+ + and it's OK). Here the ouput on main screen big font : and in the second screen : I can do any test to help *if* it's in the AUR packages (I'm not really good to build packages).\n\nDiscussion:\nHow does this compare to Alacritty 0.12.3? Could you share screenshots comparing the two?\n---\nSo here a screenshot of both screen On the right is the second screen, on the left is the main screen. On each screen on the left is alacritty 0.12.3 and on the right alacritty-git-0.13.x ![2023-12-21-1703141438_screenshot_7680x2160](https://github.com/alacritty/alacritty/assets/11524096/7a78053e-23be-4c58-af3e-8a50fa58797c) The configuration of alacritty-git are created only with a alacritty migrate.\n---\nJust curious, do you set `Xft.dpi`?\n---\n> Just curious, do you set `Xft.dpi`? Indeed I did\n---\nI think this should fix it.\n---\nWell....I will trust you on that (I've no clue what you just write ;-) ) but soon the AUR package are updated I test and tell you the result.\n---\nJust let you known with the last version from github.com the bug indeed disappear. Bravo"}
{"project_id": "Alacritty", "bug_id": "295", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Certain modifiers fail in `kakoune`\n\nDescription:\nI found at least two type of modifiers that stopped working on `0.13` that worked before on `0.12`. - `ctrl + [` does not trigger `ESC`-equivalent behaviour in `kakoune`. - Interestingly enough the same action continues to work in `vim`? - `alt + shift` combinations fail to register, so I checked eg. `alt + shift + !` (append command output), `alt + K` (keep not matching), `alt + N` (extend reverse search). I assume these issues have a wider impact than just `kakoune` but I found it the easiest to reproduce it there. It possibly might be a duplicate considering a wave of keyboard input related issues lately but none so far seems to match exactly that. Sorry in advance. ### System OS: Arch Linux Version: alacritty 0.13.0 (78fa4d6f) Linux/BSD: Wayland, sway ### Logs This should be quite trivial to reproduce, can provide logs if necessary though. Thanks a lot for looking into it. Fantastic project and amazing work, lots of love <3\n\nDiscussion:\n@kchibisov Sounds like keyboard protocol stuff? This seems intentional on kakoune's end.\n---\nI think it's due to kakoune really wanting associated text, I'll try to write a patch.\n---\nCould you try applying that? This should probably fix the `alt + shift + 1`, but I'm not sure what could happen with `ctrl + [` or `alt + K`, they work the same compared to e.g. kitty/foot when I look into the generated events. Could you post the `alacritty -vvv` log when you try to repro the issue after this patch applied?\n---\n>ctrl + [ does not trigger ESC-equivalent behaviour in kakoune. This is not an escape when you have kitty protocol, so unless kakoune explicitly binds it won't work. >alt + K (keep not matching), alt + N (extend reverse search). Not sure what they supposed to do, we reported them the same as in other terminals when kitty protocol is in use.\n---\n@kchibisov > This should probably fix the `alt + shift + 1` `alt + shift + 1` does not work with and without a patch. before: after: > but I'm not sure what could happen with `ctrl + [` or `alt + K`, they work the same compared to e.g. kitty/foot when I look into the generated events. With `ctrl + [` you're actually right. `alacritty <0.13` matches the behaviour of eg. `xterm` or `gnome-terminal` and not `foot`/`kitty` and there it works. I guess it's because of the protocol you've mentioned although I'm not familiar with it to understand all the implications. Could you elaborate a little bit more? Can it be tweaked/turned off? Manual binding seems to solve it FTR: but muscle memory is going to be annoying on vanilla editor configurations :( Feels like [1172](https://xkcd.com/1172/) case. However, `alt + K`, `alt + !`, `alt + shift + /`, `alt + N` etc. seems to work correctly & same in `kitty`, `foot`, `xterm`, `gnome-terminal` and `alacritty pre-0.13` but not on master.\n---\nCould you not truncate the logs output and tell me exactly what to do in kakoune? >map global menu Just remap it in alacritty if you want to emit the `chars` you need, no need to alter editor here.\n---\nI just tried `kak` myself which I can install on fedora, and `alt+k` doesn't work for me in both kitty, foot, alacritty. `kak` enabled the `DISAMBIGUATE` and `REPORT_ALT_TEXT`, to simulate what it's doing, you should try running Then when you press `Alt + k` you should see something like The same I see in foot, and kitty adds the my base layout information along the way, which is irrelevant for this case. I thought initially that kak uses base keys, thus I wrote a patch to account for `!` -> `1` relationship, however for the `alt+k` there's no such a thing, meaning that the issue on the `kak` side, which is unfortunate. On the other part, nvim and vim itself, both enable the same mods and work just fine, as you've seen.\n---\nAh, no, it actually works in all alacritty,kitty,foot for me, I just haven't figured out how it should work, since you need to press `ESC` first and then `alt+k`, because you need to enter normal? mode. If I enter some normal? mode and then press `alt+k` it works as it should, pre 0.13 I just had to press it twice, because first one will emit `esc` and thus make me into the normal mode?, so I was testing it differently.\n---\nCould you try with the `alacritty --config-file /dev/null` config actually, maybe you have conflicting encoding in your bindings and that's why it doesn't work?\n---\n`kakoune` is a modal editor, so yes, normal mode is expected for `alt + k` or `alt + K` to work. Sorry, should have been more clear on that. `alt + k` works just fine in the new alacritty version, I just meant the keybindings with `alt + shift` in them, so `alt + shift + k` - thus `alt + K`. The same goes for `alt + !` because `alt + shift + 1`. So expected behaviour (normal mode): - `alt + k`: see \"keep matching\". - `alt + shift + k`: see \"keep not matching\". (does NOT work in 0.13) - `/`: see \"search\" - `alt + /`: see \"reverse search\" - `shift + /`: see \"search (extend)\" - `alt + shift + /`: see \"reverse search (extend)\". (does NOT work in 0.13) - `!`: see \"insert output\" - `alt + !`: see \"append output\". (does NOT work in 0.13) From comparing different key bindings seems like `shift` is ignored as soon as `alt` is pressed. So pressing `alt + shift + /` yields \"reverse search\" which is bound to `alt + /`. My config is quite bare-bone. `--config-file /dev/null` yields no change in behaviour :/\n---\nAh, ok. This should fix it https://github.com/alacritty/alacritty/pull/7493\n---\nFTR, I sshed into the Ubuntu based box and everything seems to work on ancient `kakoune v2020.09.01` that they ship, including `ctrl + [`. I'm using `kakoune v2023.07.29`. I don't know which version they ship on Fedora. Even more variables in the equation unfortunately :/ > This should fix it https://github.com/alacritty/alacritty/pull/7493 I'll check now, thanks for a quick feedback :)\n---\nPatch seems to fix the issue with the `alt + shift` ðŸ‘ðŸ» I'm still wondering why in the old kakoune `ctrl + [` works just fine, very curious.\n---\n`ctrl + [` is just escape, however kitty protocol tries to _solve_ this issue and make it distinguishable from `ESC`. And just thinking about it you can't really solve it with alacritty binding...\n---\n> `ctrl + [` is just escape, however kitty protocol tries to _solve_ this issue and make it distinguishable from `ESC`. > > And just thinking about it you can't really solve it with alacritty binding... @kchibisov Initially I interpreted your comment as you keep working on getting the `^[` to work but considering that you closed the issue I assume that on `alacritty` part everything works as intended? Because PR merged into the master does not make `^[` trigger `ESC` action in `kakoune`. Sorry for the confusion."}
{"project_id": "Alacritty", "bug_id": "296", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Not picking up decorations_theme_variant on startup on macOS\n\nDescription:\nAlacritty is not picking up `decorations_theme_variant = \"Dark\"` on startup on macOS. I have to do `touch ~/.config/alacritty/alacritty.toml` to get Dark appearance to take effect. Startup: After `touch ~/.config/alacritty/alacritty.toml`: ### System OS: macOS Sonoma 14.5 (23F79) Version: alacritty 0.14.0-dev (0d4ab7bc)\n\nDiscussion:\n@madsmtm Are you aware of any issues like this? We're using `with_theme`, seems like that might have issues? @sfsam If you're comfortable changing a couple lines of code, I'd be curious if this diff fixes it:\n---\nIt's winit issue because it never sets the theme during the window creation with macOS API, it just gets it and stores, but never sets actually.\n---\nThat's probably why I wasn't able to notice it, because I use the system's theme and not light theme with just dark for alacritty.\n---\n@chrisduerr Yes, your patch seems to fix it.\n---\nWhy on earth github closed an issue cross repository orgs!!! This is so...........\n---\nI was wondering the same thing when I saw itâ€¦ sadly GitHub doesnâ€™t understand dependency management of our app.\n---\nThe problem is that I closed the issue by merging PR in winit, which is under completely different org, and it did so only because I'm owner in both repos. When I was not owner it was not doing so IIRC."}
{"project_id": "Alacritty", "bug_id": "297", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: underline url moves as more lines are added to terminal output\n\nDescription:\nFor bug reports, the following information can help speed up the process. Please describe the bug that you have found and what you would expect to happen instead. ### System OS: Linux/BSD/macOS/Windows Version: `alacritty --version` output Linux/BSD: X11/Wayland, DE or Compositor and WM i3, `Linux p14s 6.6.10-1-MANJARO #1 SMP PREEMPT_DYNAMIC Fri Jan 5 17:38:36 UTC 2024 x86_64 GNU/Linux` ### Logs Crashes: STDERR, STDOUT Font/Terminal size: `alacritty -vv` `alacritty 0.14.0-dev (f1853a03)` Keyboard and bindings: `alacritty --print-events` 1) run this in your term: 2) move your cursor on top of one of the urls 3) scroll upwards a bit => as more lines are added, the highlight will \"move\" to keep the same distance relative to the freshest line, so its no longer the actual lined underneath the cursor :laughing:\n\nDiscussion:\nhttps://github.com/alacritty/alacritty/assets/476013/c9221789-96c3-46e7-8629-7a3ebd66b031"}
{"project_id": "Alacritty", "bug_id": "298", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Alacritty 0.13.2 (and 1cc08eb) leaks file descriptors\n\nDescription:\nFirst of all, thank you for maintaining and developing Alacritty! I've encountered an issue where Alacritty leaks a number of file descriptors on my system (using `% alacritty`): Every new alacritty subprocess inherits more file descriptors (using `% alacritty -e alacritty`): This also applies to the `SpawnNewInstance` action. The expected behavior is that subprocesses do not inherit any additional file descriptors (tested using a different terminal emulator `% st`): I'm sure this is reproducible not just on my system, but I'd be happy to provide more information if needed. ### System OS: Linux Version: `alacritty 0.13.2` (also occurs with commit `1cc08eb`) Linux/BSD: X11, picom and bspwm ### Logs Crashes: N/A Font/Terminal size: Keyboard and bindings: N/A\n\nDiscussion:\n> Version: alacritty 0.13.2 (also occurs with commit 1cc08eb) Have you tested previous versions? I don't see how this would ever create issues, considering these file descriptors aren't leaked based on your observation (they just aren't cleared from child processes). But if it's something easy to fix it's probably not a bad idea to clean up.\n---\nAren't those from mesa?\n---\nNot sure how it'll help, but on my system all of them got fixed with https://gitlab.freedesktop.org/mesa/mesa/-/merge_requests/31700 Though, I'm on Wayland and maybe something specific to x11 is getting leaked on your setup.\n---\nAh, you have X11 specific stuff and maybe your mesa doesn't have 300 fds leaked yet. That's your issue, which should be simple to fix https://github.com/quininer/x11-clipboard/commit/a716f799e324a7a00b01d22e8da1acffbd468654"}
{"project_id": "Alacritty", "bug_id": "299", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: alacritty believes its active but it is not\n\nDescription:\nI do not expect alacritty to show a full cursor like it has input focus, when in fact, it has not. https://www.youtube.com/watch?v=1Up2_n5b3s4 ### System OS: Linux Version: alacritty 0.14.0-dev (6484ab84) Linux/BSD: Wayland, River 0.2.6 ### Logs\n\nDiscussion:\nHm considering river is at least somewhat obscure compared to the bigger players out there, have you tested other compositors like Sway? It's not unlikely we're just not receiving the event from the compositor, which can be easily tested with `WAYLAND_DEBUG=client` (iirc the events are called enter/leave for focus change). cc @kchibisov since he might be aware of specific River/Winit bugs.\n---\nThe issue is that there's no `Focused(false)` event initially and alacritty assumes that it's _focused_. I'd need to check whether winit guarantees now that default window is not focused, unless there's an event for that.\n---\nThanks @kchibisov <3"}
{"project_id": "Alacritty", "bug_id": "300", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Spurious char from previous line in double click selection\n\nDescription:\nSince alacritty `0.13.0` selecting a word / line with a double click will also select the last character of the previous line if it is non-whitespace. ![image](https://github.com/alacritty/alacritty/assets/1280142/098351c6-5b78-4838-ac40-0231990f7cf5) (double click on `bbb` will select `X\\nbbb`) ![image](https://github.com/alacritty/alacritty/assets/1280142/727b7dba-e0da-4192-bbdf-399953ff24df) (double click on `bbb` will correctly select `bbb`) This is especially annoying for shell configs that print the date / command duration at the end of the previous line and took me a while to figure out where these spurious char was coming from. ### System OS: Arch Linux Version: `0.13.0` and `0.13.1 (fe2a3c56)` (affected) Linux/BSD: sway (Wayland) ### Logs (log of a different window)\n\nDiscussion:\nSeems like somehow 845a5d8a8d47c233c4ed8177ecbb20b05b22118b broke this.\n---\nhttps://github.com/alacritty/alacritty/pull/7600"}
{"project_id": "Alacritty", "bug_id": "301", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: alacritty not honouring [semantic_escape_chars] setting\n\nDescription:\nI hope I am not over-stepping any github/alacritty rules. My previous ticket has been closed, and I cannot find a way to reopen it (just joined yesterday). Please feel free to delete this ticket if need be. `semantic_escape_chars = \",â”‚`|:\\\"' ()[]{}<>\\tâ€¢-â€”ï¼ï¼Ž\"` Here's a video of what happens after [Ctrl] + [Shift] + [Space] https://github.com/user-attachments/assets/0657d09d-544f-46e6-8964-1e58f977de26\n\nDiscussion:\nYou can just comment under existing issues, there's no need to create new ones. I've checked out the characters you mention specifically and it seems like fullwidth characters can't be used as semantic escape chars.\n---\nThanks for clearing that up. Many thanks for an exceptional piece of software.\n---\nShould be fixed with #8190, feel free to test if that works for you.\n---\nMany thanks to you for taking the time to fix this. I'll wait for an official release from my distro, as I do not have the knowledge on how to get this patch working on my setup. With humble gratitude. Cheers"}
{"project_id": "Alacritty", "bug_id": "302", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Semantic characters in Vi Mode and moving left\n\nDescription:\n### System OS: Linux 6.11.9 (arch) Version: alacritty 0.14.0 (22a44757) Sway 1:1.10-1 When in Vi Mode [Shift]+[Ctrl]+[Space], moving to the left with [B] \"SemanticLeft\" does not work for all semantic characters: `this is a testï¼STAHPï¼ŽSTAHPâ€”yes this is a test-move testâ€¢lets go` In the above, the characters to the left of \"STAHP\" causes the cursor to... stop. Moving forward with [E] is fine. The only way to move past those characters is to use the cursor keys. Please be so kind as to look into this if you have the time at hand to spare. With humble thanks.\n\nDiscussion:\nI'd assume that you have those wide chars in semantic chars specified, since wide chars are not there by default.\n---\nYes. `[selection] semantic_escape_chars = \",â”‚`|:\\\"' ()[]{}<>\\tâ€¢-â€”ï¼ï¼Ž\" `\n---\nIt seems like `b` isn't the only binding affected. The `w` binding also does not work correctly."}
{"project_id": "Alacritty", "bug_id": "303", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: `alacritty migate` panic\n\nDescription:\nRunning `alacritty migrate` seems to panic, rather than migrate stuff. It appears to point to this indexing on the toml. https://github.com/alacritty/alacritty/blob/c032c89f1c457c3cf97dcda3f8367115fa5f66ea/alacritty/src/migrate/mod.rs#L137 ### System OS: Linux Version: alacritty 0.14.0-dev (c032c89f) Linux/BSD: Arch Linux 6.11.2-arch1-1, Wayland, Hyprland ### Logs Crashes: Font/Terminal size: [Alacritty-2712427.log](https://github.com/user-attachments/files/17334656/Alacritty-2712427.log) Keyboard and bindings: [Alacritty-2716785.log](https://github.com/user-attachments/files/17334703/Alacritty-2716785.log)\n\nDiscussion:\nshare your configs?\n---\nI can repro with an empty config."}
{"project_id": "Alacritty", "bug_id": "304", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Hyperlinks not working always\n\nDescription:\n### System OS: Linux (Archlinux) Version: alacritty 0.14.0 (22a44757) Linux/BSD: Gnome 47.1 + Wayland There is something wrong with hyperlinks. I have opened two terminals: Alacritty and Gnome Console. On Gnome Console, hyperlinks are working just fine, on Alacritty I'm not sure how but when trying copy pasting the prompt or some gibberish on it, then it starts working https://github.com/user-attachments/assets/20b78598-4364-4106-9570-445d3c927f75\n\nDiscussion:\nSounds like a shell issue. The shell is likely rewriting itself when you're pasting text in thus fixing the missing hyperlink escape.\n---\nBut it's working fine on another terminal by default, we sure it's not an alacritty issue?\n---\nIt would help to see what the format of the escape sequence you're using to create the link. Chris is probably right, and the reason it could be different with another terminal is because not all terminals handle prompts (reflowing text) the same way.\n---\n> Chris is probably right, and the reason it could be different with another terminal is because not all terminals handle prompts (reflowing text) the same way. Startup time and feature detection might also impact this.\n---\nI've checked since I was pretty sure this was working at some point, looks like maybe some regression on 0.14? I downgraded to 0.13 and recorded this video https://github.com/user-attachments/assets/aef38c33-22e9-4611-bfc6-5529a17c725f TLDR: On 0.13 works fine, I upgrade to 0.14 and then it stops working (The cursor is not clickable and the URI is not showing up on the bottom)\n---\nDoes it work on 0.14 if you run `alacritty -V` first and repaint the prompt like in the second video?\n---\nIf I'm guessing correctly what you mean, looks to be handling the hyperlinks fine on old prompts https://github.com/user-attachments/assets/68884a3f-c894-46e3-8059-7cd7f3ac7b41\n---\nIs it then something on Alacritty or something I should report somewhere else?\n---\nYou can always try bisecting if you feel like it's a regression, but it could just be timing issue.\n---\nThis does look like a bug in alacritty. I can reproduce it in bash with: The current prompt always fails to be a clickable URL though the cursor does change and flicker a bit. This makes me think it's not a timing issue.\n---\nTried bisecting, got this:\n---\nRecloned and retried going to the same commit and parent and reproduced, (Trying to figure out if it's something about timing) https://github.com/user-attachments/assets/d0b3e49c-07de-4c05-8041-dea0abbd1ab4\n---\nI also see a1ed79bd2c014be49a85e2100ce374b86c8839e8 introducing this issue when I bisect. I don't think it's a timing or reflow issue since the bug appears in a short prompt (see my above comment) and it's always present for the current prompt. Other prompts work as expected.\n---\nVery possible for this patch to have introduced a regression.\n---\nIf it helps, ping me whenever you want me to test any patch ;)\n---\nHere's a video showcasing the issue a bit more broadly: ![damage](https://github.com/user-attachments/assets/c372715a-e24b-4bed-982c-002ec247d4bb)\n---\nCan confirm that a1ed79bd2c014be49a85e2100ce374b86c8839e8 introduced the regression. Here is a simple reproducer (just a hyperlink with one-character label, everything bigger than one char still works fine):\n---\nShould be fixed with #8276, let me know if you can still reproduce this."}
{"project_id": "Alacritty", "bug_id": "305", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Highlighted hints use old data for their actions\n\nDescription:\nCurrently the following logic is used to open hints with the mouse/vi mode: Both of these take the current highlighted hint and pass it directly to `trigger_hint`. However `trigger_hint` uses the following logic to convert the hint to its text equivalent: This is problematic since the highlighted hint has not been checked for validity since the last frame, which means the underlying terminal content could have changed since the user requested its opening. To avoid accidentally opening arbitrary text, Alacritty should either invalidate the highlighted hints before passing them to the `trigger_hint` function or recreate the hints. If the hints are recreated, we might also be able to remove the ugly `take()` -> `assign` stuff.\n\n"}
{"project_id": "Alacritty", "bug_id": "306", "source_type": "github", "label": "Function :: Access Control (CWE-284)", "llm_input_text": "Title: `--daemon` mode ignores `-e` for first window with `msg create-window`\n\nDescription:\nI use another terminal to not interfere with alacritty instances. Then do: - `alacritty --daemon` - `alacritty msg create-window -e nnn` â†’ Alacritty opens and is a child process of the daemon, as it should. It is a blank, interactive terminal window though. `nnn` (or any other command) did not execute. When using `alacritty msg create-window -e nnn` a second time, even after closing the first window, it works as intended. ### System OS: Linux Version: alacritty 0.14.0 (22a44757) Linux/BSD: X11, i3wm ### Logs Sadly, nothing of value. `alacritty msg create-window -e nnn` does not produce any output. `alacritty --daemon` produces the following. 6.[â€¦] is the first, unsuccessful use of `alacritty msg create-window`, 9.[â€¦] is the second one.\n\nDiscussion:\nShould be fixed with #8374.\n---\nThanks a ton!"}
{"project_id": "Alacritty", "bug_id": "307", "source_type": "github", "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "Title: Setting hints with `alacritty msg` doesn't update keyboard bindings\n\nDescription:\nHey! Currently when using `alacritty msg config` to update hints, it doesn't update the keyboard shortcuts. To reproduce, start an alacritty and run: You'll notice that `Control+Shift+M` doesn't show my-tag as possible targets, however cursor hover will still work. Alacritty version: 0.15.0\n\nDiscussion:\nHm that does indeed not seem to work.\n---\nIt also seems that changing the `general.import = [ \"~/.hints-file\" ]` to `general.import = []` with `alacritty msg config` doesn't remove hints either.\n---\nImports not being changeable through IPC is fine since there's better ways to do that really. But hints really should work."}
{"project_id": "Alacritty", "bug_id": "308", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: [Bug] After 0.16 update, Alacritty fails to start in any Wayland session (X11 works as is)\n\nDescription:\nAlalcritty updated to version 0.16 and since it fails to start under Wayland session with the following error:\n\nDiscussion:\nI can reproduce, some Omarchy core features broke because of this\n---\nWhat GPU are you running? If you are using hyprland, can you try a proper Wayland compositor instead? For me with Sway I can't reproduce this issue.\n---\nme too getting same error after update. i have a bit old laptop with nvidia gt 525m. open source graphics installed. arch linux. wayland. kde. it was just running well before update.\n---\nI can reproduce this on Arch with Sway, kernel 6.17.2, i7-3632QM integrated graphics. Also, this seems to be the same issue as #8705 and maybe #8476.\n---\nCould be this? cd884c984bbd6a7c65965681083da61e091ff7e5 ? Will need a bit better log than what was provided, but it looks like it? Since nothing changed besides that thing.\n---\nBisect would be really useful from someone who can reproduce. I can't reproduce on AMD (6900XT) or Mali. Seems like Intel/Nvidia might be affected to some degree?\n---\nI can reproduce the issue with an old Intel iGPU (`Mesa Mobile IntelÂ® GM45 Express Chipset (CTG)`, i915 driver, GLES 2.0, OpenGL 2.1) Either forcing the usage of llvmpipe software renderer with `LIBGL_ALWAYS_SOFTWARE=1` or forcing the usage of Xwayland with `unset WAYLAND_DISPLAY` makes alacritty to launch normally again for me Here is the full logs of four different runs (0.15.1, 0.16.0 without workarounds, 0.16.0 with Xwayland, 0.16.0 with llvmpipe) if anyone is interested in it. [alacritty-logs.txt](https://github.com/user-attachments/files/22988329/alacritty-logs.txt)\n---\nMy intel GPU is not affected, probably some GPUs and somehow it ends up like that? It's rather strange. Probably it tells that there's `ROBUSTNESS` but then, it actually says that there's no such thing? Would suggest to try this\n---\n@kchibisov's patch seems to be working on my end [alacritty-logs-2.txt](https://github.com/user-attachments/files/22988975/alacritty-logs-2.txt)\n---\n> What GPU are you running? If you are using hyprland, can you try a proper Wayland compositor instead? > > For me with Sway I can't reproduce this issue. I have an Intel Ivy Bridge iGPU, that's certain GPU's that missing ROBUSTNESS feature, as users there researched (in this case Alacritty doesn't work in any Wayland compositor, I have KDE Plasma, btw), with @kchibisov's patch, Alacritty works under Wayland again.\n---\nThe thing is that we check that the extension is listed or not, so it's listed for you, but doesn't work.\n---\nJust in case, can you post a `eglinfo`?\n---\nBy the way, here's mine: [eglinfo.txt](https://github.com/user-attachments/files/22989766/eglinfo.txt) Also, while researching about the `EGL_EXT_create_context_robustness` extension string, I found a somewhat relevant comment in the Mesa source code about the robust buffer access:"}
{"project_id": "Alacritty", "bug_id": "309", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Alacritty is likely sending repeat events for Enter, Tab, and Backspace\n\nDescription:\n### System OS: Linux (gentoo) Version: alacritty 0.14.0 Linux/BSD: GNOME Wayland ### Logs Crashes: NONE Font/Terminal size: Keyboard and bindings: [While using neovim (from master) I noticed that keys such ash Tab and backspace are being repeated.](https://github.com/neovim/neovim/issues/31806) I reported on neovim, but was asked to inform this to Alacritty developers and was guided to this https://sw.kovidgoyal.net/kitty/keyboard-protocol/#report-event-types. Can you please help.\n\nDiscussion:\nTo clarify, Neovim recently enabled the [Report Event Types](https://sw.kovidgoyal.net/kitty/keyboard-protocol/#report-event-types) mode of the kitty keyboard protocol. The specification indicates that unless the \"Report all keys as escape codes\" mode is also enabled (which it is not in this case), release events for Enter, Backspace, and Tab should not be sent. I haven't seen confirmation yet that is exactly what's happening here, but that seems to be the case.\n---\nSimple reproduction steps (from https://codeberg.org/dnkl/foot/issues/1892): Run `printf '\\x1b[>3u' && kitty +kitten show_key -m unchanged`, and press Enter, Backspace, and Tab. In Alacritty 0.14.0 (22a44757) I get while in Kitty 0.38.1 I get Note: the above is with Num Lock off. I always have Num Lock on, in which case I get this in Alacritty: and in Kitty: The protocol docs are not clear on whether \"lock\" modifiers (Num Lock and Caps Lock) should stop Enter, Backspace and Tab from sending their legacy codes. But given that the reason for why those three keys are an exception in the first place is \"to allow the user to type and execute commands in the shell such as reset after a program that sets this mode crashes without clearing it\", I'd say Alacritty's behaviour of sending the legacy codes is more sensible. In Kitty, if an application crashes, I would have to disable Num Lock to be able to use the Backspace, Tab or Enter keys for recovery in the shell.\n---\nI am seeing the very same issue with `alacritty 0.15.0-dev`.\n---\nI remember asking about it, and got that that's how it should work, apparently not anymore...\n---\nI'd note to @gpanders if your request to some terminal results in this terminal changing spec, notifying other terminals might be not a bad idea, since I'm 99% sure that foot as well just copied behavior of kitty back in the day, the same as alacritty, since we even have a comment explaing that it's how it is, after even I tried to figure out why it was the case.\n---\nThank you @kchibisov for the fast PR ðŸ‘ðŸ¼ ðŸ˜„\n---\n> I'd note to @gpanders if your request to some terminal results in this terminal changing spec, notifying other terminals might be not a bad idea, since I'm 99% sure that foot as well just copied behavior of kitty back in the day, the same as alacritty, since we even have a comment explaing that it's how it is, after even I tried to figure out why it was the case. The issue was reported to kitty in February 2024 and the spec was updated then: https://github.com/kovidgoyal/kitty/issues/7136 The issue was reported to foot at the same time as Alacritty: https://codeberg.org/dnkl/foot/issues/1892 Ghostty updated shortly after the issue was reported to kitty: https://github.com/ghostty-org/ghostty/pull/1535 I'm not aware of how any other terminals behave.\n---\nprobably all behave the same as past kitty though, given that we had explicit lines for such behavior which I personally questioned in the past. Though, we don't have any sort of versioning and breaking changes (even if they obviously fix broken established behavior) can slip at any time.\n---\nAre there plans to port this fix also to v14?\n---\nNo, there will be 0.15 soon with it.\n---\nNVIM v0.11.0-dev Build type: RelWithDebInfo LuaJIT 2.1.1703358377 alacritty 0.15.1 I am still experiencing this issue with these versions\n---\nYou can try to repro with the process mentioned above, but ensure that you test in actually that actually is 0.15.1 and you don't have e.g. 0.13 that you run because it's early in the path during launch.\n---\nI'm also still seeing this issue on alacritty 15.1 and latest nightly neovim. Reinstalled neovim & alacritty to be 100% sure Per repro steps above I know this version of alacritty has resolved the issue for others (but many still seem to have it). Any idea what else we can try to resolve this? THanks for any help!"}
{"project_id": "Alacritty", "bug_id": "310", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: RegexSearch fails if line wraps at full width character\n\nDescription:\nIf a line wraps at a full width character, search fails:\n\nDiscussion:\nI'm surprised this was working for fullwidth characters wrapping into fullwidth characters, which is likely why it wasn't noticed before. #8587 should fix it, hopefully without introducing any other fullwidth regressions."}
{"project_id": "Alacritty", "bug_id": "311", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Spamming the ascii bell character freezes alacritty when a bell command is set\n\nDescription:\nUsing the following configuration file: Executing the following command completely freezes alacritty until 8 seconds have passed on my system: The following command will freeze it indefinitely, such that alacritty has to be forcibly killed: While these seem like constructed examples, this is particularly annoying when accidentally outputting binary data to the terminal. E.g. executing will take over a minute for alacritty to finally respond again on my system. I think, the best way to fix this would be to somehow throttle bell command spawning, e. g. by a cooldown. Iâ€™m using Alacritty 0.15.1 within Arch Linux under Wayland (sway).\n\nDiscussion:\n> I think, the best way to fix this would be to somehow throttle bell command spawning, e. g. by a cooldown. Yeah that makes sense."}
