{"project_id": "Alacritty", "bug_id": "130", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: ANSI SGRs after an unknown SGR are incorrectly ignored\n[Symptom]:\nAn escape sequence like this:\r\nESC[31;10;44mHelloESC[0m\r\n... will render incorrectly with a red foreground and black background, instead of a red foreground and blue background.\r\nIt's because of this block in ansi.rs, in vte::Perform:\r\n\r\n            ('m', None) => {\r\n                if args.is_empty() {\r\n                    handler.terminal_attribute(Attr::Reset);\r\n                } else {\r\n                    for attr in attrs_from_sgr_parameters(args) {\r\n                        match attr {\r\n                            Some(attr) => handler.terminal_attribute(attr),\r\n                            None => {\r\n                                unhandled!();\r\n/* The \"return\" below causes all attributes after an unknown one to be ignored! */\r\n                                return;\r\n                            },\r\n                        }\r\n                    }\r\n                }\r\n            },\r\nBecause the return causes control to bail out without processing any further attributes.\r\nRemoving the return corrects the issue, but I don't know what else it may break.\n"}
{"project_id": "Alacritty", "bug_id": "203", "source_type": "github", "confidence": 0.75, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Mouse enabled hint only highlights first match\n[Symptom]:\nWith this simple hint:\r\n\r\n```yaml\r\nhints:\r\n  enabled:\r\n    - regex: foo\r\n      action: Select\r\n      mouse:\r\n        enabled: true\r\n```\r\n\r\nAnd the following text in the grid:\r\n\r\n```\r\nfoo foo\r\n```\r\n\r\nOnly  the first `foo` will be highlighted on mouseover.\r\n\r\nThis does not seem to be an issue for the keyboard hints.\n\n[Context/Logs]:\n- Huh, that's somewhat odd. This isn't an issue with the URL hint.\n- I stand corrected actually: It seems like multiple URLs do **not** work correctly in all cases. The only thing that works is multiple URLs found through sub-matching as a result of `post_processing`."}
{"project_id": "Alacritty", "bug_id": "236", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: CreateNewWindow on macos sometimes doesn't start shell correctly\n[Symptom]:\nFor bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\nI have my shell configured:\r\n```\r\nshell:\r\n  program: /bin/zsh\r\n  args:\r\n    - -l\r\n    - -c\r\n    - \"tmux attach || tmux\"\r\n```\r\n\r\nWhen I start alacritty, then immediately create a new window, the new window is a bare zsh shell, without tmux.\r\n\r\nIf I then close the second window and create another new one, it correctly runs tmux.\r\n\r\nSubsequent new windows seem to randomly either start tmux or not.\r\n\r\n### System\r\n\r\nOS: macos\r\nVersion: alacritty 0.10.0-dev (a1083d18)\r\nLinux/BSD: n/a\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\nFont/Terminal size: `alacritty -vv`\r\n```\nâž¤ alacritty -vv\r\nCreated log file at \"/var/folders/jz/_9dm9vt91dd5jfj40l_3r1dh0000gn/T/Alacritty-86003.log\"\r\n[2021-12-04 23:02:43.032512000] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/Users/joe/.config/alacritty/alacritty.yml\"\r\n[2021-12-04 23:02:43.033066000] [DEBUG] [alacritty] Using environment locale: en_US.UTF-8\r\n... [Log Snipped] ...\n[2021-12-04 23:02:43.165711000] [DEBUG] [alacritty_terminal] [Unhandled CSI] action='q', params=[0], intermediates=[62]\r\n[2021-12-04 23:02:43.175403000] [DEBUG] [alacritty_terminal] [Unhandled CSI] action='h', params=[7727], intermediates=[63]\n```\r\nKeyboard and bindings: `alacritty --print-events`\n\n[Context/Logs]:\n- That seems rather surprising.\r\n\r\nYou specifically mention macOS, but I'd assume that's just because you haven't tested any other OS?\r\n\r\n\r\nRandom as in there's no clear indicator of why this is? Or is there some form of pattern? Also I don't recall exactly, but if you increase logging I think it might list the full command spawned. Could you check if that prints more info? So using `-vvv`.\n- Correct!\r\n\r\n\r\nNo pattern as far as I can tell, except that the first invocation of `CreateNewWindow` never seems to start tmux.\r\n\r\nI tried `alacritty -vvv` but didn't see any output for the shell, here's the output (with annotation for when I called `CreateNewWindow`):\r\n\r\n```\n~ âž¤ alacritty -vvv\r\nCreated log file at \"/var/folders/jz/_9dm9vt91dd5jfj40l_3r1dh0000gn/T/Alacritty-10924.log\"\r\n[2021-12-09 21:23:42.142147000] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/Users/joe/.config/alacritty/alacritty.yml\"\r\n[2021-12-09 21:23:42.142648000] [DEBUG] [alacritty] Using environment locale: en_US.UTF-8\r\n... [Log Snipped] ...\n[2021-12-09 21:23:51.881763000] [TRACE] [alacritty_terminal] Setting keypad application mode\r\n[2021-12-09 21:23:51.882602000] [TRACE] [alacritty_terminal] Setting mode: BracketedPaste\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- Did a bit more digging. I think I can send a PR to fix the first issue.\r\n\r\nFor the second issue, I'm in way over my head. I tried the following diff to try to narrow down what's going on:\r\n\r\n```\ndiff --git a/alacritty/src/daemon.rs b/alacritty/src/daemon.rs\r\nindex 52f01bd4..5d1fc46e 100644\r\n--- a/alacritty/src/daemon.rs\r\n+++ b/alacritty/src/daemon.rs\r\n@@ -13,6 +13,8 @@ use std::os::windows::process::CommandExt;\r\n... [Log Snipped] ...\n             c if c   return Err(io::Error::last_os_error().into()),\r\n             s if s != size => return Err(Error::InvalidSize),\n```\r\n\r\nThe output looks like this:\r\n```\n# first CreateNewWindow\r\nFD: 9\r\nPID1: 46656\r\nPID2: 46656\r\ninfo: core::mem::maybe_uninit::MaybeUninit \r\n... [Log Snipped] ...\npidinfo_size: 0\r\nErr: Err(InvalidSize)\n```\r\n\r\nI don't understand why `master_fd()` changes between invocations, but I assume that's the root cause of the rest of the issues.\n- Sent a PR to fix the CLI option issue and opened a separate issue for the foreground working directory determination:\r\n[URL]"}
{"project_id": "Closure", "bug_id": "25", "source_type": "google", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Internet Explorer runtime error after compilation.\n[Symptom]:\nWhat steps will reproduce the problem? \nSee attached HTML file in IE6+ (does not work in IE8 unless Compatibility View is turned *on* for \r\nsome reason).\r\n\r\n What is the expected output? What do you see instead? \nExpected output is on the left-hand side of the page (it is generated by the raw source). Google \r\nClosure's output is on the right-hand side of the page.\r\n\r\n What version of the product are you using? On what operating system? \nI downloaded compiler-latest.zip today (Nov. 24, 2009, ~ 12:00 PM EST)\r\n\r\n Please provide any additional information below. \nThere is a variable called &quot;threshold&quot; which is used to generate an array of arrays in the attached \r\nHTML file. If it is a small number, IE seems to pass arrays into the sort method (sorting an array \r\nof arrays) by value like all other browsers do. But when threshold is large enough (on my \r\nmachine that happens around 250) IE starts passing the arrays in by value. Google Closure \r\ncompiler has changed my original source from making local copies to modifying the arguments \r\nbeing passed into the sort comparator ... but as a result of this IE behavior the Closure compiled \r\ncode breaks.\n\n[Context/Logs]:\n- So after looking into this some more, I've learned that arrays are always passed by reference, but that only \r\nmeans you can change attributes and individual items in an array. So for example:\r\n\r\nvar a = [1, 2, 3, 4];\r\nvar f = function(x){x = null;};\r\nf(a);\r\n// the value of a will remain [1, 2, 3, 4]\r\n// but if instead:\r\nvar g = function(x){x[0] = null;};\r\ng(a);\r\n// the value of a is now [null, 2, 3, 4]\r\n\r\nIn the attached example, the Google Closure compiled version is akin to the function f above, which means \r\nthat the value of the arrays should *not* be changing. In IE, if the threshold is set high enough, however, they \r\ndo indeed change. So the original report may not be accurate, but this is a real issue.\n- There is definitely something odd occurring here, running it under the debugger with \r\nIE7, it reports \"Number expected\".\r\n\r\nAdding a \"Debug.writeln(\"blah\")\" in the \"right\" spot and the problem goes away:\r\n    var g_test=function(f,c){\r\n        var g=[\"aaaaaa\",\"bbbbbb\"];\r\n        c=(function(a,b){\r\n          for(var d=[],e=0;e b)});\r\n        f.innerHTML=typeof c[0]+\" \"+c.join(\" --- \")\r\n     };\n- ... [Middle Discussions Snipped for Brevity] ...\n- Perhaps a @nocoalesce JSDoc tag?\n- fixed by r171"}
{"project_id": "Closure", "bug_id": "208", "source_type": "google", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: ProcessCommonJSModules module$exports failures when checkTypes enabled\n[Symptom]:\nIf you define a module (echo.js) as:\r\ndefine(function() { return {\r\n  echo: function(val) {\r\n    window.console.log(val);\r\n  }\r\n}});\r\n\r\nand an entry point* that does not define any new modules as:\r\nvar echo = require('echo');\r\necho.echo('hello world');\r\n\r\nand compile with:\r\njava -jar build/compiler.jar --formatting=PRETTY_PRINT --jscomp_error=checkTypes --compilation_level=SIMPLE_OPTIMIZATIONS --transform_amd_modules --process_common_js_modules --js=echo.js --js=echo-main.js --common_js_entry_module=echo-main.js\r\n\r\nYou get the error:\r\necho-main.js:1: ERROR - Property module$exports never defined on module$echo_main\r\n\r\nwhich is probably happening because of ProcessCommonJSModules#emitOptionalModuleExportsOverride is testing a property that doesn't exist. I can try to cook up a patch but it would probably fall back to using goog.isDef and there's probably a cleaner way :)\r\n\r\n\r\n\r\n\r\n*p.s what is the intended definition of entry points that do not define new modules. the following leaves a call to a require function:\r\nrequire(['echo'], function(echo) {\r\n  echo.echo('hello world');\r\n});\n\n[Context/Logs]:\n- This issue was closed by revision r1982."}
{"project_id": "Closure", "bug_id": "250", "source_type": "google", "confidence": 0.9, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Converting from an interface type to a constructor which @implements itself causes stack overflow.\n[Symptom]:\n// Options: --externs externs/es3.js --property_renaming OFF --variable_renaming OFF --jscomp_warning=checkTypes --js=t.js\r\n\r\n\r\n// File: t.js\r\n/**\r\n * @interface\r\n */\r\nvar OtherType = function() {}\r\n\r\n/**\r\n * @implements {MyType}\r\n * @constructor\r\n */\r\nvar MyType = function() {}\r\n\r\n/**\r\n * @type {MyType}\r\n */\r\nvar x = /** @type {!OtherType} */ (new Object());\r\n\r\nGet Infinite recursion in:\r\n\r\nPrototypeObjectType.isSubtype @ 350\r\n\r\nOptions:\r\n\r\n- prevent cycles in the inheritance/implements graph\r\n- detect cycles after they are created and exit compilation before any subsequent passes run\r\n- detect and remove cycles after they are created but before any subsequent passes run\r\n- make every subsequent pass robust against cycles in that graph\n\n[Context/Logs]:\n- Fixed at r2399"}
{"project_id": "Closure", "bug_id": "296", "source_type": "google", "confidence": 0.7, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Failure on attempted compression/obfuscation of attached JS file\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Open cmd line\r\n2. Execute java -jar closurecompiler.jar --warning_level QUIET --js_output_file jquery.tokenInput-1.6.1b.min.js --js jquery.tokenInput-1.6.1b.js\r\n\r\n What is the expected output? What do you see instead? \nError caused - see error.png\r\n\r\n What version of the product are you using? On what operating system? \nv20130823 on Win7-64bit\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Code review posted here when one of the other maintainers has a minute. it's a quick one.\r\n[URL]\n- This issue was closed by revision e966682f9040.\n- This issue was closed by revision e966682f9040."}
{"project_id": "Closure", "bug_id": "313", "source_type": "google", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: It takes nearly on hour to compile this file\n[Symptom]:\nWhat steps will reproduce the problem? \n1. wget [URL]\r\n2. time java -jar compiler.jar --compilation_level WHITESPACE_ONLY --js core.js --js_output_file painful-clojurescript-compilation-whitespace-manual.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI just expect it to take a reasonable amount of time to compile. Under a minute? Ironically, whitespace optimizations only takes the longest, but none of the optimizations take less than 45 minutes.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20131014\r\nBuilt on: 2013/10/15 09:45\r\n\r\nMacBook Air 2 GHz Intel Core i7\r\n8 GB 1600 Mhz DDR3\r\nIntel HD Graphics 4000 512 MB\r\nOS X 10.8.5 (12F45)\r\n\r\n Please provide any additional information below. \n\r\ncore.js is a file generated by clojurescript from [URL]\n\n[Context/Logs]:\n- try inserting some new lines. when i replace \",new\" with \",\\nnew\", compile times go down to about 3 sec.\n- I also posted a fix here\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 5917817198c1.\n- This issue was closed by revision 5917817198c1."}
{"project_id": "Csv", "bug_id": "97", "source_type": "jira", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Line number is not proper at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you provide a unit test to reproduce the problem please?\n- Please find the code and output below \n\n Code \n======= \npublic class TestCsv \n{ \n\tpublic static void main(String[] args) throws Exception \n\t{ \n\t\tString records = \"A,B,C,D\\r\\n\" \n\t\t\t\t+ \"a1,b1,c1,d1\\r\\n\" \n\t\t\t\t+ \"a2,b2,c2,d2\"; \n\n \t\tCSVParser parser = new CSVParser(new StringReader(records), CSVFormat.EXCEL.withHeader()); \n\t\tIterator&lt;CSVRecord&gt; recordIt = parser.iterator(); \n\n \t\twhile(recordIt.hasNext()) \n\t\t{\n\t\t\tSystem.out.println(parser.getCurrentLineNumber() + \" ==&gt; \" + recordIt.next());\n\t\t}\n\n \t\tparser.close(); \n\t} \n} \n\n Actual Output \n========== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n2 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ] \n\n Expected Output \n============== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n3 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ]\n- I have commit a pr at githubÂ [pr| [URL] , may somebody have review?\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "101", "source_type": "jira", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Line number is not proper at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you provide a unit test to reproduce the problem please?\n- Please find the code and output below \n\n Code \n======= \npublic class TestCsv \n{ \n\tpublic static void main(String[] args) throws Exception \n\t{ \n\t\tString records = \"A,B,C,D\\r\\n\" \n\t\t\t\t+ \"a1,b1,c1,d1\\r\\n\" \n\t\t\t\t+ \"a2,b2,c2,d2\"; \n\n \t\tCSVParser parser = new CSVParser(new StringReader(records), CSVFormat.EXCEL.withHeader()); \n\t\tIterator&lt;CSVRecord&gt; recordIt = parser.iterator(); \n\n \t\twhile(recordIt.hasNext()) \n\t\t{\n\t\t\tSystem.out.println(parser.getCurrentLineNumber() + \" ==&gt; \" + recordIt.next());\n\t\t}\n\n \t\tparser.close(); \n\t} \n} \n\n Actual Output \n========== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n2 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ] \n\n Expected Output \n============== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n3 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ]\n- I have commit a pr at githubÂ [pr| [URL] , may somebody have review?\n- In git master, please verify and close."}
{"project_id": "Electron", "bug_id": "77", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Preload scripts can run twice in the same process in different node environments\n[Symptom]:\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 3.x, 4.x, 5.x, 6.x\r\n* **Operating System:**\r\n  * All\r\n* **Last Known Working Electron version:**:\r\n  * 2.x\r\n\r\n### Expected Behavior\r\nWhen navigations occur, a new process should be created for the navigation.\r\n\r\n### Actual Behavior\r\nWhen a navigation occurs _during_ a preloads scripts execution the same process is re-used as Chromium does not think the navigation has been committed yet.  This causes a memory leak and all native node modules to break.\r\n\r\n### To Reproduce\r\nFiddle: [URL]\r\n\r\n### Screenshots\r\n[Image: image]\r\n\r\nAs you can see here there are three navigation loads, the second and the third one actually have the same process ID (and are running in the same process)\n\n[Context/Logs]:\n- @MarshallOfSound can you share more details? Why wasn't this an issue in Electron 2?\n- Merging into #18397 as the long term solution to this ðŸ‘"}
{"project_id": "Electron", "bug_id": "99", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: AudioWorklet hangs UI when `nodeIntegrationInWorker` is enabled\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 10.0.1\r\n  * 10.0.0-beta.10\r\n  * 9.2.1\r\n* **Operating System:**\r\n  * Windows 10 (2004)\r\n  * macOS 10.15.6\r\n* **Last Known Working Electron version:**\r\n  * 10.0.0-beta.9\r\n  * Issue is seen in 10.0.0-beta.10\r\n\r\n### Expected Behavior\r\nAudioWorklets can be created and destroyed multiple times while `nodeIntegrationInWorker` is enabled.\r\n\r\n### Actual Behavior\r\nAudioWorklet can only be created and destroyed once. Upon creating a second AudioWorklet, the UI hangs indefinitely.\r\n\r\n### To Reproduce\r\nElectron Fiddle: [URL]\r\n\r\n1. Load Audio Worklet examples directory: [URL]\r\n2. Open a demo and click start.\r\n3. Navigate back and return to the demos directory.\r\n4. Open another demo and click start.\r\n\r\nUI should no longer be responsive.\n\n[Context/Logs]:\n- I did a little investigating on this. I don't have it fully sussed out yet, but I'm about 2/3s of the way there.\r\n\r\nFirst off, [Link: the patch] that caused this regression -- which, was approved by a couple of people, including me :sweat_smile:  -- introduces a pretty nasty bug. What happens is the worker thread blocks while listening for events in the select() call in `NodeBindingsMac::PollEvents()`. [URL] contains a semantic change in `NodeBindings::WakeupEmbedThread()` -- previously, its behavior was \"wake up this object's embed thread.\" The new behavior is \"wake up the embed thread unless it's the worker thread. So, when the worker thread's NodeBindings destructor calls `WakeupEmbedThread()`, it's a no-op and the `select()` in `NodeBindingsMac::PollEvents()` never wakes up. This made the `uv_walk()` cash disappear -- *the worker thread never closes*, so the NodeBindings destructor never finishes destructing, and so `uv_walk()` is never reached. :tada: \r\n\r\nSince the threads never finish, we're leaking every resource associated with the NodeBindings object, including the thread, the uv loop, and so on.\r\n\r\nSo the next step is to undo that `NodeBindings::WakeupEmbedThread()` change and figure out where the crash is coming from. I think I have that step figured out and will update the ticket shortly with a PR.\n- I've got a partial fix up in #25332 \r\n\r\nThis PR wraps the `uv_async_t` objects owned by NodeBindings and ElectronBindings inside a new UvHandle wrapper class which ha\n...[Text Truncated]...\ne loop as a dangling pointer.\r\n\r\nThe UvHandle wrapper handles the close-delete twostep, fixing the `uv_walk()` crash seen in #22069 in a way that doesn't cause the #25248 regression and which fixes the threads we've been [Link: leaking]. This is all well and good; unfortunately, this now surfaces a second issue:\r\n\r\n```\n[85352:0904/174418.843359:ERROR:CONSOLE(1995)] \"Connection is closed, can't dispatch pending call\", source: devtools://devtools/bundled/sdk/sdk.js (1995)\r\n[85359:0904/174418.764382:FATAL:devtools_agent.mojom-blink.cc (http://devtools_agent.mojom-blink.cc)(270)] Check failed: !connected. DevToolsAgent::ReportChildWorkersCallback was destroyed without first either being run or its corresponding binding being closed. It is an error to drop response callbacks which still correspond to an open interface pipe.\r\n0   Electron Framework                    base::debug::CollectStackTrace(void**, unsigned long) + 9\r\n1   Electron Framework                    base::debug::StackTrace::StackTrace() + 19\r\n2   Electron Framework                    logging::LogMessage::~LogMessage() + 261\r\n... [Log Snipped] ...\n17  Electron Framework                    mojo::MessageDispatcher::Accept(mojo::Message*) + 251\r\n18  Electron Framework                    mojo::Connector::DispatchMessage(mojo::Message) + 470\n```\r\n\r\nThis error message looks straightfoward enough, but I haven't started to track it down yet.\n- This should be closed by a combination of [URL] and the polling PR i just merged!"}
{"project_id": "Electron", "bug_id": "101", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Memory leak when passing IPC events over contextBridge\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: X] I have read the [Contributing Guidelines] for this project.\r\n* [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [X] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 11.1.0 and 9.3.5\r\n* **Operating System:**\r\n  * Windows 10 2004\r\n* **Last Known Working Electron version:**\r\n  * NA\r\n\r\n### Expected Behavior\r\nuse of webContents.send + ipcRenderer.on cleans up memory after use\r\n\r\n### Actual Behavior\r\n\r\nIn a real-world case, I have a renderer for the UI and a separate browserWindow for an audio process. The audio process monitors audio devices and reports the current volume of all devices via ipcRenderer.send (through preload contextBridge to the main process). The main process then sends this volume data over to the main UI renderer via webContents.send whereas the UI renderer listens via ipcRenderer.on (via preload contextBridge). This happens about once every 100 milliseconds. Memory use of the electron app, especially the renderer, slowly climbs to theoretical Infinitum. The starting memory is about 350MB. Within about a day, it's up to 1,500MB.\r\n\r\nIt does not matter what kind of content is passed through as arguments, nor its size (garbage collector seems to work on arguments). What matters is how often / frequently webContents.send is called and if there is an ipcRenderer.on listener for it (memory leak still exists even if there is nothing in the listener function so long as the listener exists).\r\n\r\n### To Reproduce\r\n\r\nElectron fiddle with a very simple example calling webContents.send every millisecond (to make the test quick... but the issue exists if you do every 100 milliseconds too but is much slower) and sending a Math.random() random number to the renderer. Memory use will increase over the course of a few minutes. I tested with a 10,000-item map as an argument as well, which made \n...[Description Truncated]...\n\n[Context/Logs]:\n- Hm, I can't reproduce this on macOS. Memory usage is hovering steadily around 130â€“140mb.\r\n\r\nSlightly modified gist including memory logging: [URL]\n- @nornagon I used the fiddle you have. process.memoryUsage is not catching the leak as it seems to be happening in the renderer process.\r\n\r\n[Image: image]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Lovinity expose specific methods that your app needs, instead of allowing the app to listen to any IPC message.\n- I've updated the gist at [URL] to simplify it somewhat. It now doesn't need any interaction with IPC or events. This is enough to trigger the leak:\r\n\r\n```\njs\r\n// preload.js\r\nlet g_fn = null\r\n\r\ncontextBridge.exposeInMainWorld(\"test\", {\r\n... [Log Snipped] ...\n// renderer.js\r\nwindow.test.on(() => {});\n```\r\n\r\nJust sending a function back over the bridge results in leaks."}
{"project_id": "Redis", "bug_id": "10", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: \"BITOP command 10x speed improvement\" commit causes crash\n[Symptom]:\nBitop-code is exactly what I need, so I've started testing with it. \n\nCurrently that 10x speed up has some special cases that throws \nexception for me again and again. Before that commit \neverything seem to work correctly.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[4700] 31 May 16:52:37.235 #     Redis 2.5.9 crashed by signal: 11\n[4700] 31 May 16:52:37.235 #     Failed assertion:   ( :0)\n[4700] 31 May 16:52:37.235 # --- STACK TRACE\n/usr/local/bin/redis-server(logStackTrace+0x75)[ ]\n/usr/local/bin/redis-server(bitopCommand+0x654)[ ]\n/lib64/libpthread.so.0(+ )[ ]\n/usr/local/bin/redis-server(bitopCommand+0x654)[ ]\n/usr/local/bin/redis-server(call+0x5d)[ ]\n/usr/local/bin/redis-server(processCommand+0x375)[ ]\n/usr/local/bin/redis-server(processInputBuffer+0x4f)[ ]\n/usr/local/bin/redis-server(readQueryFromClient+0xa0)[ ]\n/usr/local/bin/redis-server(aeProcessEvents+0x124)[ ]\n/usr/local/bin/redis-server(aeMain+0x2b)[ ]\n/usr/local/bin/redis-server(main+0x2a2)[ ]\n/lib64/libc.so.6(__libc_start_main+0xfd)[ ]\n/usr/local/bin/redis-server[ ]\n[4700] 31 May 16:52:37.236 # --- INFO OUTPUT\n[4700] 31 May 16:52:37.236 # # Server\nredis_version:2.5.9\nredis_git_sha1:473f3090\nredis_git_dirty:1\nos:Linux 2.6.32-220.7.1.el6.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.4.6\nprocess_id:4700\nrun_id: \ntcp_port:6379\nuptime_in_seconds:1367\nuptime_in_days:0\nlru_clock:1726659\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:882120\nused_memory_human:861.45K\nused_memory_rss:7729152\nused_memory_peak:1134552\nused_memory_peak_human:1.08M\nused_memory_lua:30720\nmem_fragmentation_ratio:8.76\nmem_allocator:jemalloc-3.0.0\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:383\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1338472083\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:0\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_ti\n...[Description Truncated]...\n\n[Context/Logs]:\n- Thanks, looking into it ASAP. Do you have perhaps a way to simply replicate it? Thanks.\n- flushdb\nset a \"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"\nbitop or x a b\n- Awesome, I can reproduce it, so it will be trivial to fix ASAP. Thanks.\n- Fixed, thanks!"}
{"project_id": "Redis", "bug_id": "11", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Crash in Redis 2.6 RC4 converting an hash value.\n[Symptom]:\nAs received from Marty Weiner from Pinterest.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[10845] 09 Jun 04:42:08.251 # === ASSERTION FAILED ===\n[10845] 09 Jun 04:42:08.251 # ==> t_hash.c:406 'ret == DICT_OK' is not true\n[10845] 09 Jun 04:42:08.251 # (forcing SIGSEGV to print the bug report.)\n[10845] 09 Jun 04:42:08.251 #     Redis 2.5.10 crashed by signal: 11\n[10845] 09 Jun 04:42:08.251 #     Failed assertion: ret == DICT_OK (t_hash.c:406)\n[10845] 09 Jun 04:42:08.252 # --- STACK TRACE\n/usr/bin/redis-server(logStackTrace+0x52)[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/usr/bin/redis-server(hashTypeConvertZiplist+0xe0)[ ]\n/usr/bin/redis-server(hsetCommand+0x34)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(luaRedisGenericCommand+0x25a)[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server(lua_pcall+0x4f)[ ]\n/usr/bin/redis-server(evalGenericCommand+0x1fc)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(processCommand+0x375)[ ]\n/usr/bin/redis-server(processInputBuffer+0x4f)[ ]\n/usr/bin/redis-server(readQueryFromClient+0xa0)[ ]\n/usr/bin/redis-server(aeProcessEvents+0x136)[ ]\n/usr/bin/redis-server(aeMain+0x2b)[ ]\n/usr/bin/redis-server(main+0x2a3)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xff)[ ]\n/usr/bin/redis-server[ ]\n[10845] 09 Jun 04:42:08.253 # --- INFO OUTPUT\n[10845] 09 Jun 04:42:08.256 # # Server\nredis_version:2.5.10\nredis_git_sha1:1a3e9d95\nredis_git_dirty:0\nos:Linux 2.6.38-14-virtual x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.5.2\nprocess_id:10845\nrun_id: \ntcp_port:6381\nuptime_in_seconds:14583\nuptime_in_days:0\nlru_clock:1801116\n# Clients\n\nconnected_clients:2255\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:1632648896\nused_memory_human:1.52G\nused_memory_rss\n...[Description Truncated]...\n\n[Context/Logs]:\n- As a first step I added a new test in commit c0de459 to stress test the ziplist -> hash conversion. So far the test is passing without problems. I'm going to further analyze the bug today.\n\nSince the original posters of this bug saw it multiple times probably it's a good idea to distribute a modified version of Redis that can provide more information when this assert fails.\n- I walked the dictAdd code and haven't found any holes, even around encoding + rehashing occurring concurrently.  \n\nI'm now wondering if the ziplist version of my hashtable has duplicates in it.  RDB load has no protection, nor does save, so if one creeps in I dont think I'd notice until an expansion.  I'm thinking of adding a verification pass that can be switched on during load to watch for duplicates.\n- ... [Middle Discussions Snipped for Brevity] ...\n- redis  :6379[2]> hgetall 17661039738895\n  1) \"947\"\n  2) \", , ,\"\n  3) \"867\"\n  4) \", , ,\"\n  5) \"588\"\n  6) \", , ,\"\n  7) \"52\"\n  8) \", , ,\"\n  9) \"53\"\n 10) \", ,\"\n 11) \"110\"\n 12) \", ,\"\n 13) \"310\"\n 14) \", , , , , , , , , , ,\"\n 15) \"311\"\n 16) \", ,\"\n 17) \"151\"\n 18) \", ,\"\n 19) \"314\"\n 20) \", , , ,\"\n 21) \"9\"\n 22) \", ,\"\n 23) \"435\"\n 24) \", , , , , , , , , , , , , , , ,\"\n 25) \"912\"\n 26) \", ,\"\n 27) \"193\"\n 28) \", ,\"\n 29) \"436\"\n 30) \", , , , , , , , , ,\"\n 31) \"473\"\n 32) \", ,\"\n 33) \"439\"\n 34) \", , ,\"\n 35) \"196\"\n 36) \", , , ,\"\n 37) \"277\"\n 38) \", ,\"\n 39) \"639\"\n 40) \", , ,\"\n 41) \"396\"\n 42) \", , , , ,\"\n 43) \"837\"\n 44) \", , ,\"\n 45) \"397\"\n 46) \", , , , , , ,\"\n 47) \"991\"\n 48) \", \n...[Text Truncated]...\n\", ,\"\n191) \"701\"\n192) \", , ,\"\n193) \"143\"\n194) \", ,\"\n195) \"306\"\n196) \", ,\"\n197) \"621\"\n198) \", , , , , ,\"\n199) \"145\"\n200) \", ,\"\n201) \"146\"\n202) \", ,\"\n203) \"382\"\n204) \", ,\"\n205) \"708\"\n206) \", ,\"\n207) \"862\"\n208) \", ,\"\n209) \"549\"\n210) \", ,\"\n211) \"710\"\n212) \", ,\"\n213) \"967\"\n214) \", , , , , ,\"\n215) \"496\"\n216) \", ,\"\n217) \"497\"\n218) \", ,\"\n219) \"978\"\n220) \", ,\"\n221) \"83\"\n222) \", ,\"\n223) \"85\"\n224) \", ,\"\n225) \"87\"\n226) \", ,\"\n227) \"88\"\n228) \", ,\"\n229) \"421\"\n230) \", ,\"\n231) \"422\"\n232) \", ,\"\n233) \"900\"\n234) \", ,\"\n235) \"109\"\n236) \", ,\"\n237) \"505\"\n238) \", ,\"\n239) \"424\"\n240) \", , ,\"\n241) \"507\"\n242) \", ,\"\n243) \"903\"\n244) \", ,\"\n245) \"426\"\n246) \", ,\"\n247) \"427\"\n248) \", , ,\"\n249) \"823\"\n250) \", ,\"\n251) \"508\"\n252) \", ,\"\n253) \"904\"\n254) \", , ,\"\n255) \"583\"\n256) \", , , , , , ,\"\n257) \"909\"\n258) \", ,\"\n259) \"585\"\n260) \", , , ,\"\n261) \"1011\"\n262) \", , ,\"\n- @martaaay the core is big news! Thanks. No macros to walk the ziplist unfortunately, you may use RESTORE (but you have to fake the CRC64 checksum) in order to re-create the value into a live instance, btw if you can send me an hex-dump of the ziplist I'll happily check the format.\n\nAnother option is to take the hexdump, write a small C program to inject it inside an array of bytes, and then directly use the ziplist API to walk values.\n\nBtw this is a big step forward! Only problem I think we'll have is that we'll need to understand after we get what value is duplicated how it ended there, but should be simple to reproduce once we have the duplicated value."}
{"project_id": "Redis", "bug_id": "19", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: [2.9.102] Assertion failed: cluster.c:4641 'n != NULL' is not true\n[Symptom]:\nThis happened upon issuing a manual CLUSTER FAILOVER to the slave. It was the former master where the error occured, the slave is fine and the cluster check reports okay, so hooray for that :)\n\nThis was during a test setup with a client molesting the cluster with a number of SET/MGET. Before the manual failover the cluster looked like this:\n\n```\nConnecting to node  :7001: OK\nConnecting to node  :7003: OK\nConnecting to node  :7002: OK\nConnecting to node  :7004: OK\n... [Log Snipped] ...\n[OK] All 16384 slots covered.\n```\n\nAnd after the manual failover (and crash of node  ) it looked like this:\n\n```\nConnecting to node  :7002: OK\nConnecting to node  :7001: OK\nConnecting to node  :7004: OK\nM:    :7002\n... [Log Snipped] ...\n[OK] All 16384 slots covered.\n```\n\nCrash report:\n\n```\n21402:M 15 Jan 10:23:36.048 # Manual failover requested by slave  .\n21402:M 15 Jan 10:23:36.203 # Failover auth granted to   for epoch 9\n21402:M 15 Jan 10:23:36.204 # Configuration change detected. Reconfiguring myself as a replica of  \n21402:S 15 Jan 10:23:36.204 # Connection with slave  :7004 lost.\n21402:S 15 Jan 10:23:36.204 # \n... [Log Snipped] ...\n21402:S 15 Jan 10:23:36.404 # \n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n```\n\nThe test script was very simple:\n\n```\nfrom rediscluster.client import RedisCluster\nfrom time import time\n\nstartup_nodes = [\n    {'host': ' ', 'port': '7002'},\n... [Log Snipped] ...\n    duration = time() - t\n    print len(l), \"%f ms\" % (duration * 1000.0)\n```\n\n[Context/Logs]:\n- Hello, thank you for reporting. Checking the code, it makes sense it crashes like that in certain edge conditions. The code pretends that we never dispatch commands if the cluster is logically down (one or more slots uncovered), but this is not the case. The fix will be the same anyway (since handling this in getNodeByQuery() will prevent the next bug similar to that), however I also want to check the exact conditions that trigger it in order to also trap it before, but I've an idea about what the state is. Fixing tomorrow morning CEST giving priority over the doc writing effort, and releasing a new RC. However this is not very critical (it is in the effects, but not conceptually), so the stable release will not be delayed.\n- @ingmar checking the issue I see this happened with Redis 3.0.0-rc2, please note that rc3 fixed several critical bugs so you are likely to run into strange consistency issues in the CLUSTER NODES output and other crashes. This issue itself may be due to the same set of bugs, however whatever this is the case or not, the issue posted contains an hit about an implementation fragility that should be fixed :-)\n- Problem fixed, a few notes:\n1. It's not 100% clear to me, in this exact setup, how the hash slots were unbound. As a result of the configuration update received from the (old) slave I expected the master to have all the hash slots still covered. Maybe it's due to the many RC2 serious memory bugs, fixed by RC3.\n2. Anyway the getNodeByQuery() implementation was fragile. It's not a good idea to assert for `node != NULL`, and in general, to the fact that the cluster state is atomically updated.\n3. And... indeed the cluster state is _not_ atomically updated, so there was a bug here regardless of what exactly caused this instance of the bug. The cluster state is updated in `clusterBeforeSleep()` in a lazy way.\n4. Moreover the `clusterBeforeSleep()` call was misplaced at the end of the chain of the `beforeSleep()` call in `redis.c`. It should be at the top, before processing un blocking clients. This is exactly the reason in the specific instance of the bug as reported, why the state was not updated in time before clients served.\n\nReleasing RC5 in a second. Thank you for reporting!"}
{"project_id": "Redis", "bug_id": "21", "source_type": "github", "confidence": 0.95, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: GEORADIUS returns the same key twice on Redis 3.1.999\n[Symptom]:\n# The bug\n\nA `GEORADIUS` query returns the same key twice. Since `GEORADIUS` [Link: is defined as]:\n\nI assume that having a duplicate in the set is an erroneous behaviour. \n# Steps to reproduce on `redis-cli`\n\n```\n :6379[1]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 1\n :6379[1]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 0\n :6379[1]> GEORADIUS users 0 0 50000 km WITHCOORD\n... [Log Snipped] ...\n   2) 1) \"-47.271613776683807\"\n      2) \"-54.534504198047678\"\n```\n# Notes\n## Adding the key multiple times\n\nAdding the same key more than twice seems to add the key only twice:\n\n```\n :6379[2]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 1\n :6379[2]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 0\n :6379[2]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n... [Log Snipped] ...\n   2) 1) \"-47.271613776683807\"\n      2) \"-54.534504198047678\"\n```\n## Other coordinates\n\nThe bug was not reproduced with other coordinates, e.g.:\n\n```\n :6379[2]> GEOADD users 10 10 'x'\n(integer) 1\n :6379[2]> GEORADIUS users 10 10 500 km WITHCOORD\n1) 1) \"x\"\n   2) 1) \"10.000002086162567\"\n... [Log Snipped] ...\n   2) 1) \"10.000002086162567\"\n      2) \"10.00000092823273\"\n```\n# INFO\n\n```\n :6379[2]> INFO\n# Server\nredis_version:3.1.999\nredis_git_sha1:00000000\nredis_git_dirty:0\n... [Log Snipped] ...\ndb1:keys=1,expires=0,avg_ttl=0\ndb2:keys=1,expires=0,avg_ttl=0\n```\n\n[Context/Logs]:\n- Thanks for reporting, actually you can use a single `GEOADD` command and yet the item will be reported twice. It is a bug with the GEORADIUS implementation and not with the underlying sorted set data structure. I'll fix this tomorrow hopefully.\n- In this specific case the problem is due to the fact that the neighbors squares calculated for north_west and south_west are the same, due probably to the huge radius used. It's a corner case which should be pretty easy to fix AFAIK.\n- Fixed, thanks for reporting."}
{"project_id": "Redis", "bug_id": "24", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Bugs introduced in variadic MIGRATE on errors\n[Symptom]:\nIn looking through the latest commits to the MIGRATE command to make it variadic, Iâ€™ve noticed some problems and am not clear about the expected behavior in error scenarios.\n\n[URL]\n\nFirst, the new lists allocated on 4603 and 4604 are not freed under all error scenarios, for example on lines 4639, 4645, 4647, 4674, leading to memory leaks. Similarly for newargv allocated on 4748 â€“ it is not freed in the socket_err case.\n\nMore concerning, however, is the undefined behavior of migrating multiple keys where they are not all acknowledged by the receiver. In the loop on 4750, we will retry the entire command in some cases on socket errors. This is after we have potentially already queued a reply to the client with an error and potentially already deleted some of the keys from the source. If we retry (or even if we fail out) we never translate the command to a DEL to propagate what has been deleted to the replication/AOF stream. When we retry, if weâ€™ve already deleted the item from the database, we're referencing invalid values, as well as doubly refcounting keys, etc.\n\nFor example, if I issue a MIGRATE dst port â€œâ€ db timeout REPLACE KEY1 KEY2 KEY3 KEY4, we will send a RESTORE command for each of the four keys. Assume we process KEY1 and KEY2 appropriately, and delete them from the database. Letâ€™s say we have trouble reading the response for KEY3 from the socket. Weâ€™ll possibly retry the command (going to try_again mark). We will again try to RESTORE all four keys to the destination. Meanwhile, the values corresponding to KEY1 and KEY2 have been freed.  If weâ€™re able to get successful responses, weâ€™ll try to delete the keys again (L4764). L4770 will increase the refcount of KEY1 and KEY2 a second time, which will result in the key being incorrectly refcounted twice and never freed.\n\nCould you take a look at the error handling here and clarify the expected behavior?\n\n[Context/Logs]:\n- Hello, thank you, this is very helpful. I'll write a complete report as a first thing I do after the weekend (during the weekend if I'll find some time).\n- My comments:\n1. There is no leak on line 4639, just because when KEYS is given, no other arguments are parsed, all the rest is considered to be key names. However that's not the case for the other points where there is an actual leak. All instances of the leak fixed.\n2. The `newargv` leaks should be only on socket errors apparently (as you noted in your comment), since it's otherwise freed by passing the pointer to `replaceClientCommandVector` that takes ownership, or it gets freed. Fixed as well. Now the variable is declared at the top of the function and immediately initialized to NULL so that freeing it if not allocated is not an issue anyway.\n3. About the command retry, it was a totally mess, one of the worse pieces of code I ever wrote... Redesigning it with more obvious semantics, almost finished,  news ASAP in this issue.\n\nThanks for your help!\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello again, I did an auditing of the new function, I can't find other errors, but modified the code a bit more in order to handle the cleanup of `newargv` in a single place.\n\nIt looks like a trivial way to simplify the function a lot more is to write it as a non retrying version, and wrap it into another function that will retry depending on the returned error. Probably not worth it right now since this is going to be back ported in all the production versions of Redis, and new code is always dangerous... :-)\n- It looks good to me now.  Thanks for the quick resolution!  Feel free to resolve this issue."}
{"project_id": "Redis", "bug_id": "28", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Lua script multi-element LPUSH / BRPOPLPUSH replication bug\n[Symptom]:\nI noticed a replication bug while attempting to use Redis as a reliable queue with a Lua script pushing multiple elements onto the queue. It appears the wrong number of RPOP operations are sent to the slave instance, resulting in the queue on the slave growing unbounded, out of sync with master.\n\nI created an example repo to demonstrate this behavior:\n\n[URL]\n\nThis affects Redis 2.5.12 (and 2.5.11, likely early versions as well).\n\n[Context/Logs]:\n- Thank you for reporting, I'll fix it in the next days and report back.\n- @antirez any updates?\n- Hello, this issue is finally fixed in the unstable and 2.6 branch. An almost complete reimplementation of blocking operations was required in order to fix this issue, the details are documented in the commit message. Thanks for reporting! Closing."}
{"project_id": "Redis", "bug_id": "31", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: MEMORY USAGE   crashes\n[Symptom]:\nmemory usage on custom type crashes redis.\r\n\r\nredis crash output: \r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n9197:M 25 Nov 15:44:22.529 # ------------------------------------------------\r\n9197:M 25 Nov 15:44:22.529 # !!! Software Failure. Press left mouse button to continue\r\n9197:M 25 Nov 15:44:22.529 # Guru Meditation: \"Unknown object type\" #object.c:790\r\n9197:M 25 Nov 15:44:22.529 # (forcing SIGSEGV in order to print the stack trace)\r\n9197:M 25 Nov 15:44:22.529 # ------------------------------------------------\r\n9197:M 25 Nov 15:44:22.529 # Redis 999.999.999 crashed by signal: 11\r\n9197:M 25 Nov 15:44:22.529 # Crashed running the instuction at:  \r\n9197:M 25 Nov 15:44:22.529 # Accessing address:  \r\n9197:M 25 Nov 15:44:22.529 # Failed assertion:   ( :0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(_serverPanic+0x7a)[ ]\r\n\r\nBacktrace:\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(logStackTrace+0x29)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(sigsegvHandler+0xac)[ ]\r\n/lib64/libpthread.so.0(+ )[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(_serverPanic+0x7a)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(objectComputeSize+0x663)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(memoryCommand+0x3f9)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(call+0x9e)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(processCommand+0x367)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(processInputBuffer+0x105)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(aeProcessEvents+0x218)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(aeMain+0x2b)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(main+0x41d)[ ]\r\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379[ ]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_ver\n...[Description Truncated]...\n"}
{"project_id": "Redis", "bug_id": "33", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: Redis 4.x lazyfree: memory leak may happen when free slowlog entry\n[Symptom]:\nHi,\r\n\r\nLazyfree is an amazing feature, redis can delete keys in background without blocking, but I just find a problem which can lead to memory leak.\r\n\r\nWe just use `sds` instead of `robj` to store fields for `OBJ_HASH`, `OBJ_SET`, `OBJ_ZSET`, `OBJ_LIST`. But for `OBJ_STRING` the value is still `robj`, it may be shared with others, e.t. slowlog entry:\r\n```\nslowlog.c\r\nslowlogEntry *slowlogCreateEntry(client *c, robj **argv, int argc, long long duration) {\r\n    ...\r\n            /* Trim too long strings as well... */\r\n            if (argv[j]->type == OBJ_STRING &&\r\n... [Log Snipped] ...\n    ...\r\n}\n```\r\nOops, if `sdslen` is smaller than SLOWLOG_ENTRY_MAX_STRING, an `slowlogEntry` just point to the same object and incr the refcount.\r\n\r\nI just did an experiment:\r\n```\r\n :6379> config set slowlog-log-slower-than 1\r\nOK\r\n :6379> set foo bar\r\nOK\r\n :6379> object refcount foo\r\n(integer) 2\r\n```\r\nThe refcount is 2 now, that is dangerous! Memory leak may happen, let me explain step by step:\r\n\r\n1. Do `FLUSHALL ASYNC` or `UNLINK` \r\n\r\n\r\n    Now, the bio `lazyfree` thread holds the value `bar`, but we don't know when it really call `decrRefCount()`.\r\n\r\n2. Do `SLOWLOG reset`\r\n\r\n    Now the `slowlogEntry` which point to the value `bar` will be freed by `decrRefCount()`, if `lazyfree` thread call `decrRefCount()` at the same time, memory leak appears:\r\n\r\n    ```\nvoid decrRefCount(robj *o) {\r\n        if (o->refcount == 1) {\r\n            switch(o->type) {\r\n            case OBJ_STRING: freeStringObject(o); break;\r\n            case OBJ_LIST: freeListObject(o); break;\r\n... [Log Snipped] ...\n        }\r\n    }\n```\r\n\r\n\r\nI just do a little change to fix it, see #4324, do you think it is ok? Or make a big change for all STRING commands is necessary?\n\n[Context/Logs]:\n- That's a very interesting finding @soloestoy! I never thought that string objects could be reclaimed in the background, because normally UNLINK will never do that since for non-aggregate objects, the deletion actually happens synchronously (because of the deallcation effort being 1). However as you noted FLUSHALL ASYNC changes the game here... Your fix seems sensible to me, but now what I'm worried about, is if there are other places where the object can end being shared. The client `argv` vector should be safe since, as soon as the command is executed and the object shared, the client argument vectors gets reset before any other client could call FLUSHALL. Did you tried to analyze other scenarios where this could happen? Thanks.\n- I have checked scenarios about `multi.c` and `script.c`, I think they are safe and will do my best to analyze other scenarios.\n- Thanks @soloestoy, maybe we can later identify some place where an assert() could be added to verify that refcount == 1.\n- Fix merged, comment clarified. Good work ðŸ‘"}
{"project_id": "Redis", "bug_id": "39", "source_type": "github", "confidence": 0.7, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: 3.2.1 crash when as slave node sync with master\n[Symptom]:\nlog as below:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n27648:S 24 Jun 12:16:32.265 # Redis 3.2.1 crashed by signal: 11\n27648:S 24 Jun 12:16:32.265 # Crashed running the instuction at:  \n27648:S 24 Jun 12:16:32.265 # Accessing address:  \n27648:S 24 Jun 12:16:32.265 # Failed assertion:   ( :0)\n\n------ STACK TRACE ------\nEIP:\n./redis-server *:6400 [cluster][ ]\n\nBacktrace:\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libpthread.so.0(+ )[ ]\n./redis-server *:6400 [cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\n./redis-server *:6400 [cluster][ ]\n\n------ INFO OUTPUT ------\n# Server\n\nredis_version:3.2.1\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:cluster\nos:Linux 3.10.0-123.el7.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.8.3\nprocess_id:27648\nrun_id: \ntcp_port:6400\nuptime_in_seconds:329\nuptime_in_days:0\nhz:10\nlru_clock:7124000\nexecutable:/home/redis/redis-3.2.1/src/./redis-server\nconfig_file:/home/redis/redis-3.2.1/redis.conf\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:14962\nblocked_clients:0\n# Memory\n\nused_memory:2989199160\nused_memory_human:2.78G\nused_memory_rss:3073859584\nused_memory_rss_human:2.86G\nused_memory_peak:2989199160\nused_memory_peak_human:2.78G\ntotal_system_memory:16609554432\ntotal_system_memory_human:15.47G\nused_memory_lua:37888\nused_memory_lua_human:37.00K\nmaxmemory:0\nmaxmemory_human:0B\nmaxmemory_policy:noeviction\nmem_fragmentation_ratio:1.03\nmem_allocator:jemalloc-4.0.3\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:14\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1466741463\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, unfortunately the binary is stripped so there are no symbols to understand exactly where this happened. Please could you send the Redis binary you are using? Thanks.\n\nThis bug could actually be in different places:\n1. Cluster\n2. Replication\n3. List data type implementation, that with quicklists, changed recently (in 3.2)\n\nThe binary can give us some clue.\n- [Image: redis-server]\n@antirez ,give this binary file and I have to modify file name to *.jpg for upload to git.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I put my money on `ziplistMerge()`. Will check carefully monday.\n- @luweijie007 please could you tell me all the list commands you use in the master in order to populate the list? Thanks."}
{"project_id": "Redis", "bug_id": "41", "source_type": "github", "confidence": 0.7, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: 3.2.1 crash when as slave node sync with master\n[Symptom]:\nlog as below:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n27648:S 24 Jun 12:16:32.265 # Redis 3.2.1 crashed by signal: 11\n27648:S 24 Jun 12:16:32.265 # Crashed running the instuction at:  \n27648:S 24 Jun 12:16:32.265 # Accessing address:  \n27648:S 24 Jun 12:16:32.265 # Failed assertion:   ( :0)\n\n------ STACK TRACE ------\nEIP:\n./redis-server *:6400 [cluster][ ]\n\nBacktrace:\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libpthread.so.0(+ )[ ]\n./redis-server *:6400 [cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\n./redis-server *:6400 [cluster][ ]\n\n------ INFO OUTPUT ------\n# Server\n\nredis_version:3.2.1\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:cluster\nos:Linux 3.10.0-123.el7.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.8.3\nprocess_id:27648\nrun_id: \ntcp_port:6400\nuptime_in_seconds:329\nuptime_in_days:0\nhz:10\nlru_clock:7124000\nexecutable:/home/redis/redis-3.2.1/src/./redis-server\nconfig_file:/home/redis/redis-3.2.1/redis.conf\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:14962\nblocked_clients:0\n# Memory\n\nused_memory:2989199160\nused_memory_human:2.78G\nused_memory_rss:3073859584\nused_memory_rss_human:2.86G\nused_memory_peak:2989199160\nused_memory_peak_human:2.78G\ntotal_system_memory:16609554432\ntotal_system_memory_human:15.47G\nused_memory_lua:37888\nused_memory_lua_human:37.00K\nmaxmemory:0\nmaxmemory_human:0B\nmaxmemory_policy:noeviction\nmem_fragmentation_ratio:1.03\nmem_allocator:jemalloc-4.0.3\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:14\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1466741463\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, unfortunately the binary is stripped so there are no symbols to understand exactly where this happened. Please could you send the Redis binary you are using? Thanks.\n\nThis bug could actually be in different places:\n1. Cluster\n2. Replication\n3. List data type implementation, that with quicklists, changed recently (in 3.2)\n\nThe binary can give us some clue.\n- [Image: redis-server]\n@antirez ,give this binary file and I have to modify file name to *.jpg for upload to git.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I put my money on `ziplistMerge()`. Will check carefully monday.\n- @luweijie007 please could you tell me all the list commands you use in the master in order to populate the list? Thanks."}
{"project_id": "Redis", "bug_id": "43", "source_type": "github", "confidence": 0.85, "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "[Title]: EVAL replicated + conditionals about key existence = replication bug.\n[Symptom]:\nLua scripts may contain conditionals in order to run or not commands depending on the existence or not of keys. For example let's examine the following Lua script:\n\n```\nif redis.call(\"exists\",KEYS[1]) == 1\nthen\n    redis.call(\"incr\",\"mycounter\")\nend\n\n... [Log Snipped] ...\n    return redis.call(\"incr\",\"mycounter\")\nend\n```\n\nThe script executes two times the same _if key exists then increment counter_ logic. However the two executions will work differently in the master and the slaves.\n\nIn the master the first time the key may still exist, while the second time the key may no longer exist. This will result in the key incremented just one time. However as a side effect the master will generate a synthetic `DEL` command in the replication channel in order to force the slaves to expire the key (given that key expiration is master-driven).\n\nWhen the same script will run in the slave, the key will no longer be there, so the script will not increment the key.\n\nI reproduced the bug using the above Lua script and the following bash script:\n\n```\n#!/bin/bash\nwhile [ 1 ]\ndo\n    redis-cli set x foo px 100 > /dev/null\n    sleep 0.092\n... [Log Snipped] ...\n    redis-cli -p 6380 get mycounter\ndone\n```\n\nAfter a few iterations the two counters will desynchronized.\n## Proposed fix\n\nMy guess is that the best way to fix this issue is:\n- Don't expire keys when the client performing the lookup is flagged as being a Lua script.\n- However before the script execution, run the expireIfNeeded() function against all the elements in the KEYS[] array (that is, the keys passed to the script).\n\nNote that the second step is not required to guarantee consistency, but is required to guarantee a behavior that makes sense, that is, to expire keys ASAP when possible as the rest of the Redis semantics does.\n\nAn alternative way to address the problem is to replicate raw commands as proposed multiple times. Let's say that I don't believe this alone is sufficient to bias me towards this extreme solution (extre\n...[Description Truncated]...\n\n[Context/Logs]:\n- If your first solution will be used, please make sure this is properly documented. Right now most users come and ask whether KEYS / ARGV seperation is neccessary in their script or not. For simple scripts right now it makes no difference but with this fix it can affect behaviour\n- On second read I'm not even sure your proposed solution works for this case.\nIf I understand correctly when this script is executed on the master, the key is expired between the two if-conditions (resulting in just one `INCR` executed) whereas your proposed solution may remove the key BEFORE the script is executed (and thus `INCR` is never executed in the slave). Am I right here or did I not understand the problem in full?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Two more things:\n- This issue also apply to AOF: reloading the AOF is not able to provide the same identical dataset if stuff expire in the middle of scripts execution.\n- After applying the following patch I verified that I can't trigger the issue again, at least in the specific example I provided above for reproduction:\n\n```\ndiff\ndiff --git a/src/db.c b/src/db.c\nindex b625fea..906acd4 100644\n--- a/src/db.c\n+++ b/src/db.c\n... [Log Snipped] ...\n\n     /* Don't expire anything while loading. It will be done later. */\n```\n- This should be fixed now (for a long time) but the issue remained open. Actually there is even explicit mention of the issue in the source code, but nobody closed this:\r\n\r\n```\r\n   /* If we are in the context of a Lua script, we claim that time is\r\n     * blocked to when the Lua script started. This way a key can expire\r\n     * only the first time it is accessed and not in the middle of the\r\n     * script execution, making propagation to slaves / AOF consistent.\r\n     * See issue #1525 on Github for more information. */\r\n    now = server.lua_caller ? server.lua_time_start : mstime();\r\n```"}

{"project_id": "Closure", "bug_id": "326", "source_type": "google", "confidence": 0.95, "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \nì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \nì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \nì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "406", "source_type": "google", "confidence": 0.95, "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \nì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \nì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \nì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸ì§¸\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "474", "source_type": "google", "confidence": 0.85, "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "[Title]: void function () {}(); wrongly identified as having no side effects\n[Symptom]:\nThis code results in the execution of the function and should not be identified as having no side effects.\n\n[Context/Logs]:\n- You mean (function() {})() ?\r\n\r\nWhat sort of side effect does that have?\n- I'm sorry, I had typed the expression into the summary like this for brevity, even if the function has a body it is still stripped, eg:\r\n\r\nvoid function () {\r\n   my_global = true;\r\n}();\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1248.\n- Issue 515 has been merged into this issue."}
{"project_id": "Csv", "bug_id": "89", "source_type": "jira", "confidence": 0.95, "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commitÂ  . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commitÂ  ."}
{"project_id": "Csv", "bug_id": "92", "source_type": "jira", "confidence": 0.95, "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commitÂ  . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commitÂ  ."}
{"project_id": "Electron", "bug_id": "84", "source_type": "github", "confidence": 0.85, "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "[Title]: command-line scheme switches' values spill over into other switches\n[Symptom]:\n### Preflight Checklist\r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * v8.0.0-nightly.20190821\r\n* **Operating System:**\r\n  * Ubuntu 19.04 x64\r\n* **Last Known Working Electron version:**\r\n  * Unknown. Broken in `4-1-x` upwards.\r\n\r\n### Expected Behavior\r\n\r\nPassing additional schemes on the command line, e.g. `--standard-schemes=foo,bar,mum`, should not affect other schemes, e.g. cors enabled schemes or secure schemes.\r\n\r\n### Actual Behavior\r\n\r\nThe schemes from earlier checks bleed into all the following switches checked.\r\n\r\nThis happens due to the \"splitted\" variable in `shell/app/atom_content_client.cc`'s `AtomContentClient::AddAdditionalSchemes()` being reused for each switch without being cleared first.\r\n\r\n### To Reproduce\r\n\r\nOn the command line, add schemes for one of the argument switches handled in `AtomContentClient::AddAdditionalSchemes()`.\n"}
{"project_id": "Alacritty", "bug_id": "195", "source_type": "github", "confidence": 0.7, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: Cursor thickness is increased incorrectly on wide cells\n[Symptom]:\nWhen a cursor like the underline is below a wide cell, its thickness is increased (I'd assume doubled).\n\n[Context/Logs]:\n- Hi @chrisduerr I'd like to work on this issue, but how can I set wide cell on my pc?\n- I noticed this by typing `echo \"[URL] Just copy/pasting this and moving your cursor on top of one of the Chinese characters should be sufficient."}
{"project_id": "Alacritty", "bug_id": "246", "source_type": "github", "confidence": 0.85, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: Crashes when zooming in too much\n[Symptom]:\n1. Hold  Ctrl + + \r\n2. Wait\r\n3. Watch alacritty disappear\r\n\r\n### System\r\nOS: Linux 6.1.10-zen1-1-zen\r\nVersion: alacritty 0.12.0-dev (2d27fff7)\r\nDisplay server: X11\r\nWM: xmonad\r\n\r\n### Logs\r\n```\r\n[9.951621818s] [INFO ] [alacritty] Font size changed to Size(113) with scale factor of 1. \r\n[9.951632464s] [INFO ] [alacritty] Cell size: 42 x 86\r\n[9.951695230s] [DEBUG] [alacritty_terminal] Term::resize dimensions unchanged\r\n[9.978555135s] [INFO ] [alacritty] Padding: 0 x 0\r\n[9.978577525s] [INFO ] [alacritty] Width: 1126, Height: 1048\r\nthread 'main' panicked at 'index out of bounds: the len is 1 but the index is 1', alacritty/src/renderer/text/atlas.rs:264:54\r\n```\r\n\r\n[URL]\n\n[Context/Logs]:\n- holy quick fix, batman"}
{"project_id": "Closure", "bug_id": "3", "source_type": "google", "confidence": 0.85, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: Error trying to fold var statement inside an if\n[Symptom]:\nThe following js input to the compiler will raise an exception (I think trying to turn the left hand side \r\nof the expression in the else into a string):\r\n\r\nif (a) { var b = 1; } else { a.b = 1; }\r\n\r\nThe error is raised at, calling the getString on name2:\r\n\r\n[URL]\r\ncompiler/source/browse/trunk/src/com/google/javascript/jscomp/FoldConstants.java#792\n\n[Context/Logs]:\n- Fixed pending integration"}
{"project_id": "Closure", "bug_id": "141", "source_type": "google", "confidence": 0.85, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: Online CC bug: report java error.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. open [URL]\r\n2. input js code:\r\n  function keys(obj) {\r\n    var a = [], i = 0;\r\n    for (a[i++] in obj)\r\n      ;\r\n    return a;\r\n  }\r\n3. press [compile] button.\r\n\r\n What is the expected output? What do you see instead? \nExcept OK. See java error.\r\n\r\n What version of the product are you using? On what operating system? \nOnline CC version.\n\n[Context/Logs]:\n- I never knew you can put an expression like this on the left hand side of the for-in loop.\n- FYI, I checked in the fix. It'll not be a problem in the next release.\n- This issue was closed by revision r1343."}
{"project_id": "Closure", "bug_id": "160", "source_type": "google", "confidence": 0.7, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: -0.0 becomes 0 even in whitespace mode\n[Symptom]:\nAffects dart: [URL]\n\n[Context/Logs]:\n- This issue was closed by revision r1519.\n- This issue was closed by revision r1754."}
{"project_id": "Closure", "bug_id": "312", "source_type": "google", "confidence": 0.9, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: goog.isArray doesn't hint compiler\n[Symptom]:\nWhat steps will reproduce the problem? \n 1. \n\r\n/**\r\n * @param {*} object\r\n * @return {*}\r\n */\r\nvar test = function(object) {\r\n  if (goog.isArray(object)) {\r\n    /** @type {Array} */ var x = object;\r\n    return x;\r\n  }\r\n};\r\n\r\n2. ADVANCED_OPTIMIZATIONS\r\n\r\n What is the expected output? What do you see instead? \n\r\nERROR - initializing variable\r\nfound   : *\r\nrequired: (Array|null)\r\n    /** @type {Array} */ var x = object;\r\n                                 ^\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20130411-90-g4e19b4e\r\nBuilt on: 2013/06/03 12:07\r\n\r\n Please provide any additional information below. \n\r\ngoog.is* is supposed to help the compiler to check which type we're dealing with.\n\n[Context/Logs]:\n- fix posted here\r\n[URL]\n- This issue was closed by revision 6f981f77e5bd.\n- This issue was closed by revision 6f981f77e5bd."}
{"project_id": "Csv", "bug_id": "117", "source_type": "jira", "confidence": 0.85, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: CSVRecord.get(Enum) should use Enum.name() instead of Enum.toString()\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you for your report. Feel free to provide PR on GitHub with a unit test.\n- In git master, please verify and close."}
{"project_id": "Electron", "bug_id": "105", "source_type": "github", "confidence": 0.9, "label": "Assignment :: Type/Cast Error (CWE-704)", "llm_input_text": "[Title]: [Bug]: bad typescript definition for BrowserWindow.hookWindowMessage\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\n\n### Electron Version\n\n12.0.1\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\n10\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\n`BrowserWindow::hookWindowMessage`'s callback parameter should have the lParam and wParam parameters:\r\n`hookWindowMessage(message: number, callback: (lParam: Buffer, wParam: Buffer) => void): void;`\n\n### Actual Behavior\n\ncallback is `() => void`\n\n### Testcase Gist URL\n\n_No response_\n\ncontinuation of [Link: this closed issue]\n"}
{"project_id": "Closure", "bug_id": "301", "source_type": "google", "confidence": 0.85, "label": "Build :: Configuration (CWE-16)", "llm_input_text": "[Title]: No output file should be produced upon error\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create a js source file with error(s), such as file &quot;foo.js&quot; containing *&quot;x.f(); \r\n2. Compile it with option --js_output_file, e.g.\r\njava -jar compiler.jar --js_output_file foo2.js foo.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nAn error message is displayed, which is correct.\r\nFile foo2.js should not be created, or it should be deleted by closure-compiler.\r\nA file foo2.js is created, which can cause problems with make (if make is used to compile a project, the file foo2.js won't be rebuilt when make is run a second time, so the whole build may succeed without any further error from closure-compiler)\r\n\r\n What version of the product are you using? On what operating system? \n\r\nversionClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: exported\r\nBuilt on: 2013/04/11 11:30\r\n\r\nOS X 10.6.8\r\n\r\n Please provide any additional information below. \n\r\nSame problem with more minor errors thrown with options &quot;--compilation_level ADVANCED_OPTIMIZATIONS --warning_level VERBOSE&quot;\n\n[Context/Logs]:\n- wouldn't the inputs have to change to correct underlying problem? And then wouldn't the output need to be rebuild?\n- To correct the underlying problem, yes, the input should be changed. But if for any reason you don't change it before building it a 2nd time (e.g. there are other bugs to fix first, or you're interrupted and forget about it, or you start vi, forget the line number, exit vi and rebuild the project to try to see the error message again), the build looks successful because make won't run closure-compiler again.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 37880c308608.\n- This issue was closed by revision a555e3fdbd56."}
{"project_id": "Closure", "bug_id": "448", "source_type": "google", "confidence": 0.9, "label": "Build :: Configuration (CWE-16)", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Electron", "bug_id": "51", "source_type": "github", "confidence": 0.75, "label": "Build :: Configuration (CWE-16)", "llm_input_text": "[Title]: Windows GN build does not recognize high DPI screens\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: `4.0.0-nightly.20180823`\r\n* Operating System (Platform and Version): Windows\r\n* Output of `node_modules/.bin/electron --version` on last known working Electron version (if applicable): `3.0.0-beta.10`\r\n\r\n**Expected Behavior**\r\nWindow should not be blurry at high DPI\r\n\r\n**Actual behavior**\r\nIt's blurry\r\n\r\n**To Reproduce**\r\nJust launch the default app on a high DPI screen and see how it's blurry, screenshot is attached.\r\n\r\n**Screenshots**\r\n[Image: image]\r\n\r\n\r\n**Additional Information**\r\nThis could be related to the GN build\r\n\r\ncc @nornagon\n\n[Context/Logs]:\n- @MarshallOfSound Have you tried to build Electron from the `master` from the very last commit with gyp build available?\n- @alexeykuzmin No, I just took the latest 3.0 beta, I can try master just before the gyp removal tomorrow.\n- Seems highly likely that this is related to the GN changes. I'll take a look today."}
{"project_id": "Alacritty", "bug_id": "66", "source_type": "github", "confidence": 0.75, "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "[Title]: Alacritty v0.3.0-rc2 does not start (Error creating GL context)\n[Symptom]:\nAlacritty release: v0.3.0-rc2\r\nOS: Debian GNU/Linux buster/sid x86_64\r\nKernel: 4.19.0-4-amd64O\r\nDE: GNOME 3.30.2\r\nGPU: NVIDIA Quadro FX 880M\r\nusing X11\r\n\r\n```\r\n$ alacritty\r\nCreated log file at \"/tmp/Alacritty-19721.log\"\r\n[2019-04-02 14:35] [ERROR] Alacritty encountered an unrecoverable error:\r\n\r\n        Error creating GL context; `glXQueryExtensionsString` found no glX extensions\r\n```\r\n\r\n## notes: \r\n* alacritty version v0.2.9 works fine\r\n* `cargo run --example window` works fine when cloned glutin master\r\n* tried both installing from released deb file and building from sources\n\n[Context/Logs]:\n- Could you bisect which exact commit broke this for you?\n- is the first bad commit\r\n\r\nAlso I chacked last commit ( ) and the same error still occurs.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Oh, sorry. For some reason I confused this issue with [URL]\r\n\r\nI'm not entirely sure why vsync was enabled since I can't reproduce any errors of the original commit message, so I'm not sure if I want to make this change before the 0.3.0 release. It's also possible that it might have impact on performance and resource usage, the latter being difficult to benchmark for me.\n- Reported upstream in [URL]"}
{"project_id": "Csv", "bug_id": "133", "source_type": "jira", "confidence": 0.7, "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "[Title]: Missing OSGi Import-Package versions in Manifest can make commons-csv unusable in OSGi environments\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi  Adhip  \n\n Feel free to create a PR and I'll be happy to review it."}
{"project_id": "Electron", "bug_id": "106", "source_type": "github", "confidence": 0.75, "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "[Title]: [Bug]: Geolocation crashes 13.0.1\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\n\n### Electron Version\n\n13.0.1\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\n11.4\n\n### What arch are you using?\n\narm64 (including Apple Silicon)\n\n### Last Known Working Electron version\n\n12.0.7\n\n### Expected Behavior\n\nElectron shouldn't crash.\n\n### Actual Behavior\n\nElectron crashes.\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nElectron 13.x crashes on any geolocation use. Backtrace attached.\n\n[Context/Logs]:\n- Crash occurs on x86_64 and arm64.\n- Here is a gist with a repro: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Issue still present in 13.1.1\n- @MarshallOfSound Iâ€™d love to take a look at this further but I canâ€™t get Electron to build on my M1 MBP.\r\n\r\nI followed the steps in the building docs but I might have missed something.\r\n\r\nIs there somewhere one can go to ask possiblyâ€¦ simpleâ€¦ building questions?"}
{"project_id": "Alacritty", "bug_id": "114", "source_type": "github", "confidence": 0.95, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: Crash with OOB after\n[Symptom]:\nbasically you can try to repro it by staring selection and moving a cursor clockwise outside of the window, it should crash at some point. More investigations showing that it's related to First cell in a row, however I don't have a formal prove of it right now.\r\n\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 149 but the index is 149', /rustc/ /src/libcore/slice/mod.rs:2796:10\r\nstack backtrace:\r\n   0:       - backtrace::backtrace::libunwind::trace::h65597d255cb1398b\r\n                               at /cargo/registry/src/github.com- /backtrace-0.3.40/src/backtrace/libunwind.rs:88\r\n   1:       - backtrace::backtrace::trace_unsynchronized::hd4f479d7150ec4a0\r\n... [Log Snipped] ...\n  46:       - _start\r\n  47:                0x0 -  \n```\n"}
{"project_id": "Alacritty", "bug_id": "303", "source_type": "github", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: `alacritty migate` panic\n[Symptom]:\nRunning `alacritty migrate` seems to panic, rather than migrate stuff. It appears to point to this indexing on the toml. [URL]\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.14.0-dev (c032c89f)\r\nLinux/BSD: Arch Linux 6.11.2-arch1-1, Wayland, Hyprland\r\n\r\n### Logs\r\n\r\nCrashes:\r\n\r\n```\nrs\r\nâ¯ alacritty migrate\r\n[alacritty/src/migrate/mod.rs:174:9] &key = KeyMut {\r\n    key: Key {\r\n        key: \"shell\",\r\n... [Log Snipped] ...\nindex not found\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\r\n\r\nFont/Terminal size:\r\n[Link: Alacritty-2712427.log]\r\n\r\n\r\nKeyboard and bindings:\r\n[Link: Alacritty-2716785.log]\n\n[Context/Logs]:\n- I can repro with an empty config."}
{"project_id": "Closure", "bug_id": "237", "source_type": "google", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: Strange \"wrong parameter\" warning for callback function\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the followed code:\r\n   /** @param {{func: function()}} obj */\r\n   function test1(obj) {};\r\n   var fnStruc1 = {};\r\n   fnStruc1.func = function() {};\r\n   test1(fnStruc1); \r\n\r\n What is the expected output? What do you see instead? \nExpected: compiled OK\r\nI see:\r\nWARNING - actual parameter 1 of func does not match formal parameter\r\nfound   : {func: function (): undefined}\r\nrequired: {func: function (): ?}\r\nfunc(fnStruc);\r\n     ^\r\n\r\n What version of the product are you using? On what operating system? \nr2102, Win7 x64\r\n\r\n Please provide any additional information below. \nThe followed code compiles OK:\r\n   /** @param {{func: function()}} obj */\r\n   function test2(obj) {};\r\n   var fnStruc2 = { func: function() {} };\r\n   test2(fnStruc2);\r\n\r\nDiscussion: [URL]\n\n[Context/Logs]:\n- This issue was closed by revision r2265."}
{"project_id": "Closure", "bug_id": "317", "source_type": "google", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: Constructor types that return all or unknown fail to parse\n[Symptom]:\nConstructor types that return the all type or the unknown type currently fail to parse:\r\n\r\n/** @type {function(new:?)} */ var foo = function() {};\r\n/** @type {function(new:*)} */ var bar = function() {};\r\n\r\nfoo.js:1: ERROR - Bad type annotation. type not recognized due to syntax error\r\n/** @type {function(new:?)} */ var foo = function() {};\r\n                        ^\r\n\r\nfoo.js:2: ERROR - Bad type annotation. type not recognized due to syntax error\r\n/** @type {function(new:*)} */ var bar = function() {};\r\n                        ^\r\n\r\nThis is an issue for a code generator that I'm working on.\n\n[Context/Logs]:\n- This seems similar to issue 790\n- The parse simply needs to change from only accepting a type name to accepting a type (a one line change + tests, I would think).  It seems reasonable that this could be a record type or anything else.   \r\n\r\nThe work around it to use a typedef:\r\n\r\n/** @typedef {?} */\r\nvar Unknown;\r\n\r\n/** @type {function(new:Unknown)} */\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 763faa34d5e6.\n- This issue was closed by revision 7d26b7bcae83."}
{"project_id": "Csv", "bug_id": "3", "source_type": "jira", "confidence": 0.75, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: ExtendedBufferReader does not handle EOL consistently\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I added a test demonstrating the issue. \n\n I wonder if the line counting should be handled by the lexer instead.\n- Yes, perhaps it should be done by the lexer. But the quickest fix would be to patch the reader. \n\n I wonder whether ExtendedBufferReader is actually necessary; lookAhead() could easily be provided by the Lexer class. \nAnd I'm not sure that readAgain() is really necessary.\n- Enabled new test and added patch to fix it. \nBut we should still consider if ExtendedBufferReader is really necessary."}
{"project_id": "Csv", "bug_id": "106", "source_type": "jira", "confidence": 0.7, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: Fix EOL checking for read array in ExtendedBufferedReader\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I currently don't understand the porposed change. I've asked the contributor to supply some unit tests."}
{"project_id": "Csv", "bug_id": "140", "source_type": "jira", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: POSTGRESQL_CSV cannot parse correctly (null vs zero-length string)\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Not quite, see  [URL]\nAn empty string is not the same as a  null .\n- Not quite, see  [URL]\n An empty string is not the same as a  null .  \n Exactly! And this is essentially what this ticket is about. Not sure I understand the comment.   \n\n The  POSTGRESQL_CSV  format cannot properly distinguish between empty string and null while parsing. So it gets it wrong. The reason why  POSTGRESQL_CSV  format can't is not due as much to the format itself, but to an underlying deficiency in the Parser which is proposed fixed in  PR51  /  CSV-253 . \n\n Please suggest how to proceed. I'll be happy to do more work if required or change stuff in PR51or whatever. \n\n Thx.\n- Hello  lbruun Â  \n\n Please test git master or  [URL] this area has recently changed for   CSV-290   with  [URL]"}
{"project_id": "Redis", "bug_id": "9", "source_type": "github", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "16", "source_type": "github", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "32", "source_type": "github", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: crash report on hyperloglog\n[Symptom]:\nHello,\r\n\r\nWe encountered a crash on the official 3.2.6 version when doing a massive pressure testing,\r\nThe case is that we are operating random keys with different types, for example, using a list set with a string get, which is very unpredictable.\r\n\r\n3.2.6 crashes quickly when using a pfadd that operating on a string key,\r\nin `isHLLObjectOrReply`, it crashed on line `if (hdr->magic[0] != 'H' || hdr->magic[1] != 'Y'`, by decoding the assembly, the hdr is  ,\r\n\r\n```\n   :\tcallq     \r\n      :\tcmp    $0xf,%rax\r\n      :\tjbe       \r\n      :\tmov    0x8(%rbx),%rax\r\n      :\tcmpb   $0x48,(%rax)     // testing H\r\n... [Log Snipped] ...\n      :\tjne       \r\n      :\tcmpb   $0x4c,0x2(%rax)\n```\r\n\r\nStack report is listed below(IPs are replaced as xxx due to publish policy)\r\n\r\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n69277:M 19 Jan 20:13:32.284 # Redis 3.2.6 crashed by signal: 11\r\n69277:M 19 Jan 20:13:32.284 # Crashed running the instuction at:  \r\n69277:M 19 Jan 20:13:32.284 # Accessing address: (nil)\r\n69277:M 19 Jan 20:13:32.284 # Failed assertion:   ( :0)\r\n... [Log Snipped] ...\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n```\r\n\r\nIn our test, it could be triggered 100% percent when running test in a couple of minutes, I think this issue could be serious because it could trigger the DoS by crashing services, feel free to hide it if possible until rc found.\r\n\r\nThanks,\r\nBaron\n\n[Context/Logs]:\n- Hello, thank you. I too think it's the case to fix it by making sure HyperLogLog commands can be called against untrusted input without issues. Thanks for reporting.\n- I saw 3.2.7 was released, is it fixed by upgrading?\n- Hello @wangruowr, bug fixed. The fix will be released in the next 3.2 patch level release and in 4.0.0 which is due 14th of July. Thanks.\n- Thank for the notice!"}
{"project_id": "Redis", "bug_id": "38", "source_type": "github", "confidence": 0.85, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "40", "source_type": "github", "confidence": 0.95, "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "[Title]: Potential Buffer Overflow from user-controllable Array Index value\n[Symptom]:\nThe _clusterLoadConfig_ function within _/redis/src/cluster.c_ seems to allow for a Buffer Overflow vulnerability leading from an array index being set from user-controllable input. The vulnerable code is:\r\n\r\n```\ndirection = p[1]; /* Either '>' or ' importing_slots_from[slot] = cn;\r\n}\n```\r\n\r\nAs we can see, the _slot_ variable is receiving the output of atoi being run here: `slot = atoi(argv[j]+1);`\r\n\r\nNow, _argv[j]_ is basically the arguments of each line (stored in _line[]_) being put into the array using _sdssplitargs_ for further processing.\r\n\r\nThe slot value, after being extracted is then used in the _if-else_ block which controls the slot migration, i.e. `server.cluster->migrating_slots_to[slot] = cn;` and `server.cluster->importing_slots_from[slot] = cn;`.\r\n\r\nIt is safe to assume that a user won't try to put in invalid slot numbers in the cluster configuration file. However, an attacker with limited access to the machine would be able to trigger memory corruption issues or even potentially execute code by forcing an Array Index out of Bounds exception from happening due to invalid values of _slot_. There should be some validation on the value of _slot_ and the maximum length of the _migrating_slots_to_ and _migrating_slots_from_ arrays.\n\n[Context/Logs]:\n- Was this confirmed as a bug that needs to be fixed?\n- This issue has been assigned [Link: CVE-2017-15047]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Note that there is another similar bug here as well:\r\n\r\n```\r\n                start = atoi(argv[j]);\r\n                stop = atoi(p+1);\r\n            } else {\r\n                start = stop = atoi(argv[j]);\r\n            }\r\n            while(start <= stop) clusterAddSlot(n, start++);\r\n```\n- Bug fixed in all the branches. I think the bug is exploitable, because you can basically write the address of a Cluster node structure everywhere in the process memory. So the attacker may:\r\n\r\n1. Modify the nodes.conf so that a node is loaded with the ID containing actually a sequence which is executable.\r\n2. Being the node ID almost the first field of the structure (the second actually), we could set the address in a place (like a function pointer) so that the execution of the program will jump there.\r\n\r\nThe problem with this approach is that there is the `ctime` field as the first member of the structure, so there are 8 initial bytes the user cannot completely control, however probably there is some way to still exploit the bug, for instance by also using the other `clusterAddSlot()` call to selectively alter the last byte bits of the return address or alike. Did not investigate very carefully but in general it looks exploitable with efforts."}
{"project_id": "Closure", "bug_id": "11", "source_type": "google", "confidence": 0.85, "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "[Title]: externs/es3.js missing optional flags for Date.UTC - causes warning in closure library.\n[Symptom]:\nUsing closure library, I see:\r\n\r\nclosure-library/closure/goog/i18n/timezone.js:209: WARNING - Function \r\nDate.UTC: called with 5 argument(s). Function requires at least 7 \r\nargument(s) and no more than 7 argument(s).\r\n  var timeInMs = Date.UTC(date.getUTCFullYear(), date.getUTCMonth(),\r\n                         ^\r\n\r\nMozilla documentation says all arguments but year and month are optional.\r\nAdding @param {number=} for the others should do the trick. I do not know if \r\nthe method would take strings, too.\n\n[Context/Logs]:\n- This issue was closed by revision r98."}
{"project_id": "Closure", "bug_id": "433", "source_type": "google", "confidence": 0.85, "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;Ð”Ð° Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐµÑ‚ ÑÑ‚Ð¾Ñ‚ Ð¿Ñ€ÐµÐºÑ€Ð°ÑÐ½Ñ‹Ð¹ Ð¼Ð¸Ñ€!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Csv", "bug_id": "30", "source_type": "jira", "confidence": 0.85, "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "[Title]: CSVFormat constructor should reject a header array with duplicate entries\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- CSVFormat currently checks the header when validate() is called by the Parser/Printer. I agree, that this is too late and should be done when withHeader is called.\n- Fixed in r1593076"}
{"project_id": "Electron", "bug_id": "59", "source_type": "github", "confidence": 0.9, "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "[Title]: Failed to load browser extensions from directory spam\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: 2.0.x\r\n* Operating System (Platform and Version): macOS\r\n\r\n**Expected Behavior**\r\nNo error is printed to the console.\r\n\r\n**Actual behavior**\r\nAn error is printed to the console when starting Electron:\r\n\r\n```\nFailed to load browser extensions from directory: /Users/bpasero/Library/Application Support/code-oss-dev/DevTools Extensions\r\n{ Error: ENOENT: no such file or directory, open '/Users/bpasero/Library/Application Support/code-oss-dev/DevTools Extensions'\r\n    at Object.fs.openSync (fs.js:577:3)\r\n    at Object.module.(anonymous function) [as openSync] (ELECTRON_ASAR.js:166:20)\r\n    at Object.fs.readFileSync (fs.js:483:33)\r\n... [Log Snipped] ...\n  path:\r\n   '/Users/bpasero/Library/Application Support/code-oss-dev/DevTools Extensions' }\n```\r\n\r\nThe code in `chrome-extension.js:419` is spamming the console when running with logging enabled. That log is not very useful if the folder does not exist in the first place which should always be an expected condition.\n"}
{"project_id": "Closure", "bug_id": "13", "source_type": "google", "confidence": 0.99, "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "[Title]: Typos in externs/html5.js\n[Symptom]:\nLine 354:\r\nCanvasRenderingContext2D.prototype.globalCompositingOperation;\r\n\r\nLine 366:\r\nCanvasRenderingContext2D.prototype.mitreLimit;\r\n\r\nThey should be globalCompositeOperation and miterLimit, respectively.\n\n[Context/Logs]:\n- thanks for catching that. i'll fix it on monday when i'm near a machine that i can edit \r\ncode from.\n- This issue was closed by revision r113."}
{"project_id": "Closure", "bug_id": "138", "source_type": "google", "confidence": 0.95, "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "[Title]: Property lowerBound never defined on IDBKeyRange\n[Symptom]:\nWhat steps will reproduce the problem? \nUse IDBKeyRange.lowerBound (or upperBound, applies to both methods)\r\n\r\n What is the expected output? What do you see instead? \nError thrown, according to the W3C IndexedDB spec, lowerBound is the correct method name.\r\n\r\n What version of the product are you using? On what operating system? \nCygwin on Windows 7 x64, compiler-20110615 (currently latest)\r\n\r\n Please provide any additional information below. \nWrong method names (leftBound, rightBound) instead of the correct ones (lowerBound, upperBound) in the w3c_indexeddb.js extern file.\n\n[Context/Logs]:\n- This issue was closed by revision r1256."}
{"project_id": "Csv", "bug_id": "56", "source_type": "jira", "confidence": 0.99, "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "[Title]: Fix incorrect method name 'withFirstRowAsHeader' in user guide\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you kindly for the report and the patch. Patch applied in Git master. Please verify and close this ticket."}
{"project_id": "Csv", "bug_id": "126", "source_type": "jira", "confidence": 0.95, "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "[Title]: The User Guide examples use deprecated methods\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Electron", "bug_id": "45", "source_type": "github", "confidence": 0.9, "label": "Documentation :: Wrong Comments (CWE-1116)", "llm_input_text": "[Title]: Spellcheck-provider never called, spellchecking thus broken\n[Symptom]:\n* Electron Version: 3.0.0-beta.1\r\n* Operating System (Platform and Version): macOS 10.13 (but all others seem affected, too)\r\n* Last known working Electron version: 2.0.x\r\n\r\n**Expected Behavior**\r\nSpellchecking should work: After calling `webFrame.setSpellCheckProvider` with a given provider, that provider's `spellCheck()` method should be called.\r\n\r\n**Actual behavior**\r\nCalling `webFrame.setSpellCheckProvider` seems to have no effect - the provider is simply never called.\r\n\r\n**To Reproduce**\r\nClone the repo below and start the app. The spellcheck provider is configured to log each input word. However, it appears that `spellCheck` is never called.\r\n\r\n```sh\r\ngit clone [URL]\r\ncd electron-3-spellcheck\r\nnpm install\r\nnpm start || electron .\r\n```\n\n[Context/Logs]:\n- 3-0-x branch by trop: [URL]"}
{"project_id": "Electron", "bug_id": "8", "source_type": "github", "confidence": 0.85, "label": "Function :: Access Control (CWE-284)", "llm_input_text": "[Title]: Segmentation fault after closing the last window on OS X\n[Symptom]:\nThis is a dupe of #321, please have a look at it.\nOccurs on OSX, atom-shell version 19.1.\nJust like what @marcbachmann said in #321, sometimes we just get a short notice \"segmentation fault\".\n\n[Context/Logs]:\n- Looks like the problem lies here:\n\nCode Example:\n\nmainWindow.on('closed', function() {\n    app.quit();\n}\n\nAfter we closed this mainWindow, if we call app.quit(), it will emit signals trying to close this mainWindow again. But this window is already closed. \n\nThis issue only occurs on Mac OS.\n\nSo app.quit() is a little bit dangerous.\nSuggest to attach it to only \"window-all-closed\" event.\n\nOr you may be able to update the logic of app.quit() on MAC? @zcbenz"}
{"project_id": "Electron", "bug_id": "34", "source_type": "github", "confidence": 0.85, "label": "Function :: Access Control (CWE-284)", "llm_input_text": "[Title]: After  .clearHistory(),  .canGoBack() reports false after navigating\n[Symptom]:\nindex.html contents:\r\n```\r\n \r\n```\r\n\r\nSteps:\r\n1. Open `BrowserWindow` to `index.html`, which navigates to google\r\n2. Perform a search to generate history\r\n3. In development console: `document.querySelector('webview').canGoBack()` is `true`\r\n4. In development console: `document.querySelector('webview').clearHistory()`\r\n5. In development console: `document.querySelector('webview').canGoBack()` is `false`\r\n6. Click on a search result link to generate history\r\n7. In development console: `document.querySelector('webview').canGoBack()` is `false`\r\n\r\nStep 7, canGoBack() reports false, where it should report true.\r\n\r\nElectron version: 1.8.2\r\nOperating system: OSX High Sierra 10.13.1 (17B1003)\n\n[Context/Logs]:\n- Seems there's some upstream chatter about this: [URL]\n- @codebytere Thanks for looking. Don't know if your link is mobile specific, or even along the same code path.  clearHistory(), navigate, canGoBack() == false seems pretty vanilla.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for your issue!\r\n\r\nWe haven't gotten a response to our questions in our comment above. With only the information that is currently in the issue, we don't have enough information to take action. I'm going to close this but don't hesitate to reach out if you have or find the answers we need, we'll be happy to reopen the issue.\n- FYI for googlers, the issue seems to be not fixed an the moment.\r\n\r\nMy work-arounds is the following:\r\n```\r\nwebContents.clearHistory();\r\nwebContents.executeJavaScript(\"history.pushState({}, '', location.href)\");\r\n```"}
{"project_id": "Redis", "bug_id": "15", "source_type": "github", "confidence": 0.95, "label": "Function :: Access Control (CWE-284)", "llm_input_text": "[Title]: AOF ignores FLUSHALL\n[Symptom]:\nI fill up my Redis instance, issue a FLUSHALL and shortly after that restart the machine (through upstart with SIGTERM). After the reboot, Redis will start and load the AOF. But it will not replay the FLUSHALL command, and therefore report to duty with all the data loaded again.\n\nThe docs say \"When you restart Redis it will re-play the AOF to rebuild the state.\" Therefore I thought it would honor the FLUSHALL command, too, and end up with an empty DB. I have limited memory and just throw away my whole database regularly via FLUSHALL. If it crashes after a while, I'm unable to recover the append-only file because it just contains way too much data. Note, that AOF rewrites don't compact anything here, either.\n\nI am using 2.4.0. All save points are deactivated, I only use appendfsync on everysec. If I deactivate AOF, everything is fine, and the dump.rdb files are empty after I call FLUSHALL, then SAVE, and then restart.\n\nHere's the logfile. Notice how memory usage goes from 87896904 to 717616 because of the FLUSHALL, but then goes back to 87896824:\n\n```\n[977] 16 Oct 23:12:32 - 0 clients connected (0 slaves), 87896904 bytes in use\n[977] 16 Oct 23:12:32 - Accepted  :36209\n[977] 16 Oct 23:12:32 * DB saved on disk\n[977] 16 Oct 23:12:33 - Client closed connection\n[977] 16 Oct 23:12:37 - 0 clients connected (0 slaves), 717616 bytes in use\n... [Log Snipped] ...\n[985] 16 Oct 23:13:37 - DB 0: 820 keys (0 volatile) in 1024 slots HT.\n[985] 16 Oct 23:13:37 - 0 clients connected (0 slaves), 87896824 bytes in use\n```\n\n[Context/Logs]:\n- Confirmed. Very bad... fixing ASAP.\n- Fixed now on git (2.4 and unstable branches). I'll release Redis 2.4.1 ASAP. Thanks for reporting.\n- Thanks for fixing this so fast. Amazing!"}
{"project_id": "Redis", "bug_id": "30", "source_type": "github", "confidence": 0.85, "label": "Function :: Access Control (CWE-284)", "llm_input_text": "[Title]: Redis 3.2.3 crashed by signal: 11\n[Symptom]:\nWe have a big redis node in a cluster, and we're resharding it to other nodes. While doing that, we encountered many times the error reported below, which forced us to manually kill the instance using kill -9 and reload it.\r\n\r\nIn normal operation the node has been working for months without any problems. The only special thing about it is that there are some very big keys to migrate; for those usually we expected a timeout in the migration, but previously we didn't have this error which forces us to restart the node.\r\n\r\nresharding log:\r\nMoving slot 7929 from  :  to  : : .................$\r\nMoving slot 7930 from  :  to  : : .................$\r\nMoving slot 7931 from  :  to  : : .................$\r\nMoving slot 7932 from  :  to  : : .................$\r\n[ERR] Calling MIGRATE: Connection timed out\r\n\r\nredis log:\r\n\r\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n29395:M 31 Jan 22:16:03.248 # Redis 3.2.3 crashed by signal: 11\r\n29395:M 31 Jan 22:16:03.248 # Crashed running the instuction at:  \r\n29395:M 31 Jan 22:16:03.248 # Accessing address: (nil)\r\n29395:M 31 Jan 22:16:03.248 # Failed assertion:   ( :0)\r\n... [Log Snipped] ...\n*** Preparing to test memory region 7ffec3a02000 (8192 bytes)\r\n*** Preparing to test memory region 7ffec3a06000 (4096 bytes)\n```\n\n[Context/Logs]:\n- Hello, are you still able to reproduce the problem in your environment? That would be very useful. Thanks!\n- Hi Salvatore\r\n\r\nWe stopped resharding the data because this happened quite a few times, but we didn't change anything since then so I'm pretty sure it would happen again if we tried. Did you publish anything new in the meantime? We could restart the sharding, but as it takes a few hours to reload this too big instance when it crashes, I'd rather not do it just to see if it will crash again...\r\n\r\nLet me know if you want any additional details.\n- ... [Middle Discussions Snipped for Brevity] ...\n- UPDATE: disassembling the `redis-server` executable it is quite clear that the problem is that the `port` parameter of the function is NULL. Should be easy to understand why, so I'm going to figure out when this happens.\n- Hello again @danmaz74 and @damaru00. I just tracked the bug cause and I'm preparing a fix. It looks like that regardless of the bug, that crashed the server, the migration is not going to work anyway because of a connection error happening while the big key is being migrated, but we can investigate this later as a second step after you upgrade the instance to a version that no longer crashes :-)"}
{"project_id": "Csv", "bug_id": "9", "source_type": "jira", "confidence": 0.75, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: CSVParser.getRecords() returns null rather than empty List at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "24", "source_type": "jira", "confidence": 0.7, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: CSVFormat.format allways append null\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I can see how your example would do that. I'll address it am done with the flu...\n- Thank you for the report. Keep them coming!   \n\n  \n commit -m \"[CSV-106] CSVFormat.format always append null.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVFormatTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVFormatTest.java\n    Transmitting file data ...\n    Committed revision 1577011."}
{"project_id": "Csv", "bug_id": "46", "source_type": "jira", "confidence": 0.75, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: CSVFormat.withHeaderComments() doesn't print comments header comments depending on when it is called\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you able to provide a patch with a unit test? \n\n Gary\n- Oh, I don't have a fix for it. I suspect it has something to do with ordering. I saw some comments about optimizing header printing in the code somewhere.\n- ... [Middle Discussions Snipped for Brevity] ...\n- These tests pass: \n\n  \n     @Test\n     public  void testJiraCsv154_withCommentMarker()  throws  IOException {\n         final   String  comment =  \"This is a header comment\" ;\n        CSVFormat format = CSVFormat.EXCEL.withHeader( \"H1\" ,  \"H2\" ).withCommentMarker( '#' ).withHeaderComments(comment);\n        StringBuilder out =  new  StringBuilder();\n         final  CSVPrinter printer = format.print(out);\n        printer.print( \"A\" );\n        printer.print( \"B\" );\n        printer.close();\n         String  s = out.toString();\n        Assert.assertTrue(s, s.contains(comment));\n    }\n\n    @Test\n     public  void testJiraCsv154_withHeaderComments()  throws  IOException {\n         final   String  comment =  \"This is a header comment\" ;\n        CSVFormat format = CSVFormat.EXCEL.withHeader( \"H1\" ,  \"H2\" ).withHeaderComments(comment).withCommentMarker( '#' );\n        StringBuilder out =  new  StringBuilder();\n         final  CSVPrinter printer = format.print(out);\n        printer.print( \"A\" );\n        printer.print( \"B\" );\n        printer.close();\n         String  s = out.toString();\n        Assert.assertTrue(s, s.contains(comment));\n    }\n \n  \n\n Can you submit a unit test that fails with the SVN trunk code? With 1.2 would be OK as well.\n- Sure. I will shortly."}
{"project_id": "Csv", "bug_id": "75", "source_type": "jira", "confidence": 0.7, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: CSVFormat#valiadte() does not account for allowDuplicateHeaderNames #43\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "98", "source_type": "jira", "confidence": 0.7, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: CSVFormat.format trims last delimiter if the delimiter is a white space\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi Alpesh, \n\n Thank you for your report. \n\n Are you available to provide a (failing) unit test along with a fix. You can use a patch file or a GitHub PR. \n\n Gary\n- Sure. I will have a patch ready soon."}
{"project_id": "Redis", "bug_id": "2", "source_type": "github", "confidence": 0.85, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: Redis should abort when can't load the RDB file\n[Symptom]:\nWhen Redis can't load an RDB file since the RDB version is wrong or when the file signature does not match a log is emitted and the server starts without loading data, with an empty key space. It should instead abort after logging the error.\nThis was not intentional, and is an error introduced later, but never found since it is not common to have mismatching RDB versions or file signature.\n\n[Context/Logs]:\n- Fixed in 2.4 and unstable. Closing."}
{"project_id": "Redis", "bug_id": "8", "source_type": "github", "confidence": 0.95, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: zinterstore fails when mixing sets and sorted sets\n[Symptom]:\nI have two sets and a single sorted set and I'm trying to use zinterstore to get the scored intersection of all three.  The operation is failing with my production data but succeeding if I substitute a test sorted set it works in some cases but not all and I'm stumped about why.\n\nTo setup the test, add three entries to set \"one\", four entries to set \"two\" - including a signle entry that exists in set \"one\", and four entries in the sorted set - including that same single entry from set \"one\"\n\n```\nsadd one 100 101 102 103 \nsadd two 100 200 201 202\nzadd three 1 500 1 501 1 502 1 503 1 100\n```\n\nNow if you run\n\n```\nzinterstore to_here 3 one two three WEIGHTS 0 0 1\n```\n\nNothing is found to intersect.\n\nCreate a new sort set \"four\":\n\n```\nzadd four 1 600 1 100 \n\nzinterstore to_here 3 one two four WEIGHTS 0 0 1\n```\n\nThere is an intersection on the entry 100!\n\nMy production data isn't so simple but I'm seeing the same result, some intersections appear to work, at least in part, but others fail completely.\n\nThis happens on redis versions 2.4.13 and the latest 2.6 RC.\n\nJosiah Carlson kindly tested this and found that it behaves correctly in earlier versions of redis:\n\n[Context/Logs]:\n- Fixed in 2.4.14, already available for download. Thanks."}
{"project_id": "Redis", "bug_id": "45", "source_type": "github", "confidence": 0.95, "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "[Title]: [BUG] Unexpected behavior of XREAD STREAMS stream +\n[Symptom]:\n**Describe the bug**\r\n\r\nAfter last element of stream was removed, `XREAD STREAMS stream +` returns `nil`, but stream is not empty.\r\n\r\n**To reproduce**\r\n\r\n```\n :6379> XADD stream * f 1\r\n\"1730271076300-0\"\r\n :6379> XADD stream * f 2\r\n\"1730271126476-0\"\r\n :6379> XREAD STREAMS stream +\r\n... [Log Snipped] ...\n(nil)\r\n :6379>\n```\r\n\r\n**Expected behavior**\r\n\r\nThe same as for `XREVRANGE stream + - COUNT 1`\r\n\r\n**Additional information**\r\n\r\nRedis server info:\r\n\r\n```\nredis_version:7.4.1\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id: \r\nredis_mode:standalone\r\n... [Log Snipped] ...\natomicvar_api:c11-builtin\r\ngcc_version:10.2.1\n```\r\n\r\napt version: `6:7.4.1-1rl1~bullseye1` installed from `[URL]\n\n[Context/Logs]:\n- @edkalina thanks, the reason is that `XDEL` forgot to update the `last_id` when the deleted entries is the last one.\r\ndo you wanna make a PR to fix it?"}
{"project_id": "Alacritty", "bug_id": "232", "source_type": "github", "confidence": 0.85, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: SpawnNewInstance should not pass --command (-e) argument\n[Symptom]:\nWhen alacritty is run with --command (-e) option, SpawnNewInstance is also passed this argument.\r\n\r\nMy specific use case was running \"alacritty -e ranger\", and I expected SpawnNewInstance to give me a terminal for the directory I am currently parsing. Instead, it launched a new alacritty instance with ranger running.\r\nWhen I use ranger without invoking alacritty's --command option, it works as expected.\r\n\r\nI don't know if there's some other use case benefiting from the current behavior.\r\n\r\nI propose that it should be ignored like the --working-directory argument already is, as in the below code \r\n\r\n[URL]\n\n[Context/Logs]:\n- You're absolutely correct. In fact if you do `alacritty msg create-window`, it should already behave as you would expect. Apparently it's just the `SpawnNewInstance` action that doesn't behave as intended. So you can use the command as a work around until this is fixed.\n- I just looked it up whilst switching from termite, nice to see someone opened the issue just 2 days ago !\n- Is there any alternative command to spawn a new instance through a key binding that actually inherits the --command param?\r\nI understand why it's unexpected behaviour for SpawnNewInstance but I grew to like it and made heavy use of it."}
{"project_id": "Closure", "bug_id": "10", "source_type": "google", "confidence": 0.75, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: Inheritance not detected when prototype directly assigned\n[Symptom]:\nGiven the following input JS:\r\n//--------------------------\r\n/**\r\n* @constructor\r\n*/\r\nfunction SuperClass () {\r\n}\r\n\r\nSuperClass.prototype.CustomMethod = function() {\r\n}\r\n\r\n/**\r\n* @constructor\r\n* @extends {SuperClass}\r\n*/\r\nfunction SubClass () {\r\n}\r\nSubClass.prototype = new SuperClass();\r\n\r\n/**\r\n* @override\r\n*/\r\nSubClass.prototype.CustomMethod = function() {\r\n\tthis.myProperty = &quot;value&quot;;\r\n}\r\n\r\nwindow['SubClassInstance'] = new SubClass();\r\n//---------------------------------\r\n\r\nWhen compiled with ADVANCED_OPTIMIZATIONS produces the warning:\r\nJSC_UNKNOWN_OVERRIDE: property CustomMethod not defined on any superclass\r\nof SubClass\r\n\r\nThis error has been reproduced in both the downloaded compiler and the\r\nCompiler Service UI.\r\n\r\nWhen the prototype assignment is wrapped in a function, it is correctly\r\ndetected. See below:\r\n//---------------------------------\r\nfunction inherit(Child, Parent) {\r\n    Child.prototype = new Parent();\r\n} \r\ninherit(SubClass, SuperClass);\r\n//---------------------------------\n\n[Context/Logs]:\n- This issue was closed by revision r93.\n- This issue is not fixed. The above code still generates the warning when the\r\nprototype assignment is not inside a function.\n- The test case in r93 disagrees. Can you give a repro case of the warning that you see?\n- Further testing shows the bug only comes into play in very specific circumstances. It\r\nrequires an extern file as well as aliasing the type with @typedef.\r\n\r\nAttached are the 2 files as simple as I can get them and still get the error.\r\n\r\nI should mention that the compiler I'm testing in was built about 2 hours ago against\r\nthe latest SVN source. I also enabled the ambiguateProperties and\r\ndisambiguateProperties passes."}
{"project_id": "Closure", "bug_id": "121", "source_type": "google", "confidence": 0.85, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: Compiler should warn/error when instance methods are operated on\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile and run the following code:\r\n  goog.require('goog.graphics.Path');\r\n  function demo() {\r\n    var path = new goog.graphics.Path();\r\n    var points = [[1,1], [2,2]];\r\n    for (var i = 0; i &lt; points.length; i++) {\r\n      (i == 0 ? path.moveTo : path.lineTo)(points[i][0], points[i][1]);\r\n    }\r\n  }\r\n  goog.exportSymbol('demo', demo);\r\n\r\n What is the expected output? What do you see instead? \nI expect it to either work or produce a warning.  In this case, the latter since there's an error in the javascript - when calling path.moveTo(x, y), &quot;this&quot; is set correctly to the path element in the moveTo function.  But when the function is operated on, as in (i == 0 ? path.moveTo : path.lineTo)(x, y), it's no longer an instance method invocation, so &quot;this&quot; reverts to the window object.  In this case, an error results because moveTo references a field in Path that is now &quot;undefined&quot;.  Better would be to issue a warning/error that an instance method is being converted to a normal function (perhaps only if it references this).\r\n\r\n What version of the product are you using? On what operating system? \nUnknown (it's built into my build tools) - I presume this issue is present in all builds.  Running on ubuntu.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This issue was closed by revision r1147."}
{"project_id": "Closure", "bug_id": "183", "source_type": "google", "confidence": 0.85, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: Make common JS module functionality publicly visible\n[Symptom]:\nI want to call ProcessCommonJSModules.toModuleName and access ProcessCommonJSModules.DEFAULT_FILENAME_PREFIX just as the CommandLineRunner is doing, but cannot with the current visibility.  (I'm building compiler integration for the Play Framework and want to invoke the compiler, but on incoming HTTP requests rather than from the command line.)\n\n[Context/Logs]:\n- Patched version of ProcessCommonJSModules attached\n- i'm confused. we usually don't make individual passes publicly visible. what does this buy you?\r\n\r\nalso, for future reference, it's 2x easier to consume a patch if it's expressed as a diff, rather than a copy of the whole file\n- ... [Middle Discussions Snipped for Brevity] ...\n- Essentially you want to make an operation like the CommandLineRunner does here\r\n[URL]\r\nright?\r\n\r\nThat kinda makes sense :)\n- This issue was closed by revision r1768."}
{"project_id": "Csv", "bug_id": "61", "source_type": "jira", "confidence": 0.85, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: CSVParser#iterator()#hasNext() fails\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This is normal behavior with the current architecture: The  iterator()  API presents an object that is backed by data in the  CSVParser  as the parser is  streaming  over the file. The  CSVParser  is like a forward-only stream. \n\n When you create a new  Iterator  you are only created a new view on the same position in the parser's stream. \n\n For the behavior you want, you need to open a new  CSVParser . \n\n You can also abreviate the parser creation like this: \n\n  \n CSVParser parser = csvFormat.parse( new  InputStreamReader( new  FileInputStream(csvFile), StandardCharsets.UTF_8));\n- garydgregory Â the issue is that in current architecture the hasNext() method is unusable, because it cant be used with next() method due to skipping of records\n- ... [Middle Discussions Snipped for Brevity] ...\n- Works withÂ commons-csv-1.7-20181217.213125-13.jar \n\n No longer getting the below error. \n\n Exception in thread \"main\" java.util.NoSuchElementException: No more CSV records available \n at org.apache.commons.csv.CSVParser$1.next(CSVParser.java:472) \n at org.apache.commons.csv.CSVParser$1.next(CSVParser.java:436) \n at com.somename.CommonsCSVExample.createEndChannel(CommonsCSVExample.java:32) \n at com.somename.CommonsCSVExample.main(CommonsCSVExample.java:46)\n- Reported as fixed"}
{"project_id": "Electron", "bug_id": "26", "source_type": "github", "confidence": 0.75, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: Inconsistent behaviors in sandbox mode with iframe\n[Symptom]:\n* Electron version: 1.6.7\r\n* Operating system: Windows 10\r\n\r\nAccording to the activation of the sandbox, Iâ€™m facing inconsistent behaviors with a window containing iframes.\r\n\r\n# 1st. issue\r\n### How to reproduce\r\nHave a preload.js (pretty basic)\r\n```\r\nconst _ipcRenderer = require('electron').ipcRenderer;\r\nwindowLocal.ipcRenderer = _ipcRenderer;\r\nconsole.log(â€˜preload file loadedâ€™);\r\n```\r\nA html page with at least one iframe\r\n\r\n### Actual behavior\r\nWhen loading such page, we have the preload file loaded several times :\r\n-\tone for the top window\r\n-\tone for each iframe\r\nWithout the sandbox the preload file is loaded only once whatever the number of iframes.\r\n\r\n### Expected behavior\r\nIt could make sense to load preload file for each iFrame whatever the mode. We are in position to test in the preload if we are in a iframe (window.frameset) and then adapt our code.\r\n\r\n# 2nd issue \r\n### How to reproduce\r\nIn sandbox mode, from the top window and from each iframe I send a specific message to the master using the ipcRenderer.\r\n\r\nI build a response channel and the message from the window id and frame id\r\n```\r\n    let message = `I'm here from Window '${windowId}'`;\r\n    let responseChannel = `child-response-${windowId}`;\r\n    if (window.frameElement) {\r\n        message += ` Frame '${window.frameElement.id}'`;\r\n        responseChannel += `-${window.frameElement.id}`;\r\n    }\r\n```\r\n\r\nI listen the response on this specific response channel\r\n```\r\n    ipcRenderer.on(responseChannel, (...args) => {\r\n        console.log(â€¦args);\r\n    });\r\n```\r\nI send this specific message to master\r\n`    ipcRenderer.send('child-message', responseChannel, message);\r\n`\r\nThe master looks like\r\n```\r\n        ipcMain.on('child-message', (event: Electron.IpcMainEvent, ...args: any[]) => {\r\n            console.log(...args);\r\n            event.sender.send(args[0], 'I got your message !');\r\n        });\r\n```\r\n\r\n### Actual behavior\r\nMaster receives the expected messages\r\n-\tchild-response-xxx, I'm here from Window 'xx\n...[Description Truncated]...\n\n[Context/Logs]:\n- @tarruda \r\nFor this issue, does it miss a test on the frame in \r\nvoid AtomSandboxedRendererClient::DidCreateScriptContext(\r\n    v8::Handle  context, content::RenderFrame* render_frame) {\r\n++  if (!render_frame->IsMainFrame())\r\n++    return;\r\n\r\n\r\nDo not know if we have to test devTools as well ?\r\n  if (!render_frame->IsMainFrame() && !IsDevToolsExtension(render_frame))\r\n    return;"}
{"project_id": "Electron", "bug_id": "50", "source_type": "github", "confidence": 0.85, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: Notification (+115 more) APIs aren't defined synchronously in preload scripts\n[Symptom]:\n* Electron Version: 3.0.0-beta.3\r\n* Operating System (Platform and Version): macOS 10.13.6\r\n* Last known working Electron version: 2.0.5\r\n\r\n**Expected Behavior**\r\nWhile launching the app, a notification should be triggered via the preload script of the `BrowserWindow`.\r\n\r\n**Actual behavior**\r\nAn error is reported on the console: `ReferenceError: Notification is not defined`\r\n\r\n**To Reproduce**\r\n```sh\r\n$ git clone [URL] -b preload-notifications-3beta\r\n$ npm install\r\n$ npm start || electron .\r\n```\r\n\r\n**Screenshots**\r\n_Working (2.0.5)_\r\n[Image: screen shot 2018-07-24 at 15 02 37]\r\n\r\n_Not Working (3.0.0-beta.3)_\r\n[Image: screen shot 2018-07-24 at 15 00 56]\r\n\r\n**Additional Information**\r\nGeneral HTML5 Notification support was already discussed in #13620 and fixed.\n\n[Context/Logs]:\n- I noticed this too. The `Notification` API *is* available in preload scripts, but not synchronously like it was previously.\r\n\r\n```\njs\r\n// preload.js\r\n\r\ncheck()\r\nprocess.nextTick(check)\r\n... [Log Snipped] ...\n  console.log(performance.now(), window.Notification)\r\n}\n```\r\n<img width=\"375\" alt=\"screen shot 2018-08-07 at 6 15 20 am\" src=\"[URL]\n- It looks like this applies to far more than the `Notification` API.\r\n```\njs\r\n// preload.js\r\n\r\nfunction getGlobalNames() {\r\n  return Object.getOwnPropertyNames(global).filter(key => typeof global[key] == \"function\").sort()\r\n... [Log Snipped] ...\n  console.log(`async only (${newGlobals.length}): ${newGlobals.join(\", \")}`)\r\n})\n```\r\n\r\n**Electron 3.0.0-beta.5**\r\n<img width=\"797\" alt=\"screen shot 2018-08-15 at 10 11 22 am\" src=\"[URL]\r\n\r\n**Electron 2.0.7**\r\n<img width=\"796\" alt=\"screen shot 2018-08-15 at 10 12 43 am\" src=\"[URL]\n- @javan ... thanks a lot for your work! The `setTimeout` trick does the job, at least for now. ðŸ‘\n- This broke when we bumped dependencies in bcbcb4c64.\r\n\r\nWorked in b4cce8e24:\r\n\r\n\r\nBroken in bcbcb4c64:"}
{"project_id": "Electron", "bug_id": "98", "source_type": "github", "confidence": 0.85, "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "[Title]: Methods on remote.screen are not defined\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 11.0.2\r\n* **Operating System:**\r\n  * NixOS 21.03 x86_64\r\n* **Last Known Working Electron version:**\r\n  * 10.1.6\r\n\r\n### Expected Behavior\r\n`remote.screen.getPrimaryDisplay()` works.\r\n\r\n### Actual Behavior\r\n`Uncaught TypeError: remote.screen.getPrimaryDisplay is not a function`\r\n\r\n### To Reproduce\r\nElectron Fiddle: [URL]\r\n\r\n### Additional Information\r\nThis broke between 11.0.0-nightly.20200724 and 11.0.0-nightly.20200729, probably in #24677. Cc @nornagon.\r\n\r\nSee also electron-userland/spectron#771, webtorrent/webtorrent-desktop#1896.\n\n[Context/Logs]:\n- Both macOS11 and Windows 10 will have this problem.\n- Also confirmed on Linux as having broken between v10.1.6 and v11.0.2.\r\n\r\nThis is an Electron regression and should get fixed, but just a heads-up that [Link: remote is deprecated] and in the long term you'll want to migrate away from this API."}
{"project_id": "Alacritty", "bug_id": "12", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Scrolling breaks in vim with ttymouse=sgr on Linux\n[Symptom]:\nScrolling always goes down regardless of which way the mouse wheel moves.\n"}
{"project_id": "Alacritty", "bug_id": "27", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Invert escape sequence incorrect\n[Symptom]:\nThe command `echo -e \"Normal \\e[101;91mTest \\e[7mInverted\"` will print `Inverted` with the default foreground color as background and the default background color as foreground.\r\nThe correct behavior would be to print it the same as `Test`.\r\n\r\nThis bug is due to the following code:\r\n[URL]\n\n[Context/Logs]:\n- The current behavior _should_ match urxvt. Is this a case we didn't cover?\n- This [Link: script] should check every combination\r\n\r\nEdit: inlined\r\n\r\n```\nsh\r\nprintf \"Fg=Black,     Bg=Background          \\e[30;49mTEST\\e[m\\n\"\r\nprintf \"Fg=Black,     Bg=Black               \\e[30;40mTEST\\e[m\\n\"\r\nprintf \"Fg=Foreground,Bg=Background          \\e[39;49mTEST\\e[m\\n\"\r\nprintf \"Fg=Foreground,Bg=Black               \\e[39;40mTEST\\e[m\\n\"\r\n... [Log Snipped] ...\nprintf \"Fg=Foreground,Bg=White,      Inverse \\e[7;39;47mTEST\\e[m\\n\"\r\nprintf \"Fg=White,     Bg=Foreground, Inverse \\e[7;37;39mTEST\\e[m\\n\"\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- btw, did you test with transparency? Some of our logic is specifically around handling that properly.\n- I did not, but that's a great point, I'll throw that in too."}
{"project_id": "Alacritty", "bug_id": "57", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Cursor has different dimensions depending on shape\n[Symptom]:\nThis is probably best demonstrated with a picture:\r\n\r\n[Image: image]\r\n\r\nWith the hollow cursor, there's a 2-pixel gap between the top of the cursor and the edge of the cell.\r\n\r\nInterestingly, the size of the gap appears to stay at 2 pixels even with an increased font size (36 instead of 12):\r\n\r\n[Image: image]\r\n\r\nIt also happens with the vertical bar cursor (which I hadn't noticed until I increased the font size!):\r\n\r\n[Image: image]\r\n\r\nUbuntu 18.04, X11, Alacritty 0.2.9 and still present on latest master ( )\n\n[Context/Logs]:\n- I'd assume that these issues are only present with the hollow and I-Beam cursors, right? So the underline and block are both correct?\n- Yep, underline and block cursors both look fine.\n- ... [Middle Discussions Snipped for Brevity] ...\n- (and so the underline cursor *is* affected, I just didn't have an x-offset specified when I originally tested it)\n- Thanks, I've identified the issues then and am working on a fix. Will update once there's a PR."}
{"project_id": "Alacritty", "bug_id": "99", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Opacity setting not applied\n[Symptom]:\nWhich operating system does the issue occur on?\r\nLinux -- Ubuntu 19.04 dev\r\nIf on linux, are you using X11 or Wayland? X11\r\n\r\nThis issue might be more question on how to debug this rather than there is an actual issue. Recently I updated alacritty to the latest master ( ) and install using `cargo deb --install`. My opacity setting is no longer being applied. I have also recently gotten an external gpu and have been messing with the gpu drivers (switching between nvidia versions and nouveau) so I'm not necessarily convinced this is an issue with the latest Alacritty. When running under sway window manager the opacity works, but under gnome (3.32) on X11 the opacity setting does not. \r\n\r\nI have tried running alacritty with the `-vvv` option but haven't seen any errors or logs that seem relevant. I'm still learning about how all the pieces work together recently switching over from mac to linux so I'm not sure where to look next for why the opacity is not working.\n\n[Context/Logs]:\n- I'm not aware of an isuse with opacity on Linux. The only two things that are commonly issues with this is that people think it's a transparency (not opacity, which is the opposite) setting and that no compositor is running.\r\n\r\nI'd expect GNOME on X11 to be running a compositor by default, however making sure that compositing is working properly is probably your best bet.\r\n\r\nThere's likely no logging in Alacritty's output because Alacritty doesn't run into any issues. If Alacritty attempts to render a transparent window and there is no issue, but the window manager doesn't render it with transparency, there's little Alacritty can do since it doesn't know anything about that.\n- After updating alacritty I had similar issues, now transparency doesn't work. I am using xcompmgr as the compositor, and all the settings are the same than before updating alacritty.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've reopened the upstream issue: [URL]\n- The same problem is also reproduced on my another PC with Intel integrated GPU.\r\nOS: Arch Linux\r\nWM & Compositor: kwin5\r\nMesa: 19.0.1-2\r\nGPU driver: modesetting DDX with i965 kernel driver\r\nglxinfo: [URL]\r\n\r\nOn this Intel machine, I did a git bisect on the commit history of alacritty. the last good commit (that can show transparency) is   and the first bad commit (that shows total opacity) is   ."}
{"project_id": "Alacritty", "bug_id": "124", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Wrong mouse cursor size on Wayland\n[Symptom]:\nMouse cursor is small, ~20px. Looks like system cursor settings are not respected.\r\nHave HiDPI display. Sway scale setting is default (=1).\r\n```shell\r\nGDK_DPI_SCALE=1.66\r\nXCURSOR_SIZE=40\r\ngsettings set org.gnome.desktop.interface cursor-size 40\r\n```\r\nAll other apps (including XWayland ones) show mouse cursor 40px sized.\r\nWith `WINIT_UNIX_BACKEND=x11` cursor sized properly.\r\n\r\n**OS:** Arch Linux, kernel 5.4.15\r\n**Version:** 0.4.1\r\n**Compositor:** sway\r\n\r\n  \r\n   alacritty -vv \r\n[2020-01-30 16:14] [INFO] Welcome to Alacritty \r\n[2020-01-30 16:14] [INFO] Configuration loaded from \"/home/user/.config/alacritty/alacritty.yml\" \r\n[2020-01-30 16:14] [DEBUG] Estimated DPR: 1 \r\n[2020-01-30 16:14] [DEBUG] Estimated Cell Size: 13 x 29 \r\n[2020-01-30 16:14] [DEBUG] Estimated Dimensions: None \r\n[2020-01-30 16:14] [INFO] Device pixel ratio: 1 \r\n[2020-01-30 16:14] [INFO] Initializing glyph cache... \r\n[2020-01-30 16:14] [INFO] ... finished initializing glyph cache in 0.023989566s \r\n[2020-01-30 16:14] [INFO] Cell Size: 13 x 29 \r\n[2020-01-30 16:14] [INFO] Padding: 0 x 0 \r\n[2020-01-30 16:14] [INFO] Width: 800, Height: 600 \r\n[2020-01-30 16:14] [INFO] PTY Dimensions: Line(20) x Column(61) \r\n[2020-01-30 16:14] [INFO] Initialisation complete \r\n[2020-01-30 16:14] [DEBUG] New num_cols is 73 and num_lines is 36 \r\n[2020-01-30 16:14] [INFO] Width: 956, Height: 1045\n\n[Context/Logs]:\n- You're correct, `XCURSOR_SIZE` isn't respected in a version of SCTK(our Wayland toolkit) winit(our windowing library) is using. The new version of SCTK solved this problem, however it'll take time for it to hit alacritty, since winit should update to it first, it also requires rust 1.40.0, so it's unlikely soon. However I'll try to ask whether we can get a fix for some old versions..."}
{"project_id": "Alacritty", "bug_id": "132", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Selection in Alt-screen isn't cleared on mode leave\n[Symptom]:\nif you run `alt-screen-random-write` from `vtebench`, select something during it, when it finish, you'll go back to a normal mode and won't see any selection. if you start it again you'll see your old selection from it.\r\n\r\nI guess we should just always clear selection on mode toggle.\n"}
{"project_id": "Alacritty", "bug_id": "201", "source_type": "github", "confidence": 0.7, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Vi cursor position incorrect when scrolled up\n[Symptom]:\nWhen entering vi mode without the terminal cursor visible, the vi cursor is created outside of the visible region. This leads the cursor being invisible and the viewport jumping around as soon as the cursor is moved.\n"}
{"project_id": "Alacritty", "bug_id": "250", "source_type": "github", "confidence": 0.7, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: The backspace key is not functioning properly when typing in Chinese.\n[Symptom]:\nFor bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\n### System\r\n\r\nOS: macOS 13.3.1\r\nVersion: alacritty 0.12.1-rc1 (110f81d)\r\n\r\n### Logs\r\nKeyboard events: [Link: Alacritty-22064.log]\r\n\r\n\r\nThe backspace key is not functioning properly when typing in Chinese. Specifically, when there is only one character left in the input method bar, pressing the backspace key once deletes two characters instead of one.\r\n\r\n\r\n[Image: alacritty-log]\n\n[Context/Logs]:\n- Your log doesn't contain any keyboard events at all. Is it a standard macOS IME?\n- Closing as duplicate of #458. I don't think there's any point in trying to track down more macOS keybinding issues considering we already know the fix for it will likely be the new keyboard API.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Are you sure that you've compiled it correctly? Because I can't repro that bug anymore.\n- Yeah, looking at the log, you've compiled the wrong thing. Your hash doesn't match the one on the branch."}
{"project_id": "Alacritty", "bug_id": "280", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Running vim with TERM=xterm triggers paste at startup\n[Symptom]:\nWhen using TERM=`xterm` (also `xterm-256color` or `rxvt`), starting vim within Alacritty causes it to paste the contents of its default \"yank\" register at startup.\r\n\r\nThis behavior was introduced in 0589b718 (DECRPM/DECRQM support) and it seems to be triggered by running `report_private_mode` for `NamedPrivateMode::BlinkingCursor`.  If I add a `return` [Link: here] to disable that single mode, the problem is no longer visible.\r\n\r\nI don't think the \"paste\" effect is related to Alacritty - it seems to be caused by the escape code sending a `p` character and triggering Vim's native paste function.\r\n\r\nThe problem does not happen when using TERM=`alacritty`.  I can also work around it by adding `set t_RV=` to my `.vimrc`.\r\n\r\n### System\r\n\r\nOS: Linux, Fedora 39, Wayland + sway\r\nVersion: alacritty 0.13.0-dev (5adfc4fb)\r\nvim: `vim-enhanced-9.0.2120-1.fc39.x86_64`, version `VIM - Vi IMproved 9.0 (2022 Jun 28, compiled Nov 22 2023 00:00:00)\r\nIncluded patches: 1-2120`, no `.vimrc` or Vim scripts installed\r\n\r\n### Logs\r\n\r\n \r\n `alacritty --print-events -vvv` \r\n \r\n[0.000011001s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000073520s] [INFO ] [alacritty] Version 0.13.0-dev (5adfc4fb)\r\n[0.000083699s] [INFO ] [alacritty] Running on Wayland\r\n[0.001041483s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/mark/.config/alacritty/alacritty.toml\"\r\n[0.001344690s] [INFO ] [alacritty] winit event: NewEvents(Init)\r\n[0.001359709s] [INFO ] [alacritty] winit event: Resumed\r\n[0.013034949s] [INFO ] [alacritty] Using EGL 1.5\r\n[0.013077610s] [DEBUG] [alacritty] Picked GL Config:\r\n                                     buffer_type: Some(Rgb { r_size: 8, g_size: 8, b_size: 8 })\r\n                                     alpha_size: 8\r\n                                     num_samples: 0\r\n                                     hardware_accelerated: true\r\n                                     supports_transparency: Some(true)\r\n                                     co\n...[Description Truncated]...\n\n[Context/Logs]:\n- We don't have such a concept.\r\n\r\n\r\nAnd how it's our issue? vim asked us to paste status whether the mode is active or not, we pasted status? Like it clearly got what it asked for and bugged during handling.\r\n\r\n\r\nThe only supported term is `alacritty`.\n- Ah, I just can't read.\n- #7398 fixes the problem for me. Thanks very much for your help, and thanks for all your work on Alacritty!"}
{"project_id": "Alacritty", "bug_id": "289", "source_type": "github", "confidence": 0.95, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Compose keys bug: intermediate keystrokes/characters are typed\n[Symptom]:\nOn version 0.13.1, when I type ` 'a`, instead of just getting an `Ã¡`, I get `'Ã¡`.\r\n\r\nI've recently updated a bunch of system dependencies and alacritty to 0.13.1 using `cargo install` (I don't know which version I was using before). It might be a problem with some other package on my system, but compose keys work fine in other applications (like firefox, libreoffice, and termit).\r\n\r\n### System\r\n\r\nOS: Linux (Debian GNU/Linux)\r\nVersion: alacritty 0.13.1\r\nLinux/BSD: Wayland and Sway\r\n\r\n### Logs\r\n\r\nKeyboard and bindings: [Link: `alacritty --print-events`]\n\n[Context/Logs]:\n- Install with `--locked`. But yeah, the bug is present upstream.\n- Thank you for the quick reply and fix. I can confirm that this is fixed in 0.13.2."}
{"project_id": "Closure", "bug_id": "48", "source_type": "google", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Add option to specify output encoding\n[Symptom]:\nCurrently when input contains a lot of Unicode characters, like:\r\n\r\nalert(&quot;ÐÐµ Ð·Ð½Ð°ÑŽ, Ñ‡Ñ‚Ð¾ Ð²Ñ‹Ð¹Ð´ÐµÑ‚ Ð¸Ð· Ð¼Ð¾ÐµÐ³Ð¾ ÑÑ‚Ð°Ñ€ÑˆÐµÐ³Ð¾ Ð²Ð½ÑƒÐºÐ°.&quot;);\r\n\r\nThe Closure compiler replaces all those characters with \\uXXXX:\r\n\r\nalert(&quot;\\u041d\\u0435 \\u0437\\u043d\\u0430\\u044e, \\u0447\\u0442\\u043e \\u0432\\u044b\\u0439\\u0434\\u0435\\u0442 \\u0438\\u0437 \\u043c\\u043e\\u0435\\u0433\\u043e \\u0441\\u0442\\u0430\\u0440\\u0448\\u0435\\u0433\\u043e \\u0432\\u043d\\u0443\\u043a\\u0430.&quot;);\r\n\r\nThe result is that when you have a lot of Unicode characters inside your JavaScript, the Closure compiler (despite all it's clever code optimizations) produces larger output than YUI compressor.\r\n\r\nI understand that there are reasons why Google prefers all it's JavaScript to be in plain ASCII, but not everyone thinks that this is the right compromise to make.\n\n[Context/Logs]:\n- Is the --charset option not working for you?\n- I tried a few days ago and it wasn't doing what I was expecting.\r\n\r\nAlso we should have a simpler flag.\n- ... [Middle Discussions Snipped for Brevity] ...\n- better patch\n- This issue was closed by revision r394."}
{"project_id": "Closure", "bug_id": "149", "source_type": "google", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Extern definition for Number#toExponential is incomplete\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Not relevant\r\n 2. \n 3. \n\r\n What is the expected output? What do you see instead? \n What version of the product are you using? On what operating system? \n Please provide any additional information below. \n\r\nThe extern definition for Number.prototype.toExponential() is incomplete.  It should be annotated to reflect the optional parameter the method can accept to set the number of digits following the decimal (like toFixed).\n\n[Context/Logs]:\n- Ahhh!  I found that I could add a patch, so I made the change (Issue #543).\n- This issue was closed by revision r1393."}
{"project_id": "Closure", "bug_id": "262", "source_type": "google", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Sourcemap generation with ant\n[Symptom]:\nWhat steps will reproduce the problem? \n1. run ant task with following configuration:\r\n  &lt;jscomp compilationLevel=&quot;simple&quot; output=&quot;./combined.js&quot;&gt;\r\n    &lt;sources dir=&quot;./&quot;&gt;\r\n      &lt;file name=&quot;test1.js&quot;/&gt;\r\n      &lt;file name=&quot;test2.js&quot;/&gt;\r\n    &lt;/sources&gt;\r\n  &lt;/jscomp&gt;\r\n\r\n  whereas jscomp is the ant task-definition that calls the CompileTask.\r\n\r\n What is the expected output? What do you see instead? \ncombined.js that includes minified and combined contents of test1.js and test2.js. There is no way to tell the ant task to generate source-map.\r\n\r\nThe patch I made makes this possible. Here is a sample configuration from an ant xml-file:\r\n  &lt;jscomp compilationLevel=&quot;simple&quot; output=&quot;./combined.js&quot; sourceMapOutputFile=&quot;./combined.js.map&quot; sourceMapFormat=&quot;V3&quot;&gt;\r\n    &lt;sources dir=&quot;./&quot;&gt;\r\n      &lt;file name=&quot;test1.js&quot;/&gt;\r\n      &lt;file name=&quot;test2.js&quot;/&gt;\r\n    &lt;/sources&gt;\r\n  &lt;/jscomp&gt;\r\n\r\nThe patched CompileTask saves the sourcemap to the specified file and also generates a comment in combined.js that points to the sourcemap file (combined.js.map in this case).\n\n[Context/Logs]:\n- Thanks for the patch.  Can you provide a CLA as per [URL] ?\n- I thought, I already have one, since I have a gmail account. But anyway, I have just submitted a new one over the following link:\r\n[URL]\n- This issue was closed by revision e93aa3e15049."}
{"project_id": "Closure", "bug_id": "442", "source_type": "google", "confidence": 0.9, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Function expressions are transformed into function declarations\n[Symptom]:\nFunction expressions are currently transformed into function declarations.\r\nSince func. expression and func. declarations are evaluated at different\r\ntimes during program execution, this, of course, results in a different\r\nbehavior before and after munging:\r\n\r\n  alert(typeof f);\r\n  var f = function(){};\r\n\r\nbecomes:\r\n\r\n  alert(typeof f);function f(){}\n"}
{"project_id": "Csv", "bug_id": "2", "source_type": "jira", "confidence": 0.7, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: UnicodeUnescapeReader should not be applied before parsing\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Good point but I'm not sure it actually happens. So far the only application I have found supporting unicode escapes is HSQLDB. It can read them but doesn't write them (I checked HSQL 1.8, I'll look at 2.x). I believe these unicode escapes are typically created by a program like native2ascii which converts only non ascii characters, so I believe the line separators are safe. \n\n I agree on removing the unicode escape setting from CSVFormat. I would prefer submitting the reader to  &#91;io&#93;  than making it public in  &#91;csv&#93;  though.\n- OK, I'm working on removing it and moving the reader class to IO for a future release."}
{"project_id": "Csv", "bug_id": "20", "source_type": "jira", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Unescape handling needs rethinking\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you sure? The unicode escape sequences are transformed before reaching the parser.\n- If unicode parsing is not selected, the unicode sequences lose their escape character so cannot then be parsed later. \n\n This is really about more than just unicode escape sequences, though that is what alerted me to the issue. \n\n The whole business of escape handling needs to be very carefully documented (and tested!) to ensure predictable behaviour.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Those tests only check the unescaping, i.e. the parsing. \n\n What happens when the same format is used to create a new record? \n\n The format should be symmetric, i.e. it should be able to do round-trip conversion.\n- I now think that only meta-characters (and the record-separator) should be unescaped, because only meta-characters need to be unescaped on output. All other escapes should be left as-is, and should be handled separately (probably by the application). \n\n However, this may cause some issues with multi-char record separators - needs further investigation. \nMore complications may occur if the RS can be specified as a list of strings. \nIt may be necessary to restrict the RS to a single string."}
{"project_id": "Csv", "bug_id": "27", "source_type": "jira", "confidence": 0.7, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: CSVFormat.EXCEL.parse should handle byte order marks\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you attach a sample file and tell us how you created it?\n- I used this url to fetch the content: \n [URL]\n\n which produced the vod.csv file.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm OK with no code changes for 1.0 and adding docs, which I just did. See the site xdocs and feel free to move/change.\n- The fix is documented at \n\n  [URL]"}
{"project_id": "Csv", "bug_id": "29", "source_type": "jira", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: HeaderMap is inconsistent when it is parsed from an input with duplicate columns names\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The problem is, that we provide a key based access to the values of a  CSVRecord  using the  get(String)  method. How should that method behave if there are duplicate column names? \n\n Throwing an exception seems reasonable here.\n- I guess handling this would imply too many changes in the API.\n- Fixed in revision 1592371. An IllegalStateException is now thrown when an inconsistent header is parsed from the input."}
{"project_id": "Csv", "bug_id": "68", "source_type": "jira", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The test   CSVFormatTest.java      causes \n{{ \njava.io.IOException: (startline 1) EOF reached before encapsulated token finished \n\tat org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:288) \n\tat org.apache.commons.csv.Lexer.nextToken(Lexer.java:158) \n\tat org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:586) \n\tat org.apache.commons.csv.CSVParser.getRecords(CSVParser.java:448) \n}}\n- I'm running into the same issue. \nI'm now using the the following format: \n  \n \nCSVFormat.POSTGRESQL_CSV.withEscape( '\\\\' );\n \n  \n It seems to work ok. \n\n So the bug is in the defautl formatters. I  submitted a simple PR , but integration tests seem to fail for reasons unclear to me. \n\n But it exposes another issue: you can assign the quote and the escape character the same character. This is not supported. So either you should get an IllegalArgumentException, or it should be supported by commons-csv I feel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi  garydgregory , \n\n You asked me to verify what was in master. When I confirmed that all was ok, I meant that the changes in  PR#32  were correctly copied to master. I did not mean that this issue is fixed now. \n\n The issue that my PR addresses is the inconsistencies between Commons-csv's POSTGRESQL_TEXT and POSTGRESQL_CSV formats and PostgreSQL itself. Those inconstencies are now fixed. \n\n The   CSV-208   issue is on having the QUOTE and the ESCAPE character the same. Commons-csv can not parse such CSV files; it spits out a stacktrace  as posted above . So this issue should remain open.\n- Hi  jurrieovergoor : \n\n I'd like to narrow this issue to fixing the Javadoc and the escape character for PostgreSQL. The general issue with parsing, the quote, and escape character is already covered in  CSV-200  which is now linked to this issue. If you have a general solution to this problem, please comment or provide a PR in  CSV-200 . \n\n Thank you! \n\n Gary"}
{"project_id": "Csv", "bug_id": "70", "source_type": "jira", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The test   CSVFormatTest.java      causes \n{{ \njava.io.IOException: (startline 1) EOF reached before encapsulated token finished \n\tat org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:288) \n\tat org.apache.commons.csv.Lexer.nextToken(Lexer.java:158) \n\tat org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:586) \n\tat org.apache.commons.csv.CSVParser.getRecords(CSVParser.java:448) \n}}\n- I'm running into the same issue. \nI'm now using the the following format: \n  \n \nCSVFormat.POSTGRESQL_CSV.withEscape( '\\\\' );\n \n  \n It seems to work ok. \n\n So the bug is in the defautl formatters. I  submitted a simple PR , but integration tests seem to fail for reasons unclear to me. \n\n But it exposes another issue: you can assign the quote and the escape character the same character. This is not supported. So either you should get an IllegalArgumentException, or it should be supported by commons-csv I feel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi  garydgregory , \n\n You asked me to verify what was in master. When I confirmed that all was ok, I meant that the changes in  PR#32  were correctly copied to master. I did not mean that this issue is fixed now. \n\n The issue that my PR addresses is the inconsistencies between Commons-csv's POSTGRESQL_TEXT and POSTGRESQL_CSV formats and PostgreSQL itself. Those inconstencies are now fixed. \n\n The   CSV-208   issue is on having the QUOTE and the ESCAPE character the same. Commons-csv can not parse such CSV files; it spits out a stacktrace  as posted above . So this issue should remain open.\n- Hi  jurrieovergoor : \n\n I'd like to narrow this issue to fixing the Javadoc and the escape character for PostgreSQL. The general issue with parsing, the quote, and escape character is already covered in  CSV-200  which is now linked to this issue. If you have a general solution to this problem, please comment or provide a PR in  CSV-200 . \n\n Thank you! \n\n Gary"}
{"project_id": "Csv", "bug_id": "72", "source_type": "jira", "confidence": 0.7, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: withNullString value is printed without quotes when QuoteMode.ALL is specified; add QuoteMode.ALL_NON_NULL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Very nice wording \"CommonsCsvIsSlightlyBroken\" - makes me want to fix that right away for you   \n\n Are you up for providing a patch?\n- Right up the alley of a \"ImNotDeadYet\"!\n- ... [Middle Discussions Snipped for Brevity] ...\n- In Git master. Please verify and close.\n- nexus7tha  \n\n WRT to MySQL and PostgreSQL, we just need to make sure that our presets for these two are correct. \n\n Gary"}
{"project_id": "Csv", "bug_id": "83", "source_type": "jira", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Char escape doesn't work properly with quoting\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I can confirm that: \n\n  \n l.add( \"\\\\\" );\n \n  \n\n does not output: \n  \n  \"\\\\\" \n \n  \n\n But instead: \n\n does not output: \n  \n  \"\\\" \n \n  \n\n which causes an EOFException in the parser if you try to read it back. \n\n But I thought that anything goes inside of quotes, which is the point of quoting... \n\n Thoughts?\n- Yes, anything goes inside double-quotes - except a double-quote (DQ). \n\n There are two ways to support embedded DQ: doubling the DQ, or escaping the DQ. \n\n In this case, the backslash is presumably being treated as an escape, and since the next char is a DQ, it causes the parser to run off the end of the string. \nHowever, if backslash is not treated as an escape, there would be no problem with the string. \n\n AFAICT, escaping a DQ - instead of doubling it - is not a standard feature of CSV. \nAccording to Wikipedia escaping is used in Sybase. \nIn which case, it suggests that the parser should default to not processing escapes in DQ strings. \n\n The fundamental problem here is that there is no single definition of what constitutes the CSV format.\n- ... [Middle Discussions Snipped for Brevity] ...\n- 7754cd4    CSV-135   - Char escape doesn't work properly with quoting\n- Sorry, I probably did not make my point clear before. \n If the field value is: \n \n\t \"D:\\Property Documents\\ID 1.docx\" \n \n\n the `\\` is obviously a literal not an escape. While forÂ  \n \n\t \"3rd Lincoln boulevard\\, Miami\\, FL\" \n \n\n the `\\` may or may-not be an escape. \n\n The solution could be by adding a new flag (or a new  enum ) that modifies  QuoteMode 's handling by making it explicit whether `\\`Â are literals, or an escape only if followed by specific chars (i.e. `,`,`\\`) or always an escape."}
{"project_id": "Csv", "bug_id": "118", "source_type": "jira", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Produced CSV using PostgreSQL format cannot be read\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In the Lexer class, methodÂ parseEncapsulatedToken, I did modification as following \n  \n \n while  ( true ) {\n  c = reader.read();            \n  \n   //  if  (isEscape(c)) { // commented out  this  line\n    if  (isEscape(c) &amp;&amp; !isQuoteChar(c)) {  // inserted  this  line.  \n \n  \n If I understood the logic correctly, that method is invoked only for those cases when a \"cell\" value starts with the QUOTE character. This means that the ESCAPE character won't be encountered for escaping the DELIMITER character. \n  \n \n@Test\n public  void testQuotedString()  throws  IOException {\n    /*\n     * file:  \"a\" , \"b\"  \"b\" , \"c\" \n     */\n     final   String  code =  \"\\\" a\\ \",\\\" b\\ \"\\\" b\\ \",\\\" c\\\"\";\n     final  CSVFormat format = CSVFormat.POSTGRESQL_CSV.withIgnoreEmptyLines( false );\n    \n     try  ( final  Lexer parser = createLexer(code, format)) {\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"a\" ));\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"b\\\" b\"));\n        assertThat(parser.nextToken( new  Token()), matches(EOF,  \"c\" ));\n    }\n}\n- The best would be to provide a PR on GitHub.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We updated git master recently that could affect this, would you check against git master and/or  [URL] ?\n- I tested inÂ psql 14.5 Homebrew in Mac M1. \n\n for  CSVFormat.POSTGRESQL_CSV , special characters are not escaped. \nfor  CSVFormat.POSTGRESQL_TEXT , values are not quoted. \n  \n \n create   table  COMMONS_CSV_PSQL_TEST (ID  INTEGER , COL1  VARCHAR , COL2  VARCHAR , COL3  VARCHAR , COL4  VARCHAR );\n insert   into  COMMONS_CSV_PSQL_TEST  select  1,  'abc' ,  'test line 1'  || chr(10) ||  'test line 2' ,  null , '';\n insert   into  COMMONS_CSV_PSQL_TEST  select  2,  'xyz' ,  '\\b:'  || chr(8) ||  ' \\n:'  || chr(10) ||  ' \\r:'  || chr(13),  ' a ' ,  'b' ;\n insert   into  COMMONS_CSV_PSQL_TEST  values  (3,  ' a ' ,  'b, c ,d' ,  ' \"quoted\" ' ,  'e' );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql. csv '   with  (FORMAT  CSV );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql.tsv' ; \n  \n  \n \ncat /tmp/psql.csv\n1,abc,\"test line 1\ntest line 2 \",,\" \"\n2,xyz,\"\\b:^H \\n:\n\\r:^M\",a,b\n3,a, \"b,c,d\" , \"\"\"quoted\" \"\",e \n  \n  \n \ncat /tmp/psql.tsv\n1 Â  Â abc Â  Â test line 1\\ntest line 2 Â  Â  Â  Â  Â  Â  Â  \\N\n2 Â  Â xyz Â  Â \\\\b:\\b \\\\n:\\n \\\\r:\\r Â  Â  Â  a Â  Â  Â  Â  Â  b\n3 Â  Â a Â  Â  Â b,c,d Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  \"quoted\"  Â  Â e"}
{"project_id": "Csv", "bug_id": "121", "source_type": "jira", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Produced CSV using PostgreSQL format cannot be read\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In the Lexer class, methodÂ parseEncapsulatedToken, I did modification as following \n  \n \n while  ( true ) {\n  c = reader.read();            \n  \n   //  if  (isEscape(c)) { // commented out  this  line\n    if  (isEscape(c) &amp;&amp; !isQuoteChar(c)) {  // inserted  this  line.  \n \n  \n If I understood the logic correctly, that method is invoked only for those cases when a \"cell\" value starts with the QUOTE character. This means that the ESCAPE character won't be encountered for escaping the DELIMITER character. \n  \n \n@Test\n public  void testQuotedString()  throws  IOException {\n    /*\n     * file:  \"a\" , \"b\"  \"b\" , \"c\" \n     */\n     final   String  code =  \"\\\" a\\ \",\\\" b\\ \"\\\" b\\ \",\\\" c\\\"\";\n     final  CSVFormat format = CSVFormat.POSTGRESQL_CSV.withIgnoreEmptyLines( false );\n    \n     try  ( final  Lexer parser = createLexer(code, format)) {\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"a\" ));\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"b\\\" b\"));\n        assertThat(parser.nextToken( new  Token()), matches(EOF,  \"c\" ));\n    }\n}\n- The best would be to provide a PR on GitHub.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We updated git master recently that could affect this, would you check against git master and/or  [URL] ?\n- I tested inÂ psql 14.5 Homebrew in Mac M1. \n\n for  CSVFormat.POSTGRESQL_CSV , special characters are not escaped. \nfor  CSVFormat.POSTGRESQL_TEXT , values are not quoted. \n  \n \n create   table  COMMONS_CSV_PSQL_TEST (ID  INTEGER , COL1  VARCHAR , COL2  VARCHAR , COL3  VARCHAR , COL4  VARCHAR );\n insert   into  COMMONS_CSV_PSQL_TEST  select  1,  'abc' ,  'test line 1'  || chr(10) ||  'test line 2' ,  null , '';\n insert   into  COMMONS_CSV_PSQL_TEST  select  2,  'xyz' ,  '\\b:'  || chr(8) ||  ' \\n:'  || chr(10) ||  ' \\r:'  || chr(13),  ' a ' ,  'b' ;\n insert   into  COMMONS_CSV_PSQL_TEST  values  (3,  ' a ' ,  'b, c ,d' ,  ' \"quoted\" ' ,  'e' );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql. csv '   with  (FORMAT  CSV );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql.tsv' ; \n  \n  \n \ncat /tmp/psql.csv\n1,abc,\"test line 1\ntest line 2 \",,\" \"\n2,xyz,\"\\b:^H \\n:\n\\r:^M\",a,b\n3,a, \"b,c,d\" , \"\"\"quoted\" \"\",e \n  \n  \n \ncat /tmp/psql.tsv\n1 Â  Â abc Â  Â test line 1\\ntest line 2 Â  Â  Â  Â  Â  Â  Â  \\N\n2 Â  Â xyz Â  Â \\\\b:\\b \\\\n:\\n \\\\r:\\r Â  Â  Â  a Â  Â  Â  Â  Â  b\n3 Â  Â a Â  Â  Â b,c,d Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  \"quoted\"  Â  Â e"}
{"project_id": "Csv", "bug_id": "141", "source_type": "jira", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Updating from 1.6 to 1.7 breaks a header line with a missing header name\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This example is obtuse to me; why do you write: \n  \n \n \",\" .charAt(0);\n \n  \n instead of \n  \n \n 'c' \n \n  \n ? \n Same for the obfuscation of building the reader. Are we to conclude that the whole input for your data file is: \n  \n ,\n \n  \n Which is seems meaningless are a header record. \n\n What am I missing?\n- I don't think that is a problem, after tracing the code in CSVParser.java linenum 498 as below .The Parser does not think emptystring is aÂ meaningful header \n  \n \n //ä»£ç å ä½ç¬¦\n  final   boolean  emptyHeader = header ==  null  || header.trim().isEmpty();\n if  (emptyHeader &amp;&amp; ! this .format.getAllowMissingColumnNames()) {\n     throw   new  IllegalArgumentException(\n         \"A header name is missing in \"  + Arrays.toString(headerRecord));\n}\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think that the commons-csv should not be opinionated concerning the question if an empty header makes sense or not. It should parse it (if the structure is legit csv) and leave this decision to the user. \n\n Â  \n\n It's a common pattern to have an empty header for the first column containing the row number/index. E.g. see official examples such asÂ  [URL]\n- After a second look at this issue, I think there should probably be a way to configure a CSVFormat such that this example at least doesn't throw an exception. \n\n But, if you have two columns with the same name, or two column names missing, that would cause undefined results for  CSVRecord.get(String) , which is bad IMO, and  CSVRecord.get(int)  would still be OK. \n\n Perhaps throwing an exception could be changed from the current fail-fast to delegating it toÂ  CSVRecord.get(String) . I don't think we want to allow for undefined results. \n\n ATM, I do not think we should add an option to make fail-fast vs. not vs.  CSVRecord.get(String)  throws vs.  CSVRecord.get(String)  doesn't throw. \n\n Thoughts?"}
{"project_id": "Electron", "bug_id": "4", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: BrowserWindow 'title-bar-style': 'hidden-inset' option causes crash on OS X 10.9\n[Symptom]:\nFrom: [URL]\n\n``` js\nconst win = new BrowserWindow({\n        'width': 800,\n        'height': 600,\n        'title-bar-style': 'hidden-inset'\n});\n```\n\nThis throws on OS X 10.9 with Electron 0.32.3.\n\n[Image: image]\n\n[Context/Logs]:\n- I see the issue on OS X 10.10.5 too.\n- This is strange. I now reviewed and tested the Chromium implementation of `IsOSYosemiteOrLater` and it looks correct. It should guard against that method running. @sindresorhus and @ssreekanth what does `uname -r` (from command line) return on your Mavericks system?\n- ... [Middle Discussions Snipped for Brevity] ...\n- @jaanus Running `uname -r` on Mavericks returns: `13.4.0`.\n- @jaanus I just published my [Link: app] if you need a testcase."}
{"project_id": "Electron", "bug_id": "9", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Electron 'Permissions Context' potentially causing Renderer Crash\n[Symptom]:\nI'm using the Web MIDI API within an Electron app and trying to send Sysex messages (System Exclusive) in order to send/receive a MIDI device device-specific-messages like ID Requests, etc. The Web MIDI API requires a secure connection when sending Sysex messages and the protocol within an Electron app appears to be 'file:' \nAttempting to send the message crashes the Electron renderer. All other MIDI messages and the Web MIDI API seem to work as expected and sending/receiving Sysex is successful in the Chrome browser (with https).\n\nI've filed a bug with [Link: Chromium] and it's looking like this could be a Electron issue instead. The latest response to that issue is below:\n\n[Context/Logs]:\n- This is a shot in the dark but have you tried playing with the security options? Specifically the 2 registerUrlScheme methods mentioned in [Link: web-frame]. If that doesn't work you can try disabling websecurity completely by setting `web-security` to false in BrowserWindow initialization (see [Link: here]).\n- I did try and use the web-security object in BrowserWindow to no effect. I will try the two web-frame methods, is there more documentation on web-frame and using these two methods? Is there a different way that Electron(libchromiumcontent) handles permissions compared with Chromium?\n\nIt's unclear as to what the issue is. I'm not prompted to allow permission to use sysex, like i am in Chrome, which seems fine, but it does seem that a requirement to sending sysex messages is the secure protocol 'https:'\n- ... [Middle Discussions Snipped for Brevity] ...\n- Sent a pull request to atom/brightray.\n- Thanks for working on this [Link: toyoshim], looking forward to using Web MIDI in Electron."}
{"project_id": "Electron", "bug_id": "38", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Invisible menu on Linux\n[Symptom]:\n* Electron version: 2.0.0-beta.3\r\n* Operating system: Ubuntu 16.04.04 LTS\r\n\r\n### Expected behavior\r\n\r\nApp menu should be visible\r\n\r\n### Actual behavior\r\n\r\nApp menu is invisible\r\n\r\n### How to reproduce\r\n\r\n- Run `electron`\r\n- Observe that the app menu is invisible. It is still possible to open submenus.\r\n\r\n[Image: screenshot from 2018-03-14 17-01-18]\n\n[Context/Logs]:\n- @alespergl I do not see that. Just installed a fresh Ubuntu 16.04 LTS running via Parallels on macOS:\r\n\r\n[Image: image]\n- Interesting! I'm not seeing this in 17.10. I'll see if I can reproduce the behavior in 16.04 LTS.\r\n\r\n[Image: menu-ubuntu-17 10-radiance-theme]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Still observable on Ubuntu 16.04 running electron version \r\nelectron --version = v8.0.1\r\nrun electron or any electron based application. No menus are shown.\n- I am new to Electron, but I can try to debug this on my system if someone has some suggestions on where to look initially."}
{"project_id": "Electron", "bug_id": "66", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Menu bar text not visible\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: v2.0.11\r\n* Operating System (Platform and Version): Arch Linux\r\n\r\n**Expected Behavior**\r\nMenu bar text font color should be white for a black/dark background.\r\n\r\n**Actual behavior**\r\nMenu bar text color is gray(close to black) with black background. So the text is unreadable.\r\n\r\n**To Reproduce**\r\nHave had this problem since installation.\r\n\r\n**Screenshots**\r\n[Image: atom]\r\n[Image: code]\r\n\r\n**Additional Information**\r\nI am facing this problem on both Atom and VS Code so I am presuming it to be related to Electron. This is happening on both light and dark themes. In fact there is no change in the menu bar colors for Adapta and Adapta-Nokto themes. I have read abt this issue on another thread here but it was last updated an year ago and mentions the problem being related to electron not having GTK3 support. I presume this has been achieved so I dont know what to do now.\n\n[Context/Logs]:\n- Possible that we didn't notice this until #14813 .. :roll_eyes: :laughing:\n- #14813 seems to have been fixed in v2.0.11 according to release logs. But its not working for me on v2.0.11 or v2.0.12.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Note that this affects a default install of Ubuntu 18.10 but not 18.04 LTS, because 18.04 still uses the old theme.\r\n\r\nSome affected applications on Ubuntu 17.10:\r\n\r\n* vscode\r\n* mattermost 4.2.0\r\n* skype\r\n* atom beta\n- This seems to be happening again. Have seen it in the latest releases of mattermost-desktop, vscode, and atom 1.33.0 on Pop!_OS 18.10 (and from previous references, Ubuntu 18.10)."}
{"project_id": "Electron", "bug_id": "71", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: WebFrame setSpellCheckProvider not called in an iframe inside of BrowserView\n[Symptom]:\n* Electron version: 1.8.2\r\n* Operating system: 10.13.3\r\n\r\n### Expected behavior\r\n\r\niframes inside of `BrowserViews` should also generate calls to `webFrame.setSpellCheckProvider`\r\n\r\n### Actual behavior\r\n\r\nThe registered spellcheck provider is never called\r\n\r\n### How to reproduce\r\n\r\nDownload attached sample app. Run:\r\n```\r\nyarn install\r\nyarn run dev\r\n```\r\nType into the two text fields in the window. In the console, only one of the text fields logs the spell check log, the other one is inside of the `iframe` and receives no calls.\r\n\r\n[Link: electron-spellcheck-bugs.zip]\n\n[Context/Logs]:\n- @gshahbazian @sofianguy this issue applies to 2.X as well\n- Hi there, just curious how it's going with this bug and if there's something one could help with? We kinda need this functionality."}
{"project_id": "Electron", "bug_id": "75", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: Desktop audio capture does not work on Mac and Linux\n[Symptom]:\n* Electron version: 1.6.2, 1.6.5, 1.7.6, 2.0.2, 3.x, 4.0.5\r\n* Operating system: Mac OS X Sierra, Linux (Debian Jessie)\r\n\r\n### Expected behavior\r\n\r\nGiven the defined [Link: DesktopCapture API] for capturing both audio and video for the entire desktop, we should get a working audio stream on Windows, Linux and Mac.\r\n\r\n### Actual behaviour\r\n\r\nElectron version 4.0.5: On Mac and Linux, the error callback triggers with the respective messages:\r\n\r\n```\r\ngetUserMediaError:  DOMException: Could not start audio source // Mac\r\nFailed to query stereo recording // Linux\r\n```\r\n\r\nElectron Version 1.7.6: On Mac and Linux, the error callback triggers with the error: \r\n\r\n```\r\nNavigatorUserMediaError\r\n    constraintName: \"\"\r\n    message: \"\"\r\n    name: \"TrackStartError\"\r\n```\r\n\r\nElectron Version 1.6.2 and 1.6.5: On Mac and Linux, the video stream is received successfully, albeit, with no audio.\r\n\r\nBelow are the constraints defined as per the DesktopCapture API: \r\n\r\n```\nconst constraints = {\r\n  audio: {\r\n    mandatory: {\r\n      chromeMediaSource: 'desktop'\r\n    }\r\n... [Log Snipped] ...\n  }\r\n}\n```\r\n\r\nPlease note: on Windows, the audio capture works correctly. \r\n\r\n### How to reproduce\r\n\r\n```\r\ngit clone [URL]\r\ncd electron-desktop-capture\r\nnpm install\r\nnpm start\r\n```\n\n[Context/Logs]:\n- @jasonrudolph  Please use GH reactions instead of adding a \"+1\" comment.\n- @MarshallOfSound what is a \"GH Reaction\"? Why is it not mentioned in [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @mhashmi is there other way to fix this bug?\n- Guys, a solution has been posted for this issue in bug report #4776, alongside sample code. I've tested it on OS X, and the user who posted it tested it on Linux, so we at least have a workaround now!"}
{"project_id": "Electron", "bug_id": "130", "source_type": "github", "confidence": 0.75, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: [Bug]: REGRESSION, on MacOS starting 31 when you open devtool the text in the window become unselectable\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n31.2.1\r\n\r\n### What operating system(s) are you using?\r\n\r\nmacOS\r\n\r\n### Operating System Version\r\n\r\nMacOS Sonoma 14.5\r\n\r\n### What arch are you using?\r\n\r\narm64 (including Apple Silicon)\r\n\r\n### Last Known Working Electron version\r\n\r\n30.3.0\r\n\r\n### Expected Behavior\r\n\r\nText to be selectable\r\n\r\n### Actual Behavior\r\n\r\nText is not selectable\r\n\r\n### Testcase Gist URL\r\n\r\n[Link: Electron fiddle Gist]\r\n\r\n### Additional Information\r\n\r\nYou just need to change the version in the Electron Feedle.\r\nIn 30.3.0 everything is good.\r\nstarting version 31.0.0-alpha1 and more recent, the text is no more selectable.\r\nIf you comment line 30 from main.js (that just open the devtools) the text is selectable.\n"}
{"project_id": "Redis", "bug_id": "46", "source_type": "github", "confidence": 0.85, "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "[Title]: [BUG] HINCRBYFLOAT on HFE field removes field expiration on replica\n[Symptom]:\n**Describe the bug**\n\nWhen executing `HINCRBYFLOAT` on a field of HFE, the expiration time of that field is removed on the replica, even though the master retains it. This leads to an inconsistency between master and replica.\n\n**To reproduce**\n\n- master\n```\n :6379> hset hash f1 1\n(integer) 1\n :6379> hexpire hash 200 fields 1 f1\n1) (integer) 1\n :6379> hincrbyfloat hash f1 1\n\"2\"\n :6379> HTTL hash fields 1 f1\n1) (integer) 187\n```\n\n- replica\n```\n :6380> httl hash fields 1 f1   :6380> httl hash fields 1 f1 <== after hincrbyfloat\n1) (integer) -1\n```\n\n**Expected behavior**\n\nField expiration metadata should be preserved on the replica after HINCRBYFLOAT\n\n**Additional information**\n\nthe root cause is that we rewrite `HINCRBYFLOAT` to `HSET` after executing `HINCRBYFLOAT`\n\n[URL]\n\nmaybe we can use `HSETEX ... KEEPTTL`, but `HSETEX` is introduced from 8.0, the bug should be introduced from 7.4\n\n[Context/Logs]:\n- could you please have a look @moticless\n- ```\n    /* Always replicate HINCRBYFLOAT as an HSET command with the final value\n     * in order to make sure that differences in float precision or formatting\n     * will not create differences in replicas or after an AOF restart. */\n```\nMaybe for 8.0 we can use `HSETEX ... KEEPTTL` \nAnd for 7.4 we can hack it with if no expiration time then keep behaviour. Otherwise, use `HINCRBYFLOAT` for replica and prioritize having TTL over float precision in that case. @oranagra WDYT?\n- ... [Middle Discussions Snipped for Brevity] ...\n- i think what matters here is not how many lines the change has, but it's implications.\ni.e if we have conditions, and as long as the field doesn't have expiration, we keep propagating as in 7.0, that means that the change is smaller.\n- sure, we should do that\n\nas you said, if a field has expiration, there are two methods to resolve this issue\n- hset + hexpireat\n- replicate hincrbyfloat without changing command\n\ni am worried that replicating `hincrbyfloat` directly may cause a break change, so i want to try to `hset + hexpireat`\n\nbefore @tezc  reminding, i think it is not easy to keep the order `hset + hexpireat`, we can not call alsoPropagate(hexpireat) at the end of `hincrbyfloatCommand` directly."}
{"project_id": "Closure", "bug_id": "358", "source_type": "google", "confidence": 0.85, "label": "Other", "llm_input_text": "[Title]: Mis-optimization\n[Symptom]:\nAt [URL]\r\nenter the below in the source texttarea\r\n\r\n\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nvar o = {};\r\nwindow['o'] = p;\r\n\r\n\r\n\r\nThen hit the Compile button.\r\n\r\nI expected to get\r\n\r\n\r\n\r\nwindow.o={}\r\n\r\n\r\n\r\n\r\nbut actually got\r\n\r\n\r\n\r\nwindow.o=p;\r\n\r\n\r\n\r\nwith nothing in either the warning or error tabs.\n\n[Context/Logs]:\n- Two things:\r\n1) \"p\" is unknown but the web-service runs with the equivalent of the command-line \"--third_party\", which assumes undefined variables are external values.\r\n2) in advanced mode a global \"o\" and \"window['o']\" are not treated as equivalent:\r\n[URL]\r\n\r\nGiven #2, \"var o\" is unused and removed.\r\n\r\nThat said, assuming you didn't expect #2, I don't known why you would expect:\r\n  window.o = {};\r\nover:\r\n  var o={};o=p;\r\nor \r\n  var o={};window.o = p;\r\nor \r\n  window.o = p;\n- Sorry.  Very stupid of me.  Just a typo."}
{"project_id": "Csv", "bug_id": "136", "source_type": "jira", "confidence": 0.7, "label": "Other", "llm_input_text": "[Title]: Release history link changed from changes-report.html to changes.html\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Electron", "bug_id": "10", "source_type": "github", "confidence": 0.4, "label": "Other", "llm_input_text": "[Title]: Crash on Yosemite\n[Symptom]:\n```\njavascript\nProcess:               Prepros [8704]\nPath:                  /Users/USER/*/Prepros.app/Contents/MacOS/Prepros\nIdentifier:            com.alphapixels.prepros\nVersion:               {{version}}\n... [Log Snipped] ...\nUSB Device: iPhone\nThunderbolt Bus: MacBook Pro, Apple Inc., 17.1\n```\n\n[Context/Logs]:\n- With Yosemite poised to hit the shelves within the next couple of weeks, has there been any update on this?"}
{"project_id": "Electron", "bug_id": "29", "source_type": "github", "confidence": 0.85, "label": "Other", "llm_input_text": "[Title]: Fix \"nativeImage module addRepresentation() ...\" tests\n[Symptom]:\nThey were disabled during the Chromium 61 upgrade. Fix them and enable.\r\n\r\n/cc @alespergl\n\n[Context/Logs]:\n- The tests are fixed, but there is a follow-up task: #11294."}
{"project_id": "Electron", "bug_id": "32", "source_type": "github", "confidence": 0.7, "label": "Other", "llm_input_text": "[Title]: Fix \"  tag found-in-page event emits when a request is made\" test\n[Symptom]:\nIt was disabled during the Chromium 61 upgrade. Fix it and enable.\r\n\r\n/cc @deepak1556\n"}
{"project_id": "Redis", "bug_id": "29", "source_type": "github", "confidence": 0.7, "label": "Other", "llm_input_text": "[Title]: Redis crashed after a week of uptime. Ran memtest for a few minutes on vm.\n[Symptom]:\n[18952] 14 Dec 16:20:46.191 #     Redis 2.8.22 crashed by signal: 11\n[18952] 14 Dec 16:20:46.191 #     Failed assertion:   ( :0)\n[18952] 14 Dec 16:20:46.191 # --- STACK TRACE\nredis-server *:6379(logStackTrace+0x3e)[ ]\nredis-server *:6379(processCommand+0x1a9)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\nredis-server *:6379(processCommand+0x1a9)[ ]\nredis-server *:6379(processInputBuffer+0x51)[ ]\nredis-server *:6379(readQueryFromClient+0xbd)[ ]\nredis-server *:6379(aeProcessEvents+0x230)[ ]\nredis-server *:6379(aeMain+0x2b)[ ]\nredis-server *:6379(main+0x31e)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[ ]\nredis-server *:6379[ ]\n[18952] 14 Dec 16:20:46.191 # --- INFO OUTPUT\n[18952] 14 Dec 16:20:46.191 # # Server\nredis_version:2.8.22\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:standalone\nos:Linux 3.2.0-4-amd64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.7.2\nprocess_id:18952\nrun_id: \ntcp_port:6379\nuptime_in_seconds:1465093\nuptime_in_days:16\nhz:10\nlru_clock:7249656\nconfig_file:/etc/fk-3p-redis/redis-server.conf\n# Clients\n\nconnected_clients:78\nclient_longest_output_list:17815\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:4999941976\nused_memory_human:4.66G\nused_memory_rss:3472392192\nused_memory_peak:5077248952\nused_memory_peak_human:4.73G\nused_memory_lua:36864\nmem_fragmentation_ratio:0.69\nmem_allocator:jemalloc-3.6.0\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:3991\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1450090023\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:2\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\naof_last_write_status:ok\n# Stats\n\ntotal_connections_received:1200\ntotal_commands_processed:1266751737\ninstantaneous_ops_per_sec:74\ntotal_net_input_bytes:219451461936\ntotal_net_output_bytes:39608808420918\ninstantaneous_input_kbps:11.58\ninstanta\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, there are no known bugs that may lead to that AFAIK, so may be an HW failure or a new unknown Redis bug. There are no hints in the stack trace unfortunately. Please could you check if it happens again and post other crash reports? If they all happen at random locations it could be lack of stability of the hardware. Please also could you check with your VM provider if they are using error corrected memory or not?\n- Also could be useful to have the original redis server binary. You may send it to antirez at g-mail citing the issue number in the subject. Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- yeah, this is most likely fixed now (unless there's another bug we didn't spot there).\nI don't think there's any way to avoid this bug, but on the other hand, it seems VERY rare so i doubt you'll see it again.\non the other hand, you'll benefit a lot by upgrading to a more recent version due to other bug fixes.\n- +1 to Oran reasoning. Very rare, if you see it again in a short timeframe maybe is a different bug. However I'm releasing 2.8 and 3.0 new patchlevels in a matter of days, with this fix. I can't do it today because there are pending things in order to release 3.0.6.\n\nYou can either use the latest commit of the `2.8` branch if you want to be sure this bug is fixed in your environment, or also just apply commit e0b7388 in your current tree.\n\nOr wait a few days and install the new 2.8 or 3.0 releases."}
{"project_id": "Alacritty", "bug_id": "243", "source_type": "github", "confidence": 0.75, "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "[Title]: Crash while typing in neovim\n[Symptom]:\nWhile on Wayland, I experience random crashes while typing in Neovim. Log is below. I cannot reproduce it other than by just using Neovim as I normally would. I also cannot reproduce it with a clean config, though since it happens seemingly at random I might've just not ran into it. But for that reason, I'm linking my config as of the time of this issue [Link: here], plugins list is [Link: here]\r\n\r\nWhen running under X11, this doesn't ever happen.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.11.0 (8dbaa0bb)\r\nLinux/BSD: Wayland, Hyprland\r\n\r\n### Logs\r\n\r\nThe important bit:\r\n```\nthread 'main' panicked at 'already borrowed: BorrowMutError', /build/.cargo/registry/src/github.com- /calloop-0.10.1/src/loop_logic.rs:101:46\r\nstack backtrace:\r\n   0:       -  \r\n   1:       -  \r\n   2:       -  \r\n... [Log Snipped] ...\n[wayland-client error] A handler for wl_keyboard panicked.\r\n[1]    20807 IOT instruction (core dumped)  RUST_BACKTRACE=full alacritty -vv\n```\r\nThe entire log is attached here\r\n[Link: alacritty-log.txt]\n\n[Context/Logs]:\n- If you build alacritty from source and before that run `cargo update -p calloop` does it happen?\n- Thanks for the fast fix, should I checkout at 0.11.0 or just do it on the latest source?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yes cloning is fine... But that obviously doesn't work when only cloning the keys and then still expecting every key to remain in the map when later iterating over them...\n- Sorry for the delay again, the alternative fix did work and my problem seems to be gone"}
{"project_id": "Alacritty", "bug_id": "2", "source_type": "github", "confidence": 0.7, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Resizing doesn't work properly on macOS\n[Symptom]:\nThe out-of-band resize events on macOS don't trigger a refresh. Need to make it possible to kick the event loop from that resize handler.\n"}
{"project_id": "Alacritty", "bug_id": "34", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Selecting large amounts of text makes highlight disappear\n[Symptom]:\nLinux X11\r\n\r\nWhen selecting text and scrolling at the same time using the new scrolling->history feature, there is a visual bug concering the selected text.\r\n\r\nWhen more text is selected than fits on the viewport, and the viewport is scrolled so that **only** selected text is visible, the selection marker (inverted colors) disappears. If the viewport is scrolled so that only parts of its contents are selected, the selection marker shows up fine.\n\n[Context/Logs]:\n- Thanks for the report! I believe that nobody actually ever tested selection while scrolling, since it's a bit awkward to do with a mouse.\r\n\r\nCurrently it seems like the selection only updates during mouse movement, not when scrolling. But since scrolling changes the text under the cursor, it should also update the selection. I believe implementing this should work around the issue of selection disappearing and it should provide the added benefit that selection during scroll feels more responsive.\n- Okay, so it turns out my original comment on this issue was a bit misguided. The selection not updating when scrolling and the issue reported here are entirely separate.\r\n\r\n**Edit:** See #1598 for the other issue I've mentioned in here and #1597 for a solution to this issue.\n- Confirmed fixed. Thank you!"}
{"project_id": "Alacritty", "bug_id": "55", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Freeze prompt during reflow\n[Symptom]:\nIf scrollback history is available, but the prompt currently is *not* at the bottom of the terminal emulator, resizing Alacritty with lines longer than the current width of the terminal will continually move down the prompt.\r\n\r\nDemonstration:\r\n[Image: bug]\r\n\r\nThe behavior for alt screen and normal screen when the prompt is at the bottom of the terminal (or there is no scrollback) seems correct. So the goal would be to fix this without touching anything else.\n"}
{"project_id": "Alacritty", "bug_id": "75", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Underline starting in last line not rendered when scrolled up\n[Symptom]:\nIf an underline is started in the last line while scrolled up in the terminal, the underline is not rendered correctly.\r\n\r\nThis applies both for underlines printed using the escape sequence and for underlines created for URL highlighting.\r\n\r\nQuick investigation shows this might be caused by the `update_lines` method or some other step in the rendering process. It seems like the cells have the underline flag set correctly, or at least some flags have an underline flag set, I haven't checked if they're the correct cells yet.\n\n[Context/Logs]:\n- Seems like `strikethrough` is also affected. However selecting any cell (even empty) on line with underline + strikethrough shows both underline and strikethrough correctly.\n- Since strikeout and underline are handled pretty much exactly the same way, this does make sense.\r\n\r\nGood catch on the selection though. I'd expect this to be relatively easy to resolve once the cause is found, however I was caught up with finishing up my PR for moving Alacritty to rfind_url.\n- ... [Middle Discussions Snipped for Brevity] ...\n- ~~For me, it's off by 7(random number) in case I create underline on the last line.~~\r\n\r\nNevermind, `alacritty` was rendering debug output too fast (instant update) and the needed lines were sent out of scrollback buffer without noticeable screen update.\r\n\r\nSo yeah, seems like off-by-one.\r\n\r\nI think I can send a PR to fix this in an hour or less.\n- Just an update to the issue.\r\nThe issue is presented only with the last underline in the last line\r\n[Image: Screenshot_Tue 30 Jul 2019 11:58:34 PM MSK]\r\n\r\nThis is also presented when underlining on a prompt regardless of the position, but your cursor should be to the left to underlined text. Just move a cursor across the url to get the broken behavior.\r\n\r\nOh, and in case of current prompt, you should just place any symbol to the right of underlined text, and it will be highlighted properly (with cursor on the left side)."}
{"project_id": "Alacritty", "bug_id": "170", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Unable to launch alacritty with Fullscreen startup mode on Wayland\n[Symptom]:\nWhich operating system does the issue occur on?\r\nArch Linux\r\n\r\nIf on linux, are you using X11 or Wayland?\r\nWayland\r\n\r\nLogs?\r\n```\n[sjug@host ~]$ alacritty --version\r\nalacritty 0.3.3\r\n[sjug@host ~]$ alacritty\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', src/libcore/option.rs:347:21\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n... [Log Snipped] ...\n  12: __libc_start_main\r\n  13:  \n```\n\n[Context/Logs]:\n- Are you using an nvidia GPU? To get a useful backtrace it would probably be nice to compile Alacritty from source if possible.\n- I'm using an AMD Vega 64 GPU, do I need to set any debug flags on compile?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This seems to explain why the example works. Apparently when calling `current_monitor` *too early* it seems to return no outputs for you. But if we call it later it seems to work fine.\r\n\r\nIf you apply the following diff to glutin master, it might be possible to reproduce the crash:\r\n\r\n```\ndiff\r\ndiff --git a/glutin_examples/examples/window.rs b/glutin_examples/examples/window.rs\r\nindex f7da6c4..cf7beed 100644\r\n--- a/glutin_examples/examples/window.rs\r\n+++ b/glutin_examples/examples/window.rs\r\n... [Log Snipped] ...\n         println!(\"{:?}\", event);\r\n         *control_flow = ControlFlow::Wait;\n```\r\n\r\nYou can test after running `git apply  ` with the `cargo run --example window` command.\n- @chrisduerr Right on\r\n\r\n```\nRunning `target/debug/examples/window`\r\nPixel format of the window's GL context: PixelFormat { hardware_accelerated: true, color_bits: 24, alpha_bits: 8, depth_bits: 24, stencil_bits: 8, stereoscopy: false, double_buffer: true, multisampling: None, srgb: false }\r\nOpenGL version 4.5 (Core Profile) Mesa 19.1.4\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', src/libcore/option.rs:347:21\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n... [Log Snipped] ...\n  20: __libc_start_main\r\n  21: _start\n```"}
{"project_id": "Alacritty", "bug_id": "171", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: ToggleFullscreen doesn't work the first time and does not shrink resolution when going back to windowed mode\n[Symptom]:\n1. Using ToggleFullscreen to switch from windowed to fullscreen mode doesn't work at first time (another 2x ToggleFullscreens are needed)\r\n2. Toggling between windowed and fullscreen mode does not toggle the size of terminal window (it stays at fullscreen resolution)\r\n\r\n### Reproduction\r\nSet `ToggleFullscreen` to F11\r\nSet `decorations` to `none`\r\nRun alacritty\r\nUse F11 to toggle fullscreen\r\n\r\n### Effects\r\n1. When toggling into fullscreen for first time, resolution is set to 1920x1050\r\n2. When toggling back into windowed mode, resolution does not go back to the previous windowed resolution\r\n\r\n### Expected\r\n1. Toggling into fullscreen sets resolution to 1920x1080\r\n2. Toggling back into windowed mode sets resolution back to resolution before fullscreen mode\r\n\r\n### System\r\n\r\nOS: Fedora 32\r\nVersion: 0.4.3\r\nWayland, no custom compositor/WM, GNOME environment\r\n\r\n### Logs\r\n\r\n`alacritty -vv`\r\n```\n[2020-06-07 14:31:36.396907698] [INFO] Welcome to Alacritty\r\n[2020-06-07 14:31:36.397022444] [INFO] Configuration loaded from \"/home/soveu/.config/alacritty/alacritty.yml\"\r\n[2020-06-07 14:31:36.413616963] [DEBUG] Estimated DPR: 1\r\n[2020-06-07 14:31:36.413661116] [DEBUG] Estimated Cell Size: 8 x 17\r\n[2020-06-07 14:31:36.413669552] [DEBUG] Estimated Dimensions: None\r\n... [Log Snipped] ...\n[2020-06-07 14:31:48.502123673] [INFO] Width: 1920, Height: 1080\r\n[2020-06-07 14:31:51.753686932] [INFO] Goodbye\n```\n\n[Context/Logs]:\n- I've got a couple of questions wrt to this bug:\r\n - Does this happen only with decorations set to `none`?\r\n - What's your `startup_mode` in the config? Windowed?\r\n - Does this same issue happen when running XWayland?\n- * Sorry, decorations is set to `full` and this bug does not happen on `none`\r\n* Yes, `startup_mode` is `Windowed`\r\n* Both on GNOME on Xorg and XWayland this issue does not appear\r\n\r\nAlso one thing I have noticed\r\nOn Wayland the title bar is plain white rectangle (with minimize, maximize and close buttons), while on Xorg/XWayland the bar looks the same as in other programs\n- ... [Middle Discussions Snipped for Brevity] ...\n- That is most likely this winit bug: [URL]\n- Thank you so much for fixing this."}
{"project_id": "Alacritty", "bug_id": "194", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Missing Wayland Input Redraws\n[Symptom]:\nI just updated to `alacritty 0.8.0-dev (530de000)`, and while using Wayland I now experience an issue where Alacritty seems to be missing redraw requests. Input will be received correctly, but the display isn't updated until another input is received. This causes the display to lag behind my typing (for example) by exactly one keystroke.\n\n[Context/Logs]:\n- @chrisduerr this issue seems to be caused by the latest commit (530de000).\n- That doesn't surprise me, I expected there to be a few bugs with how big this change was. The terminal damage tracking code has been removed so all the damage tracking is now done through `Wakeup` events and externally in the UI. I'd assume that's probably the most likely candidate for this regression.\n- ... [Middle Discussions Snipped for Brevity] ...\n- [URL] should fix this, testing would be appreciated.\n- @chrisduerr, hi\r\nI tested this commit and it is MUCH better now, feels like the issue is fixed.\r\nthx again for awesome alacritty,\r\n-m"}
{"project_id": "Alacritty", "bug_id": "200", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Resize does not keep viewport in place\n[Symptom]:\nIt seems like there was a regression with resizing the viewport, where content would be incorrectly moved around when a long line was resized while inside of the scrollback history.\r\n\r\n[URL]\r\n\r\nI have not yet bisected this, but I'm fairly sure this worked correctly previously without moving the viewport around.\n\n[Context/Logs]:\n- Are you sure this worked previously? Tried to bisect the issue earlier and couldn't find a working version all the way down to v0.5.0. Nevertheless, I came up with a solution and sent a PR."}
{"project_id": "Alacritty", "bug_id": "204", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Observed CSI query responses out of order\n[Symptom]:\nI like to query the background color via a `\\033]11;` query. To make it possible to detect if a terminal does not support it, I also append a second just general DA1 query, so that I can see in the response immediately if I only get a response for that, so I conclude that the terminal can't answer the first and don't have to wait until I reach some timeout.\r\n\r\nHowever, alacritty is answering these requests out of order: Below you see first the background color request followed by the `\\033[c` DA1 query.\r\nThe response to the DA1 query arrives first and a few moments later the response to the background color arrives.\r\n\r\n#### Actual result: responses out of sequence\r\n```\r\necho -e \"\\e]11;?\\e\\\\\\\\\\e[c\"\r\n^[[?6c^[]11;rgb:1d1d/1f1f/2121^[\\\r\n```\r\n\r\n#### Expected result: responses in sequence of query\r\nI'd expect that the result would be in sequence of the queries:\r\n```\r\n^[]11;rgb:1d1d/1f1f/2121^[\\^[[?6c\r\n```\r\n\r\nWith this out-of-sequence response, my plan to use it as a detection if a specialized query is supported of course won't work as intended.\r\n\r\nIs out-of-order response generally something that I have to expect from a terminal emulator or is this particular issue a bug in alacritty ?\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: `alacritty 0.8.0-dev (a954e07)`  _compiled from head_\r\nLinux/BSD: X11\r\n\r\n(Context: I intend to use the double-query in [URL] to be able to quickly detect terminals that don't have the background color query feature)\n\n[Context/Logs]:\n- I'm not sure if there's any hard guarantee on the order of responses, but this particular instance is due to the fact that Alacritty has to delegate the color response to the UI, while being able to write the terminal identification directly to the PTY.\r\n\r\nI'd say generally Alacritty should behave properly here, but I wouldn't make any guarantee for other terminals. Your \"solution\" is obviously not a proper way to query for capabilities.\n- Is there a recommended way how to be able to determine if a query is supported by a terminal without having to time-out on a request ?\n- Querying for terminal capabilities. Though chances are you'll still have to timeout for some stuff that doesn't have a capability."}
{"project_id": "Alacritty", "bug_id": "244", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Debouncer is constantly polling the events\n[Symptom]:\nWith the notify v4 we were doing passive waiting, however update to notify v5 changed that and now we have active polling that wakes up every 10ms draining the battery.\n"}
{"project_id": "Closure", "bug_id": "318", "source_type": "google", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "460", "source_type": "google", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Electron", "bug_id": "5", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Segmentation fault after calling Screen.getPrimaryDisplay() on Ubuntu 14.04\n[Symptom]:\nOn Ubuntu 14.04 calling `Screen.getPrimaryDisplay()` leads to crash on v0.19.5. Before update on v0.15.9 the same code worked successfully.\n\nExample code:\n\n```\njs\nvar BrowserWindow, Screen, app, mainWindow;\n\napp = require(\"app\");\nScreen = require(\"screen\");\n... [Log Snipped] ...\n  });\n});\n```\n\nWithout the `var  workArea = Screen.getPrimaryDisplay().workArea;` the code works as expected.\n\nConsole:\n\n```\nconsole\nCrash dump id: 0434e4e2-a3f4-4c32-b993-05fbeb80c759\nSegmentation fault (core dumped)\nWarning: Command failed: [31263:1209/190734:ERROR:browser_main_loop.cc(162)] Running without the SUID sandbox! See [URL] for more information on developing with the sandbox on.\nCrash dump id: 0434e4e2-a3f4-4c32-b993-05fbeb80c759\n... [Log Snipped] ...\n\nAborted due to warnings.\n```\n\nVersion 0.19.5\n\n[Context/Logs]:\n- Happens in windows too !\n- Windows 8.1 to be precise."}
{"project_id": "Electron", "bug_id": "16", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Fatal error on exit electron app\n[Symptom]:\n```\n[7136:0129/081452:FATAL:scoped_handle.cc(44)] Check failed: false.\nBacktrace:\n        (No symbol) [ ]\n        (No symbol) [ ]\n        (No symbol) [ ]\n... [Log Snipped] ...\n        v8::Locker::IsLocked [ +804588]\n        v8::Locker::IsLocked [ +816029]\n```\n\nSteps to reproduce\n\n```\n$ npm install -g iron-node;\n$ iron-node;\n#press Ctrl+w\n```\n\nJust tried to reproduce but this happens only in distributed version.\n\nWindows 10 . Electron 0.36.5.\n\nref.: [URL]\n\n[Context/Logs]:\n- I also get a renderer crash when quitting my app, on windows 10 with electron 0.36.6 (0.36.5 was working well)\n\n```\n[8320:0129/150532:FATAL:scoped_handle.cc(44)] Check failed: false.\nBacktrace:\n        (No symbol) [ ]\n        (No symbol) [ ]\n        (No symbol) [ ]\n... [Log Snipped] ...\n        v8::Locker::IsLocked [ +1032834]\n        (No symbol) [ ]\n```"}
{"project_id": "Electron", "bug_id": "46", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: CLI wrapper does not respond to SIGINT or SIGTERM\n[Symptom]:\n### Expected behavior\r\n\r\n`SIGINT` / `SIGTERM` kill signals should exit the `electron` child process\r\n\r\n### Actual behavior\r\n\r\nThey don't ðŸ˜† \r\n\r\n### How to reproduce\r\n\r\n```js\r\n// From a node.js script\r\nconst child = childProcess.spawn(process.execPath, ['./node_modules/electron/cli.js']);\r\nsetTimeout(() => {\r\n  child.kill('SIGTERM');\r\n}, 2000);\r\n```\n"}
{"project_id": "Electron", "bug_id": "100", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Crash on web worker close with node integration\n[Symptom]:\n### Preflight Checklist\r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n7.1.2\r\n* **Operating System:**\r\nMac OS 10.15.2\r\n* **Last Known Working Electron version:**\r\nUnknown, bug has existed since at least 4.0\r\n\r\n### Expected Behavior\r\nWeb workers with node integration should not crash on shutdown.\r\n\r\n### Actual Behavior\r\nWeb workers with node integration occasionally crash on shutdown.\r\n\r\n--\r\n\r\n\r\n\r\n\r\n### To Reproduce\r\nI am sorry, I do not have a repro because this is definitely a timing issue and is difficult to track down.\r\n### Additional Information\r\nI would tell you at least what code is involved in the crash, but the library that is the culprit is rather large, we use Monaco Editor, which is a subset of the VScode codebase. When it shuts down webworkers, we occasionally run into this crash.\r\n\r\nIt looks like there was a similar issue opened [URL] but this has been closed and whatever the actual cause of this segfault is still out there, haunting us.\r\n\r\nStack trace, crashes with EXC_BAD_ACCESS / KERN_INVALID_ADDRESS:\r\n```\njson\r\n{\r\n  \"function\": \"uv_close\",\r\n  \"function_offset\": \"0xb7\",\r\n  \"module_offset\": \" \",\r\n... [Log Snipped] ...\n  \"trust\": \"frame_pointer\"\r\n}\n```\n\n[Context/Logs]:\n- I'm getting the same crash. At random times right around when a web worker is terminated in my app, the screen goes white and dev tools gets disconnected. Using electron 8.2.0, macOS 10.15.4\r\nEDIT:  Here is the crash report: [Link: Sentry event]\n- Another similar error report: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @codebytere Thank you for looking at this. I hope to see this when we update Electron next :D.\n- @implausible i just backported it to all supported release lines so it should get to you in the next release ðŸš€"}
{"project_id": "Electron", "bug_id": "120", "source_type": "github", "confidence": 0.75, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: [Bug]: DesktopCapturer doesn't work in Ubuntu 22.04.2 LTS\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n23.1.1\r\n\r\n### What operating system are you using?\r\n\r\nUbuntu\r\n\r\n### Operating System Version\r\n\r\n22.04.2\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\n_No response_\r\n\r\n### Expected Behavior\r\n\r\nGet access to screens for capture recording using desktopCapturer in electron Api\r\n\r\n### Actual Behavior\r\n\r\nThere are difficulties to report the problem because no specific error is received in the terminal, only the message below\r\n\r\n```bash\r\ntiago@tghpereira:~/Ãrea de Trabalho/electron/test$ yarn start\r\nyarn run v1.22.19\r\n$ electron .\r\n/home/tiago/Ãrea de Trabalho/electron/test/node_modules/electron/dist/electron exited with signal SIGSEGV\r\nerror Command failed with exit code 1.\r\n```\r\n\r\nI followed the official Electronjs documentation step by step and tried several approaches mentioned in forums to find ways to solve the problem, but without success.\r\nPlease help us with this issue which is greatly affecting many packages.\r\n\r\n### Testcase Gist URL\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\n_No response_\n\n[Context/Logs]:\n- @tghpereira I have the same problem.  try installing a previous version of electron.\n- hello @vlkalashnikov, thanks for the suggestion but I tried all the possibilities none worked, I left a test code created through Electron Fiddle, when running the project it just returned the message \"Electron exited with signal SIGSEGV.\" and then the process shuts down.\r\n\r\n@VerteDinde follow the gist link as requested\r\n\r\n[URL]\n- @tghpereira Thanks for the gist, very appreciated! \r\n\r\nI think I have a lead on the issue - if you switch to Xorg, does the crash still occur? I can reproduce this on Ubuntu 20.04 when using Wayland, 20.04 using Xorg works as expected, so I suspect the issue is Wayland-specific. Will try to find a fix.\r\n\r\nBisecting, it looks like this issue started in 23.0.0-nightly20221118 (23.0.0-nightly20221117 works as expected). I'm guessing this Chrome roll caused the regression: [URL]\n- @VerteDinde  We in the community thank you for the attention of the Electron team.\r\n\r\nI made 2 attempts as suggested, one in which I just deactivated Wayland and the other using Xorg, both still persist with the error with the same characteristics mentioned above"}
{"project_id": "Electron", "bug_id": "123", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: [Bug]: SIGSEGV crash when maximizing window\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n30.0.0-alpha7\r\n\r\n### What operating system are you using?\r\n\r\nUbuntu\r\n\r\n### Operating System Version\r\n\r\n20.04, running on x11\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\n30.0.0-alpha6\r\n\r\n### Expected Behavior\r\n\r\nMaximizing/fullscreening the app does not sigfault.\r\n\r\n### Actual Behavior\r\n\r\nMaximizing/fullscreening the window crashes the app.\r\n\r\n### Testcase Gist URL\r\n\r\nThis is visible in the default Fiddle template that opens with the app\r\n\r\n### Additional Information\r\n\r\nThere is no `render-process-gone` or `child-process-gone` event called when it crashes.\n\n[Context/Logs]:\n- I'm not able to repro this on either `v30.0.0-alpha.7` or `v30.0.0-beta.7`\r\n\r\nTested on Ubuntu 23.10 w/`XDG_SESSION_TYPE=x11`:\r\n\r\n- checked out electron-quick-start\r\n- changed the electron version in package.json\r\n- ran npm install\r\n- confirmed from the command line that `./node_modules/electron/dist/electron --version` yielded the expected version\r\n-  ran npm start\r\n- and hit F11 a few times to toggle back & forth between fullscreen.\r\n\r\nNo crash\r\n\r\n@Kilian I am wondering if I'm testing this wrong since your description sounds straightforward. Any idea what I should change from the above so that I can trigger the crash?\n- quick follow-up to previous comment: @Kilian in the video you made for @VerteDinde, it looks like you are clicking the titlebar instead of pressing f11, so I tried again with that to see if it made any difference. FWIW I still am not seeing a crash\n- ... [Middle Discussions Snipped for Brevity] ...\n- Same issue in our application; we have reverted to version 29 in [URL]\n- I could not reproduce this only by maximizing/setting Electron to fullscreen. But could reliably produce a crash by creating at least 3 browser windows and then attempting to maximize any of them.\r\n\r\nHere's a gist: [URL]\r\n\r\nElectron terminated with SIGSEGV on both of my Manjaro and Kubuntu Linux VMs (X11)."}
{"project_id": "Redis", "bug_id": "3", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Server crash on failed master/slave sync (refused connection)\n[Symptom]:\nThree of my instances (on server 1 and 2) just crashed when I restarted server 3. Instance A was a master to an instance on server 3. Instances B and C were slaves of two instances on server 3.\n\nI'm sorry that I have to be so vague about this. I just found these stackdumps in my logfiles a few minutes after it happened. I believe, instances A,B,C were trying to do some kind of syncing with server 3, which was being restarted at the time. I assume server 3 refused the connections when the instances were in a state where these exceptions weren't handled.\n\nI'm using the fresh 2.4.1 from this morning on Ubuntu Oneiric. Let me know if you need more input.\n\ninstance 1:\n\n```\n[2710] 17 Oct 16:56:25 * MASTER MODE enabled (user request)\n[2710] 17 Oct 16:56:25 * Slave ask for synchronization\n[2710] 17 Oct 16:56:25 * Starting BGSAVE for SYNC\n[2710] 17 Oct 16:56:25 * Background saving started by pid 4019\n[2710] 17 Oct 16:56:27 - DB 0: 91 keys (0 volatile) in 128 slots HT.\n... [Log Snipped] ...\n[2710] 17 Oct 16:56:30 # /usr/local/bin/redis-server() [ ]\n[4019] 17 Oct 16:56:32 * DB saved on disk\n```\n\ninstance 2:\n\n```\n[2698] 17 Oct 16:56:30 * Non blocking connect for SYNC fired the event.\n[2698] 17 Oct 16:56:30 # I/O error writing to MASTER: Connection refused\n[2698] 17 Oct 16:56:30 * Connecting to MASTER...\n[2698] 17 Oct 16:56:30 # ======= Ooops! Redis 2.4.1 got signal: -11- =======\n[2698] 17 Oct 16:56:30 # redis_version:2.4.1\n... [Log Snipped] ...\n[2698] 17 Oct 16:56:30 # /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [ ]\n[2698] 17 Oct 16:56:30 # /usr/local/bin/redis-server() [ ]\n```\n\ninstance 3:\n\n```\n[2684] 17 Oct 16:56:31 * Non blocking connect for SYNC fired the event.\n[2684] 17 Oct 16:56:31 # I/O error writing to MASTER: Connection refused\n[2684] 17 Oct 16:56:31 * Connecting to MASTER...\n[2684] 17 Oct 16:56:31 # ======= Ooops! Redis 2.4.1 got signal: -11- =======\n[2684] 17 Oct 16:56:31 # redis_version:2.4.1\n... [Log Snipped] ...\n[2684] 17 Oct 16:56:31 # /lib/x86_64-li\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello Jan,\n\nthanks for reporting, this is an \"interesting\" bug I'll try to get fixed within 24 hours. From the stack trace I believe there is some kind of HA daemon issuing \"SLAVE OF NONE\" to your slave instances when the master is unavailable, is it possible?\nI see this from this line:\n\n[2710] 17 Oct 16:56:25 \\* MASTER MODE enabled (user request)\n\nAt the same time however this instance got a request for another slave to use it as master (however this is unrelated to the bug perhaps, need to check this better).\n\nSo there is a bug for sure, but it is not on slave reconnection. Apparently the bug happens once the slave is elected to master. It still tries to reconnect via non blocking connect.\n\nThis is a big bug I'm glad you found it. More news ASAP.\n- for Jan: please if you can send me more output than this, that is, a few lines more on the top part of the three instances. Thanks!\n- ... [Middle Discussions Snipped for Brevity] ...\n- I ran my test again, and everything runs smoothly. The old slave becomes the new master, and the new slave properly connects and syncs all data.\n\nGreat. Thank you, Salvatore!\n- We won! :) Thanks, closing for now in the hope everything will go smooth even in the next days ;) Otherwise I'm here."}
{"project_id": "Redis", "bug_id": "7", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: redis 2.4.10 and 2.4.9 may crashed,but redis 2.4.6 looks up working normally\n[Symptom]:\n[4389] 12 Apr 23:24:27 \\* Server started, Redis version 2.4.10\n[4389] 12 Apr 23:24:27 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n[4389] 12 Apr 23:24:27 \\* The server is now ready to accept connections on port 6379\n[4389] 12 Apr 23:25:57 # User requested shutdown...\n[4389] 12 Apr 23:25:57 \\* Saving the final RDB snapshot before exiting.\n[4389] 12 Apr 23:25:57 \\* DB saved on disk\n[4389] 12 Apr 23:25:57 \\* Removing the pid file.\n[4389] 12 Apr 23:25:57 # Redis is now ready to exit, bye bye...\n[4414] 12 Apr 23:25:57 \\* Server started, Redis version 2.4.10\n[4414] 12 Apr 23:25:57 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n[4414] 12 Apr 23:25:57 \\* DB loaded from disk: 0 seconds\n[4414] 12 Apr 23:25:57 \\* The server is now ready to accept connections on port 6379\n[4414] 13 Apr 01:19:26 \\* Slave ask for synchronization\n[4414] 13 Apr 01:19:26 \\* Starting BGSAVE for SYNC\n[4414] 13 Apr 01:19:26 \\* Background saving started by pid 4859\n[4859] 13 Apr 01:19:26 \\* DB saved on disk\n[4414] 13 Apr 01:19:26 \\* Background saving terminated with success\n[4414] 13 Apr 01:19:26 \\* Synchronization with slave succeeded\n[4414] 13 Apr 02:01:41 # User requested shutdown...\n[4414] 13 Apr 02:01:41 \\* Saving the final RDB snapshot before exiting.\n[4414] 13 Apr 02:01:41 \\* DB saved on disk\n[4414] 13 Apr 02:01:41 \\* Removing the pid file.\n[4414] 13 Apr 02:01:41 # Redis is now ready to exit, bye bye...\n[5141] 13 Apr 02:10:07 \\* Server started, Redis version 2.4.10\n[5141] 13 Apr 02:10:07 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hi, thanks for reporting, definitely a real bug... I think what it is, and I think it was actually also present in previous versions of Redis (but now 100% sure). More info soon...\n- Hey, this is what happens:\n\nSORT lookup keys for the \"GET\" option using a stack allocated _robj_ structure, however this object in the current 2.4.x implementation is no longer a \"read only\" object, to propagate the expire to the slave we use it to compose the protocol that we send to the slave. But this object can't be shared, as will be destroyed after the function returns. Hence everything crashes apart ;)\n\nWriting a fix. Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- uptime_in_seconds:607630\nuptime_in_days:7\n- It normal to run more than seven days"}
{"project_id": "Redis", "bug_id": "13", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Bug report, slowlog - EVAL\n[Symptom]:\nBug report output: [URL]\nTo reproduce: use latest github version, run with default options, system is 32 bit\n\nRun: eval \"local a; for b = 1,100000 do redis.call('sadd','set1',b) end return a\" 0\nRun: eval \"local a; for b = 50000,100000 do redis.call('sadd','set2',b) end return a\" 0\n\nSecond command always triggers a crash.\n\nUpdate 1: Changed title from \"Bug report, EVAL\" to include slowlog. It appears it happens during a slow logging of a command. Since above operations are slow, they will hit this code path pretty much every single time. I took the time to compile redis with jemalloc and lib c malloc and it happens just the same. Here is output of  a gdb session:\n\n```\nsudo gdb ./bin/redis-server 9683\nGNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08\nCopyright (C) 2011 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later   in ?? ()\n```\n\nUpdate 2: I've seen it crash with this gdb output as well\n\n```\nsudo gdb ../bin/bin-libc/bin/redis-server 10689\nGNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08\nCopyright (C) 2011 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <[URL]\nThis is free software: you are free to change and redistribute it.\n... [Log Snipped] ...\nfs             0x0  0\ngs             0x33 51\n```\n\n[Context/Logs]:\n- Thank you for reporting. Investigating. Sorry for the missing stack trace during the crash, this is due to two previous commit that broken the stack trace feature, now fixed into unstable (soon into 2.6 as well).\n- Hello again, I tried to reproduce this on different systems without success :(\nAre you able to reproduce this issue easily? Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Issue fixed, what I was really needing was 8 hours of sleep and not a core ;) From the stack trace it is quite clear what's happening. Please can you confirm that with latest commit everything is fine? Thanks.\n- With commit [URL] , it seems that everything is fine. So far, after several hundred calls to the same test script, server does not exhibit any problems."}
{"project_id": "Redis", "bug_id": "25", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Redis-sentinel 3.2rc1 crashed after master was shutdown using \"poweroff\"\n[Symptom]:\nRedis-sentinel on one of the slaves crashed after master was shut down using the \"poweroff\" system command.\n\n```\nJan 26 15:52:06 redis-sentinel[652]: 652:X 26 Jan 15:52:06.315 # +sdown master redis-data-development   6379\nJan 26 15:52:06 redis-sentinel[652]: 652:X 26 Jan 15:52:06.315 # +sdown sentinel  :26379   26379 @ redis-data-development   6379\nJan 26 15:52:07 redis-sentinel[652]: 652:X 26 Jan 15:52:07.180 # +new-epoch 22\nJan 26 15:52:07 redis-sentinel[652]: 652:X 26 Jan 15:52:07.188 # +vote-for-leader   22\nJan 26 15:52:07 redis-sentinel[652]: 652:X 26 Jan 15:52:07.440 # +odown master redis-data-development   6379 #quorum 2/2\n... [Log Snipped] ...\nJan 26 15:52:08 systemd[1]: redis-sentinel.service: main process exited, code=killed, status=11/SEGV\nJan 26 15:52:08 systemd[1]: Unit redis-sentinel.service entered failed state.\n```\n\n[Context/Logs]:\n- Thanks, I was pretty sure there were left crashes on edge cases in Sentinel of Redis 3.2, connection sharing changed too many internals... I hope I can fix this before RC2 which is due for tomorrow.\n- Thank you for a quick reply. I just noticed that the bug persists on this server event after restarting redis-sentinel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thanks @pako-pl, your help was really appreciated! RC2 will be released within the next 24h.\n- p.s. It will be just the last commit of the 3.2 branch tagged as \"RC2\" so if you want to use it, you can just grab it right now."}
{"project_id": "Redis", "bug_id": "26", "source_type": "github", "confidence": 0.85, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Node of redis-cluster dies with certain sequences of commands\n[Symptom]:\nHi,\n\nWhile playing with redis-cluster today I noticed that certain sequences of commands can make a node of the cluster die. The OS is a Linux 32bit VM (full details are in the dump at the end of this ticket) and the cluster is composed of three nodes configured as follow:\n\n```\n./redis-trib.rb create  :6379  :6380  :6381\n```\n\nThis is the sequence of commands that always make the node fail (the key `foobar` is in the slot covered by node ` :6379`):\n\n```\nredis  :6379> SET foobar test\nOK\nredis  :6379> MGET foo foobar\n(error) ERR Multi keys request invalid in cluster\nredis  :6379> GETRANGE foobar 0 1\n... [Log Snipped] ...\nredis  :6379> GETRANGE foobar 0 1\nCould not connect to Redis at  :6379: Connection refused\n```\n\nThe thing I noticed is that the node starts acting strange only after issuing `MGET` with multiple keys, which returns a `-ERR` as one would expect, but only certain commands make the node fail after that one: for example it crashes with `GETRANGE` or `SETRANGE`, but `GET` or `EXISTS` seem to work normally returning the expected results. In the majority of cases the node crashed at the third `GETRANGE` request, but there were times when the node crashed instantly.\n\nThis is the dump generated by the failing node when issuing `GETRANGE` three times:\n\n```\n[12830] 29 Jul 10:17:04.321 #     Redis 2.9.7 crashed by signal: 11\n[12830] 29 Jul 10:17:04.321 #     Failed assertion:   ( :0)\n[12830] 29 Jul 10:17:04.321 # --- STACK TRACE\n./redis-server(logStackTrace+0x71)[ ]\n/lib/i386-linux-gnu/libc.so.6(+ )[ ]\n... [Log Snipped] ...\n[12830] 29 Jul 10:17:04.325 # (bfea2498) -> b684e218\n[12830] 29 Jul 10:17:04.325 #\n```\n\nAnd this is the dump generated when just the first `GETRANGE` made the node crash (note that the stack trace is different and the generated dump is incomplete):\n\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[21541] 29 Jul 10:52:23.419 #     Redis 2.9.7 crashed by signal: 11\n[21541] 29 Jul 10:52:23.419 #     Failed assertion:   ( :0)\n[21\n...[Description Truncated]...\n\n[Context/Logs]:\n- I was able to reproduce this. Fixing today, thanks.\n- Fixed, thanks."}
{"project_id": "Redis", "bug_id": "35", "source_type": "github", "confidence": 0.9, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: Master is not configured as Slave after failure and reboot\n[Symptom]:\nI had thought that Sentinel would (after a master crashed), wait for the old master to come back online, when it detects it, it would configure it to be the slave of the newly promoted master.\n\nI see this on the main documentation for Sentinel:\n\"Moreover, after a failover, the failed over master is virtually added as a slave of the new master, this way it will be reconfigured to replicate with the new master as soon as it will be available again.\"\n\nWe're using version \"3.2.0-1.el6.remi\".   We carried out this test as a way to smoke test our installation\\configuration was correct, but are left a bit puzzled as the slave is promoted to master, but when we restart the redis server on the old master, it never gets its configuration updated (to configure it as a slave).  It seems like Sentinel has stopped monitoring it.\n\nCould I get a comment from the Redis team, is this a bug?\n\n[Context/Logs]:\n- Apparently this was not a problem in redis sentinel version 3.0.7\n- Same issue here, reported in /r/redis: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- On top of that note that, actually, it is not possible to reset `pending_commands` in `instanceLinkConnectionError()`, since this gets called only in the context of an error reported by hiredis. If we reset the count there, the hiredis callback, after returning, will process the pending requests that will contain `pending_commands--` in order to report back the count to 0, so we'll get negative pending commands count.\n\nApparently the best strategy appears to do that on reconnection instead:\n\n```\ndiff\ndiff --git a/src/sentinel.c b/src/sentinel.c\nindex 6c48f3e..f8ebd0c 100644\n--- a/src/sentinel.c\n+++ b/src/sentinel.c\n... [Log Snipped] ...\n             link->cc->data = link;\n             redisAeAttach(server.el,link->cc);\n```\n- Thanks antirez and sskorgal.\n\nI have tested it out and can confirm that its fixed in 3.2.1, thanks again."}
{"project_id": "Redis", "bug_id": "44", "source_type": "github", "confidence": 0.7, "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "[Title]: redis rewriting AOF failed and crash\n[Symptom]:\n```\n...\n[9561] 09 Jan 17:10:08.374 * Starting automatic rewriting of AOF on 100% growth\n[9561] 09 Jan 17:10:08.552 * Background append only file rewriting started by pid 29812\n[9561] 09 Jan 17:10:31.007 * Asynchronous AOF fsync is taking too long (disk is busy?). Writing the AOF buffer without waiting for fsync to complete, this ma\ny slow down Redis.\n... [Log Snipped] ...\n[29812] 09 Jan 17:10:47.812 # ( ) ->  \n[29812] 09 Jan 17:10:47.812 #\n```\n\n[Context/Logs]:\n- From the bug report, it is either an issue with the hardware (like a memory error), or a subtle bug in the ziplist implementation.\n\nA few things:\n- Please could you test the system memory and report back?\n- In general the system appears to work well? It is the first time you get a crash?\n\nIf system is ok it's worth investigating the dump of registers and the stack to see if there is some clue about the values that triggered this issue.\n\nThanks for reporting\n- Sorry another question.\n\nFrom your bug report it seems like only the child crashed, so is the instance actually still running?\n\nIn that case, does BGSAVE successfully produce an RDB file, or the child crashes again? Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Please could you report if this happened again after the first time? Thanks.\n- Can't act for lack of info, closing. Thanks for reporting, please reopen if it happens with a recent Redis 2.6.x release."}
