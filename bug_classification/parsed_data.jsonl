{"project_id": "Alacritty", "bug_id": "1", "source_type": "github", "llm_input_text": "[Title]: Scrolling vim in tmux while a separate pane is printing causes corruption\n[Symptom]:\nGiven this setup\n\n[Image: image]\n\nScrolling a vim split **while the middle left pane is printing** will cause vim to become corrupt as shown in this screenshot:\n\n[Image: image]\n\nI have a theory that this is because writing to the _pty_ is not synchronized at all. The input thread simply writes to the file descriptor when it has data to write. The only way to test if this is true would be implementing an actual event loop for I/O. The easiest way to do that is dropping mio into the pty thread and sending all writes from the input handling over the mio channel.\n\n[Context/Logs]:\n- I actually managed to reproduce it with a slightly simpler tmux arrangement. It did not seem to be an issue when there was not a vertical split on the bottom. This may suggest that it's not concurrent read + write that's an issue but instead something to do with printing data while not in a scrolling region.\n\n[Image: image]"}
{"project_id": "Alacritty", "bug_id": "2", "source_type": "github", "llm_input_text": "[Title]: Resizing doesn't work properly on macOS\n[Symptom]:\nThe out-of-band resize events on macOS don't trigger a refresh. Need to make it possible to kick the event loop from that resize handler.\n"}
{"project_id": "Alacritty", "bug_id": "3", "source_type": "github", "llm_input_text": "[Title]: Doesn't shutdown properly from EOF on macOS\n[Symptom]:\nJust open Alacritty and hit ` ` to repro\n"}
{"project_id": "Alacritty", "bug_id": "4", "source_type": "github", "llm_input_text": "[Title]: Sometimes reading from pty doesn't trigger a draw\n[Symptom]:\nSeems to have happened since the last major refactor.\n"}
{"project_id": "Alacritty", "bug_id": "5", "source_type": "github", "llm_input_text": "[Title]: Use XDG_CONFIG_PATH value\n[Symptom]:\nCurrently hardcoded to `$HOME/.config`, but that's not necessarily correct. [URL]\n"}
{"project_id": "Alacritty", "bug_id": "6", "source_type": "github", "llm_input_text": "[Title]: UK keyboard layout: '#' and '~' key not working on Linux with x11\n[Symptom]:\nI've just quickly followed the dependencies for keyboard input. It looks like alacritty depends on [Link: glutin] which for linux depends on [Link: winit] and I found the following lines are commented out in the most recent version [Link: src/api/x11/events.rs#L177] and [Link: src/api/x11/events.rs#L270].\r\n\r\nThis seems to be relevant to my issue but I am unsure why it has been commented out. If this is the reason then the layout of my keyboard is irrelevant and most likely other linux users would have the same problem.\r\n\r\nHaving encountered the issue while using alacritty I'm submitting an issue here but should I also post an issue on winit? Or is there another reason for this issue?\n\n[Context/Logs]:\n- This problem would need to be fixed upstream in `winit` as you've suggested. Alacritty is actually on an older for of `glutin` from before the split, and so there would still be some work here to get an upstream patch.\n- I'll see if I can fix it tomorrow. Any particular reason you are using an older version of `glutin`? Is it changing too often?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can we confirm this is fixed ? If so, the issue can be closed\n- if you  can see the mentioned PR isn't yet landed."}
{"project_id": "Alacritty", "bug_id": "7", "source_type": "github", "llm_input_text": "[Title]: PgUp and PgDown don't work\n[Symptom]:\n\n"}
{"project_id": "Alacritty", "bug_id": "8", "source_type": "github", "llm_input_text": "[Title]: `alt` key don't work\n[Symptom]:\nexample:\r\n\r\n```\npython\r\nimport curses\r\n\r\ndef Main(screen):\r\n   while True:\r\n... [Log Snipped] ...\n\r\ncurses.wrapper(Main)\n```\r\n\r\n<img width=\"556\" alt=\"screenshot_20170103_151940\" src=\"[URL]\n\n[Context/Logs]:\n- I had no idea this was a thing. I've looked into this a bit, and ALT seems to be quite a special case for terminal emulators. When there's a key pressed with alt, the terminal emulator should send the escape character (`27` or `\\033` or `\\x1b`) followed by the character that was pressed.\n- Should be fixed :smile:\n- Also, thanks a lot for the curses script; it was very helpful!"}
{"project_id": "Alacritty", "bug_id": "9", "source_type": "github", "llm_input_text": "[Title]: Scrolling should not write to the pty when one of the mouse modes isn't active\n[Symptom]:\n\n"}
{"project_id": "Alacritty", "bug_id": "10", "source_type": "github", "llm_input_text": "[Title]: Improve error handling for font loading\n[Symptom]:\nCurrently there's a failing assertion that the user sees as a backtrace. cc #21\n\n[Context/Logs]:\n- Refactored fontconfig usage to not panic. Still need to have some better error handling when fonts are not found."}
{"project_id": "Alacritty", "bug_id": "11", "source_type": "github", "llm_input_text": "[Title]: alacritty does not draw background color for (some) invisible characters\n[Symptom]:\nFor example in htop.\r\n[Image: alacritty_bg_example]\r\nEasily visible in this command:\r\n```zsh\r\nyes \"$(seq 16 231)\" | while read i; do printf \"\\x1b[48;5;${i}m\\n\"; sleep .02; done\r\n```\r\nbecause it is entirely invisible in alacritty, but visible in other terminal emulators\n\n[Context/Logs]:\n- Thanks for the report! This should be relatively easy to fix as soon as I can make some time.\n- @jwilm Duplicate issue #123 logged. Hopefully this will provide some extra testing scenarios.\r\n\r\nWould it be possible to point to the general direction where this sort of thing is handled in the alacritty codebase? Maybe as a beginner task that is easy to fix?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Actually the gif I posted above explains this quite nicely. You can see the `linefeed` debug being printed out even though nothing new is really being rendered. Could this bit of code be to do with moving at all - rather than just rendering \"new\" things on screen?\r\n\r\nEDIT: I think it may be easier to see this and find the code responsible with a step through debugger. I'm heading off for a little bit now - but maybe by the time I get back somebody would've beat me to the bug fix :P\r\n\r\nEDIT EDIT: I'm going to throw a guess out there and say that the easiest place to fix this would be the renderer? Although it would be more desirable to fix it further up the chain where it is easier to unit test. Commenting out loud here :)\n- @CarwynNelson ~~I think I've managed to fix it here: [URL]\r\n\r\nWould you mind trying this commit before I make a PR? \ud83d\ude03 \r\nAt the moment I'm only fixing '\\t' and '\\n' any other white space chars I should fix?\r\n\r\nEDIT: sorry, some issue with normal linefeed"}
{"project_id": "Alacritty", "bug_id": "12", "source_type": "github", "llm_input_text": "[Title]: Scrolling breaks in vim with ttymouse=sgr on Linux\n[Symptom]:\nScrolling always goes down regardless of which way the mouse wheel moves.\n"}
{"project_id": "Alacritty", "bug_id": "13", "source_type": "github", "llm_input_text": "[Title]: [Ranger] Bright colors do not get transferred correctly to bg color\n[Symptom]:\n[Image: ranger]\r\n\r\nUrxvt top, alacritty bottom.\r\n\r\nWhen using ranger with alacritty I noticed that the colors do not match with the ones I get with urxvt. It seems like ranger uses the current color of the file type to draw the background. However in alacritty it doesn't seem to take into account that the bold text changed the color and instead uses the non bright color to draw the bg strip.\n\n[Context/Logs]:\n- There's a config option to draw bold text with bright colors. Please make sure you've got that enabled and that your bright colors are configured differently than normal colors.\n- If you mean `draw_bold_text_with_bright_colors: true` then I have that activated, yes.\r\n\r\nAs you can see in the screenshot, the bold text has a different color than the bg color with alacritty.\r\nHere is my color settings:\r\n```\n# Colors (Tomorrow Night Bright)\r\ncolors:\r\n  # Default colors\r\n  primary:\r\n    background: ' '\r\n... [Log Snipped] ...\n    cyan:    ' '\r\n    white:   ' '\n```\n- Oh, sorry. I misunderstood. Sounds like a bug.\n- @jwilm It seems like the problem is the \"invert\" color terminal code:\r\n```\r\necho -e \"\\e[32mNormal \\e[7mInverted\\e[27m \\e[1mBold \\e[7mInverted Bold\\e[27m\"\r\n```\r\n\r\nPaste that into your terminal and you will see that the inverted bold is not correctly handled. I did take a look at where the bright color computation happens and I think that it happens too late in the pipeline to be able to handle this.\r\n\r\nBecause as it is now, the fg and bg colors are split of long before the bright check happens. So it is impossible to know if the bg color should be bright or not."}
{"project_id": "Alacritty", "bug_id": "14", "source_type": "github", "llm_input_text": "[Title]: If a job is running in the background, the terminal won't exit\n[Symptom]:\nIf I do, for example, this:\r\n\r\n    xclock & disown\r\n\r\nand then exit, the terminal gets unresponsive and won't exit; and I have to use my WM's \"destroy\" utility to get rid of it.\n\n[Context/Logs]:\n- In this case, `io_thread.join()` in `main.rs` never actually joins. After `join()` is called, we receive one more event of kind `is_hup()` which (as far as I can see) we should respond to by shutting down the event loop. We currently just loop again, which in turn causes the event loop to wait forever and never allow it to join to the main thread. Hilarity ensues.\n- @lukaslueg I'm not seeing the same thing you are\r\n\r\n```rust\r\nif kind.is_hup() {\r\n    break 'event_loop;\r\n}\r\n```\r\n\r\nThis breaks the outermost loop, and the thread function returns.\n- Yes. My goggles, they do nothing.\r\n\r\nBut `join()` never returns..."}
{"project_id": "Alacritty", "bug_id": "15", "source_type": "github", "llm_input_text": "[Title]: thread 'main' panicked at 'index 50 out of range for slice of length 48', /checkout/src/libcore/slice.rs:578\n[Symptom]:\n```\nRUST_BACKTRACE=1 alacritty\r\nthread 'main' panicked at 'index 50 out of range for slice of length 48', /checkout/src/libcore/slice.rs:578\r\nstack backtrace:\r\n   0:  \r\n   1:  \r\n... [Log Snipped] ...\n  14: __libc_start_main\r\n  15:  \n```\r\n\r\nArch Linux, `alacritty-git`, happens with both rust stable and nightly from rustup.\n\n[Context/Logs]:\n- I am running into the same problem, it seems to crash in glyph loading :\r\n\r\n```\n7:       - core::slice::slice_index_len_fail::h32dba95666464c4a\r\n                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libcore/slice.rs:578\r\n   8:       - font::ft::FreeTypeRasterizer::get_rendered_glyph::h4dec5f9eab2e4824\r\n                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libcore/slice.rs:709\r\n                        at /buildslave/rust-buildbot/slave/stable-dist-rustc-linux/build/src/libcore/slice.rs:560\r\n... [Log Snipped] ...\n                        at /home/jc/.local/src/alacritty/font/src/ft/mod.rs:85\r\n  11:       - alacritty::display::Display::new::h59275a39cc7a9c46\n```\r\n\r\nI tried to do a `git bisect` on this, and I found that   is responsible. But this commit does not build : \r\n\r\n```\nCompiling font v0.1.0 (file:///home/jc/.local/src/alacritty/font)\r\nerror: this file contains an un-closed delimiter\r\n   --> font/src/ft/list_fonts.rs:587:2\r\n    |\r\n587 | \r\n... [Log Snipped] ...\n\r\nerror: Could not compile `font`.\n```\n- @gutigen, you still can use 28700ed for the moment but I don't know how to tell it to AUR.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Was testing out Alacritty earlier today and ran into this. Built from master (using Rust 1.16.0), running on Arch Linux, and it only happens when I set the font size to something smaller than `10.0` (though the \"breaking point\" appears to be at `9.5` but I initially wanted to set it to `9.0`).\n- You've got what may be a duplicate bug here: #185 \r\n\r\nI'll cross-post some digging I did (seems to have to do with pitch and width calculations, and perhaps width being larger than pitch?):\r\n\r\nI've run into this issue as well (specifically the 'index 68 out of range for slice of length 64' version of the panic). Here is some gdb info at the point where the panic occurs in font/src/mod.rs:\r\n```\n(gdb) next\r\n212             let mut packed = Vec::with_capacity((bitmap.rows() * bitmap.width()) as usize);\r\n(gdb)\r\n213             for i in 0..bitmap.rows() {\r\n(gdb)\r\n... [Log Snipped] ...\nglyph_key =  \r\nhave_recursed = true\n```\r\nNote that pitch = 4, while the difference between start and end (i.e. bitmap.width()) is 8. On our last iteration, we end up here (some variables omitted):\r\n```\r\n(gdb) info locals\r\nstop = 68\r\nstart = 60\r\ni = 15\r\niter = core::ops::Range  {start: 16, end: 16}\r\npitch = 4\r\nbuf = &[u8] {data_ptr:   \"\\000\", length: 64}\r\nc = 127 '\\x7f'\r\n```\r\nNot sure how best to fix it. My stopgap is to replace line 216 in mod.rs with:\r\n```\r\nlet stop = cmp::min(buf.len() as usize, start + bitmap.width() as usize);\r\n```\r\n...but I'm sure there's a better way. Let me know if there is any other info from the trace you need."}
{"project_id": "Alacritty", "bug_id": "16", "source_type": "github", "llm_input_text": "[Title]: Vim theme background colours not rendered properly\n[Symptom]:\nI have the [Link: gruvbox] theme setup for vim but the background colour does not seem to be rendering properly.\r\n\r\nAlacritty on the left vs iterm2 on the right\r\n\r\n<img width=\"1276\" alt=\"screen shot 2017-01-07 at 00 16 59\" src=\"[URL]\n\n[Context/Logs]:\n- I also have colour issues with vim. I use the solarized dark theme in alacritty and vim. Works in st and gnome-terminal.\r\n\r\n\r\n[Image: vimissue]\n- Thanks @d3rrial I will close this issue and link to it in #85.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Same here. #720 fixes it.\n- #720 fixes it for me too. Thank you! It also fixed the basic background color which was not taking into account outside of Vim. Amazing!\r\n\r\nOn the left is before #720. On the right is with #720.\r\n[Image: selection_010]\r\n\r\nOpening a file in Vim without scrolling\r\n[Image: selection_011]\r\n\r\nOpening a file in Vim, then scrolling down\r\n[Image: selection_012]"}
{"project_id": "Alacritty", "bug_id": "17", "source_type": "github", "llm_input_text": "[Title]: \"out of bounds\" crash - access beyond last row?\n[Symptom]:\nRunning the irssi irc client continuously in tmux on a remote machine causes alacritty to always crash after irregular amounts of time.\r\n\r\nThe window has 81 rows, so it seems something is trying to access rows that don't exist.\r\n\r\nAlacritty version is   from github.\r\n\r\nRun as:\r\n```RUST_LOG=full RUST_BACKTRACE=full ./target/debug/deps/alacritty- ```\r\n\r\nFull backtrace:\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 82 but the index is 82', /Users/travis/build/rust-lang/rust/src/libcollections/vec.rs:1552\r\nstack backtrace:\r\n  0:          - std::sys::imp::backtrace::tracing::imp::unwind_backtrace::h884a721e113c3303\r\n  1:          - std::panicking::default_hook::{{closure}}::h7a7d734b2824d103\r\n  2:          - std::panicking::default_hook::h3eb11bd6cbfdc331\r\n... [Log Snipped] ...\n 29:       - _pthread_body\r\n 30:       - _pthread_start\n```\r\n\r\nThe durations after which crashes have occurred:\r\n```\n14936.222349\r\n72115.422882\r\n43475.226691\r\n25231.261642\r\n31821.904172\r\n... [Log Snipped] ...\n29907.619427\r\n15108.094483\n```\r\n\r\nRunning on OSX 10.11.6.\n\n[Context/Logs]:\n- Added\r\n```\ndiff --git a/src/term/mod.rs b/src/term/mod.rs\r\nindex 59cf6ba..7e6ef7c 100644\r\n--- a/src/term/mod.rs\r\n+++ b/src/term/mod.rs\r\n@@ -235,11 +235,20 @@ impl  RenderableCellsIter  {\r\n... [Log Snipped] ...\n \r\n     fn initialize(mut self, cursor_style: CursorStyle) -> Self {\n```\r\nto see what's going on, and this is the result:\r\n```\n27.766116      Running `target/debug/alacritty -v -v -v -d 222 82`\r\n40.905544 in populate_no_cursor: line: 62/82 col: 66/222\r\n44.834063 in populate_no_cursor: line: 63/82 col: 94/222\r\n348.115005 in populate_no_cursor: line: 5/82 col: 8/222\r\n355.532341 in populate_no_cursor: line: 63/82 col: 23/222\r\n... [Log Snipped] ...\n2905.169103   29:       - _pthread_body\r\n2905.169113   30:       - _pthread_start\n```\r\nso the cursor appears at column 0 one line beyond the screen.\r\nHope it helps in tracking the error down.\r\n\r\nThe error is triggered when my network connection has issues and my ssh session - running irssi in tmux - goes down.\r\n\r\nI'll figure out how to set `cursor.line` to `grid.num_lines() - 1` for now to see what happens.\n- An instance with the solution in   has been running for over a week now without any crashes. Before applying the fix, alacritty would crash several times per day.\r\n\r\nIt can be tested with:\r\n```sh\r\ntput csr 10 20; tput cup 25; for ((i=0; i  but not activated. Maybe it can be done with:\r\n```\ndiff\r\ndiff --git a/tests/ref.rs b/tests/ref.rs\r\nindex cea814e..7b820d3 100644\r\n--- a/tests/ref.rs\r\n+++ b/tests/ref.rs\r\n... [Log Snipped] ...\n     tmux_git_log\r\n     tmux_htop\n```"}
{"project_id": "Alacritty", "bug_id": "18", "source_type": "github", "llm_input_text": "[Title]: Problem loading fonts\n[Symptom]:\nHello, I am trying to use this font: [Link: ypn envypn]\r\n\r\nMy configuration looks like this:\r\n\r\n```\nyml\r\nfont:\r\n  normal:\r\n    family: ypn envypn \r\n  bold:\r\n... [Log Snipped] ...\n    y: 0.0\r\n  use_thin_strokes: false\n```\r\n\r\nBut i get the following error:\r\n\r\n```bash\r\nthread 'main' panicked at 'index out of bounds: the len is 0 but the index is 0', src/libcollections/vec.rs:1431\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n```\r\n\r\nDid i miss something? I tried to adjust the size and the offset to see if there would be any difference but it's the same, is this a bug?\n\n[Context/Logs]:\n- Hmm, would you mind running this again with `RUST_BACKTRACE=1 alacritty`? Hard to say what the problem is with the short error.\n- I think that this might be fixed with #590. At least for me, I got the same error when I tried to use bitmap fonts before that was merged. But now it seems to be working nicely :)\n- ... [Middle Discussions Snipped for Brevity] ...\n- [Link: Tamzen] used with `Tamzen for Powerline` works with `size: 9.0` but nothing else\n- I've managed to fix this problem in pull request #776, more testers are welcomed."}
{"project_id": "Alacritty", "bug_id": "19", "source_type": "github", "llm_input_text": "[Title]: Prevent decreasing font size beyond the minimal value\n[Symptom]:\nLinux, X11.\r\nExtracted from [URL]\r\n\r\n-----\r\n\r\nI played with holding  Ctrl +/-  and found a silly issue, posting just in case you can immediately think of a simple fix, otherwise I guess it's not worth looking into:\r\n\r\n- Hold  Ctrl + . The value reaches its maximum value (274 in my case) and stays there, pressing  Ctrl +  further has no effect. Pressing  Ctrl -  once reduces font size to 272.\r\n- Now hold  Ctrl - . The value reaches its minimum value (2 in my case), but further presses of  Ctrl -  change the value to 2, again and again. If I press  Ctrl -  10 times after I already reached the minimal value of 2, then pressing  Ctrl +  once will have no effect - the font size will stay at 2. I have to press  Ctrl +  10 times to compensate for my earlier actions, before further presses of  Ctrl +  begin to actually increase the font.\n\n[Context/Logs]:\n- I can confirm this too.\n- I don't believe that #949 fixed the issue described in [URL]\r\n\r\nThe issue is with this call to Atlas#insert. If the font size is increased until it is too big to fit into a single atlas, Atlas#insert will always return an Err. This leads to load_glyph recursing infinitely, since inserting the glyph into an Atlas will never succeed.\n- @Aaron1011 It does actually fix the issue tho. The issue was never that the glyph was too big for a single atlas. Have you tested it out yourself? With #949 the crash doesn't happen anymore when increasing font size. The problem was that the atlas never changed, so there was never a new atlas that was created.\r\n\r\nIn theory you could run into problems with glyphs being too big for a single atlas, but I don't think that's even possible to happen because of gpu restrictions. I've played around with it a bit myself and the max font size goes up to a limit and then just stops. The worst thing I was able to reconstruct was that a few glyphs didn't show up anymore because my gpu driver was spouting errors about textures being too big. I don't think fitting a single glyph into an empty atlas has ever been the actual issue. Or can you still reproduce the issue after #949.\r\n\r\nI did initially play with changing the recursion strategy, but it turned out for me that after I fixed the obvious problem, all the other issues were resolved too."}
{"project_id": "Alacritty", "bug_id": "20", "source_type": "github", "llm_input_text": "[Title]: Invoking Paste/PasteSelection commands in editor (vim, nano) mangles pasted text with existing text\n[Symptom]:\nA screencast comparing gnome-terminal (left) to alacritty (right) will do better than words:\r\n\r\n[Image: alacritty-paste-in-editor-inserts]\r\n\r\nThe key_binding I invoked is visible on the screencast, it is:\r\n\r\n```\r\n- { key: V,        mods: Control|Shift,    action: Paste               }\r\n```\r\n... and I tried `PasteSelection`, with the same results. Am I doing something wrong or is it a bug?\r\n\r\nThis is alacritty master @   vs. gnome-terminal 3.18.3, no tmux, under Ubuntu 16.04.3 LTS.\n\n[Context/Logs]:\n- Interesting bug, I wondered why I haven't seen it before, apparently I can reproduce it in `nano`, but not in `vi`, `vim` or `nvim`. Curious why...\n- I did some testing and if you have `\\n` you get smashed lines, `\\r\\n` you get doubled lines, `\\r` you get correct lines.\r\n\r\nDemonstration\r\n[Link: [Image: thumbnail]]\r\n\r\nNot sure whether this info helps though.\n- ... [Middle Discussions Snipped for Brevity] ...\n- In case it matters (probably not, but it may spare duplication of efforts):\r\n\r\nI verified (on macOS) that `nano` does *not* set alacaritty in bracketed paste mode (`nvim` does).\r\n\r\nAltering `input.rs` to always force bracketed paste does alter the behaviour in `nano`, but unfortunately the new behaviour, too,  is incorrect.\r\n\r\nUse `echo -e '\\e[?2004h'` if you are curious to test it yourself: no need to alter `input.rs` and recompile (see [URL]\n- Apparently, non-bracketed pasting *is* the issue here.\r\n\r\nWhen the \"enter\" key is hit, a `CR` (`^M`) is generated (see [URL]\r\n\r\nIn non-bracketed mode, `LF`s (`^J`) in pasted data have to be replaced with `CR`s in order to simulate keypresses.\r\n\r\nIn non-bracketed mode, applications have no way of distinguishing if data comes from the keyboard or the clipboard, so it seems sensible that a terminal must simulate keypresses.\r\n\r\nTo me it is not 100% clear to what extent a terminal is supposed to do that (ie: whether octets corresponding to other control characters or maybe to bytes with the high bit set should be processed). Maybe data bytes should be interleaved with `^V`s? Or maybe bracketed mode is how pasting is supposed to work and applications that don't use it are at fault?\r\n\r\nAnyhow, replacing `\\r` with `\\n` seems an improvement and it is what [Link: jediterm] does."}
{"project_id": "Alacritty", "bug_id": "21", "source_type": "github", "llm_input_text": "[Title]: Alacritty's `-v` flag does not work\n[Symptom]:\nAlacritty's `-v` flag is used to help with debugging issues and print what is currently going on in the application. This should provide similar output to `RUST_LOG=... alacritty`.\r\n\r\nHowever with recent versions of alacritty, the output of `-v` is completely empty.\r\n\r\nThis should be fixed so that `-v` outputs debug information again. The different levels of this flag (`-v`, `-vv`, `-vvv`) are all broken and should be fixed to recover the original functionality. So `-v` should print minimal debug information and `-vvv` should print everything we have.\n"}
{"project_id": "Alacritty", "bug_id": "22", "source_type": "github", "llm_input_text": "[Title]: Scrolling region regression\n[Symptom]:\nScrolling regions are broken when there's a fixed bar at top _and_ bottom. This is best demonstrated by `htop`.\n\n[Context/Logs]:\n- This is most easily reproduced by opening two buffers in vim using the tabbed layout which should cause a fixed line to appear at top and bottom of screen. Next, hit control up/down in one of the open buffers (assuming it's got lots of lines), and half the screen should remain empty."}
{"project_id": "Alacritty", "bug_id": "23", "source_type": "github", "llm_input_text": "[Title]: Cursor disappears on first column in vim\n[Symptom]:\nMoving the cursor down in vim while on the first column causes the cursor to disappear until moved to the second column of a non-empty line. This is on macOS or Linux, vim or neovim, on the scrollback branch at  .\r\n\r\nReproduce: `vim <(echo 'one\\ntwo\\n\\nthree')` and scroll down.\n\n[Context/Logs]:\n- Thanks for filing the issue! I also noticed a problem of the cursor disappearing when using vim-fugitive and `:Gblame`.\n- This was fixed."}
{"project_id": "Alacritty", "bug_id": "24", "source_type": "github", "llm_input_text": "[Title]: Scrollback: `reset` Still Allows Scrollback\n[Symptom]:\nSystem: X11 on Arch Linux\r\n\r\nUsing the latest scrollback branch, `reset` still allows me to scroll up afterwards, assuming you initially activate the scrollback ability by entering enough text vertically.\r\n\r\nOn a related note, `clear` may also need to be looked at, but I'm unsure if there's a spec for it, as both `xterm` and `urxvt` handle it differently. On `urxvt`, I'm able to scroll back up assuming I've filled the vertical space enough to allow scrolling, while `xterm` seems to never allow me to scroll back, regardless of the amount of text entered.\n"}
{"project_id": "Alacritty", "bug_id": "25", "source_type": "github", "llm_input_text": "[Title]: Scrollback: `reset` Still Allows Scrollback\n[Symptom]:\nSystem: X11 on Arch Linux\r\n\r\nUsing the latest scrollback branch, `reset` still allows me to scroll up afterwards, assuming you initially activate the scrollback ability by entering enough text vertically.\r\n\r\nOn a related note, `clear` may also need to be looked at, but I'm unsure if there's a spec for it, as both `xterm` and `urxvt` handle it differently. On `urxvt`, I'm able to scroll back up assuming I've filled the vertical space enough to allow scrolling, while `xterm` seems to never allow me to scroll back, regardless of the amount of text entered.\n"}
{"project_id": "Alacritty", "bug_id": "26", "source_type": "github", "llm_input_text": "[Title]: scrollback: thread 'pty reader' panicked at 'attempt to subtract with overflow', src/index.rs:168:28\n[Symptom]:\nalacritty @ scrollback , 8e8ecdd, debug build \r\n\r\n\r\n```\n`\r\nRUST_BACKTRACE=full target/debug/alacritty  -vvvvvvvvvvvvvv\r\n...\r\n[unhandled] execute byte=06\r\n[unhandled] execute byte=1f\r\n... [Log Snipped] ...\n  19:       - _start\r\n  20:                0x0 -  \n````\r\n\r\nin the new debug alacritty window:\r\n````\r\ncat /dev/urandom\r\n[prints random chars]\r\nwait until crash\r\n````\n\n[Context/Logs]:\n- This probably only happens in alacritty verbose mode.\n- I can reproduce it both with and without verbose output. However it only happens in debug mode for me, not in release mode.\r\n\r\nI'll be looking into it, thanks for the report.\n- This bug's origin is [Link: here] and can be reproduced by running `printf '\\e[1000L'`. I'll look into writing up a quick fix."}
{"project_id": "Alacritty", "bug_id": "27", "source_type": "github", "llm_input_text": "[Title]: Invert escape sequence incorrect\n[Symptom]:\nThe command `echo -e \"Normal \\e[101;91mTest \\e[7mInverted\"` will print `Inverted` with the default foreground color as background and the default background color as foreground.\r\nThe correct behavior would be to print it the same as `Test`.\r\n\r\nThis bug is due to the following code:\r\n[URL]\n\n[Context/Logs]:\n- The current behavior _should_ match urxvt. Is this a case we didn't cover?\n- This [Link: script] should check every combination\r\n\r\nEdit: inlined\r\n\r\n```\nsh\r\nprintf \"Fg=Black,     Bg=Background          \\e[30;49mTEST\\e[m\\n\"\r\nprintf \"Fg=Black,     Bg=Black               \\e[30;40mTEST\\e[m\\n\"\r\nprintf \"Fg=Foreground,Bg=Background          \\e[39;49mTEST\\e[m\\n\"\r\nprintf \"Fg=Foreground,Bg=Black               \\e[39;40mTEST\\e[m\\n\"\r\n... [Log Snipped] ...\nprintf \"Fg=Foreground,Bg=White,      Inverse \\e[7;39;47mTEST\\e[m\\n\"\r\nprintf \"Fg=White,     Bg=Foreground, Inverse \\e[7;37;39mTEST\\e[m\\n\"\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- btw, did you test with transparency? Some of our logic is specifically around handling that properly.\n- I did not, but that's a great point, I'll throw that in too."}
{"project_id": "Alacritty", "bug_id": "28", "source_type": "github", "llm_input_text": "[Title]: [Regression] broken `htop` display\n[Symptom]:\ncurrently affected master: 715d4f8\r\n\r\nworking revision: 82c9235\r\n\r\n[Image: spectacle qq8577]\r\n\r\nSteps to reproduce:\r\n\r\n1. `htop`\r\n2. wait a few seconds\r\n\r\nbisect:\r\n\r\n  is the first bad commit\r\n```\r\ncommit  \r\nAuthor: Anders Rasmussen  \r\nDate:   Mon Feb 27 19:12:04 2017 +1100\r\n\r\n    Update cell to cursor template when adding a tab.\r\n\r\n:040000 040000     M\tsrc\r\n```\n\n[Context/Logs]:\n- @zetok, I can't reproduce this on the latest master.  Can you retest?  If it's still occurring, are you running this under Linux or Mac?  (Could be render system dependent.)\n- I did test against latest master.\r\n\r\n\r\nLinux.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @maximbaz what's your terminfo file for tmux-256color look like? Seems like it might be declaring a feature that tmux doesn't support.\n- Hm, is this the file `/usr/share/terminfo/t/tmux-256color`? It consists of a bunch of escape sequences, I'm certain I haven't modified it \ud83d\ude42\r\n\r\nI've just tried tmux with the default config (where $TERM is `screen`) and the default config with just one override (`set -g default-terminal xterm-256color`, which makes $TERM `xterm-256color`), in both cases I see that same refreshing issue in htop."}
{"project_id": "Alacritty", "bug_id": "29", "source_type": "github", "llm_input_text": "[Title]: Terminal alternate mode is toggled, not set.\n[Symptom]:\nTry running `tput smcup` or `tput rmcup`. Both do the same thing. **Toggle** alternate mode.\r\n\r\n`smcup` is supposed to activate, and `rmcup` disable.\n"}
{"project_id": "Alacritty", "bug_id": "30", "source_type": "github", "llm_input_text": "[Title]: Touchpad scrolling is janky\n[Symptom]:\nI don't know exactly what's going on, but when I scroll with the touchpad it requires me to scroll a lot before it will even register, and then it scrolls a ton at once.\n\n[Context/Logs]:\n- According to hwinfo it's a \"ETPS/2 Elantech Touchpad\", if that helps at all\n- Could you run alacritty with `alacritty --print-events`, try scrolling, and pastebin the log? My initial guess is that we are getting funny data out of winit.\n- ... [Middle Discussions Snipped for Brevity] ...\n- 8a65870 fixes this. I'm unfamiliar both with Rust and with alacritty's structure, so this is indubitably the wrong way to do it (the state is getting passed all over the place, I used terrible names, and it's largely just a result of changing stuff until the compiler was happy without really knowing what I was doing). A review of how I should have done this would be very welcome :)\n- @lheckemann not a new issue, but I don't think a lot of people were likely to encounter it. It requires running x11 on a laptop with a trackpad that generates fractional line deltas in an application that supports scrolling with someone who uses the mouse in terminal. Probably why is hasn't been reported until recently.\r\n\r\nLove that you've put together a patch for it! I would be happy to provide feedback. Would you mind putting up a PR so we can use the GitHub review tool on it?"}
{"project_id": "Alacritty", "bug_id": "31", "source_type": "github", "llm_input_text": "[Title]: Excessive memory usage/leak during selection with less\n[Symptom]:\nLinux X11\r\n\r\nOn Alacritty 0.2, when working with large text files (in the order of millions of lines) I am using ```less``` as I don't want the terminal itself to deal with such large numbers of lines. Nonetheless, ```scrolling.history``` is set to 100000 lines.\r\n\r\nWhen I select lots of text in less using the mouse cursor, and exceed the upper or lower screen edge with the selection, Alacritty freezes and starts continuously consuming more and more memory. I managed to SIGSTOP it at 25.5GB, and it would've killed my system had I not managed to do that.\r\n\r\nIt seems something related to selections triggers a severe memory leak or unbound loop. I will try to provide better repro steps when I have the time.\n\n[Context/Logs]:\n- Ok, managed to repro.\r\n\r\n- Open ```less``` with a text file that contains a few screens worth of lines at least.\r\n- Scroll down a few screens\r\n- Select everything with the mouse, from bottom to top\r\n- Keep mouse selection button pressed\r\n- Scroll up using the mousewheel, **fast**, (mwheel events needs to be passed through to less)\r\n- When less reaches the top, release mouse selection button, while still scrolling up\r\n- Alacritty freezes and starts consuming memory\n- Wow, sounds bad. Thanks for the report. Prioritizing as high.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I have same issue, happened during text selection, but I'm not sure whether I was in less at the time. Anyways, I never had time to stop it, so it brought down the whole system.\n- With the commit applied, I can't reproduce the bug anymore. Thanks!"}
{"project_id": "Alacritty", "bug_id": "32", "source_type": "github", "llm_input_text": "[Title]: Inverted Selection when Faux Scrolling\n[Symptom]:\nRather than attempt to describe the problem in detail, here are the steps to reproduce.\r\n\r\n1. Run `man man`\r\n2. Scroll down  at least one line\r\n3. Select the some text from both the status line and the line above it\r\n4. Scroll up\r\n\r\nYou should see the selection become inverted.\n"}
{"project_id": "Alacritty", "bug_id": "33", "source_type": "github", "llm_input_text": "[Title]: Alacritty won't start if window.dimensions.columns and lines is 0\n[Symptom]:\nI have following in my config:\r\n```\r\nwindow:\r\n  dimensions:\r\n    columns: 0\r\n    lines: 0\r\n```\r\n\r\nThis seems to be breaking alacritty now with:\r\n```\r\nthread 'pty reader' panicked at 'index out of bounds: the len is 0 but the index is  ', libcore/slice/mod.rs:2052:14\r\n```\r\n\r\nI think it's broken by change: [URL]\r\n\r\nAlthough [Link: comment in the default config] says the `0` is valid:\r\n```\r\n# If both are `0`, this setting is ignored.\r\n```\n\n[Context/Logs]:\n- I was not aware that specifying 0 was allowed here. I would have expected optional values to use `Option` instead. I'll fix this asap to make it work again, but in the future there might be a better stylistic approach to optional values.\n- Would you mind testing if [URL] works?"}
{"project_id": "Alacritty", "bug_id": "34", "source_type": "github", "llm_input_text": "[Title]: Selecting large amounts of text makes highlight disappear\n[Symptom]:\nLinux X11\r\n\r\nWhen selecting text and scrolling at the same time using the new scrolling->history feature, there is a visual bug concering the selected text.\r\n\r\nWhen more text is selected than fits on the viewport, and the viewport is scrolled so that **only** selected text is visible, the selection marker (inverted colors) disappears. If the viewport is scrolled so that only parts of its contents are selected, the selection marker shows up fine.\n\n[Context/Logs]:\n- Thanks for the report! I believe that nobody actually ever tested selection while scrolling, since it's a bit awkward to do with a mouse.\r\n\r\nCurrently it seems like the selection only updates during mouse movement, not when scrolling. But since scrolling changes the text under the cursor, it should also update the selection. I believe implementing this should work around the issue of selection disappearing and it should provide the added benefit that selection during scroll feels more responsive.\n- Okay, so it turns out my original comment on this issue was a bit misguided. The selection not updating when scrolling and the issue reported here are entirely separate.\r\n\r\n**Edit:** See #1598 for the other issue I've mentioned in here and #1597 for a solution to this issue.\n- Confirmed fixed. Thank you!"}
{"project_id": "Alacritty", "bug_id": "35", "source_type": "github", "llm_input_text": "[Title]: Cursor not hollow when window starts unfocused\n[Symptom]:\nPlatform: Linux X11 (i3 specifically)\r\n\r\nWhen launching a new instance of alacritty, the cursor is a solid block despite the window being out of focus (I have `no_focus [tiling]` set in my i3 config). Focusing the window, then un-focusing it behaves correctly. For reference, the related settings are the defaults of `cursor_style: Block` and `unfocused_hollow_cursor: true`.\n\n[Context/Logs]:\n- [URL] resolves this issue on i3. I'd love some testing on macOS/Wayland if possible, but it should be good to go the way it is."}
{"project_id": "Alacritty", "bug_id": "36", "source_type": "github", "llm_input_text": "[Title]: Underlining \"jumps\" spaces between underlined text\n[Symptom]:\n## System\r\n|                  |                               |\r\n|------------------|-------------------------------|\r\n| Operating System | Arch Linux     |\r\n| Rust Version     | Stable, 1.31.1    |\r\n| Display Server   | X11 |\r\n\r\n## Summary\r\nEver since proper underlining was implemented in #1078, standalone Alacritty renders underlines that \"jump\" the spaces between underlined sections of text (see image below). Using #1921 does not change this behavior.\r\n\r\n[Image: image]\r\n\r\n## Extra\r\nI only noticed this because I fired up an Alacritty instance outside of tmux. For whatever reason, tmux properly handles the underlines between underlined-but-not-connected sections of text. See below for \"expected\" output, produced from within a tmux session:\r\n\r\n[Image: image]\r\n\r\nPotentially relevant `alacritty -vvv`:\r\n```\n[2018-12-31 00:10] [TRACE] carriage_return\r\n[2018-12-31 00:10] [TRACE] linefeed\r\n[2018-12-31 00:10] [TRACE] Set Attribute: Underscore\r\n[2018-12-31 00:10] [TRACE] Set Attribute: Foreground(Named(Green))\r\n[2018-12-31 00:10] [TRACE] Set Attribute: Reset\r\n... [Log Snipped] ...\n[2018-12-31 00:10] [TRACE] carriage_return\r\n[2018-12-31 00:10] [TRACE] linefeed\n```\n\n[Context/Logs]:\n- Fixed in [URL] Thanks for the report!"}
{"project_id": "Alacritty", "bug_id": "37", "source_type": "github", "llm_input_text": "[Title]: [regression] padding is breaking few things\n[Symptom]:\nUsing f182afa\r\n\r\n\r\nOSX. This is a regression.\r\n\r\n### 1. the documentation says it's using non-DNPI-scaled values\r\n\r\nBut I don't think that's true. For example, `18` looks like `72` hardware pixels.\r\n\r\n### 2. the last line of the terminal is not rendered.\r\n\r\nSTR:\r\n- set padding y to `2`\r\n- run terminal\r\n- press enter until the prompt reaches the last line\r\n- press enter one more time, see how the prompt is hidden\r\n\r\n###  3. the mouse coordinate is calculated wrong\r\n- set padding y to `20`\r\n- run terminal\r\n- type `man man`\r\n- double click on any word, see how the wrong word is select (one line below)\n\n[Context/Logs]:\n- 8161798 doesn't have these issues.\n- @paulrouget Could you share the output of `alacritty -v`? Specifically the cell size, window size and number of columns and lines.\r\n\r\nAlso would you mind testing [URL] If the issue doesn't happen with that commit, it might be good to just revert the last change temporarily to fix the stable release.\r\n\r\nAlso it is true that the padding is scaled by DPI now. The documentation needs to be updated.\n- Note that I was able to reproduce this on my system, so it's not necessary anymore to produce further debug output.\r\n\r\nI'll try to fix this asap."}
{"project_id": "Alacritty", "bug_id": "38", "source_type": "github", "llm_input_text": "[Title]: Crash when I `cat` a file\n[Symptom]:\nOn windows, I tried cat attached txt file and it crashed.\r\n[Link: protonmail_gray.txt]\n\n[Context/Logs]:\n- The only thing I can see with this which might cause issues is that it's missing a newline at the end of the file. That shouldn't crash anything, but would you mind adding a newline to the end of the file, just to troubleshoot where the issue is coming from?\r\n\r\nAlso, just to make sure: When you say 'it crashed', you're talking about Alacritty? Or are you talking about `cat`?\n- I tried with missing newline and Alacritty still crashes, the window suddenly disappears\r\n[Link: protonmail_gray.txt]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Geobert It does not crash on my system, since I'm running Linux. But great catch @PrsPrsBK.\r\n\r\nNot sure why this would be a problem though.\n- @Geobert It's nice!\r\n\r\n@chrisduerr I had bad experiences due to BOM. \r\nI see, it need to see `cat`'s  output (if exists), if I would like to know in detail. thanks.\r\n\r\n*added later* I did not experience the problem, I had just noticed BOM and wrote."}
{"project_id": "Alacritty", "bug_id": "39", "source_type": "github", "llm_input_text": "[Title]: Can't clear warning/error with `clear` or `CTRL-L` in tmux\n[Symptom]:\nWhich operating system does the issue occur on?\r\nFedora release 29 (Twenty Nine)\r\n\r\nIf on linux, are you using X11 or Wayland?\r\nX11\r\n\r\nThe warning/error which is displayed by Alacritty at the bottom of the terminal doesn't go away, if I press `CTRL-L` or type `clear` inside the terminal. It obviously works, if I'm outside of tmux, just not inside.\n\n[Context/Logs]:\n- Thanks for reporting this issue. I haven't considered tmux when adding the keybinding, but it makes sense that there might be some conflicts here.\r\n\r\nI'm not sure if there would be a way to fix this so that `C-L` and `clear` work, but it should definitely work to add a new keybinding, so hopefully that will fix it for everyone.\n- I've looked into which escape sequences are sent in `tmux` when running the `clear` command, just to check if there's something Alacritty could hook into to remove the errors and warnings when running that. Based on my testing, there's no nice escape sequence sent which would allow for that, so I'd probably just recommend adding a new key action which then can be used.\r\n\r\nJust for documentation, these escapes are sent when running `clear` inside of `tmux` on my system:\r\n```\n[Unhandled CSI] action='l', args=[2004], intermediates=[63] -> Reset bracketed paste mode\r\n[Unhandled CSI] action='r', args=[1, 30], intermediates=[] -> Set scrolling region [1, 30]\r\n[Unhandled CSI] action='r', args=[2, 30], intermediates=[] -> Set scrolling region [2, 30]\r\n[Unhandled CSI] action='S', args=[29], intermediates=[] -> Scroll up 29 lines\r\n[Unhandled CSI] action='H', args=[1, 1], intermediates=[] -> Cursor position [1, 1]\r\n... [Log Snipped] ...\n[Unhandled CSI] action='H', args=[1, 48], intermediates=[] -> Cursor position [1, 48]\r\n[Unhandled CSI] action='h', args=[2004], intermediates=[63] -> Set bracketed paste mode\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'll close it with the PR for the action. I'll open that in a sec.\n- I've opened the PR (https://github.com/jwilm/alacritty/pull/1814), feel free to test if this resolves the problem for you."}
{"project_id": "Alacritty", "bug_id": "40", "source_type": "github", "llm_input_text": "[Title]: Selection misses first character\n[Symptom]:\nSelecting in alacritty often misses the first character. Other terminals (such as urxvt and xterm) always include the first character in the selection even if only part of it is selected.\r\n\r\nEdit: I should add that this was tested on scrollback@4631ca4\r\n\r\nAlacritty:\r\n[Image: alacritty_selection]\r\n\r\nUrxvt\r\n[Image: urxvt_selection]\n\n[Context/Logs]:\n- This was an intentional design decision and I'm not sure if there's any intention to change it.\r\n\r\nAs far as I'm concerned I think it's the proper behavior to select a cell only if most of it is inside the selection.\n- Perhaps it isn't what I thought. Fiddling with text selection in chrome, I see similar behaviour where it only includes the character beneath the cursor if more than half of it is selected. This logically makes sense; however, in practice, alacritty is consistently failing to select as expected.\r\n\r\nThough I am now noticing another issue that may be the root cause of this. The start of the selection does not seem to be tied to where the mouse down event happened. You can click on a cell, wait, and then move the mouse quickly to start selecting and if you moved fast enough, the first cell of the selection will not be where you first clicked.\r\n\r\n[Image: alacritty_fast_selection]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thanks for looking into this! I'll take a peek at the code when I've got some time. Sounds like it's either a super simple fix or some really painful racing condition or something like that. :D\n- I've opened a PR which should fix this (#1389). I don't think there are going to be any issues with this, but testing is still always welcome! :)"}
{"project_id": "Alacritty", "bug_id": "41", "source_type": "github", "llm_input_text": "[Title]: How to disable URL launcher?\n[Symptom]:\nHow to completely disable URL launcher?\r\n\r\nEvery time I am trying to highlight an URL and then browser shows up,\r\n\r\nI would like to disable it.\r\n\r\n```\nyaml\r\nurl:\r\n    # URL launcher\r\n    #\r\n    # This program is executed when clicking on a text which is recognized as a URL.\r\n... [Log Snipped] ...\n    #   - (Windows) explorer\r\n    #launcher: xdg-open\n```\n\n[Context/Logs]:\n- It seems like this regression has been introduced when the configuration files have been merged.\r\n\r\nIt's still possible to disable URL launching by setting the `launcher` to `true`, but an option to disable this completely should be supported explicitly.\n- Fixed in #2059.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This seems to be ignored no matter how I set it. \r\n\r\nHere is the config:\r\n\r\n```\nhints:\r\n  hyperlinks: false\r\n\r\nenabled:\r\n   - regex: \"(ipfs:|ipns:|magnet:|mailto:|gemini:|gopher:|https:|http:|news:|file:|git:|ssh:|ftp:)\\\r\n... [Log Snipped] ...\n       key: U\r\n       mods: Control|Shift\n```\r\n\r\nIt still executes xdg-open when a link is clicked on.\n- How does this work in the new Alacritty where it uses TOML instead of Yaml?\r\nThe above regex when converted to TOML doesn't load."}
{"project_id": "Alacritty", "bug_id": "42", "source_type": "github", "llm_input_text": "[Title]: Decreasing font size too much causes division by zero\n[Symptom]:\nWhich operating system does the issue occur on?\r\nWindows. I have also tested on Linux/X11 and could not reproduce there.\r\n\r\nVersion of alacritty:\r\n \r\n\r\nHow to reproduce:\r\n1. Open alacritty\r\n2. Press `Ctrl`+`-` to scale the font down until it disappears\r\n3. Move mouse over the window\r\n4. alacritty crashes with the following stack trace:\r\n\r\n```\n$ RUST_BACKTRACE=1 ./target/debug/alacritty.exe\r\nthread 'main' panicked at 'attempt to divide by zero', src\\term\\mod.rs:810:26\r\nstack backtrace:\r\n   0: std::sys::windows::backtrace::set_frames\r\n             at C:\\projects\\rust\\src\\libstd\\sys\\windows\\backtrace\\mod.rs:104\r\n... [Log Snipped] ...\n  29: BaseThreadInitThunk\r\n  30: RtlUserThreadStart\n```\r\n\r\nWhen I add a following check, it hits the newly added panic on hitting the last `Ctrl`+`-` to scale the font down:\r\n```\ndiff\r\ndiff --git a/src/display.rs b/src/display.rs\r\nindex d5a2ea0..1896e88 100644\r\n--- a/src/display.rs\r\n+++ b/src/display.rs\r\n... [Log Snipped] ...\n \r\n     #[inline]\n```\n\n[Context/Logs]:\n- There is a check for font size in [Link: change_font_size] that ensures font size is `FONT_SIZE_STEP` (0.5) at minimum. However, I think that a check for font size is not sufficient, since the cell size depends on the font metrics (and so only indirectly on font size). So I think a proper fix would be to calculate the font metrics for new size first and only update the font size and glyph cache if the new cell dimensions are valid."}
{"project_id": "Alacritty", "bug_id": "43", "source_type": "github", "llm_input_text": "[Title]: Crash when live reloading history size\n[Symptom]:\nWhen reducing the history size at runtime by changing the config with live reload enabled, Alacritty will crash if the user isn't scrolled all the way to the bottom.\r\n\r\nThe history will also never grow, but only shrink.\n"}
{"project_id": "Alacritty", "bug_id": "44", "source_type": "github", "llm_input_text": "[Title]: Reset not resetting alternate screen correctly\n[Symptom]:\nWhen entering the alternate screen buffer (`echo -e \"\\e[?1049h\"`) and resetting the terminal (`reset`), the screen is cleared and everything is reset, however Alacritty is not back in the normal screen buffer.\r\n\r\nThis shows itself in no scrollback history being available, even after trying to switch out of the alt screen buffer again.\n"}
{"project_id": "Alacritty", "bug_id": "45", "source_type": "github", "llm_input_text": "[Title]: Alacritty can't start with a full disk\n[Symptom]:\nAlacritty does not seem to be able to start if it is not able to write to the disk. This is not ideal in case you want to open a terminal to deal with that very situation and are unable to.\r\n\r\nThis is on Linux, with xorg.\n\n[Context/Logs]:\n- @NotAFile This is hopefully fixed by [URL]\r\n\r\nI had to take a guess what specifically caused this issue for you, but this should be the only file creation which is done by Alacritty that hasn't been handled until now.\r\n\r\nPlease let me know if this did not solve your problem. In that case it would probably be helpful to provide a stack trace to pinpoint the exact problem."}
{"project_id": "Alacritty", "bug_id": "46", "source_type": "github", "llm_input_text": "[Title]: Mocp drawing is broken\n[Symptom]:\nLinux\r\n\r\nX11\r\n\r\nI could have sworn this was fixed in the past. But I can not find the previous issue for this, so I guess this might have been on IRC (or it was only in my dreams...)\r\n\r\nThe issue is that mocp uses a terminal command to draw/redraw the progress bar. However it seems like this command is not working as it should in alacritty.\r\n\r\nThe issue happens when playing an audio file and the progress bar is moving along the bottom:\r\n[Image: mocp2]\r\n\r\nThe the progress bar hits the same position as the square bracket time stamp, the left most cell will vanish and there will be a gap in the progress bar too.\r\n\r\nIIRC, this was a problem in the early days of alacritty too. But back then it was because the terminal command code used in this operation was not implemented. So this is a regression of sorts. But I don't know when the regression happened...\r\n\r\nThis happens with `TERM` set to either alacritty or xterm\n\n[Context/Logs]:\n- Is [Link: this] the previous issue you're talking about?\r\n\r\nI'm not sure if the space in the line above the bar is related, I don't see how that would affect things. However I'm unaware of how mocp draws things, so I'm not sure why this wouldn't work. A complete background change shouldn't be an issue and the escape sequence from the previous issue works just fine for me.\n- @chrisduerr nope, that was a separate issue. That still works as it should.\r\n\r\nEDIT: IIRC, the space was relevant as mocp would trigger an optimized redraw command when the progress bar reached that location.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm also affected by this in Emacs terminal mode and can confirm that reverting [Link: 0c3e286] resolves the issue.\r\n\r\nThe symptoms are exactly the same as the animated GIFs as shown in [Link: the comment above]: when moving the cursor to the right, the character glyph under the previous position randomly vanishes.\r\n\r\n(BTW, reverting has a minor conflict because of some refactor that has already happened in `src/renderer/mod.rs`.)\n- If it helps, my `TERM` is `xterm-24bits` whose terminfo definition came from this: [URL] ."}
{"project_id": "Alacritty", "bug_id": "47", "source_type": "github", "llm_input_text": "[Title]: alacritty-0.2.4:  URLs can be incorrectly extended onto the next line\n[Symptom]:\nWhich operating system does the issue occur on?    Probably any\r\nIf on linux, are you using X11 or Wayland?   X11, but I don't think that's relevant\r\n\r\nThere is a minor bug in the URL grabber.  I'm running irssi in an alacritty, and this is an excerpt of my session:\r\n\r\n13:17  * Grimes examines the latest issue of Stars and Stripes\r\n13:22   [URL]\r\n13:22  * ShowTitle   Largest Known Diamond in North America Found\r\n\r\nIt just so happens that the URL in the middle line ends **EXACTLY** in the last column of the terminal.  When I click the link to open it, alacritty does not realize that the URL ends there, and wraps around and grabs the timestamp from the next line and appends it to the URL, which then does not resolve because largest-known-diamond-in-north-america.html13:22 does not exist.\r\n\r\nI'm not certain how alacritty can best detect this condition.  Clearly I can work around it **in this use case** by making my URL handler strip anything that looks like an Irssi timestamp off the end of the URL, but that's not going to work for everyone.\n\n[Context/Logs]:\n- It should be possible to check the last cell of the row for the line break flag and only wrap around if this is not present.\n- This has been fixed in #2192. Please let me know if this does not solve the problem for you.\n- I will keep a watch out for an opportunity to retest this as soon as 0.3.0 hits Gentoo."}
{"project_id": "Alacritty", "bug_id": "48", "source_type": "github", "llm_input_text": "[Title]: Crash when resizing with URL highlight\n[Symptom]:\nThe URL highlight stores the state of the last URL highlight with the position of the URL start position. However when resizing, it's possible that the indices of this point change which will cause a crash if the old positions are not within the grid anymore.\r\n\r\nThe best approach to fix this seems to be to clear the URL highlight state when the window is resized.\n"}
{"project_id": "Alacritty", "bug_id": "49", "source_type": "github", "llm_input_text": "[Title]: Alacritty doesn't close until the first event after exiting shell\n[Symptom]:\nWhich operating system does the issue occur on? Linux, Ubuntu 18.04\r\n\r\nIf on linux, are you using X11 or Wayland? Running Wayland with XWayland (`env WAYLAND_DISPLAY= alacritty`)\r\n\r\nWhen I leave the shell with ^d or \"exit\", alacritty will stay alive until I do the next thing (move my mouse, click, type a character, or defocus). I'd expect it to die immediately after exiting the shell.\r\n\r\nScreen recording of the issue: [URL]\r\n\r\nglxinfo:\r\n\r\n```\nconsole\r\n$ glxinfo | grep OpenGL                           \r\nOpenGL vendor string: Intel Open Source Technology Center\r\nOpenGL renderer string: Mesa DRI Intel(R) HD Graphics 620 (Kaby Lake GT2) \r\nOpenGL core profile version string: 4.5 (Core Profile) Mesa 18.0.0-rc5\r\n... [Log Snipped] ...\nOpenGL ES profile shading language version string: OpenGL ES GLSL ES 3.20\r\nOpenGL ES profile extensions:\n```\n\n[Context/Logs]:\n- According to #1342 this issue is not only present with Wayland, so removing the wayland tag and changing the title to be more accurate.\r\n\r\nMore information about this problem on X11 is present in the referenced issue.\n- I took a peek at this one. Looks like when [URL] is blocking, it doesn't notice `SHOULD_EXIT` until an event occurs. This blocks the main loop as well.\r\n\r\nNew to the codebase, but it seems like the super hacky solution is to send a `notify` to the process handler upon `SIGCHLD`; the more reasonable solution is finding out how to do away with the unsafe `SHOULD_EXIT`.\n- This is the same as #915 right?"}
{"project_id": "Alacritty", "bug_id": "50", "source_type": "github", "llm_input_text": "[Title]: Crash on startup Windows: not yet implemented\n[Symptom]:\nWhich operating system does the issue occur on?\r\nWindows\r\n\r\nCrashing on launch of a fresh install of v0.2.6 with no prior installs\r\n\r\n```\r\npanicked at 'not yet implemented: ', font\\src\\rusttype\\mod.rs:64:35\r\n```\r\n\r\nI tried removing the font settings completely from the genereated alacritty.yml but it didn't change anything\n\n[Context/Logs]:\n- Does this occur with the default config?\r\n\r\n@zacps This is the first time I've seen this. Is there any reason why this should lead to a hard crash instead of falling back to the normal weight/slant and printing a log message?\n- Yes, it was the default config alacritty generated\n- I've created a PR here: #2021. Testing would be appreciated since I don't have a Windows 10 machine myself.\r\n\r\nI'll release another version once this is resolved."}
{"project_id": "Alacritty", "bug_id": "51", "source_type": "github", "llm_input_text": "[Title]: Crash when clicking on highlighted URL\n[Symptom]:\nWhich operating system does the issue occur on? **Linux**\r\n\r\nIf on linux, are you using X11 or Wayland? **X11**\r\n\r\nHi,\r\n\r\nI am running 022f0782 and when I click on a link inside vim, alacritty closes abruptly and outputs:\r\n\r\n```bash\r\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":0\"\r\n      after 241 requests (241 known processed) with 0 events remaining.\r\n```\n\n[Context/Logs]:\n- Do you have xclip installed? Can you reproduce this with a previous commit or did this commit introduce the regression? Or has this never worked before?\n- Hi @chrisduerr,\r\n\r\n\r\nYes: `xclip/testing,now 0.13-1 amd64  [installed]` (Debian testing)\r\n\r\nI tried many revisions trying to bissect the problem but couldn't find a previous working commit. It seems to me it's a dependency problem (cargo taking latest available version of a crate so whatever I choose as a commit revision I still get the bug once compiled).\r\n\r\nDo you have any hint of what crate might be failing so I could 'force' some kind of version?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hehey good news! :sparkles: \r\n\r\n* Test 1:\r\n\r\nStill crash \ud83d\ude15\r\n\r\n* Test 2:\r\n```\nrust\r\n#[cfg(not(windows))]\r\npub fn start_daemon (program: &str, args: I) -> io::Result \r\n    where\r\n        I: IntoIterator ,\r\n... [Log Snipped] ...\n    }\r\n}\n```\r\nStill having a crash \ud83d\ude15\r\n\r\n* Test 3:\r\n```\nrust\r\n#[cfg(not(windows))]\r\npub fn start_daemon (program: &str, args: I) -> io::Result \r\n    where\r\n        I: IntoIterator ,\r\n... [Log Snipped] ...\n        .map(|_| ())\r\n}\n```\r\nWorks! \ud83d\ude0e No crash at all!\n- Unfortunately this does not mean good news. Test 2 was an attempt from me to reproduce exactly what `libc::daemon(1, 1)` does without having to use the `libc::daemon` call. As far as I can tell this is identical to the code in glibc's `daemon` function, but at this point I'm fine with reverting this change.\r\n\r\nThanks for all the help with debugging this."}
{"project_id": "Alacritty", "bug_id": "52", "source_type": "github", "llm_input_text": "[Title]: MacOS keymap assumes QWERTY\n[Symptom]:\nI use a normal keyboard with the System Settings >> Keyboard layout remapping to the Dvorak layout.  Everything with respect to the keymap works great (as far as I can tell) except for Cmd-key combinations.  Here's what I'm seeing with `--print-events` when I type Cmd-v (which should paste, but instead just types 'v'):\r\n\r\n```\r\nglutin event: KeyboardInput(Pressed, 55, Some(LWin), , None)\r\nglutin event: ReceivedCharacter('v')\r\nglutin event: KeyboardInput(Pressed, 47, Some(Period), SUPER, Some(\"v\"))\r\nglutin event: Awakened\r\nglutin event: KeyboardInput(Released, 47, Some(Period), SUPER, None)\r\nglutin event: KeyboardInput(Released, 55, Some(LWin), , None)\r\n```\r\nPeriod on the QWERTY keyboard corresponds to \"v\" in Dvorak, so it seems as though for some reason, with the Cmd-key down, alacritty is getting the raw- not OS-remapped- key events? In the event in question, both `Some(Period)` and `Some(\"v\")` are in the event.\r\n\r\nAn awkward but effective workaround is to use these keybindings:\r\n```\r\n  - { key: I,        mods: Command, action: Copy                         }\r\n  - { key: Period,   mods: Command, action: Paste                        }\r\n  - { key: X,        mods: Command, action: Quit                         }\r\n```\n\n[Context/Logs]:\n- Just want to add that Alacritty uses `Control-Shift-C` and `Control-Shift-V` for copy and paste out-of-the-box, so you can always just use these keyboard shortcuts instead.\n- I can confirm that this is happening for me on OSX (10.13.1) using Colemak instead of Qwerty. \r\n\r\nI added a custom keybinding to create new windows, as follows: \r\n```\r\n- { key: N,        mods: Command, command: { program: \"open\", args: [\"-n\", \"/Applications/Alacritty.app\"] } }\r\n```\r\nI thought that this simply wasn't working.  Then I hit `cmd+k` (which is normally `cmd+n` on a qwerty keyboard), and it popped open a new window.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Without digging into winit more than that PR itself: I'm not sure. What I can say is with the current tomaka:master I see `Period` is registered as pressed twice, the second time with a `ReceivedCharacter('v')` (still):\r\n\r\n```\r\nWindowEvent { window_id: WindowId(Id(140586266945872)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(Period), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(140586266945872)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(Period), modifiers:\r\n ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(1405862669458\n...[Text Truncated]...\n { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Released, virtual_keycode: Some(Period), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\n```\r\n\r\nHowever with the current Toqozz:master I see the `Period` press once, then a `Press` and `Release` for `V`:\r\n```\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(Period), modifiers:\r\n ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(V), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: ReceivedCharacter('v') }\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Released, virtual_keycode: Some(V), modifiers: Mod\r\nifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\n```\n- @guildencrantz Is that running the example in the winit repo?\r\n\r\nAlso which key are you actually pressing, with which keyboard layout (so what would there be at the same position with qwerty)?\r\n\r\nIs there never any Release event for Period?"}
{"project_id": "Alacritty", "bug_id": "53", "source_type": "github", "llm_input_text": "[Title]: Can't input \"@\" on German keyboard with\n[Symptom]:\nI'm using alacritty on Windows with WSL via wslbridge (from wslttz 1.9.3)\r\n\r\nOn my Windows laptop I've got a German keyboard layout which has the right ` ` key called ` ` and that is used to input `\"@\"` via `  +  `. However in alacritty that combination does nothing.\n\n[Context/Logs]:\n- Can confirm that this does not work with norwegian layout as well. \r\nNorwegian layout\r\n\r\n \r\n\r\n\r\n \r\n \r\n\r\n \r\n\r\n \r\n\r\n \r\n \r\n \r\n \r\n meta-key \r\n button \r\n creates \r\n works \r\n \r\n\r\n\r\n \r\n AltGr \r\n 0 \r\n } \r\n &#xa0; \r\n \r\n\r\n\r\n \r\n AltGr \r\n 2 \r\n @ \r\n &#xa0; \r\n \r\n\r\n\r\n \r\n AltGr \r\n 3 \r\n \u00a3 \r\n yes \r\n \r\n\r\n\r\n \r\n AltGr \r\n 4 \r\n $ \r\n &#xa0; \r\n \r\n\r\n\r\n \r\n AltGr \r\n 5 \r\n \u20ac \r\n yes \r\n \r\n\r\n\r\n \r\n AltGr \r\n 7 \r\n { \r\n &#xa0; \r\n \r\n\r\n\r\n \r\n AltGr \r\n 8 \r\n [ \r\n &#xa0; \r\n \r\n\r\n\r\n \r\n AltGr \r\n 9 \r\n ] \r\n &#xa0; \r\n \r\n\r\n\r\n \r\n AltGr \r\n \\ \r\n \u00b4 \r\n yes \r\n \r\n\r\n\r\n \r\n AltGr \r\n \u00a8 \r\n ~ \r\n yes\n- Does using Ctrl-AltGr work?\n- ... [Middle Discussions Snipped for Brevity] ...\n- First of all - thank you for your effort. The patched Alacritty (against   ) now prints:\r\n\r\n```\r\n[2019-01-09 23:20] [INFO] glutin event: WindowEvent { window_id: WindowId(Id(140584855599968)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 61, state: Pressed, virtual_keycode: Some(RAlt), modifiers: ModifiersState { shift: false, ctrl: false, alt: true, logo: false } } } }\r\n[2019-01-09 23:20] [INFO] glutin event: WindowEvent { window_id: WindowId(Id(140584855599968)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 37, state: Pressed, virtual_keycode: Some(L), modifiers: ModifiersState { shift: false, ctrl: false, alt: true, logo: false } } } }\r\n[2019-01-09 23:20] [INFO] glutin event: WindowEvent { window_id: WindowId(Id(140584855599968)), event: ReceivedCharacter('@') }\r\n[2019-01-09 \n...[Text Truncated]...\n} }\r\n```\r\n\r\nThen:\r\n\r\n```\r\nTRIGGERED BINDING KeyboardInput { scancode: 12, state: Pressed, virtual_keycode: Some(Q), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } FOR Binding { mods: ModifiersState { shift: false, ctrl: false, alt: false, logo: true }, action: Quit, mode: NONE, notmode: NONE, trigger: Q }\r\n```\r\n\r\nI have not modified any settings in the `key_bindings:` block. They remain the same as the original `alacritty_macos.yml`.\n- @ncreuschling Looks like removing the `Quit` mapping on `Command + Q` should resolve this problem for you.\r\n\r\nThough I'm not entirely sure why `RAlt + L` would trigger a keybinding for `Command + Q`.\r\n\r\nI'd like some feedback on the Windows side of things, it would be interesting if this is caused by the same thing.\r\n\r\n@ncreuschling I've got another patch if you're willing to help out. It seems like the `--print-events` code can't really be what's received by Alacritty, because the virtual keycodes are different from the bindings in the config. The following should print exactly which keys are received:\r\n\r\n```\ndiff\r\ndiff --git a/src/event.rs b/src/event.rs\r\nindex bada4f6..ea6f6b2 100644\r\n--- a/src/event.rs\r\n+++ b/src/event.rs\r\n... [Log Snipped] ...\n                 binding.execute(&mut self.ctx, false);\r\n                 has_binding = true;\n```\r\n\r\nMaybe that can get us a step closer to figuring out what exactly is going on. This should hopefully print the `Command + Q` keys that are actually getting triggered."}
{"project_id": "Alacritty", "bug_id": "54", "source_type": "github", "llm_input_text": "[Title]: Keybinding open -n -a /Application/Alacritty.app not working\n[Symptom]:\nWe've had a hack for a while on macOS to open multiple windows as a workaround to #607. I dusted of my MBP this morning and found that it's not working. Running the command from a shell in Alacritty works just fine, but the keybinding version causes Alacritty to exit immediately. Seems that this may be a problem with how we create child processes.\r\n\r\nIf this is a dupe, I blame GitHub search\n\n[Context/Logs]:\n- This seems to fix it, but it's not a 100% solution.\r\n\r\n```\ndiff\r\ndiff --git a/src/input.rs b/src/input.rs\r\nindex 8ce8f2c..555bf60 100644\r\n--- a/src/input.rs\r\n+++ b/src/input.rs\r\n... [Log Snipped] ...\n             Action::Hide => {\r\n                 ctx.hide_window();\n```\r\n\r\nIncluding a `wait()` here means all commands are blocking, but removing the `wait()` would result in zombies accumulating (#976).\n- I'm using a MBP at work on a regular basis and at least the `SpawnNewInstance` action has worked great for me before.\r\n\r\nI'll test this again later just to make sure, but I'd be surprised if it suddenly broke.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @leonbreedt Could you test the patch I've proposed?\r\n\r\nHere is it again to make applying a little simpler:\r\n```\ndiff\r\ndiff --git a/src/util.rs b/src/util.rs\r\nindex b70f2f1..ec27a80 100644\r\n--- a/src/util.rs\r\n+++ b/src/util.rs\r\n... [Log Snipped] ...\n         })\r\n         .spawn()?\n```\n- @chrisduerr applied to   (no other changes, reverted the workaround in `src/event.rs`). Tested using the following key binding:\r\n\r\n```yaml\r\n  - { key: N,        mods: Command, action: SpawnNewInstance             }\r\n```\r\n\r\nseems to do the trick so far."}
{"project_id": "Alacritty", "bug_id": "55", "source_type": "github", "llm_input_text": "[Title]: Freeze prompt during reflow\n[Symptom]:\nIf scrollback history is available, but the prompt currently is *not* at the bottom of the terminal emulator, resizing Alacritty with lines longer than the current width of the terminal will continually move down the prompt.\r\n\r\nDemonstration:\r\n[Image: bug]\r\n\r\nThe behavior for alt screen and normal screen when the prompt is at the bottom of the terminal (or there is no scrollback) seems correct. So the goal would be to fix this without touching anything else.\n"}
{"project_id": "Alacritty", "bug_id": "56", "source_type": "github", "llm_input_text": "[Title]: Double-width characters breaking URL launching\n[Symptom]:\nAlacritty's URL launcher is checking for empty cells to stop parsing URLs. However if a character is double-width, the cell after it is always empty even though it's technically still occupied by the previous character.\r\n\r\nAs a result of this, the URL [URL] is parsed as [URL] which is a valid URL but does not match the desired outcome.\n"}
{"project_id": "Alacritty", "bug_id": "57", "source_type": "github", "llm_input_text": "[Title]: Cursor has different dimensions depending on shape\n[Symptom]:\nThis is probably best demonstrated with a picture:\r\n\r\n[Image: image]\r\n\r\nWith the hollow cursor, there's a 2-pixel gap between the top of the cursor and the edge of the cell.\r\n\r\nInterestingly, the size of the gap appears to stay at 2 pixels even with an increased font size (36 instead of 12):\r\n\r\n[Image: image]\r\n\r\nIt also happens with the vertical bar cursor (which I hadn't noticed until I increased the font size!):\r\n\r\n[Image: image]\r\n\r\nUbuntu 18.04, X11, Alacritty 0.2.9 and still present on latest master ( )\n\n[Context/Logs]:\n- I'd assume that these issues are only present with the hollow and I-Beam cursors, right? So the underline and block are both correct?\n- Yep, underline and block cursors both look fine.\n- ... [Middle Discussions Snipped for Brevity] ...\n- (and so the underline cursor *is* affected, I just didn't have an x-offset specified when I originally tested it)\n- Thanks, I've identified the issues then and am working on a fix. Will update once there's a PR."}
{"project_id": "Alacritty", "bug_id": "58", "source_type": "github", "llm_input_text": "[Title]: screen is just black\n[Symptom]:\nWindows 10 home edition, Alacritty-v0.2.5.exe.  I've also tried with 0.2.4 and get the same results.\r\n\r\nI suppose this is something environmental - I mean you'd have noticed if this thing just didn't work on Windows! - but I've no idea what.\r\n\r\nWhen I run Alacritty, I just get a black screen, and a cursor.  Typing gives the impression that I might be getting black text on a black background, the cursor looks as though it's moving the right amount.\n\n[Context/Logs]:\n- Might be a font rendering issue maybe?\r\n\r\nTry running Alacritty from a different terminal like the cmd.exe, does it produce any output? Errors should be written to stderr if anything went wrong.\r\n\r\nI'd assume you're using the default config, right?\n- Same output whether starting from cmd.exe or from file explorer.  No errors visible.  Yes, default config.\r\n\r\nEdit: You weren't suggesting that I'd get a different result from cmd.exe; you were suggesting that I might see some errors.  I don't.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Activity on this thread prompted me to have another go with the latest version - 0.3.0 RC 3 - and with that I get this interesting-looking error message:\r\n\r\n```\r\nC:\\downloads\\alacritty>Created log file at \"C:\\\\Users\\\\Standard\\\\AppData\\\\Local\\\\Temp\\\\Alacritty-9508.log\"\r\n[2019-04-05 19:29] [ERROR] Alacritty encountered an unrecoverable error:\r\n\r\n        There was an error initializing the shaders: Failed compiling shader at C:\\Users\\travis\\build\\jwilm\\alacritty/res/text.v.glsl: Vertex shader failed to compile with the following errors:\r\nERROR: 0:48: error(#162) Wrong operand types no operation ':' exists that takes a left-hand operand of type 'const float' and a right operand of type 'const int' (or there is no acceptable conversion)\r\nERROR: 0:49: error(#162) Wrong operand types no operation ':' exists that takes a left-hand operand of type 'const float' and a right operand of type 'const int' (or there is no acceptable conversion)\r\nERROR: error(#273) 2 compilation errors.  No code generated\r\n```\r\n\r\nDoes that help?\r\n\r\n(I suspect that @smdsbz and I are seeing different issues.)\n- Hmm, the code in my latest failure looks new since I opened this, so I imagine we now have three problems cluttering this single issue.  Sorry about that."}
{"project_id": "Alacritty", "bug_id": "59", "source_type": "github", "llm_input_text": "[Title]: crashes on cat /dev/urandom\n[Symptom]:\nWhich operating system does the issue occur on?\r\nlinux\r\n\r\nIf on linux, are you using X11 or Wayland?\r\nx11\r\n\r\nalacritty @  \r\n\r\nbuild with `RUSTFLAGS=\"-C opt-level=3 -C debuginfo=2    -C debug-assertions=y\"`\r\n\r\n```\n`\r\n[2019-03-29 19:58] [DEBUG] [unhandled] execute byte=02\r\n[2019-03-29 19:58] [TRACE] [src/term/mod.rs:1716] Carriage return\r\n[2019-03-29 19:58] [TRACE] [src/term/mod.rs:1724] Linefeed\r\n[2019-03-29 19:58] [TRACE] [src/term/mod.rs:1340] Scrolling up relative: origin=0, lines=1\r\n... [Log Snipped] ...\n[2019-03-29 19:58] [DEBUG] [unhandled] execute byte=17\r\n[2019-03-29 19:58] [DEBUG] [unhandled] execute byte=8a\n````\n\n[Context/Logs]:\n- Looks like the issue is at [URL] which clearly has absolutely no respect for Unicode at all.\r\n\r\nIn general I'd say that most instances of `chars().enumerate()` are probably a bad idea and this is actually done correctly (using `char_indices()` just a couple of lines above that.\r\n\r\nI've included a fix for this in [URL] since it's kinda related to URL issues, that fixes the issue."}
{"project_id": "Alacritty", "bug_id": "60", "source_type": "github", "llm_input_text": "[Title]: URL highlight issues\n[Symptom]:\nThe URL \"test@[URL] does not get highlighted correctly. This is likely related to trimming the start of URLs with special characters, the origin should be updated appropriately to fix this.\r\n\r\nIf the mouse is over a URL and the URL is recognized and highlighted,\r\nbut the user presses enter until the URL moves away from the cursor,\r\nthe URL will still be highlighted making it impossible to remove the highlight.\r\n\r\nIf the display offset is not equal to 0 (so user is scrolled up),\r\nthere is another issue with URL detection which will highlight the wrong\r\ncells. Adding the display offset to the line number might fix this.\n"}
{"project_id": "Alacritty", "bug_id": "61", "source_type": "github", "llm_input_text": "[Title]: Rendering issue with vifm\n[Symptom]:\n_Thank you for an awesome terminal!_ :pray:\r\n\r\nI'm seeing an issue with the cursor rendering with [Link: `vifm`] in `alacritty`. This is the first time I've noticed it - I'm not seeing this issue with any other curses app.\r\n\r\n[Image: Peek 2019-04-21 16-18]\r\n\r\nHere's my cursor settings in alacritty:\r\n```\r\ncursor:\r\n  text: ' '\r\n  cursor: ' '\r\n```\r\n\r\nI'd love to see this fixed, give me a ping if **I can help in any way**.\r\n\r\n:beers:\n\n[Context/Logs]:\n- I didn't try to reproduce it (too long to install this terminal) and just guess this is a stable behaviour of the terminal. If that's the case, this is likely to be a problem of `alacritty`, as the issue doesn't appear in other terminals as far as I can tell and I know that the blacked out character appears where hardware cursor is positioned by `vifm`. In normal mode the terminal cursor is invisible, yet `alacritty` displays it.\n- @sQVe Which version of Alacritty are you using? Can you reproduce this with the latest master?\n- ... [Middle Discussions Snipped for Brevity] ...\n- @chrisduerr Roger. I'll try it out ASAP. Most likely in an hour or two.\n\nIf possible I'll try to narrow it down further to a specific commit.\n- @chrisduerr I've now had the time to debug this further.\r\n\r\nWith `HEAD` at  , I'm seeing the issue I initially reported: \r\n[Image:  ]\r\n\r\nWith `HEAD` at  , I'm also seeing an issue, but inverted:\r\n[Image:  ]\r\n\r\nWith `HEAD` at  , I'm seeing **no issue**:\r\n[Image:  ]"}
{"project_id": "Alacritty", "bug_id": "62", "source_type": "github", "llm_input_text": "[Title]: Alacritty window rescales during startup\n[Symptom]:\nWhen I start alacrity, it first creates a large window which is then very quickly resized to the final size (~70%).  The resizing is really fast and wouldn't bother me but my window manager (fvwm2) places the window based on the original size and that means that the window position ends up not being what it is supposed to be. \r\n\r\nUbuntu 16.10.  Default alacritty.yml except that I changed the font size to 13.\n\n[Context/Logs]:\n- Thanks for filing this issue. The problem here is we need to know some font metrics to know the proper window size to create, but we can't know the font metrics without having the DPI scaling factor which comes from the window.\r\n\r\nGlutin needs a way to get the DPI scaling info for a monitor without actually creating a window.\n- A workaround might be to open a window to get the DPI scaling factor, then close it and open a new one with the correct size.  Not great but perhaps better than the current state of affairs.\n- ... [Middle Discussions Snipped for Brevity] ...\n- If you set window dimensions and the DPI factor is not equal to 1, it's impossible not to resize at startup.\r\n\r\n\r\nThe issue is exactly what vberger has said in the winit issue. It's pointless that we're able to get the DPI for all displays when we do not know which display the window is going to be spawned on.\n- At this point, I think the question becomes \"how do other terminals handle it?\"\r\nI don't experience the same problems in, say, Konsole.\r\nAll of my displays (at least at home) have a non-1 DPI factor, but all of my displays per-system also have identical DPI factors (same-size displays with same resolution in all multi-display setups).\r\nSurely there's some way for alacritty to handle these common scenarios with equal grace to virtually every other alternative?"}
{"project_id": "Alacritty", "bug_id": "63", "source_type": "github", "llm_input_text": "[Title]: Alacritty freezes on pasting from empty clipboard\n[Symptom]:\nWhen pasting from empty clipboard alacritty gets frozen for 3-4 seconds. \r\nArch Linux with  X11\r\n( #2391 doesn't fixed it for me )\n\n[Context/Logs]:\n- I can confirm this is happening to me as well, in the same OS environment.\r\n\r\nAlacritty hangs, then prints the following:\r\n\r\n```\r\n[2019-04-30 13:37] [DEBUG] Unable to load text from clipboard: Selection timed out\r\n```\n- Related issue in one of our new dependencies: aweinstock314/rust-clipboard#54.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @quininer Thanks a lot for that! The fix seems to work great based on my testing.\r\n\r\nWhat is the need for the timeout if this is not intentional? Is there a different way this might timeout?\n- X11 has many different implementations (both client and server) and it's hard to keep them reliable. If the other party panic after sending notify, we may never receive message."}
{"project_id": "Alacritty", "bug_id": "64", "source_type": "github", "llm_input_text": "[Title]: Index out of bounds when selecting during `yes`\n[Symptom]:\nWhen creating a selection while running the `yes` command, Alacritty will crash with an index out of bounds exception.\n\n[Context/Logs]:\n- For further info: I can reproduce this using `while true; do echo no; done` and selecting. Theoretically, any high-output command that induces fast scrolling would cause this.\n- Another interesting detail might be that I *think* I've specifically tested this in the past, so it's possible that there has been a regression and it might be worth bisecting this issue.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Most definitely. I'd assume that the selection is stored at a specific position and then rotated (moved up) until it leaves the grid. So trying to access it then will lead to an access outside of the grid, leading to an IOOB.\r\n\r\nThough I haven't had the time to look at this yet, so this is only a guess.\n- I did some testing and this seems to be exactly what the issue is. If I prevent span.{start,end}.line from going larger than the number of lines in the grid then no IOOB will occur."}
{"project_id": "Alacritty", "bug_id": "65", "source_type": "github", "llm_input_text": "[Title]: Characters inserted into neovim since foreground/background request escape codes added\n[Symptom]:\nWhich operating system does the issue occur on?\r\nLinux\r\n\r\nIf on linux, are you using X11 or Wayland?\r\nX11\r\n\r\nSeemingly randomly (I can't tell what causes the bug to occur some times but not others, or why one escape is displayed in one instance but another at another time) when starting neovim since f790070, escapes get input as if I typed them, for example after starting nvim the most recent time it starts in command mode with `:.rgb:0/0/0^G` as the typed out command, another one is starting in search mode with either `/0` or `/0/0`.\r\n[Image: image]\n\n[Context/Logs]:\n- Getting the output of `alacritty -vvv | grep \"Writing escape sequence for dynamic color code\"` would be very helpful I think.\r\n\r\nI personally can't reproduce this with the latest master, so I can only take guesses here. Could you try this with an empty nvim config and give detailed instructions on how you're causing this?\r\n\r\nI'd also be very interested in seeing if this can be reproduced with XTerm.\r\n\r\nThe following patch might also solve it already, please give that a try if you've got some time:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty_terminal/src/term/mod.rs b/alacritty_terminal/src/term/mod.rs\r\nindex 5cfd503..4a07d5b 100644\r\n--- a/alacritty_terminal/src/term/mod.rs\r\n+++ b/alacritty_terminal/src/term/mod.rs\r\n... [Log Snipped] ...\n \r\n     /// Reset the indexed color to original value\n```\n- Oh, I think I've figured it out. I think this will be fixed if you set your background color to anything above hex `0F/0F/0F`.\r\n\r\nI think the problem is that `0/0/0` is written as single-digits.\n- Attempted to fix this in [URL] please let me know if that does it for you.\n- ```\n[2019-06-15 10:33] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\r\n[2019-06-15 10:33] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\r\n[2019-06-15 10:33] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\r\n[2019-06-15 10:34] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\r\n[2019-06-15 10:34] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\r\n... [Log Snipped] ...\n[2019-06-15 10:34] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\r\n[2019-06-15 10:34] [TRACE] [alacritty_terminal/src/term/mod.rs:1884] Writing escape sequence for dynamic color code 11: color[257]\n```\r\nEach line looks the same to me, each one is for one opening of nvim the exact same way (and I didn't this time but I previously tested with both `nvim -u NORC` and `nvim -u NONE`, #2544 seems to have just increased how many 0s there are. The first picture attached is related to the second line, the second picture to the third line, the third one to the last line, and all other lines had nothing weird upon opening nvim\r\n[Image: Screenshot 2019-06-15 10-33-51]\r\n[Image: Screenshot 2019-06-15 10-34-11]\r\n[Image: Screenshot 2019-06-15 10-39-03]"}
{"project_id": "Alacritty", "bug_id": "66", "source_type": "github", "llm_input_text": "[Title]: Alacritty v0.3.0-rc2 does not start (Error creating GL context)\n[Symptom]:\nAlacritty release: v0.3.0-rc2\r\nOS: Debian GNU/Linux buster/sid x86_64\r\nKernel: 4.19.0-4-amd64O\r\nDE: GNOME 3.30.2\r\nGPU: NVIDIA Quadro FX 880M\r\nusing X11\r\n\r\n```\r\n$ alacritty\r\nCreated log file at \"/tmp/Alacritty-19721.log\"\r\n[2019-04-02 14:35] [ERROR] Alacritty encountered an unrecoverable error:\r\n\r\n        Error creating GL context; `glXQueryExtensionsString` found no glX extensions\r\n```\r\n\r\n## notes: \r\n* alacritty version v0.2.9 works fine\r\n* `cargo run --example window` works fine when cloned glutin master\r\n* tried both installing from released deb file and building from sources\n\n[Context/Logs]:\n- Could you bisect which exact commit broke this for you?\n- is the first bad commit\r\n\r\nAlso I chacked last commit ( ) and the same error still occurs.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Oh, sorry. For some reason I confused this issue with [URL]\r\n\r\nI'm not entirely sure why vsync was enabled since I can't reproduce any errors of the original commit message, so I'm not sure if I want to make this change before the 0.3.0 release. It's also possible that it might have impact on performance and resource usage, the latter being difficult to benchmark for me.\n- Reported upstream in [URL]"}
{"project_id": "Alacritty", "bug_id": "67", "source_type": "github", "llm_input_text": "[Title]: Windows: Focus with mouse highlights text\n[Symptom]:\nOperating System: Windows\r\nPretty sure this doesn't happen in Linux.\r\n\r\n### Behavior summary\r\nWhen focusing the window with a mouse click, all characters are highlighted up until the character clicked on.\r\n\r\n### Expectation\r\nThe window is simply focused, no extra selection occurs.\r\n\r\n### Extra\r\nThis is especially irritating in combination with #2050.\r\n(`selection: save_to_clipboard: false` doesn't seem to work, resulting in pasting half the terminal screen back into the prompt)\n\n[Context/Logs]:\n- This issue was already raised for macOS [Link: here] where it was initially implemented for all platforms.\r\n\r\nThe behavior was then reverted for Linux/BSD because it's not expected there in [Link: this PR].\r\n\r\nThis was all before Windows support was added, so it made sense back then to just check if the platform is not macOS. It seems like all that is needed here, would be to add another check to make sure that this behavior is also present on Windows to match macOS.\r\n\r\nI've created a PR to fix this issue, I'd appreciate help with testing: [URL]\n- I built from this PR (with the build fix) and I'm still getting the same behaviour.\r\nJust to verify, I built this with `cargo build --release`. Is this correct?\r\n(Not sure if you can/how to download binaries build by TravisCI?)\n- ... [Middle Discussions Snipped for Brevity] ...\n- Confirmed fixed! Woohoo! \ud83c\udf89\n- Yep, it also works on my machine!"}
{"project_id": "Alacritty", "bug_id": "68", "source_type": "github", "llm_input_text": "[Title]: Panic due to error in config\n[Symptom]:\n## System\r\n\r\nOS: Antergos Linux, Kernel v. 5.0.6\r\nDisplay Server: X11\r\nWM: i3\r\nCompositor: compton (afaik irrelevant here)\r\nAlacritty version 0.2.9 (similar problems occurred in previous versions as well, though)\r\n\r\n## Summary\r\nIn case of certain configuration errors, e.g. when the colors: primary: background property is set twice in a row, alacritty will panic:\r\n\r\n```\r\ncolors:\r\n  primary:\r\n    background: ' '\r\n    background: ' '\r\n    foreground: ' '\r\n```\r\n\r\n## Expectation\r\nFallback to default setting\r\n\r\n## Output\r\n\r\n```\r\nCreated log file at \"/tmp/Alacritty-8246.log\"\r\n[2019-04-09 11:23] [ERROR] Problem with config: colors.primary: duplicate field `background` at line 1\r\n45 column 15; using default value\r\nthread 'main' panicked at 'unexpected end of mapping', /build/.cargo/registry/src/github.com-1ecc6299d\r\nb9ec823/serde_yaml-0.8.8/src/de.rs:147:25\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n```\n\n[Context/Logs]:\n- Our upstream parsing dependency does not strive to propagate errors if the file is invalid, giving no guarantees that there will not be a runtime crash.\r\n\r\nThe best approach might be to verify the validity of the input file first before starting to try and parse it with serde, [URL] might be a good choice for this.\n- :+1: Also happened to me. I was tweaking the font settings, and copied the current `family: ` line and pasted it below, and alacritty immediately crashed and wouldn't relaunch. I had to launch a different terminal to edit the alacritty.yml file before I could start it again. Not a showstopper, but kinda annoying."}
{"project_id": "Alacritty", "bug_id": "69", "source_type": "github", "llm_input_text": "[Title]: Cursor colour is incorrect after displaying ~2000 lines of dmesg\n[Symptom]:\nUbuntu 18.04, X11, alacritty 0.3.0\r\n\r\nThis is the weirdest bug: if I open a new terminal and run `dmesg`, the cursor consistently turns red.\r\n\r\n[Image: image]\r\n\r\nTyping doesn't make it change colour, but backspacing over characters makes it turn white (the original colour). Running `dmesg` again in the same terminal results in it turning white also; after this, I can't reliably reproduce the bug in the same terminal window.\r\n\r\nThe following file reproduces this (just `cat` it): [Link: dmesg.txt]\r\n\r\nIf I truncate that file much more, it no longer causes this to happen.\r\n\r\nHere's my alacritty config:\r\n\r\n \r\n\r\n```\n# Configuration for Alacritty, the GPU enhanced terminal emulator.\r\n\r\n# Any items in the `env` entry below will be added as\r\n# environment variables. Some entries may override variables\r\n# set by alacritty itself.\r\n... [Log Snipped] ...\n  - { key: NumpadEnter,             chars: \"\\n\"                              }\r\n  - { key: Return,   mods: Super|Shift, action: SpawnNewInstance             }\n```\n\n[Context/Logs]:\n- I can't reproduce this myself, but chances are there's just an escape sequence in there that changes the cursor colors?\r\n\r\nCan you reproduce this in a different terminal emulator?\n- More investigation (slightly stream-of-consciousness, sorry): At some point, the background for selected text after the end of the line changes colour, which is approximately when the cursor ends up red instead of white:\r\n\r\n[Image: image]\r\n\r\nInterestingly if I tab-complete the filename (printing an extra 3 lines of text) before printing the file, the selected-text background changes colour 3 lines earlier:\r\n\r\n[Image: image]\r\n\r\nPasting all the text from the start of the session until the line before the colour change into a file results in a file 1024 lines long, which seems suspicious. (This isn't just due to some weirdness of a particular line in the test file \u2013 I can remove the first line, and the first strange line still appears after 1024 lines have been printed.)\r\n\r\nI also just tested and I can reproduce this on latest master,  .\r\n\r\nI've never seen it happen in any other terminal emulator (I've just tested gnome-terminal and xterm). It's not to do with cursor-colour codes; I can reproduce it by running this Python program:\r\n\r\n```\npython\r\n#!/usr/bin/env python3\r\nprint(\"\\033[31m\" + \"foo\")\r\n# higher numbers for the range work, lower numbers don't, but it depends\r\n# on how much text was previously printed in this alacritty window (the less\r\n... [Log Snipped] ...\nfor i in range(39):\r\n    print(\"foo\")\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- @anowlcalledjosh Could you test if #2599 fixes this for you?\n- belatedly: yep,   fixes it. thanks!"}
{"project_id": "Alacritty", "bug_id": "70", "source_type": "github", "llm_input_text": "[Title]: Insert cursor disappearing in Neovim\n[Symptom]:\nI've have noticed an issue with the cursor in **INSERT** mode in `neovim`. After having `neovim` open in `alacritty` for a while the cursor disappears when in insert mode. I'm having a hard time replicating the issue.\r\n\r\n[Image: Peek 2019-04-23 10-52]\r\n\r\nWorth noting is that restarting `neovim` does not fix the issue. I have to restart `alacritty` for it to disappear. I did not notice this issue with version `0.3.0`.\r\n\r\n**EDIT:** I also now noted that the cursor does not respect my set color. I have: \r\n\r\n```\r\n  cursor:\r\n    text: ' '\r\n    cursor: ' '\r\n```\r\nBut it looks like this:\r\n[Image: Peek 2019-04-23 10-58]\r\n\r\nI'm running `alacritty` built from [URL] on **Arch Linux** with Xorg.\n\n[Context/Logs]:\n- It's not just NeoVim... for me it disappears in normal ZSH shell...\r\n\r\n[Link: [Image: asciicast]]\n- Getting the same issue as @sQVe. Are there some new configuration variables we should be aware of? I haven't updated mine since 0.3.0.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've done some testing under gdb and figured out that this [Link: `if`] in pair with its `else` returns absolutely the same things whether cursor final colors are broken or not, so probably the colors are fine here.\r\n\r\nIn my test I was moving from `(0,0)` cell in alacritty to `(1,0)`, both times from the same line in the file. CursorStyle - block, `cursor.cursor == Rgb(171,178, 191)`, `cursor.text == Rgb(40,44,52)`. Compiled alacritty with `--debug` and used `rust-gdb` as a debugger. The results of examining `return` statements with gdb `p` command are in the file. `If` branch is marked with `if:` and `else` with `else:` \r\n[Link: log_next.txt]\n- @kchibisov @chrisduerr \r\nFor me a47d716 is fine, cfc20d4f34 introduced the problem."}
{"project_id": "Alacritty", "bug_id": "71", "source_type": "github", "llm_input_text": "[Title]: Weird carat behavior when scrolling\n[Symptom]:\nUsing the latest Alacritty, on Gentoo, and under Sway I see this interesting behavior when scrolling. I think the best way to describe it is to show it:\r\n\r\n[Link: [Image: Demo]]\r\n\r\nP.S. Click on image for full video.\n\n[Context/Logs]:\n- Can you reproduce this in X or XWayland? Also does setting a different cursor (using `printf '\\e[4q'` for example) fix this?\n- @chrisduerr If the issue is about cursor, I can reproduce it on X11 with zsh just by opening new `alacritty` instance typing `ls -laF` bunch of times, then `Ctrl + l`, `ls -laF` and scroll up. It only happens when your prompt isn't at the bottom of the screen though (in the middle e.g).\r\n\r\nUpdate: Cursor will become hidden, when the current prompt will go offscreen .\n- ... [Middle Discussions Snipped for Brevity] ...\n- Huh, that seems like an interesting pitfall. Do you want to send a PR or should I do that later? I think it might be worthwhile to add a comment to this line to state that this is intentional and why it's needed.\n- @chrisduerr I'll send it."}
{"project_id": "Alacritty", "bug_id": "72", "source_type": "github", "llm_input_text": "[Title]: Double binding - ScrollPageUp\n[Symptom]:\nWhen setting a binding like:\r\n```\r\n- { key: PageUp,   mods: Shift,   action: ScrollPageUp                 }\r\n```\r\nThe ScrollPageUp gets triggered twice, and I miss lines in the buffer.\r\n\r\nAfter a suggestion from irc, I removed the keybinding, and it works as expected. There might be an issue that register binding twice.\r\n\r\nThe issues appears on: Linux X11 using git master from 2019/07/05\n"}
{"project_id": "Alacritty", "bug_id": "73", "source_type": "github", "llm_input_text": "[Title]: Double-click selects trailing tab\n[Symptom]:\nRun this:\r\n\r\n```\r\n$ printf 'select\\tme\\n'\r\n```\r\n\r\nand double-click `select`. Observe that the cell after the word is also highlighted, and pressing ctrl-shift-C will copy the tab character.\r\n\r\nAlacritty 0.3.3, Ubuntu 18.04, X11\n\n[Context/Logs]:\n- I've verified this on the latest master branch.\n- Adding `\\t` to `semantic_escape_chars` in alacritty.yml fixes this for me.\n- Sounds like that might be a reasonable change. I don't see why it wouldn't be part of it already, since a normal whitespace is already in there. So likely just an oversight."}
{"project_id": "Alacritty", "bug_id": "74", "source_type": "github", "llm_input_text": "[Title]: Regression with scrolling performance\n[Symptom]:\nWhile doing some tests with profile guided optimization, I've noticed that normal scrolling (the type that is done by `yes`), is extremely slow on the latest master.\r\n\r\nI've tested this with the version I'm currently running (f002171) and there's no such performance issue there.\r\n\r\nSo somewhere in between   and f002171 there must have been a change significantly impacting the performance of scrolling content inside of Alacritty.\r\n\r\nMy best bet would be [URL] however I haven't bisected it yet, so I'll update this issue when I've got some additional information.\n\n[Context/Logs]:\n- @chrisduerr I've decided to bisect it (I'm always running `perf` to test for the performance changes, when sending `PR`s, so was a little bit surprised, that I didn't noticed it in a first place). So, af30f37 has introduced the issue. The result of\r\n`perf stat -r 10 vtebench -b 10000000 scrolling` on 0815774 is\r\n```\r\n1.09668 +- 0.00412 seconds time elapsed  ( +-  0.38% )\r\n```\r\non af30f37\r\n```\r\n6.39654 +- 0.00654 seconds time elapsed  ( +-  0.10% )\r\n```\r\nand on f002171\r\n```\r\n1.09115 +- 0.00399 seconds time elapsed  ( +-  0.37% )\r\n```\n- That definitely makes some sense, though it surprises me the impact is so huge. I'll take a look if there's a good way to resolve this properly. The `occ` of Row might have to be fixed/reworked a bit."}
{"project_id": "Alacritty", "bug_id": "75", "source_type": "github", "llm_input_text": "[Title]: Underline starting in last line not rendered when scrolled up\n[Symptom]:\nIf an underline is started in the last line while scrolled up in the terminal, the underline is not rendered correctly.\r\n\r\nThis applies both for underlines printed using the escape sequence and for underlines created for URL highlighting.\r\n\r\nQuick investigation shows this might be caused by the `update_lines` method or some other step in the rendering process. It seems like the cells have the underline flag set correctly, or at least some flags have an underline flag set, I haven't checked if they're the correct cells yet.\n\n[Context/Logs]:\n- Seems like `strikethrough` is also affected. However selecting any cell (even empty) on line with underline + strikethrough shows both underline and strikethrough correctly.\n- Since strikeout and underline are handled pretty much exactly the same way, this does make sense.\r\n\r\nGood catch on the selection though. I'd expect this to be relatively easy to resolve once the cause is found, however I was caught up with finishing up my PR for moving Alacritty to rfind_url.\n- ... [Middle Discussions Snipped for Brevity] ...\n- ~~For me, it's off by 7(random number) in case I create underline on the last line.~~\r\n\r\nNevermind, `alacritty` was rendering debug output too fast (instant update) and the needed lines were sent out of scrollback buffer without noticeable screen update.\r\n\r\nSo yeah, seems like off-by-one.\r\n\r\nI think I can send a PR to fix this in an hour or less.\n- Just an update to the issue.\r\nThe issue is presented only with the last underline in the last line\r\n[Image: Screenshot_Tue 30 Jul 2019 11:58:34 PM MSK]\r\n\r\nThis is also presented when underlining on a prompt regardless of the position, but your cursor should be to the left to underlined text. Just move a cursor across the url to get the broken behavior.\r\n\r\nOh, and in case of current prompt, you should just place any symbol to the right of underlined text, and it will be highlighted properly (with cursor on the left side)."}
{"project_id": "Alacritty", "bug_id": "76", "source_type": "github", "llm_input_text": "[Title]: Interpretation of \"private\" CSI diverges from other terminals.\n[Symptom]:\nPlease don't threat CSI sequences with \"private use\" ( , ?) chars the same as sequences without with the same final character.\r\n\r\nThese are code space extensions and often have quite different functions. Interpreting them the same as the sequence without will create glitches and confuse applications. The same applies to the intermediates (` !\\\"#$%&'()*+,-./`).\r\n\r\nProperly ignoring unknown sequences is essential for the ongoing terminal ecosystem evolution as new sequences are allocated.\r\n\r\nThe current code in ansi.rs: `csi_dispatch` seems to get both these sequence parts in `intermediates` but mostly ignores them, except for select cases.\r\n\r\nThe following is based on information of the sequences interpreted by xterm, vte/gnome-terminal, konsole and rxvt-unicode. Also see my ongoing [Link: documentation project] for further details.\r\n\r\nI think for the currently implemented sequences the only ones that should trigger with an non empty `intermediates` are:\r\n* `J` and `K` for `intermediates` exactly `?`. Strictly this is for protected cells, but it's commonly implemented on terminals that don't actually implement protected cells (if protected cells are not supported it behaves like the non `?` version)\r\n* And of course `h` and `l` for `intermediates` exactly `?`. Similar to what alacritty currently does.\r\n* possibly `n` for `intermediates` exactly `?`. The expected behavior here is different from the not `?` versions and alacritty should either ignore them or properly implement this different behavior. alacritty currently only supports 5 and 6 so a proper implementation can just add a additional `?` in the output for the dec private variants.\r\n* `q` should set cursor style only when `intermediates` is exactly ` ` (space). Without it's a different sequence understood by xterm (and DEC compatible terminals; DECLL).\r\n\r\nCurrently i think the following claimed sequences are misinterpreted:\r\n```\nESC [ \u24c3 \u2423 @  \tScroll Left\r\nESC [ \u24c3 \u2423 A  \tScroll Right\r\nESC [ > \u24c3 T  \tUnset Title \n...[Description Truncated]...\n\n[Context/Logs]:\n- Thanks for going into so much detail about the issue. It sounds like a very sane suggestion though I'd have to look into it myself to get a full grasp of the issue at hand.\n- Any news on this? Anything i can do to help this along?\n- While I think I understand the general situation, it's hard for me to judge what exactly needs to be done to resolve this.\r\n\r\nI'm also not aware of any serious bugs this *currently* causes in the wild.\r\n\r\nBecause of this other issues have had priority for now. The best way to help is obviously always to contribute, but I don't expect that from anyone. Other than that this will just have to wait until I can get around to it.\n- I don't have much clue about rust. So i'm reluctant to open a PR, because i expect whatever i come up would be highly unidiomatic. \r\n\r\nBasically csi_dispatch in ansi.rs would need to include `intermediates` in addition to `action` in the matching. With almost all matches only triggering if `intermediates` is empty.\r\n\r\nThe 'q' match would need to be modified to match on `action == 'q' && intermediates == [' ']`.\r\nThe matches for 'l' (reset mode) and 'h' (set mode) would need to work with both `intermediates == [Link: ]` and `intermediates == ['?']` but the modes are different namespaces (i.e. `\\e[12h` is [send receive mode] while `\\e[Link: ?12h` is [cursor blinking mode])\r\n\r\nI think alacritty might work with just those sequences. One step more would be to think about the other combination from my start post and thinking about what alacritty should respond to \"Secondary Device Attributes\" (`\\e[>c`).\r\n\r\nIf you want to see which sequences (`action` + `intermediates`) other terminals support the documentation for vte (gnome-terminal, etc) at [URL] is fairly complete (all toplevel CSI sequences are listed and most have a description).\r\n\r\nI'm happy to help reviewing a possible PR for this, or course.\r\n\r\nI'm not sure if this currently causes bugs in the wild, i would expect software that does terminal identification based on responses to get confused by getting a \"Primary Device Attributes\" when asking for \"Secondary Device Attributes\". The library i'm working with certainly does."}
{"project_id": "Alacritty", "bug_id": "77", "source_type": "github", "llm_input_text": "[Title]: Pasting from empty clipboard throws error\n[Symptom]:\nMinor observation, pasting from an empty clipboard, e.g. after a reboot, throws an error.\r\n\r\nOS: macOS Mojave 10.14.4\r\nAlacritty version:\n\n[Context/Logs]:\n- This has been fixed in #2391, thanks for the report."}
{"project_id": "Alacritty", "bug_id": "78", "source_type": "github", "llm_input_text": "[Title]: Hovering mouse over message bar results in crash\n[Symptom]:\nWhen you hover mouse over message bar `alacritty` will crash, this issue was introduced by   and presented on master.\n"}
{"project_id": "Alacritty", "bug_id": "79", "source_type": "github", "llm_input_text": "[Title]: Wayland clipboard intermittently broken\n[Symptom]:\nWhich operating system does the issue occur on?\r\nFedora 30, on both alacritty 0.3.3 and alacritty master. I'm running in gnome-session-wayland-session 3.32.0.\r\nIf on linux, are you using X11 or Wayland?\r\nWayland. This issue doesn't occur in X11 at all.\r\n\r\nI noticed that sometimes, neither the Selection nor Clipboard works at all. I can't fix it without restarting alacritty. I ran a test just running it from my shell from another alacritty instance many times, and it's 50-50 each trial if the clipboard is either completely broken, and never works, or always works.\r\n\r\nI've added some debug statements:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty_terminal/src/clipboard.rs b/alacritty_terminal/src/clipboard.rs\r\nindex 0e40cd4..85e3378 100644\r\n--- a/alacritty_terminal/src/clipboard.rs\r\n+++ b/alacritty_terminal/src/clipboard.rs\r\n... [Log Snipped] ...\n     }\r\n }\n``` \r\n\r\nThe output is as follows:\r\n\r\n```\r\n[2019-06-22 11:08] [DEBUG] Clipboard#store ty=Selection\r\n[2019-06-22 11:08] [DEBUG] Clipboard#store text=alacritty\r\n[2019-06-22 11:08] [DEBUG] Clipboard#store ty=Clipboard\r\n[2019-06-22 11:08] [DEBUG] Clipboard#store text=alacritty\r\n[2019-06-22 11:08] [DEBUG] Clipboard#load ty=Selection\r\n[2019-06-22 11:08] [DEBUG] Clipboard#load text=\r\n[2019-06-22 11:08] [DEBUG] Clipboard#load ty=Clipboard\r\n[2019-06-22 11:08] [DEBUG] Clipboard#load text=\r\n```\r\n\r\nSo it seems the data is passed into `smithay-clipboard`, but it doesn't come out again.\n\n[Context/Logs]:\n- When I'm in a broken alacritty session, pasting text copied from other applications into alacritty doesn't work as well, but copying text in alacritty and then pasting to another application works. So it seems to me that just the clipboard loading is broken in any case.\r\n\r\nThat it either fails all the time or never within one session could indicate a race-condition during startup.\n- @chrisduerr i have a suspicion this could be to do with registering a seat for the clipboard however I\u2019ll have to do a bit of testing\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think I'm seeing two threads because alacritty actually starts two clipboard context. When I change this\r\n\r\n```\ndiff\r\n--- a/alacritty_terminal/src/clipboard.rs\r\n+++ b/alacritty_terminal/src/clipboard.rs\r\n@@ -47,13 +47,7 @@ impl Clipboard {\r\n                         ),\r\n... [Log Snipped] ...\n             };\r\n         }\n```\r\nI'm unable to reproduce the issue anymore! (I tried it about 20 times so far).\r\nCould there be a race because two clipboard threads are started simultaneously.\n- @pschyska @Freyr666 If you could test branch [URL] with\r\n```\nDiff\r\ndiff --git a/Cargo.toml b/Cargo.toml\r\nindex 2e8fd4d..8d1289c 100644\r\n--- a/Cargo.toml\r\n+++ b/Cargo.toml\r\n... [Log Snipped] ...\n servo-freetype-sys = { path = \"servo-freetype-proxy\" }\r\n+smithay-clipboard = { git = \"[URL] branch = \"roundtrip-before-n-after\" }\n```\r\nit would be appreciated :)"}
{"project_id": "Alacritty", "bug_id": "80", "source_type": "github", "llm_input_text": "[Title]: Color issue introduced in commit 629e24\n[Symptom]:\nWhich operating system does the issue occur on?\r\n\r\nIf on linux, are you using X11 or Wayland?\r\n\r\nWhile testing the latest master I ran into an issue where the entire terminal will turn green.\r\nDoing a git bisect points towards commit  \r\nI looked over the commit but could not find any obvious issues with the code, but then again I barely know rust. \r\n\r\nLet me know I you need any more info in order to debug.\n\n[Context/Logs]:\n- Would you mind creating ref test `alacritty --ref-test` in case you can reliably repro the issue?\r\n\r\nP.s. Close your alacritty with WM hotkey and not `Ctrl-D` (due to this #2625)\n- Here's the output from --ref-test, is it supposed to be like this?\r\n[Link: alacritty.recording]\r\n\r\nI thought for a second that the issue was with my greeting message, a small ascii logo and output from neofetch run through lolcat, however it seems that disabling that feature still results in everything being green.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Seems like the #rrggbb format has been broken with the xparsecolor rework.\r\n\r\nMinimal repro: `echo -e \"\\e]11;#090B13\\007\"`.\n- Fixed in [URL]"}
{"project_id": "Alacritty", "bug_id": "81", "source_type": "github", "llm_input_text": "[Title]: Links without a space after it\n[Symptom]:\nIf there is text after a link with non white space delimiter between them hovering over this text will show the underline under the link and clicking it will open the link but the underline is only under the link not the text.  Additionally if there is a second link in this text it will not detected.\r\n\r\nExample:\r\nA markdown link `[Link: [URL]\r\n\r\nI'm on macos using 0.3.2\n\n[Context/Logs]:\n- I can reproduce, looks like there's a bit of a problem with the combination of brackets here.\r\n\r\n\r\nIf I understand you correctly, you mean that the [text] part of the URL should get underlined? This is not intended and will not be supported. So I'd like to limit this feature to the incorrect detection of URLs with the combination of brackets here.\n- The correct text is underlined. The bug is that the text after the link when click will cause the link before it to open even though the link wasn't clicked"}
{"project_id": "Alacritty", "bug_id": "82", "source_type": "github", "llm_input_text": "[Title]: message bar displays ANSI escape codes on warning/error\n[Symptom]:\nWhich operating system does the issue occur on?\r\n\r\n- Fedora 29\r\n- alacritty-0.3.2\r\n- rustup 1.18.3\r\n\r\nIf on linux, are you using X11 or Wayland?\r\n\r\n- X11\r\n\r\n---\r\n\r\nI am missing `xclip` on my system, so alacritty is (correctly) giving me an error about this in the message bar. However, it looks like the message has ANSI color escapes that aren't being handled:\r\n\r\n[Image: image]\r\n\r\nI'm guessing these escapes correspond with the color red, since that's what's displayed when I invoke alacrity from another terminal:\r\n\r\n[Image: image]\r\n\r\n**Expected Behavior**: alacritty should either:\r\n1) Parse the ANSI codes and use the correct color (harder to implement) or\r\n2) Filter out the ANSI escape codes (easier to implement)\n\n[Context/Logs]:\n- I think the second suggestion is probably the most reasonable, it should give the best balance.\r\n\r\nHowever, there is a third option: Not using color when logging. If possible the other options should be preferred since they are less limited, but that would obviously be the easiest solution of all of them.\n- I think I kinda like just not printing color when logging. That's how many programs handle this.\r\n\r\nOtherwise, option 2 seems better if only because I don't want to deal with contrast on a colored message bar."}
{"project_id": "Alacritty", "bug_id": "83", "source_type": "github", "llm_input_text": "[Title]: 0 Width Vertical Block Selections\n[Symptom]:\nI've uncovered a bug while testing #2719 (as noted there). Basically we shouldn't allow empty vertical block selections of width 0. This can cause a situation where it looks like there is no selection, but in fact there is one. Since a selection prevents actions like clicking a URL, this can lead to strange user interactions.\r\n\r\n[Image: block-selection-url-bug-2019-09-07_00 03 52]\r\n\r\nTo reproduce on master, create a 0 width N height block selection, and then attempt to click a URL. I believe a proper fix for this is to disallow 0 width block selections, similarly to how other selections disappear.\n\n[Context/Logs]:\n- Fix was extremely simple, let me know if [URL] solves all the problems you've found!"}
{"project_id": "Alacritty", "bug_id": "84", "source_type": "github", "llm_input_text": "[Title]: Visual bell animation stalls\n[Symptom]:\nThe event loop stalls before completion of visual bell animation, even when the dirty bit is still set.\n\n[Context/Logs]:\n- I'm still seeing (what I think is) this issue on 0.4.0. I cause a bell, it mostly finishes the animation, but there's still an overlay of red (bell color) until I type another key. The opaqueness varies from bell to bell.\r\n\r\nUsing Xorg version 1.20.6\r\n\r\nGPU:\r\n\r\n    08:00.0 VGA compatible controller: NVIDIA Corporation GK208B [GeForce GT 710] (rev a1)\r\n\r\nBell config:\r\n\r\n    visual_bell:\r\n      animation: Linear\r\n      duration: 200\r\n      color: ' '\n- Note: I'm able to reproduce this on one computer with the above information, but not my laptop.\n- @virtualdxs Would you mind opening a separate issue for this?"}
{"project_id": "Alacritty", "bug_id": "85", "source_type": "github", "llm_input_text": "[Title]: Crash on `ESC [ Pn; Pn r` with Invalid Range\n[Symptom]:\nCurrently if you run `echo -e '\\e[15;1r'` in debug mode, Alacritty will panic. This is because a range should start with a smaller number than it ends with. XTerm (and I) think that a sequence like this should simply be ignored.\r\n\r\nIt's also worth noting that XTerm also ignores a range where `A=B` so `echo -e '\\e[15;15r'` would also be ignored.\n"}
{"project_id": "Alacritty", "bug_id": "86", "source_type": "github", "llm_input_text": "[Title]: reset selection when removing chars from before selection?\n[Symptom]:\nalacritty @  \r\n\r\nI can type something like `Hello, this is a test.`, then I select the word \"this\", move the cursor to the start of \"this\" and remove the substring \"Hello, \" which will cause the selection to become \" a t\" as the text shifts to the left but the selection stays in place. This looks odd imo.\r\nIt even looks a bit stranger when I double-click-select and the selection will automatically select the 1-2 words that are under the position that I clicked at initially, as the text scrolls by during deletion.\r\nThe actual clipboard content still represents the initially clicked test at least.\r\n\r\nWhich operating system does the issue occur on?\r\nlinux\r\n\r\nIf on linux, are you using X11 or Wayland?\r\nlinux 5.3.5-1-MANJARO, x11\n"}
{"project_id": "Alacritty", "bug_id": "87", "source_type": "github", "llm_input_text": "[Title]: hovering over very long lines slows down alacritty\n[Symptom]:\nWhich operating system does the issue occur on?\r\n\r\nLinux\r\n\r\nIf on linux, are you using X11 or Wayland?\r\n\r\nWayland\r\n\r\n\r\nReproduce:\r\n`head -c81920 /dev/urandom | base64 | tr -d '\\n'`\r\n\r\nIt also seems to happen with /dev/zero\n\n[Context/Logs]:\n- \"Slows down\" sounds like major understatement: it freezes Alacritty 0.3.2 (on X11) with 100% CPU usage for 20s. The longer the line, the harder it hits: 163840 causes 53 seconds hang.\n- Just to clarify, this should already be fixed by [URL] however that introduces some other problems so I'm not ready to mark this as resolved yet.\r\n\r\nHopefully that PR will end up in a state that automatically resolves this issue too though."}
{"project_id": "Alacritty", "bug_id": "88", "source_type": "github", "llm_input_text": "[Title]: If an SGR escape sequence sets the background color to the terminal background color, it is not opaque\n[Symptom]:\nArch Linux\r\n\r\n\r\nWayland\r\n\r\n---\r\n\r\nI realized this when a [Link: truecolor program] I wrote appeared with a noticeable hole in it. Because I use opacity in my terminal, I can see the background through it, instead of it being completely opaque due to the escape code.\r\n\r\nExample using ` ` background with opacity `0.0`:\r\n\r\n[Image: iExample]\r\n\r\nAs you can see, when `\\e[48;2;48;48;48m ` is printed, instead of a solid grey, it is completely transparent.\n\n[Context/Logs]:\n- It\u2019s a known thing and not a bug, since it was done intentionally iirc. The main problem with this behavior is that it\u2019s not documented in config file. This thing exist for achieving transparency in alt-screen apps like alsamixer/vim/mutt etc.\r\n\r\nIf you dont want this behavior just change background color a bit.\n- Ah, I'm used to urxvt, which does not do this.  I understand why this behavior exists; a program explicitly setting the background to the same as its default color probably has the intention of resetting the background.\r\n\r\nThe program I was using broke this assumption, since it intends to print arbitrary colors. [Link: `pixterm` is another program] which will have this issue; if an image is printed which happens to have a pixel match the background color, a noticeable hole will appear.\r\n\r\nI would like to disable this behavior for this reason, or even better change it so that only the 16-color black causes this. I'll try and patch this myself, so leave this issue closed unless someone else wants this behavior.\n- ... [Middle Discussions Snipped for Brevity] ...\n- If I'm understanding you correctly, you're talking about something like setting `black: ' '` and `background: ' '`, right? That way `\\e[40m` will display in `#000020`, and not trigger the opacity setting.\r\n\r\n\r\nThis won't help if I want to use `pixterm` or a similar program.  If my background is ` `, then I'll see a hole whenever pixterm displays an image with `#000020`. If I slightly change it to ` `, then I'll see a hole whenever pixterm displays an image with `#00001F`.  I could view any image with any colors in pixterm, so any background will cause this papercut somewhere.\n- While setting the color to the background color should give transparency, specifying a truecolor should not cause any transparency. @kchibisov is already working on a patch to fix this, so hopefully we can get the best of both worlds here again (seems like there was a regression in  )."}
{"project_id": "Alacritty", "bug_id": "89", "source_type": "github", "llm_input_text": "[Title]: Background is semi opaque during visual bell animation\n[Symptom]:\nArch Linux, Wayland(sway) and X11 (i3 + compton)\r\n\r\nDuring visual bell animation background is transparent(not fully though) with disabled transparency.\r\n\r\nEdit:\r\nWas able to repro on v0.3.3, so probably an old bug.\n\n[Context/Logs]:\n- Also note that the animation does not finalize.\r\n\r\n1. Set duration to 500ms\r\n2. Cause bell to trigger\r\n3. Observe 3 draws with opacity ~0.8, ~0.7 and ~0.4\r\n4. Observe that no further draw calls is made, resulting in an unfinished animation. Typing will cause the animation to progress (however, it doesn't always finalize completely).\r\n\r\nterminal.dirty is still true, so it would appear that the event loop is stalled. Maybe we need to force a draw event somehow if the terminal is still dirty.\n- This is a bit surprising to me since we draw our visual bell *above* the normal terminal background.\r\n\r\nThere might be an issue with the operations we perform (say we render in replace, instead of merging).\r\n\r\n\r\nThe terminal's `dirty` flag shouldn't be cleared when an animation is still going on. You can see that in `event.rs` pretty clearly.\n- As I said, the terminal is set to dirty, but no further draw calls are made. Either something else ends up clearing the bit outside of the assignment in event.rs, or the event loop has stalled. I did not investigate further yesterday.\n- Yeah, I didn't understand what you meant with your initial comment, however it seems like you've already figured it out. Thanks."}
{"project_id": "Alacritty", "bug_id": "90", "source_type": "github", "llm_input_text": "[Title]: Modifier state is wrongly set while switching between windows\n[Symptom]:\nWhich operating system does the issue occur on? Linux, Fedora 30.\r\n\r\nIf on linux, are you using X11 or Wayland? X11, i3.\r\n\r\nI'm using latest master branch. Sometime, randomly, the up arrow key doesn't work. Switching focus to another window and focus back again fix the issue. I saw this issue since #2438 , I also remember some guy mentioned it in the discussion.\r\n\r\nEDIT:\r\nScenario: I use i3wm, switching between windows is done by Logo+L. Which certain timing of Logo+L, logo modifier is turn on when it should not be, this can be seen in --print-events.\r\n\r\nThe state was wrong right after it was passed from glutin in the event loop, this suggests the bug is of glutin.\n\n[Context/Logs]:\n- While using Vim, `k` doesn't work as well, not only up arrow.\n- @nixpulvis I think you've run into this before, right?\r\n\r\n\r\nThis sounds interesting, does the key not work at all, so is it just swallowed? Can you reliably reproduce this?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Reported upstream in [URL]\n- Well, I have a similar issue on Wayland."}
{"project_id": "Alacritty", "bug_id": "91", "source_type": "github", "llm_input_text": "[Title]: Black border around terminal area\n[Symptom]:\nWhich operating system does the issue occur on? Linux\r\n\r\nIf on linux, are you using X11 or Wayland? X11\r\n\r\nEver since commit  , after resizing the window, I have a black bar around the terminal area within the terminal window. Also text rendering is kind of fuzzy (and smaller) compared to previous versions.\n\n[Context/Logs]:\n- Here is a screenshot of `make menuconfig` from the Linux kernel to show what I mean, this is supposed to take up the entire terminal:\r\n\r\n[Image: image]\n- Thanks for the report, this is a known issue though it hasn't been tracked as issue yet.\r\n\r\nThere's an upstream fix here: [URL]\r\n\r\nSo once that is merged, this will be resolved."}
{"project_id": "Alacritty", "bug_id": "92", "source_type": "github", "llm_input_text": "[Title]: Don't delete lines above the cursor on CSI Ps M\n[Symptom]:\n`Alacritty` should clamp `Ps` to not go above cursor, so if you're on the bottom line, typing `echo -e '\\e[1000;M'` shouldn't delete all the thing above and should be clamped to `1`.\r\n\r\nP.s. All the other terminals clamp it(vte based, xterm, kitty).\n\n[Context/Logs]:\n- Should be fixed in [URL]"}
{"project_id": "Alacritty", "bug_id": "93", "source_type": "github", "llm_input_text": "[Title]: Key binding mode replacement consistency\n[Symptom]:\nThis is a follow-up to [URL]\r\n\r\nCurrently the idea is that whenever a user defines a binding with a bigger scope `mode`, that the default binding is overwritten. The idea behind this is that the user's binding will always work for all scopes he has defined, while default bindings are left untouched as much as possible.\r\n\r\nThis already works well when staying either only in positive, or in negative modes, but as soon as modes are mixed like `Alt` and `~Alt` things get messed up. Overwriting a default binding by only overwriting the `~Alt` one for example, will currently also disable the `Alt` binding. This is inconsistent with what would be expected by the user, since he has only requested a change in Alacritty's behavior in this specific mode.\r\n\r\nI think to make sure that we do not create a regression in another area by fixing this, it's probably useful to lay out a table with all possible relevant combinations and creating dedicated tests for them to assure that the specification and implementation match up properly this time.\n\n[Context/Logs]:\n- Here's a table of the currently intended overwriting behavior:\r\n\r\n**ALL:** All terminal modes.\r\n**A:** A terminal mode other than **B**.\r\n**B:** A terminal mode other than **A**.\r\n**~Y:** Mode **Y** not set.\r\n**X:** Replace binding.\r\n**0:** Keep binding.\r\n\r\n|         | ALL | A |  ~A | B |  ~B | A + B |  ~A + B |  A + ~B | ~A + ~B |\r\n|---------|-----|---|-----|---|-----|-------|---------|---------|---------|\r\n|     ALL |  X  | X |  X  | X |  X  |   X   |    X    |    X    |    X    |\r\n|       A |  X  | X |  0  | 0 |  0  |   X   |    0    |    X    |    0    |\r\n|      ~A |  X  | 0 |  X  | 0 |  0  |   0   |    X    |    0    |    X    |\r\n|       B |  X  | 0 |  0  | X |  0  |   X   |    X    |    0    |    0    |\r\n|      ~B |  X  | 0 |  0  | 0 |  X  |   0   |    0    |    X    |    X    |\r\n|  A +  B |  X  | X |  0  | X |  0  |   X   |    X    |    X    |    0    |\r\n| ~A +  B |  X  | 0 |  X  | X |  0  |   X   |    X    |    0    |    X    |\r\n|  A + ~B |  X  | X |  0  | 0 |  X  |   X   |    0    |    X    |    X    |\r\n| ~A + ~B |  X  | 0 |  X  | 0 |  X  |   0   |    X    |    X    |    X    |\r\n\r\nA short summary would be that a binding is removed, when either of the bindings contains any mode of the opposing binding."}
{"project_id": "Alacritty", "bug_id": "94", "source_type": "github", "llm_input_text": "[Title]: Windows: startup_mode: Maximized no longer works\n[Symptom]:\nSystem: Windows 10, Alacritty 0.3.3.\r\n\r\nUsing `startup_mode: Maximized` has the same effect as `startup_mode: Windowed`.\r\nHowever, `Fullscreen` works fine.\r\n\r\nThis seems to be a regression compared to before.\n\n[Context/Logs]:\n- When you say regression, where did it regress from? I'd assume you mean 0.3.2?\r\n\r\nGenerally it would be nice to have a specific commit hash which broke it, but I'd assume that was a winit/glutin update. So before testing that, the #2438 PR should probably be tested, which updates Alacritty to the latest version of winit.\n- I am able to replicate this, but different behavior I think.\r\n\r\nIf I use `startup_mode: Maximized` the window starts at the top left of my screen and \"thinks\" it is maximized. (i.e it displays the \"Restore\" icon vs Maximize icon), example: [URL]\r\n\r\nIf I restore it and maximize again, it then maximizes correctly.\r\n\r\nAlso, I tested several older versions of Alacrity, `Maximized` does nothing for me before v0.3.3-rc1.  All builds before that just start the window normally.  All builds after cause the behavior mentioned.\r\n\r\nI've also tested the #2438 PR, it behaves identically to the most current release (0.3.3)\n- ... [Middle Discussions Snipped for Brevity] ...\n- @chrisduerr The example had the same results, I've reported the issue upstream w/ winit.\r\n[URL]\n- Seems like upstream is fixed now with [URL]"}
{"project_id": "Alacritty", "bug_id": "95", "source_type": "github", "llm_input_text": "[Title]: Lagging while using nano, vim, etc.\n[Symptom]:\nWhich operating system does the issue occur on?\r\n`Ubuntu 16.04`\r\nIf on linux, are you using X11 or Wayland?\r\n`X11`\r\n\r\nWhen I use nano it isn't loaded immediately, after I press a key it gets rendered. even while typing in nano, A key press will load the previous key and not the current key. Even when exiting, the save file option is shown only after I press some key. This issue remains with any editor I use. Even when using `git log --graph --pretty='\\''%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %Creset'\\'' --abbrev-commit` command, it gets rendered only after I press some key. Following is the video to showcase the issue. \r\n\r\n[Image: simplescreenrecorder-2019-03-26_14 22 30]\r\n\r\nIf you need any other info related to system config or want me to try out some experiments, I can help.\r\n\r\nEDIT 1 : Using `alacritty 0.2.7`\n\n[Context/Logs]:\n- Another thing I noticed is, everything works perfectly when I use a new instance of alacritty. But when an instance stays inactive for a while, it starts lagging. Sometimes writing in the terminal starts lagging.\n- Can you reproduce this in another terminal emulator? What if you try a different shell (`bash`, `zsh`, `fish`)? And finally, can you see if this is reproducible on the latest master? I don't have this issue and that's what I'm currently running. Even checking out the 0.2.7 tag doesn't give me the same behavior.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @chrisduerr I'm using Alacritty's latest \"master\" ( ) and am experiencing this issue with any program that makes frequent updates to the terminal (eg, apt install  ,  vim [:PlugUpdate], etc). Few screen updates take place until I press a key on my keyboard, then everything updates at once.\r\n\r\nThis issue does NOT exist in Alacritty v0.2.9 for me; everything works flawlessly there.\r\n\r\nBoth \"latest master\" and \"v0.2.9\" were compiled from source on my machine.\r\n\r\nOS: Linux Mint 19.1\r\nLaptop: Dell XPS 15\r\nGPU: GeForce GTX 1050\r\nNvidia Driver Version: 390.116\n- See below for a screencast using Vim and the latest version of Alacritty. The left terminal is alacritty, the right terminal is Gnome-Terminal. I'm using Screenkey to print my keys at the end so you can see exactly when I press them:\r\n[Image: screencast]"}
{"project_id": "Alacritty", "bug_id": "96", "source_type": "github", "llm_input_text": "[Title]: focused terminal turns invisible with chunkwm when opening another application\n[Symptom]:\nWhich operating system does the issue occur on? MacOS 10.13.3\r\nAlacritty version:  \r\n\r\nA focused alacritty terminal turns invisible when another app is opened. I'm using [Link: chunkwm] (a tiling window manager) so the alacritty terminal gets resized when I open another app. The contents of the alacritty terminal become visible when I focus the window again. I attached a gif showing this in action, the red outline shows which window has focus.\r\n\r\nIf I had to guess, this weird combination of a window being resized but losing focus that causes the terminal to stay invisible.\r\n\r\nThis is really just an annoyance :)\r\n\r\n[Image: alac]\n\n[Context/Logs]:\n- Hmm If I had to guess the window probably isn't redrawn even though it should be.\r\n\r\nHowever there should be a redraw issued after resizing, not sure why it doesn't happen. There have been some issues with transparency in the past, would you mind testing this with transparency disabled?\r\n\r\nYou can disable it by setting the `true` [Image: here] to `false`.\n- I still see the same behavior with that change. FWIW I have transparency off in my config `background_opacity: 1.0`. I also tried running alacritty with `-vvv` and this is what I see:\r\n\r\nThere's no output when the terminal gets resized and turns invisible. I see the following output when I focus the terminal.\r\n\r\n```\nTerm::resize\r\nnum_cols, num_lines = 105, 57\r\nwidth: 640, height: 698\r\nSet Attribute: Foreground(Named(Black))\r\ndesignate G0 character set as Ascii\r\n... [Log Snipped] ...\ncarriage_return\r\nmove_forward: 37\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- @nixpulvis `run_return` is steel not implemented in `winit` on macOs, so you can't run #2438 on macOs atm. For reference [Link: winit#1005].\n- I've noticed that [URL] seems to fix this issue. If anyone is interested in confirming this for other WMs (I've been using yabai), please let me know."}
{"project_id": "Alacritty", "bug_id": "97", "source_type": "github", "llm_input_text": "[Title]: Unable to launch when a virtual display is connected: 'assertion failed: validate_hidpi_factor(dpi_factor)'\n[Symptom]:\nArch 5.2.4 and X11.\r\n\r\n```sh\r\n[11:17] zer0 $ alacritty\r\nthread 'main' panicked at 'assertion failed: validate_hidpi_factor(dpi_factor)', /build/.cargo/git/checkouts/winit- /57680d2/src/platform/linux/x11/util/randr.rs:36:5\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n```\r\n\r\n\r\nI am using `intel-virtual-output` for my virtual display.\r\n\r\n[Link: here] is the output of `xrandr`.\r\n\r\nLet me know if you need anything else.\n\n[Context/Logs]:\n- I'd assume when you clone [URL] and then run `cargo run --example window`, you get the same crash?\n- Everything seems to work fine with `winit`\r\n```\n[11:42] zer0:winit (master) $ cargo run --example window\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.04s\r\n     Running `target/debug/examples/window`\r\nNewEvents(Init)\r\nEventsCleared\r\n... [Log Snipped] ...\nWindowEvent { window_id: WindowId(X(WindowId(54525953))), event: Focused(true) }\r\n...\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- Oh nice catch! Forgot to checkout the branch after cloning the fork. \r\n\r\nThat runs perfectly! @chrisduerr\n- Thanks for checking again, then everything makes sense. Marking this issue as fixed by the mentioned PR."}
{"project_id": "Alacritty", "bug_id": "98", "source_type": "github", "llm_input_text": "[Title]: window.decorartions: none not working on Windows 10\n[Symptom]:\nOS: Windows 10 Enterprise (10.0.17763 Build 17763)\r\nalacritty version: alacritty 0.3.3 (cc3e4d3) \r\n\r\nMy config:\r\n```\nshell:\r\n  program: arch.exe\r\nfont:\r\n  normal:\r\n    family: DejaVuSansMono NF \r\n... [Log Snipped] ...\nwindow:\r\n  decorations: none\n```\r\n\r\nIt all works fine, until I set the `decorations` attribute to `none`. When I start alacritty with that config, a **window opens without any error, but it is not visible**\r\n\r\n\r\nOutput of alacritty.exe -vv run in Powershell:\r\n```\nCreated log file at \"C:\\\\Users\\\\XXXX\\\\AppData\\\\Local\\\\Temp\\\\Alacritty-18680.log\"\r\n[2019-06-19 17:06] [INFO] Welcome to Alacritty\r\n[2019-06-19 17:06] [INFO] Configuration loaded from \"C:\\\\Users\\\\XXXX\\\\AppData\\\\Roaming\\\\alacritty\\\\alacritty.yml\"\r\n[2019-06-19 17:06] [DEBUG] Estimated DPR: 1\r\n[2019-06-19 17:06] [DEBUG] Estimated Cell Size: 8 x 17\r\n... [Log Snipped] ...\n[2019-06-19 17:06] [INFO] Using Winpty agent\r\n[2019-06-19 17:06] [INFO] Initialisation complete\n```\n\n[Context/Logs]:\n- Could you try running the `window` examlpe in [URL]\r\n\r\nThis is the patch you need to apply to disable decorations for the example:\r\n\r\n```\ndiff\r\ndiff --git a/glutin_examples/examples/window.rs b/glutin_examples/examples/window.rs\r\nindex f7da6c4..9ae551b 100644\r\n--- a/glutin_examples/examples/window.rs\r\n+++ b/glutin_examples/examples/window.rs\r\n... [Log Snipped] ...\n     let windowed_context =\r\n         ContextBuilder::new().build_windowed(wb, &el).unwrap();\n```\r\n\r\nYou can apply patches using `git apply patch.file` and then run the example using `cargo run --example window`.\n- @chrisduerr I was able to replicate the problem that was described by the OP. Figured I'd lend a hand.\r\n\r\nThe glutin example you provided with the patch runs fine on my machine. It just shows a white empty window.\r\n\r\nI tested a few Alacritty releases and discovered [Link: 0.3.0] introduced the bug. [Link: 0.3.0 RC3] works fine.\r\n\r\n\r\nI decided to spot test the commits between 0.3.0 RC3 and 0.3.0 and found that [Link: this commit to window.rs] caused it.\r\n\r\nEvery commit before then works fine when `decorations: none` is used.\r\n\r\nHope that helps you.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @felixrabe Thanks for the information. I ran these two commands against the PR to update them,\r\n```\r\nsed -i \"s/with_visibility/with_visible/g\" alacritty/src/window.rs\r\nsed -i \"s/with_transparency/with_transparent/g\" alacritty/src/window.rs\r\n```\r\n\r\n@chrisduerr It built with the above changes, and it works now with decorations set to none!\r\n[Image: image]\n- Thanks for the help with testing, looks like this will get fixed as soon as the glutin Evlp2 PR is merged."}
{"project_id": "Alacritty", "bug_id": "99", "source_type": "github", "llm_input_text": "[Title]: Opacity setting not applied\n[Symptom]:\nWhich operating system does the issue occur on?\r\nLinux -- Ubuntu 19.04 dev\r\nIf on linux, are you using X11 or Wayland? X11\r\n\r\nThis issue might be more question on how to debug this rather than there is an actual issue. Recently I updated alacritty to the latest master ( ) and install using `cargo deb --install`. My opacity setting is no longer being applied. I have also recently gotten an external gpu and have been messing with the gpu drivers (switching between nvidia versions and nouveau) so I'm not necessarily convinced this is an issue with the latest Alacritty. When running under sway window manager the opacity works, but under gnome (3.32) on X11 the opacity setting does not. \r\n\r\nI have tried running alacritty with the `-vvv` option but haven't seen any errors or logs that seem relevant. I'm still learning about how all the pieces work together recently switching over from mac to linux so I'm not sure where to look next for why the opacity is not working.\n\n[Context/Logs]:\n- I'm not aware of an isuse with opacity on Linux. The only two things that are commonly issues with this is that people think it's a transparency (not opacity, which is the opposite) setting and that no compositor is running.\r\n\r\nI'd expect GNOME on X11 to be running a compositor by default, however making sure that compositing is working properly is probably your best bet.\r\n\r\nThere's likely no logging in Alacritty's output because Alacritty doesn't run into any issues. If Alacritty attempts to render a transparent window and there is no issue, but the window manager doesn't render it with transparency, there's little Alacritty can do since it doesn't know anything about that.\n- After updating alacritty I had similar issues, now transparency doesn't work. I am using xcompmgr as the compositor, and all the settings are the same than before updating alacritty.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've reopened the upstream issue: [URL]\n- The same problem is also reproduced on my another PC with Intel integrated GPU.\r\nOS: Arch Linux\r\nWM & Compositor: kwin5\r\nMesa: 19.0.1-2\r\nGPU driver: modesetting DDX with i965 kernel driver\r\nglxinfo: [URL]\r\n\r\nOn this Intel machine, I did a git bisect on the commit history of alacritty. the last good commit (that can show transparency) is   and the first bad commit (that shows total opacity) is   ."}
{"project_id": "Alacritty", "bug_id": "100", "source_type": "github", "llm_input_text": "[Title]: crash on suspend-resume cycle with 0.2.3\n[Symptom]:\nWhich operating system does the issue occur on?\r\nLinux\r\nIf on linux, are you using X11 or Wayland?\r\nX11\r\n\r\nCrash after suspending and resuming my laptop, this is 100% reproducible.\r\n```\r\nthread 'main' panicked at '[winit] Failed to find any monitors using XRandR.', libcore/option.rs:989:5\r\nnote: Run with `RUST_BACKTRACE=1` for a backtrace.\r\n```\r\nSetting RUST_BACKTRACE=1 does not produce anything meaningful, I would probably need debugging symbols in my system C libraries.\n\n[Context/Logs]:\n- Can you check if this is reproducible with the winit example? It's available here: [URL]\r\n\r\nYou should be able to test it by running the following command:\r\n`git clone [URL] && cd winit && cargo run --example window`\r\n\r\nIf this can be reproduced with just the winit example, this should probably be reported upstream in the winit issue tracker. Feel free to open an issue yourself if you can reproduce it, otherwise I'll create one.\n- The same thing happens with the winit example, this is at least somewhat recently added. I know I have been able to suspend/resume with alacritty running before.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This still happens on my machine\n- This also happens on my machine every morning, alacritty just hangs, but can see a cursor on the top left, but thats it. When the pc suspends for just an hours, alacritty usually just takes a few minutes to redraw."}
{"project_id": "Alacritty", "bug_id": "101", "source_type": "github", "llm_input_text": "[Title]: File URLs not working with leading `/`\n[Symptom]:\nCurrently file paths do not work properly, since our URL parser allows only either zero or two slashes in the scheme. So a scheme like `file:/` or `file:///` is not allowed, however these are required for absolute paths (like `file:/root` or `file:///root`).\r\n\r\nSo we need to special case the logic for the `file` scheme and allow 0, 1, 2 and three slashes as scheme separators. We might potentially just want to throw out this check completely for paths.\n\n[Context/Logs]:\n- I think I'd be in favor of just removing the path check altogether. I'd think if we find one of our schemes (e.g. `https`, `file`, `mailto`, etc) in the form ` :` I'd expect to be reading the path next. Some schemes seem to have restrictions on what that path can be, or must be. For example `https:` must be followed by `//`, however IDK if we want to go to this level of validation.\n- I'm not sure that's true?\r\n\r\nBut since `/` are legal characters inside of URLs, I don't think I'm entirely against using only `:` for separation.\r\n\r\nThinking about it, there shouldn't be any problems with over-reporting URLs because of this, because the most likely case would be `:` separator without any `/`, which is already legal. So the only thing that is not legal is `:/` or `:///` (or more slashes). I personally can't think of any case where people would be upset when excessive slashes are recognized as URLs.\n- Yea it's not. :sweat: And technically the first slash isn't part of the path either.\r\n\r\nBut the details of this here aren't as important for our application since we aren't trying to parse out each component of the URL to spec. We simply want to recognize a URL when we see one."}
{"project_id": "Alacritty", "bug_id": "102", "source_type": "github", "llm_input_text": "[Title]: Shift-Delete in vim's command mode isn't working as expected\n[Symptom]:\nWhen I enter command mode `:` in vim, and type something, then start deleting with shift pressed, it simply moves the cursor instead of deleting the characters. I've tested this with both `alacritty` and `xterm-256color` as my `$TERM`.\r\n\r\nI'm curious why it works in insert mode, or generally everywhere else, just not in command mode. Other terminals don't seem to have this behavior.\n\n[Context/Logs]:\n- I can't reproduce this in neovim, so I'd assume it's vim specific.\r\n\r\nDo you get any different output when pressing shift+del in Alacritty vs a different terminal, when pressing ctrl+v to print the raw key escape?\n- FWIW I can repro in neovim."}
{"project_id": "Alacritty", "bug_id": "103", "source_type": "github", "llm_input_text": "[Title]: OSC52 and tmux set-clipboard does not work\n[Symptom]:\nWhich operating system does the issue occur on? Arch Linux\r\nIf on linux, are you using X11 or Wayland? X11\r\n\r\ntmux sends OSC 52 to Alacritty without the c parameter, i.e. the first parameter here %p1%s is blank.\r\n\r\n```\r\nMs: (string) \\033]52;%p1%s;%p2%s\\007\r\n```\r\n\r\nThis is the equivalent of running:\r\n\r\n```\r\nprintf \"\\033]52;;$(printf \"%s\" \"blabla\" | base64)\\a\"\r\n```\r\n\r\n(if you hit Ctrl+Shift+V afterwards, your clipboard should not change)\r\n\r\nHowever this works with the %p1%s parameter set to 'c'.\r\n\r\n```\r\nprintf \"\\033]52;c;$(printf \"%s\" \"blabla\" | base64)\\a\"\r\n```\r\n\r\n(if you hit Ctrl+Shift+V afterwards, your clipboard should have 'blabla' in it)\r\n\r\nAlacritty doesn't accept an empty parameter which is supposedly allowed in the spec. If we could add support for this, that would be awesome!\r\n\r\nFor tmux users, the workaround is to override the terminfo for alacritty:\r\n\r\n```\r\nset-option -ga terminal-override ',alacritty:Ms=\\E]52;c;%p2%s\\007'\r\n```\n\n[Context/Logs]:\n- Anyway the code in tmux that spits out the escape sequence is doing something like\r\n\r\n```\r\n\t\tbufferevent_write(wp->event, \"\\033]52;;\", 6);\r\n```\r\n\r\nXterm apparently defaults to 's0' if this field is empty, St just sets both the clipboard and selection buffers. Haven't investigated other terminals.\r\n\r\nThe relevant code in Alacritty is in alacritty_terminal/src/ansi.rs:\r\n\r\n```\nb\"52\" => {\r\n                if params.len() < 3 || params[1].is_empty() {\r\n                    return unhandled(params);\r\n                }\r\n\r\n... [Log Snipped] ...\n                }\r\n            },\n```\r\n\r\nRelevant code in xterm:\r\n\r\n```\r\n\tif (*base == '\\0')\r\n\t    base = \"s0\";\r\n```\r\n\r\nRelevant code in st (just straight up ignores the first parameter):\r\n\r\n```\r\n\t\t\t\tdec = base64dec(strescseq.args[2]);\r\n\t\t\t\tif (dec) {\r\n\t\t\t\t\txsetsel(dec);\r\n\t\t\t\t\txclipcopy();\r\n\t\t\t\t} else {\r\n```\n- @yiyangc91 Did this work in a previous release? I feel like I might have broken that in a recent refactoring, I probably missed the `zero or more` in the spec, but you're completely right.\r\n\r\nWe can probably just default to `c`, or the primary clipboard. I think that makes the most sense.\n- ... [Middle Discussions Snipped for Brevity] ...\n- PS: It looks like the terminfo entry that comes with the Homebrew installation of Alacritty does not include an `Ms` entry; is this intentional?\n- My apologies: I was still using a previous version. Will update (which should fix it)."}
{"project_id": "Alacritty", "bug_id": "104", "source_type": "github", "llm_input_text": "[Title]: Window close \"X\" button freezes alacritty\n[Symptom]:\nWhich operating system does the issue occur on?\r\nWindows 10 (insiders build 19033)\r\n\r\nOn my system, attempting to close Alacritty with the X button in the title bar causes it to crash. The whole application freezes. The CPU usage is 0% so I assume some kind of deadlock.\r\n\r\nIt's been a problem for a few months; not sure when it got introduced. I'd wondered about looking into it myself, but don't have the time right now. I might take a look in the New Year if it's still an issue then.\r\n\r\nI'm running powershell as my shell. ConPTY backend.\r\n\r\n(I'd been waiting for the glutin event loop update to land in case that fixed it. Then saw some similar work for WinPTY which I wondered if would fix it - doesn't seem to have helped.)\r\n\r\nSee example in this GIF (goes to not responding right at the end):\r\n\r\n[Link: [Image: Image from Gyazo]]\n\n[Context/Logs]:\n- Have you been running off master, or can you confirm that this was already an issue in v0.3.3?\n- Works fine in the \"portable\" 0.3.3. (I just downloaded to verify).\r\n\r\nThe issue is in my local compiled version. I've been running off master for some time.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I got similar issue after  upgrade from 0.3.3 to version 0.4.\r\n\r\nwindows 10 1909:\r\nI use the below line as icon start target.\r\n```\r\nC:\\tools\\alacritty\\alacritty.exe -e \"ssh -o ServerAliveInterval=60 name@hostname -t zsh\"\r\n```\r\nIt works fine. But when the close button in window is clicked, the window will be freeze.\n- I managed to find some time to play with this on a flight. It is indeed a deadlock, in Microsoft's `ClosePseudoConsole` API.\r\n\r\nI suspect it's an unfortunate misuse of the API by Alacritty; in the deadlocking case the in/out pipes are dropped long before `ClosePseudoConsole` is called. I suspect that some change since `0.3.3` caused the drop order to change.\r\n\r\nI've got a WIP workaround; I'll push it in the next week or so once I've had time to finish it off and have an internet connection.\r\n\r\nEdit: managed to finish it off on the airport free wifi \ud83d\ude04"}
{"project_id": "Alacritty", "bug_id": "105", "source_type": "github", "llm_input_text": "[Title]: Index out of bounds (scroll-back)\n[Symptom]:\nHey :wave:,\r\n\r\nI noted today when running `jest` (_a JavaScript test runner_) that `alacritty` crashed consistently. This is only happening when running it `jest` with the `--watch` option and scrolling.\r\n\r\nReproduce the following way:\r\n- Run `jest --watch` in a project with a couple of failing tests.\r\n- Scroll up to, lets say, the first failing test.\r\n- Modify and save a watched file, triggering a rerun of `jest` and resulting in `alacritty` crashing (output available below with `RUST_BACKTRACE=full`).\r\n\r\n### System\r\n\r\nOS: Arch Linux\r\nVersion: `alacritty 0.4.0` output\r\nLinux/BSD: X11, i3wm only\r\n\r\n### Logs\r\n\r\nCrashes:\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 34 but the index is 39', /build/rust/src/rustc-1.39.0-src/src/libcore/slice/mod.rs:2717:10\r\nstack backtrace:\r\n   0:       -  \r\n   1:       -  \r\n   2:       -  \r\n... [Log Snipped] ...\n  17:       -  \r\n  18:                0x0 -  \n```\r\nFont/Terminal size:\r\n```\n[2019-12-19 21:46] [INFO] Welcome to Alacritty\r\n[2019-12-19 21:46] [INFO] Configuration loaded from \"/home/sqve/.config/alacritty/alacritty.yml\"\r\n[2019-12-19 21:46] [DEBUG] Estimated DPR: 2\r\n[2019-12-19 21:46] [DEBUG] Estimated Cell Size: 12 x 30\r\n[2019-12-19 21:46] [DEBUG] Estimated Dimensions: None\r\n... [Log Snipped] ...\n[2019-12-19 21:46] [DEBUG] New num_cols is 98 and num_lines is 69\r\n[2019-12-19 21:46] [INFO] Width: 1192, Height: 2092\n```\r\n\r\n:pray:\n\n[Context/Logs]:\n- Could you compile `alacritty` with debug symbols? `alacritty` compiling with them by default (I guess your distro stripped them), so just cloning repo and running `RUST_BACKTRACE=full cargo run --release` + your program should be enough.\r\n\r\nAlso please share your config.\n- @kchibisov You can find my config at: [URL]\r\n\r\nI'll try to get back to you with the rest ASAP.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @kchibisov Getting this output when trying:\r\n```\n% RUST_BACKTRACE=full cargo run --\r\n    Updating git repository `[URL]\r\nerror: failed to load source for a dependency on `glutin`\r\n\r\nCaused by:\r\n... [Log Snipped] ...\nCaused by:\r\n  revspec ' ' not found; class=Reference (4); code=NotFound (-3)\n```\n- @sQVe try running `cargo update -p glutin`, it should compile just fine after it."}
{"project_id": "Alacritty", "bug_id": "106", "source_type": "github", "llm_input_text": "[Title]: Terminal print `6c6c6c` into the prompt after executing `cat`\n[Symptom]:\n# System\r\n|                  |                               |\r\n|------------------|-------------------------------|\r\n| Operating System | Linux 4.19.81-1-MANJARO     |\r\n| Rust Version     | 1.38.0   |\r\n| Display Server   | X11 |\r\n| Window Manager   | i3 |\r\n| Compositor       | compton |\r\n\r\n# Summary\r\nAlacritty v0.3.3 print `6c6c6c6c6c` characters into the prompt after executing `cat` or similar program.\r\nThis happen everytime on a few files.\r\nNumber of `6c` printed depends on the amount of file's content printed (more content = more `6c`).\r\nSeems like alacritty issue, because:\r\n- both ZSH and BASH print this characters in alacritty\r\n- terminator and gnome-terminal works fine (no `6c6c6c` characters)\r\n\r\n# Behavior\r\n( `|` stands for cursor position)\r\n```\r\nuser-pc$ cat file\r\nLorem ipsum\r\n...\r\nsit amet.\r\nuser-pc$ 6c6c6c6c6c|\r\n```\r\n\r\n# Expectation\r\n( `|` stands for cursor position)\r\n```\r\nuser-pc$ cat file\r\nLorem ipsum\r\n...\r\nsit amet.\r\nuser-pc$ |\r\n```\r\n\r\n# Extra\r\nAn example of a file having this issue:\r\n[Link: sample.zip]\n\n[Context/Logs]:\n- There are a lot of special characters in that file and it's not unlikely that one of these causes issues. URxvt also shows similar behavior, however I cannot say why XTerm and VTE do not.\r\n\r\nIt probably makes sense to investigate a minimal repro case, but generally I don't think it should be a problem. However if there's some reasonable workaround we might as well make use of it.\n- \\033[6c is alacritty's DA response so almost certainly the file contains some sequences of \\033[c.\r\n\r\nalacritty differs from xterm in that in xterm DA is only responded to if it matches exactly \\033[c - parameters aren't allowed, try for example:\r\n~~~~\r\nprintf '\\033[999c'\r\n~~~~\r\nThis class of problems is not very fixable, you can't cat binary data to the terminal and have no risk of something unexpected happening.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Matmaus - the point we are trying to make is that you will see funny stuff if you cat binary data to any terminal. Try something like `printf '\\033]2;'` in xterm or terminus - the terminal will hang. Your binary data could contain that. If you want to view binary data safely, load it into an editor, or use cat -v, or strings(1), or hexdump/od. Or just live with occasional terminal strangeness :-).\n- @nicm Thank you for explaining. I have tried it and nothing happened, but I know what do you mean. So thanks, good to know."}
{"project_id": "Alacritty", "bug_id": "107", "source_type": "github", "llm_input_text": "[Title]: Padding does not take effect until I start typing\n[Symptom]:\nWhich operating system does the issue occur on?\r\n\r\nmacOS 10.14.4\r\n\r\nI have Alacritty's window padding settings set to the default of:\r\n\r\n```\r\n  padding:\r\n    x: 10\r\n    y: 10\r\n```\r\n\r\nWhen I open a new Alacritty window, there is 0 padding, but when I begin to type the padding setting goes into effect and is set to `10px`.\r\n\r\nI've tried removing my config file and uninstalling and reinstalling Alacritty, but it still does this even with a fresh install.\n\n[Context/Logs]:\n- Does the prompt spawn in a window without any padding? What happens when you set the padding to something huge like `100`?\r\n\r\nDoes moving the mouse or starting a selection cause the padding to pop up?\n- @chrisduerr Correct, the window initially has no padding at all. When I set the padding to `100`, the window is larger, but the padding is still `0`.\r\n\r\nMoving the mouse doesn't do anything, but clicking on the window does cause the padding to appear,\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've tested on friends laptop with macOs 10.14.5 (13-inch, 2018)  + touch bar and I was able to reproduce this issue with plain `bashrc`. But the one thing I've noticed, that it doesn't \"bad\" every time. For e.g. when launching `alacritty -e htop` every thing is fine and when launching `alacritty -e bash` also fine, but starting  from dock/spotlight (so in this case `alacritty` invokes default shell(bash) with `--login`) results in the following issue.\n- And from my own tests, it happens in bash, zsh, and fish."}
{"project_id": "Alacritty", "bug_id": "108", "source_type": "github", "llm_input_text": "[Title]: Alacritty crashes after MacOS Catalina update\n[Symptom]:\nThe issue occurs on MacOS Catalina. \r\n\r\n```\r\nfish: '~/.cargo/bin/cargo run --releas\u2026' terminated by signal SIGILL (Illegal instruction)\r\n```\r\n\r\nThis is the error it throws after I try to run it from the commandline with `-vvv`.\n\n[Context/Logs]:\n- Does it happen in debug mode? Also would you mind to `cargo build --release` and then launch `lldb target/release/alacritty` and posting instruction where it fails and a backtrance.\n- ~~Just to clarify, this probably happened with the packaged Alacritty release, right? I think compiling from source might just fix this.~~\n- ... [Middle Discussions Snipped for Brevity] ...\n- ~Also could you test #2910?~\r\n\r\nJust retest latest master, since PR I\u2019ve mentioned was merged.\n- I retested with the latest master, using `--config-file /dev/null` and that does the trick. Weird thing is, on my other Mac (running the same version) my config works."}
{"project_id": "Alacritty", "bug_id": "109", "source_type": "github", "llm_input_text": "[Title]: Wrap line if double-width character is in last column\n[Symptom]:\nAlacritty already correctly wraps lines when the max number of text in a row is reached, however with double-width characters things change a little bit.\r\n\r\nIf a double-width character is printed in the last cell, a line break needs to be inserted before it. This is because there's only one cell left but the cell is two cells wide, leading to everything going beyond the first cell getting cut off.\r\n\r\nWhen testing, special care should be taken not to break selection and text reflow. Both these features make the assumption that the last cell will be filled when a row is 'full'.\n\n[Context/Logs]:\n- It seems like printing zero-width characters at the end of the line after all columns are occupied is also buggy, since it breaks the line even though it should not."}
{"project_id": "Alacritty", "bug_id": "110", "source_type": "github", "llm_input_text": "[Title]: Duplicated lines on window maximisation\n[Symptom]:\nFedora 31 with Sway git (352a3e1f) and alacritty HEAD as of today (24651a6). Switching window between FS and windowed several times gives a duplicated line each time, with the result:\r\n[Image: screen2]\r\nFor reference my PS1 is \r\n```\n__git_ps1 () {\r\n    local b=\"$(git symbolic-ref HEAD 2>/dev/null)\";\r\n    if [ -n \"$b\" ]; then\r\n        printf \" (%s)\" \"${b##refs/heads/}\";\r\n    fi\r\n... [Log Snipped] ...\n}\r\nprompt\n```\r\nPossibly duplicate of #1668 but this is a different platform and shell so posted a new bug. Thanks!\n\n[Context/Logs]:\n- Do you get the same behavior when reducing window size below the width of your prompt and then increasing it again? This looks like the issue you get when resizing the prompt, which Alacritty cannot resolve (this is present in all terminal emulators supporting reflow).\n- I guess it's similar behaviour, although wasn't aware that behaviour (which I've noticed in general use) was a shell issue. \r\n\r\nHowever in this case the terminal remains wider than the prompt, so I'm not sure if it is the same problem or not. I'm only ever toggling between a single window on a 1080p (techically 4K@2x) screen  as above and fullscreen.\n- ... [Middle Discussions Snipped for Brevity] ...\n- You can have a semibold font and then still have the separation between bold and semibold text. I'm running Fira Mono Medium myself. Using the prompt to color or style text is bound to mess with things.\r\n\r\nBut that's completely your choice, the issue might be related to that, but that's not the root cause of it. So it will be fixed in the future should you choose to stick with it.\n- Minimal repro in bash:\r\n - `export PS1=\"\\e[31;1mTEST > \"`\r\n - shrink and grow terminal"}
{"project_id": "Alacritty", "bug_id": "111", "source_type": "github", "llm_input_text": "[Title]: Underline and Strikethrough Bleed Into Current Line on Backspace\n[Symptom]:\nWhen I run `printf \"\\e[4;9mTEST      asd\\n\"` once to get our next prompt stuck with terminal attributes of underline and strikethough, then type at least 2 characters, finally using the arrow keys (or  ctrl-a ) and delete any but the last character of the text you entered, and notice that the styles bleed onto the right of the terminal.\r\n\r\nA gif's worth a million words (even if it's of horrid quality):\r\n[Image: QlrVhaj]\r\n\r\n```\r\nLinux masva 5.0.7-arch1-1-ARCH #1 SMP PREEMPT Mon Apr 8 10:37:08 UTC 2019 x86_64 GNU/Linux\r\n```\n\n[Context/Logs]:\n- I also have this problem. I am also experiencing a (related?) rendering problem, where the Underline of the font is sometimes a few pixels and  cuts through the chars. \r\n\r\nRunning Arch with the Awesome-Fonts. This issue was not present yesterday, and I don't believe I changed any config files."}
{"project_id": "Alacritty", "bug_id": "112", "source_type": "github", "llm_input_text": "[Title]: On `wsl.exe --shutdown`, Alacritty doesn't close the window until an event is fired\n[Symptom]:\nUnlike #915 and the handful of duplicates that have followed it, this is on *Windows*. I\u2019m currently running Alacritty   (HEAD~3).\r\n\r\nWindows Insider Preview, and Alacritty is running `wsl.exe -d arch -u me`, where arch is a WSL 2 machine.\r\n\r\nWhen I run `wsl.exe --shutdown` (\u201cImmediately terminates all running distributions and the WSL 2 lightweight utility virtual machine.\u201d), the program that Alacritty was running is killed off, but the Alacritty window remains around until I press a key, move the mouse or something similar.\r\n\r\nThis is not applying to normal exits; this WSL shutdown is the primary way of triggering it that I\u2019ve found, though I *think* I\u2019ve triggered it in other ways before as well.\n\n[Context/Logs]:\n- Can you reproduce this with something like `sleep 10; exit`?\n- Interesting, so that would indicate that it's a problem with quitting in general.\r\n\r\nOn Windows the PTY handling is significantly different, so that means our Signal handling might not be accurate, but if I understand you correctly you're using WSL 2, right?\r\n\r\nIIRC, WSL 2 is just Linux VMs, which would mean that you installed our Linux version and create a Linux PTY? So if you start up with `alacritty -v` there will be no mention of ConPTY or WinPTY, correct?\r\n\r\nMaybe there's a problem with signal handling through WSL 2 then?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yeah the lacking winit API certainly doesn't help with this. But maybe we can work around it by changing our behavior too.\n- Definitely the issue on `winit` side, isolated it here [URL]"}
{"project_id": "Alacritty", "bug_id": "113", "source_type": "github", "llm_input_text": "[Title]: Alacritty doesn't display emoji\n[Symptom]:\nI know, I know.\r\n\r\nAnyway, iTerm 2 and Terminal.app are both able to display emoji:\r\n\r\n[Image: example]\r\n\r\nbut alacritty isn't:\r\n\r\n[Image: example]\n\n[Context/Logs]:\n- Good to have a tracking issue for it :)\n- It would be nice to be able to define a specific font for these (emoji one, for example, as not all fonts have all emojis defined), maybe even an utf8 code point range? This could also be used for something like [URL] without the need to patch existing fonts.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Unfortunately only for Mac, the issue is still valid for Linux.\n- @maximbaz do you know whether there is anything required to have colored emojis in sakura?"}
{"project_id": "Alacritty", "bug_id": "114", "source_type": "github", "llm_input_text": "[Title]: Crash with OOB after\n[Symptom]:\nbasically you can try to repro it by staring selection and moving a cursor clockwise outside of the window, it should crash at some point. More investigations showing that it's related to First cell in a row, however I don't have a formal prove of it right now.\r\n\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 149 but the index is 149', /rustc/ /src/libcore/slice/mod.rs:2796:10\r\nstack backtrace:\r\n   0:       - backtrace::backtrace::libunwind::trace::h65597d255cb1398b\r\n                               at /cargo/registry/src/github.com- /backtrace-0.3.40/src/backtrace/libunwind.rs:88\r\n   1:       - backtrace::backtrace::trace_unsynchronized::hd4f479d7150ec4a0\r\n... [Log Snipped] ...\n  46:       - _start\r\n  47:                0x0 -  \n```\n"}
{"project_id": "Alacritty", "bug_id": "115", "source_type": "github", "llm_input_text": "[Title]: Unbounded recursion while printing error message\n[Symptom]:\nNote: This issue is not about the actual issue that causes alacritty to not start, but about the crash during printing the error message.\r\n\r\n### System\r\n\r\nOS: Linux (Alpine Edge), running on a Raspberry Pi 4\r\nVersion: alacritty 0.4.1 (a0403c7a16)\r\nLinux/BSD: Wayland, sway\r\nWindows: -- (doesn't apply)\r\n\r\n### Logs\r\n\r\nStdout (cropped, the details part of the message is apparently printed recursively):\r\n\r\n```\r\nAlacritty encountered an unrecoverable error:\r\n\r\nThere was an error initializing the shaders: There was an error initializing the shaders: There  was an error initializing the shaders: There was an error initializing the shaders: [...]\r\n```\r\n\r\nStderr (after the stack overflowed):\r\n\r\n```\r\nSegmentation fault\r\n```\r\n\r\n### Additional Info\r\n\r\n[URL]\r\n\r\nThe `println!()` in line 113 is the last line I can reach in GDB.\n\n[Context/Logs]:\n- Funny, I just bumped into this today trying again to run this on an incompatible ARM setup. Glad it's already fixed!"}
{"project_id": "Alacritty", "bug_id": "116", "source_type": "github", "llm_input_text": "[Title]: TMUX: Pane scrolling output affect other panes selection\n[Symptom]:\nHi, issue occurs with tmux. When top pane starts scrolling output, every bottom panes starts to move selections too. It works only with top pane. See gif.\r\n[Image: Alacritty]\r\n\r\n\r\n\r\n```\n# System\r\n|                  |                               |\r\n|------------------|-------------------------------|\r\n| alacritty        | 0.3.3 (679e67d)\r\n| Operating System | Arch Linux   \r\n... [Log Snipped] ...\n| Window Manager   | KDE Plasma \r\n| Compositor       | kWin\n```\r\n\r\n# Expectation\r\nI checked it with Konsole and it works as expected. See gif.\r\n[Image: Konsole]\r\n\r\n\r\n[Link: alacritty.log]\r\n\r\n[Link: alacritty.events.log]\n\n[Context/Logs]:\n- Besides Alacritty scrolling handling. How `konsole` behaves when your selection in an active pane (pane where you're outputting text) reaches the top of it? I'm interested in both cases top and bottom.\n- Hi, in konsole selection just cancelled when reached the top. See gif.\r\n[Image: tmux]\n- This should be fixed with #3218.\r\n\r\nI've tried to model the behavior with scrolling regions based on what I personally think is reasonable, since I did not have Konsole for testing and Termite just clears the selection.\r\n\r\nIf you're willing to help with testing, please let me know if it behaves like you would expect @house-of-vanity."}
{"project_id": "Alacritty", "bug_id": "117", "source_type": "github", "llm_input_text": "[Title]: Alacritty can't change size of bitmap fonts without a restart\n[Symptom]:\nIt seems like we should do a bit more for some bitmap fonts to make them change their size dynamically.\n"}
{"project_id": "Alacritty", "bug_id": "118", "source_type": "github", "llm_input_text": "[Title]: Powershell starts up with extra stuff prepended to the current directory name\n[Symptom]:\nAfter updating to the latest version, when Alacritty starts, either from the `Open Alacritty Here` context menu, or when running it from a previous Alacritty instance, the path has `Microsoft.PowerShell.Core\\FileSystem::\\\\?\\` prepended to. For example, if I open Alacritty in `C:\\home` my prompt says `PS Microsoft.PowerShell.Core\\FileSystem::\\\\?\\C:\\home>`. Other than the long prompt, everything seems to work properly. If I run `cd C:\\home` then the prompt appears how I would expect it to on startup: `PS C:\\home>`. Oddly enough, if I start a powershell 6 terminal, then run `alacritty.exe` inside there, the resulting instance of Alacritty does not have this long prompt. It does print `Cannot load PSReadline module.  Console is running without PSReadline.` above the prompt only in that case though.\r\n\r\n### System\r\n\r\nOS: Windows 10\r\nVersion: alacritty 0.4.1 (4d9253b)\r\nWindows: ConPTY\n\n[Context/Logs]:\n- Have you confirmed that downgrading to a previous version fixes this problem? Or could this just be an unfortunate collision of multiple updates at the same time?\r\n\r\nAlso, if you have a Rust toolchain installed, it would be extremely helpful to get the exact commit which broke this. That would likely make fixing it far easier.\n- After upgrading Alacritty I got the same problem (on `cmd.exe`).\r\n\r\nThe commit that broke this is  .\r\nMy guess is that [Link: this remark] is mistaken and you have to hope that the process can handle the UNC path.\r\n\r\nUsing again `dunce::canonicalize` in `alacritty_terminal/src/tty/windows/winpty.rs` (on latest master) fixes the issue on my end.\r\n\r\nI do not know what causes the PSReadline module error though.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'd imagine we're talking about a controlled environment here, where we don't receive a UNC path from Windows. So including `dunce` just for that seems very overkill and it'll likely cover a ton of edge cases we don't care about. However if it turns out not to be worth it to copy their code 1:1 ourselves, please let me know and we can rethink our strategy.\r\n\r\nThanks a lot for your quick reply!\n- Sounds like the cause has probably been found, but I can confirm that if I uninstall 0.4.1, then install 0.4.0 then the prompt does not have the extra stuff, and then if I re-install 0.4.1 the extra stuff reappears."}
{"project_id": "Alacritty", "bug_id": "119", "source_type": "github", "llm_input_text": "[Title]: Semantic selection when double clicking closing bracket doesn't work\n[Symptom]:\nIf you double click on an opening bracket `( hello )`, it'll select till the closing bracket, however the opposite isn't true.\n"}
{"project_id": "Alacritty", "bug_id": "120", "source_type": "github", "llm_input_text": "[Title]: Alacritty reverts the font change after moving across the monitors\n[Symptom]:\nI'm not sure that it's a desired behavior, however I feel like if a user changed font size from `X` to `Y` on a monitor `1` and then moved a window from a monitor `1` to a monitor `2` we should speculate with the updated font size and not with the default one. So the font size on a monitor `2` should be `Y * scale_factor` and not `X * scale_factor`.\r\n\r\nIn addition to this the next update after moving alacritty from `1` to `2` will be based on `Y` and not `X`, so it seems like a bug to me.\n\n[Context/Logs]:\n- You're absolutely correct. The new font size should just be the rescaled version of the current font size, not of the config."}
{"project_id": "Alacritty", "bug_id": "121", "source_type": "github", "llm_input_text": "[Title]: Trackpad Scroll events are ignored when scrolling really slow (less than one px per event)\n[Symptom]:\nAs title.\r\nThis is caused by casting the `lpos.y` to an i32.\n"}
{"project_id": "Alacritty", "bug_id": "122", "source_type": "github", "llm_input_text": "[Title]: One emoji is rendered huge\n[Symptom]:\n### System\r\n\r\nOS: Void Linux\r\nVersion: alacritty 0.4.2-dev (50c1fd0)\r\nLinux/BSD: Wayland, Sway\r\n\r\nThis text:\r\n```\r\n\ud83d\udc4blobby\r\n\ud83c\udfb5music\r\n\ud83c\udfaegames\r\n\ud83d\udce3announcements\r\n\ud83c\udff0members-chat\r\n\ud83d\udcacchat\r\n\ud83c\udff9ig_battlegrounds\r\n\ud83d\udc0emount-and-blade\r\n```\r\nlooks like this (note the bow emoji being huge):\r\n[Image: 2020-02-27-130741]\r\n\r\nThe alacritty config: [URL] \r\nYesterdays alacritty master didn't have this issue.\n\n[Context/Logs]:\n- Could you bisect? I can\u2019t repro this issue.\n- It seems like you've disabled scaling of bitmap fonts, however our workaround for this case were broken a while ago.\n- Thanks, that fixed it.\r\nBtw I've never changed scaling of bitmap fonts. (I presume it's done in fontconfig?) I use default font settings from the distro.\n- It\u2019s done by `/etc/fonts/conf.avail/10-scale-bitmap-fonts.conf` IIRC. You can check `fc-conflist` to check whether it\u2019s enabled for you."}
{"project_id": "Alacritty", "bug_id": "123", "source_type": "github", "llm_input_text": "[Title]: copy/paste broke on wayland after switching to console\n[Symptom]:\nOn archlinux using sway after switching to console copy/paste does not work in windows opened before switching.\r\n\r\n~~Until version 0.4.0 the same issue existed for paste but it got fixed :)~~\n\n[Context/Logs]:\n- I'm aware of this issue and it was never fixed iirc. Switching to console can kill clipboard in some alacritty instances for whatever reason, so purely random thing.\n- you are right :(\r\n\r\nit coincidentally worked on my first test.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Without having any underlying knowledge on how our clipboard behaves (in general, much less on Wayland), I would hazard a guess that this takes a while to manifest. I've previously suspended for a few minutes at a time and the issue doesn't crop up, but if I suspend overnight (usually around 7-8 hours), all of my terminals lose clipboard functionality upon wake. It's unfortunate that this takes so much time to (reliably) manifest.\n- A few weeks later, I can definitely confirm that the issue completely vanished for me after moving to b72903e after all. Unfortunately, as @cole-h said, it seems to be very hard to reproduce, so I can't really bisect the commits in between. Even worse, if I run the stable version of alacritty in parallel to the mentioned commit, switching to a TTY reliably breaks C&P **in the pre-release alacritty only**. It is only when I run nothing but that pre-release commit that I don't get this issue anymore."}
{"project_id": "Alacritty", "bug_id": "124", "source_type": "github", "llm_input_text": "[Title]: Wrong mouse cursor size on Wayland\n[Symptom]:\nMouse cursor is small, ~20px. Looks like system cursor settings are not respected.\r\nHave HiDPI display. Sway scale setting is default (=1).\r\n```shell\r\nGDK_DPI_SCALE=1.66\r\nXCURSOR_SIZE=40\r\ngsettings set org.gnome.desktop.interface cursor-size 40\r\n```\r\nAll other apps (including XWayland ones) show mouse cursor 40px sized.\r\nWith `WINIT_UNIX_BACKEND=x11` cursor sized properly.\r\n\r\n**OS:** Arch Linux, kernel 5.4.15\r\n**Version:** 0.4.1\r\n**Compositor:** sway\r\n\r\n  \r\n   alacritty -vv \r\n[2020-01-30 16:14] [INFO] Welcome to Alacritty \r\n[2020-01-30 16:14] [INFO] Configuration loaded from \"/home/user/.config/alacritty/alacritty.yml\" \r\n[2020-01-30 16:14] [DEBUG] Estimated DPR: 1 \r\n[2020-01-30 16:14] [DEBUG] Estimated Cell Size: 13 x 29 \r\n[2020-01-30 16:14] [DEBUG] Estimated Dimensions: None \r\n[2020-01-30 16:14] [INFO] Device pixel ratio: 1 \r\n[2020-01-30 16:14] [INFO] Initializing glyph cache... \r\n[2020-01-30 16:14] [INFO] ... finished initializing glyph cache in 0.023989566s \r\n[2020-01-30 16:14] [INFO] Cell Size: 13 x 29 \r\n[2020-01-30 16:14] [INFO] Padding: 0 x 0 \r\n[2020-01-30 16:14] [INFO] Width: 800, Height: 600 \r\n[2020-01-30 16:14] [INFO] PTY Dimensions: Line(20) x Column(61) \r\n[2020-01-30 16:14] [INFO] Initialisation complete \r\n[2020-01-30 16:14] [DEBUG] New num_cols is 73 and num_lines is 36 \r\n[2020-01-30 16:14] [INFO] Width: 956, Height: 1045\n\n[Context/Logs]:\n- You're correct, `XCURSOR_SIZE` isn't respected in a version of SCTK(our Wayland toolkit) winit(our windowing library) is using. The new version of SCTK solved this problem, however it'll take time for it to hit alacritty, since winit should update to it first, it also requires rust 1.40.0, so it's unlikely soon. However I'll try to ask whether we can get a fix for some old versions..."}
{"project_id": "Alacritty", "bug_id": "125", "source_type": "github", "llm_input_text": "[Title]: ToggleSimpleFullScreen increases window height by one line each time\n[Symptom]:\n### System\r\n\r\nOS: macOS 10.14.6\r\nVersion: alacritty 0.4.1 (4d9253b)\r\n\r\n### Logs\r\n\r\nCrashes: N/A\r\nFont/Terminal size: `alacritty -vv`\r\n\r\n```\n[2020-01-24 11:24] [INFO] Welcome to Alacritty\r\n[2020-01-24 11:24] [INFO] Configuration loaded from \"/Users/mks/.alacritty.yml\"\r\n[2020-01-24 11:24] [DEBUG] Estimated DPR: 2\r\n[2020-01-24 11:24] [DEBUG] Estimated Cell Size: 19 x 38\r\n[2020-01-24 11:24] [DEBUG] Estimated Dimensions: Some((1900.0, 912.0))\r\n... [Log Snipped] ...\n[2020-01-24 11:24] [DEBUG] New num_cols is 100 and num_lines is 27\r\n[2020-01-24 11:24] [INFO] Width: 1900, Height: 1044\n```\r\n\r\nKeyboard and bindings: `alacritty --print-events`\r\n```\n[2020-01-24 11:26] [INFO] Welcome to Alacritty\r\n[2020-01-24 11:26] [INFO] Configuration loaded from \"/Users/mks/.alacritty.yml\"\r\n[2020-01-24 11:26] [DEBUG] Estimated DPR: 2\r\n[2020-01-24 11:26] [DEBUG] Estimated Cell Size: 19 x 38\r\n[2020-01-24 11:26] [DEBUG] Estimated Dimensions: Some((1900.0, 912.0))\r\n... [Log Snipped] ...\n[2020-01-24 11:26] [INFO] glutin event: LoopDestroyed\r\n[2020-01-24 11:26] [INFO] Goodbye\n```\r\n\r\n### Description of bug\r\n\r\nUsing the `ToggleSimpleFullScreen` action increases window height by one line each time it's invoked on macOS. It also intermittently shows an extra line in the prompt when in full screen.\r\n\r\n[Image: output]\r\n\r\nThere\u2019s also a similar bug where if you start in `SimpleFullScreen` and then change back to `Windowed` mode, it doesn\u2019t respect the window dimensions set in the configuration file. Instead it seems to revert to 84 x 32, until you start toggling as described, when the height slowly increases as shown above.\r\n\r\n### How to reproduce\r\n\r\nAdd a binding for `ToggleSimpleFullscreen` and set the `startup_mode` for `window` to `Windowed`. Then at launch toggle back and forth via a keybinding (doesn't seem to matter which, but mine was Command+Return).\n\n[Context/Logs]:\n- So winit is basically increasing window size by 22 when going back to from SimpleFullscreen as far as I can see.\n- @msanders  Could you try to set decorations to `none` in a config and retest?\n- @kchibisov: Disabling window decorations indeed fixes it (although it still shows the extra prompt line in full screen).\n- opened upstream bug [URL]"}
{"project_id": "Alacritty", "bug_id": "126", "source_type": "github", "llm_input_text": "[Title]: Command key on macOS remains activated after window changes (cmd+TAB)\n[Symptom]:\nSince upgrade stable versions from 0.4.0 to 0.4.1 I have experienced that the command key seems to remain in a activated state when changing windows with cmd+TAB.\r\n\r\nThe result is then either unresponsive keys until cmd is pressed and released again, or when hitting keys like Q or H, the window quits or hides accordingly.\r\n\r\nAlso, it seems be reproducible consistently when you cmd+TAB to an \"empty window\" (i.e. on macOS some programs can run without graphical window).\r\n\r\n### System\r\nOS: macOS\r\nVersion: alacritty 0.4.1 (4d9253b)\n\n[Context/Logs]:\n- Could you, please, provide us the with `alacritty --print-events`? Oh and press `A` char right after you've released `Cmd`, so it'll be easier to track where it happens.\n- The same issue has been found on Wayland already and we're working with upstream on a fix:\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @tantonini If this is also present on X11, could you open a separate issue for that?\n- Until this is resolved I started using a less than ideal workaround:\r\n\r\n```\nyaml\r\nkey_bindings:\r\n  # - { key: Key0,      mods: Command,            action: ResetFontSize    }\r\n  # - { key: Equals,    mods: Command,            action: IncreaseFontSize }\r\n  # - { key: Add,       mods: Command,            action: IncreaseFontSize }\r\n... [Log Snipped] ...\n  - { key: F,         mods: Command,            action: None }\r\n  - { key: Return,    mods: Command,            action: None }\n```"}
{"project_id": "Alacritty", "bug_id": "127", "source_type": "github", "llm_input_text": "[Title]: Crashes on start on Windows\n[Symptom]:\nAfter installing the latest version, Alacritty crashes on start with an error pop-up. I've tried running it with and without a config file but no luck. Any ideas?\r\n\r\n\r\n### System\r\n\r\nOS: Windows 10\r\nVersion: 0.4.1 (installed via msi installer)\r\nWindows: ConPTY\r\n\r\n### Error output\r\n\r\n\r\n#### Alacritty: Runtime Error\r\npanicked at 'assertion failed: `(left == right)`\r\n  left: `1`,\r\n right: `0`', C:\\Users\\travis\\.cargo\\git\\checkouts\\winit- \\d1c6506\\src\\platform_impl\\windows\\dark_mode.rs:135:13\n\n[Context/Logs]:\n- The crash is outside of alacritty as far as I can see, so it's a winit bug.\n- That's a file I helped with in winit so I'll help figure this one out.\r\n\r\n@Number7tSeven what Windows 10 version are you running? (e.g. Insiders Fast Ring, October 2018 update, etc)\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm running Windows 10 Enterprise LTSC 1809 and got the same problem. It is the latest version of Windows in LTSC channel so it couldn't be upgraded.\r\nSince 1809 is the latest version in LTSC channel, I think it should be supported.\n- This should be fixed in the next release, we just need to wait for another version of our winit depedency (see [URL]"}
{"project_id": "Alacritty", "bug_id": "128", "source_type": "github", "llm_input_text": "[Title]: Mouse cursor rendered in low-res on a HiDPI Wayland output\n[Symptom]:\nLinux\r\n\r\n\r\nWayland, Sway git master roughly equivalent to 1.1rc2.\r\n\r\nOn a HiDPI output, with scaling set to 2, the mouse cursor set by Alacritty is a low-res one. I.e. it is probably rendered to a surface that has **not** had its buffer scale set. This means the compositor (Sway in this case) will scale it.\r\n\r\nSee the difference below. When the cursor is hovering over the title bar, it is rendered by Sway itself, in high-res. When it's hovering over the window content, it is rendered in low-res.\r\n\r\n[Image: high-res]\r\n[Image: low-res]\r\n\r\nI realize it's likely this isn't a bug in Alacritty per s\u00e9, but in one of its (wayland) dependencies.\n\n[Context/Logs]:\n- Can you reproduce this with the examples from [URL] The simple `window` example should do the job.\r\n\r\nI'd assume that this is an issue that needs to be handled upstream in winit.\n- It reproduces with the `window` example. Is winit the correct upstream project to report this to?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Oh yeah searching the issue trackers is a great idea! Thanks for the links.\n- These bugs have been fixed"}
{"project_id": "Alacritty", "bug_id": "129", "source_type": "github", "llm_input_text": "[Title]: Failed to open input method\n[Symptom]:\nWhich operating system does the issue occur on? Ubuntu 18.04\r\n\r\nIf on linux, are you using X11 or Wayland? X11\r\n\r\nthe error:\r\n\r\n```\nRUST_BACKTRACE=1 alacritty\r\nthread 'main' panicked at 'Failed to open input method: PotentialInputMethods {\r\n    xmodifiers: None,\r\n    fallbacks: [\r\n        PotentialInputMethod {\r\n... [Log Snipped] ...\n   9: __libc_start_main\r\n  10:  \n```\n\n[Context/Logs]:\n- Probably best to report this upstream with winit/glutin. I don't think there's anything Alacritty can do about this.\r\n\r\nHowever would you mind giving the #1403 PR a shot first? It's a big glutin/winit version jump, so it's possible that this resolves the issue.\n- This looks like it could be the same as tomaka/winit#636\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm also running Ubuntu 18.04 on X11 and having the same issue.\r\nLater I found that my `/etc/default/locale` was:\r\n```\r\nLANG=\"en_HK.UTF-8\"\r\nLANGUAGE=\"en_HK:en\"\r\n```\r\nAfter changing to:\r\n```\r\nLANG=\"en_CA.UTF-8\"\r\nLANGUAGE=\"en_CA:en\"\r\n```\r\nproblem was fixed.\n- Noticed the same behavior on manjaro 18.0.4 with x11 and actual 0.3.3 alacritty installed via manjaro repositories.\r\n\r\nFixed it by moving the binary file to a different path `/opt/alacritty/alacritty` and creating a shell script under `/usr/bin/alacritty`, which simply sets the language without the `.UTF-8`-ending, as suggested by @happysmash27 :\r\n\r\n```bash\r\n#!/bin/bash\r\n\r\nLANG=en_dk /opt/alacritty/alacritty $@\r\n```\r\n*$@ expands to the script arguments*\r\n\r\nMy quick test to verify a still utf-8 compatible terminal was to create a `utf8.txt` file with some utf-8-only chars:\r\n\r\n```text\r\n\u00e4\u00f6\u00fc\u00df!\"'\u00a7$%&/()=?\u00b0^,.-;:_<>\u20ac\u0192\u2020\u2026\u2021\u02c6\u2030\u0160\u2039\u0152\u2022\u2014\u2122\u00b6\u00d8\r\n```\r\n\r\nRunning `cat utf8.txt` correctly displayed all chars in alacritty and everything else seems to work normally.\r\n\r\nAfter launching alacritty it is possible to export the original LANG value with `.UTF-8`-ending, to ensure compatibility with other programs, f.e. by modifying the `.bashrc`."}
{"project_id": "Alacritty", "bug_id": "130", "source_type": "github", "llm_input_text": "[Title]: ANSI SGRs after an unknown SGR are incorrectly ignored\n[Symptom]:\nAn escape sequence like this:\r\nESC[31;10;44mHelloESC[0m\r\n... will render incorrectly with a red foreground and black background, instead of a red foreground and blue background.\r\nIt's because of this block in ansi.rs, in vte::Perform:\r\n\r\n            ('m', None) => {\r\n                if args.is_empty() {\r\n                    handler.terminal_attribute(Attr::Reset);\r\n                } else {\r\n                    for attr in attrs_from_sgr_parameters(args) {\r\n                        match attr {\r\n                            Some(attr) => handler.terminal_attribute(attr),\r\n                            None => {\r\n                                unhandled!();\r\n/* The \"return\" below causes all attributes after an unknown one to be ignored! */\r\n                                return;\r\n                            },\r\n                        }\r\n                    }\r\n                }\r\n            },\r\nBecause the return causes control to bail out without processing any further attributes.\r\nRemoving the return corrects the issue, but I don't know what else it may break.\n"}
{"project_id": "Alacritty", "bug_id": "131", "source_type": "github", "llm_input_text": "[Title]: Don\u2019t allow setting HollowBlock and hidden cursors in config\n[Symptom]:\nWe shouldn\u2019t allow both mentioned cursors in a config file, since they are only for internal usage and was leaked due to serde tbh. Also you can\u2019t use Hollow cursor, since there\u2019s no way to restore it.\n\n[Context/Logs]:\n- That's not entirely true, you can use `echo -e \"\\e[0 q\"` to restore it regardless of what your current cursor is.\n- Oh, with reset sure, but you should do it manually most of the time, I guess.\n- Hi I would be interested to have a HollowBlock cursor by default. I reverted #3410 and everything seems to work fine, I probably miss something but what is the reason this has been removed ?\n- Because the hollow block cursor makes no sense as a normal terminal cursor."}
{"project_id": "Alacritty", "bug_id": "132", "source_type": "github", "llm_input_text": "[Title]: Selection in Alt-screen isn't cleared on mode leave\n[Symptom]:\nif you run `alt-screen-random-write` from `vtebench`, select something during it, when it finish, you'll go back to a normal mode and won't see any selection. if you start it again you'll see your old selection from it.\r\n\r\nI guess we should just always clear selection on mode toggle.\n"}
{"project_id": "Alacritty", "bug_id": "133", "source_type": "github", "llm_input_text": "[Title]: Winit events aren't logged with /dev/null config file\n[Symptom]:\nWhen running Alacritty with the command `alacritty --config-file /dev/null --print-events`, events are initially printed, however after a config reload + events cleared event, no further winit events are logged.\n"}
{"project_id": "Alacritty", "bug_id": "134", "source_type": "github", "llm_input_text": "[Title]: Index out of bounds panic when highlighting.\n[Symptom]:\nIt seems like a regression of #3233. Reproduce it by clicking and dragging inside the window and releasing outside the window, but only if the cursor is above and to the right of the starting position.\r\n\r\nAfter bisecting, it looks like   is the culprit.\r\n\r\n### System\r\nOS: Linux\r\nVersion: alacritty 0.4.2-dev (bb0a214)\r\nLinux/BSD: Wayland/Sway\r\n\r\n### Logs\r\n\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 105 but the index is 105', /rustc/ /src/libcore/slice/mod.rs:2806:10\r\nstack backtrace:\r\n   0:       - backtrace::backtrace::libunwind::trace::he25250f78ba1020d\r\n                               at /cargo/registry/src/github.com- /backtrace-0.3.40/src/backtrace/libunwind.rs:88\r\n   1:       - backtrace::backtrace::trace_unsynchronized::hd7e25f35da233a1e\r\n... [Log Snipped] ...\n  44:       - _start\r\n  45:                0x0 -  \n```\n"}
{"project_id": "Alacritty", "bug_id": "135", "source_type": "github", "llm_input_text": "[Title]: Incorrect mouse position\n[Symptom]:\nUsing the mouse to select text is off when on Retina screen.\r\n\r\nBug introduced in [URL]\r\n\r\n### System\r\n\r\nOS: macOS\r\nVersion: master\r\n\r\nReproduction:\r\n\r\nOpen Alacritty on retina screen\r\nTry to select text\r\nSelection is off from actual cursor position\n\n[Context/Logs]:\n- start-up log:\r\n\r\n[Link: Alacritty-91939.log]\n- opened upstream issue [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @ddevault are you using some master version of alacritty? it shouldn't be a problem on v0.4.1. As for a master version, I've fixed upstream, so we just waiting on a new release of our windowing library.\n- Aye I'm using master, I switched to the stable release for now."}
{"project_id": "Alacritty", "bug_id": "136", "source_type": "github", "llm_input_text": "[Title]: Ctrl+q not working\n[Symptom]:\nWhich operating system does the issue occur on?\r\nmacOS\r\n\r\n`Ctrl+q` is not working unless I add this line to `key_bindings`:\r\n\r\n```yml\r\n- { key: Q, mods: Control, chars: \"\\x11\" }\r\n```\r\n\r\nOther `Ctrl` keys seem working with default `key_bindings` config.\n\n[Context/Logs]:\n- Same with me, i use `ctrl + q` for tmux prefix\n- Same here with macOS 10.12.6\r\n@aioutecism 's solution did work for me.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Here's a log where I press Ctrl+q twice, letting go of both buttons fully; only one `\\u{11}` is generated.\r\n```\nCreated log file at \"/var/folders/31/l7xdkf4d04x2xdh52wm93fjwc6cznp/T/Alacritty-56667.log\"\r\n[2019-11-08 10:53] [INFO] Welcome to Alacritty\r\n[2019-11-08 10:53] [INFO] Configuration loaded from \"/Users/jerric/.config/alacritty/alacritty.yml\"\r\n[2019-11-08 10:53] [INFO] Device pixel ratio: 2\r\n[2019-11-08 10:53] [INFO] Initializing glyph cache...\r\n... [Log Snipped] ...\n[2019-11-08 10:53] [INFO] glutin event: WindowEvent { window_id: WindowId(Id(140382647460256)), event: CloseRequested }\r\n[2019-11-08 10:53] [INFO] Goodbye\n```\r\n\r\nMac keyboards only have one control button.\r\nYou can remap modifier keys on macs, but there's no option to map it to RControl or LControl.\r\n[Image: image]\n- Reported upstream in [URL]"}
{"project_id": "Alacritty", "bug_id": "137", "source_type": "github", "llm_input_text": "[Title]: alacritty doesn't close unless it is visible on sway\n[Symptom]:\nWhich operating system does the issue occur on? sway on Arch Linux\r\n\r\nIf on linux, are you using X11 or Wayland? Wayland\r\n\r\nHow to reproduce: Run a command like \"sleep 3 && exit\" and then either:\r\n- switch to another workspace\r\n- open another window using a tabbed layout\r\n\r\nYou'll see alacritty doesn't close itself after 3 seconds, like it should, until it is visible again.\n\n[Context/Logs]:\n- I can repro on #2438 + sway.\n- If I understand this correctly, I can repro this on 3475e44 on macOS 10.11, by just switching to another application. As you may see on this gif, Alacritty's window closes only when I move the cursor back to it: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Tacklebox I can repro this issue on `v0.3.3` and the original one was before evlp2 merge(massive changes to event loop). my sway version is 1.2-d19f4f7b (Oct 16 2019, branch 'master'). So, I'm not sure that it's a regression, if it was the same one, then I should be able to repro it on Windows/X11, however I can't.\r\n\r\nP.s. I can repro this issue even on quite old versions (`v0.3.0`)\n- Upstream bug [URL]\r\n\r\n@for-coursera Please, open a separate issue for macOS, since this bug is a Wayland specific one."}
{"project_id": "Alacritty", "bug_id": "138", "source_type": "github", "llm_input_text": "[Title]: Always render emojis with default color\n[Symptom]:\n<img width=\"738\" alt=\"screen shot 2018-12-05 at 3 16 44 pm\" src=\"[URL]\r\n\r\nI'm on macOS. Here's my ridiculous tmux status bar. I name all my windows emojis because it makes me happy. I tried out Alacritty. But was disheartened when I realized it inverts the color on any window tab with activity. And it's most noticeable if you use colorful emoji as your window titles.\n\n[Context/Logs]:\n- Your terminal emulator might actually be telling Alacritty to invert the colors. Judging by the black/white mix, I'd assume that's exactly how that is achieved.\r\n\r\nNow if emojis should be affected by that is a different question, but that's likely what's going on. So if you would set the manual color codes instead of using the inversion escape, that should resolve the problem.\n- That seems plausible, but this doesn't happen in Terminal or iTerm 2.\n\nOn 12/05, Christian Duerr wrote:\n- ... [Middle Discussions Snipped for Brevity] ...\n- Looks like the file has moved and I haven't linked to a fixed commit. This should be the correct path:\r\n[URL]\n- @felipesere do you see a more appropriate solution? I think it is really possible to check `cell.c` against a list of emoji range in unicode but this way Alacritty would support emojis only manually, hence when new emojis appear, they will be inverted and should be manually added to the range."}
{"project_id": "Alacritty", "bug_id": "139", "source_type": "github", "llm_input_text": "[Title]: [wayland] Clipboard amnesia with alacritty and geany\n[Symptom]:\nFedora 31 AND Void (musl) [different hardware]\r\n0.4.2\r\nwayland gnome and wayland sway\r\n\r\n\r\nThe problem manifests solely with the geany editor for me but perhaps there are other applications.\r\n\r\n\r\nTo reproduce, have an alacritty terminal open, open the geany editor.\r\nSelect some text in geany and Copy, verify that Paste in geany works as intended. It should.\r\nAttempt Paste in alacritty terminal. Nothing is produced.\r\nAttempt Paste in any other application. Should work as intended.\r\n\r\nRepeat the attempt in firefox (or some other application), Paste works as intended in alacritty.\r\n\r\n\r\nNow attempt Copy in alacritty after selecting some text. Paste works in alacritty and firefox.\r\nAttempting Paste in geany produces nothing.\r\n\r\ngeany seems to be using xwayland but the problem is absent for other xwayland applications.\r\n\r\n**In Fedora 31, When using gnome-terminal instead of alacritty, the issue is entirely absent.**\r\n\r\n**In Void sway, When using sakura instead of alacritty, the issue is entirely absent.**\r\n\r\nOn Fedora the alacritty config is entirely default.\r\nOn void the alacritty config has been taken from someone's dotfiles and is customized.\n\n[Context/Logs]:\n- Sounds like you might be mixing Wayland and XWayland applications?\n- Yes but that is not supposed to be a problem. And it it isn't for all the other xwayland applications I use. The bug seems to be with the combination of geany and alacritty. Perhaps geany uses some deprecated API or something but alacritty should still be compatible.\r\n\r\nSakura and gnome-terminal are wayland terminals just like alacritty.\n- ... [Middle Discussions Snipped for Brevity] ...\n- well, paste from geany should work(works for me\u2122), however paste to geany from alacritty doesn't, since it actually uses UTF8_STRING even for paste, so I'll reopen issue to track it.\n- I can confirm that copying from geany works when pasting to alacritty.\r\ncopying from alacritty does not work when pasting to geany.\r\n\r\nUsing \"echo 'test' | wl-copy\" in alacritty (alacritty is likely irrelevant) does work and successfully pastes test\\n into geany."}
{"project_id": "Alacritty", "bug_id": "140", "source_type": "github", "llm_input_text": "[Title]: Garbage left over in buffer after resizing window\n[Symptom]:\nAlacritty's behaviour when resizing the terminal window is a bit odd (doesn't match other terminal emulators I've tried). I'm not sure if this is a bug, or working as intended.\r\n\r\nTo reproduce on latest master:\r\n\r\n* Open a small window, and generate a screen-full of data (e.g. `ls -al /usr/bin`).\r\n[Image: image]\r\n\r\n* Open something like `vim`, then resize the terminal to be a bit bigger.\r\n[Image: image]\r\n\r\n* Quit `vim`.\r\n[Image: image]\r\n\r\nAt this point, there is now a bunch of garbage output from the original command _below_ the current prompt, and a  Ctrl + L  is necessary to make the terminal usable again. Not a huge deal, but a papercut nonetheless.\n\n[Context/Logs]:\n- What platform are you on? What terminfo do you use? What's your ncurses version? Which Alacritty version is this? Can you reproduce this with other shells?\r\n\r\nPlease provide some more information, otherwise there's no way to help.\n- @chrisduerr sorry about that, I could reproduce it on every setup I tried so I assumed it was configuration-independent. I can reproduce this on:\r\n\r\n* GNOME shell (X11, default Debian Buster version)\r\n* GNOME shell (Wayland, default Debian Buster version)\r\n* sway (Wayland, master)\r\n\r\n~My colleague mentioned that he's seen this same behaviour on the Windows build from the _Releases_ tab, but I can't verify this myself (I've asked them to try again, and will update when they do).~ They have not been able to reproduce this anymore.\r\n\r\nI mentioned in the first post that this was on Alacritty master, but I could've been more clear.\r\n\r\nI use the `xterm-256color` terminfo.\r\n\r\nI have the default `ncurses` version that ships with Debian Buster, which appears to be `6.1+20181013-2`.\r\n\r\n`nano` also functions as a reproduction instead of `vim`. For reference, the same steps on other terminals I've tried produce the below results:\r\n\r\n* `uxterm`\r\n[Image: image]\r\n\r\n* `kitty`\r\n[Image: image]\r\n\r\n* `gnome-terminal`\r\n[Image: image]\r\n\r\nThe exact mechanism by which these terminals deal with the resize vary, but all three are immediately usable after exiting `vim`.\r\n\r\nThings seem to be correct in the v0.4.0 and v0.4.1 .deb package from _Releases_.\r\n\r\n[Image: image]\r\n\r\nThe issue happens reliably in the v0.4.2 RC 3 build.\n- Since the number of commits was not too large and I had a bit of free time, I bisected what I suspect is the cause:\r\n\r\n```\n$ git bisect good\r\n  is the first bad commit\r\ncommit  \r\nAuthor: Kirill Chibisov  \r\nDate:   Sun Jan 26 16:49:58 2020 +0300\r\n... [Log Snipped] ...\n\r\n:040000 040000     M\talacritty_terminal\n```\r\n\r\nThis change appears to have been introduced in [URL] The issue is not present in its parent commit,  ."}
{"project_id": "Alacritty", "bug_id": "141", "source_type": "github", "llm_input_text": "[Title]: Alacritty can not show current path in window title when folder contain some characters\n[Symptom]:\n1. Open alacritty and mkdir a folder named \"\u672c\".\r\n2. Change path to new folder \u672c.\r\n3. Titlebar doesn't show current path, instead  it shows \u672a\u547d\u540d\u7a97\u53e3(unamed window).\r\n[Image: 1]\r\nAlacritty can show path in window title when folder name changes to other Chinese character like \"\u6210\".\r\n[Image: 2]\r\n\"\u672c\" and \"\u6210\" are Chinese characters, and they are all in common use. \r\nAnd i tried xterm, it can show both two path correctly.\r\n\r\n### System\r\n\r\nOS: archlinux\r\nVersion: 0.4.2\r\nLinux/BSD: X11, Openbox\n\n[Context/Logs]:\n- If you run `echo -e \"\\e]2;\u672c\\x9c\" && sleep infinity`, does that work?\n- Alacritty's screenshot after run this command.\r\n[Image: 3]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Screenshot after running `alacritty -vvv | grep \"Setting title to\"` in alacritty\r\n[Image: 7]\r\n.\r\n\r\nAnd screenshot with title contain \u672c.\r\n[Image: 8]\n- Great bug, thanks for finding that!\r\n\r\nTurns out this unicode symbol actually contains the String Terminator byte (`\\x9c`), which Alacritty interpreted as a terminator for the OSC escape sequence.\r\n\r\nSince the C1 String Terminator is not used by any application I'm aware of, I've removed support for terminating OSCs using it, fixing this bug: [URL]"}
{"project_id": "Alacritty", "bug_id": "142", "source_type": "github", "llm_input_text": "[Title]: MacOS stack overflow on f99220f\n[Symptom]:\nRunning alacritty build from master at ref f99220f causes a runtime error immediately when starting up.\r\n\r\nThe following PR caused this: [URL]\r\n\r\nUsing the commit before works fine\r\n\r\n### System\r\n\r\nOS: macOS\r\nVersion: alacritty 0.5.0-dev (f99220f)\r\n\r\n### Logs\r\n```bash\r\n./target/release/alacritty\r\n\r\nthread 'main' has overflowed its stack\r\nfatal runtime error: stack overflow\r\nfish: './target/release/alacritty' terminated by signal SIGABRT (Abort)\r\n```\n\n[Context/Logs]:\n- seems like something in my config is causing the crash. I'll try to narrow down what that might be\n- turns out I had the following enabled:\r\n\r\n```yaml\r\nwindow:\r\n# Window class (Linux only):\r\n  class:\r\n    # Application instance name\r\n    instance: Alacritty\r\n    # General application class\r\n    general: Alacritty\r\n```\n- This change seems related? [URL]\n- The crash also happens on Windows 10 with ConPTY: `thread 'main' has overflowed its stack`.\r\nCommenting out the `# Window class (Linux only):` section of the config fixes it for me as well."}
{"project_id": "Alacritty", "bug_id": "143", "source_type": "github", "llm_input_text": "[Title]: Line rotation invalidating grid\n[Symptom]:\nIt seems like our rotation of the grid does not behave correctly. This means that it is possible to delete history outside of the visible region by repeatedly running the escape to scroll down the viewport.\r\n\r\nThe rotation also does not update the display offset, which could potentially lead to index out of bounds crashes.\r\n\r\nThis can be reproduced like this:\r\n * `echo \"test\"`\r\n * `ls -lah` until \"test\" is gone in history\r\n * `echo -e \"\\e[1000T\"`\r\n   -> Content is incorrectly deleted from history\r\n\r\n * `echo \"test\"`\r\n * `ls -lah` until history is present\r\n * `sleep 3 && echo -e \"\\e[10T\"`\r\n * Scroll to top of history\r\n   -> Content scrolls down, display offset is beyond its limit\n"}
{"project_id": "Alacritty", "bug_id": "144", "source_type": "github", "llm_input_text": "[Title]: Regression in font rendering in 0.4.3 vs 0.4.2\n[Symptom]:\n### System:\r\n\r\nOS: macOS 10.14.6\r\n\r\n### Settings:\r\n\r\n- `use_thin_strokes: false`\r\n- `defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO`\r\n\r\nThere is already some discussion of this in the comments of #3804, but I'm opening a separate issue specifically for this issue.\r\n\r\nWith `use_thin_strokes: false` set, font rendering appears to be worse in 0.4.3 than it was in 0.4.2:\r\n\r\n0.4.2:\r\n<img width=\"627\" alt=\"image\" src=\"[URL]\r\n\r\n0.4.3:\r\n<img width=\"632\" alt=\"image\" src=\"[URL]\r\n\r\nThe change is quite subtle, but it definitely looks less smooth in 0.4.3. For what it's worth, this (0.4.3) looks similar to other font rendering on my system when `defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO` is not set (i.e. without subpixel anti-aliasing).\n\n[Context/Logs]:\n- Could you bisect the issue? And please make sure Alacritty is restarted after disabling font smoothing in the config.\r\n\r\nAn educated guess would tell me that [URL] is the only thing that could have possibly changed this. So that's probably a good place to check.\n- Using the font Victor Mono Light on my machine (macOS 10.15.3) makes for a more dramatic difference:\r\n\r\n0.4.2: \r\n[Image: Screen Shot 2020-06-03 at 13 10 19]\r\n\r\n\r\n0.4.3: \r\n[Image: Screen Shot 2020-06-03 at 13 05 04]\r\n\r\nI can do some bisecting starting with   real quick\n- ... [Middle Discussions Snipped for Brevity] ...\n- Do you know of anything else I should check/test (besides tests and rustfmt) around this fix before opening a PR?\n- Nope, should be all good."}
{"project_id": "Alacritty", "bug_id": "145", "source_type": "github", "llm_input_text": "[Title]: macOS font fallback\n[Symptom]:\nAlacritty doesn't show certain UTF-8 characters, for example, like the Russian ruble sign `\u20bd`\r\n\r\niTerm on the left, Alacritty on the right\r\n\r\n<img width=\"1178\" alt=\"Screen Shot 2019-09-14 at 7 23 44 PM\" src=\"[URL]\r\n\r\nUsing default config settings\r\n\r\nmacOS version 10.14.6\n\n[Context/Logs]:\n- What\u2019s your output of `locale` in alacritty?\n- Output of `locale` in Alacritty:\r\n\r\n```\nbash\r\nLANG=\"en_US.UTF-8\"\r\nLC_COLLATE=\"en_US.UTF-8\"\r\nLC_CTYPE=\"en_US.UTF-8\"\r\nLC_MESSAGES=\"en_US.UTF-8\"\r\n... [Log Snipped] ...\nLC_TIME=\"en_US.UTF-8\"\r\nLC_ALL=\n```\r\n\r\n@kchibisov\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hmm maybe the glyph isn't missing?\r\n\r\nThis might sound strange, but usually when a glyph is missing a character is rendered that shows that it is. However in this case nothing is rendering.\r\n\r\nUsually the only scenario where nothing is rendered should be when a font actually renders the glyph as nothing. So maybe the problem isn't that there is no fallback font found that has this glyph, but the issue is that there is a font and it just doesn't render anything?\n- I know, but it's something I can repro quite easy with emojis and leaving only 1 font, which doesn't have them. Like emojis are not rendered at all, but missing glyph isn't presented. That could happen if our font backend is error out somewhere, so we're ending up with nothing in place."}
{"project_id": "Alacritty", "bug_id": "146", "source_type": "github", "llm_input_text": "[Title]: Inconsistent locale when running from command line vs from dock\n[Symptom]:\nWhich operating system does the issue occur on?\r\nMacos, Alacritty version 0.3.3, Swedish keyboard\r\n\r\nI installed Alacritty via homebrew\r\n\r\nIf I start alacritty via the Icon in the dock/ Applications folder then the \u00e5\u00e4\u00f6 characters doesn't work, \u00e5 and \u00e4 does nothing and \u00f6 prints `(arg: 6)`\r\n\r\nhowever, if I open Alacritty by running `/Applications/Alacritty.app/Contents/MacOS/alacritty` in iTerm2, then those characters works just fine\r\n\r\nis env/dotfiles loaded differently or something?\n\n[Context/Logs]:\n- @RichoDemus You can actually compare them by typing `env`, seems like locale problem. Also, could you share your `shell` section from `alacritty.yml`? On macOS your `shell` should have arg `--login` to work properly. It has this flag by default, but if you've changed it somehow, it can break things.\n- Thanks 2 things:\r\nI can definitely see env differences, it seems like when I launch it from iterm it enherits some stuff from there (I see a bunch of iterm things) but also things like `LC_CTYPE=UTF-8` is missing when it doesn't work and `SHLVL=2` is 1 when it doesn't work and 2 when it works\r\n\r\nI did however try to just type `export SHLVL=2` and `export LC_CTYPE=UTF-8` but that didn't fix it\r\n\r\nI'm not entirely familiar with how the config works, \r\nI've copy-pasted the alacritty.yml file from the repo into `~/.config/alacritty/alacritty.yml` is that then the only file that config is read from or are there multiple? (and they kinda override each other)\r\n\r\nanyway, the whole shell section is commented out there, so I guess the `--login` thing should apply then\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm seeing the same problem with slight differences. \r\nI use a font with extra powerline characters, so that's how I noticed it, but can't see Scandinavian characters either. (I'm Norwegian)\r\nHowever, I have the exact same environment settings in both iTerm2 and Alacritty, and when launching Alacritty from Alfred and from iTerm2. They're en_US.UTF-8 as they should be. \r\nI have this new variable though: when I launch my shell with Tmux configured to automatically launch, it fails to show the extended characters, but when I comment that out, everything is fine. I can then manually launch tmux, and everything is fine.\r\nThis also happens when I set tmux as my `shell program` in alacritty.yml\n- @tofagerl You should pass `--login` flag to your shell (`alacritty` doing this by default).\r\nThis is how your shell section in `alacritty.yml` should look like.\r\n```\r\nshell:\r\n  program: /usr/local/bin/tmux\r\n  args:\r\n    - --login\r\n```\r\nEdit: `By default` means when you haven't set your shell explicetly in a config file."}
{"project_id": "Alacritty", "bug_id": "147", "source_type": "github", "llm_input_text": "[Title]: Reflow not wrapping cursor correctly\n[Symptom]:\nWhen the grid width is changed and content reflows, the cursor should reflow with the content. This is necessary to make sure that writes will be correct when occuring during a resize.\r\n\r\nRepro:\r\n * Run `echo -n \"[LONG LINE]\" && sleep 10 && echo -n \"xxx\"`\r\n * Shrink terminal to wrap the long line, before sleep is done\r\n   -> The `xxx` is written at the wrong location, it should be right after `[LONG LINE]`\n\n[Context/Logs]:\n- yeah, seems like cursor position is indeed broken. Just reflowing during the following command results in 'spaces' between output, however it should be contiguous line.\r\n```\r\nfor i in `seq 0 10000`; do echo -ne \"1234567890\"; sleep 0.1 ; done\r\n```"}
{"project_id": "Alacritty", "bug_id": "148", "source_type": "github", "llm_input_text": "[Title]: Mouse click positions are not accurate until after the mouse moves in the focused window\n[Symptom]:\nMac OS 10.14.4\r\nAlacritty v0.3.2\r\n\r\nRepro:\r\nThis is easiest to reproduce (and happens pretty commonly) when using a trackpad because that makes it easier to send a click without any tiny movements of the pointer.\r\n\r\n1) Open a file in an editor with mouse support (for example vim with mouse enabled).\r\n2) Position the mouse pointer over some line in that file and click.\r\n  The cursor should move the that location.\r\n3) Switch focus to some other applicaiton (not alacritty) on your computer.\r\n4) Move the mouse to a position over the alacritty window when it **_does not_** have focus.\r\n5) Click without moving the mouse.\r\n  The alacritty window should now have focus.\r\n6) Click again without moving the mouse.\r\n  The click is triggered where the mouse was positioned before the alacritty window lost focus.\r\n\r\nAs soon as you move the mouse with the alacritty window focused the clicks will now appear in the correct position.\r\n\r\nThis is easy to observe in text editors. For example, double clicks typically highlight the entire symbol your mouse is currently over. You can see the symbol under the old location where your mouse was get highlighted. \r\n\r\nI have recreated the same scenarios with other utilities as well. tmux with mouse mode on will show the same problem when switching focus away and back to the alacritty window and clicking without moving the mouse. Pane selection will not be accurate until you move the mouse over a focused alacritty window.\n\n[Context/Logs]:\n- Can this be reproduced without any application running inside of Alacritty and without mouse mode enabled? So just by starting a selection?\n- Yes, it can be reproduced with a double click that selects text. Mouse clicks are triggered at the position where the pointer was before the alacritty window loses and regains focus.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Tried it but I'm getting this when running it:\r\n\r\n```\n\u279c  glutin git:(master) RUST_BACKTRACE=1 cargo run --example window\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.12s\r\n     Running `target/debug/examples/window`\r\nPixel format of the window's GL context: PixelFormat { hardware_accelerated: true, color_bits: 24, alpha_bits: 8, depth_bits: 24, stencil_bits: 8, stereoscopy: false, double_buffer: true, multisampling: None, srgb: true }\r\nthread 'main' panicked at 'gles2 function was not loaded', /Users/benjamin/projects/github/glutin/target/debug/build/glutin_examples- /out/gl_bindings.rs:1158:13\r\n... [Log Snipped] ...\n             at /rustc/ /src/libstd/rt.rs:64\r\n  15: window::main\n```\n- Reported upstream in [URL]"}
{"project_id": "Alacritty", "bug_id": "149", "source_type": "github", "llm_input_text": "[Title]: Windows: startup_mode: Maximized no longer works\n[Symptom]:\nSystem: Windows 10, Alacritty 0.3.3.\r\n\r\nUsing `startup_mode: Maximized` has the same effect as `startup_mode: Windowed`.\r\nHowever, `Fullscreen` works fine.\r\n\r\nThis seems to be a regression compared to before.\n\n[Context/Logs]:\n- When you say regression, where did it regress from? I'd assume you mean 0.3.2?\r\n\r\nGenerally it would be nice to have a specific commit hash which broke it, but I'd assume that was a winit/glutin update. So before testing that, the #2438 PR should probably be tested, which updates Alacritty to the latest version of winit.\n- I am able to replicate this, but different behavior I think.\r\n\r\nIf I use `startup_mode: Maximized` the window starts at the top left of my screen and \"thinks\" it is maximized. (i.e it displays the \"Restore\" icon vs Maximize icon), example: [URL]\r\n\r\nIf I restore it and maximize again, it then maximizes correctly.\r\n\r\nAlso, I tested several older versions of Alacrity, `Maximized` does nothing for me before v0.3.3-rc1.  All builds before that just start the window normally.  All builds after cause the behavior mentioned.\r\n\r\nI've also tested the #2438 PR, it behaves identically to the most current release (0.3.3)\n- ... [Middle Discussions Snipped for Brevity] ...\n- @chrisduerr The example had the same results, I've reported the issue upstream w/ winit.\r\n[URL]\n- Seems like upstream is fixed now with [URL]"}
{"project_id": "Alacritty", "bug_id": "150", "source_type": "github", "llm_input_text": "[Title]: Copy/Paste failure under wayland/KDE\n[Symptom]:\nWhen run under wayland with kde/plasma as the compositor, copy/paste using ctrl-shift-{C,V} does not work.\r\nThis is a regression from 0.4.3.\r\n\r\n### System\r\n\r\nOS: Linux (Fedora 32)\r\nVersion tested:  \r\nWorks in:  \r\n\r\nLogs are from opening a terminal; selecting a word from the command prompt text; hitting ctrl-shift-C, ctrl-shift-V; then ctrl-c if it worked; then ctrl-D to exit.\r\n\r\n## Broken\r\n\r\n```\n[1334031.504]  -> wl_display@1.get_registry(new id wl_registry@2)\r\n[1334031.597]  -> wl_display@1.sync(new id wl_callback@3)\r\n[1334039.879] wl_display@1.delete_id(3)\r\n[1334039.900] wl_registry@2.global(1, \"wl_compositor\", 4)\r\n[1334039.922]  -> wl_registry@2.bind(1, \"wl_compositor\", 4, new id [unknown]@4)\r\n... [Log Snipped] ...\n[1339974.463]  -> xdg_toplevel@33.destroy()\r\n[1339974.479]  -> xdg_surface@32.destroy()\n```\r\n\r\n## Working\r\n\r\n```\n[1240089.421]  -> wl_display@1.get_registry(new id wl_registry@2)\r\n[1240089.539]  -> wl_display@1.sync(new id wl_callback@3)\r\n[1240097.775] wl_display@1.delete_id(3)\r\n[1240097.798] wl_registry@2.global(1, \"wl_compositor\", 4)\r\n[1240097.828]  -> wl_registry@2.bind(1, \"wl_compositor\", 4, new id [unknown]@4)\r\n... [Log Snipped] ...\n[1247194.065]  -> xdg_toplevel@33.destroy()\r\n[1247194.098]  -> xdg_surface@32.destroy()\n```\n\n[Context/Logs]:\n- Could you bisect this?\n- There's no need for bisect.\n- ... [Middle Discussions Snipped for Brevity] ...\n- copy and past in current release also fails on Ubuntu 18.04\n- That's a different issue, the issue here isn't presented in any release. On Ubuntu 18.04 (GNOME Wayland) middle click paste is not working, since it's not supported by GNOME Wayland on Ubuntu you're using. Only `Ctrl + Shift + C`/`Ctrl + Shift + V` should work."}
{"project_id": "Alacritty", "bug_id": "151", "source_type": "github", "llm_input_text": "[Title]: Fix goto match end in search\n[Symptom]:\nCurrently the SearchEndNext and SearchEndPrevious match act exactly like the SearchNext and SearchPrevious action, however this is not how vim works. In vim, regardless of direction the `gN` action always jumps to the next match start to the left of the cursor, while the `gn` action always jumps to the next search end to the right of the cursor.\r\n\r\nWhile both approaches might seem reasonable at first, vim's approach has a significant advantage wrt predictability and automation of the movement. By always knowing which direction the motion goes to, this allows for mappings that predictably navigate inside the current match regardless of the global search direction. So deleting until the end of the match would always be `dgn` for example, regardless in which direction the user has jumped to it.\r\n\r\nSo to improve the ability to compose this binding and make it easier to use for vim users, we should emulate vim's behavior rather than sticking closer to the SearchNext and SearchPrevious bindings.\n"}
{"project_id": "Alacritty", "bug_id": "152", "source_type": "github", "llm_input_text": "[Title]: Alert user when specified font cannot be found\n[Symptom]:\nWhen an unknown font is specified, the Alacritty window will not open, and it doesn't create any error boxes. For example, when this is in my `alacritty.yml`:\r\n```yml\r\nfont:\r\n  normal:\r\n    family: Fira Code\r\n    style: Regular\r\n  size: 11.0\r\n```\r\nand I don't have Fira Code installed, Alacritty will simply not open. Running Alacritty from the command line with the `-v` flag reveals why:\r\n```\r\nPS C:\\Program Files\\Alacritty> .\\alacritty.exe -v\r\nPS C:\\Program Files\\Alacritty> Created log file at \"C:\\Users\\private\\AppData\\Local\\Temp\\Alacritty-17208.log\"\r\n[2020-07-06 12:39:07.895761700] [INFO] Welcome to Alacritty\r\n[2020-07-06 12:39:07.896759300] [INFO] Configuration loaded from \"C:\\Users\\private\\AppData\\Roaming\\alacritty\\alacritty.yml\"\r\nAlacritty encountered an unrecoverable error:\r\n\r\n        Couldn't find a font with name Fira Code and style Regular\r\n        Please check the font config in your alacritty.yml.\r\n```\r\nIt works fine once Fira Code is installed, but in the case where you copy over a config file to a new computer (where an uninstalled font is specified in the config), it can be difficult to diagnose why Alacritty doesn't open - I for example didn't know what the issue was until I found out that I could run the executable with the `-v` flag. It's very confusing if nothing happens when Alacritty is run (without flags).\r\n\r\nIt would be helpful to new users if Alacritty either\r\n - produced an error window specifying the issue or\r\n - reverted to the default font and showed the error in the bottom like it does with other errors.\r\n\r\n### System\r\nOS: Windows\r\nVersion: `alacritty 0.4.3 (c723247)`\r\nWindows: ConPTY\n\n[Context/Logs]:\n- Are you sure that is the case? Errors are logged regardless of command line flags and as you can see, the unrecoverable error also doesn't have a logging level in front of it, so it wouldn't make sense that it only becomes visible with `-v`.\n- Regardless of logging, we should make our best attempt to at least startup though. So I think it would be a worthwhile change to try again if the default font does not manage to load successfully.\n- Could you check if [URL] fixes this problem for you? It should fallback to the default font and print an error if it could not be loaded.\n- Apologies for the late reply. I have built and run #3945, and it seems to work just fine as per the screenshot:\r\n[Image: image]\r\nI think this is a very neat addition that should make the issue much clearer to the user! Thanks for the impressively quick reply and fix. :)"}
{"project_id": "Alacritty", "bug_id": "153", "source_type": "github", "llm_input_text": "[Title]: Crash during search with too narrow window\n[Symptom]:\nIf the window's width is smaller than the search bar's label length and the search regex is changed, Alacritty will crash.\n"}
{"project_id": "Alacritty", "bug_id": "154", "source_type": "github", "llm_input_text": "[Title]: Wrapping cursor causes crash\n[Symptom]:\n1. Generate some output (e.g. run `ls -hal`)\r\n2. Input spaces until the cursor wraps to the next line\r\n3. Increase the window width until the cursor no longer wraps to the next line\r\n4. Reduce window width until cursor wraps again\r\n5. Alacritty crashes\r\n\r\nThis could be related to #3910.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.5.0-dev (18cf806a)\r\nLinux: X11, dwm (no compositor)\r\n\r\n### Logs\r\n\r\n`alacritty -vv` yields:\r\n```\nCreated log file at \"/tmp/Alacritty-103543.log\"\r\n[2020-07-13 11:42:21.389807902] [INFO] Welcome to Alacritty\r\n[2020-07-13 11:42:21.389857596] [INFO] Configuration loaded from \"/home/richard/.config/alacritty.yml\"\r\n[2020-07-13 11:42:21.397684584] [DEBUG] Estimated DPR: 1.25\r\n[2020-07-13 11:42:21.397697348] [DEBUG] Estimated Cell Size: 11 x 22\r\n... [Log Snipped] ...\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\nthread 'PTY reader' panicked at 'index out of bounds: the len is 0 but the index is 4', /home/richard/.cache/yay/alacritty-git/src/alacritty/alacritty_terminal/src/term/mod.rs:1902:34\n```\n\n[Context/Logs]:\n- Note that this doesn't seem to be necessary. Just inputting a bunch of spaces without moving it to the next line and then shrinking the window size seems sufficient.\n- This should be fixed in #3966. If you're interested in testing it, please let me know if it works.\n- Works fine now. Thanks for the quick fix."}
{"project_id": "Alacritty", "bug_id": "155", "source_type": "github", "llm_input_text": "[Title]: Reflow deleting history\n[Symptom]:\nWhen holding  space  until the cursor is on the next line of the prompt, then growing the shell width, content above the cursor will be deleted and the cursor is moved upwards.\r\n\r\nRepro:\r\n * run `bash` or `zsh` (only ones tested, others probably also affected)\r\n * `ls -lah` to write some content\r\n *  space  until on the next line\r\n * grow terminal width\r\n   -> The `ls` content is deleted\n"}
{"project_id": "Alacritty", "bug_id": "156", "source_type": "github", "llm_input_text": "[Title]: hintfull setting is not respected\n[Symptom]:\nI've configured hintfull in fontconfig:\r\n\r\n```\n \r\n \r\n \r\n  \r\n   \r\n... [Log Snipped] ...\n  \r\n \n```\r\n\r\nThis is recognized by alacritty. I've not disabled antialiasing for any font. Therefore alacritty uses the following code path:\r\n\r\n[URL]\r\n\r\nhintfull is not applied in this case.\r\n\r\nDisabling antialiasing via fontconfig makes the font ragged in alacritty and other programs and is therefore not an option.\r\n\r\nThis problem is specific to alacritty. Hinting works as expected in all other programs I'm using.\r\n\r\nThe following patch fixes the problem:\r\n\r\n```\ndiff --git a/font/src/ft/mod.rs b/font/src/ft/mod.rs\r\nindex d393b63..76b0dc7 100644\r\n--- a/font/src/ft/mod.rs\r\n+++ b/font/src/ft/mod.rs\r\n@@ -453,7 +453,7 @@ impl FreeTypeRasterizer {\r\n... [Log Snipped] ...\n         let rgba = pattern.rgba().next().unwrap_or(fc::Rgba::Unknown);\r\n         let embedded_bitmaps = pattern.embeddedbitmap().next().unwrap_or(true);\n```\r\n\r\nCurrent master with antialiasing enabled:\r\n[Image: 2020-03-30-094447_412x159_scrot]\r\nCurrent master with the patch applied and antialiasing enabled:\r\n[Image: 2020-03-30-094529_371x156_scrot]\r\nCurrent master with antialiasing disabled:\r\n[Image: 2020-03-30-094617_345x151_scrot]\n\n[Context/Logs]:\n- All 3 screenshots are different for me tbh. The following patch doesn't make any sense, since AA shouldn't be turned off. I feel like our FreeType loading flags are not optimal in some cases.\n- Yes that is the point. The second screenshot (Current master with the patch applied and antialiasing enabled) is the desired result. This is how fonts are rendered in all other programs and how I want them to be rendered.\r\n\r\n\r\nOf course I'm not saying that this patch should be applied. It merely shows that alacritty's decision to use the antialiasing configuration in fontconfig to make hinting decisions leads to inconsistent results.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @dnkl For some reason I was under the impression that alacritty didn't support bitmap fonts. Maybe this was a problem in the very early days of alacritty. In urxvt I'm using terminus.\n- @mahkoh I don't use Alacritty as my daily driver anymore, but yes, it does support bitmap fonts."}
{"project_id": "Alacritty", "bug_id": "157", "source_type": "github", "llm_input_text": "[Title]: Cursor reflow inserting whitespace\n[Symptom]:\nWhen swiftly resizing the window while output is currently being printed, some\r\nwhitespace is occasionally inserted incorrectly. It appears there is no data\r\ngetting deleted though.\r\n\r\n[Image: tmp]\n"}
{"project_id": "Alacritty", "bug_id": "158", "source_type": "github", "llm_input_text": "[Title]: Message bar text unreadable\n[Symptom]:\nMessage bar has harcoded yellow or red background but foreground color is from `colors.primary.background`. It is easy to see that it cannot work both with light or dark themes.\r\n\r\nI think either message bar\u2019s background color could be get from `colors.normal.{yellow,red}` or use also hardcoded (black) foreground color for messages.\r\n\r\n### System\r\n\r\nVersion: `alacritty 0.5.0`\n\n[Context/Logs]:\n- It seems like it got accidentally changed during some refactoring. It always was black on yellow/red.\n- I don't really like this change as well tbqh. I'd rather use foreground color in my case, since it's a bit more readable. If anything, I'd use foreground color over red/yellow colors from the config, but that's it.\r\n\r\n[Image: picture]\n- I think this should be solved by pulling the yellow/red color from the user's theme, to keep things more consistent."}
{"project_id": "Alacritty", "bug_id": "159", "source_type": "github", "llm_input_text": "[Title]: Autoscrolling should be triggered from selection expansion\n[Symptom]:\nIf you try to expand selection with rmb and move to top/bottom of the viewport it's not triggering auto scrolling, like it does with lmb.\n"}
{"project_id": "Alacritty", "bug_id": "160", "source_type": "github", "llm_input_text": "[Title]: Multiline URLs do not highlight correctly\n[Symptom]:\nIt seems like some commit in the past has broken URL highlighting for URLs that span over multiple lines.\r\n\r\n[Image: test]\r\n\r\nThe URL still seems to be opened correctly, the issue is just with highlighting.\n\n[Context/Logs]:\n- This regression was introduced in  ."}
{"project_id": "Alacritty", "bug_id": "161", "source_type": "github", "llm_input_text": "[Title]: Crash when try to select message bar.\n[Symptom]:\nTo repro: make alacritty render message bar, then start selecting, and move your mouse over it, alacritty should crash. \r\n\r\n```\nthread 'main' panicked at 'attempt to subtract with overflow', /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty_terminal/src/grid/mod.rs:359:23\r\nstack backtrace:\r\n   0: backtrace::backtrace::libunwind::trace\r\n             at /cargo/registry/src/github.com- /backtrace-0.3.46/src/backtrace/libunwind.rs:86\r\n   1: backtrace::backtrace::trace_unsynchronized\r\n... [Log Snipped] ...\n  36: _start\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\n\n[Context/Logs]:\n- It doesn't crash for me? That would also be a regression.\n- I'm also unable to make this crash, perhaps I'm not trying hard enough.\n- The problem's actually not with moving it above the message bar during selection, but below it. Leaving the window while the mouse is held down. I'm not entirely sure if it crashes once you're inside the padding or you've left the window, but that should make the repro pretty easy."}
{"project_id": "Alacritty", "bug_id": "162", "source_type": "github", "llm_input_text": "[Title]: Index out of bounds crash in copy-mode-vi in tmux\n[Symptom]:\nRun tmux in alacritty, go to copy-mode-vi, and keep pressing `k` key to move cursor up. It will crash.\r\n\r\n### System\r\n\r\nOS: macOS\r\nVersion: alacritty 0.5.0 (a6681e3)\r\nTmux: tmux 3.1b\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\n\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 42 but the index is  ', /Users/travis/build/alacritty/alacritty/alacritty_terminal/src/term/search.rs:423:15\r\nstack backtrace:\r\n   0:          -  ::fmt::he7a1622e2c1f4ea2\r\n   1:          - core::fmt::write::h45c5005fa193e31b\r\n   2:          - std::io::Write::write_fmt::ha9fd5f96fa3bf97e\r\n... [Log Snipped] ...\n  26:          - std::sys_common::backtrace::__rust_begin_short_backtrace::h280e92b10d6bfe7e\r\n  27:          - main\n```\n\n[Context/Logs]:\n- Could you give some more detailed instructions? I cannot reproduce this. If you compile Alacritty from source it should also come with a more useful backtrace, which would help a lot.\n- Could you also share alacritty and tmux configurations?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Here's the `cargo run` output\r\n\r\n```\n$ cargo run\r\nwarning: unused import: `std::env`\r\n --> alacritty_terminal/src/tty/unix.rs:4:5\r\n  |\r\n4 | use std::env;\r\n... [Log Snipped] ...\n                               at /rustc/ /src/libstd/rt.rs:67\r\n  50:          - main\n```\n- Should be fixed with [URL] thanks."}
{"project_id": "Alacritty", "bug_id": "163", "source_type": "github", "llm_input_text": "[Title]: Selection selects by 2 chars after catting file with unicode\n[Symptom]:\nIf you cat a file like [URL]\r\n\r\nscroll to a point where you catted it, and try to select something, selection will always select by 2 chars.\r\n\r\n[Image: record]\n\n[Context/Logs]:\n- The regression was introduced in 6832b86aa"}
{"project_id": "Alacritty", "bug_id": "164", "source_type": "github", "llm_input_text": "[Title]: Can't place window on secondary monitor since 0.5.0\n[Symptom]:\n### System\r\n\r\nOS: Windows\r\nVersion: alacritty 0.5.0 (a6681e3)\r\n\r\n### Problem\r\n\r\nUp until now I was using:\r\n\r\n```\nyaml\r\nwindow:\r\n  position:\r\n    x: -1920\r\n    y: 100\r\n... [Log Snipped] ...\n    y: 20\r\n  decorations: none\n```\r\n\r\nto place the window on a secondary monitor located to the left of the primary one. Since 0.5.0 the window is always placed as if the `x` value was `0`.\n\n[Context/Logs]:\n- Does this work with positive X coordinates? And are you capable of pinpointing which commit broke this?\n- Yes, positive values work as expected. No idea about the commit, don't follow the development that closely.\r\n\r\nTo paint the picture a bit better, this is my setup:\r\n\r\n[Image: image]\r\n\r\nNumber **2** is primary, so 0x0 coordinates are in its left top corner, and I'm trying to use `x: -1920` to place the window to the left edge of the monitor **1**.\n- ... [Middle Discussions Snipped for Brevity] ...\n- You're absolutely right. Though this means that it **did not** work in 0.4.3 and was not introduced recently.\r\n\r\nThanks for spotting that @Osspial.\n- This should be fixed in [URL] @darsain, please test this if you're able."}
{"project_id": "Alacritty", "bug_id": "165", "source_type": "github", "llm_input_text": "[Title]: Message bar text shouldn't be computed based on byte length\n[Symptom]:\nThere are some string length checks for the message bar which use the byte length (see [Link: here]). Generally I don't think unicode and fullwidth characters have been considered much for the message bar. However since it's possible for user config to show up inside the message bar, it's possible to have these unicode symbols present here.\n\n[Context/Logs]:\n- Hi, I would like to help with this issue. I'll post a pull request shortly!"}
{"project_id": "Alacritty", "bug_id": "166", "source_type": "github", "llm_input_text": "[Title]: Crash when font: x: #someLargeNegativeNumber\n[Symptom]:\nAlacritty crashes when I set x offset of the font a large negative number like -10.\r\n\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: 0.5.0\r\nLinux/BSD: Manjaro MATE\r\n\r\n### Logs\r\n\r\nCrashes: SIGABRT\r\n\r\nFont/Terminal size: Fullscreen, no decorations, Fira NERD Font:11, x:-10(yes), y:0\r\nKeyboard and bindings: `alacritty --print-events`\r\n\r\n\r\nCreated log file at \"/tmp/Alacritty-80782.log\"\r\n[2020-10-29 19:54:49.419330298] [INFO] Welcome to Alacritty\r\n[2020-10-29 19:54:49.419424188] [INFO] Configuration loaded from \"/home/ayb/.config/alacritty/alacritty.yml\"\r\n[2020-10-29 19:54:49.514412960] [INFO] Device pixel ratio: 1.001312255859375\r\n[2020-10-29 19:54:49.520361420] [INFO] Initializing glyph cache...\r\n[2020-10-29 19:54:49.576928628] [INFO] ... finished initializing glyph cache in 0.056511375s\r\n[2020-10-29 19:54:49.576955261] [INFO] Cell Size: 1 x 18\r\n[2020-10-29 19:54:49.576960889] [INFO] Padding: 0 x 0\r\n[2020-10-29 19:54:49.576968556] [INFO] Width: 800, Height: 600\r\n[2020-10-29 19:54:49.581499131] [INFO] PTY dimensions: Line(33) x Column(800)\r\n[2020-10-29 19:54:49.603094211] [INFO] Initialisation complete\r\n[2020-10-29 19:54:49.603125127] [INFO] glutin event: NewEvents(Init)\r\n[2020-10-29 19:54:49.609036592] [INFO] glutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(18))), event: Key(KeyboardInput { scancode: 28, state: Released, virtual_keycode: Some(Return), modifiers: (empty) }) }\r\n[2020-10-29 19:54:49.609229717] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: Resized(PhysicalSize { width: 800, height: 600 }) }\r\n[2020-10-29 19:54:49.609241208] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: Resized(PhysicalSize { width: 1920, height: 1028 }) }\r\n[2020-10-29 19:54:49.609315672] [INFO] glutin event: WindowEvent { window_id: WindowId(X(WindowId(58720258))), event: CursorEntered { device_id: DeviceId(X(DeviceId(2))) } }\r\n[2020-10-29 19:54:49.609342122] [INFO] glutin event: WindowEvent { window_id: WindowI\n...[Description Truncated]...\n"}
{"project_id": "Alacritty", "bug_id": "167", "source_type": "github", "llm_input_text": "[Title]: thread 'main' panicked at 'failed to read wayland events: Invalid argument (os error 22)'\n[Symptom]:\nAlacritty randomly crashes with this message after some time of normal work. It happens when I do not use it and it's even not on my current workspace. It crashes with whatever application was running in it.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.5.0\r\nLinux/BSD: Wayland, sway\r\n\r\n### Logs\r\n\r\nLast lines of log from `RUST_BACKTRACE=full WAYLAND_DEBUG=1 alacritty`:\r\n\r\n```\n[1473533.104] wl_keyboard@13.keymap(1, fd 1004, 51277)\r\n[1473546.039] wl_keyboard@52.keymap(1, fd 998, 51277)\r\n[1473546.098] wl_keyboard@52.repeat_info(25, 600)\r\n[1473546.114] wl_keyboard@52.keymap(1, fd 1008, 47298)\r\n[1473546.130] wl_keyboard@52.repeat_info(25, 600)\r\n... [Log Snipped] ...\n  13:       -  \r\n  14:                0x0 -  \n```\n\n[Context/Logs]:\n- For what it's worth, I have the same issue starting with Alacritty's update to 0.5.0. The stack trace is almost identical, but maybe there is an informative difference.\r\n\r\nOS: Arch Linux (2020-08-13)\r\nVersion: 0.5.0\r\nDE/WM: Sway (Wayland)\r\n\r\n```\nfile descriptor expected, object (13), message keymap(uhu)\r\nthread 'main' panicked at 'failed to read wayland events: Invalid argument (os error 22)', /build/rust/src/rustc-1.45.1-src/src/libstd/macros.rs:16:9\r\nstack backtrace:\r\n   0:       -  \r\n   1:       -  \r\n... [Log Snipped] ...\n  12:       - clone\r\n  13:                0x0 -  \n```\n- I'm not sure how are you determining stacktraces without debug symbols. Also, could someone include **full** log of `WAYLAND_DEBUG=1` and stacktrace with debug symbols.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @danieldg yeah, that's a good call, I guess in my case I have a situation where sway was leaking and alacritty is also leaking in a smithay-clipboard. So with recent patches to sway it no longer leaks, however alacritty still does via it.\n- The patch was send [URL] upstream and it'll be included in `0.5.1` release."}
{"project_id": "Alacritty", "bug_id": "168", "source_type": "github", "llm_input_text": "[Title]: Crash when releasing the left mouse button during a selection while the pointer is outside of the alacritty window (Wayland)\n[Symptom]:\nI've noticed an issue, under Wayland/[Link: Hikari], when I make a selection with the intention of copying it to the clipboard, and release the left mouse button while the mouse pointer is outside of the alacritty window, that once I return the mouse pointer back to the alacritty window, it results in a crash.\r\n\r\nI did not have this issue with 0.4.2\r\n\r\n### System\r\n\r\nOS: Debian Buster 10.5\r\nVersion: alacritty 0.5.0\r\nLinux/BSD: Hikari wayland compositor\r\n\r\n### Logs\r\n\r\n \r\n\r\n```\n$ WAYLAND_DEBUG=1 RUST_BACKTRACE=full cargo run\r\nwarning: use of deprecated item 'std::sync::ONCE_INIT': the `new` function is now preferred\r\n  --> alacritty/src/cli.rs:75:21\r\n   |\r\n75 |             .author(crate_authors!(\"\\n\"))\r\n... [Log Snipped] ...\n                               at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n  31:                0x0 -  \n```\n"}
{"project_id": "Alacritty", "bug_id": "169", "source_type": "github", "llm_input_text": "[Title]: Glyphs sometimes cut off (need to draw background in single pass)\n[Symptom]:\nI'm getting a visual glitch which causes the right half of certain characters to be missing. Restarting alacritty fixes it.\r\n\r\nIt happens when working with han characters, which are double width. I haven't been able to figure out the exact situation when it occurs. It seems to occur most often after displaying a lot of characters, so perhaps it's due to a cache getting filled up.\r\n\r\nIn this image, the first han character on the screen is okay, and the last three are truncated.\r\n\r\n[Image: half-characters]\n\n[Context/Logs]:\n- I believe this is due to us not drawing the entire background in a single pass. When the first glyph cache gets filled up, Alacritty starts batching draw calls by texture. This is supported by what you've described\r\n\r\n\r\nand\r\n\r\n\r\nI'm updating the title to reflect the required action here."}
{"project_id": "Alacritty", "bug_id": "170", "source_type": "github", "llm_input_text": "[Title]: Unable to launch alacritty with Fullscreen startup mode on Wayland\n[Symptom]:\nWhich operating system does the issue occur on?\r\nArch Linux\r\n\r\nIf on linux, are you using X11 or Wayland?\r\nWayland\r\n\r\nLogs?\r\n```\n[sjug@host ~]$ alacritty --version\r\nalacritty 0.3.3\r\n[sjug@host ~]$ alacritty\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', src/libcore/option.rs:347:21\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n... [Log Snipped] ...\n  12: __libc_start_main\r\n  13:  \n```\n\n[Context/Logs]:\n- Are you using an nvidia GPU? To get a useful backtrace it would probably be nice to compile Alacritty from source if possible.\n- I'm using an AMD Vega 64 GPU, do I need to set any debug flags on compile?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This seems to explain why the example works. Apparently when calling `current_monitor` *too early* it seems to return no outputs for you. But if we call it later it seems to work fine.\r\n\r\nIf you apply the following diff to glutin master, it might be possible to reproduce the crash:\r\n\r\n```\ndiff\r\ndiff --git a/glutin_examples/examples/window.rs b/glutin_examples/examples/window.rs\r\nindex f7da6c4..cf7beed 100644\r\n--- a/glutin_examples/examples/window.rs\r\n+++ b/glutin_examples/examples/window.rs\r\n... [Log Snipped] ...\n         println!(\"{:?}\", event);\r\n         *control_flow = ControlFlow::Wait;\n```\r\n\r\nYou can test after running `git apply  ` with the `cargo run --example window` command.\n- @chrisduerr Right on\r\n\r\n```\nRunning `target/debug/examples/window`\r\nPixel format of the window's GL context: PixelFormat { hardware_accelerated: true, color_bits: 24, alpha_bits: 8, depth_bits: 24, stencil_bits: 8, stereoscopy: false, double_buffer: true, multisampling: None, srgb: false }\r\nOpenGL version 4.5 (Core Profile) Mesa 19.1.4\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', src/libcore/option.rs:347:21\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n... [Log Snipped] ...\n  20: __libc_start_main\r\n  21: _start\n```"}
{"project_id": "Alacritty", "bug_id": "171", "source_type": "github", "llm_input_text": "[Title]: ToggleFullscreen doesn't work the first time and does not shrink resolution when going back to windowed mode\n[Symptom]:\n1. Using ToggleFullscreen to switch from windowed to fullscreen mode doesn't work at first time (another 2x ToggleFullscreens are needed)\r\n2. Toggling between windowed and fullscreen mode does not toggle the size of terminal window (it stays at fullscreen resolution)\r\n\r\n### Reproduction\r\nSet `ToggleFullscreen` to F11\r\nSet `decorations` to `none`\r\nRun alacritty\r\nUse F11 to toggle fullscreen\r\n\r\n### Effects\r\n1. When toggling into fullscreen for first time, resolution is set to 1920x1050\r\n2. When toggling back into windowed mode, resolution does not go back to the previous windowed resolution\r\n\r\n### Expected\r\n1. Toggling into fullscreen sets resolution to 1920x1080\r\n2. Toggling back into windowed mode sets resolution back to resolution before fullscreen mode\r\n\r\n### System\r\n\r\nOS: Fedora 32\r\nVersion: 0.4.3\r\nWayland, no custom compositor/WM, GNOME environment\r\n\r\n### Logs\r\n\r\n`alacritty -vv`\r\n```\n[2020-06-07 14:31:36.396907698] [INFO] Welcome to Alacritty\r\n[2020-06-07 14:31:36.397022444] [INFO] Configuration loaded from \"/home/soveu/.config/alacritty/alacritty.yml\"\r\n[2020-06-07 14:31:36.413616963] [DEBUG] Estimated DPR: 1\r\n[2020-06-07 14:31:36.413661116] [DEBUG] Estimated Cell Size: 8 x 17\r\n[2020-06-07 14:31:36.413669552] [DEBUG] Estimated Dimensions: None\r\n... [Log Snipped] ...\n[2020-06-07 14:31:48.502123673] [INFO] Width: 1920, Height: 1080\r\n[2020-06-07 14:31:51.753686932] [INFO] Goodbye\n```\n\n[Context/Logs]:\n- I've got a couple of questions wrt to this bug:\r\n - Does this happen only with decorations set to `none`?\r\n - What's your `startup_mode` in the config? Windowed?\r\n - Does this same issue happen when running XWayland?\n- * Sorry, decorations is set to `full` and this bug does not happen on `none`\r\n* Yes, `startup_mode` is `Windowed`\r\n* Both on GNOME on Xorg and XWayland this issue does not appear\r\n\r\nAlso one thing I have noticed\r\nOn Wayland the title bar is plain white rectangle (with minimize, maximize and close buttons), while on Xorg/XWayland the bar looks the same as in other programs\n- ... [Middle Discussions Snipped for Brevity] ...\n- That is most likely this winit bug: [URL]\n- Thank you so much for fixing this."}
{"project_id": "Alacritty", "bug_id": "172", "source_type": "github", "llm_input_text": "[Title]: Remapped Caps Lock to Escape does not work\n[Symptom]:\nI've run into issues trying to replicate one feature from my urxvt setup:\r\n\r\nI have remapped Caps Lock to Escape in my Sway configuration as follows:\r\n```\r\ninput type:keyboard {\r\n    repeat_delay 170\r\n    repeat_rate 50\r\n    xkb_layout se\r\n    xkb_variant nodeadkeys\r\n    xkb_options caps:escape\r\n}\r\n```\r\n\r\nIdeally, Alacritty would interpret me pressing Caps Lock as Escape, but that does not seem to be the case. See the following logs for when I press Escape and Caps Lock respectively:\r\n```\n[2020-07-19 18:02:49.128491248] [INFO] glutin event: WindowEvent { window_id: WindowId(Wayland(WindowId(94529468199840))), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), input: KeyboardInput { scancode: 1, state: Pressed, virtual_keycode: Some(Escape), modifiers: (empty) }, is_synthetic: false } }\r\n[2020-07-19 18:02:49.128552545] [INFO] glutin event: WindowEvent { window_id: WindowId(Wayland(WindowId(94529468199840))), event: ReceivedCharacter('\\u{1b}') }\r\n[2020-07-19 18:02:49.128583303] [INFO] glutin event: MainEventsCleared\r\n[2020-07-19 18:02:49.128605774] [INFO] glutin event: RedrawEventsCleared\r\n[2020-07-19 18:02:49.132201788] [INFO] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 19725, tv_nsec: 833281035 }, requested_resume: None })\r\n... [Log Snipped] ...\n[2020-07-19 18:02:49.199927517] [INFO] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 19725, tv_nsec: 901006707 }, requested_resume: None })\r\n[2020-07-19 18:02:49.199996190] [INFO] glutin event: WindowEvent { window_id: WindowId(Wayland(WindowId(94529468199840))), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), input: KeyboardInput { scancode: 1, state: Released, virtual_keycode: Some(Escape), modifiers: (empty) }, is_synthetic: false } }\n```\r\n\r\n```\n[2020-07-19 18:02:49.759940225] [INFO] glutin event: WindowEvent { window_id: WindowId(Wayland(WindowId(94529468199840))), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), input: KeyboardInput { scanc\n...[Description Truncated]...\n\n[Context/Logs]:\n- The patch upstream is available there, but not that folks care. [URL]\n- That's sad to hear. I tried the patch and it does indeed solve the this. Thanks for the patch, let's hope it gets merged soon.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Right, I understand. I'll use the scancode in the meantime then. Thanks!\n- i did not have a problem using sways `xkb_options caps:escape` or `xkb_options caps:swapescape`. not in alacritty version 0.4.3 nor the build on dd32447b (yay -S alacritty-git)"}
{"project_id": "Alacritty", "bug_id": "173", "source_type": "github", "llm_input_text": "[Title]: Limit the maximum length of the title\n[Symptom]:\nWhen trying to set a long window title either with ANSI escape codes or on the command line, `alacritty` closes with a panic.\r\n\r\n```shell\r\necho -ne \"\\033]0;$(cat /dev/urandom | base32 -w0 | head -c4084)\\007\"\r\n```\r\n\r\nNot that I want to use such long titles, but this happened to me because I configured zsh to set the window title to the currently running command.\r\n\r\nI found a similiar issue for `kitty`, which was [Link: solved] by limiting the title that will be send to the window manager to 2048 bytes.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: `alacritty 0.4.3`\r\nLinux/BSD: swaywm + Wayland\r\n\r\n### Logs\r\n\r\n```\nlog\r\n%  RUST_BACKTRACE=full alacritty -vv -t \"$(cat /dev/urandom | base32 -w0 | head -c4084)\"\r\nCreated log file at \"/tmp/Alacritty-5536.log\"\r\n[2020-07-22 16:54:34.181188941] [INFO] Welcome to Alacritty\r\n[2020-07-22 16:54:34.181230079] [INFO] Configuration loaded from \"/home/fabian/.config/alacritty/alacritty.yml\"\r\n... [Log Snipped] ...\n  16:       - _start\r\n  17:                0x0 -  \n```\n\n[Context/Logs]:\n- it's libwayland limitation, nothing alacritty can do about other than shrink the title for you.\n- I'm not closing this issue to track title shrinking. One more thing is flood with title events, that could also crash or deadlock, due to libwayland again.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We mean [URL] . But I don't really like to put it in winit on all platforms, I'd rather put it somewhere else, on a platforms where it breaks things, like Wayland, and so added it to either it directly or smithay-client-toolkit library, which it's using.\n- I've assigned myself, since the original issue is fixed upstream and title is limited right now on Wayland. if we want to do something like that in alacritty as well. Let me know, since I don't really see a reason for it."}
{"project_id": "Alacritty", "bug_id": "174", "source_type": "github", "llm_input_text": "[Title]: [wayland-client error] Attempted to dispatch unknown opcode 0 for wl_shm, aborting.\n[Symptom]:\nAlacritty does not launch in Gnome on a wayland session. \r\nWorks in Gnome X11 and in sway session on same machine. \r\n\r\nOS: Fedora 33 Pre-Release\r\nGnome: 3.37.90\r\nWayland: 1.18.0-2\r\nVersion: 0.5.0 and 0.6.0-dev commit  \r\n\r\n   logs \r\n \r\n```\n... [Log Snipped] ...\n \n```\r\n \r\n stack trace \r\n\r\nMessage: Process 21749 (alacritty) of user 1000 dumped core.\r\n                \r\n                Stack trace of thread 21749:\r\n                #0    raise (libc.so.6 +  )\r\n                #1    abort (libc.so.6 +  )\r\n                #2    _ZN14wayland_client3imp5proxy16proxy_dispatcher17h337ff8d0d37a0733E (alacritty +  )\r\n                #3    dispatch_event.isra.0 (libwayland-client.so.0 +  )\r\n                #4    wl_display_dispatch_queue_pending (libwayland-client.so.0 +  )\r\n                #5    wl_display_roundtrip_queue (libwayland-client.so.0 +  )\r\n                #6    _ZN14wayland_client11event_queue10EventQueue14sync_roundtrip17h99b292052c928c16E (alacritty +  )\r\n                #7    _ZN22smithay_client_toolkit3env11Environment20from_display_with_cb17h27cf1234e65d2ffeE (alacritty +  )\r\n                #8    _ZN5winit13platform_impl8platform7wayland10event_loop18EventLoop$LT$T$GT$3new17h09c7387da55e48c6E (alacritty +  )\r\n                #9    _ZN9alacritty4main17h5d705b9366cf9fb5E (alacritty +  )\r\n                #10   _ZN3std10sys_common9backtrace28__rust_begin_short_backtrace17h07251042be723e2aE (alacritty +  )\r\n                #11   main (alacritty +  )\r\n                #12   __libc_start_main (libc.so.6 +  )\r\n                #13   _start (alacritty +  )\r\n```\n\n[Context/Logs]:\n- Could you provide `WAYLAND_DEBUG=1 alacritty` log, also could you check whether the previous version of gnome works, or does it work on `weston`? I feel like it's a new gnome bug.\n- That seems like a gnome bug honestly, you may try weston here, but it'll work, guess.\r\n\r\nAlso, how have you tested the previous version of gnome? The same system, but with just old version of it, or you've rolled back the entire system? In general, I'd suggest trying to test weston.\r\n\r\nYou may also try to test [URL] but I'm not sure that it'll help.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Could you try it in environment with presented `WAYLAND_DISPLAY`? you can check for `echo $WAYLAND_DISPLAY` before running.\r\n\r\nThat assumes that you're running Wayland compositor.\n- Oh, wait, it seems like you've got disconnected, sorry, no need to retest."}
{"project_id": "Alacritty", "bug_id": "175", "source_type": "github", "llm_input_text": "[Title]: Zerowidth characters not rendering in last column\n[Symptom]:\nThe following code should show the problem:\r\n\r\n```sh\r\nfor _ in $(seq $(tput cols)); do\r\n    printf \"X\u0303\u0302\u0306\"\r\ndone\r\n```\n\n[Context/Logs]:\n- This is actually our terminal is writing zerowidth character to a wrong glyph when it reaches the end of the line, the zerowidth vector is empty for the last glyph in the row.\r\n\r\nI've logged it from the renderer and it gets the following information for the last 3 chars in the row.\r\n\r\n```\r\nchar: X, zerowidth: Some(['\\u{303}', '\\u{302}', '\\u{306}'])\r\nchar: X, zerowidth: Some(['\\u{303}', '\\u{302}', '\\u{306}', '\\u{303}', '\\u{302}', '\\u{306}'])\r\nchar: X, zerowidth: None\r\n\r\n```\r\n\r\nAs you can see one of them has 2 zero width chars.\r\n\r\nThe code I've used to dump is the following:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty/src/renderer/mod.rs b/alacritty/src/renderer/mod.rs\r\nindex b347556..f1a1734 100644\r\n--- a/alacritty/src/renderer/mod.rs\r\n+++ b/alacritty/src/renderer/mod.rs\r\n... [Log Snipped] ...\n         // Get font key for cell.\r\n         let font_key = match cell.flags & Flags::BOLD_ITALIC {\n```"}
{"project_id": "Alacritty", "bug_id": "176", "source_type": "github", "llm_input_text": "[Title]: When in fullscreen other windows can't be above alacritty (eg via alt-tab)\n[Symptom]:\n### System\r\n\r\nOS: Windows \r\nVersion: 5\n\n[Context/Logs]:\n- it's a fullscreen, so I don't expect anything to be above it, you likely want maximize, right?\n- Nope. Are you on a Windows system? All the Windows terminals/consoles let you either move or alt-tab other windows on top of of the full screen mode, Windows users kind of expect this and without, it's hurting productivity.\r\n\r\nTerminal/consoles in full-screen != video player in full-screen.\r\n\r\nalso a screen shot for you (this chrome window above full-screen WSL):\r\n[Image: image]\r\n\r\nbesides: everytime you alt tab a window on that full-scrreen display with alacritty, alacritty flickers (like it is broken or so)\n- ... [Middle Discussions Snipped for Brevity] ...\n- Are there any plans for supporting this? I'm in the same boat as @p5a0u9l and the other modes are buggy for me (opacity rendering, weird scaling bugs, etc) so it would be really helpful if the alt+tab functionality worked on Windows.\n- This looks like rust-windowing/winit#1540, which is fixed in upstream winit but not yet released."}
{"project_id": "Alacritty", "bug_id": "177", "source_type": "github", "llm_input_text": "[Title]: Opacity 1.0 does not make background completely opaque\n[Symptom]:\nWhich operating system does the issue occur on?\r\nWindows 10 build 17134.407 (1803).\r\n\r\nI tested on 0.2.4 and the latest master (f018043) with the opacity setting on 1.0 and once more with it commented out. If you look to the right side you see a picture of Goku (my windows desktop background).\r\n\r\n[Image: opacity-example]\n\n[Context/Logs]:\n- Has anyone been able to verify/reproduce this?\n- I believe I was able to reproduce this on Windows, however it has been a while since I've used Windows and I never use transparency. I'd definitely consider this confirmed though, I'm just not sure if it's an issue on ALL Windows systems (I ran it on Win 7).\n- ... [Middle Discussions Snipped for Brevity] ...\n- For those who are interested, I filed a PR to fix this in winit: [URL] Hopefully my patch is correct and lands/gets released soon so this problem can go away. :)\n- My PR for winit (rust-windowing/winit#1621) just merged, so the next release from them should resolve this issue."}
{"project_id": "Alacritty", "bug_id": "178", "source_type": "github", "llm_input_text": "[Title]: Config reload does not work if config is broken on launch\n[Symptom]:\nWhen using a broken configuration file to launch Alacritty, fixing the error will not remove the error from Alacritty. Instead live reload is completely disabled if the config file has any errors.\r\n\r\nIt's not necessary to live reload config files that are missing or have invalid permissions, but for configuration files which can be read without any problem the live config reload should always be enabled.\r\n\r\nI'm not certain this has behaved different previously, but I think this might be a regression introduced by CLI config overrides.\n"}
{"project_id": "Alacritty", "bug_id": "179", "source_type": "github", "llm_input_text": "[Title]: Underline cursor cannot be seen on underlined text.\n[Symptom]:\nHello, \r\nI am using emacs in the cli and it uses underline as the highlight (for linting and such). When I place the cursor on the underlined text the cursor is hidden by the underline.\r\n\r\nIs there a way to somehow render the cursor in a different color to enable it to be seen? I tried the different settings and checked the issues but I could not find the answer.\r\n\r\nMaybe the simplest solution would be to set the underline color to the cursor color with priority. Or just reorder rendering and firstly draw underline and override it with the cursor.\r\n\r\n## Step to reproduce\r\nI set the cursor color to pink to better visualize it.\r\n[Image: image]\r\n\r\nNow when I go into tmux `copy-mode` and move the cursor to the first letter of the word \"[u]nderline\"\r\n\r\n[Image: image]\r\n\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.4.1\r\nLinux: Wayland, sway\r\n\r\n### Logs\r\n\r\nFont/Terminal size: \r\n```\n[2020-03-16 21:13] [INFO] Welcome to Alacritty\r\n[2020-03-16 21:13] [INFO] Configuration loaded from \" /.config/alacritty/alacritty.yml\"\r\n[2020-03-16 21:13] [DEBUG] Estimated DPR: 1\r\n[2020-03-16 21:13] [DEBUG] Estimated Cell Size: 11 x 20\r\n[2020-03-16 21:13] [DEBUG] Estimated Dimensions: None\r\n... [Log Snipped] ...\n[2020-03-16 21:13] [DEBUG] New num_cols is 97 and num_lines is 47\r\n[2020-03-16 21:13] [INFO] Width: 1076, Height: 944\n```\n\n[Context/Logs]:\n- If your cursor's white, I don't think there's anything we should change about this imho.\r\n\r\nBut we should definitely render the cursor above underlines.\r\n\r\nIt might be worth noting that the position of underline/cursor depends on your font though. I'd assume most fonts do not have this problem and render the cursor below the underline.\n- I just noticed after updating to 0.4.2 that the issue is now less prevalent.\r\n\r\n[Image: image]\r\n\r\nBut I don't know if the fix was intended or a side-effect of some other change (just from looking at the commits). Since nobody pinged this PR.\r\n\r\nI still think its rendered under the text decorations (underline), and only the bottom part of the cursor is seen.\n- We changed roundings, etc. However it wasn't fixed and just a side effect that cursor is a bit bigger in some edge cases now, so you can see it here.\n- This might be fixed with [URL] Or at least it might make fixing this easier."}
{"project_id": "Alacritty", "bug_id": "180", "source_type": "github", "llm_input_text": "[Title]: Cursor vanishes when there're a lot of altases around\n[Symptom]:\nTo repro you can 'cat' symbols file from vtebench unicode benchmark, enter vi mode, and then trying to enable selection, the cursor will vanish on certain glyphs, but will wok on other glyphs.\r\n\r\n[Image: picture]\n"}
{"project_id": "Alacritty", "bug_id": "181", "source_type": "github", "llm_input_text": "[Title]: Windows: panic due to DirectWrite errors, seemingly related to attempting to render missing glyphs\n[Symptom]:\nFound this while working on a separate patch for crossfont and discovering that even vanilla master alacritty (with the default crossfont release and default Consolas font) will crash given the cargo output from attempting to build itself. This might be more suited to crossfont itself, though the fact that the error (which is supremely unhelpful on the Win32 side) is handled earlier in the log suggests that an alacritty fix might also be feasible. \r\n\r\n### System\r\n\r\nOS: Windows\r\nVersion: alacritty 0.7.0-dev (fdc10d2) \r\nLinux/BSD: X11/Wayland, DE or Compositor and WM\r\nDoesn't say anything about ConPTY or WinPTY in any output, unfortunately. \r\n\r\n### Logs\r\nLog output for `.\\target\\debug\\alacritty.exe -vv --print-events -e 'cargo build'`:\r\n```\n[2020-12-27 20:42:59.835461700] [INFO ] [alacritty] Welcome to Alacritty\r\n[2020-12-27 20:42:59.837467500] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"C:\\\\Users\\\\Ryan Farley\\\\AppData\\\\Roaming\\\\alacritty\\\\alacritty.yml\"\r\n[2020-12-27 20:42:59.841461800] [DEBUG] [alacritty] Estimated DPR: 1\r\n[2020-12-27 20:42:59.841461800] [DEBUG] [alacritty] Estimated window size: Some(PhysicalSize { width: 404, height: 292 })\r\n... [Log Snipped] ...\n[2020-12-27 20:43:00.750282000] [DEBUG] [alacritty_terminal] [Unhandled CSI] action='l', params=[25], intermediates=[]\r\n[2020-12-27 20:43:00.765281200] [DEBUG] [alacritty_terminal] [Unhandled CSI] action='l', params=[25], intermediates=[]\n```\r\nat which point it panics with \r\n```\n---------------------------\r\nAlacritty: Runtime Error\r\n---------------------------\r\npanicked at 'no 'missing' glyph: PlatformError(\"a DirectWrite rendering error occurred: 80070057\")', alacritty\\src\\renderer\\mod.rs:926:65\r\n\r\n... [Log Snipped] ...\nOK   \r\n---------------------------\n```\n\n[Context/Logs]:\n- Thanks for the report, this is actually an error inside of Alacritty and not crossfont. It seems like rendering `\\0` on Windows does not give you the missing glyph symbol, which is a bit troublesome.\n- @r-c-f could you check if [URL] fixes this for you?"}
{"project_id": "Alacritty", "bug_id": "182", "source_type": "github", "llm_input_text": "[Title]: [wayland-client error] A handler for wl_pointer panicked.\n[Symptom]:\nalacritty latest upstream revision crashes on launch\r\n\r\n### System\r\n\r\nOS: Linux 5.9.1-arch1-1 #1 SMP PREEMPT Sat, 17 Oct 2020 13:30:37 +0000 x86_64 GNU/Linux\r\nVersion: alacritty 0.6.0-dev (812c8bc)\r\nLinux/BSD: Wayland (sway)\r\nWindows: PTY dimensions: Line(35) x Column(88)\r\n### Logs\r\n\r\nCrashes:\r\n```bash\r\nthread 'main' panicked at 'index out of bounds: the len is 0 but the index is 0', /home/jxs/.cargo/registry/src/github.com- /smithay-client-toolkit-0.12.0/src/seat/pointer/theme.rs:183:22\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n[wayland-client error] A handler for wl_pointer panicked.\r\n```\r\n\r\nFont/Terminal size: \r\n```bash\r\n[2020-11-06 11:37:10.164431738] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[2020-11-06 11:37:10.165681356] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[2020-11-06 11:37:10.166923300] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Italic, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[2020-11-06 11:37:10.168004862] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold Italic, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n```\r\nKeyboard and bindings: \r\n``bash\n\n[Context/Logs]:\n- What cursor theme and size are you using?\n- Hi, yeah it is indeed the cursor theme! I am using [Link: bridge]\r\nthanks!"}
{"project_id": "Alacritty", "bug_id": "183", "source_type": "github", "llm_input_text": "[Title]: Ctrl-Shift-C crash the alacritty\n[Symptom]:\nHi,\r\nWhen I try to copy some text to the clipboard with Ctrl-Shift-C the terminal is suddenly exit.\r\nI'm using tmux with zsh if it's relevant.\r\n\r\n### System\r\n\r\nOS: Linux Ubuntu 18.10\r\nVersion: alacritty 0.6.0-dev\r\nLinux/BSD: X11\r\n\r\n### Logs\r\nI executed the command `RUST_BACKTRACE=1 alacritty --print-events -vv` in order to get logs about the terminated terminal\r\n```\nsh\r\nCreated log file at \"/tmp/Alacritty-9494.log\"\r\n[2020-09-01 12:42:12.043749174] [INFO] Welcome to Alacritty\r\n[2020-09-01 12:42:12.043876416] [INFO] Configuration loaded from \"/home/nravid/.config/alacritty/alacritty.yml\"\r\n[2020-09-01 12:42:12.095699167] [DEBUG] Estimated DPR: 1\r\n... [Log Snipped] ...\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\n[wayland-client error] A handler for wl_data_source panicked.\n```\n\n[Context/Logs]:\n- fwiw the crash is not on x11 but on Wayland, since yoiu're using Wayland, could you tell us more precisely what version are you using? And if it's not the latest master could you retry?\n- How can I check which version am I using?\n- ... [Middle Discussions Snipped for Brevity] ...\n- I tried to copy the sentence \"echo test\"\n- Idk, could you apply\r\n\r\n```\ndiff\r\ndiff --git a/Cargo.toml b/Cargo.toml\r\nindex 0198afd..97a0dd4 100644\r\n--- a/Cargo.toml\r\n+++ b/Cargo.toml\r\n... [Log Snipped] ...\n+[patch.crates-io]\r\n+smithay-clipboard = { git = \"[URL] branch = \"ignore-write\" }\n```\r\n\r\nit should prevent crash, but I'm not sure that it'll write anything to clipboard."}
{"project_id": "Alacritty", "bug_id": "184", "source_type": "github", "llm_input_text": "[Title]: Graphical artifacts with window transparency\n[Symptom]:\nWhich operating system does the issue occur on? MacOS (10.12.6 - Intel Iris Pro graphcis)\r\n\r\nSo when I have window transparency turned on (background_opacity: 0.85) I sometimes see graphical artifacts where text is rendered in the background of what was previously on my terminal. An image is attached. This occurs both within tmux and outside of tmux after detaching.\r\n\r\nI cant seem to figure out what makes it occur or why its displaying a particular text but its pretty reproducible for me.\r\n\r\n<img width=\"368\" alt=\"artifact\" src=\"[URL]\n\n[Context/Logs]:\n- Another interesting thing with this issue is that it shows different text in the background depending on whether Alacritty is in focus or not. Any clue where the weird background text could be coming from?\n- Same issue here, I recorded a screencast demoing the issue:\r\n\r\n[Image: alacritty-artifacts2]\r\n\r\n(As you might notice, it's easily repeatable when hiding Alacritty via Cmd+H)\r\n\r\n- Running:  \r\n- Best reproduced on light (e.g. white) background\r\n- `background_opacity: 0.85`\r\n- Font: `Go Mono`\r\n- `use_thin_strokes: false`\n- ... [Middle Discussions Snipped for Brevity] ...\n- It seems like it's something required for transparent windows on macOS, since I found other links to use the `setHasShadow_(NO)` for transparent windows as well as using `setOpaque(NO)`.\r\n\r\nI feel like managing such thing directly in alacritty based on config opacity value is a way to go.  winit already provides us with method to get `ns_window`, so it should be something simple as add a bunch of `cfg` and call proper method where we're updating/setting opacity. However it'll require someone with macOS to implement it(not me).\r\n\r\nif anyone is interested in doing it, let me know.\n- Is it? I don't think it makes a lot of sense to allow users to set transparency unless it actually works. So winit should set this if it isn't possible to make this work otherwise."}
{"project_id": "Alacritty", "bug_id": "185", "source_type": "github", "llm_input_text": "[Title]: PTY not read entirely with --hold CLI parameter\n[Symptom]:\n~~Running `alacritty --hold -e bash -c 'column -s, -t < weather.csv'` does not print anything. `alacritty --hold -e bash -c 'ping google.com'` works. The column command in a normal window works. But the column command doesn't seem to work when launched with `alacritty --hold -e bash -c'...`.~~\r\n\r\n~~It used to work but recently I found it seems to have broken. Now the window is just blank.~~\r\n\r\nWhen running a command at startup and passing the `--hold` option, the PTY is not always read entirely. Commands like `alacritty --hold -e echo test` often do not print the text written to the PTY. Adding a little `sleep` fixes the problem, so it's likely a problem with the PTY being dropped before it is read entirely since usually without the `--hold` option it's not important to read all of it.\n\n[Context/Logs]:\n- @Squirreljetpack You said it used to work, can you check where exactly this broke? The `--hold` command is fairly \"new\", so I'm a bit surprised it ever worked.\n- I can reproduce this issue on my Linux machine, but not on macOS. The issue is somewhat intermittent however.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I can reproduce this issue on `v0.4.0`, so it's broken likely from the addition of that feature. It could be worked around by adding delay before printing something like `alacritty --hold -e sh -c \"sleep 1; echo hello\"`. And I'd expect that issue to be from the addition (or close to it), since the parser and event loop communication haven't changed for quite a long time.\n- Yeah, I think there's just a bit of confusion present here. So I think this issue should just be used for a general `--hold` PTY issue. The whole regression thing should probably be ignored. The column command also seems unrelated."}
{"project_id": "Alacritty", "bug_id": "186", "source_type": "github", "llm_input_text": "[Title]: Add support for partially mapping untagged enums\n[Symptom]:\nUntagged enums like the cursor style at the moment do not support mapping only one of its fields. The following configuration produces an error:\r\n\r\n```yml\r\ncursor:\r\n  style:\r\n    shape: Block\r\n```\r\n\r\nSince we usually have defaults for every field and there is no noticable difference between this and other mappings, it should be possible to map this partially without getting any errors.\n"}
{"project_id": "Alacritty", "bug_id": "187", "source_type": "github", "llm_input_text": "[Title]: When using an input method, the first character following an arrow key is lost.\n[Symptom]:\nUsing input method immediately following an arrow key press causes the first character to be lost.\r\n\r\nHere is a video clip to demonstrate this problem: [URL] In this clip, I tried to type \"ceshi\" (which should result in \"\u6d4b\u8bd5\"), space (to commit the text), left key, \"ceshi\", space; the second \"ceshi\" only types in the second character \"\u8bd5\".\r\n\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: 0.6.0 (04cbf767) (also happens on 116faba7)\r\nLinux/BSD: X11 Plasma\r\n\r\n### Logs\r\nKeyboard and bindings: \r\n[Link: events.log]\n\n[Context/Logs]:\n- Can you reproduce this in a different shell like `bash`?\n- Could you share the output of `alacritty --print-events | grep \"ReceivedCharacter\"`.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Oooooh, right. Now I finally understand it. That's what is triggering the key binding and that's exactly what is causing the problem. Arrow keys are implemented using keybindings, but since they don't generate any `ReceivedCharacter` events the suppression for the binding is never released. So then when the IME text shows up the first character releases the key suppression.\r\n\r\nThanks a bunch for that, fix should be trivial now.\n- Very glad that we made progress! Thank you for maintaining this excellent project! Happy new year~"}
{"project_id": "Alacritty", "bug_id": "188", "source_type": "github", "llm_input_text": "[Title]: Alacritty 0.7.1 Crashes with segmentation fault (core dumped)\n[Symptom]:\nAlacritty 0.7.1 Crashes with segmentation fault (core dumped)\r\n\r\n### System\r\nOS: Linux (Arch Linux)\r\nArch Kernel Version: 5.10.5-arch1-1\r\nGPU: Radeon RX 5500 XT\r\nGraphics Driver: mesa/radeonsi (amdgpu)\r\nVersion: alacritty 0.7.1 (a852eb85)\r\nCompositor: Wayland\r\nWM: Sway\r\n\r\n### Logs\r\n\r\n```\n[2021-01-14 11:36:45.953454811] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-01-14 11:36:45.953517510] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/home/asahaf/.config/alacritty/alacritty.yml\"\r\n[2021-01-14 11:36:45.962519957] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[2021-01-14 11:36:45.965722088] [DEBUG] [alacritty] Estimated DPR: 2\r\n... [Log Snipped] ...\n[2021-01-14 11:36:46.141384209] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[1]    16694 segmentation fault (core dumped)  alacritty -vv\n```\r\n ### Core dump\r\n```\nsystemd-coredump[3549]: Process 2737 (alacritty) of user 1000 dumped core.\r\n                                             \r\n                                             Stack trace of thread 2772:\r\n                                             #0    wl_list_insert (libwayland-client.so +  )\r\n                                             #1    wl_display_read_events (libwayland-client.so +  )\r\n... [Log Snipped] ...\n\u2591\u2591 This usually indicates a programming error in the crashing program and\r\n\u2591\u2591 should be reported to its vendor as a bug.\n```\n\n[Context/Logs]:\n- There seem to be a lot of mentions of `radeonsi_dri` in your backtrace. Which means that this looks very much like a driver bug.\r\n\r\nDoes this crash at startup, or during usage? Also a core dump with debug symbols would probably be more useful.\n- @chrisduerr it crashes when I close it actual, not on startup, not during usage\n- ... [Middle Discussions Snipped for Brevity] ...\n- What exactly do you mean by that? It happens when you *start* Alacritty?\r\n\r\nThis bug should only occur when Alacritty is closed.\n- @chrisduerr yeah, the segmentation fault happens when I close it, if I have started alacritty under my described conditions"}
{"project_id": "Alacritty", "bug_id": "189", "source_type": "github", "llm_input_text": "[Title]: Fails at high resolution\n[Symptom]:\n### System\r\n\r\nOS: Linux (NixOS)\r\nVersion: 0.4.1\r\nLinux/BSD: X11, KDE/XMonad\r\n\r\nTrying to run at 5120x1440 results in alacritty hanging for a minute or so, and then opening a blank window (Sometimes black, sometimes yellow), that cant be interacted with at all. Dropping the resolution back to 3840x1080, alacritty works as expected.\r\n\r\n`alacritty -vvv`:\r\n\r\n```\nCreated log file at \"/tmp/Alacritty-9316.log\"\r\n[2020-01-16 05:16] [INFO] Welcome to Alacritty\r\n[2020-01-16 05:16] [INFO] Configuration loaded from \"/home/mat/.config/alacritty/alacritty.yml\"\r\n[2020-01-16 05:16] [DEBUG] Estimated DPR: 718.4166666666666\r\n[2020-01-16 05:16] [DEBUG] Estimated Cell Size: 5747 x 14357\r\n... [Log Snipped] ...\n[2020-01-16 05:18] [TRACE] [alacritty_terminal/src/term/mod.rs:1993] Setting keypad application mode\r\n[2020-01-16 05:18] [TRACE] [alacritty_terminal/src/term/mod.rs:1877] Setting mode: BracketedPaste\n```\r\n\r\nThe minute hang is at \"Initializing glyph cache\"\r\n\r\nDigging around a little more, starting with no configuration crashes outright, narrowing down why, it looks like ommiting `window/dimensions/[columns,lines]` results in:\r\n\r\n```\r\n[2020-01-16 05:26] [DEBUG] Estimated DPR: 718.4166666666666\r\n[2020-01-16 05:26] [DEBUG] Estimated Cell Size: 5747 x 14357\r\n[2020-01-16 05:26] [DEBUG] Estimated Dimensions: None\r\nAlacritty encountered an unrecoverable error:\r\n\r\nError creating GL context; Received multiple errors. Errors: [OsError(\"eglCreateWindowSurface failed\"), OsError(\"Couldn\\'t setup vsync: expected interval 1 but got 0\")]\r\n```\r\n\r\nMy settings are 80/24, which results in the hang and then blank window, adjusting them a little results in a hang, adjusting them too much results in the crash above.\n\n[Context/Logs]:\n- Could you try to run it with `WINIT_HIDPI_FACTOR=1 alacritty`?\n- What's your GPU + driver?\r\n\r\nThe thing is that our windowing library computing DPI automatically based off some display metrics, so I guess something is going wrong and it returns DPI of 718, which is a lot. I'm not sure whether the issue is directly in a library we're using or in your setup, but at least I think it(library) should reject odd values like the one we're seeing and just return `1`.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Could you provide me the output from this patch on our windowing library?\r\n\r\nI'm not familiar with how you run binaries on NixOS. But you should do the following.\r\n\r\n`git clone [URL] apply my patch to it with `git apply`, and then do `cargo run --example window`. Use your proprietary driver here, which is getting us a broken behavior.\r\n\r\n```\ndiff\r\ndiff --git a/examples/window.rs b/examples/window.rs\r\nindex c028a50f..01186150 100644\r\n--- a/examples/window.rs\r\n+++ b/examples/window.rs\r\n... [Log Snipped] ...\n         warn!(\"XRandR reported that the display's 0mm in size, which is certifiably insane\");\r\n         return 1.0;\n```\n- Winit should be getting the same values you get when running `xrandr` directly. So there shouldn't be a need to clone the repository and provide this information. Just posting the output of the `xrandr` command should be sufficient."}
{"project_id": "Alacritty", "bug_id": "190", "source_type": "github", "llm_input_text": "[Title]: Cannot jump between matches in reverse vi mode search\n[Symptom]:\nWhen trying to jump between matches in reverse search with vi mode, the vi\r\ncursor gets stuck on matches without being able to jump between them.\r\n\r\nThis regression has been introduced in  .\n\n[Context/Logs]:\n- Releasing a bugfix version to resolve this probably makes sense, but it's not severe enough to immediately push for another release. Giving it a week or so to catch possible other bugs seems reasonable."}
{"project_id": "Alacritty", "bug_id": "191", "source_type": "github", "llm_input_text": "[Title]: Search outside of vi-mode does not advance correctly\n[Symptom]:\nIt seems like the vi-less search isn't quite working properly.\r\n\r\nWhen a result exists multiple times, the first jump to the next element always requires two keypresses to advance the search. Then on linewrap the last match before the linewrap is skipped and instead it goes right back to the one at the top, which again needs two confirmations before advancing over it.\n"}
{"project_id": "Alacritty", "bug_id": "192", "source_type": "github", "llm_input_text": "[Title]: Searching for .+/.* will freeze Alacritty\n[Symptom]:\nThere seems to be an issue with searching for certain regexes like `.*`, which cause Alacritty to freeze.\r\n\r\nThis is likely a regression introduced in  .\n\n[Context/Logs]:\n- FWIW - I've been seeing a system wide freeze as of `a954e07` on 20.10. I've since switched to `xterm` and no longer seeing freezes.\n- @jrowlingson just to be clear.\r\n\r\n- Your comment doesn't sound related to this issue, or is it only still freezing when you search for a regex like `.*`?\r\n- System-wide meaning Alacritty is somehow freezing your whole DE/OS, that seems like another thing altogether?"}
{"project_id": "Alacritty", "bug_id": "193", "source_type": "github", "llm_input_text": "[Title]: Vi cursor should recover position after leaving search\n[Symptom]:\nWhen starting the search with the vi cursor in the last line, it will automatically get pushed up to keep it in place relative to the grid's content. However when the search is cancelled without picking any match, the cursor is not moved down again.\r\n\r\nIdeally my vi cursor position should not change at all when entering and leaving search, even if the cursor is at the far bottom. At the very least outside of the alt screen this should be possible and I believe it has worked this way in the past.\r\n\r\n**Edit:** I have confirmed that this worked in the past (tested with v0.5.0).\n"}
{"project_id": "Alacritty", "bug_id": "194", "source_type": "github", "llm_input_text": "[Title]: Missing Wayland Input Redraws\n[Symptom]:\nI just updated to `alacritty 0.8.0-dev (530de000)`, and while using Wayland I now experience an issue where Alacritty seems to be missing redraw requests. Input will be received correctly, but the display isn't updated until another input is received. This causes the display to lag behind my typing (for example) by exactly one keystroke.\n\n[Context/Logs]:\n- @chrisduerr this issue seems to be caused by the latest commit (530de000).\n- That doesn't surprise me, I expected there to be a few bugs with how big this change was. The terminal damage tracking code has been removed so all the damage tracking is now done through `Wakeup` events and externally in the UI. I'd assume that's probably the most likely candidate for this regression.\n- ... [Middle Discussions Snipped for Brevity] ...\n- [URL] should fix this, testing would be appreciated.\n- @chrisduerr, hi\r\nI tested this commit and it is MUCH better now, feels like the issue is fixed.\r\nthx again for awesome alacritty,\r\n-m"}
{"project_id": "Alacritty", "bug_id": "195", "source_type": "github", "llm_input_text": "[Title]: Cursor thickness is increased incorrectly on wide cells\n[Symptom]:\nWhen a cursor like the underline is below a wide cell, its thickness is increased (I'd assume doubled).\n\n[Context/Logs]:\n- Hi @chrisduerr I'd like to work on this issue, but how can I set wide cell on my pc?\n- I noticed this by typing `echo \"[URL] Just copy/pasting this and moving your cursor on top of one of the Chinese characters should be sufficient."}
{"project_id": "Alacritty", "bug_id": "196", "source_type": "github", "llm_input_text": "[Title]: Partially visible hints create invisible labels\n[Symptom]:\nWhen only the tail of a hint is visible due to the hint being broken over multiple lines, the hint mechanism is still triggered but no hint label is shown. As a result, the next input is swallowed or a hint is triggered unexpectedly.\r\n\r\nIdeally in this case the hints should either not be part of the hint selection, or the label should be rendered above the first visible part of the hint. Since a single cell is enough for rendering any hint label, allowing the interaction with a partially visible hint seems the most reasonable option.\n"}
{"project_id": "Alacritty", "bug_id": "197", "source_type": "github", "llm_input_text": "[Title]: Cursor position incorrect when scrolling into history\n[Symptom]:\nIt seems like a recent commit has introduced a regression where the cursor is displayed at the wrong position when scrolled into history.\r\n\r\nIf the history is filled, the screen is cleared and then the user scrolls up, the cursor no longer is at the prompt position.\n"}
{"project_id": "Alacritty", "bug_id": "198", "source_type": "github", "llm_input_text": "[Title]: Crash when coming back from full screen on i3\n[Symptom]:\nOpening alacritty, setting it to full screen and coming back gets it to crash with the following backtrace:\r\n\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 1016 but the index is  ', /data/code/alacritty/alacritty_terminal/src/term/search.rs:404:16\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /rustc/ /library/std/src/panicking.rs:493:5\r\n   1: core::panicking::panic_fmt\r\n... [Log Snipped] ...\n             at ./.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/function.rs:227:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\r\n\r\nFull logs:\r\n\r\n```\n[bastien@radium] ~  >>> alacritty -vv\r\nCreated log file at \"/tmp/Alacritty-13162.log\"\r\n[2021-04-15 11:44:22.139715594] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-04-15 11:44:22.139812206] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/home/bastien/.config/alacritty/alacritty.yml\"\r\n... [Log Snipped] ...\nthread 'main' panicked at 'index out of bounds: the len is 1016 but the index is  ', /data/code/alacritty/alacritty_terminal/src/term/search.rs:404:16\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\r\n\r\nNote that it doesn't happen with every geometry and seems to be linked to the size of the window on opening. Opening a terminal on an empty workspace, going fullscreen and then back doesn't trigger the crash. Opening a second one while splitting vertically and trying to reproduce the bug only works with the newly opened one, not the original one even though their current size is the same.\n\n[Context/Logs]:\n- Which version is this?\n- Looks to me like the mouse cursor position isn't correctly clamped to the viewport after a resize positioned it outside of the window.\n- I can even trigger the crash when opening alacritty if my mouse is below where it would open but only on the left side \r\n\r\nAlso\r\n[Image: clamps]\n- Ah, that's likely due to it resizing on start."}
{"project_id": "Alacritty", "bug_id": "199", "source_type": "github", "llm_input_text": "[Title]: No response to mouse event when on tmux\n[Symptom]:\nThere is no response from tmux to mouse event(click, drag or scroll) when on tmux with Alacritty. So nothing happens on tmux and can't do these operation with mouse such as switching a pane or a window, pane buffer scrolling and text selection even if enables tmux mouse config (`set -g mouse on`). On the other hand, they have been worked correctly that the scrolling or text selection with mouse which are implemented by Alacritty such as vi mode and mouse events with shift key pressing.\r\n\r\nThis problems isn't caused on tmux with xterm, urxvt or st.\r\n\r\nThis regression maybe have been caused on 9cb5562 because doesn't happen this problem on 1f46bb7 which is just before 9cb5562.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.8.0-dev (9cb5562)\r\nLinux/BSD: X11, Xmonad\r\n\r\ntmux: next-3.3 (9af78c8)\n"}
{"project_id": "Alacritty", "bug_id": "200", "source_type": "github", "llm_input_text": "[Title]: Resize does not keep viewport in place\n[Symptom]:\nIt seems like there was a regression with resizing the viewport, where content would be incorrectly moved around when a long line was resized while inside of the scrollback history.\r\n\r\n[URL]\r\n\r\nI have not yet bisected this, but I'm fairly sure this worked correctly previously without moving the viewport around.\n\n[Context/Logs]:\n- Are you sure this worked previously? Tried to bisect the issue earlier and couldn't find a working version all the way down to v0.5.0. Nevertheless, I came up with a solution and sent a PR."}
{"project_id": "Alacritty", "bug_id": "201", "source_type": "github", "llm_input_text": "[Title]: Vi cursor position incorrect when scrolled up\n[Symptom]:\nWhen entering vi mode without the terminal cursor visible, the vi cursor is created outside of the visible region. This leads the cursor being invisible and the viewport jumping around as soon as the cursor is moved.\n"}
{"project_id": "Alacritty", "bug_id": "202", "source_type": "github", "llm_input_text": "[Title]: Properly overwrite wide chars\n[Symptom]:\nCurrently when the cursor is positioned above a wide char, or a wide char spacer, the underlying cell is simply overwritten without considering the previous fullwidth character content.\r\n\r\nThis can be reproduced with the following two escapes:\r\n```\r\necho \" \ud83e\udd71\ud83e\udd71\\b\\b\\ba\"\r\n```\r\nThis writes a character in the spacer of the first full width character, leading to overlapping glyphs.\r\n\r\n```\r\necho \" \ud83e\udd71\ud83e\udd71\\b\\b\\b\\ba\"\r\n```\r\nThis overwrites the first full width character, which first seems to render correctly, however selecting the leftover wide char spacer will lead to the selection expanding across the other full width character incorrectly.\r\n\r\nI'm not sure if this is ever a problem in practice, since usually content is cleared before it is rewritten to ensure correct behavior, but Alacritty's current behavior is probably the farthest away from correct in any of the terminal emulators I've tested.\r\n\r\nThe proper solution would likely to overwrite the entire fullwidth glyph when a character is written in either of its two cells, but there is one terminal that behaves differently (Kitty), which just doesn't write the character to the grid at all if it is written to the location of the spacer.\r\n\r\nA proper resolution would likely not be very complicated, however certainly have some negative performance impact since I'd expect it to require two additional conditionals in the `input` function whenever any character is written. If there's a solution that can circumvent these in the hot path that would probably be ideal.\n"}
{"project_id": "Alacritty", "bug_id": "203", "source_type": "github", "llm_input_text": "[Title]: Mouse enabled hint only highlights first match\n[Symptom]:\nWith this simple hint:\r\n\r\n```yaml\r\nhints:\r\n  enabled:\r\n    - regex: foo\r\n      action: Select\r\n      mouse:\r\n        enabled: true\r\n```\r\n\r\nAnd the following text in the grid:\r\n\r\n```\r\nfoo foo\r\n```\r\n\r\nOnly  the first `foo` will be highlighted on mouseover.\r\n\r\nThis does not seem to be an issue for the keyboard hints.\n\n[Context/Logs]:\n- Huh, that's somewhat odd. This isn't an issue with the URL hint.\n- I stand corrected actually: It seems like multiple URLs do **not** work correctly in all cases. The only thing that works is multiple URLs found through sub-matching as a result of `post_processing`."}
{"project_id": "Alacritty", "bug_id": "204", "source_type": "github", "llm_input_text": "[Title]: Observed CSI query responses out of order\n[Symptom]:\nI like to query the background color via a `\\033]11;` query. To make it possible to detect if a terminal does not support it, I also append a second just general DA1 query, so that I can see in the response immediately if I only get a response for that, so I conclude that the terminal can't answer the first and don't have to wait until I reach some timeout.\r\n\r\nHowever, alacritty is answering these requests out of order: Below you see first the background color request followed by the `\\033[c` DA1 query.\r\nThe response to the DA1 query arrives first and a few moments later the response to the background color arrives.\r\n\r\n#### Actual result: responses out of sequence\r\n```\r\necho -e \"\\e]11;?\\e\\\\\\\\\\e[c\"\r\n^[[?6c^[]11;rgb:1d1d/1f1f/2121^[\\\r\n```\r\n\r\n#### Expected result: responses in sequence of query\r\nI'd expect that the result would be in sequence of the queries:\r\n```\r\n^[]11;rgb:1d1d/1f1f/2121^[\\^[[?6c\r\n```\r\n\r\nWith this out-of-sequence response, my plan to use it as a detection if a specialized query is supported of course won't work as intended.\r\n\r\nIs out-of-order response generally something that I have to expect from a terminal emulator or is this particular issue a bug in alacritty ?\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: `alacritty 0.8.0-dev (a954e07)`  _compiled from head_\r\nLinux/BSD: X11\r\n\r\n(Context: I intend to use the double-query in [URL] to be able to quickly detect terminals that don't have the background color query feature)\n\n[Context/Logs]:\n- I'm not sure if there's any hard guarantee on the order of responses, but this particular instance is due to the fact that Alacritty has to delegate the color response to the UI, while being able to write the terminal identification directly to the PTY.\r\n\r\nI'd say generally Alacritty should behave properly here, but I wouldn't make any guarantee for other terminals. Your \"solution\" is obviously not a proper way to query for capabilities.\n- Is there a recommended way how to be able to determine if a query is supported by a terminal without having to time-out on a request ?\n- Querying for terminal capabilities. Though chances are you'll still have to timeout for some stuff that doesn't have a capability."}
{"project_id": "Alacritty", "bug_id": "205", "source_type": "github", "llm_input_text": "[Title]: Primary selection not updated\n[Symptom]:\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.7.1 (a852eb85)\r\nLinux/BSD: Gnome Wayland (Manjaro)\r\n\r\n### Issue\r\n\r\nI'm using primary selection a lot. I've recently installed alacritty on my new system, and for some reason, I can select some text once, paste it using middle mouse click, and if I select another text in the terminal the primary selection buffer isn't updated, which means when I do another middle mouse click it pastes the first content I selected. I don't know if that's an issue with alacritty itself or my system but this doesn't happen in applications like Firefox and such. Also, weird behavior, if I change my current app (alt-tab, change of virtual desktop), I am able to select and paste again, only once, again.\n\n[Context/Logs]:\n- Are there any output logs?\n- Not that I can see. The `-vvv` logs doesn't show anything when I select, and with events shown there's so much output I can't distinguish what's going on. I'll try to filter that out.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've reported the issue upstream in [URL] If anyone has additional information, I'd recommend posting it there.\n- I can confirm that currently working workaround is to downgrade alacritty to 0.6.0\r\nTested on gnome 3.38.3 (arch linux, kernel 5.10.11)"}
{"project_id": "Alacritty", "bug_id": "206", "source_type": "github", "llm_input_text": "[Title]: Synchronize updates with terminal clients\n[Symptom]:\nWhenever I use ` ` or ` ` in vim while scrolling through a large file the screen flickers - it looks like for a moment the screen goes black and then the new content is redrawn, but it takes enough time to be noticeable and annoying. What's perhaps more interesting is that when I scroll half of the page via ` ` only the bottom part of the window flickers, while top one does not. This issue is observed both inside and outside of tmux. Other terminal emulators don't have this issue.\r\n\r\n* My `alacritty` is built with `cargo` from sources, repo at commit  .\r\n* OS: Arch linux with kernel `4.10.13-1-ARCH`\r\n* Graphics:\r\n  * drivers: `intel (unloaded: modesetting)`\r\n  * GLX Renderer: `Mesa DRI Intel Ivybridge Mobile`\r\n  * GLX Version: `3.0 Mesa 17.1.0`\r\n\r\nI have also reproduced it on a different machine, with nvidia's GPU, alas low in terms of performance:\r\n\r\n* The same repository commit ( )\r\n* OS: Arch linux kernel `4.11.2-1-ARCH`\r\n* Graphics:  \r\n  * driver: `nvidia`\r\n  * GLX Renderer: `Quadro 600/PCIe/SSE2`\r\n  * GLX Version: `4.5.0 NVIDIA 381.22`\r\n  * Direct Rendering: `Yes`\r\n\r\nDo you have any idea what could be a problem here? This issue prevents me from using `alacritty` on a daily basis, because said flashing constantly distracts me.\r\n\r\nThis problem is also mentioned in #555\n\n[Context/Logs]:\n- I've experienced this as well. This bug turns out to be an interesting problem! To see why we get the flickering and why it's difficult to resolve, consider how the read/parse/draw loop works:\r\n\r\n1. Some data arrives from the pty. The I/O thread reads this into a buffer.\r\n2. I/O thread locks the terminal state struct and runs that buffer through the parser.\r\n3. I/O thread registers that terminal is dirty and requests a draw.\r\n4. I/O thread releases lock on terminal state, blocks for another read.\r\n5. The render thread acquires lock, draws frame, and calls swap buffers.\r\n\r\nThe call at the end to swap buffers will block for ~17ms, and another frame cannot be drawn until it returns. The flickering happens because:\r\n\r\n1. Just enough data is read to cause the terminal to scroll\r\n2. frame is drawn\r\n3. more data arrives to fill in scrolled area, but it cannot be drawn until next frame\r\n\r\nTo me, this seems like a problem with terminal protocol. There's no framing, so we cannot know whether more data is coming or not.\r\n\r\nSince we can't fix terminal protocol, we're left with doing something heuristical like trying to read with a short timeout. The trick with such a heuristic is providing sufficient time for related data to arrive without ever causing a frame skip.\r\n\r\nIf you or anyone else has other ideas on how to address this, or even ideas about how such a heuristic could work, I'm all ears. I've been thinking about this problem for a while and haven't come up with a solution I love.\n- @fuine I'm using this plugin, and not experienced the flicker with it, might want to check it out: [URL] It's also pretty cool to use.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Please see #650 for the patch I promised. Although it seems to resolve the issue with `neovim`, it doesn't have any affect with vim 7.4 (haven't tested with 8) since write batching was apparently added in neovim.\r\n\r\nI'm looking for some specific feedback on the patch. It seems that, on my system, this patch causes some hiccups where a frame is skipped, or input isn't delivered in a timely fashion. Could have been my imagination too. Would love to hear how it works for others!\n- @jwilm no flicker in neovim, or neovim in tmux!!"}
{"project_id": "Alacritty", "bug_id": "207", "source_type": "github", "llm_input_text": "[Title]: Paste only pastes first byte with manual mouse selection\n[Symptom]:\n### System\r\n\r\nOS: Linux\r\nVersion: `alacritty --version` output: `alacritty 0.8.0-dev (cbcc129)`\r\nLinux/BSD: Fedora 33\r\n\r\n## Problem\r\n\r\nManually selecting text using the mouse and then attempting to paste it only pastes the first byte that is *selected*:\r\n\r\n- If you select \"forwards\" (left to right), the first byte on the left of the selection will be pasted on middle click.\r\n- If you select \"backwards (right to left), the *last* byte on the right (aka the first byte selected) will be pasted on middle click.\r\n\r\nNotes:\r\n\r\n- *Double-clicking* a word and pasting with the middle mouse button works correctly.\r\n- *Triple-clicking* an entire line and pasting with the middle mouse button works correctly.\r\n\r\nI've run `alacritty` as follows but see no errors:\r\n\r\n```bash\r\n$ script -fec 'alacritty -vvv --print-events -o debug.log_level=Trace'\r\n```\r\n\r\nThis feels similar to #4735. Random thought: I wonder if there is any way to automate copy/paste testing in a CI environment?\n\n[Context/Logs]:\n- Could you share a recording of this in action? Also are you on X11 or Wayland?\n- Hi @chrisduerr - sure: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @chrisduerr - confirmed - that top commit cbcc129 is the problem.\n- @jamesodhunt Could you verify that #4979 solves your issue?"}
{"project_id": "Alacritty", "bug_id": "208", "source_type": "github", "llm_input_text": "[Title]: Search mode focused_match using incorrect CellBackground/CellForeground colors\n[Symptom]:\n### System\r\n\r\nOS: Linux\r\nVersion: 0.7.2\r\nLinux/BSD: X11, i3wm\r\nTested with the default config.\r\n```\r\ncolors:\r\n  search:\r\n      matches:\r\n        foreground: '#000000'\r\n        background: '#ffffff'\r\n      focused_match:\r\n        foreground: CellBackground\r\n        background: CellForeground\r\n```\r\n[URL]\r\n\r\nWhile in search mode, the focused match is expected to use the CellBackground/CellForeground colors like when selecting text. However, alacritty seems to be using the whatever colors are set under `search.matches` as the cell background/foreground.\n\n[Context/Logs]:\n- Could you test this with the latest master? This issue seems oddly familiar.\n- I'm not sure exactly what the issue here is honestly.\r\n\r\nFirst you set the `search.matches` colors to black on white, then tell the `focused_match` to invert it, thus causing you to see white on black. Personally, I make use of this default behavior to get the style I'm happy with:\r\n\r\n[Image: screenshot-2021-04-29T12:51:04Z]\r\n\r\nThe reason this _does_ seem like an issue is that a focused match acts like a selection, so it may seem weird to have it styled differently.\r\n\r\nThat said, I'll add that the focused match's selection takes precedence over an actual selection for the purposes of the `CopySelection` action and `save_to_clipboard` option, perhaps making the existing behavior of distinct colors make some sense. Given how that works, I would expect the focused match colors to also take precedence over the selection's, which doesn't seem to be the case currently (see below image):\r\n\r\n[Image: screenshot-2021-04-29T13:01:10Z]\r\n\r\nAm I missing some other history around this issue? I vaguely recall some other discussions.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Did you read the rest of my post? The focused match actually overrides the primary selection, so it makes sense to me to highlight it above.\r\n\r\nEDIT: It also does have the benefit of making every focused match the same color and thus easier to spot regardless of it's original color. As I said above, I'm currently quite happy with this behavior.\n- It doesn't really make sense to have inversion semantics just for selection.\r\n\r\n\r\nIf that's your goal, just set both to the same color. Zero point in using CellRgb for that."}
{"project_id": "Alacritty", "bug_id": "209", "source_type": "github", "llm_input_text": "[Title]: 100% CPU and freeze on Windows as regression of c6ed855\n[Symptom]:\nAlacritty takes 100% CPU and freezes on Windows after c6ed855b.\r\n\r\nWhen line 227 hits for the first time, it returns `Ok(got: 488)`. But in later iterations, it always returns `Ok(got: 0)` and loops forever.\r\nIt seems that `Ok(got: 0)` is an edge case on Windows and needs special handling like previous code.\r\n\r\n[URL]\r\n\r\n### System\r\n\r\nOS: Windows\r\nVersion: c6ed855b\r\n\r\n### Logs\r\n\r\n```\nthread #15\r\n    frame #0:   alacritty.exe`struct mio::poll::ReadinessState core::convert::{{impl}}::into (self=21760) at mod.rs:539\r\n    frame #1:   alacritty.exe`static struct mio::poll::ReadinessState mio::poll::AtomicState::compare_and_swap(self= , current=(__0 = 21760), new=(__0 = 21760), order=AcqRel) at poll.rs:2568\r\n    frame #2:   alacritty.exe`static union core::result::Result , std::io::error::Error> mio::poll::RegistrationInner::set_readiness(self= , ready=(__0 = 0)) at poll.rs:1859\r\n    frame #3:   alacritty.exe`union core::result::Result , std::io::error::Error> mio::poll::SetReadiness::set_readiness(self= , ready=(__0 = 0)) at poll.rs:1816\r\n... [Log Snipped] ...\n    frame #17:   kernel32.dll`BaseThreadInitThunk + 20\r\n    frame #18:   ntdll.dll`RtlUserThreadStart + 33\n```\n\n[Context/Logs]:\n- Thanks a lot for pointing that out. I was curious for the longest time what the reason for the `Ok(0)` in the old code was and I couldn't find any way to reproduce it. Guess that answers the question.\r\n\r\nI've got a PR addressing some performance concerns lined up, I'll include the `Ok(0)` edgecase in that.\n- Just fyi, the same freeze happens on mac os as well"}
{"project_id": "Alacritty", "bug_id": "210", "source_type": "github", "llm_input_text": "[Title]: Out of bound panic with text zooming\n[Symptom]:\nCurrently reproducible with weechat (on a japanese channel). Zooming too much (with `ctrl`+`+`) leads to the following panic: `thread 'PTY reader' panicked at 'index out of bounds: the len is 98 but the index is 98', /home/ux/src/alacritty/alacritty_terminal/src/term/mod.rs:778:17`\r\n\r\nI'm unable to make a simple reproducible case so for now here is a video:\r\n\r\n[URL]\r\n\r\n### System\r\n\r\nOS: Linux/X11/i3wm\r\nVersion: `alacritty 0.8.0 (a1b13e68)` and `alacritty 0.9.0-dev (3c61e075)`\r\n\r\n### Logs\r\n\r\n`-vv`: [Link: Alacritty-314389.log]\n"}
{"project_id": "Alacritty", "bug_id": "211", "source_type": "github", "llm_input_text": "[Title]: Cause crash when display multi byte character in tmux and resize window or change font size.\n[Symptom]:\nI always use alacritty, thanks.\r\n\r\n### Repro step\r\n0. Run tmux session\r\n0. Execute `for i in $(seq 1000); do echo '\\u3042'; done` in shell\r\n0. Resize window or change font size many times\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.9.0-dev (3c61e07)\r\nX11, i3wm\r\ntmux 3.2\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\n```\nthread 'PTY reader' panicked at 'index out of bounds: the len is 85 but the index is 85', /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/term/mod.rs:778:17\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /build/rust/src/rustc-1.52.1-src/library/std/src/panicking.rs:493:5\r\n   1: core::panicking::panic_fmt\r\n... [Log Snipped] ...\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/ops/function.rs:227:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\r\nFont/Terminal size: `alacritty -vv`\r\n```\n[2021-05-24 20:31:54.415692674] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-05-24 20:31:54.415913866] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/home/arch/.config/alacritty/alacritty.yml\"\r\n[2021-05-24 20:31:54.431093138] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-05-24 20:31:54.433603753] [DEBUG] [alacritty] Estimated DPR: 1\r\n... [Log Snipped] ...\n[2021-05-24 20:31:54.579677710] [INFO ] [alacritty] Padding: 0 x 0\r\n[2021-05-24 20:31:54.579859767] [INFO ] [alacritty] Width: 941, Height: 1035\n```\n\n[Context/Logs]:\n- Could you go into a little more detail? I don't think I can reproduce the crash, at least it wasn't possible immediately. Are you just running the command once and then resizing or do you keep running it?"}
{"project_id": "Alacritty", "bug_id": "212", "source_type": "github", "llm_input_text": "[Title]: Debug mode crash in hint update\n[Symptom]:\nIt seems like searching in vi mode with history present causes Alacritty to crash in debug mode and freeze in release.\r\n\r\n \r\n Backtrace \r\n\r\n```\nthread 'main' panicked at 'assertion failed: requested.0  /library/std/src/panicking.rs:515:5\r\n   1: core::panicking::panic_fmt\r\n... [Log Snipped] ...\n             at /rustc/ /library/core/src/ops/function.rs:227:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\n"}
{"project_id": "Alacritty", "bug_id": "213", "source_type": "github", "llm_input_text": "[Title]: Crash when selecting text while selecting rapid text output\n[Symptom]:\nCrash while selecting moving text.\r\n\r\n### System\r\n\r\nOS: macOS (Big Sur 11.2.3)\r\nVersion: alacritty 0.8.0-rc3 (706f476)\r\n\r\n### Logs\r\n\r\n```\r\n$ ./Alacritty.app/Contents/MacOS/alacritty \r\nthread 'main' panicked at 'index out of bounds: the len is 10046 but the index is 10236', /Users/runner/work/alacritty/alacritty/alacritty_terminal/src/term/mod.rs:395:26\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\n### Video\r\n\r\nI ran `find . | perl -npe 's/\\w/x/g'` and selected text while it spewed. It very reliably crashes:\r\n\r\n[URL]\n\n[Context/Logs]:\n- Great find, thanks for testing the RC. I can reproduce, should probably be an easy fix."}
{"project_id": "Alacritty", "bug_id": "214", "source_type": "github", "llm_input_text": "[Title]: Crash while resizing with 'index out of bounds: the len is 55 but the index mod.rs:796:17'\n[Symptom]:\n### Description\r\n\r\nI am not entirely sure about the preconditions, but it seems to be related to the font.\r\n\r\n- Start `nvim` in the `alacrity` and open some file to edit\r\n- Keep resizing the window multiple times\r\n- crash\r\n\r\nBuilding alacrity with below diff seems fixing the issue:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty_terminal/src/term/mod.rs b/alacritty_terminal/src/term/mod.rs\r\nindex 8013f6c5..1808f3aa 100644\r\n--- a/alacritty_terminal/src/term/mod.rs\r\n+++ b/alacritty_terminal/src/term/mod.rs\r\n... [Log Snipped] ...\n             } else if point.column > 0 {\r\n                 self.grid[point.line][point.column - 1].clear_wide();\n```\r\n\r\n### System\r\n\r\nOS: Linux archlinux\r\nVersion: `alacritty --version` output\r\n```\r\n\u279c  glrnvim git:(cfg_dir) \"/home/cc/repo/alacritty/target/debug/alacritty\" --version\r\nalacritty 0.10.0-dev (259e7c7a)\r\n```\r\nThe same issue happens to `0.8.0` as well.\r\n\r\nLinux: X11, awesomeWM\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\nFont/Terminal size: `alacritty -vv`\r\n\r\n```\n\u279c  glrnvim git:(cfg_dir) \"/home/cc/repo/alacritty/target/debug/alacritty\" \"--config-file\" \"/tmp/.tmpagTGPw\" -vv                                                              \r\nCreated log file at \"/tmp/Alacritty-617710.log\"\r\n[2021-08-01 23:54:37.055820781] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-08-01 23:54:37.055886081] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/tmp/.tmpagTGPw\"\r\n... [Log Snipped] ...\n[2021-08-01 23:54:37.229797570] [DEBUG] [alacritty_terminal] [unhandled osc_dispatch]: [['1',],['~','/','r','e','p','o','/','g','l','r','n','v','i','m',],] at line 947\r\n[2021-08-01 23:54:37.242825907] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: DEFAULT | TARGET_NORMAL, render_mode: \"Normal\", lcd_filter: 1 }\n```\r\n\r\nconfig file:\r\n```\n\u279c  glrnvim git:(cfg_dir) cat /tmp/.tmpagTGPw\r\n---\r\nfont:\r\n  size: 12\r\n  normal:\r\n... [Log Snipped] ...\n    mods: Control\r\n    action: None%\n```\r\n\r\nKeyboard and\n...[Description Truncated]...\n\n[Context/Logs]:\n- Your patch is correct, do you want to send a PR?\n- Have submitted a patch myself to speed up the process. Thanks for the report."}
{"project_id": "Alacritty", "bug_id": "215", "source_type": "github", "llm_input_text": "[Title]: Panic in 'PTY reader' thread when printing large binary file to stdout\n[Symptom]:\nAfter following the `refterm` saga, I generated a large binary file via `dd` from `/dev/urandom` and tried `cat`ing it to stdout to see how fast Alacritty got through it. Instead Alacritty unexpectedly panicked in the pty reader thread.\r\n\r\nI tried narrowing down the file to the bare minimum, but couldn't shrink it past this point and still reproduce the issue.\r\n\r\nI'll try doing a build with debug symbols in the upcoming couple of days to get a more useful stack dump.\r\n\r\n### System\r\n\r\nOS: Linux (Arch Linux)\r\nVersion: alacritty 0.8.0 (a1b13e68)\r\nDE: Gnome 40.3\r\n\r\n### Logs\r\nThis zip contains the smallest file that still reproduces the issue in my install: [Link: bad.zip]\r\n```\n$ env RUST_BACKTRACE=full alacritty\r\n$ cat bad.bin\r\nthread 'PTY reader' panicked at 'index out of bounds: the len is 120 but the index is  ', /build/alacritty/src/alacritty/alacritty_terminal/src/term/mod.rs:780:17\r\nstack backtrace:\r\n   0:       -  \r\n... [Log Snipped] ...\n  19:       -  \r\n  20:                0x0 -  \n```\n\n[Context/Logs]:\n- Can you reproduce that with the latest master?\n- I couldn't reproduce this on master or v0.8.0 . Not saying the issue doesn't exist just that it isn't deterministic. Arch Linux, Sway.\r\nBtw on my machine Casey's termbench [URL] does not crash either in contrast to what he experienced.\n- ... [Middle Discussions Snipped for Brevity] ...\n- It seems like this is related to insert mode, where it is possible to move a wide character to the right of the row by inserting numbers in front of it.\r\n\r\nI believe the issue is that we do this by rotating the current line and then overwriting the existing text, however when the spacer of a wide character is rotated back to the beginning of the line and we then overwrite it, we end up trying to write to a cell that is now occupied by a wide char spacer in the first column.\r\n\r\nI should have a fix up in a bit.\n- This is a little script for reproducing the issue:\r\n\r\n```\nsh\r\n#!/bin/sh\r\n\r\n# Write our wide char + spacer.\r\nprintf \"\u6f22\"\r\n... [Log Snipped] ...\n# Write to the column that contains the wide char spacer.\r\nprintf \"_\"\n```"}
{"project_id": "Alacritty", "bug_id": "216", "source_type": "github", "llm_input_text": "[Title]: Scrolling in terminal scrolls Vi mode when display_offset != 0\n[Symptom]:\nTo reproduce output something to generate scrollback and then do the following\r\n```\r\nsleep 5; ls -lah # Could use something else instead of ls to generate output\r\nEnter Vi mode and move into scrollback buffer \r\n```\r\n\r\nWhen output from `ls` or `cat ` appear the cursor will scroll for the amount of lines output, however it should stay still.\n\n[Context/Logs]:\n- Hm, I feel like that might actually be a tough one. Since the vi cursor position is absolute from the bottom of the grid, we'd have to determine the display offset at scroll time which seems awfully inefficient.\n- I feel like it was working the way I described in the issue. At least in December.\n- Before the grid indexing rework the vi mode cursor was viewport based, rather than using a global index. So that's why it worked before without any further trouble. Of course changing back to a viewport based indexing would be an option for the vi mode cursor.\r\n\r\nThis issue also allows the vi mode cursor to leave the viewport, which is problematic."}
{"project_id": "Alacritty", "bug_id": "217", "source_type": "github", "llm_input_text": "[Title]: Hint post processing crash\n[Symptom]:\nAlacritty with the following config crashes when hovering over the `)` character.\r\n\r\n```\nyaml\r\nhints:\r\n  enabled:\r\n   - regex: \"[^/ ]\"\r\n     action: Paste\r\n... [Log Snipped] ...\n       enabled: true\r\n       mods: None\n```\r\n\r\nIt only crashes with post processing enabled and I get no relevant output with `-vvv` or `--print-events`.\r\n\r\n`alacritty 0.9.0 (fed349aa)` on Linux + Wayland (sway)\n"}
{"project_id": "Alacritty", "bug_id": "218", "source_type": "github", "llm_input_text": "[Title]: `alacritty msg create-window` copies shell\n[Symptom]:\n#5560 already tracks the option to specify a separate shell for Alacritty's `create-window` command, however by default the command of the first executable is still copied. This doesn't make much sense and can lead to confusing behavior.\r\n\r\nIdeally the parameters of the initial window should be largely ignored and replaced with the default. Then new parameters can be passed through the command when #5560 is resolved.\r\n\r\nRepro:\r\n```sh\r\n# => Should show two windows doing the same date loop\r\n```\n\n[Context/Logs]:\n- I agree, but I don't think that every parameter should be ignored, since if you change opacity or colors with `-o` option in that case you'd like to keep changed options for newly created windows."}
{"project_id": "Alacritty", "bug_id": "219", "source_type": "github", "llm_input_text": "[Title]: On aarch64, crash on suspend/sleep since glutin 0.27 bump\n[Symptom]:\nSince the bump to glutin 0.27, on my aarch64 laptop (Lenovo C630), when I suspend the desktop, or it goes to sleep, alacritty crashes.  Forcing the glutin dependency back down to 0.26, and the crash no longer occurs.  I'm assuming this is probably something that should go to the glutin repo, but I figured I would report it here.\r\n\r\n\r\n### System\r\n\r\nOS: Linux (aarch64)\r\nVersion: 0.10.0-dev (7913aa55)\r\nLinux/BSD: X11, Budgie WM\r\n\r\n### Logs\r\n\r\n```\r\nCrashes: \r\nthread 'main' panicked at 'called `Result::unwrap()` on an `err` value: Os { code: 4, kind: Interrupted, message: \"Interrupted system call\" }, /home/steev/cargo/registery/src/github.com- /winit-0.25.0/src/platform_impl/linux/x11/mod.rs:360:54\r\n\r\n```\n\n[Context/Logs]:\n- Upstream issue: [URL]\n- This is an issue for my AMD64 machine as well.  \r\n\r\nMore investigation into this issue shows the following PR: [URL]\n- Getting this same issue, causes a great impact to workflow\n- You shouldn't be hitting it, afaik, they bumped the required glutin version down to 0.26 in [URL] which should mean that alacritty should be using glutin 0.26, not 0.27 currently."}
{"project_id": "Alacritty", "bug_id": "220", "source_type": "github", "llm_input_text": "[Title]: macOS menu bar cannot be accessed in full screen mode\n[Symptom]:\nWhen Alacritty is running in full screen mode you cannot access the menu bar. To reproduce, simply click the green `+` button to enter full screen mode, and attempt to access the system menu bar. It does not appear.\r\n\r\nThis was also reported by @monokrome on #1252.\r\n\r\n### System\r\n\r\nOS: macOS\r\nVersion: alacritty 0.5.0 (a6681e3)\n\n[Context/Logs]:\n- This was already reported upstream in [URL] though I don't think we have an Alacritty issue for it yet.\n- Is there a way to exit full screen without the menu bar present?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Merged upstream in [URL]\n\nCan't wait till this lands in alacritty!\n- Same issue in fullscreen mode."}
{"project_id": "Alacritty", "bug_id": "221", "source_type": "github", "llm_input_text": "[Title]: Alacritty crashes when in vi mode and terminal clears\n[Symptom]:\nAlacritty panics when receiving any clear ansi escape code (tested with `^[[2J` and `^[c`) when in vi mode near the top of a long buffer with the following message:\r\n```\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', alacritty/src/display/content.rs:66:85\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\n### Steps to reproduce\r\n```shell\r\n$ yes # output a few thousand lines of output (seems to only happen with large scrollback buffer)\r\n$ sleep 5; clear # Delay clearing long enough to enter vi mode and jump to top of scrollback\r\n# ctrl+space, g\r\n# wait for clear to execute\r\n```\r\n\r\n### System\r\n\r\nOS: Linux 5.14.11-arch1-1\r\nVersion: alacritty 0.9.0 (fed349aa), alacritty 0.10.0-dev (f90dd12e)\r\nLinux/BSD: Swaywm\r\n\r\n### Logs\r\n\r\n```\n[2021-10-14 17:39:13.785011895] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-10-14 17:39:13.785059625] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/home/alex/.config/alacritty/alacritty.yml\"\r\n[2021-10-14 17:39:13.790835891] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Book, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:13.791264364] [DEBUG] [alacritty] Estimated DPR: 1\r\n... [Log Snipped] ...\nthread 'main' panicked at 'index out of bounds: the len is 28 but the index is 9999', /build/alacritty/src/alacritty/alacritty_terminal/src/term/search.rs:422:16\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\n"}
{"project_id": "Alacritty", "bug_id": "222", "source_type": "github", "llm_input_text": "[Title]: Can't render Chinese characters in bold face\n[Symptom]:\n### System\r\n\r\nOS: macOS Mojave\r\nVersion: 0.4.1\r\n\r\n### Logs\r\n\r\nIt's a bit weird when I type `alacritty` in terminal, outputing with `zsh: command not found: alacritty`\r\n\r\n### Font configuration\r\n```\nfont:\r\n  # Normal (roman) font face\r\n  normal:\r\n    family: Hack Nerd Font\r\n    style: Regular\r\n... [Log Snipped] ...\n    family: Hack Nerd Font\r\n    style: Bold Italic\n```\r\n\r\nIn alacritty:\r\n[Image: image]\r\nIn iTerm2:\r\n[Image: image]\r\nAs the pictures show above, the characters `\u4e2d\u6587` is not correctly rendered as bold face in alacritty compared to iTerm2.\n\n[Context/Logs]:\n- And I can comfirm this issus exists in Manjaro Linux with alacritty 0.4.0.\n- @hkunzhe Could you retest latest master on your Linux system?\n- ... [Middle Discussions Snipped for Brevity] ...\n- On mac you can also do `open -a Alacritty --args  `\n- What does your `$ locale` output, @hkunzhe?"}
{"project_id": "Alacritty", "bug_id": "223", "source_type": "github", "llm_input_text": "[Title]: Single cell with block selection empty in vi mode\n[Symptom]:\nIn vi mode, every selection should be treated as at least one cell wide. This is the case for every selection other than block selection.\r\n\r\nHowever, when trying to make a block selection that is only a single row wide, the selection is completely empty. This makes it impossible to copy a single column vertically from vi mode.\n\n[Context/Logs]:\n- This worked just fine in 0.7.2."}
{"project_id": "Alacritty", "bug_id": "224", "source_type": "github", "llm_input_text": "[Title]: Selection not copied after tab character\n[Symptom]:\nThis morning, I had to come to the disappointing realization that... ehh.. that somebody is watching me. And it is not God. They are already knocking at my door, so I can only say that censorship has reached terminals too. Be careful!\r\n\r\n```\nsh\r\n$ printf 'I do not\\rI\\t like '$TERM\r\nI do not like alacritty\r\n\r\n$ # Selecting previous text, for example to send it to a friend...\r\n... [Log Snipped] ...\n$ # Do     panic.\r\n$ rrn -rf /\n```\r\n\r\n---\r\n\r\nJokes aside, here is a minimal, reproducible example:\r\n```sh\r\n$ printf 'x X\\r[\\t]'\r\n[ X     ]\r\n\r\n$ # Selecting whole line using mouse/Vi-mode.\r\n$ xclip -o|od -c\r\n0000000   [  \\t   ]\r\n```\r\n\r\n### System\r\n\r\nOS: Arch Linux\r\nVersion: `alacritty 0.7.2 (5ac8060b)`\r\nLinux/BSD: X11\n"}
{"project_id": "Alacritty", "bug_id": "225", "source_type": "github", "llm_input_text": "[Title]: Vi mode search does not start at cursor\n[Symptom]:\nWhen a vi mode search is started while the bottommost line on the buffer is filled, a search will move the vi cursor causing the search to start one line below the original vi cursor position. This can cause the search to wrap around the buffer, confusing the user (me in this case).\n"}
{"project_id": "Alacritty", "bug_id": "226", "source_type": "github", "llm_input_text": "[Title]: Vi mode line indicator not hidden when hovering it with display offset\n[Symptom]:\nIf vi mode is active and the cursor is in the top-right position, the vi mode line indicator is only hidden when the display offset is 0. If the display offset is 1 or higher, the cursor is hidden by the line number indicator.\r\n\r\nThe indicator should be hidden regardless of the display offset when the vi mode cursor is below it.\n"}
{"project_id": "Alacritty", "bug_id": "227", "source_type": "github", "llm_input_text": "[Title]: Invalid unicode can cause Alacritty to freeze while scrolling up\n[Symptom]:\n### System\r\n\r\nOS: macOS\r\nVersion:   (git sha)\r\n\r\n### Logs\r\n\r\n[Image: image]\r\n\r\n   Here is the invalid text: \r\n```\r\n\r\n\u213c\u4f44\u5443\u5059\u2045\u7468\u6c6d\u0a3e\u683c\u6d74\u206c\u616c\u676e\u223d\u6e65\u3e22\u3c0a\u6568\u6461\u0a3e\u6d3c\u7465\u2061\u6863\u7261\u6573\u3d74\u7522\u6674\u382d\u3e22\u3c0a\u656d\u6174\u6820\u7474\u2d70\u7165\u6975\u3d76\u5822\u552d\u2d41\u6f43\u706d\u7461\u6269\u656c\u2022\u6f63\u746e\u6e65\u3d74\u4922\u3d45\u6465\u6567\u3e22\u3c0a\u656d\u6174\u6e20\u6d61\u3d65\u7622\u6569\u7077\u726f\u2274\u6320\u6e6f\u6574\u746e\u223d\u6977\u7464\u3d68\u6564\u6976\u6563\u772d\u6469\u6874\u202c\u6e69\u7469\u6169\u2d6c\u6373\u6c61\u3d65\u2e31\u2230\u0a3e\u6d3c\u7465\u2061\u616e\u656d\u223d\u6564\u6373\u6972\u7470\u6f69\u226e\u6320\u6e6f\u6574\u746e\u223d\u6f43\u7970\u6120\u646e\u7020\u7361\u6574\u6520\u6576\u7972\u6520\u6f6d\u696a\u7720\u7469\u2068\u9ff0\u8d91\u6e20\u206f\u7061\u7370\u7220\u7165\u6975\u6572\u2e64\uf020\u989f\uf08a\ua59f\uf0ba\u989f\uf089\u989f\uf08d\u989f\uf098\u989f\uf09a\u989f\uf09c\u989f\uf082\u989f\uf09d\u989f\uf0b3\u989f\uf081\u989f\uf0a3\u989f\uf0a2\u989f\uf0ad\u989f\uf0b0\ua59f\u22b0\u0a3e\u6d3c\u7465\u2061\u616e\u656d\u223d\u7561\u6874\u726f\u2022\u6f63\u746e\u6e65\u3d74\u2222\u0a3e\u3c0a\u656d\u6174\u7020\u6f72\u6570\u7472\u3d79\u6f22\u3a67\u6d69\u6761\u2265\u6320\u6e6f\u6574\u746e\u223d\u7361\u6573\u7374\u6f2f\u2f67\u6f6d\u6962\u656c\u702e\u676e\u3e22\u3c0a\u696c\u6b6e\u7220\u6c65\u223d\u6873\u726f\u6374\u7475\u6920\u6f63\u226e\u6820\u6572\u3d66\u6122\u7373\u7465\u2f73\u6369\u2f6f\u6166\u6976\u6f63\u2e6e\u6e70\u2267\u0a3e\u6c3c\u6e69\u206b\u6572\u3d6c\u6122\u7070\u656c\u742d\u756f\u6863\u692d\u6f63\u226e\u6820\u6572\u3d66\u6122\u7373\u7465\u2f73\u6369\u2f6f\u7061\u6c70\u2d65\u6f74\u6375\u2d68\u6369\u6e6f\u702e\u676e\u3e22\u3c0a\u696c\u6b6e\u6820\u6572\u3d66\u6822\u7474\u7370\u2f3a\u6d2f\u6369\u6f72\u622e\u6f6c\u2f67\u6d65\u6a6f\u2269\u7220\u6c65\u223d\u656d\u2022\u3e2f\u3c0a\u6974\u6c74\u3e65\u9ff0\u8b98\u4720\u7465\u4520\u6f6d\u696a\ue220\u9480\u4120\u6c6c\u4520\u6f6d\u696a\u2073\u6f74\ue220\u829c\ub8ef\u208f\u6f43\u7970\u6120\u646e\uf020\u939f\u208b\u6150\u7473\u2065\u9ff0\u8c91\u2f3c\u6974\u6c74\u3e65\u0a0a\u6c3c\u6e69\u206b\u7268\u6665\u223d\u2e2e\u2e2f\u2f2e\u6964\u7473\u632f\u7373\u622f\u6f6f\u7374\u7274\u7061\u632e\u7373\u2022\u6572\u3d6c\u7322\u7974\u656c\u6873\u6565\u2274\u0a3e\u3c0a\u696c\u6b6e\u6820\u6572\u3d66\u6522\u6f6d\u696a\u632e\u7373\u2022\u6572\u3d6c\u7322\u7974\u656c\u6873\u6565\u2274\u0a3e\u3c0a\u2d21\u5b2d\u6669\u6c20\u2074\u4549\u3920\u3e5d\u733c\u7263\u7069\u2074\u7273\u3d63\u2e22\u2f2e\u2e2e\u642f\u636f\u2d73\u7361\u6573\u7374\u6a2f\u2f73\u6569\u2d38\u6572\u7073\u6e6f\u6973\u6576\u662d\u6c69\u2d65\u6177\u6e72\u6e69\u2e67\u736a\u3e22\u2f3c\u6373\u6972\u7470\u3c3e\u5b21\u6e65\u6964\u5d66\u2d2d\u0a3e\u3c0a\u2d21\u5b2d\u6669\u6c20\u2074\u4549\u3920\u3e5d\u200a\u2020\u2020\u3c20\u6373\u6972\u7470\u7320\u6372\u223d\u7468\u7074\u3a73\u2f2f\u736f\u2e73\u616d\u6378\u6e64\u632e\u6d6f\u6c2f\u6269\u2f73\u7468\u6c6d\u7335\u6968\u2f76\u2e33\u2e37\u2f30\u7468\u6c6d\u7335\u6968\u2e76\u736a\u3e22\u2f3c\u6373\u6972\u7470\u0a3e\u2020\u2020\u2020\u733c\u7263\u7069\u2074\u7273\u3d63\u6822\u7474\u7370\u2f3a\u6f2f\u7373\u6d2e\u7861\u6463\u2e6e\u6f63\u2f6d\u696c\u7362\u722f\u7365\u6f70\u646e\u6a2e\u2f73\u2e31\u2e33\u2f30\u6572\u7073\u6e6f\u2e64\u696d\u2e6e\u736a\u3e22\u2f3c\u6373\u6972\u7470\u0a3e\u2020\u2020\u213c\u655b\u646e\u6669\u2d5d\u3e2d\u0a0a\u733c\u7263\u7069\u3e74\u200a\u2020\u2820\u7566\u636e\u6974\u6e6f\u6928\u732c\u6f2c\u672c\u722c\u612c\u6d2c\u7b29\u5b69\u4727\u6f6f\u6c67\u4165\u616e\u796c\u6974\u7363\u624f\u656a\u7463\u5d27\u723d\u693b\u725b\u3d5d\u5b69\u5d72\u7c7c\u7566\u636e\u6974\u6e6f\u2928\u0a7b\u2020\u2020\u6928\u725b\u2e5d\u3d71\u5b69\u5d72\u712e\u7c7c\u5d5b\u2e29\u7570\u6873\u6128\u6772\u6d75\u6e65\u7374\u7d29\u692c\u725b\u2e5d\u3d6c\u2a31\u656e\u2077\u6144\u6574\u2928\u613b\u733d\u632e\u6572\u7461\u4565\u656c\u656d\u746e\u6f28\u2c29\u200a\u2020\u6d20\u733d\u672e\u7465\u6c45\u6d65\u6e65\u7374\u7942\u6154\u4e67\u6d61\u2865\u296f\u305b\u3b5d\u2e61\u7361\u6e79\u3d63\u3b31\u2e61\u7273\u3d63\u3b67\u2e6d\u6170\u6572\u746e\u6f4e\u6564\u692e\u736e\u7265\u4274\u6665\u726f\u2865\u2c61\u296d\u200a\u2020\u7d20\u2829\u6977\u646e\u776f\u642c\u636f\u6d75\u6e65\u2c74\u7327\u7263\u7069\u2774\u272c\u2f2f\u7777\u2e77\u6f67\u676f\u656c\u612d\u616e\u796c\u6974\u7363\u632e\u6d6f\u612f\u616e\u796c\u6974\u7363\u6a2e\u2773\u272c\u6167\u2927\u0a3b\u200a\u2020\u6720\u2861\u6327\u6572\u7461\u2765\u202c\u5527\u2d41\u3432\u3837\u3834\u3130\u312d\u2c27\u2720\u7561\u6f74\u2927\u0a3b\u2020\u2020\u6167\u2728\u6573\u646e\u2c27\u2720\u6170\u6567\u6976\u7765\u2927\u0a3b\u200a\u3c20\u732f\u7263\u7069\u3e74\u0a0a\u733c\u7263\u7069\u2074\u7361\u6e79\u2063\u7273\u3d63\u6822\u7474\u7370\u2f3a\u732f\u6365\u7275\u7065\u6275\u6461\u2e73\u2e67\u6f64\u6275\u656c\u6c63\u6369\u2e6b\u656e\u2f74\u6174\u2f67\u736a\u672f\u7470\u6a2e\u2273\u3c3e\u732f\u7263\u7069\u3e74\u3c0a\u6373\u6972\u7470\u0a3e\u0909\u6977\u646e\u776f\u672e\u6f6f\u6c67\u7465\u6761\u3d20\u7720\u6e69\u6f64\u2e77\u6f67\u676f\u656c\u6174\u2067\u7c7c\u7b20\u6320\u646d\u203a\u5d5b\u7d20\u0a3b\u090a\u6309\u6e6f\u7473\u6120\u7364\u6f43\u666e\u6769\u3d20\u5b20\u090a\u0909\u207b\u090a\u0909\u7009\u616c\u6563\u656d\u746e\u6449\u203a\u7427\u706f\u2c27\u090a\u0909\u7309\u6f6c\u7374\u203a\u0a5b\u0909\u0909\u7b09\u090a\u0909\u0909\u6909\u3a64\u2720\u322f\u3831\u3237\u3938\u3438\u3631\u472f\u7465\u6d65\u6a6f\u5f69\u524d\u4345\u745f\u706f\u656c\u7466\u2c27\u090a\u0909\u0909\u6409\u6d69\u6e65\u6974\u6e6f\u203a\u335b\u3030\u202c\u3532\u5d30\u0a2c\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3631\u3635\u3733\u3933\u302d\u0a27\u0909\u0909\u7d09\u0a2c\u0909\u0909\u7b09\u090a\u0909\u0909\u6909\u3a64\u2720\u322f\u3831\u3237\u3938\u3438\u3631\u472f\u7465\u6d65\u6a6f\u5f69\u524d\u4345\u745f\u706f\u6563\u746e\u6572\u2c27\u090a\u0909\u0909\u6409\u6d69\u6e65\u6974\u6e6f\u203a\u335b\u3030\u202c\u3532\u5d30\u0a2c\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3631\u3137\u3030\u3739\u302d\u0a27\u0909\u0909\u7d09\u092c\u0909\u0909\u090a\u0909\u0909\u0a7b\u0909\u0909\u0909\u6469\u203a\u2f27\u3132\u3738\u3832\u3839\u3134\u2f36\u6547\u6574\u6f6d\u696a\u4d5f\u4552\u5f43\u6f74\u7270\u6769\u7468\u2c27\u090a\u0909\u0909\u6409\u6d69\u6e65\u6974\u6e6f\u203a\u335b\u3030\u202c\u3532\u5d30\u0a2c\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3631\u3138\u3039\u3334\u302d\u0a27\u0909\u0909\u7d09\u090a\u0909\u5d09\u090a\u0909\u2c7d\u090a\u0909\u0a7b\u0909\u0909\u6c70\u6361\u6d65\u6e65\u4974\u3a64\u2720\u6562\u6f66\u6572\u705f\u6c61\u5f65\u6d65\u6a6f\u7369\u2c27\u090a\u0909\u7309\u6f6c\u7374\u203a\u0a5b\u0909\u0909\u7b09\u090a\u0909\u0909\u6909\u3a64\u2720\u322f\u3831\u3237\u3938\u3438\u3631\u472f\u7465\u6d65\u6a6f\u5f69\u7543\u7473\u6d6f\u6d5f\u6469\u6c64\u5f65\u6170\u6567\u2c27\u090a\u0909\u0909\u6409\u6d69\u6e65\u6974\u6e6f\u203a\u395b\u3037\u202c\u3532\u5d30\u0a2c\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3931\u3035\u3139\u3232\u302d\u0a27\u0909\u0909\u7d09\u0a2c\u0909\u0909\u0a5d\u0909\u7d09\u0a2c\u0909\u7b09\u090a\u0909\u7009\u616c\u6563\u656d\u746e\u6449\u203a\u6227\u6665\u726f\u5f65\u6e61\u6d69\u6c61\u5f73\u6e61\u5f64\u616e\u7574\u6572\u655f\u6f6d\u696a\u2773\u0a2c\u0909\u0909\u6c73\u746f\u3a73\u5b20\u090a\u0909\u0909\u0a7b\u0909\u0909\u0909\u6469\u203a\u2f27\u3132\u3738\u3832\u3839\u3134\u2f36\u6547\u6574\u6f6d\u696a\u435f\u7375\u6f74\u5f6d\u6f6c\u6577\u6d72\u6469\u6c64\u655f\u6170\u6567\u2c27\u0a20\u0909\u0909\u0909\u6964\u656d\u746e\u6f69\u3a6e\u5b20\u3739\u2c30\u3220\u3035\u2c5d\u0a20\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3931\u3036\u3930\u3033\u302d\u0a27\u0909\u0909\u7d09\u0a2c\u0909\u0909\u0a5d\u0909\u7d09\u0a2c\u0909\u7b09\u090a\u0909\u7009\u616c\u6563\u656d\u746e\u6449\u203a\u6227\u6665\u726f\u5f65\u7274\u7661\u6c65\u615f\u646e\u705f\u616c\u6563\u5f73\u6d65\u6a6f\u7369\u2c27\u090a\u0909\u7309\u6f6c\u7374\u203a\u0a5b\u0909\u0909\u7b09\u090a\u0909\u0909\u6909\u3a64\u2720\u322f\u3831\u3237\u3938\u3438\u3631\u472f\u7465\u6d65\u6a6f\u5f69\u524c\u4345\u6c5f\u776f\u7265\u696d\u6464\u656c\u6170\u6567\u2c27\u0a20\u0909\u0909\u0909\u6964\u656d\u746e\u6f69\u3a6e\u5b20\u3333\u2c36\u3220\u3038\u2c5d\u0a20\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3731\u3938\u3439\u3831\u302d\u0a27\u0909\u0909\u7d09\u0a2c\u0909\u0909\u0a5d\u0909\u7d09\u0a2c\u0909\u7b09\u090a\u0909\u7009\u616c\u6563\u656d\u746e\u6449\u203a\u6227\u6665\u726f\u5f65\u6f6e\u5f6e\u6d65\u6a6f\u5f69\u7973\u626d\u6c6f\u2773\u0a2c\u0909\u0909\u6c73\u746f\u3a73\u5b20\u090a\u0909\u0909\u0a7b\u0909\u0909\u0909\u6469\u203a\u2f27\u3132\u3738\u3832\u3839\u3134\u2f36\u6547\u6574\u6f6d\u696a\u435f\u7375\u6f74\u5f6d\u6f62\u7474\u6d6f\u6170\u6567\u2c27\u0a20\u0909\u0909\u0909\u6964\u656d\u746e\u6f69\u3a6e\u5b20\u3739\u2c30\u3220\u3035\u2c5d\u0a20\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3931\u3033\u3234\u3532\u302d\u0a27\u0909\u0909\u7d09\u0a2c\u0909\u0909\u0a5d\u0909\u7d09\u0a2c\u0909\u7b09\u090a\u0909\u7009\u616c\u6563\u656d\u746e\u6449\u203a\u6227\u746f\u6f74\u276d\u0a2c\u0909\u0909\u6c73\u746f\u3a73\u5b20\u090a\u0909\u0909\u0a7b\u0909\u0909\u0909\u6469\u203a\u2f27\u3132\u3738\u3832\u3839\u3134\u2f36\u6547\u6574\u6f6d\u696a\u4c5f\u4552\u5f43\u6f62\u7474\u6d6f\u6170\u6567\u2c27\u0a20\u0909\u0909\u0909\u6964\u656d\u746e\u6f69\u3a6e\u5b20\u3333\u2c36\u3220\u3038\u2c5d\u0a20\u0909\u0909\u0909\u6f63\u746e\u6961\u656e\u4972\u3a64\u2720\u6964\u2d76\u7067\u2d74\u6461\u312d\u3336\u3736\u3931\u3437\u3738\u3330\u302d\u0a27\u0909\u0909\u7d09\u0a2c\u0909\u0909\u0a5d\u0909\u7d09\u090a\u5d09\u0a3b\u090a\u7609\u7261\u6720\u7465\u614d\u5778\u6469\u6874\u3d20\u6620\u6e75\u7463\u6f69\u206e\u2928\u7b20\u090a\u0909\u6572\u7574\u6e72\u6420\u636f\u6d75\u6e65\u2e74\u6f62\u7964\u632e\u696c\u6e65\u5774\u6469\u6874\u0a3b\u0909\u3b7d\u0a0a\u0909\u6176\u2072\u6e69\u7469\u6441\u2073\u203d\u7566\u636e\u6974\u6e6f\u2820\u2029\u0a7b\u0909\u6109\u7364\u6f43\u666e\u6769\u662e\u726f\u6145\u6863\u6628\u6e75\u7463\u6f69\u206e\u7028\u616c\u6563\u656d\u746e\u2029\u0a7b\u0909\u0909\u6176\u2072\u6c73\u746f\u6957\u7464\u2068\u203d\u3b30\u090a\u0909\u7009\u616c\u6563\u656d\u746e\u732e\u6f6c\u7374\u090a\u0909\u0909\u662e\u726f\u6145\u6863\u6628\u6e75\u7463\u6f69\u206e\u7328\u6f6c\u2974\u7b20\u090a\u0909\u0909\u6709\u6f6f\u6c67\u7465\u6761\u632e\u646d\u702e\u7375\u2868\u7566\u636e\u6974\u6e6f\u2820\u2029\u0a7b\u0909\u0909\u0909\u6709\u6f6f\u6c67\u7465\u6761\u642e\u6665\u6e69\u5365\u6f6c\u2874\u6c73\u746f\u692e\u2c64\u7320\u6f6c\u2e74\u6964\u656d\u746e\u6f69\u2c6e\u7320\u6f6c\u2e74\u6f63\u746e\u6961\u656e\u4972\u2964\u612e\u6464\u6553\u7672\u6369\u2865\u6f67\u676f\u656c\u6174\u2e67\u7570\u6162\u7364\u2928\u3b29\u090a\u0909\u0909\u0909\u6f67\u676f\u656c\u6174\u2e67\u7570\u6162\u7364\u2928\u652e\u616e\u6c62\u5365\u6e69\u6c67\u5265\u7165\u6575\u7473\u2928\u0a3b\u0909\u0909\u0909\u6709\u6f6f\u6c67\u7465\u6761\u652e\u616e\u6c62\u5365\u7265\u6976\u6563\u2873\u3b29\u090a\u0909\u0909\u7d09\u3b29\u090a\u0909\n...[Description Truncated]...\n\n[Context/Logs]:\n- This seems to be caused by an endless loop in the `regex_search` function called from `highlighted_at`. I'll take a closer look tomorrow but the search start/end might be located in a position we skip over?\r\n\r\nIn my tests this only seemed to happen when scrolled into history, though not sure that's true yet.\n- If by history you mean above the bottom of the viewport then yes. But not far up, like maybe 30 lines\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Jarred-Sumner If you can still reproduce this in the latest version of Alacritty master, please open an issue with concrete reproduction steps.\n- This isn't entirely helpful, but I think the text after \"Hindi\" is the cause. Will try to narrow it down further\r\n\r\n<img width=\"577\" alt=\"image\" src=\"[URL]"}
{"project_id": "Alacritty", "bug_id": "228", "source_type": "github", "llm_input_text": "[Title]: Foreground working directory resolution fails frequently\n[Symptom]:\nThis is a follow-up to #5659.\r\n\r\nIt seems that the code responsible for determining the foreground process' working directory is frequently failing, causing the fallback to kick in with the empty working directory. In my initial tests it seemed like it always works in the first try, but any further attempts will fail.\r\n\r\nSince the fault appears to be with the `tcgetpgrp`/`master_fd` (https://github.com/alacritty/alacritty/blob/master/alacritty/src/daemon.rs#L61), this affects macOS, BSD and Linux.\n"}
{"project_id": "Alacritty", "bug_id": "229", "source_type": "github", "llm_input_text": "[Title]: Alacritty fails to start in 10bit color mode\n[Symptom]:\nI followed the following guide to enable 10bit color on my machine. 10bit color appears to working for other programs, but alacritty fails to start.\r\n\r\n ```\nCreating a /etc/X11/xorg.conf.d/30-screensetup.conf with the following\r\ncontent will give you 10-bit color:\r\n\r\nSection \"Screen\"\r\n  Identifier    \"Default Screen\"\r\n... [Log Snipped] ...\n\r\nAnd that's it. DefaultDepth 30 is the crucial line. The reason 30 enables 10-bit color is that R, G, B = 3 colors * 10 bits = 30.\n```\r\n(Guide from [URL]\r\n\r\n### System\r\n\r\nOS: Arch Linux\r\nVersion: alacritty 0.7.1 (a852eb85)\r\nLinux/BSD: X11 & i3\r\nNvidia 3090 with driver 460.32.03\n\n[Context/Logs]:\n- How does it fail to start? What error do you get?\n- ### Error\r\n[2021-01-14 05:05:26.680909269] [ERROR] [alacritty] Alacritty encountered an unrecoverable error:\r\n                                                    \r\n                                                    \tError creating GL context; Received multiple errors. Errors: `[NoAvailablePixelFormat, NoAvailablePixelFormat]`\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think I'll have to just migrate to kitty, This is really sad\n- I was able to \"\"\"fix\"\"\" it by using this fork:\r\n[URL]\r\nand editing the diffs in as seen in #5495.\r\n( [URL] )\r\nAnd I have no idea why nothing has been merged into the main branch yet."}
{"project_id": "Alacritty", "bug_id": "230", "source_type": "github", "llm_input_text": "[Title]: font.glyph_offset should live reload\n[Symptom]:\n\n"}
{"project_id": "Alacritty", "bug_id": "231", "source_type": "github", "llm_input_text": "[Title]: Crash and assert triggered during search.\n[Symptom]:\nWhile triggering Vi mode or sometimes starting search I've got the following crashes.\r\n```\ngdb\r\nthread 'main' panicked at 'assertion failed: positive   in __GI_abort () at abort.c:79\r\n2    in panic_abort::__rust_start_panic::abort ()\r\n3    in __rust_start_panic ()\r\n... [Log Snipped] ...\n21 alacritty::alacritty () at alacritty/src/main.rs:201\r\n22 alacritty::main () at alacritty/src/main.rs:81\n```\n\n[Context/Logs]:\n- It's pretty fast to trigger them if you `cat /dev/urandom` -> `trigger search or Vi mode`."}
{"project_id": "Alacritty", "bug_id": "232", "source_type": "github", "llm_input_text": "[Title]: SpawnNewInstance should not pass --command (-e) argument\n[Symptom]:\nWhen alacritty is run with --command (-e) option, SpawnNewInstance is also passed this argument.\r\n\r\nMy specific use case was running \"alacritty -e ranger\", and I expected SpawnNewInstance to give me a terminal for the directory I am currently parsing. Instead, it launched a new alacritty instance with ranger running.\r\nWhen I use ranger without invoking alacritty's --command option, it works as expected.\r\n\r\nI don't know if there's some other use case benefiting from the current behavior.\r\n\r\nI propose that it should be ignored like the --working-directory argument already is, as in the below code \r\n\r\n[URL]\n\n[Context/Logs]:\n- You're absolutely correct. In fact if you do `alacritty msg create-window`, it should already behave as you would expect. Apparently it's just the `SpawnNewInstance` action that doesn't behave as intended. So you can use the command as a work around until this is fixed.\n- I just looked it up whilst switching from termite, nice to see someone opened the issue just 2 days ago !\n- Is there any alternative command to spawn a new instance through a key binding that actually inherits the --command param?\r\nI understand why it's unexpected behaviour for SpawnNewInstance but I grew to like it and made heavy use of it."}
{"project_id": "Alacritty", "bug_id": "233", "source_type": "github", "llm_input_text": "[Title]: Wayland: alacritty ignores activated configure option, and instead relies on keyboard focus\n[Symptom]:\nAlacritty seems to decide if it should draw the focused cursor or the unfocused one, depending on if it has keyboard focus, instead of relying on the `activated` configure option.\r\n\r\nAdditionally it starts assuming it *has* keyboard focus, making it impossible to open an alacritty window, without focus (at least visually).\r\n\r\nIt'd be nice if it would support the configure option, or at least start assuming it has no focus.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.4.0\r\nLinux: Wayland (kiwmi)\n\n[Context/Logs]:\n- What exactly is the `activated` configure option?\n- @chrisduerr It's the compositors way of telling the window if it should draw itself in a focused, or an unfocused state (https://github.com/wayland-project/wayland-protocols/blob/ /stable/xdg-shell/xdg-shell.xml#L752)\r\n\r\nActually seems like the \"assuming focus\" part was fixed in bd6e5a9, but later broken again.\n- ... [Middle Discussions Snipped for Brevity] ...\n- You've said yourself that your compositor doesn't send focus at startup whet `activated` is disabled, so this would just break it for the majority of users. And yeah, as @kchibisov has correctly pointed out, it will also break Windows (though that could be fixed with a `cfg` annotation).\n- See [URL] for upstream tracking."}
{"project_id": "Alacritty", "bug_id": "234", "source_type": "github", "llm_input_text": "[Title]: Mouse text selection issue with multiple windows\n[Symptom]:\n## Overview\r\n\r\nWhen at least 2 windows are open, text selection with mouse does not work properly.\r\n\r\n### Steps to Reproduce\r\n\r\n1. Open Alacritty\r\n2. Put some text on the screen\r\n3. Open a new window via `CreateNewWindow` (I have it bound to Command-N)\r\n4. Put some text in the new window\r\n5. Select any section of text with the mouse\r\n\r\n### Expected Behavior\r\n\r\nThe text is selected by the mouse at the location of the cursor\r\n\r\n### Actual Behavior\r\n\r\nThe text 2 lines above the location of the cursor is selected\r\n\r\n### Workaround\r\n\r\nDon't use multiple windows\r\n\r\n### Demo\r\n\r\n[Image: alacritty-multi--window-mouse-issue]\r\n\r\n### System\r\n\r\nOS: macOS Big Sur 11.6.3 (20G415)\r\nVersion: alacritty 0.10.0 (8a26dee)\r\n\r\n### Logs\r\n\r\nCrashes: n/a\r\nFont/Terminal size: [Link: `alacritty -vv`]\r\nKeyboard and bindings: [Link: `alacritty --print-events`]\n\n[Context/Logs]:\n- I'd assume it works when it's not tabbed? I mean when you have multiple windows, but you don't tab them.\n- Correct\u2014multiple non-tabbed windows do not have the issue.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Fixed upstream: [URL]\n- Thanks for letting us know. Should be in Alacritty with the next winit version then."}
{"project_id": "Alacritty", "bug_id": "235", "source_type": "github", "llm_input_text": "[Title]: Reopening Terminal\n[Symptom]:\nWhen you exit the terminal in after running commands a dot it still under it. If you want to reopen the terminal you first have to quit the program, then click again to open up a terminal.\r\n\r\n### System\r\n\r\nOS: macOS\r\nVersion: alacritty 0.10.1 (2844606)\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\nFont/Terminal size: `alacritty -vv`\r\nKeyboard and bindings: `alacritty --print-events`\n\n[Context/Logs]:\n- A dot is still under it?\n- Sorry, should have been more descriptive.\r\n<img width=\"105\" alt=\"Screen Shot 2022-03-26 at 10 31 01 AM\" src=\"[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can confirm I experience the same behavior:\r\n1. Open alacritty\r\n2. Full screen alacritty\r\n3. Terminate session any number of ways, ^D, exit, logout, etc.\r\n4. alacritty continues running in the background, cannot start new session until it's manually killed\r\n\r\nmacOS 12.2.1\r\nAlacritty 0.10.1\r\nzsh 5.8\r\nbash 5.1.16\r\ntmux 3.2a \r\n\r\n** happens with and without tmux **\n- I can also confirm - alacritty 10.1:\r\n\r\n    1. open alacritty (defaults to fullscreen per config)\r\n    2. Exit using various methods\r\n    3. alacritty stays running, but I cannot recover the window - right-click -> terminate is the only way to get rid of it"}
{"project_id": "Alacritty", "bug_id": "236", "source_type": "github", "llm_input_text": "[Title]: CreateNewWindow on macos sometimes doesn't start shell correctly\n[Symptom]:\nFor bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\nI have my shell configured:\r\n```\r\nshell:\r\n  program: /bin/zsh\r\n  args:\r\n    - -l\r\n    - -c\r\n    - \"tmux attach || tmux\"\r\n```\r\n\r\nWhen I start alacritty, then immediately create a new window, the new window is a bare zsh shell, without tmux.\r\n\r\nIf I then close the second window and create another new one, it correctly runs tmux.\r\n\r\nSubsequent new windows seem to randomly either start tmux or not.\r\n\r\n### System\r\n\r\nOS: macos\r\nVersion: alacritty 0.10.0-dev (a1083d18)\r\nLinux/BSD: n/a\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\nFont/Terminal size: `alacritty -vv`\r\n```\n\u27a4 alacritty -vv\r\nCreated log file at \"/var/folders/jz/_9dm9vt91dd5jfj40l_3r1dh0000gn/T/Alacritty-86003.log\"\r\n[2021-12-04 23:02:43.032512000] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/Users/joe/.config/alacritty/alacritty.yml\"\r\n[2021-12-04 23:02:43.033066000] [DEBUG] [alacritty] Using environment locale: en_US.UTF-8\r\n... [Log Snipped] ...\n[2021-12-04 23:02:43.165711000] [DEBUG] [alacritty_terminal] [Unhandled CSI] action='q', params=[0], intermediates=[62]\r\n[2021-12-04 23:02:43.175403000] [DEBUG] [alacritty_terminal] [Unhandled CSI] action='h', params=[7727], intermediates=[63]\n```\r\nKeyboard and bindings: `alacritty --print-events`\n\n[Context/Logs]:\n- That seems rather surprising.\r\n\r\nYou specifically mention macOS, but I'd assume that's just because you haven't tested any other OS?\r\n\r\n\r\nRandom as in there's no clear indicator of why this is? Or is there some form of pattern? Also I don't recall exactly, but if you increase logging I think it might list the full command spawned. Could you check if that prints more info? So using `-vvv`.\n- Correct!\r\n\r\n\r\nNo pattern as far as I can tell, except that the first invocation of `CreateNewWindow` never seems to start tmux.\r\n\r\nI tried `alacritty -vvv` but didn't see any output for the shell, here's the output (with annotation for when I called `CreateNewWindow`):\r\n\r\n```\n~ \u27a4 alacritty -vvv\r\nCreated log file at \"/var/folders/jz/_9dm9vt91dd5jfj40l_3r1dh0000gn/T/Alacritty-10924.log\"\r\n[2021-12-09 21:23:42.142147000] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/Users/joe/.config/alacritty/alacritty.yml\"\r\n[2021-12-09 21:23:42.142648000] [DEBUG] [alacritty] Using environment locale: en_US.UTF-8\r\n... [Log Snipped] ...\n[2021-12-09 21:23:51.881763000] [TRACE] [alacritty_terminal] Setting keypad application mode\r\n[2021-12-09 21:23:51.882602000] [TRACE] [alacritty_terminal] Setting mode: BracketedPaste\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- Did a bit more digging. I think I can send a PR to fix the first issue.\r\n\r\nFor the second issue, I'm in way over my head. I tried the following diff to try to narrow down what's going on:\r\n\r\n```\ndiff --git a/alacritty/src/daemon.rs b/alacritty/src/daemon.rs\r\nindex 52f01bd4..5d1fc46e 100644\r\n--- a/alacritty/src/daemon.rs\r\n+++ b/alacritty/src/daemon.rs\r\n@@ -13,6 +13,8 @@ use std::os::windows::process::CommandExt;\r\n... [Log Snipped] ...\n             c if c   return Err(io::Error::last_os_error().into()),\r\n             s if s != size => return Err(Error::InvalidSize),\n```\r\n\r\nThe output looks like this:\r\n```\n# first CreateNewWindow\r\nFD: 9\r\nPID1: 46656\r\nPID2: 46656\r\ninfo: core::mem::maybe_uninit::MaybeUninit \r\n... [Log Snipped] ...\npidinfo_size: 0\r\nErr: Err(InvalidSize)\n```\r\n\r\nI don't understand why `master_fd()` changes between invocations, but I assume that's the root cause of the rest of the issues.\n- Sent a PR to fix the CLI option issue and opened a separate issue for the foreground working directory determination:\r\n[URL]"}
{"project_id": "Alacritty", "bug_id": "237", "source_type": "github", "llm_input_text": "[Title]: Alacritty quits on launch\n[Symptom]:\nAlacritty immediately quits on launch, before even showing the window. Neither reinstalling Alacritty nor restarting the machine seems to help. I deleted my Alacritty config file and that didn't fix anything, so my config has nothing to do with this issue.\r\n\r\n### System\r\n\r\nOS: macOS 12.6\r\nVersion: alacritty 0.11.0 (8dbaa0b)\r\n\r\n### Logs\r\n\r\nOutput of `alacritty -vv` (gives back an exit code of 0):\r\n```\nCreated log file at \"/var/folders/bg/vf7hd0vs49n39lcyk_s0smb00000gn/T/Alacritty-4385.log\"\r\n[0.000054389s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.007115821s] [INFO ] [alacritty] Version 0.11.0 (8dbaa0b)\r\n[0.042091590s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/Users/mhmdanas/.config/alacritty/alacritty.yml\"\r\n... [Log Snipped] ...\n[0.399888952s] [INFO ] [alacritty] Goodbye\r\nDeleted log file at \"/var/folders/bg/vf7hd0vs49n39lcyk_s0smb00000gn/T/Alacritty-4385.log\"\n```\n\n[Context/Logs]:\n- Your shell is exiting right way, try using empty config.\n- @kchibisov still quits on launch with an empty config, and the shell doesn't exit after Alacritty quits. Also, Alacritty.app crashes immediately too, so this doesn't have to do with my shell.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Ah, so that's what is causing it... So if you switch your `sh` to `bash` it should work.\r\n\r\n@chrisnc It seems like your patch is causing issue with `dash`, since there's no `-a` for exec. Do you have any suggestions?\n- Indeed.\r\n\r\n\r\nI'm not @chrisnc of course, but here's my suggestion: If there's no equivalent for `-a` in POSIX sh, then `/bin/sh` should be replaced with `/bin/zsh` (just tested it and it works) in the command (it could be replaced with `/bin/bash` too, but macOS's Bash is ancient, and I reckon it might be even removed in the future)."}
{"project_id": "Alacritty", "bug_id": "238", "source_type": "github", "llm_input_text": "[Title]: palette query responses are malformed\n[Symptom]:\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.10.0-dev (ebf41d5f)\r\nLinux/BSD: X11/Compiz+XFCE\r\n\r\nIt appears that Alacritty has recently added support for palette interrogation. That's great! Unfortunately, the responses are malformed. They ought be of the form\r\n\r\n`]4;N;rgb:XXXX/XXXX/XXXXST` or `]4;N;rgb:XX/XX/XXST`\r\n\r\ninstead, Alacritty is replying with\r\n\r\n`]N;rgb:XXXX/XXXX/XXXXST`\r\n\r\n(note the missing `4;` at the front)\r\n\r\nnot only does this diverge from other implementations, but it introduces an ambiguity: it is now impossible to distinguish between a reply for the default fg / default bg queries and palette indexes 10 and 11.\r\n\r\nthis is causing problems for Notcurses with newer Alacritty, manifesting as a bunch of garbage on stdin: [URL]\n\n[Context/Logs]:\n- Good catch, thanks. Should be fixed with [URL]\n- fwiw, @nullcgt identified the problem. i was just passing it up =] thanks for the quick fix. i've verified it locally."}
{"project_id": "Alacritty", "bug_id": "239", "source_type": "github", "llm_input_text": "[Title]: Restart fcitx5 cause Alacritty close.\n[Symptom]:\nRestart fcitx5 cause Alacritty close.\r\n\r\n\r\nAlacritty should not be closed.\r\n### System\r\n\r\nOS: Debian GNU/Linux bookworm/sid x86_64\r\nVersion: alacritty 0.12.0-dev (e9ee8dc)\r\nDisplay server: X11\r\nCompositor: picom\r\nWM: dwm\r\n\r\n cargo build with only X11 support\r\n### Logs\r\n[Link: Alacritty-607924.log]\n\n[Context/Logs]:\n- The black two are xterm.\r\n\r\n[URL]\r\n\r\n- RUST_BACKTRACE=1 alacritty\r\n[Link: backtrace_1.log]\r\n\r\n- RUST_BACKTRACE=full alacritty\r\n[Link: backtrace_full.log]\r\n\r\nSo actually I should report to [Link: rust-windowing/winit]?\n- I think that it's not a new bug? The code that crashing is due to the error from the XIM, I personally can't repro that by killing and reenabling XIM, so it's something about your setup? No matter what I do it doesn't crash for me when I force kill or reload fcitx. The crash that you've triggered is due to error during closing the input method...\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've updated the branch, I think it should work now. Run `cargo update -p winit` and rebuild(It shouldn't print anything anymore as an indicator).\n- Given that fixed hasn't landed yet."}
{"project_id": "Alacritty", "bug_id": "240", "source_type": "github", "llm_input_text": "[Title]: 0.11-rc2: Alt key is no longer sent into WSL\n[Symptom]:\nAlt key does not seem to be delivered into a running WSL instance as of 0.11-rc2.\r\nWorks in 0.11-rc1.\r\n\r\n### System\r\n\r\nOS: Windows\r\nVersion: alacritty 0.11.0-rc2 (f4ce3ff)\r\n\r\n### Logs\r\n\r\nIn both cases I start a new Alacritty instance from PowerShell, wait a second for Fish to start, type \"test    \".\r\n\r\n`--print-events` output for rc1:\r\n```\nPS D:\\Installs\\Programming\\Alacritty> .\\Alacritty-v0.11.0-rc1-portable.exe --print-events --command C:\\Windows\\System32\\wsl.exe\r\nPS D:\\Installs\\Programming\\Alacritty> Created log file at \"C:\\Users\\Ilya\\AppData\\Local\\Temp\\Alacritty-20188.log\"\r\n[0.000002300s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000286100s] [INFO ] [alacritty] Version 0.11.0-rc1 (7cd180d)\r\n[0.001894900s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[8.617854100s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[8.618584000s] [INFO ] [alacritty] glutin event: LoopDestroyed\n```\r\n\r\n`--print-events` output for rc2:\r\n\r\n```\nPS D:\\Installs\\Programming\\Alacritty> .\\Alacritty-v0.11.0-rc2-portable.exe --print-events --command C:\\Windows\\System32\\wsl.exe\r\nPS D:\\Installs\\Programming\\Alacritty> Created log file at \"C:\\Users\\Ilya\\AppData\\Local\\Temp\\Alacritty-1688.log\"\r\n[0.000002600s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000338800s] [INFO ] [alacritty] Version 0.11.0-rc2 (f4ce3ff)\r\n[0.002167900s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[10.675904900s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[10.677133800s] [INFO ] [alacritty] glutin event: LoopDestroyed\n```\r\n\r\nHere are the same logs, but with most of the \"randomness\" removed.  Better suited for a side-by-side diffing, though some randomness is still present due to the event ordering.\r\n\r\nLess random rc1 log: [URL]\r\n\r\nLess random rc2 log: [URL]\r\n\r\nExcept for comments, my config contains the following:\r\n\r\n```\nyaml\r\nenv:\r\n  TERM: alacritty\r\n\r\nfont:\r\n... [Log Snipped] ...\n\r\n  size: 10.0\n```\n\n[Context/Logs]:\n- Just saying that alt key isn't working on my end as well(Win10). It looks like Alacritty is registering the Alt key but nothing happens in NeoVim. Trying other terminals (cmder, tabby, cmd, and QtNvim) all register the alt key and apply the keymap I have in nvim.\r\nOnly Tabby was giving me some issues but overall worked with small adjustment but still working with Alt.\n- Is it just ALT+B, or are no alt keys working? It looks like the key isn't even received by Alacritty.\n- ... [Middle Discussions Snipped for Brevity] ...\n- For `Alt` - it is a regression in `winit`, see [URL] for details.\r\nThere is an attempt in `winit` to match Windows keyboard handing semantics better, but it is, unfortunately, incompatible with Unix and MacOS semantics.\r\nCurrently, the suggested solution is to revert the change.\r\nMy guess is that it will take some time for the change in `winit` and the next RC of Alactritty will include the fix.\r\n\r\nAn alternative would be to downgrade `winit` to `0.27.2`.\r\nBut the bump PR (https://github.com/alacritty/alacritty/pull/6326) says that it fixes two issues.\r\nAnd as `winit` seems to be working on a fix, it does not seem like a reasonable thing to do at the moment.\r\n\r\n`s` issue should be unrelated, as the change in `winit` only affected handling of `Alt` on Windows.\r\n@Palpatineli, you may want to create a new issue with regard to `s`, and provide event logs, as suggested in the new issue template.\n- It could help if the patch that was proposed in winit could be tested with alacritty, but it could require some knowledge to handle it. Mostly you need to cherry-pick that patch into winit release branch and start from there."}
{"project_id": "Alacritty", "bug_id": "241", "source_type": "github", "llm_input_text": "[Title]: Terminal not fully redrawing under certain conditions\n[Symptom]:\n## System\r\n\r\nOS: Arch Linux\r\nVersion: alacritty 0.11.0-dev (5c51d528)\r\nLinux/BSD: xorg 30bpp (nvidia driver) and Awesome WM\r\n\r\n## Problem\r\n\r\nWhen minimizing and then unminimizing an alacritty terminal, or when switching to another window group and switching back to the original window group containing the alacritty terminal, the whole terminal is not redrawn, only the section next to the terminal cursor position is.\r\n\r\n## Screenshots\r\n\r\n***Correct terminal:***\r\n[Image: correct-terminal]\r\n\r\n***Not fully redrawn terminal:***\r\n[Image: not-fully-redrawn-terminal]\r\n\r\n## Workaround\r\n\r\nCausing an event that triggers a full terminal redraw, such as maximizing the window, changing the font size (Ctrl+'+' or Ctrl+'-'), etc., is needed to restore full terminal content.\n\n[Context/Logs]:\n- That's actually interesting, could you repro on `v0.10.1`? Also are you using some X11 compositor, can you try running without it?\r\n\r\nAlso, under which circumstances it's happening that your window isn't fully redrawn? When the focus changes or when it becomes visible?\n- v0.10.1 does not start on 30bpp xorg:\r\n\r\n`Error: Error creating GL context; Received multiple errors. Errors: '[NoAvailablePixelFormat, NoAvailablePixelFormat]'`\r\n\r\nNeither v0.10.1 nor v0.11.0-git exhibit the problem on 24bpp xorg.\r\n\r\n\r\nI am not using a compositor. I tried to see if the behavior would be different with a compositor (I tried picom): it is the same.\r\n\r\n\r\nWhen it goes from not on the current \"virtual desktop\" to on the current \"virtual desktop\" (called \"tags\" in Awesome WM), or when it goes from minimized to non-minimized (while staying on the same \"virtual desktop\").\r\n\r\nIt redraws correctly when cycling through non-minimized windows of the current \"virtual desktop\", irrespective of the degree of overlap of the various windows.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yeah, that's expected that `debug.highlight_damage` will resolve the issue. As far as I can see there's a frame with the whole terminal marked as pinked, which could mean that there's something different going on with X11 damage thingy.\n- It makes sense to me that a maximize would require full damage too, what I'm more confused about is that the tmux pane doesn't update damage correctly."}
{"project_id": "Alacritty", "bug_id": "242", "source_type": "github", "llm_input_text": "[Title]: Redraw randomly hangs until a keypress\n[Symptom]:\nUsing Alacritty (commit  ) on Ubuntu 16.04 with X11.\r\n\r\nIt is better described with the following screencast. Here I'm repeatedly opening and closing `tig`, so the output should be the same in each iteration. The screen often stays in a partially redrawed state (marked by mouse cursor movement). Then it finishes redraw correctly when I'm pressing a key.\r\n\r\n[Image: screencast]\n\n[Context/Logs]:\n- I have the same exact bug. Ubuntu 16.04 with X11.\r\n\r\nHowever, the interesting thing is this, bug appears only on when working in tmux.\r\nAlso, this bug doesn't exist on my Arch desktop (even when I'm using tmux).\n- For me it is the same with and without tmux. I guess it can be hard to debug.\r\n\r\nPlease guide me how can I help with this, I'm familiar with rust.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Here\u2019s the output of `lspci`:\r\n```\n00:02.0 VGA compatible controller [0300]: Intel Corporation Skylake GT2 [HD Graphics 520] [8086:1916] (rev 07) (prog-if 00 [VG  controller])\r\n\tSubsystem: Lenovo Device [17aa:5053]\r\n\tFlags: bus master, fast devsel, latency 0, IRQ 126\r\n\tMemory at f0000000 (64-bit, non-prefetchable) [size=16M]\r\n\tMemory at e0000000 (64-bit, prefetchable) [size=256M]\r\n... [Log Snipped] ...\n\tKernel driver in use: i915\r\n\tKernel modules: i915\n```\n- I'm using i3-gaps with compton on version 0.3.2, this issue appeared when reflow support was added.\r\nAlacritty will stop redrawing until I mouse over it or press a key if I have it highlighted."}
{"project_id": "Alacritty", "bug_id": "243", "source_type": "github", "llm_input_text": "[Title]: Crash while typing in neovim\n[Symptom]:\nWhile on Wayland, I experience random crashes while typing in Neovim. Log is below. I cannot reproduce it other than by just using Neovim as I normally would. I also cannot reproduce it with a clean config, though since it happens seemingly at random I might've just not ran into it. But for that reason, I'm linking my config as of the time of this issue [Link: here], plugins list is [Link: here]\r\n\r\nWhen running under X11, this doesn't ever happen.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.11.0 (8dbaa0bb)\r\nLinux/BSD: Wayland, Hyprland\r\n\r\n### Logs\r\n\r\nThe important bit:\r\n```\nthread 'main' panicked at 'already borrowed: BorrowMutError', /build/.cargo/registry/src/github.com- /calloop-0.10.1/src/loop_logic.rs:101:46\r\nstack backtrace:\r\n   0:       -  \r\n   1:       -  \r\n   2:       -  \r\n... [Log Snipped] ...\n[wayland-client error] A handler for wl_keyboard panicked.\r\n[1]    20807 IOT instruction (core dumped)  RUST_BACKTRACE=full alacritty -vv\n```\r\nThe entire log is attached here\r\n[Link: alacritty-log.txt]\n\n[Context/Logs]:\n- If you build alacritty from source and before that run `cargo update -p calloop` does it happen?\n- Thanks for the fast fix, should I checkout at 0.11.0 or just do it on the latest source?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yes cloning is fine... But that obviously doesn't work when only cloning the keys and then still expecting every key to remain in the map when later iterating over them...\n- Sorry for the delay again, the alternative fix did work and my problem seems to be gone"}
{"project_id": "Alacritty", "bug_id": "244", "source_type": "github", "llm_input_text": "[Title]: Debouncer is constantly polling the events\n[Symptom]:\nWith the notify v4 we were doing passive waiting, however update to notify v5 changed that and now we have active polling that wakes up every 10ms draining the battery.\n"}
{"project_id": "Alacritty", "bug_id": "245", "source_type": "github", "llm_input_text": "[Title]: Font size seems to be impacted by the padding setting\n[Symptom]:\nChanging the padding sometimes makes a bitmap font blurry:\r\n\r\n[URL]\r\n\r\n### System\r\n\r\nOS: Linux (Arch, X11, i3)\r\nVersion: `alacritty 0.11.0 (8dbaa0bb)`\r\n\r\n### Config\r\n\r\nMinimal repro config:\r\n\r\n```\nyml\r\nfont:\r\n    normal:\r\n        family: ProfontOTB\r\n    bold:\r\n... [Log Snipped] ...\n        x: 2\r\n        y: 2\n```\r\n\r\nFont: [URL]\r\n\r\n### Logs\r\n\r\n```\nCreated log file at \"/tmp/Alacritty-26123.log\"\r\n[0.000033917s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000152819s] [INFO ] [alacritty] Version 0.11.0 (8dbaa0bb)\r\n[0.000220521s] [INFO ] [alacritty] Running on X11\r\n[0.001430871s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[49.901855371s] [DEBUG] [alacritty] Reloading configuration file: \"/home/ux/dotfiles/desktop/.config/alacritty/alacritty.yml\"\r\n[49.902182063s] [DEBUG] [alacritty_terminal] New num_cols is 122 and num_lines is 42\n```\n\n[Context/Logs]:\n- Can you try the same without live config reload? It looks like there are shader issues.\n- Yeah good call. Even resizing the terminal is enough to fix it.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @ubitux assuming that you're on i3 if you toggle on/off full-screen is it getting fixed?\n- Yeah but a simple resize as well so that's expected"}
{"project_id": "Alacritty", "bug_id": "246", "source_type": "github", "llm_input_text": "[Title]: Crashes when zooming in too much\n[Symptom]:\n1. Hold  Ctrl + + \r\n2. Wait\r\n3. Watch alacritty disappear\r\n\r\n### System\r\nOS: Linux 6.1.10-zen1-1-zen\r\nVersion: alacritty 0.12.0-dev (2d27fff7)\r\nDisplay server: X11\r\nWM: xmonad\r\n\r\n### Logs\r\n```\r\n[9.951621818s] [INFO ] [alacritty] Font size changed to Size(113) with scale factor of 1. \r\n[9.951632464s] [INFO ] [alacritty] Cell size: 42 x 86\r\n[9.951695230s] [DEBUG] [alacritty_terminal] Term::resize dimensions unchanged\r\n[9.978555135s] [INFO ] [alacritty] Padding: 0 x 0\r\n[9.978577525s] [INFO ] [alacritty] Width: 1126, Height: 1048\r\nthread 'main' panicked at 'index out of bounds: the len is 1 but the index is 1', alacritty/src/renderer/text/atlas.rs:264:54\r\n```\r\n\r\n[URL]\n\n[Context/Logs]:\n- holy quick fix, batman"}
{"project_id": "Alacritty", "bug_id": "247", "source_type": "github", "llm_input_text": "[Title]: Multiple windows aren't properly resized on Wayland\n[Symptom]:\nIn some cases the old buffer could be submitted. We do resize everything, issue the call to EGL, however for whatever reason the dmabuf is still having old sizes until some draw command in the future(not the next one, since the next one after resize failed).\r\n\r\nI've used `wlhax` to debug it and there's a clear notion of old buffer and messed up state due to mesa, since `glViewport` is also wrong and relative to the old window, and not the current one. Which could only mean that for whatever reason resize failed.\n\n[Context/Logs]:\n- I just encountered a similar bug though I don't know if it is exactly what you are seeing. If the alacritty window is not focused, then, after resizing, the new area is not filled in by alacritty. This only happens when the window is resized quickly.\r\n\r\nI have traced this bug to the following lines: [URL]\r\n\r\nThis flag is set in [URL]\r\n\r\nHowever, there is nothing in that callback that would trigger alacritty to actually do any drawing. I believe that, in this callback, there should be something that triggers glutin to re-emit the `RedrawEventsCleared` event, e.g. a call to `request_redraw`. But I'm not sure how to best implement this.\r\n\r\n---\r\n\r\nNow, why this only happens in multi-window mode I don't know.\n- This might actually be a bug in mesa.\r\n\r\n1. make_current causes mesa to allocate buffers for the current window size\r\n2. If buffers are allocated, wl_egl_window_resize has no effect until the next swap call.\r\n3. alacritty calls make_current and wl_egl_window_resize multiple times without intermediate swap calls.\r\n\r\nThis would explain why, on the first swap call afterwards, you're seeing buffers allocated with the size as it was at the time of the first  wl_egl_window_resize call. Only after this swap call does the last wl_egl_window_resize call take effect.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Same result: The bug is still there.\n- @mahkoh the issue is that your patch doesn't fix my issue, but mine doesn't fix yourth.\r\n\r\nTo fix my issue I have to move `make_current` stuff after `window.resize`, once I do this it vanishes. So Let me try to force dirty bit..."}
{"project_id": "Alacritty", "bug_id": "248", "source_type": "github", "llm_input_text": "[Title]: Mouse doesn't show up with mouse hide_on_typing set to true\n[Symptom]:\n### System\r\n\r\nOS: macOS 13.0 (22A380)\r\nVersion: lacritty 0.11.0 (8dbaa0b)\r\n\r\n\r\n### Logs\r\n\r\nFirst enable the `hide_on_typing` in the config.\r\n```\r\nmouse:\r\n  hide_when_typing: true\r\n```\r\n\r\nSteps to reproduce:\r\n\r\n1. Launch Alacritty.\r\n2. Type something in the terminal and don't move your mouse, the cursor is hidden.\r\n3. Switch to a different app using `command` + `tab`.\r\n4. Switch back to Alacritty using `command` + `tab` and don't type anything yet.\r\n5. Swipe fingers on the touchpad or move the mouse, the cursor doesn't show up.\r\n\r\nExpected behavior:\r\n- In step 5, the cursor should show up.\n\n[Context/Logs]:\n- I'd assume this can be reproduced with the `0.10.X` releases?\n- It can be reproduced with alacritty 0.10.1 (2844606).\n- ... [Middle Discussions Snipped for Brevity] ...\n- It seems like the bug is in winit itself. [Link: Issue] submitted.\n- Just removing the cursor visibility call when losing focus fixes the issue for me. Commit below implements option 2 described [Link: here]. On macOS at least, each window has its cursor visibility tracked separately, and this persists across focus changes, so there's no need to explicitly make the cursor visible when leaving the window, as the system already does this if the newly-focused window has a visible cursor. I still need to check other platforms, though.\r\nUpdate: Windows looks good, but it behaves slightly differently in the multi-Alacritty-window case: with two overlapping windows that both have the cursor hidden from typing, if you have the cursor in the overlapping region, move the mouse, and then alt-tab to the other window that still has the cursor \"hidden\", the cursor will remain visible, whereas on macOS the cursor will be hidden in the second window still. If you switch from an Alacritty window to another app's window, everything works the way I would expect; cursor is immediately visible in the other app, and is invisible when switching back to Alacritty.\r\nUpdate 2: X11 is similar to Windows. Alt-tab reveals the cursor immediately regardless of whether you are switching to another Alacritty window or whether that window previously hid its cursor.\r\n\r\n[URL]"}
{"project_id": "Alacritty", "bug_id": "249", "source_type": "github", "llm_input_text": "[Title]: Since 0.12.0 keyboard input does not work (macOS)\n[Symptom]:\nFor bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\n### System\r\n\r\nOS: macOS 12.6.3 (21G419)\r\nVersion: alacritty 0.12.0 (5a72819)\r\n\r\n### Logs\r\n\r\nFont/Terminal size: [Link: Alacritty-75137.log]\r\n\r\n\r\nWhen I start Alacritty using the App Icon or Spotlight, the keyboard input (except Enter, Escape, Backspace and maybe some more) does not work. When I start Alacritty from Terminal it works just fine. Also tested using the default config.\n\n[Context/Logs]:\n- Is there a difference to `env` with and without starting it from a terminal?\n- I don't think so. Here is my output of `env` when startet from terminal. I can't give you the output when not startet from termninal since I can't type.\r\n\r\n```\nALACRITTY_LOG=/var/folders/my/gzz9nv7x0wq45khvl83pv4br0000gn/T/Alacritty-87920.log\r\nALACRITTY_SOCKET=/var/folders/my/gzz9nv7x0wq45khvl83pv4br0000gn/T/Alacritty-87920.sock\r\nALACRITTY_WINDOW_ID=140599583879712\r\nAUTOJUMP_ERROR_PATH=/Users/home/Library/autojump/errors.log\r\nAUTOJUMP_SOURCED=1\r\n... [Log Snipped] ...\nLC_CTYPE=UTF-8\r\n_=/usr/bin/env\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- maybe this bug only affects some IME. I've two non-ABC IME, one has same issue, another is fine.\n- Same issue:\r\nOS: 13.2.1 (22D68)\r\nAlacritty: 0.12.0\r\n\r\nIf start from the terminal all good, but launchpad keyboard doesn't work"}
{"project_id": "Alacritty", "bug_id": "250", "source_type": "github", "llm_input_text": "[Title]: The backspace key is not functioning properly when typing in Chinese.\n[Symptom]:\nFor bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\n### System\r\n\r\nOS: macOS 13.3.1\r\nVersion: alacritty 0.12.1-rc1 (110f81d)\r\n\r\n### Logs\r\nKeyboard events: [Link: Alacritty-22064.log]\r\n\r\n\r\nThe backspace key is not functioning properly when typing in Chinese. Specifically, when there is only one character left in the input method bar, pressing the backspace key once deletes two characters instead of one.\r\n\r\n\r\n[Image: alacritty-log]\n\n[Context/Logs]:\n- Your log doesn't contain any keyboard events at all. Is it a standard macOS IME?\n- Closing as duplicate of #458. I don't think there's any point in trying to track down more macOS keybinding issues considering we already know the fix for it will likely be the new keyboard API.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Are you sure that you've compiled it correctly? Because I can't repro that bug anymore.\n- Yeah, looking at the log, you've compiled the wrong thing. Your hash doesn't match the one on the branch."}
{"project_id": "Alacritty", "bug_id": "251", "source_type": "github", "llm_input_text": "[Title]: Window clipping when maximized and `decorations` set to `none` on Windows\n[Symptom]:\n[Image: image]\n\n[Context/Logs]:\n- Which version? Is this a regression or can you reproduce it with previous versions too?\n- I tried `0.9.0` and `0.10.0` but the `Windows + Up` key doesn't work to maximize the window. I also tried setting `startup_mode: Maximized` in my `alacritty.yml`, but it doesn't maximize on open for any version of `alacritty`.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue is still reproducible for me when alt tabbing into minimized alacritty windows with `decorations: none`, changing `dynamic_padding` or adjusting `padding` `x` and `y`, had no effect.\r\nRather instead of maximizing, which no longer breaks this, it still occurs on alt tabbing to minimized.\r\nalacritty 0.12.0 (5a728195)\r\nWindows 10\n- One year later,  I think Windows Terminal is an option you can try."}
{"project_id": "Alacritty", "bug_id": "252", "source_type": "github", "llm_input_text": "[Title]: Selection wrong when search end on last line\n[Symptom]:\nWhen the entire terminal is filled and a non-vi search is started for something in the last line, then the selection will shift up a line once the selection is confirmed.\n"}
{"project_id": "Alacritty", "bug_id": "253", "source_type": "github", "llm_input_text": "[Title]: Maximizing windows on macOS/X11 doesn't cover the whole screen\n[Symptom]:\n### System\r\n\r\nOS: macOS\r\nVersion:  \r\n\r\nTo reproduce: hold option key and double click a corner of the window. It is supposed to maximize the window and cover the whole screen. \r\n\r\nNotes: \r\n* It only happens on my second monitor (3840 x 2160). It is not reproducible when I maximize a window in the built-in monitor. \r\n* In my macOS setup, I auto hide the dock and notification bar.\r\n\r\nI found this commit   introduces the problem using git bisect.\r\n\r\nThis is the screenshot with the `decorations` set to `transparent`\r\n<img width=\"1920\" alt=\"Screenshot 2023-02-11 at 22 10 36\" src=\"[URL]\r\n`decorations: buttonless`\r\n<img width=\"1920\" alt=\"Screenshot 2023-02-11 at 22 11 03\" src=\"[URL]\r\n`decorations: full`\r\n<img width=\"1920\" alt=\"Screenshot 2023-02-11 at 22 11 23\" src=\"[URL]\r\n\r\nPay attention to the small gaps around the window.\r\n\r\nThis is the screenshot using 8a838710 with `decorations: buttonless`\r\n<img width=\"1920\" alt=\"Screenshot 2023-02-11 at 22 19 51\" src=\"[URL]\n\n[Context/Logs]:\n- Does it make a difference whether you enable/disable cell-precision resizing in the config?\n- @chrisduerr I am not aware of this setting in the config. Can you give me a pointer? I don't see the commit introduces a new setting. I can't find it in [URL] either.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm genuinely surprised dwm takes the hint into account at all. Leave it to suckless to partially implement a feature and as a result make things worse than not implementing it at all I suppose.\n- It's really bad that dwm doesn't fill every window space, but now I switch to bspwm and it's fine.\r\n[Image: 2023-02-16-08:52:05-s]\r\n[Image: 2023-02-16-08:56:16-s]"}
{"project_id": "Alacritty", "bug_id": "254", "source_type": "github", "llm_input_text": "[Title]: Unable to type into the terminal, only return key is accepted?\n[Symptom]:\nI have tried to delete my config so that Alacritty starts with default configuration but i get the same behaviour. Its very strange cuz it was working until it begun to do this without any changes to the config or the app itself.\r\n\r\n### System\r\n\r\nOS: macOS\r\nVersion: both compiled from master and 12 RC1\r\nmacbook pro intel with Swedish keyboard.\r\n\r\n### Logs\r\n\r\n```\nalacritty --print-events\r\n1   HIToolbox                             _ZN15MenuBarInstance22EnsureAutoShowObserverEv + 102\r\n2   HIToolbox                             SetMenuBarObscured + 226\r\n3   HIToolbox                             _ZN13HIApplication15HandleActivatedEP14OpaqueEventRefhP15OpaqueWindowPtrh + 164\r\n4   HIToolbox                             _ZN13HIApplication13EventObserverEjP14OpaqueEventRefPv + 252\r\n... [Log Snipped] ...\n15  alacritty                             main + 666\r\n16  dyld\n```\n\n[Context/Logs]:\n- Provide the `alacritty --print-events` when you can't type anything and some information about your setup, like whether you're using some special hardware, keyboard layout, and so on.\n- @kchibisov Well I cant run that command since it refuses to let me write it or paste it. If I run it in another terminal I get \"command not fount\".\r\n\r\ni ma going to provide some more info above.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Could you type into window from winit?\r\n\r\n```sh\r\ngit clone [URL]\r\ncd winit\r\ncargo run --example window_option_as_alt\r\n```\r\n\r\nWhen typing into that window, you should see something like `KeyboardInput` and `ReceivedChar`.\n- @kchibisov  This is what I get but I could not see the characters i wrote in that window.\r\n\r\nEdit: It is very strange cuz RC1 has been working flawlessly since release and I even build from source that worked before that.\r\n\r\n```\n2   HIToolbox                             _ZN15MenuBarInstance14EnableAutoShowEv + 52\r\n3   HIToolbox                             SetMenuBarObscured + 408\r\n4   HIToolbox                             _ZN13HIApplication15HandleActivatedEP14OpaqueEventRefhP15OpaqueWindowPtrh + 164\r\n5   HIToolbox                             _ZN13HIApplication13EventObserverEjP14OpaqueEventRefPv + 252\r\n6   HIToolbox                             _NotifyEventLoopObservers + 153\r\n... [Log Snipped] ...\n30  window_option_as_alt                  main + 24\r\n31  dyld                                  start + 2432\n```"}
{"project_id": "Alacritty", "bug_id": "255", "source_type": "github", "llm_input_text": "[Title]: Wrong colors after update\n[Symptom]:\nI updated Alacritty today by building from source from the latest git commit. Now, the green and blue colors seem to be swapped. I have not touched my config. It looks like the latest commit messed with something to do with the colors. Version 0.13.0-dev (cb7ad5b7). Interestingly, not all colors seem to be swapped, but notably the prompt and the output of ls --color=auto are.\n\n[Context/Logs]:\n- Could you show a screenshot before and on commit you've mentioned as well as share your config?\n- Before: left. After: right.\r\n[Image: Screenshot from 2023-05-24 17-06-09]\r\n\r\n```\nyaml\r\n# Configuration for Alacritty, the GPU enhanced terminal emulator.\r\n\r\n# Import additional configuration files\r\n#\r\n... [Log Snipped] ...\n  # Print all received window events.\r\n  #print_events: false\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- Before:\r\n[Image: image]\r\nAfter:\r\n[Image: image]\n- Here is a 256 palette table.\r\nSeems like the ordering changed from rows to columns, or something like that.\r\nLeft side is before [URL] right - just after applying the patch.\r\n[Image: image]"}
{"project_id": "Alacritty", "bug_id": "256", "source_type": "github", "llm_input_text": "[Title]: Crash during live search\n[Symptom]:\nAlacritty will crash if you do the following from the repo:\r\n\r\n1. `cargo run -- --config-file=/dev/null`\r\n2. `cat -v /dev/urandom`\r\n3. Start a search `Ctrl + Shift + F`.\r\n4. Type `.` into it, so all characters will match\r\n5. Do a fast resize to make it 1 cell width o closer.\r\n\r\n\r\nIt's a regression from the   (Unify the grid line indexing types).\r\n\r\nBacktrace from the latest commit\r\n\r\n```\nthread 'main' panicked at 'assertion failed: positive   - std::backtrace_rs::backtrace::libunwind::trace::ha271a8a7e1f3d4ef\r\n                               at /rustc/ /library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\r\n   1:       - std::backtrace_rs::backtrace::trace_unsynchronized::h85739da0352c791a\r\n... [Log Snipped] ...\n  63:       - _start\r\n  64:                0x0 -  \n```\n"}
{"project_id": "Alacritty", "bug_id": "257", "source_type": "github", "llm_input_text": "[Title]: changing windows display scale causes a crash\n[Symptom]:\nsteps to reproduce:\r\n1. start alacritty\r\n2. minimize alacritty\r\n3. change windows display scale\r\n4. bringing alacritty back will cause the crash\r\n\r\n### System\r\n\r\nOS: Windows\r\nVersion: `alacritty 0.12.1 (5fdfd47)`\r\n\r\n### Logs\r\n[0.000003700s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000408900s] [INFO ] [alacritty] Version 0.12.1 (5fdfd47)\r\n[0.002749700s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"C:\\\\Users\\\\jeff\\\\AppData\\\\Roaming\\\\alacritty\\\\alacritty.yml\"\r\n[0.012407700s] [INFO ] [alacritty] Window scale factor: 1\r\n[0.068666100s] [INFO ] [alacritty] Using WGL\r\n[0.080416300s] [DEBUG] [alacritty] Loading \"Iosevka Curly\" font\r\n[0.099698200s] [INFO ] [alacritty] Running on AMD Radeon(TM) Graphics\r\n[0.099952300s] [INFO ] [alacritty] Using OpenGL 3.3 renderer\r\n[0.142406400s] [DEBUG] [alacritty] Filling glyph cache with common glyphs\r\n[0.174504900s] [INFO ] [alacritty] Cell size: 9 x 25\r\n[0.174729800s] [INFO ] [alacritty] Padding: 0 x 0\r\n[0.174869300s] [INFO ] [alacritty] Width: 800, Height: 600\r\n[0.198863600s] [INFO ] [alacritty] PTY dimensions: 24 x 88\r\n[0.250253900s] [INFO ] [alacritty] Initialisation complete\r\n[0.250894100s] [DEBUG] [alacritty_terminal] Term::resize dimensions unchanged\r\n[13.804558900s] [INFO ] [alacritty] Font size changed to Size(30) with scale factor of 1.25\r\n[13.804808800s] [INFO ] [alacritty] Cell size: 12 x 31\r\n[13.804960000s] [DEBUG] [alacritty_terminal] New num_cols is 2 and num_lines is 1\r\npanicked at 'called `Option::unwrap()` on a `None` value', alacritty\\src\\display\\mod.rs:681:72\n\n[Context/Logs]:\n- Could you provide the `--print-events` log for me just so I can ensure that I understand the root cause correctly?\n- ```\n[0.000003400s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000358500s] [INFO ] [alacritty] Version 0.12.1 (5fdfd47)\r\n[0.002561400s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"C:\\\\Users\\\\jeff\\\\AppData\\\\Roaming\\\\alacritty\\\\alacritty.yml\"\r\n[0.003313600s] [INFO ] [alacritty] winit event: NewEvents(Init)\r\n... [Log Snipped] ...\n[5.787596400s] [INFO ] [alacritty] Cell size: 12 x 31\r\npanicked at 'called `Option::unwrap()` on a `None` value', alacritty\\src\\display\\mod.rs:681:72\n```\n- ```\r\n[1.653462000s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(1377806)), event: Moved(PhysicalPosition { x: -32000, y: -32000 }) }\r\n[1.653698700s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(1377806)), event: Resized(PhysicalSize { width: 0, height: 0 }) }\r\n```\r\n\r\nThat's what I've thought. Thx."}
{"project_id": "Alacritty", "bug_id": "258", "source_type": "github", "llm_input_text": "[Title]: Segfault on shitty PPP hardware\n[Symptom]:\nSeems like   caused a regression which causes a crash on the PPP.\r\n\r\nI'd assume you might know what to do @kchibisov, otherwise I can look at glutin myself tomorrow.\n"}
{"project_id": "Alacritty", "bug_id": "259", "source_type": "github", "llm_input_text": "[Title]: Hint regex with large chars amount. Hanging and continues memory consumption\n[Symptom]:\n### Problem\r\n\r\nWith the `Qm[0-9A-Za-z]{44}` as a hint regex pattern, Alacritty hangs upon activating Hints and memory consumption starts to growth continuously.\r\n\r\n```\nyml\r\n# ... rest of the config\r\nhints:\r\n  enabled:\r\n    - regex: 'Qm[0-9A-Za-z]{44}'\r\n... [Log Snipped] ...\n        key: U\r\n        mods: Control|Shift\n```\r\n\r\nBut no issues with `sha256:([0-9a-f]{64})` pattern.\r\n\r\n```\nyml\r\n# ... rest of the config\r\nhints:\r\n  enabled:\r\n    - regex: 'sha256:([0-9a-f]{64})'\r\n... [Log Snipped] ...\n        key: U\r\n        mods: Control|Shift\n```\r\nNo any hangs, hints highlighted almost immediately\r\n\r\n### System\r\n\r\nVersion: 0.12.2\r\nOS: Ubuntu 20.04\r\nCompositor: compton\r\nWM: xmonad\r\n\r\n### Logs\r\n\r\nCrashes: NONE\r\n\r\nFont/Terminal size:\r\n[Link: screenshot]\r\n\r\nKeyboard and bindings:\r\nAfter activating Hints with the mentioned pattern Alacritty hangs and stops reporting any events with `--report-events` option\n\n[Context/Logs]:\n- Going to remove high priority from this since it shouldn't cause complete destruction anymore. But I still think we can probably do better. Potentially a lazily evaluated regex might perform more reasonably."}
{"project_id": "Alacritty", "bug_id": "260", "source_type": "github", "llm_input_text": "[Title]: Keybindings don't work on Linux after migration to TOML\n[Symptom]:\nI recently built version 13-dev and as suggested at the first start I did the migration of my config from YML to TOML.\r\nI don't see regressions on Mac so far, but on Linux all of my keybindings stopped working.\r\nTo reproduce, I simplified my bindings to this:\r\n```\r\n[[keyboard.bindings]]\r\nchars = \"\\u001B\"\r\nkey = \"Left\"\r\nmods = \"None\"\r\n```\r\n\r\nBut, it doesn't work.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.13.0-dev (4ad1aa32)\r\nLinux/BSD: Wayland, Gnome, Fedora\r\n\r\n### Logs\r\n\r\n```\r\n[2.008352824s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94497932021376)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), input: KeyboardInput { scancode: 105, state: Pressed, virtual_keycode: Some(Left), modifiers: (empty) }, is_synthetic: false } }\r\n[2.083860136s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(94497932021376)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), input: KeyboardInput { scancode: 105, state: Released, virtual_keycode: Some(Left), modifiers: (empty) }, is_synthetic: false } }\r\n\r\n# cat\r\n^[[D\r\n```\n"}
{"project_id": "Alacritty", "bug_id": "261", "source_type": "github", "llm_input_text": "[Title]: Regex `;*|rust` doesn't match anything in `rustfmt` string\n[Symptom]:\nThe bug is present on master and on v0.12.3. It's enough to search for the following regex.\r\n\r\nThe `;+|rust` works just fine.\n\n[Context/Logs]:\n- This is likely due to the leftmost search for the pattern causing `;*` to match empty strings and ending in a dead state thereafter.\r\n\r\nI'm not sure if this can be solved without switching to a backtracking regex parser, but since users can relatively easily work around this, I don't think it's a big issue."}
{"project_id": "Alacritty", "bug_id": "262", "source_type": "github", "llm_input_text": "[Title]: SIGSEGV at exit on master (80d4dac)\n[Symptom]:\nAlacritty crashes (SIGSEGV) on exit\r\n\r\nThis issue was introduced with 80d4dac\r\n\r\nThe underlying issue is that the `zwp_primary_selection_device_manager_v1` object seen in the backtrace is destroyed after the wayland connection is here: [URL]\r\n\r\n### System\r\n\r\nOS: Arch Linux (6.5.8-arch1-1)\r\nVersion: alacritty 0.13.0-dev (80d4dac)\r\nLinux: sway, Wayland\r\n\r\n### Logs\r\n\r\nBacktrace:\r\n```\n#0    in wl_map_insert_at (map=map@entry= , flags=flags@entry=1, i=29, data= ) at ../wayland-1.22.0/src/wayland-util.c:276\r\n#1    in proxy_destroy (proxy=proxy@entry= ) at ../wayland-1.22.0/src/wayland-client.c:538\r\n#2    in wl_proxy_destroy_caller_locks (proxy= ) at ../wayland-1.22.0/src/wayland-client.c:562\r\n#3  wl_proxy_destroy (proxy= ) at ../wayland-1.22.0/src/wayland-client.c:585\r\n#4    in wayland_backend::sys::client_impl::InnerBackend::send_request (self= , data=..., child_spec=...) at src/sys/client_impl/mod.rs:739\r\n... [Log Snipped] ...\n#26   in start_thread (arg= ) at pthread_create.c:444\r\n#27   in clone3 () at ../sysdeps/unix/sysv/linux/x86_64/clone3.S:78\n```\r\n\r\nRelevant Valgrind output:\r\n```\n==10704== Thread 5 smithay-clipboa:\r\n==10704== Invalid read of size 4\r\n==10704==    at  : pthread_mutex_lock@@GLIBC_2.2.5 (pthread_mutex_lock.c:80)\r\n==10704==    by  : wl_display_cancel_read (wayland-client.c:1898)\r\n==10704==    by  :  ::drop (mod.rs:466)\r\n... [Log Snipped] ...\n==10704==    by  : core::ptr::drop_in_place  (mod.rs:497)\r\n==10704==    by  : smithay_clipboard::worker::worker_impl (worker.rs:104)\n```\n"}
{"project_id": "Alacritty", "bug_id": "263", "source_type": "github", "llm_input_text": "[Title]: Crash during leaving search with selection\n[Symptom]:\nI'm not sure what exactly triggered it, but that's the crash log\r\n\r\n```\nthread 'main' panicked at 'index out of bounds: the len is 98 but the index is  ', /build/source/alacritty_terminal/src/term/mod.rs:520:26\r\nstack backtrace:\r\n   0:       -  ::fmt::had616a77c932ab1b\r\n   1:       - core::fmt::write::h3a35c0754863b3d5\r\n   2:       - std::io::Write::write_fmt::h502c0f36b9ea0da9\r\n... [Log Snipped] ...\n  34:       - _start\r\n  35:                0x0 -  \n```\n\n[Context/Logs]:\n- Hm, I'm not sure how to repro that, and it's weird that we've end up in such state, but, so I guess I'll just add debugging and wait until it happens again and then try to craft a test case out of output.\r\n\r\nI think I've seen it outside `cancel_search` as well at least once, but obviously I have only report for that sort of crash as of now.\n- Ok, that has a bit more context.\r\n\r\n```\n[7889.436591520s] [DEBUG] [alacritty] Loading \"monospace\" font\r\n[7889.445284548s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Extended, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[7889.447804448s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold Extended, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[7889.450234881s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Extended Italic, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[7889.452691644s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold Extended Italic, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n... [Log Snipped] ...\n  34:       - _start\r\n  35:                0x0 -  \n```\n- That's the patch I've had applied\r\n\r\n```\ndiff\r\ndiff --git a/alacritty/src/event.rs b/alacritty/src/event.rs\r\nindex 52222080..7754b265 100644\r\n--- a/alacritty/src/event.rs\r\n+++ b/alacritty/src/event.rs\r\n... [Log Snipped] ...\n             self.copy_selection(ClipboardType::Selection);\r\n         }\n```"}
{"project_id": "Alacritty", "bug_id": "264", "source_type": "github", "llm_input_text": "[Title]: Cursor is not damaged when blinking and scrolled up\n[Symptom]:\n\n"}
{"project_id": "Alacritty", "bug_id": "265", "source_type": "github", "llm_input_text": "[Title]: alacritty crashes when closed. Hyprland, Wayland\n[Symptom]:\n### Steps to reproduce\r\n1. open alacritty\r\n2. close alacritty\r\n\r\n### Expected behavior\r\nAlacritty closes\r\n\r\n### Actual behavior\r\ncrash\r\n\r\n### System\r\nOS: Arch Linux (kernel 6.4.10-zen2-1-zen)\r\nVersion: alacritty 0.12.2 (9d9982df)\r\nCompositor: Hyprland\r\n\r\n### Logs\r\nCreated log file at \"/tmp/Alacritty-3985.log\"\r\n[0.000000870s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000026360s] [INFO ] [alacritty] Version 0.12.2 (9d9982df)\r\n[0.000031220s] [INFO ] [alacritty] Running on Wayland\r\n[0.000183220s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/user/.config/alacritty/alacritty.yml\"\r\n[0.049363487s] [INFO ] [alacritty] Using EGL 1.5\r\n[0.051254478s] [ERROR] [sctk_adwaita] XDG Settings Portal did not return response in time: timeout: 100ms, key: color-scheme\r\n[0.058066502s] [TRACE] [crossfont] Number of fonts is 167\r\n[0.058088242s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/noto/NotoSans-Bold.ttf\", index=0\r\n[0.058133342s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[0.062155994s] [INFO ] [alacritty] Window scale factor: 1\r\n[0.098153124s] [DEBUG] [alacritty] Loading \"Cascadia Mono\" font\r\n[0.098748704s] [TRACE] [crossfont] Number of fonts is 169\r\n[0.098766484s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMono.ttf\", index=0\r\n[0.098802854s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[0.100419245s] [TRACE] [crossfont] Number of fonts is 167\r\n[0.100434975s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMono.ttf\", index=393216\r\n[0.100478015s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\r\n[0.102089356s] [TRACE] [crossfont] Number of fonts is 170\r\n[0.102104266s] [TRACE] [crossfont] Got font path=\"/usr/share/fonts/TTF/CascadiaMonoItalic.\n...[Description Truncated]...\n\n[Context/Logs]:\n- The one crashing on your trace is nvidia though. Could you try different drivers?\n- already tried 530.*, 535.* versions open source(https://github.com/NVIDIA/open-gpu-kernel-modules) and proprietary. The result is the same. As far as i know nouveau does not support 30* series cards.\n- ... [Middle Discussions Snipped for Brevity] ...\n- unfortunately, it does\r\n[Link: core.window.1000. .6020. .zip]\n- Could you apply this patch on top of branch you've cloned\r\n```\ndiff\r\ndiff --git a/glutin/src/api/egl/display.rs b/glutin/src/api/egl/display.rs\r\nindex 468dd9c..c5e5faf 100644\r\n--- a/glutin/src/api/egl/display.rs\r\n+++ b/glutin/src/api/egl/display.rs\r\n... [Log Snipped] ...\n     Ok(())\r\n }\n```\r\n\r\nAnd post the output of it?"}
{"project_id": "Alacritty", "bug_id": "266", "source_type": "github", "llm_input_text": "[Title]: Truncated text on copy to clipboard\n[Symptom]:\n### Issue Description\r\nCopy selection gets truncated to about 65k chars.\r\n\r\nI'm not that experienced with rust but poked a little around and maybe this is useful:\r\n- The final call where the text gets cut occures somewhere around here: [URL]\r\n- I've added a debug log message right before that to log the length of `text`, which is actually correct.\r\n- I've replaced `text` with a temporary variable initialized with about 2 MiB of text from a file using `include_str!(\"clip.txt\")`. The length is correct but after the text gets passed into `clipboard.set_contents()` it's truncated again\r\n- I've created a minimal test app using the example code and the same `include_str!(\"clip.txt\")` of [Link: copypasta/examples/hello_world.rs] and that does actually works as expected, the clipboard is not truncated.\r\n\r\n### Steps to reproduce\r\n- Build & Run\r\n- Generate output larger then about 65k chars, I used `journalctl --since today --no-pager`\r\n- Select all\r\n- Copy to clipboard using default keybinding `Ctrl+Shift+C`\r\n- Paste clipboard into other application, i.e. VS Code or gedit\r\n\r\n### System\r\n\r\nOS: Linux - Fedora 37 Workstation (Gnome3 Wayland)\r\n\r\nVersion: alacritty 0.12.0 (via `cargo install alacritty`) and alacritty 0.13.0-dev (commit  )\r\n\r\n### Logs\r\n\r\nCrashes: N/A\r\n\r\nConfig: [Link: alacritty.txt]\r\n\r\nFont/Terminal size: `alacritty -vv` -> [Link: Alacritty.log]\r\n\r\nKeyboard and bindings: `alacritty --print-events` -> [Link: Alacritty.log]\n\n[Context/Logs]:\n- Yeah, that's a known issue with our Wayland clipboard. The limitation arises from the linux pipe limitation(usually such thing is solved via async writing to the `fd`).\n- I could've misunderstood you, but the issue is not present when using the example code ([Link: copypasta/examples/hello_world.rs]) of the crate which Alacritty uses. That example code does not write async to the `fd`, afaik."}
{"project_id": "Alacritty", "bug_id": "267", "source_type": "github", "llm_input_text": "[Title]: Xorg Clipboard paste's content is \"lagged behind\"\n[Symptom]:\nAfter a day or two of Alacritty instance uptime, I notice that clipboard updates (usually copies) from other programs get \"lagged behind\". When performing a paste action, the old (i.e. wrong) content gets emitted. I have to wait a second between a copy from one program, until I paste in Alacritty. A new Alacritty instance being spawn does not exhibit this behavior, and sees updated clipboard content without a lag.\r\n\r\nThis might be a copypaste issue or a x11-clipboard issue, but I'm not sure how to debug this.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.4.2 (f68de375b67d)\r\nLinux/BSD: X11\n\n[Context/Logs]:\n- Maybe there's something with our X11 clipboard and it has a lot of events to care and lags behind, and new instance has nothing to process and works just fine.\n- That sounds about right - I'll look into that code.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Here is code to reliably (so far, 100%) reproduce the problem, using gtk because I already knew how to handle it. This is certainly a bug somewhere in the alacritty application, not an X11/wayland bug.\r\n\r\nTo reproduce:\r\n1. Run this program\r\n2. As soon as it prints \"paste now\" paste into an alacritty terminal. You have a 7 second grace period since alacritty, internally, uses a 3 second timeout.\r\n4. Wait until it prints \"timeout-done\"\r\n5. Nothing will happen in the alacritty window.\r\n6. That alacritty window is now stuck in this buggy state, permanently.\r\n9. Go copy some other random text and paste it into the alacritty window.\r\n10. Alacritty will show \"some-text\" instead of whatever you just pasted.\r\n\r\nSomeone mentioned it was using sync::mpsc channels, and my best guess is that something is using a channel to send loads from the clipboard, but stops reading it after the timeout. If setting the clipboard succeeds within 3 seconds it's fine, if it fails it's fine, but if it succeeds after 3 seconds then the stale value is being sent on a channel that no one is listening to. The next time a load is requested it starts a load but receives the stale value on that channel.\r\n\r\n```\nrust\r\nuse std::thread;\r\nuse std::time::Duration;\r\n\r\nuse gtk4::prelude::{ApplicationExt, ApplicationExtManual, DisplayExt};\r\n... [Log Snipped] ...\n    app.run()\r\n}\n```\r\n\r\n\r\nAlso breaks the copypasta demo application posted above:\r\n[URL]\r\n\r\n```\nErr(Timeout)\r\nErr(Timeout)\r\nErr(Timeout)\r\nOk(\"some-text\")\r\nErr(UnexpectedType(0))\r\n... [Log Snipped] ...\nOk(\"ebuginfo] t\")\r\nOk(\"ebuginfo] t\")\n```\n- @awused you've got it! Glad my hunch around copypasta was correct \ud83d\ude04 ."}
{"project_id": "Alacritty", "bug_id": "268", "source_type": "github", "llm_input_text": "[Title]: Blocking paste freezing Alacritty\n[Symptom]:\n# Issue\r\nI'm on Gentoo, running Sway (and thus Wayland.) The clipboard has never really worked on Wayland, it's consistently a mess. Talks with @chrisduerr and @cmr suggested that it should be fixed on master.\r\n\r\nToday I compiled master with rustc 1.34.2 to try, and it seems like it is still not working.\r\n\r\n# How to reproduce\r\n1. Running Sway (might work on other Wayland WMs?)\r\n2. Open Firefox with `GDK_BACKEND=wayland` set.\r\n3. Select and copy some text on Firefox.\r\n4. Switch to another workspace where Alacritty is.\r\n5. Paste text (ctrl+shift+v)\r\n\r\nThe result should be a freeze and eventually a crash.\r\n\r\nOn a release build I get this:\r\n```\r\nthread ' ' panicked at 'called `Result::unwrap()` on an `Err` value: EventsLoopClosed', src/libcore/result.rs:997:5\r\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\r\n```\r\n\r\nOn a debug build with backtracing I get this:\r\n```\nalacritty on \ue0a0 master via \ud835\udde5 v1.34.2 [I] \u279c RUST_BACKTRACE=1 cr\r\n   Compiling alacritty v0.3.2 (/home/bemeurer/src/alacritty/alacritty)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 7.18s\r\n     Running `target/debug/alacritty`\r\nthread ' ' panicked at 'called `Result::unwrap()` on an `Err` value: EventsLoopClosed', src/libcore/result.rs:997:5\r\n... [Log Snipped] ...\n\r\n^C\n```\n\n[Context/Logs]:\n- I just realized I was running on my branch with an updated Cargo.lock. Here's the backtrace on upstream master:\r\n\r\n```\nalacritty on \ue0a0 remotes/upstream/HEAD via \ud835\udde5 v1.34.2 took 1m 59s [I] \u279c RUST_BACKTRACE=1 cr\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.17s\r\n     Running `target/debug/alacritty`\r\nthread ' ' panicked at 'called `Result::unwrap()` on an `Err` value: EventsLoopClosed', src/libcore/result.rs:997:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\n... [Log Snipped] ...\n             at alacritty_terminal/src/window.rs:501\r\n  11: alacritty_terminal::display::Notifier::notify\n```\n- Have you tried out the Wayland clipboard support previously and it worked, or is this the first time testing?\r\n\r\nIt seems to me like the issue is due to the clipboard code causing troubles with our windowing code, even though they should be clearly separated.\r\n\r\nCould you try checking out the commit which introduced native clipboard support and run just that commit without updating the dependencies (so build from lockfile)? Maybe an update has caused a regression here.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue seems to have disappeared with FF 67. Weird.\n- @chrisduerr I was not able to replicate this issue with another gtk wayland application and @lovesegfault reports it to be fixed with FF 67. I think this was likely to have been an issue with wayland firefox. \r\n\r\nIn that case, is this issue still active or should it be closed?"}
{"project_id": "Alacritty", "bug_id": "269", "source_type": "github", "llm_input_text": "[Title]: Alt + 4 wrongly sends escape sequence inside Alacritty+Neovim (Swedish/Nordic kb layout!)\n[Symptom]:\nOS: macOS Ventura 13.6.1\r\nVersion: Current commit: [URL] (but same issues since kitty key protocol)\r\nKeyboard layout: Swedish/Nordic\r\n\r\noption_as_alt = \"None\"\r\n\r\nKey events:\r\n\r\nSame output for command line inside Alacritty, Inside Neovim, Inside Neovim inside Tmux:\r\n```\r\n[122.479315289s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(140634396691760)), event: KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(AltLeft), logical_key: Named(Alt), text: None, location: Left, state: Pressed, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: None, key_without_modifiers: Named(Alt) } }, is_synthetic: false } }\r\n[122.483869688s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(140634396691760)), event: KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(Digit4), logical_key: Character(\"$\"), text: Some(\"$\"), location: Standard, state: Pressed, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: Some(\"$\"), key_without_modifiers: Character(\"4\") } }, is_synthetic: false } }\r\n[122.550189254s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(140634396691760)), event: KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(Digit4), logical_key: Character(\"$\"), text: None, location: Standard, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: Some(\"$\"), key_without_modifiers: Character(\"4\") } }, is_synthetic: false } }\r\n[122.554484575s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(140634396691760)), event: KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(AltLeft), logical_key: Named(Alt), text: None, location: Left, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: None, key_without_modifiers: Named(Alt) } }, is_syn\n...[Description Truncated]...\n\n[Context/Logs]:\n- Could you check kitty as well? For me it works the same way as you describe alacritty works, so I'd assume you won't be able to use it as well?\r\n\r\nIt all looks like neovim bug, if it matters, but I guess the thing is that your `Alt` is not really an `Alt`, but rather compose in such case?\n- it doesn't support mode that broke it for you, so it's not relevant with it.\n- Kitty works properly, inserting **$** in every scenario\r\n\r\nThis fixes the issue i was having, now it properly inserts **$** everywhere as expected so in that regards both Kitty & Alacritty now works the same\r\n\r\nHowever, binding M- (alt) in tmux does not work as expected (works properly in Kitty)\r\n```\r\n# Use Alt-arrow keys without prefix key to switch panes\r\nbind -n M-Left select-pane -L\r\nbind -n M-Right select-pane -R\r\nbind -n M-Up select-pane -U\r\nbind -n M-Down select-pane -D\r\n```\r\n-Up & -Down works as Home/End in alacritty (going to the end or beginning of line)\r\nM-Left works as \"Backspace\"\r\n\r\nThis may be a completely different issue though, or a non issue depending on setup. I tried to follow the flow of the SequenceBuilder and payload, but i am way to unfamiliar with the Alacritty codebase to follow it properly, especially how the \"payload\" mutates in the various TermMode states, especially now with all the kitty_event_*\r\n\r\n\r\nThe original issue is solved as far as i can tell though. Thank you\n- Does it happen with default config as well? I can't repro that on macOS with tmux, arrows with Alt work as expected from what I can tell, and I've just used your bindings pretty much."}
{"project_id": "Alacritty", "bug_id": "270", "source_type": "github", "llm_input_text": "[Title]: alacritty migrate: Configuration file migration failed: parsing error: Unable to locate config file\n[Symptom]:\nFresh after upgrading to alacritty 0.13.0, I saw in the release notes that there's been a migration from yaml to toml. I ran `alacritty migrate` as instructed, but it failed with:\r\n```\r\nConfiguration file migration failed:\r\n    \"/home/user/.config/alacritty/alacritty.yml\": parsing error: Unable to locate config file\r\n```\r\nObviously, the file is there. There is a parsing error, but the exact cause seems to be misreported.\r\n\r\nAfter playing with it a bit, I found that running `alacritty migrate -i` (skipping imports) succeeds. The only import in my yaml was `colorscheme.yml`. To be honest, I don't remember what exactly that is, but I've decided to create this issue, because `Unable to locate config file` is misleading and maybe this will help other people.\r\n\r\nIt's unfortunate that `migrate` fails with a vague error on a [Link: former valid config]. I don't mean this to come off as picky though, thanks for taking the effort of making this migration smooth!\r\n\r\n### System\r\n\r\nOS: Arch Linux, X11, bspwm, picom\r\nVersion: alacritty 0.13.0 (78fa4d6f)\n\n[Context/Logs]:\n- yeah, it should likely tell which file it failed to locate correctly.\n- Just to be 100% clear, this is still a valid configuration file and there's no plan to change that. Missing imports is an intentionally supported feature. Seems like migration just doesn't account for that, it should be a warning instead.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Comments are not preserved by the parser, for obvious reasons. Each keybinding is converted to a toml entry like so:\r\n```toml\r\n[[keyboard.bindings]]\r\nchars = \"\\u001B[13;5u\"\r\nkey = \"Return\"\r\nmods = \"Control\"\r\n```\r\n\r\nYou can very easily verify this yourself by saving the snippet you've posted into a `file.yml`, and running `alacritty migrate -c file.yml`, which should create `file.toml`. The `-c` option is documented in `alacritty migrate --help`.\r\n\r\nMind that the problem described in this issue is strictly tied to importing non-existent files. This appears to have been solved, a fix should be available in 0.13.1 (whenever that is released), and until then it's very easy to avoid the problem manually by passing the `-i` flag as I described, or getting rid of the redundant import entries from your config, or using the development branch where the fix is present. It's not really clear from your explanation if our problems are at all related.\n- This issue just happened to me. I had to manually edit the file (which was located at the correct path despite `alacritty migrate` supposedly failing to locate it)."}
{"project_id": "Alacritty", "bug_id": "271", "source_type": "github", "llm_input_text": "[Title]: Long startup times on sway/Wayland since winit 0.28\n[Symptom]:\n### System\r\n\r\nOS: Linux, openSUSE Tumbleweed\r\nVersion: 0.12.0\r\nLinux/BSD: Wayland, sway\r\n\r\n### Logs\r\n\r\n \r\n   Log with the error \r\n  \r\n```\nCreated log file at \"/tmp/Alacritty-9549.log\"\r\n[0.000006774s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000432741s] [INFO ] [alacritty] Version 0.12.0\r\n[0.000469338s] [INFO ] [alacritty] Running on Wayland\r\n[0.003600353s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[27.303578157s] [INFO ] [alacritty] Goodbye\r\nDeleted log file at \"/tmp/Alacritty-9549.log\"\n```\r\n\r\n \r\n\r\nFor comparison:\r\n\r\n \r\n   Log on i3 without the error \r\n  \r\n```\nCreated log file at \"/tmp/Alacritty-2696.log\"\r\n[0.000004260s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000304295s] [INFO ] [alacritty] Version 0.12.0\r\n[0.000335793s] [INFO ] [alacritty] Running on X11\r\n[0.003723615s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[1.286042334s] [INFO ] [alacritty] Goodbye\r\nDeleted log file at \"/tmp/Alacritty-2696.log\"\n```\r\n\r\n \r\n\r\n### Description\r\n\r\nSince I updated to version 0.12.0 alacritty takes really long (around 20 - 40 seconds) until a window is displayed.\r\nThis happens both for the first started instance as for instances started later and also for new windows of the same process.\r\n\r\nVia bisecting the update to winit 0.28 seems to be the first commit affected which makes sense imo:  \r\n\r\nI also provided a log of a startup on i3wm/X11 were alacritty starts in around one second.\r\n\r\nSo far no change in my config seems to help and the bug persists when using the default config shipped by openSUSE - Changing the renderer and window decorations makes no difference.\n\n[Context/Logs]:\n- It was already discovered and detected that broken `xdg-portal` setup is the cause for this issue.\r\n\r\nThere's no solution other than fixing it or removing entirely. You can also build with [URL] disabled(just remove a line) or use something like [URL] (which solved such things on a more fundamental level).\r\n\r\nThere's also an upstream change which added timeout for `portal` stuff(100ms), but it's not really a solution.\n- Thank you for the fast answer! If I understand that right [URL] would fix this issue too?\r\n\r\nAs a workaround I am now using a custom build with the dependency removed as you suggested - Let's see how fast the issue is resolved. :)\n- ... [Middle Discussions Snipped for Brevity] ...\n- Be aware that it'll happen if and only if you have portals installed on your system, if you don't have them, you won't ever face it(like I don't have them at all).\n- Thank you for taking the time to link the root cause, I was able to fix my portal setup on sway via their wiki entry: [URL]\r\n\r\nFrom my perspective this issue can be closed, especially because [URL] is merged now too, but you could keep it open until a new release."}
{"project_id": "Alacritty", "bug_id": "272", "source_type": "github", "llm_input_text": "[Title]: Crashing on GNOME Wayland\n[Symptom]:\nI'm using zellij inside alacritty on Ubuntu 22.04.\r\n\r\nSometimes when selecting text in zellij, alacritty crashes. The panic message is shown below.\r\n\r\nzellij copies the selected text into the system clipboard, so this might be related.\r\n\r\n### System\r\n\r\nOS: Linux (Ubuntu 22.04)\r\nVersion: alacritty 0.12.0-dev (2a2d38fc)\r\nLinux/BSD: Wayland\r\n\r\n### Logs\r\n\r\nOutput:\r\n\r\n```\nUnsupported modifier, resource creation failed.\r\nXXX: resource creation failed\r\nUnsupported modifier, resource creation failed.\r\nXXX: resource creation failed\r\nUnsupported modifier, resource creation failed.\r\n... [Log Snipped] ...\n             at /rustc/ /library/core/src/ops/function.rs:248:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n```\n\n[Context/Logs]:\n- Could you provide `WAYLAND_DEBUG=1` log during it, otherwise it seems impossible to understand what is happening. I'd guess some issue with cursor image.\n- Also, are you using nvidia binary driver? Just in case.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Well, I have to correct that, now I got a crash even with `wayland-csd-adwaita` removed. But seems to happen far less frequently.\r\n\r\nUnfortunately didn't set `RUST_BACKTRACE`, so this is the output I got:\r\n\r\n```\r\n^[[Awl_shm_pool@31: error 2: shrinking pool invalid\r\nthread 'main' panicked at 'failed to dispatch wayland event queue: Os { code: 71, kind: Uncategorized, message: \"Protocol error\" }', alacritty/src/event.rs:1464:30\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\n- @Tiwalun do you get a crash for `none` decorations btw in the config?"}
{"project_id": "Alacritty", "bug_id": "273", "source_type": "github", "llm_input_text": "[Title]: `startup_mode: Maximized` stopped working recent GNOME Wayland\n[Symptom]:\nThis stopped working after upgrading from Fedora 35 to 36.  From the log it seems that Alacritty starts in 800x600, switch size to 2560x1408 (which is about the size of my screen) but then goes back to 800x600.\r\n\r\nThe Alacritty version in Fedora 36 is 0.10.1 whereas in 35 it was 0.9.0. But I tried to run Alacritty from source using the v0.9.0 tag, and I see the same issue, i.e. even 0.9.0 doesn't start maximized on Fedora 36 either. So maybe something else changed in Fedora 36 that interfers with Alacritty?  Anything I can do to investigate further?\r\n\r\n### System\r\n\r\nOS: Linux (Fedora 36)\r\nVersion: 0.10.1\r\nLinux/BSD: Grome on Wayland\r\n\r\n### Logs\r\n\r\nFont/Terminal size: `alacritty -vv`\r\n```\n[0.000007730s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000120725s] [INFO ] [alacritty] Version 0.10.1\r\n[0.000163071s] [INFO ] [alacritty] Running on Wayland\r\n[0.001266332s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/perso/.config/alacritty/alacritty.yml\"\r\n... [Log Snipped] ...\n[0.152942982s] [INFO ] [alacritty] Padding: 1 x 3\r\n[0.152999777s] [INFO ] [alacritty] Width: 800, Height: 600\n```\n\n[Context/Logs]:\n- Is `Fullscreen` startup mode working?\n- @kchibisov yes, `Fullscreen` seems to work correctly.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @StackOverflowExcept1on your issue is unrelated, alacritty just exits without issues for you, likely your shell program crashed.\n- I just tried @StackOverflowExcept1on's workaround, and it seems to fix the `Maximized` issue for me :tada:"}
{"project_id": "Alacritty", "bug_id": "274", "source_type": "github", "llm_input_text": "[Title]: Alacritty crashes sometimes when switching between different tty on wayland\n[Symptom]:\nAlacritty crashes sometimes when switching between different tty on wayland.\r\n\r\nTo reproduce you can run `dbus-run-session startplasma-wayland` in 2 different tty, launch alacritty there and try to switch between them. It doesn't happen consistently, but after several attempts it crashes.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.9.0\r\nLinux/BSD: Wayland, KDE\r\n\r\n### Logs\r\n\r\nWhen crash happens it writes `wl_display@1: error 0: invalid object 42`, `-vv` doesn't add much info, only `[INFO ] [alacritty] Goodbye` in the next line.\n\n[Context/Logs]:\n- Can you reproduce this with the window example from [URL]\n- It doesn't work for me for some reason. `cargo run --example window` gives:\r\n```\r\nthread 'main' panicked at 'Failed to initialize any backend! Wayland status: NoWaylandLib X11 status: LibraryOpenError(OpenError { kind: Library, detail: \"opening library failed (libX11.so.6: cannot open shared object file: No such file or directory); opening library failed (libX11.so: cannot open shared object file: No such file or directory)\" })', src/platform_impl/linux/mod.rs:619:9\r\n```\r\n\r\nProbably it can't find some wayland library as I use nixos...\n- ... [Middle Discussions Snipped for Brevity] ...\n- That's not quite how this all comes together.\r\n\r\nFor a given client owned object (like pointer):\r\n 1) client creates a proxy\r\n 2) client deletes a proxy from it's side\r\n 3) server acks back (wl_display::delete_id) that the object has been deleted from the server side\r\n \r\nFrom the logs step 3 hasn't happened.\r\n\r\nYou can have events in flight between steps 2 and 3. That's not a sign of kwin being in the wrong. It is a race, but an expected one that the client has to handle.\r\n\r\nlibwayland will treat the proxy as being in destroyed and silently drop these incoming messages so you're right that you shouldn't have to deal with it at an application level.\r\n\r\nThere's one rust library that doesn't wrap libwayland. Can you point me in the right direction to report there.\n- @davidedmundson well, we use that library, but we're using its libwayland backend, so libwayland is involved here. The version of it that we're [Link: using]."}
{"project_id": "Alacritty", "bug_id": "275", "source_type": "github", "llm_input_text": "[Title]: Can't bind to LBracket, RBracket under Wayland\n[Symptom]:\nAlacritty doesn't seem to pick up `virtual_keycode` for `LBracket`, `RBracket` under Wayland. Attempting to bind to these keys has no effect. Running under xwayland the keys are picked up as expected.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: `alacritty 0.5.0-dev (1ddd3118)` from AUR `alacritty-git`\r\nLinux/BSD: Wayland, sway\r\n\r\n### Logs\r\n\r\n```\n$ alacritty --print-events\r\nCreated log file at \"/tmp/Alacritty-2000775.log\"\r\n[2020-04-10 05:15:57.921738779] [INFO] Welcome to Alacritty\r\n[2020-04-10 05:15:57.921786760] [INFO] Configuration loaded from \"/home/maddy/.config/alacritty/alacritty.yml\"\r\n[2020-04-10 05:15:57.984496209] [INFO] Device pixel ratio: 1\r\n... [Log Snipped] ...\n[2020-04-10 05:16:07.882455272] [INFO] glutin event: MainEventsCleared\r\n[2020-04-10 05:16:07.882465151] [INFO] glutin event: RedrawEventsCleared\n```\n"}
{"project_id": "Alacritty", "bug_id": "276", "source_type": "github", "llm_input_text": "[Title]: WindowEvent missing virtual keycode on Linux\n[Symptom]:\nI have the following mapping in my config:\r\n\r\n```\r\n  - { key: Minus,      mods: Control|Shift, chars: \"hi\"    }\r\n```\r\n\r\nThe \"hi\" text is meant to represent something else, but just using that as an easy placeholder.  tmux is not running.\r\n\r\nJust upgraded but the same thing happened in 0.4.1.  On my Mac, when I hit Ctrl+Shift+-, it prints \"hi\" as expected.  On my linux box (details below), nothing happens.  A `print-events` log is attached.  I basically just launched alacritty, hit Ctrl+Shift+- and then Alt+F4.  It looks like the character that's received is `\\u{1f}` for some reason.\r\n\r\nBased on the log output, I then tried changing the config to use the word `Subtract` instead of `Minus` but still nothing happens.\r\n\r\nI feel like this is just something I'm doing wrong, not a bug or anything, but I have no idea what it is.  \r\n\r\nThank you!\r\n\r\n### System\r\n\r\nOS: Linux - Ubuntu 19.10\r\nVersion: `alacritty --version` output\r\n  `alacritty 0.4.2-rc1`\r\nLinux/BSD: X11/Wayland (default Gnome installation that comes with ubuntu)\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\nFont/Terminal size: `alacritty -vv`\r\nKeyboard and bindings: `alacritty --print-events`\r\n[Link: output.txt]\n\n[Context/Logs]:\n- Could you provide `alacritty --print-events` while you're reproducing this issue and not `strace` mixed output, thanks.\n- Yes, of course.  How do I do that?  The command I'm running right now is `alacritty --print-events | tee output.txt`.\n- ... [Middle Discussions Snipped for Brevity] ...\n- As I said, `Control + Shift + Minus` doesn't have virtual key code, so the only option is to bind by scancode, as I said before. I can repro this bug on my system with both backends.\n- Yeah, this is identical to the X11 winit issue. The `DeviceEvent` contains a key but the `WindowEvent` does not."}
{"project_id": "Alacritty", "bug_id": "277", "source_type": "github", "llm_input_text": "[Title]: Using dead keys as shortcut keys\n[Symptom]:\nWhich operating system does the issue occur on?\r\nLinux\r\nIf on linux, are you using X11 or Wayland?\r\nX11\r\n\r\nIt seems like you cannot set keyboard shortcuts to dead keys. I'm using `setxkbmap -layout se,us` which means that the plus sign `+` on the american layout is a dead key in the Swedish layout. This in turn means that the key cannot be used as a shortcut key even if I'm currently using the US layout.\n\n[Context/Logs]:\n- This is the events I get when I press the key:\r\n\r\n```\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scancode: 37, state: Pressed, virtual_keycode: Some(LControl), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } }) }\r\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scancode: 50, state: Pressed, virtual_keycode: Some(LShift), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } }) }\r\nglutin event: WindowEvent { window_id: WindowId(X(WindowId(33554435))), event: KeyboardInput { device_id: DeviceId(X(DeviceId(3))), input: KeyboardInput { scancode: 37, state: Pressed, virtual_keycode: Some(LControl), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } } } }\r\nglutin event: WindowEvent { window_id: WindowId(X(WindowId(33554435))), event: KeyboardInput { device_id: DeviceId(X(DeviceId(3))), input: KeyboardInput { scancode: 50, state: Pressed, virtual_keycode: Some(LShift), modifiers: ModifiersState { shift: false, ctrl: true, alt: false, logo: false } } } }\r\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scancode: 21, state: Pressed, virtual_keycode: None, modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } }) }\r\n... [Log Snipped] ...\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scanc\n...[Text Truncated]...\n shift: false, ctrl: true, alt: false, logo: false } } } }\n```\n- And this is what it looks like when I decrease the font size:\r\n\r\n```\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scancode: 50, state: Pressed, virtual_keycode: Some(LShift), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } })\r\n}\r\nglutin event: WindowEvent { window_id: WindowId(X(WindowId(41943043))), event: KeyboardInput { device_id: DeviceId(X(DeviceId(3))), input: KeyboardInput { scancode: 50, state: Pressed, virtual_keycode: Some(LShift), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } } } }\r\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scancode: 37, state: Pressed, virtual_keycode: Some(LControl), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } }) }\r\nglutin event: WindowEvent { window_id: WindowId(X(WindowId(41943043))), event: KeyboardInput { device_id: DeviceId(X(DeviceId(3))), input: KeyboardInput { scancode: 37, state: Pressed, virtual_keycode: Some(LControl), modifiers: ModifiersState { shift: true, ctrl: false, alt: false, logo: false } } } }\r\n... [Log Snipped] ...\n}) }\r\nglutin event: DeviceEvent { device_id: DeviceId(X(DeviceId(13))), event: Key(KeyboardInput { scancode: 50, state: Released, virtual_keycode: Some(LShift), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: false } }) }\n```"}
{"project_id": "Alacritty", "bug_id": "278", "source_type": "github", "llm_input_text": "[Title]: MacOS keymap assumes QWERTY\n[Symptom]:\nI use a normal keyboard with the System Settings >> Keyboard layout remapping to the Dvorak layout.  Everything with respect to the keymap works great (as far as I can tell) except for Cmd-key combinations.  Here's what I'm seeing with `--print-events` when I type Cmd-v (which should paste, but instead just types 'v'):\r\n\r\n```\r\nglutin event: KeyboardInput(Pressed, 55, Some(LWin), , None)\r\nglutin event: ReceivedCharacter('v')\r\nglutin event: KeyboardInput(Pressed, 47, Some(Period), SUPER, Some(\"v\"))\r\nglutin event: Awakened\r\nglutin event: KeyboardInput(Released, 47, Some(Period), SUPER, None)\r\nglutin event: KeyboardInput(Released, 55, Some(LWin), , None)\r\n```\r\nPeriod on the QWERTY keyboard corresponds to \"v\" in Dvorak, so it seems as though for some reason, with the Cmd-key down, alacritty is getting the raw- not OS-remapped- key events? In the event in question, both `Some(Period)` and `Some(\"v\")` are in the event.\r\n\r\nAn awkward but effective workaround is to use these keybindings:\r\n```\r\n  - { key: I,        mods: Command, action: Copy                         }\r\n  - { key: Period,   mods: Command, action: Paste                        }\r\n  - { key: X,        mods: Command, action: Quit                         }\r\n```\n\n[Context/Logs]:\n- Just want to add that Alacritty uses `Control-Shift-C` and `Control-Shift-V` for copy and paste out-of-the-box, so you can always just use these keyboard shortcuts instead.\n- I can confirm that this is happening for me on OSX (10.13.1) using Colemak instead of Qwerty. \r\n\r\nI added a custom keybinding to create new windows, as follows: \r\n```\r\n- { key: N,        mods: Command, command: { program: \"open\", args: [\"-n\", \"/Applications/Alacritty.app\"] } }\r\n```\r\nI thought that this simply wasn't working.  Then I hit `cmd+k` (which is normally `cmd+n` on a qwerty keyboard), and it popped open a new window.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Without digging into winit more than that PR itself: I'm not sure. What I can say is with the current tomaka:master I see `Period` is registered as pressed twice, the second time with a `ReceivedCharacter('v')` (still):\r\n\r\n```\r\nWindowEvent { window_id: WindowId(Id(140586266945872)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(Period), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(140586266945872)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(Period), modifiers:\r\n ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(1405862669458\n...[Text Truncated]...\n { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Released, virtual_keycode: Some(Period), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\n```\r\n\r\nHowever with the current Toqozz:master I see the `Period` press once, then a `Press` and `Release` for `V`:\r\n```\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(Period), modifiers:\r\n ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Pressed, virtual_keycode: Some(V), modifiers: ModifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: ReceivedCharacter('v') }\r\nWindowEvent { window_id: WindowId(Id(140404366310336)), event: KeyboardInput { device_id: DeviceId(DeviceId), input: KeyboardInput { scancode: 47, state: Released, virtual_keycode: Some(V), modifiers: Mod\r\nifiersState { shift: false, ctrl: false, alt: false, logo: true } } } }\r\n```\n- @guildencrantz Is that running the example in the winit repo?\r\n\r\nAlso which key are you actually pressing, with which keyboard layout (so what would there be at the same position with qwerty)?\r\n\r\nIs there never any Release event for Period?"}
{"project_id": "Alacritty", "bug_id": "279", "source_type": "github", "llm_input_text": "[Title]: UK keyboard layout: '#' and '~' key not working on Linux with x11\n[Symptom]:\nI've just quickly followed the dependencies for keyboard input. It looks like alacritty depends on [Link: glutin] which for linux depends on [Link: winit] and I found the following lines are commented out in the most recent version [Link: src/api/x11/events.rs#L177] and [Link: src/api/x11/events.rs#L270].\r\n\r\nThis seems to be relevant to my issue but I am unsure why it has been commented out. If this is the reason then the layout of my keyboard is irrelevant and most likely other linux users would have the same problem.\r\n\r\nHaving encountered the issue while using alacritty I'm submitting an issue here but should I also post an issue on winit? Or is there another reason for this issue?\n\n[Context/Logs]:\n- This problem would need to be fixed upstream in `winit` as you've suggested. Alacritty is actually on an older for of `glutin` from before the split, and so there would still be some work here to get an upstream patch.\n- I'll see if I can fix it tomorrow. Any particular reason you are using an older version of `glutin`? Is it changing too often?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can we confirm this is fixed ? If so, the issue can be closed\n- if you  can see the mentioned PR isn't yet landed."}
{"project_id": "Alacritty", "bug_id": "280", "source_type": "github", "llm_input_text": "[Title]: Running vim with TERM=xterm triggers paste at startup\n[Symptom]:\nWhen using TERM=`xterm` (also `xterm-256color` or `rxvt`), starting vim within Alacritty causes it to paste the contents of its default \"yank\" register at startup.\r\n\r\nThis behavior was introduced in 0589b718 (DECRPM/DECRQM support) and it seems to be triggered by running `report_private_mode` for `NamedPrivateMode::BlinkingCursor`.  If I add a `return` [Link: here] to disable that single mode, the problem is no longer visible.\r\n\r\nI don't think the \"paste\" effect is related to Alacritty - it seems to be caused by the escape code sending a `p` character and triggering Vim's native paste function.\r\n\r\nThe problem does not happen when using TERM=`alacritty`.  I can also work around it by adding `set t_RV=` to my `.vimrc`.\r\n\r\n### System\r\n\r\nOS: Linux, Fedora 39, Wayland + sway\r\nVersion: alacritty 0.13.0-dev (5adfc4fb)\r\nvim: `vim-enhanced-9.0.2120-1.fc39.x86_64`, version `VIM - Vi IMproved 9.0 (2022 Jun 28, compiled Nov 22 2023 00:00:00)\r\nIncluded patches: 1-2120`, no `.vimrc` or Vim scripts installed\r\n\r\n### Logs\r\n\r\n \r\n `alacritty --print-events -vvv` \r\n \r\n[0.000011001s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000073520s] [INFO ] [alacritty] Version 0.13.0-dev (5adfc4fb)\r\n[0.000083699s] [INFO ] [alacritty] Running on Wayland\r\n[0.001041483s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/mark/.config/alacritty/alacritty.toml\"\r\n[0.001344690s] [INFO ] [alacritty] winit event: NewEvents(Init)\r\n[0.001359709s] [INFO ] [alacritty] winit event: Resumed\r\n[0.013034949s] [INFO ] [alacritty] Using EGL 1.5\r\n[0.013077610s] [DEBUG] [alacritty] Picked GL Config:\r\n                                     buffer_type: Some(Rgb { r_size: 8, g_size: 8, b_size: 8 })\r\n                                     alpha_size: 8\r\n                                     num_samples: 0\r\n                                     hardware_accelerated: true\r\n                                     supports_transparency: Some(true)\r\n                                     co\n...[Description Truncated]...\n\n[Context/Logs]:\n- We don't have such a concept.\r\n\r\n\r\nAnd how it's our issue? vim asked us to paste status whether the mode is active or not, we pasted status? Like it clearly got what it asked for and bugged during handling.\r\n\r\n\r\nThe only supported term is `alacritty`.\n- Ah, I just can't read.\n- #7398 fixes the problem for me. Thanks very much for your help, and thanks for all your work on Alacritty!"}
{"project_id": "Alacritty", "bug_id": "281", "source_type": "github", "llm_input_text": "[Title]: Messages are not updated on sway if the dialog has the same size as the previous one\n[Symptom]:\n### System\r\nOS: ArchLinux\r\nVersion: 0.12.2, but also happens in the current master branch, and at least since 0.10.0 \r\nDE: Sway\r\n\r\n### Steps to reproduce\r\n\r\n1. Edit the alacritty config, such that two messages with same length are emitted on startup:\r\n   On the current master branch this can be done, by adding attributes x and y to window section top generate 2 warnings.\r\n   On version 0.12.2, the window padding x and y value can be set to `a` to generate 2 errors.\r\n2. Click on the cross to close the first message.\r\n\r\n### Expected result\r\nThe second message is now shown.\r\nClicking again on the cross, closes the dialog.\r\n\r\n### Actual result\r\nThe first message is still shown.\r\nClicking again on the cross, closes the dialog, so the first click was processed.\r\n\r\n### First analysis\r\nIf messages result in dialog boxes of different size, the size and the text is updated. Only if the dialog box size is unchanged, the text isn't changed either. I couldn't reproduce the error on GNOME/Wayland or KDE/X11. If more the 2 messages with same dialog size are shown, the text of the first messages stays until the dialog gets closed the correct number of times. Some other actions trigger a text update (f.e. focusing another window, pressing enter) while others don't (f.e. pressing a non-enter key). If the first message is a warning and the second message an error, the color isn't updated either.\r\n\r\n### Debugging results\r\nClicks correctly result in a call to `Display::draw`, which sees the new message. However, there seems to be no damage rect for the dialog box, which might be the reason, why the box text and color isn't updated. If `Display::swap_buffers` uses  `surface.swap_buffers` instead of `surface.swap_buffers_with_damage`, the error does not occur. However, I am a bit confused, whether this is really the underlying cause, because there isn't a damage rect on GNOME or KDE either, and the error doesn't occur there.\n\n[Context/Logs]:\n- Could you test with the `alacritty -o debug.highlight_damage=true`? It should draw the purple rectangles over the things being damaged.\n- It doesn't draw a purple rect over the dialog box, except for the last message, when the dialog box is closed, then the purple rect extend over the message box, that is no longer shown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- It does work correctly, yes.\n- Adding\r\n```rust\r\nself.damage_rects.push(Rect { x: 0, y: 0, width: size_info.width().ceil() as i32, height: (size_info.height() - y).ceil() as i32 });\r\n```\r\n\r\nafter\r\n\r\n[URL]\r\n\r\nfixes the issue."}
{"project_id": "Alacritty", "bug_id": "282", "source_type": "github", "llm_input_text": "[Title]: Key bindings broken after migration\n[Symptom]:\nBefore the migration I was using key_bindings to remap `shift+enter` to `ctrl+J`\r\nI had this in my yml:\r\n```\r\nkey_bindings:\r\n  - { key: Return,   mods: Shift,    chars: \"\\x0a\" }\r\n```\r\nAfter migration, I have ended up with:\r\n\r\n```\r\n[[keyboard.bindings]]\r\nchars = \"\"\"\r\n\r\n\"\"\"\r\nkey = \"Return\"\r\nmods = \"Shift\"\r\n```\r\nWhich obviously would not work. \r\nIf I change it to:\r\n```\r\n[[keyboard.bindings]]\r\nchars = \"\\x0a\"\r\nkey = \"Return\"\r\nmods = \"Shift\"\r\n```\r\nI get this error:\r\n[Image: image]\r\n\r\n\r\nHow to properly migrate my binding?\r\n\r\n### System\r\n\r\nOS: Linux arch 6.6.8-arch1-1\r\nVersion: alacritty 0.13.0 (78fa4d6f)\r\nLinux/BSD: X11, dwm\r\n\r\n### Logs\r\n\r\nFont/Terminal size:   `alacritty -vv` output \r\n \r\n\r\n```\nCreated log file at \"/tmp/Alacritty-32495.log\"\r\n[0.000005308s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000058667s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000067257s] [INFO ] [alacritty] Running on X11\r\n[0.000490288s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[0.175478070s] [DEBUG] [alacritty] [gl_render] Buffer detailed info: Buffer object 3 (bound to GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (0), GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING_ARB (1), and GL_ARRAY_BUFFER_ARB, usage hint is GL_STATIC_DRAW) will use VIDEO memory as the source for buffer object operations.\r\n[1.450036337s] [INFO ] [alacritty] Goodbye\n```\r\n\r\n \r\n  \r\n\r\nKeyboard and bindings:   `alacritty --print-events` output \r\n \r\n\r\n```\nCreated log file at \"/tmp/Alacritty-33007.log\"\r\n[0.000005098s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000055734s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000064254s] [INFO ] [alacritty] Running on X11\r\n[0.000398657s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[2.856819403s] [INFO ] [alacritty] winit event: LoopExiting\r\n[2.857657854s] [INFO ] [alacritty] Goodbye\n```\n\n[Context/Logs]:\n- That did not work like ctrl-J\n- Did you actually try it? The migrated config is correct.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Ignore that. Even if I ignore warning, v13 does not work with yml\n- Ok feel free to close it if you do not want to fix. I have moved on to `\\u000b`(ctrl+K) which is ok for me (workaround to use shift+enter for the apps that do not support that like fzf)"}
{"project_id": "Alacritty", "bug_id": "283", "source_type": "github", "llm_input_text": "[Title]: Powerline font cut off on 0.13\n[Symptom]:\nAfter updating to 0.13, powerline icons have started rendering incorrectly. On 0.12 it used to render as expected, but now it's cutting off the \"points\" of the powerline triangles. Here's a screenshot of what it looks like:\r\n\r\n[Image: new]\r\n\r\nAnd here's what it used to look like before (downgraded to 0.12 for the screenshot):\r\n\r\n[Image: old]\r\n\r\nI use the IosevkaTerm font with NerdFont patches (https://www.nerdfonts.com/font-downloads)\r\n\r\nHere's my config, after migrating to toml:\r\n\r\n```\ntoml\r\nimport = [\"/home/pavle/.config/alacritty/gruvbox.toml\"]\r\n\r\n[font]\r\nsize = 8\r\n... [Log Snipped] ...\ngeneral = \"Alacritty\"\r\ninstance = \"Alacritty\"\n```\r\n\r\ngruvbox.toml just defines some colors and I get the same behaviour with and without that file included.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.13.0 (78fa4d6f)\r\nLinux: X11, i3, no compositor\r\n\r\n### Logs\r\n\r\nCrashes: N/A\r\nFont/Terminal size: `alacritty -vv`\r\n\r\n```\n[0.000004989s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000079378s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000091781s] [INFO ] [alacritty] Running on X11\r\n[0.000748226s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/pavle/.config/alacritty/alacritty.toml\"\r\n... [Log Snipped] ...\n[0.223415199s] [INFO ] [alacritty] Padding: 0 x 0\r\n[0.223435497s] [INFO ] [alacritty] Width: 2256, Height: 1416\n```\r\n\r\nKeyboard and bindings: `alacritty --print-events`\r\n\r\n```\n[0.000004959s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000062587s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000072315s] [INFO ] [alacritty] Running on X11\r\n[0.000711648s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/pavle/.config/alacritty/alacritty.toml\"\r\n... [Log Snipped] ...\n[0.471335900s] [INFO ] [alacritty] winit event: LoopExiting\r\n[0.472613905s] [INFO ] [alacritty] Goodbye\n```\n\n[Context/Logs]:\n- Yeah, narrow fonts will probably break like that because they can't create a `45` angle which was intended for powerline glyphs.\n- You can disable builtin box drawing or use `Extended` variant of iosevka for now.\n- ... [Middle Discussions Snipped for Brevity] ...\n- yeah, but it doesn't really matter as long as it's not massively cut? Like there's no definition that the angle should be exactly 45, like it still meets at the center of the cell (at least you can patch the font to start correctly within cell boundarios and it'll have the same 60 angle).\n- It appears that this is not entirely fixed:\r\n\r\n[URL]\r\n\r\nThis is Iosevka Term. Note how for some of the first small sizes (starting from 10.5) it still uses the built-in drawing, even though one pixel or so is cut off."}
{"project_id": "Alacritty", "bug_id": "284", "source_type": "github", "llm_input_text": "[Title]: Font is blurry after config migration to toml\n[Symptom]:\nAfter migration to toml using `alacritty migrate`, the fonts on my terminal look terrible. They were fine before upgrading to the latest version and being forced to migrate. Here's how it looks:\r\n[Image: image]\r\nAlso, trying to select text causes the wrong text to be selected. Again, it worked perfectly in the previous version.\r\n\r\nHere's my current config file:\r\n```\nlive_config_reload = true\r\n\r\n[colors.bright]\r\nblack = \" \"\r\nblue = \" \"\r\n... [Log Snipped] ...\nx = 0\r\ny = 0\n```\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.13.0 (78fa4d6f)\r\nLinux/BSD: Wayland, KDE Plasma\r\n\r\n### Logs\r\n\r\nFont/Terminal size:\r\n```\n[0.000003837s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000040456s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000047091s] [INFO ] [alacritty] Running on Wayland\r\n[0.000674283s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/sintan/.config/alacritty/alacritty.toml\"\r\n... [Log Snipped] ...\n[0.123691381s] [INFO ] [alacritty] Width: 800, Height: 600\r\n[0.124765969s] [DEBUG] [alacritty_terminal] Ignoring unknown mode 7727 in set_private_mode\n```\r\nKeyboard and bindings: Trying to do this fills the terminal with\r\n```\r\n[0.327608587s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(93838385488912)), event: KeyboardInput { device_id: DeviceId(Wayland(DeviceId)), event: KeyEvent { physical_key: Code(KeyC), logical_key: Character(\"c\"), text: Some(\"c\"), location: Standard, state: Pressed, repeat: false, platform_specific: KeyEventExtra { key_without_modifiers: Character(\"c\"), text_with_all_modifiers: Some(\"\\u{3}\") } }, is_synthetic: false } }\r\n[0.327632480s] [INFO ] [alacritty] winit event: AboutToWait\r\n[0.327709334s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 1127, tv_nsec: 111261953 }, requested_resume: None })\r\n[0.327724707s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(93838385488912))), payload: Termina\n...[Description Truncated]...\n\n[Context/Logs]:\n- Could you post `WAYLAND_DEBUG=1 alacritty --print-events` log?\n- is it blurry regardless of font size or the size is just small? Maybe making it larger improves things.\n- ... [Middle Discussions Snipped for Brevity] ...\n- No It don't when I type something, even after sending a command.\r\n\r\nEdit: Running with `alacritty --config /dev/null` don't make the bug occur. So it's all about the config I think..\r\n\r\nEDIT : FOUND ! I don't know why for now but removing the entire `[window.dimensions]` section from the config file alacritty.toml worked. (Mine was set to columns = 100 and lines = 30)\n- yeah, I'm like already half through the fix since log was more than enough."}
{"project_id": "Alacritty", "bug_id": "285", "source_type": "github", "llm_input_text": "[Title]: Slow startup after upgrading to 0.13.0.\n[Symptom]:\nAfter upgrading to version 0.13.0 this morning and converting the .yml configuration to .toml, my terminal experiences a delay of about 3 seconds during the initial startup. \r\nAfter the first instance is up, the startup time for subsequent instances is super fast. However, after some minutes, the newly spawned terminal is delayed again, even though there is already a running instance.\r\n\r\n```\n$ for i in $(seq 0 10); do time alacritty -e echo; done 2>&1 | grep real\r\nreal\t0m2.529s\r\nreal\t0m0.166s\r\nreal\t0m0.166s\r\nreal\t0m0.177s\r\n... [Log Snipped] ...\nreal\t0m0.171s\r\nreal\t0m0.189s\n```\r\n\r\nHere is the output of strace -T alacritty -e false, where the poll() operation takes 2.3 seconds:\r\n[Link: log.txt]\r\n\r\n```\r\n...\r\npoll([{fd=3, events=POLLIN|POLLOUT}], 1, -1) = 1 ([{fd=3, revents=POLLOUT}])  \r\nwritev(3, [{iov_base=\"\\214\\10\\2\\0[\\5\\0\\0\", iov_len=8}], 1) = 8  \r\npoll([{fd=3, events=POLLIN}], 1, -1)    = 1 ([{fd=3, revents=POLLIN}])  \r\nrecvmsg(3, {msg_name=NULL, msg_namelen=0, msg_iov=[{iov_base=\"\\1\\0\\341\\0\\255\\0\\0\\0!b\\0\\0!b\\0\\0\\t\\0\\2\\0\\20\\0\\210\\0\\0\\0\\0\\0\\0\\0\\0\\0\"..., iov_len=4096}], msg_iovlen=1, msg_controllen=0, msg_flags=0}, 0) = 836  \r\n...\r\n```\r\n\r\n### System\r\n\r\nOS: Arch Linux x86_64 6.6.8-arch1-1\r\nVersion: alacritty 0.13.0 (78fa4d6f)\r\nLinux: X11, AwesomeWM, no compositor\r\nCPU: AMD Ryzen 5 5600H with Radeon Graphics (12) @ 4.280GHz\r\nGPU: AMD ATI Radeon RX 5500/5500M / Pro 5500M\r\nGPU: AMD ATI Radeon Vega Series / Radeon Vega Mobile Series\r\n\r\n### Config\r\n\r\n```\n`toml\r\n[font]\r\nsize = 8.0\r\n\r\n[font.bold]\r\n... [Log Snipped] ...\nx = 5\r\ny = 0\n````\r\n\r\n### Logs\r\n\r\nCrashes: No\r\nFont/Terminal size: `alacritty -vv`\r\n```\n[0.000004428s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000046527s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000056666s] [INFO ] [alacritty] Running on X11\r\n[0.000302536s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/meo/.config/alacritty/alacritty.toml\"\r\n... [Log Snipped] ...\n[2.487822830s] [INFO ] [alacritty\n...[Description Truncated]...\n\n[Context/Logs]:\n- Try 0.12.3 again. This is almost certainly a driver initialization issue.\n- Hm, it actually looks not like a driver init issue, since the GL code is not what is being executed in the relevant logs, since between the picked config and `Window scale factor` there's **no** GL codes at all.\r\n\r\nIt would be nice to know what exactly blocks for that long though... Probably window creation itself just got slower by that amount.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I am experiencing noticeably slow startup after this upgrade too.\n- @hitori1403 Can you run `xtrace` on the Alacritty executable and upload the full logs to Gist? It would give us a better picture of what's happening."}
{"project_id": "Alacritty", "bug_id": "286", "source_type": "github", "llm_input_text": "[Title]: Crashes on Walyand with scaling: `Buffer size (...) is not divisible by scale (2)`\n[Symptom]:\n### System\r\n\r\nOS: Linux\r\nVersion: master (starting from 659550e)\r\nLinux/BSD: Wayland (Sway 1.8.1)\r\n\r\n### Logs\r\n\r\n```\r\nwl_surface@32: error 2: Buffer size (836x439) is not divisible by scale (2)\r\nProtocol error 2 on object wl_surface@32: \r\nProtocol error 2 on object wl_surface@32: \r\nProtocol error 2 on object wl_surface@32: \r\n \r\nProtocol error 2 on object wl_surface@32: \r\nError: ExitFailure(1)\r\n```\r\n[Link: `WAYLAND_DEBUG=client alacritty --print-events`]\r\n\r\nThis seems to be introduced with update to winit 0.29.8, [URL] is the likeliest suspect.\n\n[Context/Logs]:\n- Could you post `WAYLAND_DEBUG=1 alacritty --print-events` log?\n- Already included in the report.\n- Ah, sorry, haven't noticed that it was _attached_.\r\n\r\nThis should fix it\r\n\r\n```\ndiff\r\ndiff --git a/alacritty/Cargo.toml b/alacritty/Cargo.toml\r\nindex d0d6ab35..40c678fd 100644\r\n--- a/alacritty/Cargo.toml\r\n+++ b/alacritty/Cargo.toml\r\n... [Log Snipped] ...\n [build-dependencies]\r\n gl_generator = \"0.14.0\"\n```\n- :+1:, can confirm that it works with the winit patch."}
{"project_id": "Alacritty", "bug_id": "287", "source_type": "github", "llm_input_text": "[Title]: Alacritty 13.x `-o` option improperly merges config settings\n[Symptom]:\nWhen using -o to override config options, alacritty 13 doesn't properly merge the new values into the existing config. This is a regression in 13; it worked properly in 12.x.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.13.1\r\nLinux/BSD: X11\r\n\r\n### Logs\r\n\r\nMy config contains\r\n```\r\n[env]\r\nWINIT_X11_SCALE_FACTOR = \"randr\"\r\n```\r\n\r\nBut when I run `alacritty -o env.TERM=\\\"xterm-256color\\\"` with alacritty 13.x, `WINIT_X11_SCALE_FACTOR` is not set from the config.\r\n\r\n### Steps to reproduce:\r\n```\r\n# If running from an existing alacritty session, unset it so it isn't inherited\r\nunset WINIT_X11_SCALE_FACTOR\r\nalacritty -o env.TERM=\\\"xterm-256color\\\"\r\n```\r\nthen run `echo $WINIT_X11_SCALE_FACTOR` in the new terminal and see an empty string.\r\n\r\nIf running `alacritty -o env.TERM=xterm-256color` with alacritty 12.x, it works as expected and both environment variables are properly set.\r\n\r\n#### Working example:\r\n```\r\n# If running from an existing alacritty session, unset it so it isn't inherited\r\nunset WINIT_X11_SCALE_FACTOR\r\nalacritty\r\n```\r\nthen run `echo $WINIT_X11_SCALE_FACTOR` in the new terminal and see `randr`, read fresh from the config.\n\n[Context/Logs]:\n- I'm not entirely sure how this worked before, but this should fix it: [URL]"}
{"project_id": "Alacritty", "bug_id": "288", "source_type": "github", "llm_input_text": "[Title]: Alacritty freezes/stops responding when on a secondary monitor\n[Symptom]:\n### Expected Behavior\r\nWhen moving a terminal window from my primary monitor to my secondary monitor or when opening a terminal window on my secondary monitor it should react normally.\r\n\r\n### Observed Behavior\r\nAs soon as the terminal window is on the secondary monitor, it freezes and does not accept any further input. The \"X\" on the decoration also does nothing, until the window manager detects that the application is not responding and offers to kill it.\r\n\r\nA downgrade to `alacritty 0.12.3` prevents this issue.\r\n\r\nIf you want me to run any short experiments, let me know. But this is my work account so I'll only see messages during the week.\r\n\r\n### System\r\n\r\n* OS: Linux Debian Bookworm\r\n* Version: Version 0.13.1 (fe2a3c56)\r\n  *  Build from source with rust 1.75, but the version from cargo install has the same issue\r\n  * Both Debug and Release builds are effected\r\n  * Version 0.13.0 (also build from source) exibits the same behavior\r\n* Linux/BSD: X11/xfce\r\n\r\n### Logs\r\n\r\n#### Version 0.13.1 Debug Build\r\n```\nzsh \u276f ./target/debug/alacritty --print-events -vvv\r\nCreated log file at \"/tmp/Alacritty-47507.log\"\r\n[0.000015903s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000165786s] [INFO ] [alacritty] Version 0.13.1 (fe2a3c56)\r\n[0.000193877s] [INFO ] [alacritty] Running on X11\r\n... [Log Snipped] ...\n[0.211124609s] [TRACE] [alacritty_terminal] Setting private mode: BracketedPaste\r\n^C\n```\r\n\r\n#### Version 0.13.0 Debug Build\r\n```\nzsh \u276f ./target/debug/alacritty --print-events -vvv\r\nCreated log file at \"/tmp/Alacritty-52223.log\"\r\n[0.000014655s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000152910s] [INFO ] [alacritty] Version 0.13.0 (78fa4d6f)\r\n[0.000175741s] [INFO ] [alacritty] Running on X11\r\n... [Log Snipped] ...\n[0.399000305s] [TRACE] [alacritty_terminal] Setting private mode: BracketedPaste\r\n^C\n```\r\n\r\n#### Version 0.13.1 Release Build\r\n```\nzsh \u276f ./target/debug/alacritty --print-events -vvv\r\nCreated log file at \"/tmp/Alacritty-56068.log\"\r\n[0.000029791s] [INFO ] [alacritty]\n...[Description Truncated]...\n\n[Context/Logs]:\n- @Marco-Kaulea What is the output of the `xrandr` command?\n- @notgull Here you go.\r\n```\nzsh \u276f xrandr\r\nScreen 0: minimum 320 x 200, current 4480 x 1440, maximum 16384 x 16384\r\neDP-1 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 309mm x 173mm\r\n   1920x1080     60.00*+  59.97    59.96    59.93\r\n   1680x1050     59.95    59.88\r\n... [Log Snipped] ...\nDP-2 disconnected (normal left inverted right x axis y axis)\r\nHDMI-2 disconnected (normal left inverted right x axis y axis)\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- @przepompownia you're issue is likely that [URL] . In general you should open a separate thread of it's not related to gnome suspension stuff, which you can verify with `alacritty --print-events | grep Occluded`, once you get `Occluded(true)` alacritty will stop rendering until `Occluded(false)`.\n- @kchibisov  let me observe such logs. \r\n\r\nIndeed, I have `startup_mode = 'Fullscreen'` in my config. Another thing: I never got freeze in Neovim - unlike in bash or Midnight Commander."}
{"project_id": "Alacritty", "bug_id": "289", "source_type": "github", "llm_input_text": "[Title]: Compose keys bug: intermediate keystrokes/characters are typed\n[Symptom]:\nOn version 0.13.1, when I type ` 'a`, instead of just getting an `\u00e1`, I get `'\u00e1`.\r\n\r\nI've recently updated a bunch of system dependencies and alacritty to 0.13.1 using `cargo install` (I don't know which version I was using before). It might be a problem with some other package on my system, but compose keys work fine in other applications (like firefox, libreoffice, and termit).\r\n\r\n### System\r\n\r\nOS: Linux (Debian GNU/Linux)\r\nVersion: alacritty 0.13.1\r\nLinux/BSD: Wayland and Sway\r\n\r\n### Logs\r\n\r\nKeyboard and bindings: [Link: `alacritty --print-events`]\n\n[Context/Logs]:\n- Install with `--locked`. But yeah, the bug is present upstream.\n- Thank you for the quick reply and fix. I can confirm that this is fixed in 0.13.2."}
{"project_id": "Alacritty", "bug_id": "290", "source_type": "github", "llm_input_text": "[Title]: hints.enabled action=\"Select\" mouse.enabled=true results in selection of the whole line (instead of just the hint)\n[Symptom]:\nUsing the following configuration snippet:\r\n```\r\n#Select hint text\r\n[[hints.enabled]]\r\naction          = \"Select\"\r\nhyperlinks      = true\r\nmouse.enabled   = true\r\n#mouse.mods      = \"Alt\"\r\n```\r\nThe Select action select the whole line containing the hint, not just the hint text. \r\nFor example:\r\nIf I do something like `ls -l --hyperlink=auto` only the files get underlined as I hover over them, but when clicked the whole line is selected.\r\n\r\nThis doesn't change even if I uncoment the `mouse.mods` line.\r\n\r\nIs this the intended behavior?\r\n\r\nThe man 5 alacritty states:\r\n```\r\nSelect\r\n                   Select the hint's text.\r\n```\r\nSo I would expect only the hint's text to be selected.\r\n\r\nIf it's not a bug / the current behavior is already established, would you consider something like \"SelectHintOnly\" action?\r\n\r\n\r\n### System\r\n\r\nOS: Linux (Fedora 38)\r\nVersion: alacritty 0.13.1\r\nLinux/BSD: X11, KDE5 / KWin\n\n[Context/Logs]:\n- Seems like this issue is specifically due to the mouse being used to select the hint. It works just fine with the keyboard. It also works just fine for regex hints.\n- Still would be nice if it could be fixed. I'm trying to optimize some workflows and being able to select/copy stuff like filenames with a single click (even when they contain spaces etc.) would be really nice. Maybe a `CopyText` action that would copy the displayed hint text instead of the hyperlink could be even nicer.  Also the docs could probably use a little bit of clarification: now the description for `Copy` action states: `Copy the hint's text to the clipboard.` which in case of a hyperlink is a little misleading/ambiguous. \r\nAlso, as I understand, currently the `mouse.mods`  option serves two distinct purposes and any of the `mouse.mods` options need to be satisfied for the hints to be highlighted (underlined) on mouse-over. So maybe a special `NoOp` action could be introduced for people that want the mouse-over highlighting always-on but require a modifier to invoke any of the actions / commands (yes I know I could introduce a no-op command as a workaround).\n- ... [Middle Discussions Snipped for Brevity] ...\n- I would agree in case of regex hints (where I know/control how I set them up), but in case of hyperlinks some distinction could be really useful. If I use a new/unfamiliar program that uses hyperlinks, there should  be some way to discover they are there (different styling / mouse cursor / whatever). Think of it as a web page where all the links are styled just as normal text, no cursor change on hover and you need a special keyboard combo to click-though them.\r\n\r\nOn the other hand, leaving the default no-modifier hyperlink activation on could be a security nightmare (a random click into the terminal could get you owned).\r\n\r\nIt's not a big deal, I have the \"Select\" action set up right now for no-mods, and if no action is required one could do something like a `/bin/true` command instead to get just the highlighting. I was just considering all the uses cases.\r\n\r\nHints/hyperlinks are a very nice feature, but one should take care to set them up properly.\n- It is up to the application to make that clear to you. If they want to underline their hyperlinks, they're easily capable of doing so. If they don't, they don't want them to be highlighted."}
{"project_id": "Alacritty", "bug_id": "291", "source_type": "github", "llm_input_text": "[Title]: Setting window position from CLI works only for one axis\n[Symptom]:\nUpgrading from alacritty 0.12 I found myself unable to set *both* `x` and `y` positions from CLI, but I can set either *one*. Examples:\r\n\r\n```\r\n# This command applies only `x=444` option and ignores `y=333` option:\r\nalacritty -o window.position.y=333 window.position.x=444\r\n\r\n# This command applies only `y=333` option and ignores `x=444` option:\r\nalacritty -o window.position.x=444 window.position.y=333\r\n```\r\nIt feels like a latter position drops the former one.\r\n\r\nInterestingly, if I set both `x` and `y` in the alacritty.toml and run alacritty with neither `x` nor `y` specified from the CLI, then both positions get applied correctly.\r\n\r\n[URL] is possibly related.\r\n\r\n### System\r\n\r\nOS: Debian\r\nVersion: alacritty 0.13.0\r\nLinux: X11, BSPWM\n\n[Context/Logs]:\n- Can you try `\"window.position={ x = 333, y = 444 }\"`?\n- Since position is a `Delta` it's deserialized directly and doesn't benefit from our abstractions which allow overriding. Not a huge deal, but might be nice to look into a workaround. Since it's defined in Alacritty it should be fixable without too many issues.\n- ... [Middle Discussions Snipped for Brevity] ...\n- That would probably work as a backup. But even incrementally these shouldn't override each other. Otherwise we might not support overriding just one when they're defined in the config.\n- I mean, union is what it's all about? because same options later should purge previous, but different will just merge."}
{"project_id": "Alacritty", "bug_id": "292", "source_type": "github", "llm_input_text": "[Title]: alacritty msg create-window leaves a unix fifo behind\n[Symptom]:\nI like my terminals popping up fast, so I use this script to start them:\r\n```\r\n/home/greg/.cargo/bin/alacritty msg create-window ||\r\nexec /home/greg/.cargo/bin/alacritty -o 'font.normal.family: JetBrainsMono' -o 'draw_bold_text_with_bright_colors: true'\r\n```\r\n\r\nCuriously, starting a new window and closing it reliably leaves an extra fd behind.\r\n\r\nThe way I monitor it is I lookup the `alacritty` pid and then run this loop:\r\n```\n% while sleep 1; do lsof -p 17550 | grep -v mem | wc -l; done\r\n31\r\n31\r\n31\r\n... launched then closed a window captured logs of FDs attached\r\n... [Log Snipped] ...\n35\r\n35\n```\r\n\r\nThe delta between the initial set of FDs and after the second window is closed is this single FIFO.\r\n% diff /tmp/{1,3}.txt\r\n28a29\r\n\r\nStarting more windows adds more such FIFOs left behind.\r\n\r\n### System\r\n\r\nOS: Linux 6.1.0-21-amd64 (also OpenBSD)\r\nVersion: alacritty 0.13.2\r\nLinux/BSD: X11\r\n\r\n### Logs\r\n\r\nFDs right after the first process starts [Link: 1.txt]\r\nFDs when the second window is opened [Link: 2.txt]\r\nFDs after the second window is closed [Link: 3.txt]\n\n[Context/Logs]:\n- Very odd, I can confirm this behavior, but even explicitly shutting down the socket streams does not seem to fix it.\r\n\r\nThis does not fix it:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty/src/ipc.rs b/alacritty/src/ipc.rs\r\nindex 1cb7a1c8..82cbf698 100644\r\n--- a/alacritty/src/ipc.rs\r\n+++ b/alacritty/src/ipc.rs\r\n... [Log Snipped] ...\n         }\r\n     });\n```\r\n\r\nThis does:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty/src/ipc.rs b/alacritty/src/ipc.rs\r\nindex 1cb7a1c8..0d2f7870 100644\r\n--- a/alacritty/src/ipc.rs\r\n+++ b/alacritty/src/ipc.rs\r\n... [Log Snipped] ...\n         }\r\n     });\n```\r\n\r\nSo I'd assume the issue is somewhere in-between. Don't have time to look more into it myself but I figure it shouldn't be that hart to narrow down further.\n- [URL] fixes the issue I was able to reproduce. Please let me know if you can still see any leaks after this patch."}
{"project_id": "Alacritty", "bug_id": "293", "source_type": "github", "llm_input_text": "[Title]: No transparency after last update\n[Symptom]:\n### System\r\n\r\nOS:macOS\r\nVersion: alacritty 0.14.0-dev (7077a5f4)\r\n\r\n### Problem\r\nOpacity stopped working. Alacritty's background is black when opacity=1 and becomes grey with opacity=0 without turning transparent\n\n[Context/Logs]:\n- Have you confirmed downgrading to   fixes the issue?\n- Tested all versions and then messed up and gave you wrong info, sorry!\r\nIt stopped working in 48c088a. Last working commit in a77f77c.\n- ... [Middle Discussions Snipped for Brevity] ...\n- [URL] should fix this.\n- I changed my mind, we're going to go through with [URL] and it will likely be included in Winit v0.30.2."}
{"project_id": "Alacritty", "bug_id": "294", "source_type": "github", "llm_input_text": "[Title]: Font size with two screens and 0.13.x\n[Symptom]:\n### System\r\n\r\nOS: Linux Arch \r\nVersion: Install this one [URL]\r\nLinux/BSD: X11/Wayland & I3\r\n\r\nI try the beta version of alacritty according to the AUR package. I end up with a \u201cstrange\u201d bug, I got two screen, on the \u201cmain\u201d screen the font are huge (around 36 times pressing ctrl+- to get the same size as the other) but on the second screen the font size are smaller (than alacritty 0.12.3) but still almost normal (one or two time with ctrl+ + and it's OK). \r\n\r\nHere the ouput on main screen big font : \r\n ```\nalacritty -vv\r\nCreated log file at \"/tmp/Alacritty-257882.log\"\r\n[0.000000930s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000052826s] [INFO ] [alacritty] Version 0.14.0-dev (3d7d81c8)\r\n[0.000060252s] [INFO ] [alacritty] Running on X11\r\n... [Log Snipped] ...\n[0.264644598s] [INFO ] [alacritty] Width: 3832, Height: 2080\r\n[0.281043634s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Solid, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\n```\r\n\r\nand in the second screen : \r\n \r\n```\nCreated log file at \"/tmp/Alacritty-257692.log\"\r\n[0.000001169s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000043673s] [INFO ] [alacritty] Version 0.14.0-dev (3d7d81c8)\r\n[0.000049677s] [INFO ] [alacritty] Running on X11\r\n[0.000221867s] [INFO ] [alacritty] Configuration files loaded from:\r\n... [Log Snipped] ...\n[0.361569751s] [INFO ] [alacritty] Width: 3832, Height: 2080\r\n[0.417722246s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Solid, load_flags: TARGET_LIGHT, render_mode: \"Lcd\", lcd_filter: 1 }\n```\r\n\r\nI can do any test to help *if* it's in the AUR packages (I'm not really good to build packages).\n\n[Context/Logs]:\n- How does this compare to Alacritty 0.12.3? Could you share screenshots comparing the two?\n- So here a screenshot of both screen \r\n\r\nOn the right is the second screen, on the left is the main screen. On each screen on the left is alacritty 0.12.3 and on the right alacritty-git-0.13.x\r\n\r\n[Image: 2023-12-21-1703141438_screenshot_7680x2160]\r\n\r\nThe configuration of alacritty-git are created only with a alacritty migrate.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Well....I will trust you on that (I've no clue what you just write ;-) ) but soon the AUR package are updated I test and tell you the result.\n- Just let you known with the last version from github.com the bug indeed disappear. \r\n\r\nBravo"}
{"project_id": "Alacritty", "bug_id": "295", "source_type": "github", "llm_input_text": "[Title]: Certain modifiers fail in `kakoune`\n[Symptom]:\nI found at least two type of modifiers that stopped working on `0.13` that worked before on `0.12`.\r\n\r\n-  `ctrl + [` does not trigger `ESC`-equivalent behaviour in `kakoune`.\r\n    - Interestingly enough the same action continues to work in `vim`?\r\n- `alt + shift` combinations fail to register, so I checked eg. `alt + shift + !` (append command output), `alt + K` (keep not matching), `alt + N` (extend reverse search).\r\n\r\nI assume these issues have a wider impact than just `kakoune` but I found it the easiest to reproduce it there. It possibly might be a duplicate considering a wave of keyboard input related issues lately but none so far seems to match exactly that. Sorry in advance.\r\n\r\n### System\r\n\r\nOS: Arch Linux\r\nVersion: alacritty 0.13.0 (78fa4d6f)\r\nLinux/BSD: Wayland, sway\r\n\r\n### Logs\r\n\r\nThis should be quite trivial to reproduce, can provide logs if necessary though.\r\n\r\n\r\nThanks a lot for looking into it. Fantastic project and amazing work, lots of love <3\n\n[Context/Logs]:\n- @kchibisov Sounds like keyboard protocol stuff? This seems intentional on kakoune's end.\n- I think it's due to kakoune really wanting associated text, I'll try to write a patch.\n- ... [Middle Discussions Snipped for Brevity] ...\n- `ctrl + [` is just escape, however kitty protocol tries to _solve_ this issue and make it distinguishable from `ESC`.\r\n\r\nAnd just thinking about it you can't really solve it with alacritty binding...\n- @kchibisov \r\nInitially I interpreted your comment as you keep working on getting the `^[` to work but considering that you closed the issue I assume that on `alacritty` part everything works as intended? Because PR merged into the master does not make `^[` trigger `ESC` action in `kakoune`. Sorry for the confusion."}
{"project_id": "Alacritty", "bug_id": "296", "source_type": "github", "llm_input_text": "[Title]: Not picking up decorations_theme_variant on startup on macOS\n[Symptom]:\nAlacritty is not picking up `decorations_theme_variant = \"Dark\"` on startup on macOS.\r\nI have to do `touch ~/.config/alacritty/alacritty.toml` to get Dark appearance to take effect.\r\n\r\nStartup:\r\n<img width=\"842\" alt=\"Screenshot 2024-06-16 at 1 14 44\u202fPM\" src=\"[URL]\r\n\r\nAfter `touch ~/.config/alacritty/alacritty.toml`:\r\n<img width=\"842\" alt=\"Screenshot 2024-06-16 at 1 14 54\u202fPM\" src=\"[URL]\r\n\r\n### System\r\n\r\nOS: macOS Sonoma 14.5 (23F79)\r\nVersion: alacritty 0.14.0-dev (0d4ab7bc)\n\n[Context/Logs]:\n- @madsmtm Are you aware of any issues like this? We're using `with_theme`, seems like that might have issues?\r\n\r\n@sfsam If you're comfortable changing a couple lines of code, I'd be curious if this diff fixes it:\r\n\r\n```\ndiff\r\ndiff --git a/alacritty/src/display/window.rs b/alacritty/src/display/window.rs\r\nindex 09793fa0..341d0faa 100644\r\n--- a/alacritty/src/display/window.rs\r\n+++ b/alacritty/src/display/window.rs\r\n... [Log Snipped] ...\n         // Text cursor.\r\n         let current_mouse_cursor = CursorIcon::Text;\n```\n- It's winit issue because it never sets the theme during the window creation with macOS API, it just gets it and stores, but never sets actually.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I was wondering the same thing when I saw it\u2026 sadly GitHub doesn\u2019t understand dependency management of our app.\n- The problem is that I closed the issue by merging PR in winit, which is under completely different org, and it did so only because I'm owner in both repos. When I was not owner it was not doing so IIRC."}
{"project_id": "Alacritty", "bug_id": "297", "source_type": "github", "llm_input_text": "[Title]: underline url moves as more lines are added to terminal output\n[Symptom]:\nFor bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\n### System\r\n\r\nOS: Linux/BSD/macOS/Windows\r\nVersion: `alacritty --version` output\r\nLinux/BSD: X11/Wayland, DE or Compositor and WM\r\n\r\ni3, `Linux p14s 6.6.10-1-MANJARO #1 SMP PREEMPT_DYNAMIC Fri Jan  5 17:38:36 UTC 2024 x86_64 GNU/Linux`\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\nFont/Terminal size: `alacritty -vv` `alacritty 0.14.0-dev (f1853a03)`\r\nKeyboard and bindings: `alacritty --print-events`\r\n\r\n\r\n\r\n1) run this in your term:\r\n```\r\nwhile `sleep 0.5` ; do ; echo \"`date` [URL] ; done\r\n```\r\n2) move your cursor on top of one of the urls\r\n3) scroll upwards a bit\r\n=> as more lines are added, the highlight will \"move\" to keep the same distance relative to the freshest line, so its no longer the actual lined underneath the cursor :laughing:\n"}
{"project_id": "Alacritty", "bug_id": "298", "source_type": "github", "llm_input_text": "[Title]: Alacritty 0.13.2 (and 1cc08eb) leaks file descriptors\n[Symptom]:\nFirst of all, thank you for maintaining and developing Alacritty! I've encountered an issue where Alacritty leaks a number of file descriptors on my system (using `% alacritty`):\r\n```\r\n% ls -la /proc/self/fd\r\nlrwx------ 64 user 16 Oct 21:43 \uf016 0 -> /dev/pts/4\r\nlrwx------ 64 user 16 Oct 21:43 \uf016 1 -> /dev/pts/4\r\nlrwx------ 64 user 16 Oct 21:43 \uf016 2 -> /dev/pts/4\r\nlr-x------ 64 user 16 Oct 21:43 \uf016 15 -> pipe:[150277]\r\nl-wx------ 64 user 16 Oct 21:43 \uf016 16 -> pipe:[150277]\r\nlr-x------ 64 user 16 Oct 21:43 \uf016 19 -> pipe:[150280]\r\nl-wx------ 64 user 16 Oct 21:43 \uf016 20 -> pipe:[150280]\r\n```\r\n\r\nEvery new alacritty subprocess inherits more file descriptors (using `% alacritty -e alacritty`):\r\n```\n% ls -la /proc/self/fd\r\nlrwx------ 64 user 16 Oct 21:43 \uf016 0 -> /dev/pts/5\r\nlrwx------ 64 user 16 Oct 21:43 \uf016 1 -> /dev/pts/5\r\nlrwx------ 64 user 16 Oct 21:43 \uf016 2 -> /dev/pts/5\r\nlr-x------ 64 user 16 Oct 21:43 \uf016 15 -> pipe:[152262]\r\n... [Log Snipped] ...\nlr-x------ 64 user 16 Oct 21:43 \uf016 23 -> pipe:[167019]\r\nl-wx------ 64 user 16 Oct 21:43 \uf016 24 -> pipe:[167019]\n```\r\nThis also applies to the `SpawnNewInstance` action.\r\n\r\nThe expected behavior is that subprocesses do not inherit any additional file descriptors (tested using a different terminal emulator `% st`):\r\n```\r\n% ls -la /proc/self/fd\r\nlrwx------ 64 user 16 Oct 21:44 \uf016 0 -> /dev/pts/4\r\nlrwx------ 64 user 16 Oct 21:44 \uf016 1 -> /dev/pts/4\r\nlrwx------ 64 user 16 Oct 21:44 \uf016 2 -> /dev/pts/4\r\n```\r\n\r\nI'm sure this is reproducible not just on my system, but I'd be happy to provide more information if needed.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: `alacritty 0.13.2` (also occurs with commit `1cc08eb`)\r\nLinux/BSD: X11, picom and bspwm\r\n\r\n### Logs\r\n\r\nCrashes: N/A\r\nFont/Terminal size:\r\n```\n[0.010115162s] [INFO ] [alacritty] Using GLX 1.4\r\n[0.010219501s] [DEBUG] [alacritty] Picked GL Config:\r\n                                     buffer_type: Some(Rgb { r_size: 8, g_size: 8, b_size: 8 })\r\n                                     alpha_size: 8\r\n           \n...[Description Truncated]...\n\n[Context/Logs]:\n- Have you tested previous versions?\r\n\r\nI don't see how this would ever create issues, considering these file descriptors aren't leaked based on your observation (they just aren't cleared from child processes). But if it's something easy to fix it's probably not a bad idea to clean up.\n- Aren't those from mesa?\n- Not sure how it'll help, but on my system all of them got fixed with [URL]\r\n\r\nThough, I'm on Wayland and maybe something specific to x11 is getting leaked on your setup.\n- Ah, you have X11 specific stuff and maybe your mesa doesn't have 300 fds leaked yet.\r\n\r\n\r\nThat's your issue, which should be simple to fix\r\n\r\n\r\n[URL]"}
{"project_id": "Alacritty", "bug_id": "299", "source_type": "github", "llm_input_text": "[Title]: alacritty believes its active but it is not\n[Symptom]:\nI do not expect alacritty to show a full cursor like it has input focus, when in fact, it has not.\r\n\r\n[URL]\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.14.0-dev (6484ab84)\r\nLinux/BSD: Wayland, River 0.2.6\r\n\r\n### Logs\r\n```\n# alacritty --print-events\r\nCreated log file at \"/tmp/Alacritty-32285.log\"\r\n[0.000005643s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000125498s] [INFO ] [alacritty] Version 0.14.0-dev (6484ab84)\r\n[0.000147225s] [INFO ] [alacritty] Running on Wayland\r\n... [Log Snipped] ...\ndkkddk^C\u23ce                                                                                                                                                       [I] root@trump ~/Videos [SIGINT]\r\n#\n```\n\n[Context/Logs]:\n- Hm considering river is at least somewhat obscure compared to the bigger players out there, have you tested other compositors like Sway? It's not unlikely we're just not receiving the event from the compositor, which can be easily tested with `WAYLAND_DEBUG=client` (iirc the events are called enter/leave for focus change).\r\n\r\ncc @kchibisov since he might be aware of specific River/Winit bugs.\n- The issue is that there's no `Focused(false)` event initially and alacritty assumes that it's _focused_.\r\n\r\nI'd need to check whether winit guarantees now that default window is not focused, unless there's an event for that."}
{"project_id": "Alacritty", "bug_id": "300", "source_type": "github", "llm_input_text": "[Title]: Spurious char from previous line in double click selection\n[Symptom]:\nSince alacritty `0.13.0` selecting a word / line with a double click will also select the last character of the previous line if it is non-whitespace.\r\n\r\n\r\n[Image: image]\r\n(double click on `bbb` will select `X\\nbbb`)\r\n\r\n[Image: image]\r\n(double click on `bbb` will correctly select `bbb`)\r\n\r\nThis is especially annoying for shell configs that print the date / command duration at the end of the previous line and took me a while to figure out where these spurious char was coming from.\r\n\r\n### System\r\n\r\nOS: Arch Linux\r\nVersion: `0.13.0` and `0.13.1 (fe2a3c56)` (affected)\r\nLinux/BSD: sway (Wayland)\r\n\r\n### Logs\r\n\r\n```\n[0.000000647s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000027276s] [INFO ] [alacritty] Version 0.13.1 (fe2a3c56)\r\n[0.000030789s] [INFO ] [alacritty] Running on Wayland\r\n[0.000284642s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/user/.config/alacritty/alacritty.toml\"\r\n... [Log Snipped] ...\n[0.116671044s] [INFO ] [alacritty] Width: 4792, Height: 878\r\n[2.320997216s] [INFO ] [alacritty] Goodbye\n```\r\n(log of a different window)\n\n[Context/Logs]:\n- Seems like somehow   broke this."}
{"project_id": "Alacritty", "bug_id": "301", "source_type": "github", "llm_input_text": "[Title]: alacritty not honouring [semantic_escape_chars] setting\n[Symptom]:\nI hope I am not over-stepping any github/alacritty rules. My previous ticket has been closed, and I cannot find a way to reopen it (just joined yesterday).\r\n\r\nPlease feel free to delete this ticket if need be.\r\n\r\n`semantic_escape_chars = \",\u2502`|:\\\"' ()[]{}<>\\t\u2022-\u2014\uff0d\uff0e\"`\r\n\r\nHere's a video of what happens after [Ctrl] + [Shift] + [Space]\r\n\r\n[URL]\n\n[Context/Logs]:\n- You can just comment under existing issues, there's no need to create new ones.\r\n\r\nI've checked out the characters you mention specifically and it seems like fullwidth characters can't be used as semantic escape chars.\n- Thanks for clearing that up. Many thanks for an exceptional piece of software.\n- Should be fixed with #8190, feel free to test if that works for you.\n- Many thanks to you for taking the time to fix this. I'll wait for an official release from my distro, as I do not have the knowledge on how to get this patch working on my setup.\r\n\r\nWith humble gratitude.\r\nCheers"}
{"project_id": "Alacritty", "bug_id": "302", "source_type": "github", "llm_input_text": "[Title]: Semantic characters in Vi Mode and moving left\n[Symptom]:\n### System\r\n\r\nOS: Linux 6.11.9 (arch)\r\nVersion: alacritty 0.14.0 (22a44757)\r\nSway 1:1.10-1  \r\n\r\n```\n[0.000000942s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000051958s] [INFO ] [alacritty] Version 0.14.0 (22a44757)\r\n[0.000061095s] [INFO ] [alacritty] Running on Wayland\r\n[0.000525696s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \".config/alacritty/alacritty.toml\"\r\n... [Log Snipped] ...\n[0.110029896s] [INFO ] [alacritty] Padding: 0 x 0\r\n[0.110058470s] [INFO ] [alacritty] Width: 1916, Height: 1020\n```\r\nWhen in Vi Mode [Shift]+[Ctrl]+[Space], moving to the left with [B] \"SemanticLeft\" does not work for all semantic characters:\r\n\r\n`this is a test\uff0dSTAHP\uff0eSTAHP\u2014yes this is a test-move test\u2022lets go`\r\n\r\nIn the above, the characters to the left of \"STAHP\" causes the cursor to... stop. Moving forward with [E] is fine. The only way to move past those characters is to use the cursor keys.\r\n\r\nPlease be so kind as to look into this if you have the time at hand to spare.\r\n\r\nWith humble thanks.\n\n[Context/Logs]:\n- I'd assume that you have those wide chars in semantic chars specified, since wide chars are not there by default.\n- Yes.\r\n\r\n`[selection]\r\n\r\nsemantic_escape_chars = \",\u2502`|:\\\"' ()[]{}<>\\t\u2022-\u2014\uff0d\uff0e\"\r\n`\n- It seems like `b` isn't the only binding affected. The `w` binding also does not work correctly."}
{"project_id": "Alacritty", "bug_id": "303", "source_type": "github", "llm_input_text": "[Title]: `alacritty migate` panic\n[Symptom]:\nRunning `alacritty migrate` seems to panic, rather than migrate stuff. It appears to point to this indexing on the toml. [URL]\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.14.0-dev (c032c89f)\r\nLinux/BSD: Arch Linux 6.11.2-arch1-1, Wayland, Hyprland\r\n\r\n### Logs\r\n\r\nCrashes:\r\n\r\n```\nrs\r\n\u276f alacritty migrate\r\n[alacritty/src/migrate/mod.rs:174:9] &key = KeyMut {\r\n    key: Key {\r\n        key: \"shell\",\r\n... [Log Snipped] ...\nindex not found\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\r\n\r\nFont/Terminal size:\r\n[Link: Alacritty-2712427.log]\r\n\r\n\r\nKeyboard and bindings:\r\n[Link: Alacritty-2716785.log]\n\n[Context/Logs]:\n- I can repro with an empty config."}
{"project_id": "Alacritty", "bug_id": "304", "source_type": "github", "llm_input_text": "[Title]: Hyperlinks not working always\n[Symptom]:\n### System\r\n\r\nOS: Linux (Archlinux)\r\nVersion: alacritty 0.14.0 (22a44757)\r\nLinux/BSD: Gnome 47.1 + Wayland\r\n\r\nThere is something wrong with hyperlinks. I have opened two terminals: Alacritty and Gnome Console. On Gnome Console, hyperlinks are working just fine, on Alacritty I'm not sure how but when trying copy pasting the prompt or some gibberish on it, then it starts working\r\n\r\n\r\n\r\n[URL]\n\n[Context/Logs]:\n- Sounds like a shell issue. The shell is likely rewriting itself when you're pasting text in thus fixing the missing hyperlink escape.\n- But it's working fine on another terminal by default, we sure it's not an alacritty issue?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can confirm that   introduced the regression. Here is a simple reproducer (just a hyperlink with one-character label, everything bigger than one char still works fine):\r\n```sh\r\nprintf '\\e]8;id=1235;[URL]\r\n```\n- Should be fixed with #8276, let me know if you can still reproduce this."}
{"project_id": "Alacritty", "bug_id": "305", "source_type": "github", "llm_input_text": "[Title]: Highlighted hints use old data for their actions\n[Symptom]:\nCurrently the following logic is used to open hints with the mouse/vi mode:\r\n\r\n```rust\r\n                let hint = ctx.display().vi_highlighted_hint.take();\r\n                if let Some(hint) = &hint {\r\n                    ctx.trigger_hint(hint);\r\n                }\r\n                ctx.display().vi_highlighted_hint = hint;\r\n```\r\n\r\n```rust\r\n        let hint = self.ctx.display().highlighted_hint.take();\r\n        if let Some(hint) = hint.as_ref().filter(|_| button == MouseButton::Left) {\r\n            self.ctx.trigger_hint(hint);\r\n        }\r\n        self.ctx.display().highlighted_hint = hint;\r\n```\r\n\r\nBoth of these take the current highlighted hint and pass it directly to `trigger_hint`. However `trigger_hint` uses the following logic to convert the hint to its text equivalent:\r\n\r\n```rust\r\n        let hint_bounds = hint.bounds();\r\n        let text = match hint.hyperlink() {\r\n            Some(hyperlink) => hyperlink.uri().to_owned(),\r\n            None => self.terminal.bounds_to_string(*hint_bounds.start(), *hint_bounds.end()),\r\n        };\r\n```\r\n\r\nThis is problematic since the highlighted hint has not been checked for validity since the last frame, which means the underlying terminal content could have changed since the user requested its opening.\r\n\r\nTo avoid accidentally opening arbitrary text, Alacritty should either invalidate the highlighted hints before passing them to the `trigger_hint` function or recreate the hints.\r\n\r\nIf the hints are recreated, we might also be able to remove the ugly `take()` -> `assign` stuff.\n"}
{"project_id": "Alacritty", "bug_id": "306", "source_type": "github", "llm_input_text": "[Title]: `--daemon` mode ignores `-e` for first window with `msg create-window`\n[Symptom]:\nI use another terminal to not interfere with alacritty instances. Then do:\r\n- `alacritty --daemon`\r\n- `alacritty msg create-window -e nnn`\r\n\r\n\u2192 Alacritty opens and is a child process of the daemon, as it should. It is a blank, interactive terminal window though. `nnn` (or any other command) did not execute. When using `alacritty msg create-window -e nnn` a second time, even after closing the first window, it works as intended.\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.14.0 (22a44757)\r\nLinux/BSD: X11, i3wm\r\n\r\n### Logs\r\n\r\nSadly, nothing of value. `alacritty msg create-window -e nnn` does not produce any output.\r\n\r\n`alacritty --daemon` produces the following. 6.[\u2026] is the first, unsuccessful use of `alacritty msg create-window`, 9.[\u2026] is the second one.\r\n```\n\u276f alacritty --daemon\r\nALACRITTY_SOCKET=/run/user/1000/Alacritty-:0-4690.sock; export ALACRITTY_SOCKET\r\nCreated log file at \"/tmp/Alacritty-4690.log\"\r\n[6.685035667s] [INFO ] [alacritty] Using GLX 1.4\r\n[6.731810987s] [DEBUG] [alacritty] Picked GL Config:\r\n... [Log Snipped] ...\n[9.775863562s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: LoadFlag(0x0), render_mode: \"Normal\", lcd_filter: 1 }\r\n[9.785250999s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: LoadFlag(0x0), render_mode: \"Normal\", lcd_filter: 1 }\n```\n\n[Context/Logs]:\n- Should be fixed with #8374."}
{"project_id": "Alacritty", "bug_id": "307", "source_type": "github", "llm_input_text": "[Title]: Setting hints with `alacritty msg` doesn't update keyboard bindings\n[Symptom]:\nHey!\n\nCurrently when using `alacritty msg config` to update hints, it doesn't update the keyboard shortcuts. \n\nTo reproduce, start an alacritty and run:\n\n```\n$ # my-tag \n$ alacritty msg config 'hints.enabled = [ { command = \"my-command\", hyperlinks = true, post_processing = false, mouse.enabled = true, binding = { key = \"M\", mods = \"Control|Shift\" }, regex = \"my-tag\" } ]'\n```\nYou'll notice that `Control+Shift+M` doesn't show my-tag as possible targets, however cursor hover will still work. \n\nAlacritty version: 0.15.0\n\n[Context/Logs]:\n- Hm that does indeed not seem to work.\n- It also seems that changing the `general.import = [ \"~/.hints-file\" ]` to `general.import = []` with `alacritty msg config` doesn't remove hints either.\n- Imports not being changeable through IPC is fine since there's better ways to do that really. But hints really should work."}
{"project_id": "Alacritty", "bug_id": "308", "source_type": "github", "llm_input_text": "[Title]: [Bug] After 0.16 update, Alacritty fails to start in any Wayland session (X11 works as is)\n[Symptom]:\nAlalcritty updated to version 0.16 and since it fails to start under Wayland session with the following error:\n\n```\nError: Error { raw_code: Some(12297), raw_os_message: None, kind: BadMatch }\n```\n\n[Context/Logs]:\n- I can reproduce, some Omarchy core features broke because of this\n- What GPU are you running? If you are using hyprland, can you try a proper Wayland compositor instead?\n\nFor me with Sway I can't reproduce this issue.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Just in case, can you post a `eglinfo`?\n- By the way, here's mine:\n\n[Link: eglinfo.txt]\n\nAlso, while researching about the `EGL_EXT_create_context_robustness` extension string, I found a somewhat relevant comment in the Mesa source code about the robust buffer access:\n<[URL]"}
{"project_id": "Alacritty", "bug_id": "309", "source_type": "github", "llm_input_text": "[Title]: Alacritty is likely sending repeat events for Enter, Tab, and Backspace\n[Symptom]:\n### System\r\n\r\nOS: Linux (gentoo)\r\nVersion: alacritty 0.14.0\r\nLinux/BSD: GNOME Wayland\r\n\r\n### Logs\r\n\r\nCrashes: NONE\r\n\r\nFont/Terminal size:\r\n```\nCreated log file at \"/tmp/Alacritty-90736.log\"\r\n[0.000004981s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000046713s] [INFO ] [alacritty] Version 0.14.0\r\n[0.000052931s] [INFO ] [alacritty] Running on X11\r\n... [Log Snipped] ...\n[0.064444006s] [INFO ] [alacritty] PTY dimensions: 26 x 80\r\n[0.067551722s] [INFO ] [alacritty] Initialisation complete\n```\r\n\r\nKeyboard and bindings:\r\n```\r\n[41.392361260s] [INFO ] [alacritty_winit_event] About to wait\r\n[41.470384238s] [INFO ] [alacritty_winit_event] About to wait\r\n[41.473453397s] [INFO ] [alacritty_winit_event] KeyboardInput { device_id: DeviceId(X(DeviceId(3))), event: KeyEvent { physical_key: Code(Enter), logical_key: Named(Enter), text: Some(\"\\r\"), location: Standard, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: Some(\"\\r\"), key_without_modifiers: Named(Enter) } }, is_synthetic: false }\r\n[41.473511763s] [INFO ] [alacritty_winit_event] About to wait\r\n[43.785675712s] [INFO ] [alacritty_winit_event] CursorMoved { device_id: DeviceId(X(DeviceId(2))), position: PhysicalPosition { x: 352.0, y: 561.0 } }\r\n[43.785761442s] [INFO ] [alacritty_winit_event] AxisMotion { device_id: DeviceId(X(DeviceId(2))), axis: 0, value: 927.0 }\r\n[43.785776078s] [INFO ] [alacritty_winit_event] AxisMotion { device_id: DeviceId(X(DeviceId(2))), axis: 1, value: 710.0 }\r\n[43.785829918s] [INFO ] [alacritty_winit_event] About to wait\r\n```\r\n\r\n[Link: While using neovim (from master) I noticed that keys such ash Tab and backspace are being repeated.] I reported on neovim, but was asked to inform this to Alacritty developers and was guided to this [URL] Can you please help.\n\n[Context/Logs]:\n- To clarify, Neovim recently enabled the [Link: Report Event Types] mode of the kitty keyboard protocol. The specification indicates that unless the \"Report all keys as escape codes\" mode is also enabled (which it is not in this case), release events for Enter, Backspace, and Tab should not be sent. I haven't seen confirmation yet that is exactly what's happening here, but that seems to be the case.\n- Simple reproduction steps (from [URL]\r\n\r\nRun `printf '\\x1b[>3u' && kitty +kitten show_key -m unchanged`, and press Enter, Backspace, and Tab.\r\n\r\nIn Alacritty 0.14.0 (22a44757) I get\r\n```\n$ printf '\\x1b[>3u' && kitty +kitten show_key -m unchanged\r\nPress any keys - Ctrl+D will terminate this program\r\nUNIX\t\tsend_text\r\n^M\t\t\\r    # this is the release event from hitting Enter to run the command\r\n^M\t\t\\r\r\n... [Log Snipped] ...\n^I\t\t\\t\r\n^I\t\t\\t\n```\r\n\r\nwhile in Kitty 0.38.1 I get\r\n```\r\n$ printf '\\x1b[>3u' && kitty +kitten show_key -m unchanged\r\nPress any keys - Ctrl+D will terminate this program\r\nUNIX\t\tsend_text\r\n^M\t\t\\r\r\n^?\t\t\\x7f\r\n^I\t\t\\t\r\n```\r\n\r\nNote: the above is with Num Lock off. I always have Num Lock on, in which case I get this in Alacritty:\r\n```\n$ printf '\\x1b[>3u' && kitty +kitten show_key -m unchanged\r\nPress any keys - Ctrl+D will terminate this program\r\nUNIX\t\tsend_text\r\n^M\t\t\\r    # this is the release event from hitting Enter to run the command\r\n^M\t\t\\r\r\n... [Log Snipped] ...\n^I\t\t\\t\r\n^I\t\t\\t\n```\r\n\r\nand in Kitty:\r\n```\n$ printf '\\x1b[>3u' && kitty +kitten show_key -m unchanged\r\nPress \n...[Text Truncated]...\niers (Num Lock and Caps Lock) should stop Enter, Backspace and Tab from sending their legacy codes. But given that the reason for why those three keys are an exception in the first place is \"to allow the user to type and execute commands in the shell such as reset after a program that sets this mode crashes without clearing it\", I'd say Alacritty's behaviour of sending the legacy codes is more sensible. In Kitty, if an application crashes, I would have to disable Num Lock to be able to use the Backspace, Tab or Enter keys for recovery in the shell.\n- ... [Middle Discussions Snipped for Brevity] ...\n- You can try to repro with the process mentioned above, but ensure that you test in actually that actually is 0.15.1 and you don't have e.g. 0.13 that you run because it's early in the path during launch.\n- I'm also still seeing this issue on alacritty 15.1 and latest nightly neovim. \n\nReinstalled neovim & alacritty to be 100% sure\n\nPer repro steps above\n```\nPress any keys - Ctrl+D will terminate this program\nUNIX\t\tsend_text\n^M\t\t\\r\n^M\t\t\\r\n^M\t\t\\r\n... [Log Snipped] ...\n^?\t\t\\x7f\nq\t\tq\n```\n```\nnvim -V1 -v\n\nNVIM v0.12.0-dev\nBuild type: RelWithDebInfo\nLuaJIT 2.1.0-beta3\n... [Log Snipped] ...\n   system vimrc file: \"$VIM/sysinit.vim\"\n  fall-back for $VIM: \"/usr/share/nvim\"\n```\n```\nalacritty --version\n\nalacritty 0.15.1\n```\nI know this version of alacritty has resolved the issue for others (but many still seem to have it).  Any idea what else we can try to resolve this?\n\nTHanks for any help!"}
{"project_id": "Alacritty", "bug_id": "310", "source_type": "github", "llm_input_text": "[Title]: RegexSearch fails if line wraps at full width character\n[Symptom]:\nIf a line wraps at a full width character, search fails:\n\n```\nuse alacritty_terminal::{\n    index::{Column, Direction, Line, Point, Side},\n    term::{search::RegexSearch, test::mock_term},\n};\n\n... [Log Snipped] ...\n    assert_eq!(matched, Some(\"broken\u4f8bsearch\".to_string()))\n}\n```\n\n[Context/Logs]:\n- I'm surprised this was working for fullwidth characters wrapping into fullwidth characters, which is likely why it wasn't noticed before. #8587 should fix it, hopefully without introducing any other fullwidth regressions."}
{"project_id": "Alacritty", "bug_id": "311", "source_type": "github", "llm_input_text": "[Title]: Spamming the ascii bell character freezes alacritty when a bell command is set\n[Symptom]:\nUsing the following configuration file:\n\n```toml\n[bell]\ncommand = { program = \"true\" }\n```\n\nExecuting the following command completely freezes alacritty until 8 seconds have passed on my system:\n\n```sh\nfor i in $(seq 1000); do printf '\\a'; done\n```\n\nThe following command will freeze it indefinitely, such that alacritty has to be forcibly killed:\n\n```sh\nwhile true; do printf '\\a'; done\n```\n\nWhile these seem like constructed examples, this is particularly annoying when accidentally outputting binary data to the terminal. E.g. executing\n\n```sh\ncat $(which alacritty)\n```\n\nwill take over a minute for alacritty to finally respond again on my system.\n\nI think, the best way to fix this would be to somehow throttle bell command spawning, e.\u202fg. by a cooldown.\n\nI\u2019m using Alacritty 0.15.1 within Arch Linux under Wayland (sway).\n\n[Context/Logs]:\n- Yeah that makes sense."}
{"project_id": "Closure", "bug_id": "1", "source_type": "google", "llm_input_text": "[Title]: JSC_REFERENCE_BEFORE_DECLARE - spurious warnings\n[Symptom]:\nCompile this code with [URL]\r\n--------------------------------------------\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\nalert(Foo());\r\n\r\nfunction Foo()\r\n{\r\n  return &quot;test&quot;;\r\n}\r\n--------------------------------------------\r\n\r\nResults in a WARNING:\r\n\r\nJSC_REFERENCE_BEFORE_DECLARE: Variable referenced before declaration: Foo\r\nat line 1 character 6\r\nalert(Foo());\r\n\r\nExpect: no WARNING.\r\n\r\nI believe it is quite common and correct for forward references to function\r\ndeclaration in the same scope (global or within a function).  I'm finding\r\nthis type of error is producing a lot of noise in the warning stream when\r\ncompiling larger libraries.\n\n[Context/Logs]:\n- FYI\r\n\r\nthis is fixed in the command-line tool. pending integration into the web service.\n- The webservice has been updated. Pleas verify."}
{"project_id": "Closure", "bug_id": "2", "source_type": "google", "llm_input_text": "[Title]: Exception thrown from com.google.javascript.jscomp.CollapseProperties.addStubsForUndeclaredProperties\n[Symptom]:\nThe attached javascript file results in a Java exception being thrown when compiling with ADVANCED_OPTIMIZATIONS\r\n\r\n[~/Projects/Music Theory/trunk] # java -jar ./ext/closure-compiler/compiler.jar --js /tmp/musictheory.net/v2/js/core.js --compilation_level \r\nADVANCED_OPTIMIZATIONS\r\njava.lang.RuntimeException: java.lang.IllegalArgumentException\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCompilerRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCompilerRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CompilerRunner.main(Unknown Source)\r\nCaused by: java.lang.IllegalArgumentException\r\n\tat com.google.common.base.Preconditions.checkArgument(Preconditions.java:71)\r\n\tat com.google.javascript.jscomp.CollapseProperties.addStubsForUndeclaredProperties(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.updateObjLitOrFunctionDeclarationAtAssignNode(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.updateObjLitOrFunctionDeclaration(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.collapseDeclarationOfNameAndDescendants(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.collapseDeclarationOfNameAndDescendants(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.collapseDeclarationOfNameAndDescendants(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.collapseDeclarationOfNameAndDescendants(Unknown Source)\r\n\tat com.google.javascript.jscomp.CollapseProperties.process(Unknown Source)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$PassFactoryDelegate.processInternal(Unknown Source)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$NamedPass.process(Unknown Source)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer.process(Unknown Source)\r\n\n...[Description Truncated]...\n\n[Context/Logs]:\n- Workaround:\r\n\r\nIf I add:\r\ngoog.exportSymbol(\"muth\", muth);\r\ngoog.exportSymbol(\"muth.core\", muth.core);\r\ngoog.exportSymbol(\"muth.core.dom\", muth.core.dom);\r\ngoog.exportSymbol(\"muth.core.util\", muth.core.util);\r\n\r\nbefore the other exportSymbol calls, it works.\n- Here's a minimal reduction:\r\ngoog.provide(\"a\");a.b = function(){},a.b()\r\n\r\nThe function call after the comma isn't important, just about any valid expression there \r\nwill trigger the bug."}
{"project_id": "Closure", "bug_id": "3", "source_type": "google", "llm_input_text": "[Title]: Error trying to fold var statement inside an if\n[Symptom]:\nThe following js input to the compiler will raise an exception (I think trying to turn the left hand side \r\nof the expression in the else into a string):\r\n\r\nif (a) { var b = 1; } else { a.b = 1; }\r\n\r\nThe error is raised at, calling the getString on name2:\r\n\r\n[URL]\r\ncompiler/source/browse/trunk/src/com/google/javascript/jscomp/FoldConstants.java#792\n\n[Context/Logs]:\n- Fixed pending integration"}
{"project_id": "Closure", "bug_id": "4", "source_type": "google", "llm_input_text": "[Title]: Internal compiler error\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Put the following one line of code into a file foo.js (without the quotes): &quot;function({}) {};&quot;\r\n2. Compile it with &quot;java -jar compiler.jar --js=foo.js&quot;.\r\n\r\n What is the expected output? What do you see instead? \nI get an internal compiler error.  The full output is included below.\r\n\r\n What version of the product are you using? On what operating system? \nI'm running version compiler-20091203 on OS X.  (BTW, how am I supposed to know what \r\nversion I am running?)\r\n\r\n----------\r\nfoo.js:1: ERROR - Parse error. destructuring assignment forbidden\r\nfunction({}) {};\r\n^\r\n\r\n1 error(s), 0 warning(s)\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nOBJECTLIT 1 is not a string node\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCompilerRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCompilerRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CompilerRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nOBJECTLIT 1 is not a string node\r\n\tat com.google.javascript.rhino.Node.getString(Unknown Source)\r\n\tat com.google.javascript.jscomp.CodingConventionAnnotator.visit(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(Unknown Source)\r\n\tat com.google.javascript.jscomp.CodingConventionAnnotator.process(Unknown \r\nSource)\r\n\tat com.google.javascript.jscomp.Compiler.annotateCodingConvention(Unknown \r\nSource)\r\n\tat co\n...[Description Truncated]...\n\n[Context/Logs]:\n- Fix pending integration"}
{"project_id": "Closure", "bug_id": "5", "source_type": "google", "llm_input_text": "[Title]: Indexing into an Array with a String shouldn't be an error\n[Symptom]:\nThe JSC_INVALID_GETELEM_INDEX_ERROR is a huge fallacy.  It would be fine if it was a warning, but \r\nas an error it keeps perfectly fine JavaScript from compiling.\r\n\r\nRaphael.js doesn't compile because it uses strings to improve minification, such as [Link: 1,2][push] \r\nwhere the push variable was defined earlier.\r\n\r\nAlso, simple code like this won't compile:\r\n[Link: 1,2][i ? 'push' : 'unshift'];\r\n\r\nAs you can see, these are very valid uses of JavaScript and should *not* throw errors.\n\n[Context/Logs]:\n- I was not able to reproduce this. Can you give more detailed repro steps?\n- oh, now i see it. ya, that's just a bug.\n- ... [Middle Discussions Snipped for Brevity] ...\n- That's good to note, but I didn't write Raphael, I'd just like to compile it.  :-)\r\n\r\nThanks a lot for the quick response!\n- this should be fixed as of r34. (i'll mark it fixed when we cut a real release)."}
{"project_id": "Closure", "bug_id": "6", "source_type": "google", "llm_input_text": "[Title]: @inheritDoc doesn't play well with interfaces\n[Symptom]:\nIf I use interface inheritance with @inheritDoc, the compiler doesn't \r\nknow about the types used in the method signature.\r\n\r\nSample code:\r\n\r\n/**\r\n * Interface\r\n * @interface\r\n */\r\nA = function() {};\r\n\r\n/**\r\n * @param {string} a\r\n */\r\nA.prototype.foo = function(a) {};\r\n\r\n/**\r\n * @constructor\r\n * @implements {A}\r\n */\r\nB = function() {};\r\n\r\n/**\r\n * @inheritDoc\r\n */\r\nB.prototype.foo = function(a) {\r\n  alert(a.substring(0));   //  ERROR - could not determine the type of \r\nthis expression\r\n};\n\n[Context/Logs]:\n- I should add, this only shows up with --report_unknown_types turned on.\n- should be fixed at head\n- ... [Middle Discussions Snipped for Brevity] ...\n- This is not fixed. Nicolas, could you reopen the bug?\n- If you think this is not fixed, please re-open a bug on github with a repro case. The example here works if you declare A and B rather than leave them as global variables. (You can try it on appspot.)\r\n\r\n/** @interface */\r\nvar A = function() {};\r\n\r\n/** @param {string} a */\r\nA.prototype.foo = function( a) {};\r\n\r\n/**\r\n* @constructor\r\n* @implements {A}\r\n*/\r\nvar B = function() {};\r\n\r\n/** @inheritDoc */\r\nB.prototype.foo = function( a) {\r\nalert(a.substring(0));\r\n};\r\n\r\nvar inst = new B();\r\ninst.foo(1);\r\n\r\n\r\nThe varcheck pass of the compiler, which runs before type checking, warns about global variables in the code."}
{"project_id": "Closure", "bug_id": "7", "source_type": "google", "llm_input_text": "[Title]: Ant CompileTask patch\n[Symptom]:\nShoud be a &quot;review request&quot; issue, but seems that I cannot create one since\r\nit needs a valid branch path.\r\n\r\nPurpose of code changes:\r\nTo be able to use Closure Compiler in Ant. Can also be used in other\r\nsystems like Gradle, Buildr and Maven. It's not feature complete, but it's\r\na start. \r\n\r\nAdded a svn patch that includes two java files. Also you need to have\r\nant.jar (1.7.1 but works with older) into the lib directory to compile.\r\n\r\nAn example build.xml script is included.\n\n[Context/Logs]:\n- Cool!\r\n\r\nSo before we start, there's one bit of legal stuff we need to do. We need you to sign a \r\ncontributor license agreement. This agreement basically says \"I own the copyright on \r\nthis code, and it's ok if closure compiler uses it\".\r\n\r\n[URL]\r\n\r\nYou can fill it out online or by mail. Please let me know if anything on that page is \r\nunclear, or if you have any questions about it.\n- Done. Filled out online.\n- ... [Middle Discussions Snipped for Brevity] ...\n- OK, I put the code review up at\r\n[URL]\r\nI haven't figured out how to test it yet, but am willing to take patches and/or \r\nsuggestions on how to do that.\r\n\r\nSo far, I just put the Apache License on it and reformatted to match the style in the \r\nrest of the codebase.\n- Should be in as of revision 65."}
{"project_id": "Closure", "bug_id": "8", "source_type": "google", "llm_input_text": "[Title]: eval function replaced with eval operator\n[Symptom]:\nThe inputs\r\n\r\nwindow['a'] = 'Hello, World!';\r\nwindow['f'] = function f() {\r\n  var a = 'Howdy!';\r\n  var ev = eval;\r\n  ev('alert(a)');\r\n};\r\n\r\nand\r\n\r\nwindow['a'] = 'Hello, World!';\r\nwindow['f'] = function f() {\r\n  var a = 'Howdy!';\r\n  eval('alert(a)');\r\n};\r\n\r\nin advanced mode both compile to\r\n\r\nwindow.a=&quot;Hello, World!&quot;;window.f=function(){eval(&quot;alert(a)&quot;)};\r\n\r\n\r\nbut according to section  .1 of EcmaScript 5 the first should alert \r\n&quot;Hello, World!&quot;, and the second should alert &quot;Howdy!&quot;.\r\n\r\n .1 Direct Call to Eval \r\nA direct call to the eval function is one that is expressed as a \r\nCallExpression that meets the following two \r\nconditions: \r\nThe Reference that is the result of evaluating the MemberExpression in the \r\nCallExpression has an environment \r\nrecord as its base value and its reference name is &quot;eval&quot;. \r\nThe result of calling the abstract operation GetValue with that Reference as \r\nthe argument is the standard built- \r\nin function defined in  . \r\n\r\nAccording to ES5, since the name of the function called in the input is &quot;ev&quot; \r\nthe call has the effect of binding &quot;a&quot; in the global environment, whereas \r\nwhen the name of the function called is &quot;eval&quot;, &quot;a&quot; is bound to the local \r\nvariable.\r\n\r\nChanging a use of the eval function to the eval operator is problematic \r\nunless you can prove that the body of the evaled text does not contain any \r\nreferences to non-global variables.\n\n[Context/Logs]:\n- tangentially, does anyone keep a master table of which js interpreters implement which \r\nparts of ES5, just so that people know how to repro issues like this?\n- This thread is relevant to ES5 implementations:\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Ah.\r\n\r\n(0, eval)(foo) does something quite similar to (new Function(foo))() with a few \r\ndifferences.  So not having the eval function does not severely limit the set of \r\nexpressible programs.\n- should be fixed in r79"}
{"project_id": "Closure", "bug_id": "9", "source_type": "google", "llm_input_text": "[Title]: Incorrect type annotations in window.setTimeout extern\n[Symptom]:\ndmw/third_party/closure-library/closure/goog/net/jsonp.js:313: WARNING -\r\nFunction goog.global.setTimeout: called with 2 argument(s). Function\r\nrequires at least 3 argument(s) and no more than 3 argument(s).\r\n  goog.global.setTimeout(function() {\r\n\r\n\r\nSince:\r\n\r\n/**\r\n * @param {Function|string} callback\r\n * @param {number} delay\r\n * @param {*} var_args\r\n * @return {number}\r\n * @see [URL]\r\n */\r\nfunction setTimeout(callback, delay, var_args) {}\r\n\r\n\r\nProbably wants to be &quot;{...*}&quot; on line 4.\r\n\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nHEAD\r\n\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- thanks for the report. this should be fixed at revision 91, courtesy of John.\n- Issue 135 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "10", "source_type": "google", "llm_input_text": "[Title]: Inheritance not detected when prototype directly assigned\n[Symptom]:\nGiven the following input JS:\r\n//--------------------------\r\n/**\r\n* @constructor\r\n*/\r\nfunction SuperClass () {\r\n}\r\n\r\nSuperClass.prototype.CustomMethod = function() {\r\n}\r\n\r\n/**\r\n* @constructor\r\n* @extends {SuperClass}\r\n*/\r\nfunction SubClass () {\r\n}\r\nSubClass.prototype = new SuperClass();\r\n\r\n/**\r\n* @override\r\n*/\r\nSubClass.prototype.CustomMethod = function() {\r\n\tthis.myProperty = &quot;value&quot;;\r\n}\r\n\r\nwindow['SubClassInstance'] = new SubClass();\r\n//---------------------------------\r\n\r\nWhen compiled with ADVANCED_OPTIMIZATIONS produces the warning:\r\nJSC_UNKNOWN_OVERRIDE: property CustomMethod not defined on any superclass\r\nof SubClass\r\n\r\nThis error has been reproduced in both the downloaded compiler and the\r\nCompiler Service UI.\r\n\r\nWhen the prototype assignment is wrapped in a function, it is correctly\r\ndetected. See below:\r\n//---------------------------------\r\nfunction inherit(Child, Parent) {\r\n    Child.prototype = new Parent();\r\n} \r\ninherit(SubClass, SuperClass);\r\n//---------------------------------\n\n[Context/Logs]:\n- This issue was closed by revision r93.\n- This issue is not fixed. The above code still generates the warning when the\r\nprototype assignment is not inside a function.\n- The test case in r93 disagrees. Can you give a repro case of the warning that you see?\n- Further testing shows the bug only comes into play in very specific circumstances. It\r\nrequires an extern file as well as aliasing the type with @typedef.\r\n\r\nAttached are the 2 files as simple as I can get them and still get the error.\r\n\r\nI should mention that the compiler I'm testing in was built about 2 hours ago against\r\nthe latest SVN source. I also enabled the ambiguateProperties and\r\ndisambiguateProperties passes."}
{"project_id": "Closure", "bug_id": "11", "source_type": "google", "llm_input_text": "[Title]: externs/es3.js missing optional flags for Date.UTC - causes warning in closure library.\n[Symptom]:\nUsing closure library, I see:\r\n\r\nclosure-library/closure/goog/i18n/timezone.js:209: WARNING - Function \r\nDate.UTC: called with 5 argument(s). Function requires at least 7 \r\nargument(s) and no more than 7 argument(s).\r\n  var timeInMs = Date.UTC(date.getUTCFullYear(), date.getUTCMonth(),\r\n                         ^\r\n\r\nMozilla documentation says all arguments but year and month are optional.\r\nAdding @param {number=} for the others should do the trick. I do not know if \r\nthe method would take strings, too.\n\n[Context/Logs]:\n- This issue was closed by revision r98."}
{"project_id": "Closure", "bug_id": "12", "source_type": "google", "llm_input_text": "[Title]: Array Join Munged Incorrectly\n[Symptom]:\n$.fn.hasClass = function(selector) {\r\n\treturn ( this.length &gt; 0 ? \r\n\t\t\t\t!( ( ['', this[0].className, ''].join(' ') ).indexOf( ['', selector, \r\n''].join(' ') ) == -1 )\r\n\t\t\t\t: false );\r\n};\r\n\r\nmunges into\r\n\r\n$.fn.hasClass=function(a){return this.length&gt;0?\r\n(&quot;&quot;+this[0].className).indexOf(&quot;&quot;+a)!=-1:false};\r\n\r\nwhich is not identical. Looks like there might be an issue with join and ' '.\n\n[Context/Logs]:\n- A simpler example would be:\r\nvar a = ['', 'a', ''].join(' ');\r\n\r\nwhich evaluates to\r\n\" a \"\r\n\r\nBut the compiler converts the code to \r\nvar a=\"a \";\n- I fixed it last night. It'll be pushed out in the next release.\n- This issue was closed by revision r99."}
{"project_id": "Closure", "bug_id": "13", "source_type": "google", "llm_input_text": "[Title]: Typos in externs/html5.js\n[Symptom]:\nLine 354:\r\nCanvasRenderingContext2D.prototype.globalCompositingOperation;\r\n\r\nLine 366:\r\nCanvasRenderingContext2D.prototype.mitreLimit;\r\n\r\nThey should be globalCompositeOperation and miterLimit, respectively.\n\n[Context/Logs]:\n- thanks for catching that. i'll fix it on monday when i'm near a machine that i can edit \r\ncode from.\n- This issue was closed by revision r113."}
{"project_id": "Closure", "bug_id": "14", "source_type": "google", "llm_input_text": "[Title]: Compiler gives false error with respect to unreachable code\n[Symptom]:\nTry compiling the following in the Closure Compiler UI:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nfunction instanceOf(value, type) {\r\n  try {\r\n    // first try built-in test -- if it succeeds, we're golden.\r\n    if (value instanceof type) {\r\n      return true;\r\n    }\r\n  } catch (exception) {\r\n    if (exception instanceof TypeError) {\r\n      throw exception; // indicates that &quot;type&quot; is not a type\r\n    }\r\n    // Otherwise, assume the exception was caused by \r\n    // the Firefox 1.0.3 bug.  Work around it.\r\n    return (type === Object);\r\n  }\r\n}\r\n\r\nThe Compiler issues the following warning:\r\n\r\nJSC_UNREACHABLE_CODE: unreachable code at line 7 character 0\r\n  } catch (exception) {\r\n\r\nThis code is from a Firefox extension (Chickenfoot) where (at least\r\nhistorically) calling instanceof in this manner could throw a security\r\nexception (or something else, I forget what -- Chickenfoot has been around\r\nsince Firefox 1.0) which is why the catch blocks is there and is indeed\r\nreachable.\n\n[Context/Logs]:\n- If anyone is in a similar situation, I was able to do the following as a workaround:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nfunction instanceOf(value, type) {\r\n  var result;\r\n  try {\r\n    // first try built-in test -- if it succeeds, we're golden.\r\n    result = value instanceof type;\r\n  } catch (exception) {\r\n    if (exception instanceof TypeError) {\r\n      throw exception; // indicates that \"type\" is not a type\r\n    }\r\n    // Otherwise, assume the exception was caused by \r\n    // the Firefox 1.0.3 bug.  Work around it.\r\n    return (type === Object);\r\n  }\r\n  return result;\r\n}\n- Alan, you should be able to fix this pretty easily. Mind taking a look?\n- Fixed and checked in.\r\n\r\nThe fix should be available in the next release.\n- This issue was closed by revision r114."}
{"project_id": "Closure", "bug_id": "15", "source_type": "google", "llm_input_text": "[Title]: compiler assumes that 'arguments' can be shadowed\n[Symptom]:\nThe code:\r\nfunction name() {\r\n   var arguments = Array.prototype.slice.call(arguments, 0);\r\n}\r\n\r\ngets compiled to:\r\nfunction name(){ var c=Array.prototype.slice.call(c,0); }\r\n\r\nThanks to tescosquirrel for the report.\n\n[Context/Logs]:\n- Original report at:\r\n[URL]\r\ndiscuss/browse_thread/thread/ #\n- This issue was closed by revision r117."}
{"project_id": "Closure", "bug_id": "16", "source_type": "google", "llm_input_text": "[Title]: Update to Google Maps API V3 Extern\n[Symptom]:\nNew release today:\r\n[URL]\r\n\r\nI'll be on vacation all next week, so don't wait on me for responses.\n\n[Context/Logs]:\n- Just found a change I missed. Use this patch instead.\n- Someone emailed me another change yesterday. In case you've already started the code\r\nreview, the only difference is the google.maps.Map.prototype.mapTypes declaration was\r\nchanged to @type {google.maps.MVCObject}\n- I created the code review at\r\n[URL]\r\nAlan, do you have time to take a look?\n- This issue was closed by revision r124."}
{"project_id": "Closure", "bug_id": "17", "source_type": "google", "llm_input_text": "[Title]: fails to build from source without binary blobs\n[Symptom]:\nThe closure-compiler source contains compiled classes. If these are removed\r\nthe build fails:\r\n\r\n$ rm --force lib/google_common_deploy.jar\r\nlib/google_compiled_protos_deploy.jar lib/junit.jar\r\nlib/libtrunk_rhino_parser_jarjared.jar tools/FlagProcessorFactory_deploy.jar\r\n$ ant jar\r\n    [...]\r\n    [javac] [...]: package com.google.common.annotations does not exist\r\n    [javac] [...]: package com.google.common.base does not exist\r\n    [javac] [...]: package com.google.common.collect does not exist\r\n    [javac] [...]: package com.google.common.flags does not exist\r\n    [javac] [...]: package com.google.common.io does not exist\r\n    [javac] [...]: package com.google.javascript.jscomp.mozilla.rhino does\r\nnot exist\r\n    [...]\r\n\r\nThanks,\r\n\r\nNicholas\n\n[Context/Logs]:\n- Closure Compiler depends on 2 major libraries:\r\n\r\nGuava\r\n[URL]\r\n\r\nand Rhino\r\n[URL]\r\n\r\nThe maintainers of those libraries asked us to include the compiled JARs, and not the \r\nsource code, in our repository. (We depend on some new things in Rhino trunk, and \r\nthey aren't in any compiled release). I'll try to clarify this more in the README.\r\n\r\nIs there some other reason you need to remove the binary blobs?\n- Hi, thanks for your comments.\r\n\r\n\r\nI intend to package this software for the Debian project. This will require the full\r\nsource for the compiler and all its dependencies, and all scripts necessary to build\r\nfrom source. As I understand it, closure-compiler depends on guava-libraries, which\r\ndepends on google-collections, which depends on google-web-toolkit, which depends on\r\n\"prerequisite tools and third-party libraries\", which includes a lot of precompiled\r\nclasses and shared objects.\r\n\r\nThanks,\r\n\r\nNicholas\n- ... [Middle Discussions Snipped for Brevity] ...\n- Neither of those are complicated classes. The Guava people told me months ago that they \r\nwill be open-sourced \"asap\". I've since lost faith in their definition of \"soon\". :(\r\n\r\n(I don't actively look at what's in their public repository; I just look at their \r\nprivate one.)\r\n\r\nI'll see if I can get StringUtil and Tracer out today. flags may be a bit more messy...\n- This issue was closed by revision r128."}
{"project_id": "Closure", "bug_id": "18", "source_type": "google", "llm_input_text": "[Title]: Override annotations in default \texterns\n[Symptom]:\nWhen compiling a JavaScript file with enabled override annotation check\r\nthen the compiler complains about some missing annotations in the default\r\nexterns file.\r\n\r\nI have attached a patch which corrects this.\n\n[Context/Logs]:\n- This issue was closed by revision r138."}
{"project_id": "Closure", "bug_id": "19", "source_type": "google", "llm_input_text": "[Title]: $super is replaced when it should not be replaced\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Have javascript using prototype's $super\r\n2. Compile with advanced_optimizations\r\n3. See that $super is replaced by for example $super$$4\r\n\r\n What is the expected output? What do you see instead? \n$super should not be renamed as it is used by prototype.\r\n\r\n What version of the product are you using? On what operating system? \nLatest from svn.\r\n\r\n Please provide any additional information below. \nPersonally I made a quick fix in MakeDeclaredNamesUnique.java line 79:\r\nif (t.getCompiler().getCodingConvention().isExported(name)) { continue; }\r\nThis fixed it for me, but not sure if that's the right place or method to\r\nsolve this, as I am unfamiliar with the project.\n\n[Context/Logs]:\n- Quick question: Are you building from the command line, or using Closure Compiler programmatically?  What \r\ndoes your command line to the compiler look like?\n- I am building from the command line, here's what the command looks like:\r\n\r\njava -jar /Users/jochen/closure/build/compiler.jar --compilation_level\r\nADVANCED_OPTIMIZATIONS --js share.js --module share:1 --js main.js --module main:1\r\n--js recording.js --module recording:1 --js comments.form.js --module commentsform:1\r\n--js facebook.share.js --module facebookshare:1 --externs prototype.js\r\n--module_output_path_prefix /Users/jochen/ruby/karaoke/public/javascripts/compiled/\n- ... [Middle Discussions Snipped for Brevity] ...\n- To make my comment clear, one of the points of the normalization is to make it easier\r\nfor passes if the \"x\" they saw is the same \"x\" they saw earlier (without needing to\r\ntrack scope).  This makes things much easier for code motion because you don't need\r\nto worry about masking a variable of the same name.  If you change it \"$super\" is not\r\nunique the results would be unpredictable. After renaming it doesn't matter if the\r\nname is unique as the normalization is expected as renaming by design creates as many\r\nnon-unique names as possible.\n- This issue was closed by revision r139."}
{"project_id": "Closure", "bug_id": "20", "source_type": "google", "llm_input_text": "[Title]: Invalid JSC_DETERMINISTIC_TEST\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Compile following code:\r\n\r\n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\n\r\nvar t = null;\r\n\r\nwindow.test = function()\r\n{\r\n    if (t != null)\r\n    {\r\n       t = null;\r\n    }\r\n\r\n    t = 1;\r\n};\r\n\r\n What is the expected output? What do you see instead? \n\r\nCode should be compiled without warnings, but I see \r\n&quot;JSC_DETERMINISTIC_TEST: condition always evaluates to false&quot;.\n\n[Context/Logs]:\n- thanks for the report.\r\n\r\nthe immediate work around is to have a @type {?number} annotation on the global \r\nvariable.\n- This issue was closed by revision r142."}
{"project_id": "Closure", "bug_id": "21", "source_type": "google", "llm_input_text": "[Title]: Invalid JSC_DETERMINISTIC_TEST\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Compile following code:\r\n\r\n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\n\r\nvar t = null;\r\n\r\nwindow.test = function()\r\n{\r\n    if (t != null)\r\n    {\r\n       t = null;\r\n    }\r\n\r\n    t = 1;\r\n};\r\n\r\n What is the expected output? What do you see instead? \n\r\nCode should be compiled without warnings, but I see \r\n&quot;JSC_DETERMINISTIC_TEST: condition always evaluates to false&quot;.\n\n[Context/Logs]:\n- thanks for the report.\r\n\r\nthe immediate work around is to have a @type {?number} annotation on the global \r\nvariable.\n- This issue was closed by revision r142."}
{"project_id": "Closure", "bug_id": "22", "source_type": "google", "llm_input_text": "[Title]: Redefinition of a function in third party code can be miscompiled\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run this code snippet and observe that it doesn't raise an error:\r\n\r\nfunction assert(b) {if (!b) throw &quot;error&quot;}\r\n\r\nassert(f() === 1)\r\nvar f = function() {return 2;}\r\nassert(f() === 2)\r\n\r\nfunction f() {return 1;}\r\n\r\n2. Compile it as third_party:\r\n3. Observe that the first definition of f has been changed from an assignment to a declaration, and that the code now raises an error.\r\n\r\n What version of the product are you using? On what operating system? \nr8\r\n\r\n Please provide any additional information below. \n\r\nThis bug is originally from a blog comment[1], I don't know if it has hit anyone in the wild yet.\r\n\r\n1) [URL]\n\n[Context/Logs]:\n- CollapseAnonymousFunctions has been turned off for simple mode.  This problem surfaced \r\nas a result of allowing redefinitions of functions.\r\n\r\nTo reproduce this, use the webservice or the command-line with the --third_party \r\noption.\n- Issue 39 has been merged into this issue.\n- I think the thing to do, is modify the scope builder so that the named function is\r\nthe declaration.  The \"var\" from \"var f\" should be removed anyway.\n- This issue was closed by revision r148."}
{"project_id": "Closure", "bug_id": "23", "source_type": "google", "llm_input_text": "[Title]: --process_closure_primitives can't be set to false\n[Symptom]:\nWhat steps will reproduce the problem? \n1. compile a file with &quot;--process_closure_primitives false&quot;\r\n2. compile a file with &quot;--process_closure_primitives true&quot; (default)\r\n3. result: primitives are processed in both cases.\r\n\r\n What is the expected output? What do you see instead? \nThe file should still have its goog.provide/require tags in place.\r\nInstead they are processed.\r\n\r\n What version of the product are you using? On what operating system? \ncurrent SVN (also tried two of the preceding binary releases with same \r\nresult)\r\n\r\n Please provide any additional information below. \nFlag can't be set to false due to a missing &quot;else&quot; in the command-line \r\nparser.\n\n[Context/Logs]:\n- This issue was closed by revision r152."}
{"project_id": "Closure", "bug_id": "24", "source_type": "google", "llm_input_text": "[Title]: Exception in FoldConstants while inspect if statements.\n[Symptom]:\nHere is the test case:\r\n\r\nfunction foo() {\r\n      if(sections.length != 1)children[i] = 0;\r\n      else var selectedid = children[i]\r\n} \r\n\r\nHere is the stack trace:\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nGETELEM 2 is not a string node\r\n  Node: Input_0:2:6\r\n      if(sections.length != 1)children[i] = 0;\r\n  Parent: Input_0:1:15\r\nfunction foo() {\r\n\r\n\tat com.google.javascript.rhino.Node.getString(Node.java:847)\r\n\tat com.google.javascript.jscomp.FoldConstants.tryMinimizeIf(FoldConstants.java:813)\r\n\tat com.google.javascript.jscomp.FoldConstants.visit(FoldConstants.java:275)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:463)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:490)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:448)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:245)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:412)\r\n\tat com.google.javascript.jscomp.FoldConstants.process(FoldConstants.java:87)\n\n[Context/Logs]:\n- Fixed pending integration"}
{"project_id": "Closure", "bug_id": "25", "source_type": "google", "llm_input_text": "[Title]: Internet Explorer runtime error after compilation.\n[Symptom]:\nWhat steps will reproduce the problem? \nSee attached HTML file in IE6+ (does not work in IE8 unless Compatibility View is turned *on* for \r\nsome reason).\r\n\r\n What is the expected output? What do you see instead? \nExpected output is on the left-hand side of the page (it is generated by the raw source). Google \r\nClosure's output is on the right-hand side of the page.\r\n\r\n What version of the product are you using? On what operating system? \nI downloaded compiler-latest.zip today (Nov. 24, 2009, ~ 12:00 PM EST)\r\n\r\n Please provide any additional information below. \nThere is a variable called &quot;threshold&quot; which is used to generate an array of arrays in the attached \r\nHTML file. If it is a small number, IE seems to pass arrays into the sort method (sorting an array \r\nof arrays) by value like all other browsers do. But when threshold is large enough (on my \r\nmachine that happens around 250) IE starts passing the arrays in by value. Google Closure \r\ncompiler has changed my original source from making local copies to modifying the arguments \r\nbeing passed into the sort comparator ... but as a result of this IE behavior the Closure compiled \r\ncode breaks.\n\n[Context/Logs]:\n- So after looking into this some more, I've learned that arrays are always passed by reference, but that only \r\nmeans you can change attributes and individual items in an array. So for example:\r\n\r\nvar a = [1, 2, 3, 4];\r\nvar f = function(x){x = null;};\r\nf(a);\r\n// the value of a will remain [1, 2, 3, 4]\r\n// but if instead:\r\nvar g = function(x){x[0] = null;};\r\ng(a);\r\n// the value of a is now [null, 2, 3, 4]\r\n\r\nIn the attached example, the Google Closure compiled version is akin to the function f above, which means \r\nthat the value of the arrays should *not* be changing. In IE, if the threshold is set high enough, however, they \r\ndo indeed change. So the original report may not be accurate, but this is a real issue.\n- There is definitely something odd occurring here, running it under the debugger with \r\nIE7, it reports \"Number expected\".\r\n\r\nAdding a \"Debug.writeln(\"blah\")\" in the \"right\" spot and the problem goes away:\r\n    var g_test=function(f,c){\r\n        var g=[\"aaaaaa\",\"bbbbbb\"];\r\n        c=(function(a,b){\r\n          for(var d=[],e=0;e b)});\r\n        f.innerHTML=typeof c[0]+\" \"+c.join(\" --- \")\r\n     };\n- ... [Middle Discussions Snipped for Brevity] ...\n- Perhaps a @nocoalesce JSDoc tag?\n- fixed by r171"}
{"project_id": "Closure", "bug_id": "26", "source_type": "google", "llm_input_text": "[Title]: @define does not support strings\n[Symptom]:\n$ java -jar compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --define='test.VERSION=1.0.0' --js_output_file \r\ntest-min.js --js test.js\r\njava.lang.RuntimeException: --define flag syntax invalid: test.VERSION=1.0.0\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.createDefineReplacements(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.initOptionsFromFlags(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.createOptions(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\n\r\ntest.js:\r\n/** @define {string} */\r\ntest.VERSION = &quot;&quot;;\r\n\r\n\r\nI have tried both of these:\r\n--define='test.VERSION=1.0.0'\r\n--define='test.VERSION=&quot;1.0.0&quot;'\r\n\r\nBoth generate the same error.\n\n[Context/Logs]:\n- What OS and shell are you using? Can you escape your quotes? Something like this:\r\n\r\njava -jar compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS\r\n--define=\\'test.VERSION=1.0.0\\' --js_output_file\n- These work:\r\n--define=test.VERSION=\\'1.0.0\\'\r\n--define=\"test.VERSION='1.0.0'\"\r\n\r\nI didn't expect it to require single-quotes instead of double-quotes around the \r\nstring. ;-)\n- This issue was closed by revision r173.\n- Thanks for the update to support both single and double quotes. ;-)"}
{"project_id": "Closure", "bug_id": "27", "source_type": "google", "llm_input_text": "[Title]: '\"--help\" is not a valid option'\n[Symptom]:\nWhat steps will reproduce the problem? \n1. java -jar compiler.jar --help\r\n\r\n What is the expected output? What do you see instead? \nExpected help text. Help text about the flags are displayed, but initially \r\ncompiler claims: '&quot;--help&quot; is not a valid option'.\r\n\r\n What version of the product are you using? On what operating system? \nClosure 20100330 release, Windows Vista.\r\n\r\n Please provide any additional information below. \nI also noticed the structure of the help text is also different from \r\nprevious releases(?). Also &quot;--help&quot; is not listed among the flags.\r\n\r\n// Fredrik\n\n[Context/Logs]:\n- This issue was closed by revision r175."}
{"project_id": "Closure", "bug_id": "28", "source_type": "google", "llm_input_text": "[Title]: incorrect extern annotation for Option\n[Symptom]:\nWhat steps will reproduce the problem? \n1. var opt = new Option('hello', 1); // or some other nr of params != 4\r\n2. compile\r\n\r\nWhat is the expected output? \r\nNo warning. All parameters in the constructor are optional.\r\n\r\nWhat do you see instead?\r\n&quot;WARNING - Function Option: called with 2 argument(s). Function requires at \r\nleast 4 argument(s) and no more than 4 argument(s).&quot;\r\n\r\n What version of the product are you using? On what operating system? \nWindows Vista. Closure 20100330 release\r\n\r\n Please provide any additional information below. \nsee for example [URL]\r\n\r\n// Fredrik\n\n[Context/Logs]:\n- Patch. this is the new annotation that should be attached to Option in the \r\nexterns/deprecated.js file.\r\n-------------------------------\r\n/**\r\n * @param {string=} opt_text\r\n * @param {string=} opt_value\r\n * @param {boolean=} opt_defaultSelected\r\n * @param {boolean=} opt_selected\r\n * @constructor\r\n * @extends {Element}\r\n */\r\nfunction Option(opt_text, opt_value, opt_defaultSelected, opt_selected) {}\r\n--------------------------------------\n- This issue was closed by revision r178.\n- thanks! don't worry, we got it. it just got batched with some other changes."}
{"project_id": "Closure", "bug_id": "29", "source_type": "google", "llm_input_text": "[Title]: Unnesesary parenthese inserted\n[Symptom]:\nSteps:\r\nIn simple mode compile:\r\n  a?b=1:c=2\r\n\r\nThe output will be:\r\n  a?(b=1):(c=2)\r\n\r\nThis is a very common pattern due to the translation of &quot;if&quot; to &quot;?:&quot; by the\r\ncompiler.\n\n[Context/Logs]:\n- Fixed in r243."}
{"project_id": "Closure", "bug_id": "30", "source_type": "google", "llm_input_text": "[Title]: var_args not portable for setTimeout and setInterval\n[Symptom]:\n(reposting as suggested from discuss)\r\n\r\nCurrently externs/window.js has setTimeout as\r\n\r\n/**\r\n * @param {Function|string} callback\r\n * @param {number} delay\r\n * @param {...*} var_args\r\n * @return {number}\r\n * @see [URL]\r\n */\r\nfunction setTimeout(callback, delay, var_args) {}\r\n\r\nsetInterval is similar.\r\n\r\nThe var_args are passed in to the callback when it is called.  I've\r\ntested this behavior under Chrome, Safari, and Firefox.  However,\r\nMicrosoft's documentation on the method has only an optional third\r\nparameter indicating the language that the callback should be\r\ninterpreted as[1].  W3 Schools also documents this[2].\r\n\r\nI don't have IE handy to test this behavior, but if it behaves\r\ninconsistently I think we should remove the var_args for both\r\nsetTimeout and setInterval, so that folks at least get a warning.\r\n\r\n1] [URL]\r\n2] [URL]\n\n[Context/Logs]:\n- i've confirmed that this is inconsistent with IE8.\n- The externs have been updated to use the common definition of setTimeout and setInterval."}
{"project_id": "Closure", "bug_id": "31", "source_type": "google", "llm_input_text": "[Title]: Closure does not handle getters/setters correctly\n[Symptom]:\nI have an object that has a getter for the property test like this:\r\n\r\n&gt;&gt; var x={get test() {return 42}};\r\n\r\nThen x.test should give 42. But closure converts the getter into a function:\r\n\r\n&gt;&gt; var x={test:function(){return 42}};\r\n\r\nThis happens with all optimization modes, even with whitespace only.\n\n[Context/Logs]:\n- Getters are not currently supported as they are not part of EmcaScript 3, but as they\r\nare part of EcmaScript 5 it is something will need to be supported.  \r\n\r\nYou should at least get a parser error.  I'm curious what the Rhino AST looks like\r\nfor this.\n- Yes, a parser error would be preferable to silently converting them to functions. But \r\nit would be even better if there was proper support for them. After all, they are \r\nsupported by all \"good\" browsers.\n- Fixed in r199"}
{"project_id": "Closure", "bug_id": "32", "source_type": "google", "llm_input_text": "[Title]: Would like JSCompiler to error if a comment block never ends\n[Symptom]:\nWhat steps will reproduce the problem? \n1. I wrote the following code into my .js file:\r\n\r\n/**\r\n * &quot;Resets&quot; this view by requesting the root view.\r\n *\r\ndetroit.picker.CropView.prototype.reset_ = function() {\r\n  ...\r\n};\r\n\r\n2. Compiled\r\n3. Ran\r\n\r\nWhat is the expected output?\r\n\r\nShould fail to compile!  If the comment block never ends in a file, it \r\nshould be an error.\r\n\r\nWhat do you see instead?\r\n\r\nCompiler was happy, browser was happy, up until I needed to call reset_.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nLatest and greatest.\n\n[Context/Logs]:\n- when i compile with that code, i get an \"unterminated comment\" error. are you sure?\n- Are there some flags you're using that I should enable?  I'm definitely sure the code \r\ncompiled.  Maybe it's the result of another file being concatted with it before it was \r\nbuilt, which would could have had a */ as part of the copyright notice.  Would \r\nJSCompiler be concatting before verification?\n- nope. we never concatenate files naively. \r\n\r\ndo you have repro steps? maybe there's some other tool in your build setup that's \r\nconcatenating things together?\n- since i can't repro, i'm marking as invalid. please reopen if you can come up with \r\nrepro steps. i still think the problem is probably rooted in some other build tool \r\nyou're using."}
{"project_id": "Closure", "bug_id": "33", "source_type": "google", "llm_input_text": "[Title]: Only assignment to \"this\" issues a \"dangerous use of the global this object\" warning.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile this:\r\n//////////////////////////////////////////\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n/** @constructor */\r\nfunction Foo()\r\n{\r\n    this._bar = null;\r\n};\r\n\r\n/** @this {Foo} */\r\nfunction writeMethodWithAnnotation()\r\n{\r\n   this._bar = 123; // no warning. ok\r\n}\r\n\r\n/** @this {Foo} */\r\nfunction readMethodWithAnnotation()\r\n{\r\n   return this._bar; // no warning. ok\r\n}\r\n\r\n//----\r\n\r\nfunction writeMethodWithoutAnnotation()\r\n{\r\n   this._bar = 123; // warning. ok.\r\n}\r\n\r\nfunction readMethodWithoutAnnotation()\r\n{\r\n   return this._bar; // &lt;- No warning!\r\n}\r\n//////////////////////////////////////////\r\n\r\n What is the expected output? What do you see instead? \n- Should get two &quot;dangerous use of the global this object&quot; warnings in the \r\nreadMethodWithAnnotation and writeMethodWithoutAnnotation functions.\r\n- Only writeMethodWithoutAnnotation warns.\r\n\r\n What version of the product are you using? On what operating system? \nBoth 20100330 and online compiler.\r\n\r\n Please provide any additional information below. \nref: [URL] \r\n&quot;To prevent compiler warnings, you must use a @this annotation whenever \r\nthis appears in a function that is neither a prototype method nor a \r\nfunction marked as a @constructor.&quot;\r\n\r\nThis also means the example code in the docs won't trig a warning.\r\n-----\r\n/**\r\n * Returns the roster widget element.\r\n * @this {Widget} &lt;-- currently this doesn't matter\r\n * @return {Element}\r\n */\r\nfunction() {\r\n  return this.getComponent().getElement();\r\n});\r\n------\r\n\r\n// Fredrik\n\n[Context/Logs]:\n- thanks for the report. i think this may have been deliberate, but i don't remember why \r\nat the moment. it seems wrong now that you mention it. i'll take a look and report \r\nback.\n- Great. Worth noting might be that the title is slightly misleading, it isn't actually \r\nrestricted to direct assignment to \"this\". Rather anything that \"looks like\" assignment \r\nwith \"this\" appearing in the LHS triggers the warning. \r\n\r\nfunction test()\r\n{\r\n   // multi-level test\r\n   this.asdf().asdf().x = 123; // warns. ok\r\n   return this.asdf().asdf().x; // No warning (similar to the widget example in docs)\r\n}\n- the problem is that we *do* want to allow things like:\r\n\r\nfunction createGetter() {\r\n  return function() { return this; };\r\n}\r\n\r\nwithout special annotation.\r\n\r\ni think the new heuristic should probably be something like \"warn if a property of \r\nthis is being assigned or accessed\"\n- fixed in r234"}
{"project_id": "Closure", "bug_id": "34", "source_type": "google", "llm_input_text": "[Title]: Error 23: java.lang.NullPointerException\n[Symptom]:\nWhat steps will reproduce the problem? \nRun the attached JS through the compiler.\r\n\r\n What is the expected output? What do you see instead? \n\r\n\r\n What version of the product are you using? On what operating system? \nError through both the web interface and via php and curl.\r\n\r\n Please provide any additional information below. \nI posted about this yesterday here:\r\n[URL]\r\ndiscuss/browse_thread/thread/ \r\nI've narrowed the offending code down as much as I can to still reproduce \r\nthe error.\r\n\r\nThe error has something to do with the unused variables in the addListener \r\nfunctions. If I change:\r\n\r\nchrome.tabs.onSelectionChanged.addListener(function(tabId, selectInfo){\r\n   reset_idle();\r\n});\r\n\r\nto\r\n\r\nchrome.tabs.onSelectionChanged.addListener(function(){\r\n   reset_idle();\r\n});\r\n\r\nI get no error.\n\n[Context/Logs]:\n- A slightly simpler test case:\r\n\r\nfunction _a(){\r\n(function(x){ _b(); })(1);\r\n}\r\n\r\nfunction _b(){\r\n _a();\r\n}\r\n\r\nremoving either the call to _b or _a causes the problem to disappear.\n- This issue was closed by revision r237."}
{"project_id": "Closure", "bug_id": "35", "source_type": "google", "llm_input_text": "[Title]: Prototypes declared with quotes produce a JSC_USED_GLOBAL_THIS warning.\n[Symptom]:\nCompiling the following code (in advanced optimizations with VERBOSE\r\nwarning levels):\r\n\r\n/** @constructor */\r\nfunction MyClass() {}\r\nMyClass.prototype[&quot;MyMethod&quot;] = function(a) {\r\n  this.a = a;\r\n}\r\nwindow[&quot;MyClass&quot;] = MyClass;\r\n\r\nResults in the following warning: &quot;dangerous use of the global this\r\nobject.&quot; This notation is convenient to declare a prototype that is purely\r\nused for export purposes. The warning can be suppressed by using an @this\r\nnotation.\r\n\r\nGiven the following externs:\r\n\r\n/**@interface */\r\nfunction MyParent() {}\r\n/** @param {*} a */\r\nMyParent.prototype.MyMethod = function(a) {}\r\n\r\nAnd the following code:\r\n\r\n/**\r\n* @constructor\r\n* @implements {MyParent}\r\n*/\r\nfunction MyClass() {}\r\nMyClass.prototype[&quot;MyMethod&quot;] = function(a) {\r\n  this.a2 = a;\r\n}\r\nwindow[&quot;MyClass&quot;] = MyClass;\r\n\r\nThe compiler also produces the waring: &quot;property MyMethod on interface\r\nMyParent is not implemented by type MyClass&quot;.\n\n[Context/Logs]:\n- This issue was closed by revision r239."}
{"project_id": "Closure", "bug_id": "36", "source_type": "google", "llm_input_text": "[Title]: bad variable inlining in closure\n[Symptom]:\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\nfunction foo() {\r\n var arr = [1, 2, 3, 4, 5];\r\n for (var i = 0, l = arr.length; i &lt; l; i++) {\r\n   var j = arr[i];\r\n   (function() {\r\n     var k = j;\r\n     setTimeout(function() { console.log(k); }, 0);\r\n   })();\r\n }\r\n}\r\nfoo();\r\n\r\n&quot;k&quot; will get incorrectly inlined.\n\n[Context/Logs]:\n- Clearly a problem with InlineVariables\n- yep. i know the exact problem. i'll have a patch tomorrow.\n- This issue was closed by revision r241."}
{"project_id": "Closure", "bug_id": "37", "source_type": "google", "llm_input_text": "[Title]: Bug with labeled loops and breaks\n[Symptom]:\nWhat steps will reproduce the problem? \nTry to compile this code with the closure compiler : \r\nvar i = 0; \r\nlab1: do{ \r\n    lab2: do{ \r\n        i++; \r\n        if (1) { \r\n            break lab2; \r\n        } else { \r\n            break lab1; \r\n        } \r\n    } while(false); \r\n} while(false); \r\n\r\nconsole.log(i); \r\n\r\n What is the expected output? What do you see instead? \nThe generated code produced is :\r\nvar a=0;do b:do{a++;break b}while(0);while(0);console.log(a); \r\n\r\nWhich works on all browsers except IE (Looks like IE doesn't like \r\nthe missing brackets just after the first do instruction).\r\n\r\n What version of the product are you using? On what operating system? \nI am using the version of Jun 16 (latest) on ubuntu 10\r\n\r\n Please provide any additional information below. \nStrangely, this bug doesn't happen when I use PRETTY_PRINT formatting option.\n\n[Context/Logs]:\n- This issue was closed by revision r255."}
{"project_id": "Closure", "bug_id": "38", "source_type": "google", "llm_input_text": "[Title]: bad type inference for != undefined\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n/** @param {string} x */\r\nfunction g(x) {}\r\n\r\n/** @param {undefined} x */\r\nfunction f(x) {\r\n  if (x != undefined) { g(x); }\r\n}\r\n\r\n What is the expected output? What do you see instead? \n\r\nJSC_DETERMINISTIC_TEST: condition always evaluates to false\r\nleft : undefined\r\nright: undefined at line 6 character 6\r\nif (x != undefined) { g(x); }\r\n      ^\r\nJSC_TYPE_MISMATCH: actual parameter 1 of g does not match formal parameter\r\nfound   : undefined\r\nrequired: string at line 6 character 24\r\nif (x != undefined) { g(x); }\r\n                        ^\r\n\r\nthe second warning is bogus.\n\n[Context/Logs]:\n- This issue was closed by revision r265."}
{"project_id": "Closure", "bug_id": "39", "source_type": "google", "llm_input_text": "[Title]: invalid error thrown when compressing a file named \"window.js\"\n[Symptom]:\nWhat steps will reproduce the problem? \n1. create a file window.js containing &quot;alert('hello world');&quot;\r\n2. compile the file using &quot;java -jar compiler.jar --js=_window.js&quot;\r\n\r\n\r\nWhat is the expected output?\r\nstdout should show: \r\nalert('hello world');\r\n\r\n\r\nWhat do you see instead?\r\nERROR - Duplicate input: window.js\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\n What version of the product are you using? On what operating system? \nusing latest closure compiler (20100616) on macOSX with java 1.6.0_17\r\n\r\n\r\n Please provide any additional information below. \nSimply renaming the file works allow compression to succeed:\r\n\r\n# mv window.js _window.js\r\n# java -jar compiler.jar --js=_window.js\r\nalert('hello world');\n\n[Context/Logs]:\n- This issue was closed by revision r266."}
{"project_id": "Closure", "bug_id": "40", "source_type": "google", "llm_input_text": "[Title]: Lost a JSC_USED_GLOBAL_THIS warning in 0616 release vs 0514\n[Symptom]:\nWhat steps will reproduce the problem? \n//------------------\r\n// should warn &quot;JSC_USED_GLOBAL_THIS: dangerous use of the global this object&quot; in both methods\r\n// none of these warns in 0616 release\r\nvar NS = {\r\n\tread: function()\r\n\t{\r\n\t\treturn this.foo; // does not warn in 0514 release\r\n\t},\r\n\r\n\twrite: function()\r\n\t{\r\n\t\tthis.foo = 123; // warns in 0514 release\r\n\t}\r\n};\r\n\r\n// only the non-inline notation warns in 0616 release\r\nNS.write2 = function()\r\n{\r\n\tthis.foo = 123;\r\n};\r\n\r\n//-----------------------\r\n What is the expected output? What do you see instead? \nSince the 0514 release warned in in the &quot;write&quot; case above I would expect the 0616 to also report this. \r\n\r\n What version of the product are you using? On what operating system? \nAs said above, 20100514 and 20100616 releases.\r\n\r\n Please provide any additional information below. \nI understand that the status is that inline-notation isn't preferred, though I wouldn't expect a previous, correct, warning to disappear. (Since I reported issue #144 I'm also aware of the previous limitation in global this).\n\n[Context/Logs]:\n- Nick you were working on the heuristic for this lately, did you have a comment on this?\n- This issue was closed by revision r270."}
{"project_id": "Closure", "bug_id": "41", "source_type": "google", "llm_input_text": "[Title]: CSS3 'writingMode' not recognised in advanced mode\n[Symptom]:\nelement.style.writingMode was defined in CSS3 but later dropped. However it is supported by IE7 (possibly earlier). It's a useful way to achieve vertical text in IE.\r\n\r\nClosure Compiler will change references of element.style.writingMode to element.style.a, breaking implementation.\r\n\r\nI've attached a patch adding this to the IE css properties.\r\n\r\nCheers,\r\nJake.\n\n[Context/Logs]:\n- Jake have you signed a CLA as described here:\r\n[URL]\n- Just have.\r\n\r\nIt's a very short fix, if it makes things easier I could delete the diff and you guys could treat this has a simple bug report.\n- @john: for patches <10 lines, we can also just cc dan bentley for legal approval to accept it without a cla\r\n\r\nbut it doesn't hurt to have a cla, since it will make bigger patches go faster in the future.\n- This issue was closed by revision r279."}
{"project_id": "Closure", "bug_id": "42", "source_type": "google", "llm_input_text": "[Title]: function call mis-optimized to method call\n[Symptom]:\nGiven\r\n    (0, foo[i])('bar')\r\nclosure compiler optimizes this to\r\n    foo[Link: i]\r\n\r\nThis is semantics breaking because now foo[i] is called with &quot;this&quot; being foo instead of the global object.\r\n\r\nConsider the listener code below\r\n  function EventDispatcher() {\r\n    var listeners = [];\r\n    this.addListener = function (listener) {\r\n      listeners[listeners.length] = listener;\r\n    };\r\n    this.fire = function (event) {\r\n      for (var i = 0, n = listeners.length; i &lt; n; ++i) {\r\n        (0, listeners[i])(event);\r\n      }\r\n    };\r\n  }\r\n\r\nEach listener now has access to all the other listeners violating EventDispatcher's ability to keep its privates private.\n\n[Context/Logs]:\n- There is another instance of this problem.\r\n\r\nGiven\r\n(function () {\r\n    var x = foo[i];\r\n    x('bar')\r\n})()\r\nclosure compiler optimizes this to\r\n    (function(){foo[Link: i]})();\r\n\r\nThis is semantics breaking in the same way as the latter if fire is rewritten to:\r\n\r\n    this.fire = function (event) {\r\n      for (var i = 0, n = listeners.length; i < n; ++i) {\r\n        var listener = listeners[i];\r\n        listener(event);\r\n      }\r\n    };\n- i think i have a good idea on how to fix these in a comprehensive way. thanks for letting us know.\n- ... [Middle Discussions Snipped for Brevity] ...\n- A basic fix as introduced in r282, additional testing is required to confirm no new CALL sites are created without taking the \"Free call\" annotation into consideration.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "43", "source_type": "google", "llm_input_text": "[Title]: Unsigned Shift Right (>>>) bug operating on negative numbers\n[Symptom]:\nWhat steps will reproduce the problem? \ni = -1 &gt;&gt;&gt; 0 ;\r\n\r\n What is the expected output? What do you see instead? \nExpected: i = -1 &gt;&gt;&gt; 0 ;  // or // i = 4294967295 ;\r\nInstead: i = -1 ;\r\n\r\n What version of the product are you using? On what operating system? \nThe UI version as of 7/18/2001 (http://closure-compiler.appspot.com/home)\r\n\r\n Please provide any additional information below. \n-1 &gt;&gt;&gt; 0 == 4294967295 == Math.pow( 2, 32 ) - 1\r\nTest in any browser and/or See ECMA-262-5 11.7.3\n\n[Context/Logs]:\n- This issue was closed by revision r291."}
{"project_id": "Closure", "bug_id": "44", "source_type": "google", "llm_input_text": "[Title]: Add option to turn off string escaping\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. I'm having large files with strings (patterns for hyphenation, see [URL] and no-ASCII-characters.\r\n2. Minifying with closure compiler makes them bigger\r\n    ru.js (orig): 41'216 Bytes\r\n    ru.js (orig, gzip): 17'124 Bytes\r\n    ru.js (mini): 110'770 Bytes\r\n    ru.js (mini, gzip): 18'860 Bytes\r\n\r\nWhat is the expected output?\r\nI'd like to be able to turn OFF the string escaping mechanism.\r\n\r\nThanks\n\n[Context/Logs]:\n- Can you be more specific? What types of strings are being escaped that do not need to be?  Can you provide a small sample? As this show the compiled results as 20.26KB (7.62KB gzipped). Which is significantly smaller than what you are showing.\r\n\r\n[URL]\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @code_url [URL]\r\n// ==/ClosureCompiler==\n- I'm guessing that you just want non-ascii characters to be encoded in a compact way.\r\n\r\nAre you looking for the --charset flag?\n- ... [Middle Discussions Snipped for Brevity] ...\n- It looks like there's an option being set on the command line that isn't getting passed through in all cases.  It looks like this isn't fixed when calling from ant task either.\n- We do not plan to add a charset option to the webservice API.\r\n\r\nIf you are having problems with the command-line API, then please file a bug with specific details about how you are invoking the compiler, what you see, and what you expect to see. we'd be happy to look into it."}
{"project_id": "Closure", "bug_id": "45", "source_type": "google", "llm_input_text": "[Title]: jscomp Ant Task (CompileTask) Does Not Fail Build on Failed JS Compilation\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Using the Closure Compiler Ant task provided by com.google.javascript.jscomp.ant.CompileTask, I noticed that it does not fail a build in the event that an error occurs with compilation.  Even if the JavaScript resource I'm attempting to compile contains blatant syntax errors, Ant claims the CompileTask was successful and continues with the build even though the Closure compiler encountered an error ...\r\n\r\nBuildfile: /opt/eclipse-workspace/jscomp-fails/build.xml\r\ncompile:\r\n   [jscomp] Compiling 1 file(s) with 36 extern(s)\r\n   [jscomp] /opt/eclipse-workspace/jscomp-fails/dumb.js:3: ERROR - Parse error. syntax error\r\n   [jscomp] if(a=)jjj\r\n   [jscomp]       ^\r\n   [jscomp] 1 error(s), 0 warning(s)\r\nBUILD SUCCESSFUL\r\nTotal time: 1 second\r\n\r\nNote the &quot;BUILD SUCCESSFUL&quot; here.  Seems silly to want the build to continue if your JavaScript fails to compile.\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nI would expect CompileTask to throw a BuildException if the compilation failed for any reason (e.g., if((result = compiler.compile(...)) != success)).  This halts the build process at the target that generated the error and lets me fix my JavaScript before I continue.\r\n\r\nWith a proper fix in place (throwing a BuildException on failure) a compilation error would look like this ...\r\n\r\nBuildfile: /opt/eclipse-workspace/jscomp-fails/build.xml\r\ncompile:\r\n   [jscomp] Compiling 1 file(s) with 36 extern(s)\r\n   [jscomp] /opt/eclipse-workspace/jscomp-fails/dumb.js:3: ERROR - Parse error. syntax error\r\n   [jscomp] if(a=)jjj\r\n   [jscomp]       ^\r\n   [jscomp] 1 error(s), 0 warning(s)\r\n\r\nBUILD FAILED\r\n/opt/eclipse-workspace/jscomp-fails/build.xml:9: Compilation failed.\r\n\r\nNote the &quot;BUILD FAILED&quot; here.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nTop of trunk, SVN rev 361.\r\n\r\n\r\n Please provide any additional information below. \n\r\nPossible patch suggestion is attached.\n\n[Context/Logs]:\n- Ideally, we'd like you to sign a CLA so that we can accept patches from you in the future. A CLA basically says that you own this code, and that you are giving us permission to use it. See:\r\n[URL]\r\n\r\nHowever, this is a small change. Dan, can we accept this without a CLA?\n- This issue was closed by revision r367.\n- Fix verified with rev 374; it's working great. Thanks!"}
{"project_id": "Closure", "bug_id": "46", "source_type": "google", "llm_input_text": "[Title]: Invalid left-hand side of assignment not detected\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile this:\r\n  var x=0,y=1;x||y=8\r\n\r\n What is the expected output? What do you see instead? \nI expect an error, because this is parsed as (x||y)=8, which is an invalid left-hand side of an assignment. Instead, I get\r\n  var x=0,y=1;x||y=8;\r\nwhich, like the input, is invalid code.\n\n[Context/Logs]:\n- This issue was closed by revision r685."}
{"project_id": "Closure", "bug_id": "47", "source_type": "google", "llm_input_text": "[Title]: jscomp Ant Task (CompileTask) Does Not Fail Build on Failed JS Compilation\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Using the Closure Compiler Ant task provided by com.google.javascript.jscomp.ant.CompileTask, I noticed that it does not fail a build in the event that an error occurs with compilation.  Even if the JavaScript resource I'm attempting to compile contains blatant syntax errors, Ant claims the CompileTask was successful and continues with the build even though the Closure compiler encountered an error ...\r\n\r\nBuildfile: /opt/eclipse-workspace/jscomp-fails/build.xml\r\ncompile:\r\n   [jscomp] Compiling 1 file(s) with 36 extern(s)\r\n   [jscomp] /opt/eclipse-workspace/jscomp-fails/dumb.js:3: ERROR - Parse error. syntax error\r\n   [jscomp] if(a=)jjj\r\n   [jscomp]       ^\r\n   [jscomp] 1 error(s), 0 warning(s)\r\nBUILD SUCCESSFUL\r\nTotal time: 1 second\r\n\r\nNote the &quot;BUILD SUCCESSFUL&quot; here.  Seems silly to want the build to continue if your JavaScript fails to compile.\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nI would expect CompileTask to throw a BuildException if the compilation failed for any reason (e.g., if((result = compiler.compile(...)) != success)).  This halts the build process at the target that generated the error and lets me fix my JavaScript before I continue.\r\n\r\nWith a proper fix in place (throwing a BuildException on failure) a compilation error would look like this ...\r\n\r\nBuildfile: /opt/eclipse-workspace/jscomp-fails/build.xml\r\ncompile:\r\n   [jscomp] Compiling 1 file(s) with 36 extern(s)\r\n   [jscomp] /opt/eclipse-workspace/jscomp-fails/dumb.js:3: ERROR - Parse error. syntax error\r\n   [jscomp] if(a=)jjj\r\n   [jscomp]       ^\r\n   [jscomp] 1 error(s), 0 warning(s)\r\n\r\nBUILD FAILED\r\n/opt/eclipse-workspace/jscomp-fails/build.xml:9: Compilation failed.\r\n\r\nNote the &quot;BUILD FAILED&quot; here.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nTop of trunk, SVN rev 361.\r\n\r\n\r\n Please provide any additional information below. \n\r\nPossible patch suggestion is attached.\n\n[Context/Logs]:\n- Ideally, we'd like you to sign a CLA so that we can accept patches from you in the future. A CLA basically says that you own this code, and that you are giving us permission to use it. See:\r\n[URL]\r\n\r\nHowever, this is a small change. Dan, can we accept this without a CLA?\n- This issue was closed by revision r367.\n- Fix verified with rev 374; it's working great. Thanks!"}
{"project_id": "Closure", "bug_id": "48", "source_type": "google", "llm_input_text": "[Title]: Add option to specify output encoding\n[Symptom]:\nCurrently when input contains a lot of Unicode characters, like:\r\n\r\nalert(&quot;\u041d\u0435 \u0437\u043d\u0430\u044e, \u0447\u0442\u043e \u0432\u044b\u0439\u0434\u0435\u0442 \u0438\u0437 \u043c\u043e\u0435\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043d\u0443\u043a\u0430.&quot;);\r\n\r\nThe Closure compiler replaces all those characters with \\uXXXX:\r\n\r\nalert(&quot;\\u041d\\u0435 \\u0437\\u043d\\u0430\\u044e, \\u0447\\u0442\\u043e \\u0432\\u044b\\u0439\\u0434\\u0435\\u0442 \\u0438\\u0437 \\u043c\\u043e\\u0435\\u0433\\u043e \\u0441\\u0442\\u0430\\u0440\\u0448\\u0435\\u0433\\u043e \\u0432\\u043d\\u0443\\u043a\\u0430.&quot;);\r\n\r\nThe result is that when you have a lot of Unicode characters inside your JavaScript, the Closure compiler (despite all it's clever code optimizations) produces larger output than YUI compressor.\r\n\r\nI understand that there are reasons why Google prefers all it's JavaScript to be in plain ASCII, but not everyone thinks that this is the right compromise to make.\n\n[Context/Logs]:\n- Is the --charset option not working for you?\n- I tried a few days ago and it wasn't doing what I was expecting.\r\n\r\nAlso we should have a simpler flag.\n- ... [Middle Discussions Snipped for Brevity] ...\n- better patch\n- This issue was closed by revision r394."}
{"project_id": "Closure", "bug_id": "49", "source_type": "google", "llm_input_text": "[Title]: Missing type-checks for var_args notation\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile this:\r\n//-------------------------------------\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @warning_level VERBOSE\r\n// @output_file_name default.js\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\n/**\r\n* @param {...string} var_args\r\n*/\r\nfunction foo(var_args) {\r\n    return arguments.length;\r\n}\r\n\r\nfoo('hello'); // no warning - ok\r\nfoo(123); // warning - ok\r\nfoo('hello', 123); // no warning! error.\r\n//-------------------------------------\r\n\r\n What is the expected output? What do you see instead? \nShould get a type-mismatch warning for the second parameter in the third foo() call.\r\n\r\n What version of the product are you using? On what operating system? \nBoth online compiler and the 20100616 release.\r\n\r\n Please provide any additional information below. \nSeems like the type-checker treats 'var_args' as a single param and thus fails to type check the subsequent parameters.\r\n\r\n// Fredrik\n\n[Context/Logs]:\n- This issue was closed by revision r402."}
{"project_id": "Closure", "bug_id": "50", "source_type": "google", "llm_input_text": "[Title]: ant test fails to run all tests, sometimes gives OOM error\n[Symptom]:\nWhat steps will reproduce the problem? \n1. svn checkout [URL] closure-compiler-read-only\r\n2. cd closure-compiler-read-only\r\n3. ant clean &amp;&amp; ant test\r\n\r\n What is the expected output? What do you see instead? \nExpected: all tests to run\r\n\r\nInstead: the tests begin running, until:\r\n    [junit] Testcase: testIndividualPasses took 0.105 sec\r\n    [junit] Testcase: testCombinedPasses took 0 sec\r\n    [junit] Testcase: testScopes took 0.039 sec\r\n    [junit] Testsuite: com.google.javascript.jscomp.CompilerOptionsTest\r\n    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.007 sec\r\n    [junit] \r\n    [junit] Testcase: testDefines took 0.007 sec\r\n    [junit] Testsuite: com.google.javascript.jscomp.CompilerRunnerTest\r\njava.lang.OutOfMemoryError: PermGen space\r\n\tat org.apache.tools.ant.DefaultLogger.getBuildFailedMessage(DefaultLogger.java:175)\r\n\tat org.apache.tools.ant.DefaultLogger.buildFinished(DefaultLogger.java:146)\r\n\tat org.apache.tools.ant.Project.fireBuildFinished(Project.java:2008)\r\n\tat org.apache.tools.ant.Main.runBuild(Main.java:718)\r\n\tat org.apache.tools.ant.Main.startAnt(Main.java:199)\r\n\tat org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)\r\n\tat org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)\r\nPermGen space\r\n\r\n What version of the product are you using? On what operating system? \nRevision 4 of Closure Compiler\r\n\r\nApache Ant version 1.7.0 compiled on July 20 2009\r\n\r\njava version &quot;1.6.0_15&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_15-b03-219)\r\nJava HotSpot(TM) 64-Bit Server VM (build 14.1-b02-90, mixed mode)\r\n\r\n\r\n Please provide any additional information below. \n\r\nIf I run ant test again without running ant clean the output ends with\r\n    [junit] Testcase: testIndividualPasses took 0.154 sec\r\n    [junit] Testcase: testCombinedPasses took 0.001 sec\r\n    [junit] Testcase: testScopes took 0.04 sec\r\n    [junit] Testsuite: com.google.javascript.jscomp.CompilerOptionsTest\r\n    [junit] Tests run: 1, Failures: 0, Errors: \n...[Description Truncated]...\n\n[Context/Logs]:\n- So it seems like there's a space leak (in ant?  ant/junit?).  A PermGen space error is an \r\nerror indicating that the permanent generation has gotten full, meaning that there \r\nare too many long lived objects.  There are two simple solutions, one is for the user \r\nto increase the limits set by the jvm:\r\n\r\nANT_OPTS=\"-Xmx2048m -XX:MaxPermSize=1024m\"; ant clean && time ant test\r\n\r\nThe other is to fork for each test, so in build.xml:\r\n-     \r\n+     \r\n\r\nForking has a speed penalty, so running all tests goes from ~60 seconds to ~140 \r\nseconds.  On the other hand, I don't see any way to set JVM arguments to ant once \r\nyou're in ant.\n- fixed as of revision 21. thanks for the hint!"}
{"project_id": "Closure", "bug_id": "51", "source_type": "google", "llm_input_text": "[Title]: Type checker misses annotations on functions defined within functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code under --warning_level VERBOSE\r\n\r\nvar ns = {};\r\n\r\n/** @param {string=} b */\r\nns.a = function(b) {}\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n2. Observe that the type checker correctly emits one warning, as 123 \r\ndoesn't match the type {string}\r\n\r\n3. Now compile the code with ns.a defined within an anonymous function, \r\nlike so:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n4. Observe that a warning is emitted for calling ns.a with 0 parameters, and \r\nnot for the type error, as though the @param declaration were ignored. \r\n\r\n What version of the product are you using? On what operating system? \nr15\r\n\r\n Please provide any additional information below. \n\r\nThis sort of module pattern is common enough that it strikes me as worth \r\nsupporting.\r\n\r\nOne last note to make matters stranger: if the calling code isn't itself within \r\na function, no warnings are emitted at all:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nns.a();\r\nns.a(123);\n\n[Context/Logs]:\n- thanks for the report. I vaguely recall there was a very specific reason why this\r\ncase wasn't handled, but I think that reason might have gone away. I'll play with it\r\nagain and report back.\n- notice that if you define ns.a in a local scope, and use it in a later scope, this will now work.\r\n\r\ni'm still working on the case where you define ns.a in a local scope and call it from a global scope.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I understand now.  #3 is fixed now but not the call from global scope.\n- This issue was closed by revision r2240."}
{"project_id": "Closure", "bug_id": "52", "source_type": "google", "llm_input_text": "[Title]: Type checker misses annotations on functions defined within functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code under --warning_level VERBOSE\r\n\r\nvar ns = {};\r\n\r\n/** @param {string=} b */\r\nns.a = function(b) {}\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n2. Observe that the type checker correctly emits one warning, as 123 \r\ndoesn't match the type {string}\r\n\r\n3. Now compile the code with ns.a defined within an anonymous function, \r\nlike so:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n4. Observe that a warning is emitted for calling ns.a with 0 parameters, and \r\nnot for the type error, as though the @param declaration were ignored. \r\n\r\n What version of the product are you using? On what operating system? \nr15\r\n\r\n Please provide any additional information below. \n\r\nThis sort of module pattern is common enough that it strikes me as worth \r\nsupporting.\r\n\r\nOne last note to make matters stranger: if the calling code isn't itself within \r\na function, no warnings are emitted at all:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nns.a();\r\nns.a(123);\n\n[Context/Logs]:\n- thanks for the report. I vaguely recall there was a very specific reason why this\r\ncase wasn't handled, but I think that reason might have gone away. I'll play with it\r\nagain and report back.\n- notice that if you define ns.a in a local scope, and use it in a later scope, this will now work.\r\n\r\ni'm still working on the case where you define ns.a in a local scope and call it from a global scope.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I understand now.  #3 is fixed now but not the call from global scope.\n- This issue was closed by revision r2240."}
{"project_id": "Closure", "bug_id": "53", "source_type": "google", "llm_input_text": "[Title]: Type checker misses annotations on functions defined within functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code under --warning_level VERBOSE\r\n\r\nvar ns = {};\r\n\r\n/** @param {string=} b */\r\nns.a = function(b) {}\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n2. Observe that the type checker correctly emits one warning, as 123 \r\ndoesn't match the type {string}\r\n\r\n3. Now compile the code with ns.a defined within an anonymous function, \r\nlike so:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n4. Observe that a warning is emitted for calling ns.a with 0 parameters, and \r\nnot for the type error, as though the @param declaration were ignored. \r\n\r\n What version of the product are you using? On what operating system? \nr15\r\n\r\n Please provide any additional information below. \n\r\nThis sort of module pattern is common enough that it strikes me as worth \r\nsupporting.\r\n\r\nOne last note to make matters stranger: if the calling code isn't itself within \r\na function, no warnings are emitted at all:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nns.a();\r\nns.a(123);\n\n[Context/Logs]:\n- thanks for the report. I vaguely recall there was a very specific reason why this\r\ncase wasn't handled, but I think that reason might have gone away. I'll play with it\r\nagain and report back.\n- notice that if you define ns.a in a local scope, and use it in a later scope, this will now work.\r\n\r\ni'm still working on the case where you define ns.a in a local scope and call it from a global scope.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I understand now.  #3 is fixed now but not the call from global scope.\n- This issue was closed by revision r2240."}
{"project_id": "Closure", "bug_id": "54", "source_type": "google", "llm_input_text": "[Title]: Externs fixes\n[Symptom]:\nWhile working on a project I discovered several bugs in the externs files.\r\nAttached is a small patch. Please review and apply to closure-compiler.\r\n\r\nI did the following changes:\r\n\r\n* Added type &quot;Image&quot; to HTML5 drawImage method. This method accepts HTML\r\nImage elements but also images created by &quot;new Image()&quot;. Without this fix\r\nthe compiler throws an error because I can't pass &quot;Image&quot; to drawImage. An\r\nalternative fix would be letting Image extend HTMLImageElement (I'm not\r\nsure if this is the real specification of Image).\r\n\r\n* Removed the unannotated Window.prototype.removeEventListener so Window\r\nuses the correctly annotated Node.prototype.removeEventListener instead.\r\n\r\n* Added type annotation to Element.prototype.tagName.\r\n\r\n* Added missing parameter and return value annotation to prompt function.\n\n[Context/Logs]:\n- Thanks for the patch! Before we can accept the patch, we need you to sign a CLA. The \r\nCLA basically says that you own the copyright on any code you submit, and it's ok if \r\nour project uses it. You can fill it out online here:\r\n\r\n[URL]\r\n\r\nif you work at a company that owns the rights to your code, you'll also need a \r\ncorporate CLA. if you don't know if you should sign this or not, you should ask your \r\nemployer.\r\n\r\n[URL]\r\n\r\nLet me know if you have any questions about any of this.\n- I have confirm the author has signed the CLA.\r\n\r\nNick did you want to be the shepherd, if this is still relavent?\n- This issue was closed by revision r471."}
{"project_id": "Closure", "bug_id": "55", "source_type": "google", "llm_input_text": "[Title]: closure-compiler @define annotation does not allow line to be split on 80 characters.\n[Symptom]:\nWhat steps will reproduce the problem? \n1.  Create a JavaScript file with the followiing:\r\n/** @define {string} */\r\nvar CONSTANT = &quot;some very long string name that I want to wrap &quot; +\r\n               &quot;and so break using a + since I don't want to &quot; +\r\n               &quot;introduce a newline into the string.&quot;\r\n2.  Run closure-compiler on the .js file.\r\n3.  See it generate an error on the '+'.\r\n\r\n What is the expected output? What do you see instead? \nIt should work, since the line is assigning a constant value to the var.\r\n\r\n Please provide any additional information below. \nRemoving the '+' and making the string all one line does work correctly.\n\n[Context/Logs]:\n- This issue was closed by revision r474."}
{"project_id": "Closure", "bug_id": "56", "source_type": "google", "llm_input_text": "[Title]: bug with implicit namespaces across modules\n[Symptom]:\nIf there are three modules, the latter two of which depend on the root module:\r\n\r\n// Module A\r\ngoog.provide('apps');\r\n\r\n// Module B\r\ngoog.provide('apps.foo.bar.B');\r\n\r\n// Module C\r\ngoog.provide('apps.foo.bar.C');\r\n\r\nand this is compiled in SIMPLE_OPTIMIZATIONS mode, the following code will be produced:\r\n\r\n// Module A\r\nvar apps={};apps.foo.bar={};apps.foo={};\r\n\r\n// Module B\r\napps.foo.bar.B={};\r\n\r\n// Module C\r\napps.foo.bar.C={};\r\n\r\nThis will result in a runtime error in Module A because apps.foo.bar is assigned before apps.foo.\r\n\r\nThe patch for the fix (with regression test) is available at:\r\n[URL]\n\n[Context/Logs]:\n- Upon further inspection, I do not believe that the patch I supplied is a complete fix. I need to come up with a slightly more complex test case to demonstrate the incompleteness.\n- Actually, upon further further inspection, the patch works for me EXCEPT if you have a goog.provide() for something that is a typedef that is not assigned to anything (and therefore, isn't really provided).\r\n\r\nIf I remove the goog.provide(), then I'm fine.\n- This issue was closed by revision r491."}
{"project_id": "Closure", "bug_id": "57", "source_type": "google", "llm_input_text": "[Title]: bug with implicit namespaces across modules\n[Symptom]:\nIf there are three modules, the latter two of which depend on the root module:\r\n\r\n// Module A\r\ngoog.provide('apps');\r\n\r\n// Module B\r\ngoog.provide('apps.foo.bar.B');\r\n\r\n// Module C\r\ngoog.provide('apps.foo.bar.C');\r\n\r\nand this is compiled in SIMPLE_OPTIMIZATIONS mode, the following code will be produced:\r\n\r\n// Module A\r\nvar apps={};apps.foo.bar={};apps.foo={};\r\n\r\n// Module B\r\napps.foo.bar.B={};\r\n\r\n// Module C\r\napps.foo.bar.C={};\r\n\r\nThis will result in a runtime error in Module A because apps.foo.bar is assigned before apps.foo.\r\n\r\nThe patch for the fix (with regression test) is available at:\r\n[URL]\n\n[Context/Logs]:\n- Upon further inspection, I do not believe that the patch I supplied is a complete fix. I need to come up with a slightly more complex test case to demonstrate the incompleteness.\n- Actually, upon further further inspection, the patch works for me EXCEPT if you have a goog.provide() for something that is a typedef that is not assigned to anything (and therefore, isn't really provided).\r\n\r\nIf I remove the goog.provide(), then I'm fine.\n- This issue was closed by revision r491."}
{"project_id": "Closure", "bug_id": "58", "source_type": "google", "llm_input_text": "[Title]: Exception in FoldConstants while inspect if statements.\n[Symptom]:\nHere is the test case:\r\n\r\nfunction foo() {\r\n      if(sections.length != 1)children[i] = 0;\r\n      else var selectedid = children[i]\r\n} \r\n\r\nHere is the stack trace:\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nGETELEM 2 is not a string node\r\n  Node: Input_0:2:6\r\n      if(sections.length != 1)children[i] = 0;\r\n  Parent: Input_0:1:15\r\nfunction foo() {\r\n\r\n\tat com.google.javascript.rhino.Node.getString(Node.java:847)\r\n\tat com.google.javascript.jscomp.FoldConstants.tryMinimizeIf(FoldConstants.java:813)\r\n\tat com.google.javascript.jscomp.FoldConstants.visit(FoldConstants.java:275)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:463)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:490)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:448)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:245)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:412)\r\n\tat com.google.javascript.jscomp.FoldConstants.process(FoldConstants.java:87)\n\n[Context/Logs]:\n- Fixed pending integration"}
{"project_id": "Closure", "bug_id": "59", "source_type": "google", "llm_input_text": "[Title]: support @lends annotation\n[Symptom]:\nSome javascript toolkits (dojo, base, etc.) have a special way of declaring (what java calls) classes, for example in dojo:\r\n\r\ndojo.declare(&quot;MyClass&quot;, [superClass1, superClass2], { \r\n    foo: function(){ ... } \r\n    bar: function(){ ... } \r\n}); \r\n\r\nJSDoc (or at least JSDoc toolkit) supports this via annotations: \r\n\r\n/** \r\n * @name MyClass \r\n * @class \r\n * @extends superClass1 \r\n * @extends superClass2 \r\n */ \r\ndojo.declare(&quot;MyClass&quot;, [superClass1, superClass2], /** @lends \r\nMyClass.prototype */ { \r\n    foo: function(){ ... } \r\n    bar: function(){ ... } \r\n}); \r\n\r\nThe @lends keyword in particular is useful since it tells JSDoc that foo and bar are part of MyClass's prototype.   But closure compiler isn't picking up on that, thus I get a bunch of errors about &quot;dangerous use of this&quot; inside of foo() and bar(). \r\n\r\nSo, can @lends support be added to the closure compiler?\r\n\r\nThe workaround is to use @this on every method, but not sure if that is sufficient to make advanced mode compilation work correctly.\n\n[Context/Logs]:\n- i ran into a situation today where i really really wanted a @lends tag.\r\n\r\nin theory, this should be easy to implement, because it's equivalent to goog.object.reflect, which already has native compiler support.\n- This issue was closed by revision r506.\n- one nit: you'll have to surround the object literal in parentheses to make this work. we've got to get some changes upstream to Rhino in order for this to work without the parens."}
{"project_id": "Closure", "bug_id": "60", "source_type": "google", "llm_input_text": "[Title]: resolveTypes: jstype.UnionType cannot be cast to jstype.ObjectType\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Compile a bunch of JavaScript files that I can't release with these options: ['--create_name_map_files', 'true', '--jscomp_warning', 'missingProperties', '--jscomp_warning', 'undefinedVars', '--jscomp_warning', 'checkTypes', '--warning_level', 'VERBOSE', '--summary_detail_level', '3', '--process_closure_primitives', 'true', '--jscomp_error', 'strictModuleDepCheck', '--jscomp_error', 'invalidCasts', '--logging_level', 'ALL', '--compilation_level', 'ADVANCED_OPTIMIZATIONS']\r\n\r\n2. During this pass:\r\n\r\n        Oct 26, 2010 12:09:38 AM com.google.javascript.jscomp.PhaseOptimizer$NamedPass process\r\n        INFO: resolveTypes\r\n\r\n, compilation terminates with:\r\n\r\n        java.lang.RuntimeException: java.lang.ClassCastException: com.google.javascript.rhino.jstype.UnionType cannot be cast to com.google.javascript.rhino.jstype.ObjectType\r\n                at com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n                at com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n                at com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n                at com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n                at com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n                at com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\n        Caused by: java.lang.ClassCastException: com.google.javascript.rhino.jstype.UnionType cannot be cast to com.google.javascript.rhino.jstype.ObjectType\r\n                at com.google.javascript.rhino.jstype.FunctionType.resolveInternal(Unknown Source)\r\n                at com.google.javascript.rhino.jstype.JSType.resolve(Unknown Source)\r\n                at com.google.javascript.jscomp.TypedScopeCreator$DeferredSetType.resolve(Unknown Source)\r\n                at com.google.javascript.jscomp.TypedScopeCreator$AbstractScopeBuilder.resolveTypes(Unknown Source)\r\n        \n...[Description Truncated]...\n\n[Context/Logs]:\n- The traceback with line numbers:\r\n\r\n        java.lang.RuntimeException: java.lang.ClassCastException: com.google.javascript.rhino.jstype.UnionType cannot be cast to com.google.javascript.rhino.jstype.ObjectType\r\n                at com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:590)\r\n                at com.google.javascript.jscomp.Compiler.compile(Compiler.java:528)\r\n                at com.google.javascript.jscomp.Compiler.compile(Compiler.java:487)\r\n                at com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:583)\r\n                at com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:252)\r\n                at com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:618)\r\n        Caused by: java.lang.ClassCastException: com.google.javascript.rhino.jstype.UnionType cannot be cast to com.google.javascript.rhino.jstype.ObjectType\r\n                at com.google.javascript.rhino.jstype.FunctionType.resolveInternal(FunctionType.java:856)\r\n                at com.google.javascript.rhino.jstype.JSType.resolve(JSType.java:894)\r\n                at com.google.javascript.jscomp.TypedScopeCreator$DeferredSetType.resolve(TypedScopeCreator.java:136)\r\n                at com.google.javascript.jscomp.TypedScopeCreator$AbstractScopeBuilder.resolveTypes(TypedScopeCreator.java:399)\r\n                at com.google.javascript.jscomp.TypedScopeCreator.createScope(TypedScopeCreator.java:178)\r\n                at com.google.javascript.jscomp.MemoizedScopeCreator.createScope(MemoizedScopeCreator.java:53)\r\n                at com.google.javascript.jscomp.DefaultPassConfig$GlobalTypeResolver.process(DefaultPassConfig.java:1053)\r\n                at com.google.javascript.jscomp.PhaseOptimizer$PassFactoryDelegate.processInternal(PhaseOptimizer.java:271)\r\n                at com.google.javascript.jscomp.PhaseOptimizer$NamedPass.process(PhaseOptimizer.java:248)\r\n                at com.google.javascript.jscomp.PhaseOptimizer.process(PhaseOptimizer.java:167)\r\n                at com.google.javascript.jscomp.Compiler.check(Compiler.java:694)\r\n                at com.google.javascript.jscomp.Compiler.compileInternal(Compiler.java:613)\r\n                at com.google.javascript.jscomp.Compiler.access$000(Compiler.java:64)\r\n                at com.google.javascript.jscomp.Compiler$1.call(Compiler.java:530)\r\n                at com.google.javascript.jscomp.Compiler$1.call(Compiler.java:528)\r\n                at com.google.javascript.jscomp.Compiler$2.run(Compiler.java:562)\r\n                at java.lang.Thread.run(Thread.java:662)\n- This issue was closed by revision r519."}
{"project_id": "Closure", "bug_id": "61", "source_type": "google", "llm_input_text": "[Title]: SVN checkout + ant + compile doesn't work because of junked-up externs.zip\n[Symptom]:\nIt seems that one can't SVN checkout and compile Closure Compiler and expect to use it without first having deleted the _svn or .svn directory that gets created in the externs directory. If that directory isn't deleted, you'll see the exception below when trying to compile code.\r\n\r\njava.lang.IllegalStateException: Externs zip must match our hard-coded list of externs.\r\n        at com.google.common.base.Preconditions.checkState(Preconditions.java:145)\r\n        at com.google.javascript.jscomp.CommandLineRunner.getDefaultExterns(Unknown Source)\r\n\r\nThe reason for this is because the externs.zip resource is pulling in all the subversion garbage in the subdirectories of each folder that are created on checkout.\r\n\r\nThe attached patch changes the ant build so that only .js files are included in the zip file instead of every file in that directory.\n\n[Context/Logs]:\n- Care to start a code review on [URL] ?\n- just for my education, shouldn't all implementations of Ant ignore \".svn\" because it's a hidden directory? what creates an _svn directory?\n- TortoiseSVN in Windows has an option to use _svn instead of .svn. I forgot until now that I had turned on that option because older versions of Visual Studio were choking when opening projects that had a .svn directory in them.\n- This issue was closed by revision r523."}
{"project_id": "Closure", "bug_id": "62", "source_type": "google", "llm_input_text": "[Title]: @this emits warning when used with a typedef\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Compile this with r520:\r\n\r\ngoog.provide('bug');\r\n\r\n/**\r\n * @this {bug.Thing}\r\n */\r\nbug.sharedMethod = function() {};\r\n\r\n/**\r\n * @constructor\r\n */\r\nbug.A = function() {};\r\n\r\n/**\r\n * @constructor\r\n */\r\nbug.B = function() {};\r\n\r\n/**\r\n * @type {bug.A|bug.B}\r\n */\r\nbug.Thing = goog.typedef;\r\n\r\n2. Observe this warning:\r\n\r\nOct 28, 2010 9:59:15 PM com.google.javascript.jscomp.PhaseOptimizer$NamedPass process\r\nINFO: sanityCheckVars\r\nOct 28, 2010 9:59:15 PM com.google.javascript.jscomp.LoggerErrorManager println\r\nWARNING: /home/elf/JSPATH/compiler_bug_this_typedef.js:6: WARNING - @this type of a function must be an object\r\nActual type: (bug.A|bug.B|null)\r\nbug.sharedMethod = function() {};\r\n\r\n\r\nNote that @this {!bug.Thing} doesn't work either, while @this {bug.A|bug.B} works.  This code did not emit a warning in r481.\r\n\r\nThis code is what caused me to run into [URL]\n\n[Context/Logs]:\n- thanks for the report. the fix will get committed on monday.\n- This issue was closed by revision r529."}
{"project_id": "Closure", "bug_id": "63", "source_type": "google", "llm_input_text": "[Title]: Nested constructor emits warning \"attempted re-definition of type\"\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Visit [URL]\r\n2. Compile this:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n/** @constructor */\r\nvar Clock = function() {\r\n  /** @constructor */\r\n  this.Date = function() {};\r\n};\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected no warnings.  Instead, I see:\r\n\r\nJSC_TYPE_REDEFINITION: attempted re-definition of type this.Date found : function (this:this.Date): undefined expected: function (this:this.Date): ? at line 4 character 20\r\nthis.Date = function() {};\r\n^\r\n\r\n Please provide any additional information below. \n\r\nI think a few months ago this worked fine, with no warnings emitted.  I don't know when it changed.\n\n[Context/Logs]:\n- Sorry about the formatting; this is the warning:\r\n\r\nJSC_TYPE_REDEFINITION: attempted re-definition of type this.Date\r\nfound   : function (this:this.Date): undefined\r\nexpected: function (this:this.Date): ? at line 4 character 20\r\nthis.Date = function() {};\r\n                    ^"}
{"project_id": "Closure", "bug_id": "64", "source_type": "google", "llm_input_text": "[Title]: Compiler removes function properties that it should not\n[Symptom]:\nThe Compiler appears to remove properties that are added to functions. I do not believe that it should do such a thing. In the following example, I add a property named &quot;alwaysCall&quot; to a function that I check later. The property appears to be stripped, which changes the behavior of the program. To see this in action run the following through [URL]\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @use_closure_library true\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\nvar lastMsg;\r\nvar map = {};\r\n\r\nvar addToMap = function(key, func) {\r\n  map[key] = func;\r\n};\r\n\r\nvar f1 = function() { alert('f1'); };\r\nf1.alwaysCall = true;\r\nvar f2 = function() { alert('f2'); };\r\n\r\naddToMap('f1', f1);\r\naddToMap('f2', f2);\r\n\r\nvar callFunctionByKey = function(key) {\r\n  var f = map[key];\r\n  if (f.alwaysCall) f();\r\n};\r\n\r\ncallFunctionByKey(Math.random() &gt; 0.5 ? 'f1' : 'f2');\r\n\r\n\r\nThe compiled code is:\r\n\r\n\r\nvar a = {};\r\na.f1 = function() {\r\n  alert(&quot;f1&quot;)\r\n};\r\na.f2 = function() {\r\n  alert(&quot;f2&quot;)\r\n};\r\nvar b = a[Math.random() &gt; 0.5 ? &quot;f1&quot; : &quot;f2&quot;];\r\nb.a &amp;&amp; b();\r\n\r\nNote that a.f1 does not have a property defined on it anymore, though it still appears to be checked on this line of code:\r\n\r\nb.a &amp;&amp; b();\r\n\r\nSo it looks like it is missing the following:\r\n\r\na.f1.a =  true;\r\n\r\nFor now, I can workaround this by quoting the property:\r\n\r\nf1['alwaysCall'] = true;\r\n\r\n// In callFunctionByKey:\r\nif (f['alwaysCall']) f();\r\n\r\nBut that seems as though it should not be necessary.\n\n[Context/Logs]:\n- thanks for the report. i think i know what the problem is. you can also workaround for now by having a setAlwaysCall(f, true) method.\n- This issue was closed by revision r580.\n- Awesome, thanks so much for fixing this!\r\n\r\nSo if I understand correctly, there is now a distinction between collapsing properties on ordinary functions as opposed to constructor functions, as the latter are collapsed to become global variables rather than properties of the constructor function (as they are semantically static variables, anyway), whereas the former will continue to be properties of the function? Nifty! Hopefully this distinction works for everyone.\n- yep. i think this is the correct behavior."}
{"project_id": "Closure", "bug_id": "65", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "66", "source_type": "google", "llm_input_text": "[Title]: Namespace definition in Prototype is broken\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Namespace definition in prototype.js (Prototype library) looks like:\r\nif (!Node) var Node = { };\r\n2. Compile with latest command line compiler (Version: 20100917 (revision 440) Built on: 2010/09/17 17:55), with default options\r\n3. Open html which uses this script in IE8 - IE will show error message (something like &quot;Node - definition is missing&quot;, I use localized version and cannot write exact english message).\r\n\r\nWhat is the expected output?\r\nSomething like:\r\nif(!Node)var Node={};\r\n\r\nWhat do you see instead?\r\nNode||(Node={});\r\n\r\n What version of the product are you using? On what operating system? \nCommand line compiler (Version: 20100917 (revision 440) Built on: 2010/09/17 17:55), with default options, OS Linux Mint 7.\n\n[Context/Logs]:\n- This issue was closed by revision r614."}
{"project_id": "Closure", "bug_id": "67", "source_type": "google", "llm_input_text": "[Title]: Incorrect assignment removal from expression in simple mode.\n[Symptom]:\nfunction closureCompilerTest(someNode) {\r\n   var nodeId;\r\n   return ((nodeId=someNode.id) &amp;&amp; (nodeId=parseInt(nodeId.substr(1))) &amp;&amp; nodeId&gt;0);\r\n}\r\n\r\nCOMPILES TO:\r\n\r\nfunction closureCompilerTest(b){var a;return b.id&amp;&amp;(a=parseInt(a.substr(1)))&amp;&amp;a&gt;0};\r\n\r\n&quot;nodeId=someNode.id&quot; is replaced with simply &quot;b.id&quot; which is incorrect as the value of &quot;nodeId&quot; is used.\n\n[Context/Logs]:\n- A problem in the DeadAssignmentElimination pass.\n- This issue was closed by revision r629."}
{"project_id": "Closure", "bug_id": "68", "source_type": "google", "llm_input_text": "[Title]: IE8 error: Object doesn't support this action\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use script with fragment like\r\n    if (e.onchange) {\r\n      e.onchange({\r\n        _extendedByPrototype: Prototype.emptyFunction,\r\n        target: e\r\n      });\r\n    }\r\n2. Compile with Compiler (command-line, latest version)\r\n3. Use in IE8\r\n\r\nWhat is the expected output?\r\nScript:\r\nif(b.onchange){b.onchange({_extendedByPrototype:Prototype.emptyFunction,target\r\n:b})}\r\n\r\nWhat do you see instead?\r\nScript:\r\nb.onchange&amp;&amp;b.onchange({_extendedByPrototype:Prototype.emptyFunction,target\r\n:b})\r\nIE8:\r\nError message &quot;Object doesn't support this action&quot;\r\n\r\n What version of the product are you using? On what operating system? \nVersion: 20100917 (revision 440)\r\nBuilt on: 2010/09/17 17:55\n\n[Context/Logs]:\n- Can you provide more details here?  I'm unable to reproduce a problem in IE8 with \"b.onchange && b.onchange(...\"\n- I use third-party javascript library, which assigns event handler to element.onchange property (e.g. $('id').onchange=function(event){...}). In other part of library this onchange handler is invoked directly after changing content of element, using fake event object:\r\n\r\n  e.value = 'some value';\r\n  if (e.onchange) {\r\n    e.onchange({\r\n      _extendedByPrototype: Prototype.emptyFunction,\r\n      target: e\r\n    });\r\n  }\r\n\r\nSo IE7 and IE8 (and maybe IE6) executes script\r\n  if (e.onchange) {e.onchange(...);}\r\nbut fires error \"Object doesn't support this action\" on optimized script\r\n  e.onchange&&e.onchange(...);\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r631.\n- Issue 371 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "69", "source_type": "google", "llm_input_text": "[Title]: side-effects analysis incorrectly removing function calls with side effects\n[Symptom]:\nSample Code:\r\n---\r\n/** @constructor */\r\nfunction Foo() {\r\n  var self = this;\r\n  window.setTimeout(function() {\r\n    window.location = self.location;\r\n  }, 0);\r\n}\r\n\r\nFoo.prototype.setLocation = function(loc) {\r\n  this.location = loc;\r\n};\r\n\r\n(new Foo()).setLocation('[URL]\r\n---\r\n\r\nThe setLocation call will get removed in advanced mode.\n\n[Context/Logs]:\n- This issue was closed by revision r647."}
{"project_id": "Closure", "bug_id": "70", "source_type": "google", "llm_input_text": "[Title]: The operation of the debug option is different when useing ant task.\n[Symptom]:\nI need --define option in CompileTask, I am making it.\r\nHowever, when I specify debug option, constant is not replaced.\r\n\r\nFor the command line:\r\n\r\n[URL]\r\n\r\n    level.setOptionsForCompilationLevel(options);\r\n    if (flags.debug) {\r\n      level.setDebugOptionsForCompilationLevel(options);\r\n    }\r\n\r\nBut for ant task:\r\n\r\n[URL]\r\n\r\n    if (this.debugOptions) {\r\n      this.compilationLevel.setDebugOptionsForCompilationLevel(options);\r\n    } else {\r\n      this.compilationLevel.setOptionsForCompilationLevel(options);\r\n    }\r\n\r\nIs this difference intentional?\n\n[Context/Logs]:\n- No. the Ant one is probably wrong.\n- This issue was closed by revision r665."}
{"project_id": "Closure", "bug_id": "71", "source_type": "google", "llm_input_text": "[Title]: HTML5 extern doesn't include new history events\n[Symptom]:\nThe HTML5 history definitions starting at &lt;[URL] don't include the new history events defined at &lt;[URL] The attached patch adds those new events to the extern.\n\n[Context/Logs]:\n- Care to start a code review on [URL] ?\n- [URL]\r\n\r\nGoing forward, should contributors assign a default reviewer to each case or just create it without a reviewer and post the link here?\n- ... [Middle Discussions Snipped for Brevity] ...\n- The code review has been updated again to fix some bad annotations.\n- This issue was closed by revision r675."}
{"project_id": "Closure", "bug_id": "72", "source_type": "google", "llm_input_text": "[Title]: Reproduceable crash with switch statement\n[Symptom]:\nWhen attempting to compile the following code with default options (-jar compiler.jar --js filename) always produces the same error.\r\n\r\nfunction a(b) {\r\n  switch (b.v) {\r\n    case 'SWITCH':\r\n      if (b.i &gt;= 0) {\r\n        return b.o;\r\n      } else {\r\n        return undefined;\r\n      }\r\n      break;\r\n  }\r\n}\r\n\r\nWhenever I try and compile the above script I get a RuntimeException thrown:\r\n\r\nINTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(BREAK): C:\\test.js:11:3\r\n      break;\r\n  Parent: NULL\r\n\r\nThe result of calling --version on compiler.jar:\r\n\r\nVersion: 20100917 (revision 440)\r\nBuilt on: 2010/09/17 17:55\r\n\r\nThe result of calling -version on java.exe:\r\n\r\njava version &quot;1.6.0_11&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_11-b03)\r\nJava HotSpot(TM) Client VM (build 11.0-b16, mixed mode, sharing)\r\n\r\nAnyone else with the same issue - to work around in the short term, comment out the &quot;break;&quot; line.\n\n[Context/Logs]:\n- This issue was closed by revision r676."}
{"project_id": "Closure", "bug_id": "73", "source_type": "google", "llm_input_text": "[Title]: Invalid left-hand side of assignment not detected\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile this:\r\n  var x=0,y=1;x||y=8\r\n\r\n What is the expected output? What do you see instead? \nI expect an error, because this is parsed as (x||y)=8, which is an invalid left-hand side of an assignment. Instead, I get\r\n  var x=0,y=1;x||y=8;\r\nwhich, like the input, is invalid code.\n\n[Context/Logs]:\n- This issue was closed by revision r685."}
{"project_id": "Closure", "bug_id": "74", "source_type": "google", "llm_input_text": "[Title]: Cannot see version with --version\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Download sources of latest (r698) command-line version of closure compiler.\r\n2. Build (with ant from command line).\r\n3. Run compiler (java -jar compiler.jar --version).\r\n\r\nWhat is the expected output?\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 698\r\nBuilt on: 2011/01/17 12:16\r\n\r\nWhat do you see instead?\r\n\u041e\u043f\u0446\u0438\u044f &quot;--version&quot; \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u043d\u0434\r\n(Option &quot;--version&quot; requires operand)\r\nand full list of options with description.\r\n\r\n What version of the product are you using? On what operating system? \nLatest source of command-line compiler from SVN (r698). OS Linux Mint 7, Sun Java 1.6.0_22.\r\n\r\n Please provide any additional information below. \nWhen running compiler with\r\njava -jar compiler.jar --version ?\r\nit shows error message, then version info, then full list of options.\n\n[Context/Logs]:\n- thanks for the report.\r\n\r\nit should work if there are additional arguments after --version.\n- This issue was closed by revision r700."}
{"project_id": "Closure", "bug_id": "75", "source_type": "google", "llm_input_text": "[Title]: Reimplement the --flagfile option\n[Symptom]:\nThe --flagfile flags.txt option mentioned in this discussion post:\r\n\r\n[URL]\r\ndiscuss/browse_thread/thread/ \r\n\r\nis no longer present in the application version of the compiler. The \r\nwindows command line has a limit to how many characters can be put into a \r\ncommand. Being able to use a flags file would be a useful alternative to \r\ntrying to specifying lenghty lists of externs on the command line.\r\n\r\nIf you could, please put the option back in.\n\n[Context/Logs]:\n- --flagfile was a standard feature of the Flags class that is missing from the args4j\r\nimplementation.\n- I quickly hit the 10Kb command line limit and would like to see this feature implemented if anyone has the spare time - we have 140 JS source files in our project at present.\r\n\r\nAnother related thread here:\r\n[URL]\n- This issue was closed by revision r717."}
{"project_id": "Closure", "bug_id": "76", "source_type": "google", "llm_input_text": "[Title]: XMLHttpRequest.prototype.send doesn't accept XML Document as data\n[Symptom]:\nAccording to the documentation of the XMLHttpRequest object the send method allows sending a plain text or a XML document. But when trying to pass a Document type variable to the send method the closure compiler complains:\r\n\r\nERROR - actual parameter 1 of XMLHttpRequest.prototype.send does not match formal parameter\r\nfound   : (Document|null|string)\r\nrequired: (null|string|undefined)\r\n    requestor.send(data);\r\n\r\nI worked around this problem by always casting the data to a string:\r\n\r\n    requestor.send((/** @type {string} */ data));\r\n\r\n\r\nBut this is just a temporary solution. Please add Document to the allowed types of this parameter.\n\n[Context/Logs]:\n- This issue was closed by revision r718."}
{"project_id": "Closure", "bug_id": "77", "source_type": "google", "llm_input_text": "[Title]: .indexOf fails to produce missing property warning\n[Symptom]:\nThe following code compiled with VERBOSE warnings or with the missingProperties check enabled fails to produce a warning or error:\r\n\r\nvar s = new String(&quot;hello&quot;);\r\nalert(s.toLowerCase.indexOf(&quot;l&quot;));\r\n\r\nHowever, other string functions do properly produce the warning:\r\n\r\nvar s = new String(&quot;hello&quot;);\r\nalert(s.toLowerCase.substr(0, 1));\n\n[Context/Logs]:\n- i think what's happening is that Array.indexOf is a valid property, and \"s.toLowerCase = Array\" is a valid assignment, so it's assuming that \"s.toLowerCase.indexOf\" *could* (in theory) exist and still be type-safe.\r\n\r\nIt would be nice if we could catch this case though.\n- This issue was closed by revision r765."}
{"project_id": "Closure", "bug_id": "78", "source_type": "google", "llm_input_text": "[Title]: bad variable inlining in closure\n[Symptom]:\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\nfunction foo() {\r\n var arr = [1, 2, 3, 4, 5];\r\n for (var i = 0, l = arr.length; i &lt; l; i++) {\r\n   var j = arr[i];\r\n   (function() {\r\n     var k = j;\r\n     setTimeout(function() { console.log(k); }, 0);\r\n   })();\r\n }\r\n}\r\nfoo();\r\n\r\n&quot;k&quot; will get incorrectly inlined.\n\n[Context/Logs]:\n- Clearly a problem with InlineVariables\n- yep. i know the exact problem. i'll have a patch tomorrow.\n- This issue was closed by revision r241."}
{"project_id": "Closure", "bug_id": "79", "source_type": "google", "llm_input_text": "[Title]: Missing type for Location.prototype.replace in ie_dom.js\n[Symptom]:\nThe Location.prototype.replace method in ie_dom.js has no type information (And it looks like all the other stuff of Location.prototype is incomplete as well). So when compiling code like \r\n\r\n  window.location.replace(&quot;someUrl&quot;)\r\n\r\nends in a compiler warning:\r\n\r\n   ERROR - could not determine the type of this expression\r\n      window.location.replace(&quot;someUrl&quot;);\r\n\r\nA workaround is casting the replace method to the correct type:\r\n\r\n  (/** @type {function(string)} */ window.location.replace)(&quot;someUrl&quot;);\r\n\r\nTo fix this the type must be put into the ie_dom.js file. And maybe it is a good idea to add the missing types to all other members there as well.\n\n[Context/Logs]:\n- I'll add the annotation\n- This issue was closed by revision r788.\n- FYI:\r\n\r\nThis was rolled back due to breakage. Everything is fixed, and currently running tests.\n- This issue was closed by revision r792."}
{"project_id": "Closure", "bug_id": "80", "source_type": "google", "llm_input_text": "[Title]: Missing type for Location.prototype.replace in ie_dom.js\n[Symptom]:\nThe Location.prototype.replace method in ie_dom.js has no type information (And it looks like all the other stuff of Location.prototype is incomplete as well). So when compiling code like \r\n\r\n  window.location.replace(&quot;someUrl&quot;)\r\n\r\nends in a compiler warning:\r\n\r\n   ERROR - could not determine the type of this expression\r\n      window.location.replace(&quot;someUrl&quot;);\r\n\r\nA workaround is casting the replace method to the correct type:\r\n\r\n  (/** @type {function(string)} */ window.location.replace)(&quot;someUrl&quot;);\r\n\r\nTo fix this the type must be put into the ie_dom.js file. And maybe it is a good idea to add the missing types to all other members there as well.\n\n[Context/Logs]:\n- I'll add the annotation\n- This issue was closed by revision r788.\n- FYI:\r\n\r\nThis was rolled back due to breakage. Everything is fixed, and currently running tests.\n- This issue was closed by revision r792."}
{"project_id": "Closure", "bug_id": "81", "source_type": "google", "llm_input_text": "[Title]: Missing type for Location.prototype.replace in ie_dom.js\n[Symptom]:\nThe Location.prototype.replace method in ie_dom.js has no type information (And it looks like all the other stuff of Location.prototype is incomplete as well). So when compiling code like \r\n\r\n  window.location.replace(&quot;someUrl&quot;)\r\n\r\nends in a compiler warning:\r\n\r\n   ERROR - could not determine the type of this expression\r\n      window.location.replace(&quot;someUrl&quot;);\r\n\r\nA workaround is casting the replace method to the correct type:\r\n\r\n  (/** @type {function(string)} */ window.location.replace)(&quot;someUrl&quot;);\r\n\r\nTo fix this the type must be put into the ie_dom.js file. And maybe it is a good idea to add the missing types to all other members there as well.\n\n[Context/Logs]:\n- I'll add the annotation\n- This issue was closed by revision r788.\n- FYI:\r\n\r\nThis was rolled back due to breakage. Everything is fixed, and currently running tests.\n- This issue was closed by revision r792."}
{"project_id": "Closure", "bug_id": "82", "source_type": "google", "llm_input_text": "[Title]: An unnamed function statement statements should generate a parse error\n[Symptom]:\nAn unnamed function statement statements should generate a parse error, but it does not, for example:\r\n\r\nfunction () {};\r\n\r\nNote: Unnamed function expression are legal:\r\n\r\n(function(){});\n\n[Context/Logs]:\n- This issue was closed by revision r797."}
{"project_id": "Closure", "bug_id": "83", "source_type": "google", "llm_input_text": "[Title]: @const tag not resulting in warning when used on object property\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nFollowing is the javascript:\r\n\r\ngoog.provide('test');\r\n\r\n/**\r\n * @type {number}\r\n * @const\r\n */\r\ntest.A = 911;\r\n\r\ntest.runtest = function()\r\n{\r\n\ttest.A = 999;\r\n\treturn test.A;\r\n};\r\n\r\ngoog.exportSymbol('runtest', test.runtest);\r\n\r\nCompiled with following command:\r\n\r\ncalcdeps.py: Compiling with the following command: java -jar ../closure-\r\ncompiler/build/compiler.jar --js ../closure-library/closure/goog/base.js -\r\n-js test_jsdoc.js --compilation_level=ADVANCED_OPTIMIZATIONS --\r\nwarning_level=VERBOSE\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected to see compiler warning due to changing value of const.\r\n\r\nNo warnings/errors produced. Compiled javascript shows value of const (b) \r\nbeing changed.\r\n\r\nvar a=this;var b=911;var c=function(){return \r\nb=999},d=&quot;runtest&quot;.split(&quot;.&quot;),e=a;!(d[0]in \r\ne)&amp;&amp;e.execScript&amp;&amp;e.execScript(&quot;var &quot;+d[0]);for(var \r\nf;d.length&amp;&amp;(f=d.shift());)if(!d.length&amp;&amp;c!==undefined)e[f]=c;else e=e[f]?\r\ne[f]:(e[f]={});\r\n\r\n What version of the product are you using? On what operating system? \n\r\nSVN version 153. OSX.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- @const for property is not that well supported / tested. I think currently its done in \r\ninline constant. A  fix would be move that test to CheckAccessControl where @private \r\ncheck logic resides.\r\n\r\nIt should be pretty simple. I would really encourage anyone wanting to play with code \r\nbase to take a stab at it.\n- yeah, the checks for @const variables were written years and years ago--before anyone \r\nthought it would be possible to do const-checking on properties--and no one's revisited \r\nit since then.\n- This issue was closed by revision r800."}
{"project_id": "Closure", "bug_id": "84", "source_type": "google", "llm_input_text": "[Title]: Miss webkit css related extern file when mapping to javascript format.\n[Symptom]:\nAlthough closure provides webkit css extern file here:\r\n[URL]\r\n\r\nwhen we use the properties in javascript, they will be renamed by closure.\r\n\r\nFor example.\r\n\r\nCSSProperties.prototype.WebkitTransitionProperty is defined in webkit_css.js\r\n\r\nwhile we use \r\n\r\nelement.style.webkitTransitionProperty = '-webkit-transform';\r\n\r\nWebkitTransitionProperty is not the same as webkitTransitionProperty \r\n\r\nThe reason is javascript is case sensitive. \r\n\r\nThanks.\n\n[Context/Logs]:\n- actually, WebkitTransitionProperty is the same as webkitTransitionProperty.\r\n\r\nWebkitTransitionProperty is technically the correct property, because in CSS it's -webkit-transition-proprety (note the initial \"-\")\r\n\r\n[URL]\r\n\r\nthis was so confusing to people that they added a second binding to the same property with the name webkitTransitionProperty.\r\n\r\nshould we just support both?\n- i sent an email to the webkit folks to see if i can get more details on why it's done this way.\n- This issue was closed by revision r803."}
{"project_id": "Closure", "bug_id": "85", "source_type": "google", "llm_input_text": "[Title]: Hide or remove \"dev_mode\" from the command line options.\n[Symptom]:\nIt isn't clear that this is only for developing the compiler itself and seems like just another error check and confuses people\n\n[Context/Logs]:\n- This issue was closed by revision r813."}
{"project_id": "Closure", "bug_id": "86", "source_type": "google", "llm_input_text": "[Title]: Make CommandLineRunner more extensible\n[Symptom]:\nTo make Google closure compiler easier to integrate with other libraries, it would be good to change the accessibility of some methods of the AbstractCommandLineRunner which is the main entry point.\r\nIt will be particularly helpful to update the methods who deals with how to retrieve and write the JS contents.\r\n\r\nI'm working currently on the integration of the closure compiler with Jawr (http://jawr.java.net/), and these modifications will greatly help me to achieve it.\r\n\r\nI've attached a patch of the AbstractCommandLineRunner to this issue.\r\n\r\nThere is no particular test to make as it's only the update of the accessibility of some methods.\n\n[Context/Logs]:\n- I'm not clear what you are trying to accomplish, the command line runner is intended to be used with the command-line.  If you are using the Java API, I would expect you to be using the interfaces that the AbstractCommandLineRunner uses.\r\n\r\nCan you explain how these changes are helpful?\n- Yes, it's true that the command line runner is inteded to be used with the command line.\r\nBut the fact is that this is also where you add new options to the compiler using arguments.\r\nI've choosen to override the Command Line Runner, because I would like to allow the user to pass argument through my custom config to the Command Line Runner.\r\nIn that case, if the user wants to add a new option which was not available when my project was released, he will be able to do so without a new release of my project.\r\nIt helps me to decouple the version of my project used from the version of the closure compiler.\r\n\r\nDon't hesitate to tell me if you need more clarifications.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r823.\n- Hi,\r\n\r\nI've just noticed that the name of the method is not consistent with the method which creates an output writer.\r\n\r\nThe method which creates the writer is :\r\n\r\nprivate Writer fileNameToOutputWriter(String fileName) \r\n\r\nWhile the new one is\r\n\r\nprotected OutputStream filenameToOutputStream(String fileName)\r\n\r\nIn the first method, the 'N' character of 'name' is capitalized while it's not in the second one.\r\nI think that it would be good to rename the new method as: \r\n\r\nprotected OutputStream fileNameToOutputStream(String fileName)\r\n\r\nSorry, I should have seen that before."}
{"project_id": "Closure", "bug_id": "87", "source_type": "google", "llm_input_text": "[Title]: Add support for data members on interfaces\n[Symptom]:\n/**\r\n * @interface\r\n */\r\nfunction I() {};\r\n\r\n/** @type {string} */\r\nI.prototype.foobar;\r\n\r\n/**\r\n * @constructor\r\n * @implements {I}\r\n */\r\nfunction C() {\r\n  // No warning generated here.\r\n  this.foobar = 2;\r\n};\r\n\r\n/** @type {I} */\r\nvar test = new C(); \r\nalert(test.foobar);\n\n[Context/Logs]:\n- Just an update here.  I made a couple of changes last year to improve date member support, and they are properly checked on prototype definitions (For the sample above, C.prototype.foobar = 2 would generate an error)\n- This issue was closed by revision r829."}
{"project_id": "Closure", "bug_id": "88", "source_type": "google", "llm_input_text": "[Title]: Unexpected expression nodeDELPROP 1\n[Symptom]:\nAs of version 20110119 of the closure compiler, the following code produces an error when it's compiled with advanced compilation enabled:\r\n\r\n    function x() { return delete a; }\r\n\r\n\r\nThe exact output of the compiler:\r\n\r\n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected expression nodeDELPROP 1 [sourcename: stdin]\r\n parent:RETURN 1 [sourcename: stdin]\r\n  Node(RETURN): stdin:1:15\r\nfunction x() { return delete a; }\r\n  Parent(BLOCK): stdin:1:13\r\nfunction x() { return delete a; }\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected expression nodeDELPROP 1 [sourcename: stdin]\r\n parent:RETURN 1 [sourcename: stdin]\r\n  Node(RETURN): stdin:1:15\r\nfunction x() { return delete a; }\r\n  Parent(BLOCK): stdin:1:13\r\nfunction x() { return delete a; }\r\n\r\n\tat com.google.javascript.jscomp.NodeUtil.evaluatesToLocalValue(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeUtil.evaluatesToLocalValue(Unknown Source)\r\n\tat com.google.javascript.jscomp.PureFunctionIdentifier$FunctionAnalyzer.visit(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.js\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r834.\n- Issue 387 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "89", "source_type": "google", "llm_input_text": "[Title]: RuntimeException when compiling with extern prototype\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. java -jar compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --externs prototype.js --js bootloader.js\r\n\r\n What is the expected output? What do you see instead? \n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(FUNCTION ): prototype.js:213:11\r\n  function Str(key, holder, stack) {\r\n  Parent(BLOCK): prototype.js:160:12\r\n(function() {\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(FUNCTION ): prototype.js:213:11\r\n  function Str(key, holder, stack) {\r\n  Parent(BLOCK): prototype.js:160:12\r\n(function() {\r\n\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:129)\r\n\tat com.google.javascript.jscomp.Normalize$DuplicateDeclarationHandler.onRedeclaration(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.declareVar(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.scanVars(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.scanVars(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.scanVars(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.scanVars(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.scanVars(Unknown Source)\r\n\tat com.google.javascript.jscomp.SyntacticScopeCreator.scanVars(Unknown Source)\r\n\tat com.google.javascript.jscomp.S\n...[Description Truncated]...\n\n[Context/Logs]:\n- John, mind taking a look?\n- I have the same problem using prototype 1.6.1 (using prototype 1.7 the error is the same as the first report)\r\nThe problem appears only when prototype.js is used as --externs parameter\r\n\r\njava -jar compiler.jar --js source.js --js_output_file output.js --externs prototype-1.6.1.js --compilation_level ADVANCED_OPTIMIZATIONS \r\n\r\n0 error(s), 3369 warning(s)\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(FUNCTION ): prototype-1.6.1.js:3310:17\r\n  match: function(element) {\r\n  Parent(STRING match): prototype-1.6.1.js:3310:2\r\n  match: function(element) {\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(FUNCTION ): prototype-1.6.1.js:3310:17\r\n  match: function(element) {\r\n  Parent(STRING match): prototype-1.6.1.js:3310:2\r\n  match: function(element) {\r\n\r\n\tat com.google.common.base.Preconditions.checkState(Precon\n...[Text Truncated]...\nom.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseRoots(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseRoots(Unknown Source)\r\n\tat com.google.javascript.jscomp.Normalize.removeDuplicateDeclarations(Unknown Source)\r\n\tat com.google.javascript.jscomp.Normalize.process(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.process(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.normalize(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.optimize(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compileInternal(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.access$000(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler$1.call(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler$1.call(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler$2.run(Unknown Source)\r\n\tat java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.IllegalStateException\r\n\t... 32 more\n- I have a fix pending for this.\n- This issue was closed by revision r844."}
{"project_id": "Closure", "bug_id": "90", "source_type": "google", "llm_input_text": "[Title]: Install using ant\n[Symptom]:\nWhat steps will reproduce the problem? \n1. svn checkout\r\n2. apt jar\r\n\r\n What is the expected output? What do you see instead? \n# ant jar\r\nBuildfile: build.xml\r\n\r\nsvnversion:\r\n\r\ncompile:\r\n    [mkdir] Created dir: /home/httpd/tmp/closure-compiler/closure-compiler-read-only/build/classes\r\n    [javac] Compiling 4 source files to /home/httpd/tmp/closure-compiler/closure-compiler-read-only/build/classes\r\n    [javac] ----------\r\n    [javac] 1. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/jscomp/FunctionInfo.java (at line 52)\r\n    [javac]     getDescriptor().getMessageTypes().get(0);\r\n    [javac]     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] Type mismatch: cannot convert from Object to Descriptors.Descriptor\r\n    [javac] ----------\r\n    [javac] 2. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInfo.java (at line 60)\r\n    [javac]     internal_static_jscomp_FunctionInformationMap_descriptor.getNestedTypes().get(0);\r\n    [javac]     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] Type mismatch: cannot convert from Object to Descriptors.Descriptor\r\n    [javac] ----------\r\n    [javac] 3. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInfo.java (at line 68)\r\n    [javac]     internal_static_jscomp_FunctionInformationMap_descriptor.getNestedTypes().get(1);\r\n    [javac]     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] Type mismatch: cannot convert from Object to Descriptors.Descriptor\r\n    [javac] ----------\r\n    [javac] ----------\r\n    [javac] 4. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInformationMap.java (at line 18)\r\n    [javac]     public FunctionInformationMap getDefaultInstanceForType() {\r\n...[Description Truncated]...\n\n[Context/Logs]:\n- compiles fine for me. can you also check \"ant -version\" and \"javac -version\"?\n- ant -version\r\nApache Ant version 1.6.5 compiled on January 6 2007\r\n\r\njavac -version\r\nEclipse Java Compiler v_677_R32x, 3.2.1 release, Copyright IBM Corp 2000, 2006. All rights reserved.\r\n\r\nSorry if it is a false bug report, my java knowledge is minimum, I installed the latest tools my linux distribution provided (Centos 5.4) and this is the result.\r\n\r\nAs a sugestion, could you please include in the download section a \"nightly build\"?\n- This issue was closed by revision r874.\n- so i finally tried that compiler, and it appears that it defaults to java 1.4, which is very old and isn't going to work.\r\n\r\nI added some stuff to the Ant file to force java 1.6, but it won't work on ant 1.6.5.\r\n\r\n(The short answer is that java is versioned very poorly, and rather than tell you that you're using the wrong version it just barfs up cryptic error messages).\r\n\r\nif someone wants to set up a nightly build server, i certainly won't stop them, but it's low on our priority list."}
{"project_id": "Closure", "bug_id": "91", "source_type": "google", "llm_input_text": "[Title]: division by zero wrongly throws JSC_DIVIDE_BY_0_ERROR\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nunaliased division by zero `1/0`\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expect minified code, but an error is thrown instead.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nappspot\r\n\r\n Please provide any additional information below. \n\r\nDivision by zero is a perfectly sane operation in ECMAScript. See 11.5.2 [0] of the ECMAScript 5 specification. Aliased division by zero `(n=1)/0` is permitted.\r\n\r\n[0] [URL]\n\n[Context/Logs]:\n- In what way does this cause a problem?  \r\n\r\nGenerally, devision by zero is indicative of a programming error.  We could make it suppressible however.\n- In ES3, `Infinity` is a writable variable, just like `undefined`. For these cases it's both safer and faster to generate the value rather than look for it in the scope chain. Because of this, `1/0`, `1/-0`, and `void 0` are common JS idioms.\n- i also think this is a dumb error and has never solved any real problem.\n- This issue was closed by revision r900."}
{"project_id": "Closure", "bug_id": "92", "source_type": "google", "llm_input_text": "[Title]: \\0 \\x00 and \\u0000 are translated to null character\n[Symptom]:\nWhat steps will reproduce the problem? \n1. write script with string constant &quot;\\0&quot; or &quot;\\x00&quot; or &quot;\\u0000&quot;\r\n\r\n What is the expected output? What do you see instead? \nI expected a string literal with &quot;\\0&quot; (or something like that)\r\nand instead get a string literal with three null character values.\r\n\r\n What version of the product are you using? On what operating system? \ncompiler-20110119.zip on windows 7 x64\r\n\r\n Please provide any additional information below. \n\r\nThis is causing an issue with IE9 and jQuery.getScript. It causes IE9 to interpret the null character as the end of the file instead of a null character.\n\n[Context/Logs]:\n- This issue was closed by revision r904."}
{"project_id": "Closure", "bug_id": "93", "source_type": "google", "llm_input_text": "[Title]: Assignments within conditions are sometimes incorrectly removed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. See attachment.\r\n2. Run original.\r\n3. Run compiled.\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\n* Both should return &quot;true&quot;\r\n* Original does return &quot;true&quot;\r\n* Compiled returns &quot;undefined&quot;\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 706\r\nBuilt on: 2011/01/19 19:53\r\n\r\nMac OS X 10.6\r\n\r\n Please provide any additional information below. \n\r\nIn the attached reduction if the &quot;echo&quot; functions aren't used then the entire body of the function is compiled away, they are there to demonstrate that the first assignment in the condition is removed.\r\n\r\n\r\nOriginal:\r\n\r\nfunction reduction()\r\n{\r\n    var a, b;\r\n    if (echo(b = true) || echo(b = false))\r\n        a = b;\r\n    else\r\n        a = null;\r\n    return a;\r\n}\r\n\r\n\r\nCompiled:\r\n\r\nfunction reduction() {\r\n    var a;\r\n    return echo(true) || echo(a = false) ? a: null\r\n}\n\n[Context/Logs]:\n- Oops, forgot the attachment.\n- i think this might be fixed at head, but not sure. Alan, is this a known issue?\n- Not that I know of.\r\n\r\nSeems like it could be a dead assignment elimination issue.\r\n\r\nI'll take a look.\n- This issue was closed by revision r913."}
{"project_id": "Closure", "bug_id": "94", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "95", "source_type": "google", "llm_input_text": "[Title]: Overzealous arguments optimisation\n[Symptom]:\nConsider the following JavaScript code:\r\n\r\nfunction d3_call(callback) {\r\n  var f = callback;\r\n  arguments[0] = this;\r\n  f.apply(this, arguments);\r\n  return this;\r\n}\r\n\r\nThis is optimised to:\r\n\r\nfunction d3_call(a){arguments[0]=this;a.apply(this,arguments);return this};\r\n\r\nHowever, the use of a temporary variable `f` is necessary to avoid `arguments[0] = this` from overwriting the first argument.\r\n\r\nIn the above optimised code, `arguments[0] = this` causes `this` to be assigned to `a`.\r\n\r\nVerified on latest SVN r878.\r\n\r\nSee also: [URL]\n\n[Context/Logs]:\n- Good find!\r\n\r\nThe both variable inliner should not be inlining across an arguments access like this.\n- Forgot to mention, I will be looking at this in a bit. Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- it would be nice if there were real integration tests for this issue, rather than just unit tests.\n- Should be fixed with r949. Care to verify."}
{"project_id": "Closure", "bug_id": "96", "source_type": "google", "llm_input_text": "[Title]: Compiler crashes on assign statement\n[Symptom]:\nIt is a large app (containing the entire Dojo Toolkit library). Code fragment that fails:\r\n\r\n/** @constructor\r\n *  @param {...Object} params\r\n */\r\ndojox.gfx.shape.Shape = function(params) {};\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ { .......\r\n\r\n\r\nError message:\r\n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable dojox$gfx$shape$Shape\r\n  Node(NAME dojox$gfx$shape$Shape): release\\src\\dijit.js.uncompressed.js:15135:0\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n  Parent(ASSIGN): release\\src\\dijit.js.uncompressed.js:15135:22\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable dojox$gfx$shape$Shape\r\n  Node(NAME dojox$gfx$shape$Shape): release\\src\\dijit.js.uncompressed.js:15135:0\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n  Parent(ASSIGN): release\\src\\dijit.js.uncompressed.js:15135:22\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n\r\n\tat com.google.javascript.jscomp.V\n...[Description Truncated]...\n\n[Context/Logs]:\n- Sorry, forgot again.  Newest Mar 22 version.\n- Would you be able to give us a code snippet that can reproduce this?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Great!  Does it solve the --debug true prob as well?\n- i believe that problem was fixed in an unrelated change."}
{"project_id": "Closure", "bug_id": "97", "source_type": "google", "llm_input_text": "[Title]: Exception in FoldConstants while inspect if statements.\n[Symptom]:\nHere is the test case:\r\n\r\nfunction foo() {\r\n      if(sections.length != 1)children[i] = 0;\r\n      else var selectedid = children[i]\r\n} \r\n\r\nHere is the stack trace:\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nGETELEM 2 is not a string node\r\n  Node: Input_0:2:6\r\n      if(sections.length != 1)children[i] = 0;\r\n  Parent: Input_0:1:15\r\nfunction foo() {\r\n\r\n\tat com.google.javascript.rhino.Node.getString(Node.java:847)\r\n\tat com.google.javascript.jscomp.FoldConstants.tryMinimizeIf(FoldConstants.java:813)\r\n\tat com.google.javascript.jscomp.FoldConstants.visit(FoldConstants.java:275)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:463)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:490)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:448)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:245)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:412)\r\n\tat com.google.javascript.jscomp.FoldConstants.process(FoldConstants.java:87)\n\n[Context/Logs]:\n- Fixed pending integration"}
{"project_id": "Closure", "bug_id": "98", "source_type": "google", "llm_input_text": "[Title]: closure compiled swfobject error\n[Symptom]:\nswfobject.js code\r\n\r\nfunction urlEncodeIfNecessary(s) {\r\n\tvar regex = /[\\\\\\&quot;&lt;&gt;\\.;]/;\r\n\tvar hasBadChars = regex.exec(s) != null;\r\n\treturn hasBadChars &amp;&amp; typeof encodeURIComponent != UNDEF ? encodeURIComponent(s) : s;\r\n}\r\n\r\nclosure compiled:\r\n\r\nfunction Z(a){return/[\\&quot;&lt;&gt;.;]/.exec(a)!=\r\nnull&amp;&amp;typeof encodeURIComponent!=j?encodeURIComponent(a):a}\r\n\r\nbut it's error.and minify erray:\r\nFatal error: Uncaught exception 'JSMin_UnterminatedStringException' with message 'Unterminated String: '&quot;&lt;&gt;.;]/.exec(a)!=''\r\n\r\nreturn/[\\&quot;&lt;&gt;.;]/ to  return /[\\&quot;&lt;&gt;.;]/   that's OK\r\n\r\n\r\nie = !+&quot;\\v1&quot;,   closure compiled to   ie=!1,    my god!!\n\n[Context/Logs]:\n- What version of the compiler are you using? I'm not getting the same results on urlEncodeIfNecessary:\r\n\r\nfunction urlEncodeIfNecessary(s) {\r\n\tvar regex = /[\\\\\\\"<>\\.;]/;\r\n\tvar hasBadChars = regex.exec(s) != null;\r\n\treturn hasBadChars && typeof encodeURIComponent != 'undefined' ? encodeURIComponent(s) : s;\r\n}\r\nwindow[\"urlEncodeIfNecessary\"] = urlEncodeIfNecessary;\r\n\r\nCompiles to:\r\n\r\nwindow.urlEncodeIfNecessary = function(a) {\r\n  return/[\\\\\\\"<>\\.;]/.exec(a) != null && typeof encodeURIComponent != \"undefined\" ? encodeURIComponent(a) : a\r\n};\n- today download the last version.\r\n\r\nDo have this problem, by swfobject v2.2 Compiles\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Nick:  dang. vertical tab. Yeah we should fix this.\n- This issue was closed by revision r963."}
{"project_id": "Closure", "bug_id": "99", "source_type": "google", "llm_input_text": "[Title]: Numbers and quoted property names reject for get and set properties.\n[Symptom]:\n- Use --language_in=ECMASCRIPT5.\r\n- Note that these definitions cause parse errors:\r\n\r\nvar x = { get 'x'() { return 1 } };\r\nvar x = { get 1() { return 1 } };\r\n\r\nES5 allow these.  The Rhino parser needs to be updated.\n\n[Context/Logs]:\n- Rhino was patched so these are now accepted.  Numbers aren't pass through properly yet.\n- This issue was closed by revision r966."}
{"project_id": "Closure", "bug_id": "100", "source_type": "google", "llm_input_text": "[Title]: Order of jscomp_error, jscomp_warning, jscomp_off flags are not preserved\n[Symptom]:\n&quot;off&quot; always takes precedence over &quot;warning&quot;, and &quot;warning&quot; always takes precedence over &quot;error&quot;\r\n\r\nThis should be changed so that the last arguments always has highest precedence.\n\n[Context/Logs]:\n- This issue was closed by revision r973."}
{"project_id": "Closure", "bug_id": "101", "source_type": "google", "llm_input_text": "[Title]: Obvious optimizations don't works in \"inline if\"\n[Symptom]:\nTry it (advanced mode):\r\n    alert(true == null ? a() : b());\r\n\r\nEVER true != null, in this case, EVER will trigger b(), but we get:\r\n    alert(!0 == null ? a() : b());\r\n\r\nSame for:\r\n    alert(true == false ? a() : b());\r\n\r\nReal life use:\r\n    function sum(a, b){\r\n      return (a == true ? 2 : a) + b;\r\n    }\r\n    alert(sum(true, 1));\r\n\r\nResults in:\r\n    alert((!0 == !0 ? 2 : 1) + 1);\r\n\r\nBut correct is:\r\n    alert(3);\n\n[Context/Logs]:\n- This issue was closed by revision r982."}
{"project_id": "Closure", "bug_id": "102", "source_type": "google", "llm_input_text": "[Title]: compute_phase_ordering throw an error\n[Symptom]:\nJust try something like:\r\nvar a = 1;\r\n\r\nThen run:\r\nD:\\Projetos\\ccide\\library\\compiler&gt;java -jar compiler.jar --js=test.js --compute_phase_ordering\r\n\r\nYou will need wait about 10 seconds then...\r\nException in thread &quot;main&quot; java.lang.RuntimeException: unexpected exception\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner$RunTimeStats.outputBestPhaseOrdering(Unknown Source)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner$RunTimeStats.access$2300(Unknown Source)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n        at com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\n                Caused by: java.io.IOException: Stream closed\r\n        at java.io.BufferedWriter.ensureOpen(Unknown Source)\r\n        at java.io.BufferedWriter.write(Unknown Source)\r\n        at java.io.Writer.write(Unknown Source)\r\n        at java.io.Writer.append(Unknown Source)\r\n        at java.io.Writer.append(Unknown Source)\r\n        ... 4 more\r\n\r\nI don't know what do this param, but it don't works. :/\n\n[Context/Logs]:\n- We should fix this and make it a hidden option. It isn't generally useful, it runs the compile multiple times changing the order of the optimization passes and compares the results to determine what the optimal ordering is for the input.\n- This issue was closed by revision r989."}
{"project_id": "Closure", "bug_id": "103", "source_type": "google", "llm_input_text": "[Title]: LocaleUtil is not BCP47 compliant (doesn't parse locale variants correctly)\n[Symptom]:\nLocaleUtil.getLocaleFromStandardLocaleString(localeString) fails to parse correctly for language tags which have a language subtag and a variant subtag, but not region subtag:\r\n\r\nStatus    localeString     Resulting Locale\r\nOK        de_AT_1996       new Locale(&quot;de&quot;, &quot;AT&quot;, &quot;1996&quot;)\r\nOK        de__1996         new Locale(&quot;de&quot;, &quot;&quot;, &quot;1996&quot;)\r\nBROKEN    de_1996          new Locale(&quot;de&quot;, &quot;1996&quot;)\r\nBROKEN    de-1996          new Locale(&quot;de&quot;, &quot;1996&quot;)\r\n\r\n&quot;1996&quot; is just an example. The parsing doesn't work for any valid variant subtag value.\r\n\r\nSee:\r\n[URL]\r\n\r\nExpected behavior:\r\n\r\nThe localeString parsing should be BCP-47 compliant. E.g. if there's a 2nd subtag, don't just interpret it as region code. Determine whether it's a region code, script subtag, variant or extension.\r\n\r\nJava Locale 6 doesn't support script subtags and extensions, but variants.\r\n\r\nSo at the very least, I'd suggest to test whether the 2nd subtag meets syntactic requirements to be a region subtag, and if not, interpret it as variant. (support 2 letter region codes and 3 digit UN M.49 region identifiers like 419 as in es-419).\r\n\r\nOnce Java 7 is out, we can just use Locale.forLanguageTag(localeString). But until then, we need a fix that works with variants.\n\n[Context/Logs]:\n- Did you have a suggested change?\n- I don't have a patch ready. Here's a sketch of the proposed change:\r\n\r\n - Try to be as lenient in locale string parsing as LocaleUtil (and Java 6 / 7) currently is. Don't be as strict as BCP47. (A lot of time of the Java 7 locale enhancement project went into ensuring that it's as backwards compatible as possible.)\r\n\r\n - Don't try to handle script subtags in a special way (they're not expected in Java 6 anyway, but people do weird things to cope with Java 6's shortcomings). Continue to be as agnostic about the meaning of each subtag as possible to avoid incompatibilities with previous behavior.\r\n\r\n - That having said, for locale strings that have 2 subtags, I'd introduce some additional processing. If the 2nd subtag rather looks like a variant than a region subtag, then interpret it as a variant.\r\n\r\nDetail: For locale strings with exactly 2 subtags, these are the heuristics I'd use to decide whether the subtag should be used as 2nd (region) or 3rd (variant) field in the Locale constructor invocation:\r\n\r\n - 2 letter subtag -> region subtag\r\n - 3 digit subtag -> region subtag\r\n - 4+ digits / characters -> variant subtag (more loose than BCP47's syntax requirements, but a good heuristic). Matches \"1996\", \"POSIX\", \"fonipa\", etc.\r\n - 3 letter subtag -> by BCP47 this can't be a region subtag, but people might use 3 letter region codes in their code. I guess I'd continue to interpret this as a region subtag.\r\n - \"x-foobar\" - private use parts: I guess I wouln't deal with that for now.\r\n\r\nSo I guess the rule could be as simple as:\r\n If the locale string has 2 subtags, interpret the 2nd subtag as variant if it's 4+ alphanum characters long. Otherwise interpret it as region subtag.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Alternative solution:\r\n\r\nRemove LocaleUtil from the public version of JSCompiler. Then we can change the Google internal call sites of LocaleUtil.getLocaleFromStandardLocaleString to call ICU4J or other locale parsing methods which wouldn't be available in the public JSCompiler code base.\n- This issue was closed by revision r1003."}
{"project_id": "Closure", "bug_id": "104", "source_type": "google", "llm_input_text": "[Title]: Closure Compiler failed to translate all instances of a function name\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the attached jQuery Multicheck plugin using SIMPLE optimization.\r\n\r\n What is the expected output? What do you see instead? \nYou expect that the function preload_check_all() gets its name translated appropriately. In fact, the Closure Compiler breaks the code by changing the function declaration but NOT changing the call to the function on line 76.\n\n[Context/Logs]:\n- thanks for reporting this. this is an interesting bug to me.\n- something's going wrong with the function inliner. it's trying to inline one of you functions, but botches the job. here's the simplest repro case i can come up with:\r\n\r\n(function($) {\r\n  $.fn.multicheck = function(options) {\r\n    initialize.call(this, options);\r\n  };\r\n\r\n  function initialize(options) {\r\n    options.checkboxes = $(this).siblings(':checkbox');\r\n    preload_check_all.call(this);\r\n  };\r\n\r\n  function preload_check_all() {\r\n    $(this).data('checkboxes');\r\n  };\r\n})(jQuery);\n- ... [Middle Discussions Snipped for Brevity] ...\n- I have a fix under review for his.\n- This issue was closed by revision r1011."}
{"project_id": "Closure", "bug_id": "105", "source_type": "google", "llm_input_text": "[Title]: Codepoint U+007f appears raw in output\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Open [URL] in your browser\r\n2. Enter the source code: alert('\\x7f')\r\n3. Hit the &quot;Compile&quot; button.\r\n\r\nWhat is the expected output?\r\nalert(&quot;\\x7f&quot;)\r\n\r\nWhat do you see instead?\r\nalert(&quot;\u007f&quot;);\r\n\r\n\r\n What version of the product are you using? On what operating system? \nThe version live on 11 April 2011.\r\n\r\n Please provide any additional information below. \nCodepoint U+007f is a delete control character and is the only non-printable ASCII codepoint that is not &lt;= U+0020.  [URL]\r\n\r\nIt should probably not appear raw in emitted source code because, it can confuse encoders.\n\n[Context/Logs]:\n- It go to the code, but is non-visible.\r\n\r\nalert('\\x7f'); // Result will have 11 bytes\r\nalert('');     // Result will have 10 bytes\n- Yes.  It is there.  U+007f is not a printable character, so it should probably not appear in the output the way U+001f does not appear raw in the output.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Closure compiler recognizes them just fine but does not seem to emit them.  The input\r\n\r\n    alert('\\u007f')\r\n\r\nproduces the same compiler output as\r\n\r\n    alert('\\x7f')\r\n\r\n\r\nSection 7.8.4 of the EcmaScript 3 spec defines EscapeSequence thus\r\n\r\nEscapeSequence ::\r\n    CharacterEscapeSequence\r\n    OctalEscapeSequence\r\n    HexEscapeSequence\r\n    UnicodeEscapeSequence\r\n...\r\nHexEscapeSequence ::\r\n    x HexDigit HexDigit\r\n\r\nEcmaScript 3 disallows OctalEscapeSequence (but allows it as an optional extension in an annex) but allows \\0 not followed by [0-9].\n- This issue was closed by revision r1014."}
{"project_id": "Closure", "bug_id": "106", "source_type": "google", "llm_input_text": "[Title]: JSDoc Type Info Assigned to Wrong Node\n[Symptom]:\n[URL]\r\n\r\n What steps will reproduce the problem? \nCompiling a file named type_check.js with the contents:\r\n\r\nvar list = /** @type {!Array.&lt;string&gt;} */ ['Hello, ', 'how ', 'are ', 'you'];\r\nlist.push('?');\r\n\r\ndocument.getElementById('node').innerHTML = list.toString();\r\n\r\nusing the command:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --warning_level=VERBOSE --jscomp_error=checkTypes  --js=type_check.js\r\n\r\nResults in:\r\n\r\ntype_check.js:4: ERROR - assignment to property innerHTML of HTMLElement\r\nfound   : string\r\nrequired: Array\r\n\r\n What is the expected output? What do you see instead? \n\r\nI would expect a warning or error that I have a mal-formed type-cast (missing parentheses) or for the compiler to apply the type info to an adjacent node.\r\n\r\nInstead, it picks the next assignment in the code (at least, I'm guessing that's what is happening).\r\n\r\n\r\n What version of the product are you using? On what operating system? \nHead on Mac OS X, Java 1.6_22\n\n[Context/Logs]:\n- This issue was closed by revision r1037."}
{"project_id": "Closure", "bug_id": "107", "source_type": "google", "llm_input_text": "[Title]: The \"const\" keyword is unsupported\n[Symptom]:\nI gat an error when trying to compress code containing constants:\r\n&quot;JSC_PARSE_ERROR: Parse error. Unsupported syntax: CONST at line 254 \r\ncharacter 0\r\nconst I8 = 8;&quot;\n\n[Context/Logs]:\n- A hacky patch attached that fixes this for existing code (assumes const is var).\r\n\r\nObviously it'd be cool if const-ness checked but this should get your code compiled\r\nat least.\n- In general, closure compiler emits errors for code that it can tell won't work on all \r\nbrowsers. (const doesn't work on IE).\r\n\r\nWe've talked about supporting const, but were worried that would just make the problem \r\nworse. A large part of the benefit of the compiler is that it guarantees all browsers \r\nwill parse your code correctly.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Why does it matter if the input to the compiler contains the 'const' kewyord? For cross-brwoser compatibility, the closure compiler would just have to make sure that 'const' doesn't appear in the _output_, no?\n- There is an option to accept const but to treat it as var. I dont encourage this though as in ecmascript 6 const is lexically scoped like let ( also in es6) but unlike var"}
{"project_id": "Closure", "bug_id": "108", "source_type": "google", "llm_input_text": "[Title]: The \"const\" keyword is unsupported\n[Symptom]:\nI gat an error when trying to compress code containing constants:\r\n&quot;JSC_PARSE_ERROR: Parse error. Unsupported syntax: CONST at line 254 \r\ncharacter 0\r\nconst I8 = 8;&quot;\n\n[Context/Logs]:\n- A hacky patch attached that fixes this for existing code (assumes const is var).\r\n\r\nObviously it'd be cool if const-ness checked but this should get your code compiled\r\nat least.\n- In general, closure compiler emits errors for code that it can tell won't work on all \r\nbrowsers. (const doesn't work on IE).\r\n\r\nWe've talked about supporting const, but were worried that would just make the problem \r\nworse. A large part of the benefit of the compiler is that it guarantees all browsers \r\nwill parse your code correctly.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Why does it matter if the input to the compiler contains the 'const' kewyord? For cross-brwoser compatibility, the closure compiler would just have to make sure that 'const' doesn't appear in the _output_, no?\n- There is an option to accept const but to treat it as var. I dont encourage this though as in ecmascript 6 const is lexically scoped like let ( also in es6) but unlike var"}
{"project_id": "Closure", "bug_id": "109", "source_type": "google", "llm_input_text": "[Title]: The \"const\" keyword is unsupported\n[Symptom]:\nI gat an error when trying to compress code containing constants:\r\n&quot;JSC_PARSE_ERROR: Parse error. Unsupported syntax: CONST at line 254 \r\ncharacter 0\r\nconst I8 = 8;&quot;\n\n[Context/Logs]:\n- A hacky patch attached that fixes this for existing code (assumes const is var).\r\n\r\nObviously it'd be cool if const-ness checked but this should get your code compiled\r\nat least.\n- In general, closure compiler emits errors for code that it can tell won't work on all \r\nbrowsers. (const doesn't work on IE).\r\n\r\nWe've talked about supporting const, but were worried that would just make the problem \r\nworse. A large part of the benefit of the compiler is that it guarantees all browsers \r\nwill parse your code correctly.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Why does it matter if the input to the compiler contains the 'const' kewyord? For cross-brwoser compatibility, the closure compiler would just have to make sure that 'const' doesn't appear in the _output_, no?\n- There is an option to accept const but to treat it as var. I dont encourage this though as in ecmascript 6 const is lexically scoped like let ( also in es6) but unlike var"}
{"project_id": "Closure", "bug_id": "110", "source_type": "google", "llm_input_text": "[Title]: javascript file order causes namespace creation problem in compiled code\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. I have attached a tar.gz file with three javascript files (file1.js, file2.js, and file3.js) and two output files (out123.js and out213.js).\r\n\r\n2. I compiled the outputs using the following commands:\r\n\r\njava -jar ../compiler.jar --js=file1.js --js=file2.js --js=file3.js --formatting=PRETTY_PRINT --js_output_file=out123.js\r\n\r\njava -jar ../compiler.jar --js=file2.js --js=file1.js --js=file3.js --formatting=PRETTY_PRINT --js_output_file=out213.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nOne output will work when run in a browser (output123.js) and one will not (output213.js).  The problem in output213.js is it cannot declare xFuncs because file1.Obj is not declared yet, error on line 2.\r\n\r\nIt appears that when file2 is added to the compiled file it realizes that file1.Obj will be declared in the file that goog.provides that namespace, and thus skips that declaration.  Then when file1 is added to the compiled file the declaration occurs.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nJust to make sure that it was easy to repeat, I downloaded the most recent version (Version: 20100917 (revision 440)) of the jscompiler from code.google.com/p/closure-compiler/downloads/list.  I am running it on a variant of Ubuntu linux.\r\n\r\n\r\n Please provide any additional information below. \n\r\nThis issue arose in a project I am working on where:\r\na.  file2 is automatically generated\r\nb.  file3 represents the overarching project that will be compiled into a single javascript file\r\nc.  The order in which the files are given to the compiler is automatically generated by two other programs.\n\n[Context/Logs]:\n- I think we've said in the past we don't plan on fixing this, because the behavior is not well-defined. \r\n\r\nI honestly think it should be a compiler error if one file tried to goog.provide a property on a function that's defined in another file.\r\n\r\nwhat do you think?\n- It's also worth pointing out that this is also broken in uncompiled code, but breaks in a much more subtle way. (the property is just overwritten by the 3rd file).\n- ... [Middle Discussions Snipped for Brevity] ...\n- There are plenty of examples where it's not safe for us to move the function. For example, suppose you have:\r\n\r\ngoog.provide('Foo.bar');\r\nFoo.bar = true;\r\nalert(Foo);\r\nvar Foo = function() {};\r\n\r\nPutting the function at the top would cause different behavior.\r\n\r\nOne of the things I like about Java is that it forces you to be very explicit about where the entry points of your code are, and tries to re-order top-level statements to make sense. But JS does not do this. And as a matter of principle, we try not to \"fix\" broken uncompiled code. (It's really a PITA when your compiled code works, but when you try to debug the uncompiled code it breaks).\n- This issue was closed by revision r1045."}
{"project_id": "Closure", "bug_id": "111", "source_type": "google", "llm_input_text": "[Title]: Internal Compiler Error on Bullet\n[Symptom]:\nWhat steps will reproduce the problem? \n1. The attachment is the Bullet physics library, compiled from C++ to JS using Emscripten.\r\n2. I tried to compile it using the Closure Compiler, latest downloadable version (Apr 5 2011), with\r\n\r\njava -jar apr5compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --variable_map_output_file js.vars --js bullet_1_1_q1.js --js_output_file bullet_1_1_q1.cc.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI would expect it to compile successfully. Instead it halts (after a few hours) with\r\n\r\n\r\n==================\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(LABEL): bullet_1_1_q1.js:60150:8\r\n        $for_body$5: while(1) { \r\n  Parent(BLOCK): bullet_1_1_q1.js:60043:26\r\n      if (__label__ == 0) {\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(LABEL): bullet_1_1_q1.js:60150:8\r\n        $for_body$5: while(1) { \r\n  Parent(BLOCK): bullet_1_1_q1.js:60043:26\r\n      if (__label__ == 0) {\r\n\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:129)\r\n\tat com.google.javascript.jscomp.RenameLabels$ProcessLabels.shouldTraverse(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unkno\n...[Description Truncated]...\n\n[Context/Logs]:\n- We should split this into two issues, one for the exception and one for the runtime.  In my first attempt to reproduce this the \"coalesceVariableNames\" pass ran for 30 minutes before I killed it.\n- I should also not that \"flowSensitiveInlineVariables\" ran to completion in 70 seconds (which is too long, as well).\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1050.\n- Interesting. I was just reading the Emscripten paper last week.\r\n\r\nThis looks like lots of opportunities for both variable inliner and variable name coalescing. I think that's why it spends so much time on it. We never really tested on generated code that looks like 3 address SSA forms so it might not be optimized in terms of compilation time.\r\n\r\nWe should create a seperate issue to address the compilation time.\r\n\r\n-Alan"}
{"project_id": "Closure", "bug_id": "112", "source_type": "google", "llm_input_text": "[Title]: ActiveXObject was Renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n1.java -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js a.js \r\n 2. \n 3. \n\r\n What is the expected output? What do you see instead? \nwindow.ActiveXObject&amp;&amp;alert(&quot;GOOD&quot;);\r\n\r\n\r\n What version of the product are you using? On what operating system? \nwindow.a&amp;&amp;alert(&quot;GOOD&quot;);\r\n\r\n\r\n Please provide any additional information below. \nfunction test() {\r\n  if (window.ActiveXObject) {\r\n    alert(&quot;GOOD&quot;);\r\n  }\r\n}\r\ntest();\n\n[Context/Logs]:\n- ActiveXObject is not defined to be a property of window, but instead a global object.  Advanced mode distinguishes between global variables and properties on the global this.  You have two choices to solve this:\r\n1) use a quoted reference: window['ActiveXObject']\r\n2) add an extern definition: Window.prototype.ActiveXObject;\n- i hope Window.prototype.ActiveXObject should be add to externs\n- ... [Middle Discussions Snipped for Brevity] ...\n- my patch\r\n[URL]\n- This issue was closed by revision r1058."}
{"project_id": "Closure", "bug_id": "113", "source_type": "google", "llm_input_text": "[Title]: Add extern: XDomainRequest\n[Symptom]:\nIE8 and IE9 have an XDomainRequest.\n\n[Context/Logs]:\n- thanks for the patch. looks good to me.\n- Is there a reason the .on* handlers and .timeout were omitted from [URL] ?\r\n\r\nAlso, varBody in .send() is optional.\n- somebody else submitted it first. this was purely coincidence. i'll submit your changes on top tomorrow morning.\n- This issue was closed by revision r1067."}
{"project_id": "Closure", "bug_id": "114", "source_type": "google", "llm_input_text": "[Title]: Add extern: SharedWorker\n[Symptom]:\nChrome, Safari, and Opera have a SharedWorker.\n\n[Context/Logs]:\n- looks good to me. thanks for the patch!\n- This issue was closed by revision r1073."}
{"project_id": "Closure", "bug_id": "115", "source_type": "google", "llm_input_text": "[Title]: Add extern: CallFunction on Flash objects\n[Symptom]:\nI use CallFunction a lot with my own ExternalInterface object serializer (to be released very soon)\n\n[Context/Logs]:\n- Hi!\r\n\r\nI am not sure if you have contributed before. Have you signed the CLA?\n- Yep. I have contributions in Closure Library. My CLA might be under \"ivan@ludios.org\".\n- ... [Middle Discussions Snipped for Brevity] ...\n- I sent this to Andy, who maintains the flash externs. He said this looks fine. Thanks for the patch!\n- This issue was closed by revision r1082."}
{"project_id": "Closure", "bug_id": "116", "source_type": "google", "llm_input_text": "[Title]: no warnings when @private prop is redeclared on subclass\n[Symptom]:\nWhat steps will reproduce the problem? \n/** @constructor */ function Foo() { /** @private */ this.x_ = 3; }\r\n\r\nthen, in a separate file:\r\n/** @constructor \r\n * @extends {Foo} */ function SubFoo() { /** @private */ this.x_ = 3; }\r\n\r\nthen, compile with --jscomp_error=visibility\r\n\r\nExpected: You should get an error.\r\nActual: No error.\r\n\r\nYou get an error as appropriate if the second @private annotation is removed.\n\n[Context/Logs]:\n- this sounds like it might be related to issue 264\n- This issue was closed by revision r1089.\n- Did this also resolve 264?"}
{"project_id": "Closure", "bug_id": "117", "source_type": "google", "llm_input_text": "[Title]: Node.propToString fails on certain property types.\n[Symptom]:\nPatch attached\n\n[Context/Logs]:\n- This issue was closed by revision r1104."}
{"project_id": "Closure", "bug_id": "118", "source_type": "google", "llm_input_text": "[Title]: unexpected typed coverage of less than 100%\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create JavaScript file:\r\n/*global window*/\r\n/*jslint sub: true*/\r\n/**\r\n * @constructor\r\n * @param {!Element} element\r\n */\r\nfunction Example(element) {\r\n    /**\r\n     * @param {!string} ns\r\n     * @param {!string} name\r\n     * @return {undefined}\r\n     */\r\n    this.appendElement = function appendElement(ns, name) {\r\n        var e = element.ownerDocument.createElementNS(ns, name);\r\n        element.appendChild(e);\r\n    };\r\n}\r\nwindow[&quot;Example&quot;] = Example;\r\n2. compile it:\r\njava -jar compiler.jar --jscomp_error checkTypes --summary_detail_level 3 --js v.js --js_output_file compiled.js\r\n3. observe the outcome:\r\n0 error(s), 0 warning(s), 73.7% typed\r\n\r\n What is the expected output? What do you see instead? \nThis was expected:\r\n0 error(s), 0 warning(s), 100% typed\r\n\r\n What version of the product are you using? On what operating system? \nClosure Compiler Version: 964, Built on: 2011/04/05 14:31 on GNU/Linux.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This issue was closed by revision r1120."}
{"project_id": "Closure", "bug_id": "119", "source_type": "google", "llm_input_text": "[Title]: checkVars / undefinedVars diagnostics not working from command line\n[Symptom]:\nIt seems that setting neither checkVars nor undefinedVars via the jscomp_warning command line argument does anything. The check(s) do work when &quot;warning_level VERBOSE&quot; is set though. Other diagnostic groups, such as globalThis, do work however.\r\n\r\nHere's what I'm seeing on the console:\r\n\r\n---------------------\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\nfoo={bar:function(){alert(this.baz)}};\r\n\r\n&gt;java -jar compiler.jar --js test.js --warning_level VERBOSE\r\ntest.js:2: WARNING - dangerous use of the global this object\r\n\r\ntest.js:1: ERROR - variable foo is undefined\r\nfoo = {};\r\n^\r\n\r\n1 error(s), 1 warning(s)\r\n\r\n&gt;java -jar compiler.jar --js test.js --jscomp_warning globalThis\r\ntest.js:2: WARNING - dangerous use of the global this object\r\n\r\n0 error(s), 1 warning(s)\r\nfoo={bar:function(){alert(this.baz)}};\r\n\r\n&gt;java -jar compiler.jar --js test.js --jscomp_warning checkVars\r\nfoo={bar:function(){alert(this.baz)}};\r\n\r\n&gt;java -jar compiler.jar --js test.js --jscomp_warning undefinedVars\r\nfoo={bar:function(){alert(this.baz)}};\r\n\r\n---------------------\r\n\r\nMy test.js file looks like this:\r\n\r\n---------------------\r\n\r\nfoo = {};\r\nfoo.bar = function() { alert(this.baz); };\r\n\r\n---------------------\r\n\r\nTested against r1123 which was committed 5/20/11.\n\n[Context/Logs]:\n- This issue was closed by revision r1138."}
{"project_id": "Closure", "bug_id": "120", "source_type": "google", "llm_input_text": "[Title]: Test for goog.date.relative [FAILED]\n[Symptom]:\nTest for goog.date.relative [FAILED]\r\n/F:/webdev/WebFaction/media/closure-\r\nlibrary/closure/goog/date/relative_test.html\r\n6 of 6 tests run in 10ms.\r\n4 passed, 2 failed.\r\n2 ms/test. 12 files loaded.\r\nERROR in testFormatRelativeForFutureDates\r\nExpected &lt;in 2 days&gt; (String) but was &lt;in 1 day&gt; (String)\r\n&gt; SyntaxError : (unknown)\r\n\r\nERROR in testFormatRelativeForPastDates\r\nExpected &lt;2 days ago&gt; (String) but was &lt;3 days ago&gt; (String)\r\n&gt; SyntaxError : (unknown)\n\n[Context/Logs]:\n- Can you file this against Closure Library? I'm sure they'd appreciate the patch!\r\n[URL]\n- Ya I did, I didnt noticed until I filed issue 9 and 10 that I was on the compiler issue \r\ntracker =P"}
{"project_id": "Closure", "bug_id": "121", "source_type": "google", "llm_input_text": "[Title]: Compiler should warn/error when instance methods are operated on\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile and run the following code:\r\n  goog.require('goog.graphics.Path');\r\n  function demo() {\r\n    var path = new goog.graphics.Path();\r\n    var points = [[1,1], [2,2]];\r\n    for (var i = 0; i &lt; points.length; i++) {\r\n      (i == 0 ? path.moveTo : path.lineTo)(points[i][0], points[i][1]);\r\n    }\r\n  }\r\n  goog.exportSymbol('demo', demo);\r\n\r\n What is the expected output? What do you see instead? \nI expect it to either work or produce a warning.  In this case, the latter since there's an error in the javascript - when calling path.moveTo(x, y), &quot;this&quot; is set correctly to the path element in the moveTo function.  But when the function is operated on, as in (i == 0 ? path.moveTo : path.lineTo)(x, y), it's no longer an instance method invocation, so &quot;this&quot; reverts to the window object.  In this case, an error results because moveTo references a field in Path that is now &quot;undefined&quot;.  Better would be to issue a warning/error that an instance method is being converted to a normal function (perhaps only if it references this).\r\n\r\n What version of the product are you using? On what operating system? \nUnknown (it's built into my build tools) - I presume this issue is present in all builds.  Running on ubuntu.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This issue was closed by revision r1147."}
{"project_id": "Closure", "bug_id": "122", "source_type": "google", "llm_input_text": "[Title]: Incorrect line number reporting\n[Symptom]:\nWhat steps will reproduce the problem? \n---- compile this ------------------------------------------------\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n/*\r\nline 1\r\nline 2\r\n..\r\nThis comment seems to disturb line nr reporting\r\n*/\r\n\r\n/**\r\n* provoke error in annotation\r\n* @param {UNKNOWN_TYPE} name &lt;- error this is not line 5, it is line 9\r\n*/\r\nfunction hello(name) {\r\n    SYNTAX-ERROR-ON-LINE-13-OK\r\n}\r\n\r\nhello('New user');\r\n----- end code ----------------------------------------------\r\n\r\n What is the expected output? What do you see instead? \nShould get two error/warnings. One on line 9 and one on line 13.\r\nBoth errors are found but first annotation error is reported to be on line 5 instead of line 9. \r\n\r\n-----compiler output -----\r\nNumber of warnings: 2\r\n\r\nJSC_PARSE_ERROR: Parse error. Unknown type UNKNOWN_TYPE at line 5 character 10\r\nThis comment seems to disturb line nr reporting\r\n          ^\r\nJSC_USELESS_CODE: Suspicious code. This code lacks side-effects. Is there a bug? at line 13 character 19\r\nSYNTAX-ERROR-ON-LINE-13-OK\r\n----------------------------\r\n\r\n What version of the product are you using? On what operating system? \nBoth the 20100514 release and online compiler.\r\n\r\n Please provide any additional information below. \n\r\nThe annotation error reporter seems to treat any preceding comment\r\nas single-line when it calculates line numbers. \r\n(Same in both SIMPLE and ADVANCED mode, just depending what errors are triggered).\r\n\r\nRegards\r\n// Fredrik Blomqvist\n\n[Context/Logs]:\n- Assigning this to Alan until proven that his Rhino patch doesn't fix this.\n- Still reproducible.\n- This issue was closed by revision r1149."}
{"project_id": "Closure", "bug_id": "123", "source_type": "google", "llm_input_text": "[Title]: Cryptic error message on invalid \"@type function\" annotation\n[Symptom]:\nWhat steps will reproduce the problem? \n1.  test.js:\r\n\r\n    /**\r\n     * @type function\r\n     */\r\n    var callback;\r\n\r\n2. java -jar compiler.jar --js test.js \r\n\r\n What is the expected output? What do you see instead? \n\r\nWarning reported is:\r\n\r\ntest.js:3: WARNING - Parse error. Unexpected end of file\r\n */\r\n  ^\r\n\r\nExpected to see the actual warning (e.g., &quot;expected '('&quot;, for the *previous* line)\r\n\r\n What version of the product are you using? On what operating system? \n\r\ncompiler-20110502\r\n\r\n Please provide any additional information below. \n\r\nSimply adding &quot;()&quot; to it (&quot;@type function()&quot;) removes the warning, but it would be much more effective if it could communicate that properly.\n\n[Context/Logs]:\n- Actually the correct annotation would be:\r\n\r\n/**\r\n * @type {function}\r\n */\r\nvar callback;\r\n\r\nJSDoc type expressions are enclosed in braces.\n- Hmm, you're right that Closure does expect braces.  But \"JSDoc type expressions\" do NOT use braces -- based on the jsdoc-toolkit documentation, at least.  Braces are only used in @param in jsdoc.\r\n\r\nThat means this is less of an issue with Closure, and more the fact that we want proper JSDoc being generated more importantly than Closure understanding the types.  JSDoc doesn't document \"function\" differently though, so having it in braces wouldn't be a big deal.\r\n\r\nEither way, adding the parens actually does fix the Closure warning, regardless.\n- ... [Middle Discussions Snipped for Brevity] ...\n- yeah, \"function\" is a keyword that must always be followed by parens. Closure compiler is agnostic about the braces around @type annotations. \r\n\r\nthe extra warning message should be fixed.\n- This issue was closed by revision r1158."}
{"project_id": "Closure", "bug_id": "124", "source_type": "google", "llm_input_text": "[Title]: Advanced compilations renames a function and then deletes it, leaving a reference to a renamed but non-existent function\n[Symptom]:\nIf we provide the below code to advanced:\r\n\r\n\r\nfunction A() {\r\nthis._x = 1;\r\n}\r\n\r\nA.prototype['func1'] = // done to save public reference to func1\r\nA.prototype.func1 = function() {\r\n  this._x = 2;\r\n  this.func2();\r\n}\r\n\r\nA.prototype.func2 = function() {\r\n  this._x = 3;\r\n  this.func3();\r\n}\r\n\r\nwindow['A'] = A;\r\n\r\n\r\nWe get the output:\r\n\r\n\r\nfunction a() {\r\n  this.a = 1\r\n}\r\na.prototype.func1 = a.prototype.b = function() {\r\n  this.a = 2;\r\n  this.c() // Problem!\r\n};\r\nwindow.A = a;\r\n\r\n\r\nSo the compiler emits no errors, and renames 'func2' to 'c' but ends up throwing away the definition of that function!\r\n\r\nThe problem arises when I use:\r\n\r\nA.prototype['func1'] = // done to save public reference to func1\r\nA.prototype.func1 = function() {\r\n...\r\n}\r\n\r\nThe ['func1'] line is apparently enough to save the reference correctly, but also has the side effect of causing the function innards to do the wrong thing.\r\n\r\nI can of course instead write it as:\r\n\r\nA.prototype['func1'] = A.prototype.func1;\r\nA.prototype.func1 = function() {\r\n  this._x = 2;\r\n  this.func2();\r\n}\r\n\r\nIn which case Advanced will compile correctly and the results will also be valid.\r\n\r\nfunction a() {\r\n  this.a = 1\r\n}\r\na.prototype.func1 = a.prototype.b;\r\na.prototype.b = function() {\r\n  this.a = 2;\r\n  this.a = 3 // func2, correctly minified\r\n};\r\nwindow.A = a;\r\n\r\n\r\nFor now I can just use the expected way of declaring that func1 export, but since the compiler returns with no errors or warnings and creates a function with no definition, it seems worth reporting.\n\n[Context/Logs]:\n- Addition: The A.prototype['func1'] = A.prototype.func1; must still go after func1's definition, and not before.\n- Please confirm the version of the compiler you are using.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I have a fix under review\n- This issue was closed by revision r1160."}
{"project_id": "Closure", "bug_id": "125", "source_type": "google", "llm_input_text": "[Title]: @enum does not type correctly\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. create an enum with any syntax\r\nmy example:\r\n/** \r\n@type {Object}\r\n*/\r\nvar NS = {};\r\n\r\n/**\r\n@enum {number}\r\n*/\r\nNS.keys = { \r\n\ta: 1, \r\n\tb: 2, \r\n\tc: 3\r\n};\r\n\r\n/**\r\n@enum\r\n*/\r\nwindow['gKEYS'] = NS.keys;\r\n\r\n\r\n2. complie with --compilation_level ADVANCED_OPTIMIZATIONS --summary_detail_level 3 --warning_level VERBOSE\r\n\r\n3. look at the % typed\r\n\r\n What is the expected output? What do you see instead? \nit shouldn't count the enum as un-typed; it does...\r\n\r\n What version of the product are you using? On what operating system? \nVersion: 1043\r\nBuilt on: 2011/05/02 19:47\r\n\r\n Please provide any additional information below. \n\r\ni also tried to tersely coerce the type, eg:\r\n/** @type {number} */ a:  (/** @type {number} */(1)),\r\n\r\nwhich has no effect.\n\n[Context/Logs]:\n- Thanks for pointing this out.\r\n\r\nYi Zhu found that the problem is the name string node 'a', 'b', 'c' has no type.\r\n\r\nI personally think it doesn't really matter what we type we give those nodes: number or the proper EnumValueType make sense. Alternatively we can just not count those in the % type tally.\n- This issue was closed by revision r1167."}
{"project_id": "Closure", "bug_id": "126", "source_type": "google", "llm_input_text": "[Title]: String escaping mishandles null byte\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run:\r\nvar x = &quot;\\u00003&quot;; if (x.length &lt; 2) { alert(&quot;fail&quot;); } else { alert(&quot;win&quot;); }\r\n2. Compile and run\r\n\r\n What is the expected output? What do you see instead? \n&quot;win&quot; is expected. &quot;fail&quot; is observed\r\n\r\n What version of the product are you using? On what operating system? \nr1167 on OS x 10.6\r\n\r\n Please provide any additional information below. \nThe problem is here: [URL]\r\n\r\nHere's a patch that fixes it:\r\n$ svn diff\r\nIndex: src/com/google/javascript/jscomp/CodeGenerator.java\r\n===================================================================\r\n--- src/com/google/javascript/jscomp/CodeGenerator.java\t(revision 1167)\r\n+++ src/com/google/javascript/jscomp/CodeGenerator.java\t(working copy)\r\n@@ -1012,7 +1012,7 @@\r\n     for (int i = 0; i &lt; s.length(); i++) {\r\n       char c = s.charAt(i);\r\n       switch (c) {\r\n-        case '\\0': sb.append(&quot;\\\\0&quot;); break;\r\n+        case '\\0': sb.append(&quot;\\\\000&quot;); break;\r\n         case '\\n': sb.append(&quot;\\\\n&quot;); break;\r\n         case '\\r': sb.append(&quot;\\\\r&quot;); break;\r\n         case '\\t': sb.append(&quot;\\\\t&quot;); break;\r\n\r\nYou could also lookahead and output &quot;\\\\000&quot; only if the following char is 0-7 (octal valid) and otherwise output &quot;\\\\0&quot;. Is 2 bytes worth the complexity?\n\n[Context/Logs]:\n- This bug was introduced in r904 \"Special case the NUL character\"\n- thanks for the patch.\r\n\r\nCan you sign a CLA so that we can accept patches from you? See this for more explanation:\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- I accept full license rights to the above patch and submit the patch to Google under the aforementioned CLA.\n- This issue was closed by revision r1179."}
{"project_id": "Closure", "bug_id": "127", "source_type": "google", "llm_input_text": "[Title]: --language_in=ECMASCRIPT5_STRICT results in 1 'use strict' per input file\n[Symptom]:\nWhat steps will reproduce the problem? \n1.  Create a JS file called &quot;get_num.js&quot; with the contents &quot;var getNum = function() { return 5; };&quot;\r\n2.  Create a JS file called &quot;alert.js&quot; with the contents &quot;alert(getNum());&quot;\r\n3.  Compile the two files with the following command:\r\n\r\njava -jar compiler.jar --language_in=ECMASCRIPT5_STRICT --compilation_level=ADVANCED_OPTIMIZATIONS --warning_level=VERBOSE --js get_num.js --js alert.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI would expect the output to be:\r\n\r\n'use strict';alert(5);\r\n\r\nor, if the compiler wants to be really clever, just &quot;alert(5)&quot; since this is already ES5 Strict compliant.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nHead on Mac OS X\r\n\r\n Please provide any additional information below. \n\r\n[URL]\n\n[Context/Logs]:\n- Yi's taking a look right now.\n- Its fixed. It should be in the next release.\n- This issue was closed by revision r1192."}
{"project_id": "Closure", "bug_id": "128", "source_type": "google", "llm_input_text": "[Title]: Invalid identifier decoding.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. In [URL] compile the below\r\n\r\n    // ==ClosureCompiler==\r\n    // @compilation_level SIMPLE_OPTIMIZATIONS\r\n    // @output_file_name default.js\r\n    // ==/ClosureCompiler==\r\n\r\n    var \\u0069\\u0066 = 1;\r\n\r\nWhat is the expected output?\r\n\r\n    var \\u0069\\u0066 = 1;\r\n\r\nWhat do you see instead?\r\n\r\n    var if = 1;\r\n\r\n\r\n&quot;if&quot; is not a valid identifier since it is a reserved word, but \\u0069\\u0066 is a valid identifier.\r\nTry running the below in squarefree.com/shell/shell.html\r\n\r\nvar \\u0069\\u0066 = 1;\r\nalert(window['if'])\n\n[Context/Logs]:\n- Good catch, mike.\r\n\r\nYi would you mind taking a look?\n- Issue 493 has been merged into this issue.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1208.\n- When it comes to \\u0069\\u0066 being a valid identifier:\r\n\r\n\"A UnicodeEscapeSequence cannot be used to put a character into an IdentifierName that would otherwise be illegal.\"\r\n  [URL]\r\n\r\n\"... it is possible to create Identifiers that unescape to a reserved word so long as at least one character is fully escaped.\"\r\n  [URL]\r\n\r\nThis additional assumption is not mentioned on\r\n  [URL]\r\nand\r\n  [URL]"}
{"project_id": "Closure", "bug_id": "129", "source_type": "google", "llm_input_text": "[Title]: Column-indicating caret is sometimes not in error output\n[Symptom]:\nFor some reason, the caret doesn't always show up in the output when there are errors.\r\n\r\nWhen test.js looks like this:\r\n\r\n\r\n&gt;alert(1;\r\n\r\n\r\n, the output is this:\r\n\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\ntest.js:1: ERROR - Parse error. missing ) after argument list\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\nHowever, when test.js looks like this (notice the line break after the semicolon):\r\n\r\n\r\n&gt;alert(1;\r\n&gt;\r\n\r\n\r\n, the output is this:\r\n\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\ntest.js:1: ERROR - Parse error. missing ) after argument list\r\nalert(1;\r\n        ^\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\nThat's the simplest reproduction of the problem that I could come up with, but I just encountered the problem in a file with ~100 LOC in it. This is the first time I believe I've run into the problem, but when it happens, my error parser fails and it becomes a pain to track down the raw output to find the actual problem.\r\n\r\nTested against r1171, committed 6/10 08:06. The problem is present going back to at least r1000, so this isn't a new issue.\n\n[Context/Logs]:\n- It's fixed and will come with the next release.\n- This issue was closed by revision r1215.\n- This issue was closed by revision r1218.\n- This issue was closed by revision r1220."}
{"project_id": "Closure", "bug_id": "130", "source_type": "google", "llm_input_text": "[Title]: Column-indicating caret is sometimes not in error output\n[Symptom]:\nFor some reason, the caret doesn't always show up in the output when there are errors.\r\n\r\nWhen test.js looks like this:\r\n\r\n\r\n&gt;alert(1;\r\n\r\n\r\n, the output is this:\r\n\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\ntest.js:1: ERROR - Parse error. missing ) after argument list\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\nHowever, when test.js looks like this (notice the line break after the semicolon):\r\n\r\n\r\n&gt;alert(1;\r\n&gt;\r\n\r\n\r\n, the output is this:\r\n\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\ntest.js:1: ERROR - Parse error. missing ) after argument list\r\nalert(1;\r\n        ^\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\nThat's the simplest reproduction of the problem that I could come up with, but I just encountered the problem in a file with ~100 LOC in it. This is the first time I believe I've run into the problem, but when it happens, my error parser fails and it becomes a pain to track down the raw output to find the actual problem.\r\n\r\nTested against r1171, committed 6/10 08:06. The problem is present going back to at least r1000, so this isn't a new issue.\n\n[Context/Logs]:\n- It's fixed and will come with the next release.\n- This issue was closed by revision r1215.\n- This issue was closed by revision r1218.\n- This issue was closed by revision r1220."}
{"project_id": "Closure", "bug_id": "131", "source_type": "google", "llm_input_text": "[Title]: Column-indicating caret is sometimes not in error output\n[Symptom]:\nFor some reason, the caret doesn't always show up in the output when there are errors.\r\n\r\nWhen test.js looks like this:\r\n\r\n\r\n&gt;alert(1;\r\n\r\n\r\n, the output is this:\r\n\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\ntest.js:1: ERROR - Parse error. missing ) after argument list\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\nHowever, when test.js looks like this (notice the line break after the semicolon):\r\n\r\n\r\n&gt;alert(1;\r\n&gt;\r\n\r\n\r\n, the output is this:\r\n\r\n\r\n&gt;java -jar compiler.jar --js test.js\r\ntest.js:1: ERROR - Parse error. missing ) after argument list\r\nalert(1;\r\n        ^\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\nThat's the simplest reproduction of the problem that I could come up with, but I just encountered the problem in a file with ~100 LOC in it. This is the first time I believe I've run into the problem, but when it happens, my error parser fails and it becomes a pain to track down the raw output to find the actual problem.\r\n\r\nTested against r1171, committed 6/10 08:06. The problem is present going back to at least r1000, so this isn't a new issue.\n\n[Context/Logs]:\n- It's fixed and will come with the next release.\n- This issue was closed by revision r1215.\n- This issue was closed by revision r1218.\n- This issue was closed by revision r1220."}
{"project_id": "Closure", "bug_id": "132", "source_type": "google", "llm_input_text": "[Title]: Closure removes needed code.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try the following code, in Simple mode\r\nMath.blah = function(test) { test.a = 5; };\r\nvar test = new Object();\r\nMath.blah(test); \r\n2. The output is\r\nMath.blah=function(a){a.a=5};var test={};\r\n\r\n\r\n What is the expected output? What do you see instead? \nNote that Math.blah(test) was removed. It should not be. It issues a warning: JSC_USELESS_CODE: Suspicious code. This code lacks side-effects. Is there a bug? at line 4 character 9\r\n\r\n What version of the product are you using? On what operating system? \nTested on Google hosted Closure service.\r\n\r\n Please provide any additional information below. \nClosure seems to be protective about Math in particular, and doesn't like people messing around with her? So, when I try the following code:-\r\nvar n = {};\r\nn.blah = function(test) { test.a = 5; };\r\nvar test = new Object();\r\nn.blah(test);\r\n\r\nIt works. When I replace n by Math, then again, Closure kicks out blah. I need that poor fellow. Please talk some sense into it.\n\n[Context/Logs]:\n- There is some code in NodeUtil's side-effect detection code that assumes all Math.xxx lack side-effects.  An easy work around in simple mode is the assign the result of the function (even if it undefined) to a global variable.  In advanced mode, goog.reflect.sinkValue can be used.    It would make more sense however to white-list known Math methods, rather than assume they are all side-effect free (or simply don't assume anything and rely on the externs ).\n- Fine. Also it seems that if I wrap the given code in a function and assign the output of Math.seedrandom() to some local variable then that line is removed, but warning is given. This seems to happen for Math only.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1226.\n- This issue was closed by revision r1234."}
{"project_id": "Closure", "bug_id": "133", "source_type": "google", "llm_input_text": "[Title]: Closure removes needed code.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try the following code, in Simple mode\r\nMath.blah = function(test) { test.a = 5; };\r\nvar test = new Object();\r\nMath.blah(test); \r\n2. The output is\r\nMath.blah=function(a){a.a=5};var test={};\r\n\r\n\r\n What is the expected output? What do you see instead? \nNote that Math.blah(test) was removed. It should not be. It issues a warning: JSC_USELESS_CODE: Suspicious code. This code lacks side-effects. Is there a bug? at line 4 character 9\r\n\r\n What version of the product are you using? On what operating system? \nTested on Google hosted Closure service.\r\n\r\n Please provide any additional information below. \nClosure seems to be protective about Math in particular, and doesn't like people messing around with her? So, when I try the following code:-\r\nvar n = {};\r\nn.blah = function(test) { test.a = 5; };\r\nvar test = new Object();\r\nn.blah(test);\r\n\r\nIt works. When I replace n by Math, then again, Closure kicks out blah. I need that poor fellow. Please talk some sense into it.\n\n[Context/Logs]:\n- There is some code in NodeUtil's side-effect detection code that assumes all Math.xxx lack side-effects.  An easy work around in simple mode is the assign the result of the function (even if it undefined) to a global variable.  In advanced mode, goog.reflect.sinkValue can be used.    It would make more sense however to white-list known Math methods, rather than assume they are all side-effect free (or simply don't assume anything and rely on the externs ).\n- Fine. Also it seems that if I wrap the given code in a function and assign the output of Math.seedrandom() to some local variable then that line is removed, but warning is given. This seems to happen for Math only.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1226.\n- This issue was closed by revision r1234."}
{"project_id": "Closure", "bug_id": "134", "source_type": "google", "llm_input_text": "[Title]: Compiler keeps code for all locales under advanced optimizations\n[Symptom]:\nWhat steps will reproduce the problem? \n1. write some js code that requires goog.i18n.DateTimeSymbols (I am not so sure about the minimal code, I discovered this bug compiling a big project)\r\n2. compile it with advanced optimizations option\r\n3. check out the compiled code\r\n\r\n What is the expected output? What do you see instead? \nThere shouldn't be code for other locales. But code for all locales are there, generated file size is 100+K bigger than it should be. Maybe because I don't use them, they don't have variable names. generated code example are as follows:\r\n&quot;\\u062c\\u0646\\u0648\\u0631\\u06cc,\\u0641\\u0631\\u0648\\u0631\\u06cc,\\u0645\\u0627\\u0631 \\u0686,\\u0627\\u067e\\u0631\\u064a\\u0644,\\u0645\\u0626,\\u062c\\u0648\\u0646,\\u062c\\u0648\\u0644\\u0627\\u0626,\\u0627\\u06af\\u0633\\u062a,\\u0633\\u062a\\u0645\\u0628\\u0631,\\u0627\\u06a9\\u062a\\u0648\\u0628\\u0631,\\u0646\\u0648\\u0645\\u0628\\u0631,\\u062f\\u0633\\u0645\\u0628\\u0631&quot;.split(&quot;,&quot;);&quot;\\u062c\\u0646\\u0648\\u0631\\u06cc,\\u0641\\u0631\\u0648\\u0631\\u06cc,\\u0645\\u0627\\u0631 \\u0686,\\u0627\\u067e\\u0631\\u064a\\u0644,\\u0645\\u0626,\\u062c\\u0648\\u0646,\\u062c\\u0648\\u0644\\u0627\\u0626,\\u0627\\u06af\\u0633\\u062a,\\u0633\\u062a\\u0645\\u0628\\u0631,\\u0627\\u06a9\\u062a\\u0648\\u0628\\u0631,\\u0646\\u0648\\u0645\\u0628\\u0631,\\u062f\\u0633\\u0645\\u0628\\u0631&quot;.split(&quot;,&quot;);\r\n\r\na lot of them: &quot;long string&quot;.split(&quot;.&quot;); which do nothing and makes no sense.\r\n\r\n What version of the product are you using? On what operating system? \nWith experiments, i can confirm this became a problem after r1183 is committed. My project compiles to 470K with r1182,  573K with r1183.\n\n[Context/Logs]:\n- Strange. It might be related to a recent change in how the compiler handles split()\n- @alan: shouldn't that code live in one of the \"late\" compiler passes? I don't think it should run in every optimize loop.\n- Oops. One of the flag was wrong. I just checked in a fix.\n- This issue was closed by revision r1231."}
{"project_id": "Closure", "bug_id": "135", "source_type": "google", "llm_input_text": "[Title]: Closure removes needed code.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try the following code, in Simple mode\r\nMath.blah = function(test) { test.a = 5; };\r\nvar test = new Object();\r\nMath.blah(test); \r\n2. The output is\r\nMath.blah=function(a){a.a=5};var test={};\r\n\r\n\r\n What is the expected output? What do you see instead? \nNote that Math.blah(test) was removed. It should not be. It issues a warning: JSC_USELESS_CODE: Suspicious code. This code lacks side-effects. Is there a bug? at line 4 character 9\r\n\r\n What version of the product are you using? On what operating system? \nTested on Google hosted Closure service.\r\n\r\n Please provide any additional information below. \nClosure seems to be protective about Math in particular, and doesn't like people messing around with her? So, when I try the following code:-\r\nvar n = {};\r\nn.blah = function(test) { test.a = 5; };\r\nvar test = new Object();\r\nn.blah(test);\r\n\r\nIt works. When I replace n by Math, then again, Closure kicks out blah. I need that poor fellow. Please talk some sense into it.\n\n[Context/Logs]:\n- There is some code in NodeUtil's side-effect detection code that assumes all Math.xxx lack side-effects.  An easy work around in simple mode is the assign the result of the function (even if it undefined) to a global variable.  In advanced mode, goog.reflect.sinkValue can be used.    It would make more sense however to white-list known Math methods, rather than assume they are all side-effect free (or simply don't assume anything and rely on the externs ).\n- Fine. Also it seems that if I wrap the given code in a function and assign the output of Math.seedrandom() to some local variable then that line is removed, but warning is given. This seems to happen for Math only.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1226.\n- This issue was closed by revision r1234."}
{"project_id": "Closure", "bug_id": "136", "source_type": "google", "llm_input_text": "[Title]: void function () {}(); wrongly identified as having no side effects\n[Symptom]:\nThis code results in the execution of the function and should not be identified as having no side effects.\n\n[Context/Logs]:\n- You mean (function() {})() ?\r\n\r\nWhat sort of side effect does that have?\n- I'm sorry, I had typed the expression into the summary like this for brevity, even if the function has a body it is still stripped, eg:\r\n\r\nvoid function () {\r\n   my_global = true;\r\n}();\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1248.\n- Issue 515 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "137", "source_type": "google", "llm_input_text": "[Title]: Window.prototype.openDatabase, wrong number of arguments\n[Symptom]:\nWhat steps will reproduce the problem? \nThe compiler issues a warning when I pass 5 arguments to the \r\nWindow.prototype.openDatabase method.\r\n\r\n What is the expected output? What do you see instead? \nNo warning should be issued. The function call is correct.\r\nAccording to the W3C spec - [URL] \r\n- and WebKit implementations, the correct number of arguments is 4 of \r\n5 with the last (the creation callback function) being optional. \r\n\r\n What version of the product are you using? On what operating system? \nCygwin on Windows 7 x64, compiler-20110615 (currently latest)\r\n\r\n\r\n Please provide any additional information below. \n\r\nIn the html5.js extern file is the last argument incorrectly omitted: \r\n/** \r\n * @param {string} name \r\n * @param {string} version \r\n * @param {string} description \r\n * @param {number} size \r\n * @return {Database} \r\n */ \r\nWindow.prototype.openDatabase = function(name, version, description, \r\nsize) {};\n\n[Context/Logs]:\n- This issue was closed by revision r1255."}
{"project_id": "Closure", "bug_id": "138", "source_type": "google", "llm_input_text": "[Title]: Property lowerBound never defined on IDBKeyRange\n[Symptom]:\nWhat steps will reproduce the problem? \nUse IDBKeyRange.lowerBound (or upperBound, applies to both methods)\r\n\r\n What is the expected output? What do you see instead? \nError thrown, according to the W3C IndexedDB spec, lowerBound is the correct method name.\r\n\r\n What version of the product are you using? On what operating system? \nCygwin on Windows 7 x64, compiler-20110615 (currently latest)\r\n\r\n Please provide any additional information below. \nWrong method names (leftBound, rightBound) instead of the correct ones (lowerBound, upperBound) in the w3c_indexeddb.js extern file.\n\n[Context/Logs]:\n- This issue was closed by revision r1256."}
{"project_id": "Closure", "bug_id": "139", "source_type": "google", "llm_input_text": "[Title]: Cannot exclude globalThis checks through command line\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run command line utility\r\n2. Supply flags --warning_level VERBOSE --jscomp_off globalThis --jscomp_off nonStandardJsDocs\r\n\r\n What is the expected output? What do you see instead? \nI expect that globalThis and nonStandardJsDocs warnings will be ignored. Only nonStandardJsDocs warnings are ignored.\r\n\r\n What version of the product are you using? On what operating system? \nVersion 1180\r\nSun OS 5.10\r\n\r\n Please provide any additional information below. \n--jscomp_error also doesn't work with globalThis (works with nonStandardJSDocs).\n\n[Context/Logs]:\n- This issue was closed by revision r1291."}
{"project_id": "Closure", "bug_id": "140", "source_type": "google", "llm_input_text": "[Title]: peephole constants folding pass is trying to fold [][11] as if it were a property lookup instead of a property assignment\n[Symptom]:\nWhat steps will reproduce the problem? \n1.Try on line CC with Advance\r\n2.On the following 2-line code\r\n 3. \n\r\n What is the expected output? What do you see instead? \n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\n\r\n\r\nvar Mdt=[];\r\nMdt[11] = ['22','19','19','16','21','18','16','20','17','17','21','17'];\r\n\r\nThe error:\r\nJSC_INDEX_OUT_OF_BOUNDS_ERROR: Array index out of bounds: NUMBER 11.0\r\n2 [sourcename: Input_0] : number at line 2 character 4\r\n\r\n\r\n What version of the product are you using? On what operating system? \nThe online version on 201.07.27\n\n[Context/Logs]:\n- This issue was closed by revision r1315."}
{"project_id": "Closure", "bug_id": "141", "source_type": "google", "llm_input_text": "[Title]: Online CC bug: report java error.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. open [URL]\r\n2. input js code:\r\n  function keys(obj) {\r\n    var a = [], i = 0;\r\n    for (a[i++] in obj)\r\n      ;\r\n    return a;\r\n  }\r\n3. press [compile] button.\r\n\r\n What is the expected output? What do you see instead? \nExcept OK. See java error.\r\n\r\n What version of the product are you using? On what operating system? \nOnline CC version.\n\n[Context/Logs]:\n- I never knew you can put an expression like this on the left hand side of the for-in loop.\n- FYI, I checked in the fix. It'll not be a problem in the next release.\n- This issue was closed by revision r1343."}
{"project_id": "Closure", "bug_id": "142", "source_type": "google", "llm_input_text": "[Title]: stdin handling broken?\n[Symptom]:\nWith the latest Closure compiler, when I run something like:\r\n\r\ncat test.js | java -jar compiler.jar\r\n\r\nI get the following error:\r\n\r\nBad --js flag. Manifest files cannot be generated when the input is from stdin.\r\n\r\nThis message didn't appear with older Closure releases. Is any special flag required for stdin handling or is this a bug in Closure?\n\n[Context/Logs]:\n- This issue was closed by revision r1346."}
{"project_id": "Closure", "bug_id": "143", "source_type": "google", "llm_input_text": "[Title]: compiler crashes when  goog.provide used with non string\n[Symptom]:\nWhat steps will reproduce the problem? \n1. insert  goog.provide(some.function);\r\n2. compile.\r\n 3. \n\r\n What is the expected output? What do you see instead? \n\r\nThis should give an error diagnostic. What it gives is:\r\n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease email js-compiler@google.com with this stack trace.\r\nGETPROP 17 [originalname: Spike] [source_file: file.js] is not a string node\r\n Node(CALL): file.js:17:12\r\ngoog.provide(mine.Spike);\r\n...\r\n[stack traces...]\r\n\r\nI think this is the current build as of the day of this report.\n\n[Context/Logs]:\n- This issue was closed by revision r1357."}
{"project_id": "Closure", "bug_id": "144", "source_type": "google", "llm_input_text": "[Title]: Closure Compiler Advanced Mode does not recognize toJSON (like it recognizes toString)\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the following simple javascript program (with advanced optimizations):\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n/**\r\n@constructor\r\n@param {number} x\r\n@param {number} y\r\n*/\r\nfunction foo(x, y) { \r\n  this.x = x;\r\n  this.y = y;\r\n  this.lastSum = x + y;\r\n};\r\n\r\n/**\r\n@type {number}\r\n*/\r\nfoo.prototype.x;\r\n\r\n/**\r\n@type {number}\r\n*/\r\nfoo.prototype.y;\r\n\r\n/**\r\n@type {number}\r\n*/\r\nfoo.prototype.lastSum;\r\n\r\n/**\r\n@override\r\n@return {string}\r\n*/\r\nfoo.prototype.toString = function() {\r\n  return '(' + this.x + ',' + this.y + ')'; \r\n};\r\n\r\n/**\r\n@return {Object}\r\n*/\r\nfoo.prototype.toJSON = function() {\r\n  return {\r\n    x: this.x,\r\n    y: this.y\r\n  };\r\n};\r\n\r\n/**\r\n@return {number}\r\n*/\r\nfoo.prototype.recalc = function() {\r\n  return (this.lastSum = this.x + this.y);\r\n};\r\n\r\nvar temp = new foo(10, 12);\r\nalert(temp.toString() + '\\n\\n' + JSON.stringify(temp));\r\ntemp.x = 15;\r\nalert(temp.toString() + '\\n\\n' + JSON.stringify(temp));\r\ntemp.recalc();\r\nalert(temp.toString() + '\\n\\n' + JSON.stringify(temp));\r\n\r\n// *** EOF \r\n\r\n What is the expected output? What do you see instead? \n\r\nThe output produced (with pretty print) is:\r\nfunction a(c, d) {\r\n  this.x = c;\r\n  this.y = d;\r\n  this.a = c + d\r\n}\r\na.prototype.toString = function() {\r\n  return&quot;(&quot; + this.x + &quot;,&quot; + this.y + &quot;)&quot;\r\n};\r\na.prototype.recalc = function() {\r\n  return this.a = this.x + this.y\r\n};\r\nvar b = new a(10, 12);\r\nalert(b.toString() + &quot;\\n\\n&quot; + JSON.stringify(b));\r\nb.x = 15;\r\nalert(b.toString() + &quot;\\n\\n&quot; + JSON.stringify(b));\r\nb.recalc();\r\nalert(b.toString() + &quot;\\n\\n&quot; + JSON.stringify(b));\r\n\r\nThe compiler removes the function from the scope (as it should since it doesn't recognize that it is an side effect override similar to toString).  The compiler should recognize toJSON like it does with toString and never change the name as it breaks JSON.st\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r1359."}
{"project_id": "Closure", "bug_id": "145", "source_type": "google", "llm_input_text": "[Title]: Fix canvas externs definition\n[Symptom]:\nThe annotation of CanvasRenderingContext2D.prototype.drawImage in externs/html5.js is incomplete.\r\n\r\nParameter &quot;image&quot; also supports HTMLVideoElement.\r\n\r\nPatch is attached.\n\n[Context/Logs]:\n- This issue was closed by revision r1365."}
{"project_id": "Closure", "bug_id": "146", "source_type": "google", "llm_input_text": "[Title]: Last warning or error in output is truncated\n[Symptom]:\nThe last error or warning statement written to the output appears to be getting truncated. It's causing a problem for my error / warning parser.\r\n\r\nTo reproduce, create a file called test.js and add the following content to it:\r\n\r\n---------------\r\nalert(foo);\r\nalert(bar);\r\n---------------\r\n\r\nWhen compiled, the output looks like this:\r\n\r\n---------------\r\n&gt;java -jar compiler.jar --warning_level VERBOSE --js test.js\r\ntest.js:1: ERROR - variable foo is undefined\r\nalert(foo);\r\n      ^\r\n\r\ntest.js:2: ERROR - variable bar is undefined\r\n\r\n2 error(s), 0 warning(s)\r\n---------------\r\n\r\nIf you look at the last error includes neither the line the error occurred on nor the column-indicating caret. This happens with warnings as well.\r\n\r\nTested against r1257 committed 2011-07-11 11:11:32 -0700.\n\n[Context/Logs]:\n- I tried and got the correct warning information:\r\n\r\ntest.js:1: ERROR - variable foo is undefined\r\nalert(foo);\r\n      ^\r\n\r\ntest.js:2: ERROR - variable bar is undefined\r\nalert(bar);\r\n      ^\r\n\r\n2 error(s), 0 warning(s)\r\n\r\nCould you please try again and let me know if the error still occurs.\n- This is still happening for me as of r1261 with a stock build (no patches) on Windows 7 SP1.\r\n\r\n...\r\n\r\n...\r\n\r\n...\r\n\r\n[created test.js file, as above]\r\n\r\ntest.js:1: ERROR - variable foo is undefined\r\nalert(foo);\r\n      ^\r\n\r\ntest.js:2: ERROR - variable bar is undefined\r\n\r\n2 error(s), 0 warning(s)\r\n\r\njava version \"1.6.0_24\"\r\nJava(TM) SE Runtime Environment (build 1.6.0_24-b07)\r\nJava HotSpot(TM) 64-Bit Server VM (build 19.1-b02, mixed mode)\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1373.\n- Issue 414 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "147", "source_type": "google", "llm_input_text": "[Title]: OutOfMemoryError on ammo.js\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run closure compiler with advanced optimizations on the attached file.\r\n\r\n What is the expected output? What do you see instead? \n\r\nIt hits an exception:\r\n\r\njava.lang.RuntimeException: java.lang.OutOfMemoryError: GC overhead limit exceeded\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:629)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:574)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:556)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:515)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:662)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:295)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:758)\r\nCaused by: java.lang.OutOfMemoryError: GC overhead limit exceeded\r\n\tat com.google.javascript.jscomp.SimpleDefinitionFinder$UseSiteGatheringCallback.visit(SimpleDefinitionFinder.java:286)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:480)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:473)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:473)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:473)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:473)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:518)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:465)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:473)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:473)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:259)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:437)\n...[Description Truncated]...\n\n[Context/Logs]:\n- it's worth pointing out that even if your machine has 3GB of ram, the JVM has a much lower default memory limit. can you try upping your memory limit to something like\r\n\r\njava -Xmx1024m -jar ...\r\n?\n- Thanks, I'm not a Java hacker and didn't know that...\r\n\r\nWith that flag, it doesn't hit out of memory, but after leaving it running for several hours it still hasn't completed. Perhaps it's in an infinite loop? Or just very slow for some reason?\n- See Issues 435 and 446.\n- This issue was closed by revision r1374."}
{"project_id": "Closure", "bug_id": "148", "source_type": "google", "llm_input_text": "[Title]: Exception when emitting code containing getters\n[Symptom]:\nConsider the following source code: [URL]\r\n\r\nFollowing exception fires unless I remove the &quot;get name()&quot; getter from the code.\r\n\r\njava.lang.RuntimeException: java.lang.IllegalStateException: Expected function but was call Reference node CALL 128 [free_call: 1] [source_file: Settings.js]\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:629)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:574)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:556)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:515)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:662)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:295)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:758)\r\nCaused by: java.lang.IllegalStateException: Expected function but was call Reference node CALL 128 [free_call: 1] [source_file: Settings.js]\r\n\tat com.google.javascript.jscomp.AstValidator$1.handleViolation(AstValidator.java:51)\r\n\tat com.google.javascript.jscomp.AstValidator.violation(AstValidator.java:763)\r\n\tat com.google.javascript.jscomp.AstValidator.validateNodeType(AstValidator.java:768)\r\n\tat com.google.javascript.jscomp.AstValidator.validateFunctionExpression(AstValidator.java:359)\r\n\tat com.google.javascript.jscomp.AstValidator.validateObjectLitGetKey(AstValidator.java:696)\r\n\tat com.google.javascript.jscomp.AstValidator.validateObjectLitKey(AstValidator.java:677)\r\n\tat com.google.javascript.jscomp.AstValidator.validateObjectLit(AstValidator.java:670)\r\n\tat com.google.javascript.jscomp.AstValidator.validateExpression(AstValidator.java:252)\r\n\tat com.google.javascript.jscomp.AstValidator.validateAssignmentExpression(AstValidator.java:603)\r\n\tat com.google.javascript.jscomp.AstValidator.validateExpression(AstValidator.java:219)\r\n\tat com.google.javascript.jscomp.AstValidator.validateExprStmt(AstValidator.\n...[Description Truncated]...\n\n[Context/Logs]:\n- With advanced optimizations.\n- This issue was closed by revision r1383."}
{"project_id": "Closure", "bug_id": "149", "source_type": "google", "llm_input_text": "[Title]: Extern definition for Number#toExponential is incomplete\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Not relevant\r\n 2. \n 3. \n\r\n What is the expected output? What do you see instead? \n What version of the product are you using? On what operating system? \n Please provide any additional information below. \n\r\nThe extern definition for Number.prototype.toExponential() is incomplete.  It should be annotated to reflect the optional parameter the method can accept to set the number of digits following the decimal (like toFixed).\n\n[Context/Logs]:\n- Ahhh!  I found that I could add a patch, so I made the change (Issue #543).\n- This issue was closed by revision r1393."}
{"project_id": "Closure", "bug_id": "150", "source_type": "google", "llm_input_text": "[Title]: Prototype methods can't be used from the constructor in case prototype is explicitly defined.\n[Symptom]:\nConsider the following source code:\r\n[URL]\r\n\r\nWhen I mark WebInspector.DOMAgent as a @constructor, I get the following warning.\r\n\r\nSource/WebCore/inspector/front-end/DOMAgent.js:48: WARNING - Property _setAttributesPayload never defined on WebInspector.DOMNode\r\n        this._setAttributesPayload(payload.attributes);\r\n\r\nIt sounds like the problem is in the way we define prototypes in line 83-ish. That's the way WebKit style tells us to do.\n\n[Context/Logs]:\n- I tried compiling DOMAgent.js after adding the @constructor tag, and did not see this warning.\r\n\r\nwhat version of the compiler are you using?\r\n\r\nhere is the command i ran with\r\njava -jar compiler.jar --js=DOMAgent.js --jscomp_warning=checkTypes > /dev/null\n- It seems to depend on the other files content. I now have different set of files and I can no longer repro it. I went back to the original set of files, but could not repro either. Since yesterday, I was actively changing the code to make it compiler-friendly, so I must have fixed something from its perspective. I'll reopen it if I have a repro case.\r\n\r\nVersion:\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1346\r\nBuilt on: 2011/08/11 15:02\n- ... [Middle Discussions Snipped for Brevity] ...\n- We are getting the warnings due to the __proto__ assignment as above again. We decided to move to the prototype = {\r\n    __proto__: \r\n}\r\nsyntax, but I wonder if we are not alone.\n- This issue was closed by revision r2232."}
{"project_id": "Closure", "bug_id": "151", "source_type": "google", "llm_input_text": "[Title]: Type aliases cannot be used in type annotations before their definitions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following with full warnings:\r\n\r\ngoog.provide('foo.Foo');\r\ngoog.provide('foo.Foo.Bar');\r\n\r\ngoog.scope(function() {\r\n  /**\r\n   * @param {Foo.Bar} bar\r\n   * @constructor\r\n   */\r\n  foo.Foo = function(bar) {\r\n    this.bar = bar;\r\n  };\r\n  var Foo = foo.Foo;\r\n\r\n  /** @type {Foo.Bar} */\r\n  Foo.prototype.bar = null;\r\n\r\n  /** @constructor */\r\n  Foo.Bar = function() {};\r\n});\r\n\r\n\r\n What is the expected output? What do you see instead? \nThis should work, but instead I get an error:\r\n\r\nERROR - Bad type annotation. Unknown type Foo.Bar\r\n   * @param {Foo.Bar} bar\r\n                    ^\r\n\r\nThis can be worked around by writing explicitly foo.Foo.Bar, but this leads to strange inconsistencies in the code before vs. after the alias definition.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nr1346 in Linux\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This issue was closed by revision r1412."}
{"project_id": "Closure", "bug_id": "152", "source_type": "google", "llm_input_text": "[Title]: String.prototype.match with checkTypes\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Download the attached test.js\r\n2. java -jar compiler.jar --jscomp_error checkTypes --js test.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected to see:\r\n\r\n  test.js:7: ERROR - inconsistent return type\r\n  found   : string\r\n  required: number\r\n      return m[0];\r\n             ^\r\n  \r\n  1 error(s), 0 warning(s), 100.0% typed\r\n\r\nInstead, I saw no errors at all\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm on OS X 10.6.8 using the following version:\r\n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1346\r\nBuilt on: 2011/08/11 15:02\r\n\r\n\r\n Please provide any additional information below. \n\r\nThe attached patch might fix the problem, although I haven't tested it.  My reading of ECMA-262 5.1 section   suggests it's correct.\n\n[Context/Logs]:\n- This issue was closed by revision r1413.\n- This issue was closed by revision r1415.\n- This issue was closed by revision r1421."}
{"project_id": "Closure", "bug_id": "153", "source_type": "google", "llm_input_text": "[Title]: String.prototype.match with checkTypes\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Download the attached test.js\r\n2. java -jar compiler.jar --jscomp_error checkTypes --js test.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected to see:\r\n\r\n  test.js:7: ERROR - inconsistent return type\r\n  found   : string\r\n  required: number\r\n      return m[0];\r\n             ^\r\n  \r\n  1 error(s), 0 warning(s), 100.0% typed\r\n\r\nInstead, I saw no errors at all\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm on OS X 10.6.8 using the following version:\r\n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1346\r\nBuilt on: 2011/08/11 15:02\r\n\r\n\r\n Please provide any additional information below. \n\r\nThe attached patch might fix the problem, although I haven't tested it.  My reading of ECMA-262 5.1 section   suggests it's correct.\n\n[Context/Logs]:\n- This issue was closed by revision r1413.\n- This issue was closed by revision r1415.\n- This issue was closed by revision r1421."}
{"project_id": "Closure", "bug_id": "154", "source_type": "google", "llm_input_text": "[Title]: String.prototype.match with checkTypes\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Download the attached test.js\r\n2. java -jar compiler.jar --jscomp_error checkTypes --js test.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected to see:\r\n\r\n  test.js:7: ERROR - inconsistent return type\r\n  found   : string\r\n  required: number\r\n      return m[0];\r\n             ^\r\n  \r\n  1 error(s), 0 warning(s), 100.0% typed\r\n\r\nInstead, I saw no errors at all\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm on OS X 10.6.8 using the following version:\r\n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1346\r\nBuilt on: 2011/08/11 15:02\r\n\r\n\r\n Please provide any additional information below. \n\r\nThe attached patch might fix the problem, although I haven't tested it.  My reading of ECMA-262 5.1 section   suggests it's correct.\n\n[Context/Logs]:\n- This issue was closed by revision r1413.\n- This issue was closed by revision r1415.\n- This issue was closed by revision r1421."}
{"project_id": "Closure", "bug_id": "155", "source_type": "google", "llm_input_text": "[Title]: compiler-20110811 crashes with index(1) must be less than size(1)\n[Symptom]:\nWhat steps will reproduce the problem? \nRun compiler on [URL]\r\n\r\nYou can copy this into the Appspot closure compiler to see the error:\r\n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @code_url [URL]\r\n// ==/ClosureCompiler==\r\n\r\nI've attached a dump of the error from appspot.\r\n\r\n(This is the popular SoundManager library for HTML5 audio)\r\n\r\n What is the expected output? What do you see instead? \nGot crash...\r\n\r\n What version of the product are you using? On what operating system? \nLatest (compiler-20110811). We were previously using the June build, and had no problems\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The relevant portion of the start trace: \r\nat com.google.common.base.Preconditions.checkElementIndex(Preconditions.java:423)\r\nat com.google.common.base.Preconditions.checkElementIndex(Preconditions.java:402)\r\nat com.google.common.collect.Lists$ReverseList.reverseIndex(Lists.java:873)\r\nat com.google.common.collect.Lists$ReverseList.get(Lists.java:904)\r\nat com.google.javascript.jscomp.InlineObjectLiterals$InliningBehavior.replaceAssignmentExpression(InlineObjectLiterals.java:349)\r\nat com.google.javascript.jscomp.InlineObjectLiterals$InliningBehavior.splitObject(InlineObjectLiterals.java:412)\r\nat com.google.javascript.jscomp.InlineObjectLiterals$InliningBehavior.afterExitScope(InlineObjectLiterals.java:104)\r\nat com.google.javascript.jscomp.ReferenceCollectingCallback.exitScope(ReferenceCollectingCallback.java:187)\n- I got a fix for it.\n- Issue 552 has been merged into this issue.\n- This issue was closed by revision r1433."}
{"project_id": "Closure", "bug_id": "156", "source_type": "google", "llm_input_text": "[Title]: chrome_extensions.js externs file is gone\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Visit [URL]\r\n 2. \n 3. \n\r\nWhat is the expected output? \r\nThe externs for Google Chrome extensions (chrome.tabs.* etc.)\r\n\r\nWhat do you see instead?\r\n404 Not Found\r\n\r\n What version of the product are you using? On what operating system? \nN/A\r\n\r\n Please provide any additional information below. \nThis URL was working very recently, and now it is gone. I rely on it for use with the Closure Compiler web app.\n\n[Context/Logs]:\n- for future reference, you can also get old versions of files by checking them out from svn.\r\n[URL]\n- This issue was closed by revision r1464."}
{"project_id": "Closure", "bug_id": "157", "source_type": "google", "llm_input_text": "[Title]: Converts string properties into numbers in literal object definitions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Minimize the following script:\r\n\r\nvar lit = {&quot;0102&quot;:&quot;Zero One Zero Two&quot;};\r\nalert(lit[&quot;0102&quot;]);\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected:\r\nvar lit={&quot;0102&quot;:&quot;Zero One Zero Two&quot;};alert(lit[&quot;0102&quot;]);\r\n\r\nActual:\r\nvar lit={102:&quot;Zero One Zero Two&quot;};alert(lit[&quot;0102&quot;]);\r\n\r\n What version of the product are you using? On what operating system? \n\r\nr1459\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- I should add that this happens in WHITESPACE_ONLY mode.\n- This issue was closed by revision r1491.\n- Issue 595 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "158", "source_type": "google", "llm_input_text": "[Title]: Ant: support   replacements\n[Symptom]:\nMy patch for issue 533 has been working fine for us up until now.  Slight background...  I was using @define with a DEBUG variable that could be used to optimize away debug code (like console logging, test features, etc) when the code is compiled.\r\n\r\nFast-forward to now, and my colleagues would not like a way to have both a &quot;shipped&quot; version and a debug version of the same compiled source.  The debug version is also useful for things like pretty-print, so we can test the compiler's reductions, but still be able to find where an error is occurring, because it's not all on one line.\r\n\r\nWell, the fix in issue 533 uses project properties to do the @define replacements, and Ant properties are generally immutable, so it became difficult to perform the same compilation twice, with two different values for the @define.  Note, there is still a workaround even for the above case, by overriding the &quot;replacePropertiesPrefix&quot; attribute for each invocation.\r\n\r\nAll that said, it makes sense to be able to set @define values individually as well, using a new &lt;define /&gt; nested element.  The element is implemented using the org.apache.tools.ant.types.Parameter class, so it supports &quot;name&quot; and &quot;value&quot; attributes.  The &quot;type&quot; attribute is ignored currently, since we have to coerce the value to a proper closure type anyway.\r\n\r\nExample usage:\r\n\r\n  &lt;target name=&quot;app.js&quot; description=&quot;Compile JS files&quot;&gt;\r\n    &lt;compile-js destfile=&quot;${APP_CORE_JS_MIN}&quot;&gt;\r\n      &lt;path refid=&quot;app.js.files&quot; /&gt;\r\n      &lt;!-- Works exactly like:\r\n           $ java -jar compiler.jar -D DEBUG=false ...\r\n        --&gt;\r\n      &lt;define name=&quot;DEBUG&quot; value=&quot;false&quot; /&gt;\r\n    &lt;/compile-js&gt;\r\n  &lt;/target&gt;\r\n\r\n  &lt;target name=&quot;app.debug.js&quot; description=&quot;Compile Debug version of JS files&quot;&gt;\r\n    &lt;compile-js destfile=&quot;${APP_CORE_JS_DEBUG}&quot; prettyPr\n...[Description Truncated]...\n\n[Context/Logs]:\n- thanks for the patch!\n- Bolin, do you mind reviewing this? I put the review up here\r\n[URL]\n- This issue was closed by revision r1500."}
{"project_id": "Closure", "bug_id": "159", "source_type": "google", "llm_input_text": "[Title]: Make JSModuleGraph.manageDependencies public\n[Symptom]:\nCould we make JSModuleGraph.manageDependencies public?  I created a servlet to dynamically compile Closure code.  It's a bit hacky at the moment though because I'm calling CommandLineRunner in order to get the --manage_closure_dependencies functionality.  If JSModuleGraph.manageDependencies were public then I imagine that I could just call the compiler directly instead, which would be much cleaner.\n\n[Context/Logs]:\n- This issue was closed by revision r1518."}
{"project_id": "Closure", "bug_id": "160", "source_type": "google", "llm_input_text": "[Title]: -0.0 becomes 0 even in whitespace mode\n[Symptom]:\nAffects dart: [URL]\n\n[Context/Logs]:\n- This issue was closed by revision r1519.\n- This issue was closed by revision r1754."}
{"project_id": "Closure", "bug_id": "161", "source_type": "google", "llm_input_text": "[Title]: Optimisation: convert array.join(\",\") to array.join()\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nCompile this code:\r\n\r\nvar variable = confirm(&quot;value from user&quot;);\r\nvar array = [ &quot;constant&quot;, variable ];\r\nalert( array.join(&quot;,&quot;) );\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\n$ java -jar /usr/local/slando/lib/Google/compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --js foo.js\r\nvar a=[&quot;constant&quot;,confirm(&quot;value from user&quot;)];alert(a.join(&quot;,&quot;));\r\n\r\nWe could save three bytes here by producing:\r\n\r\nvar a=[&quot;constant&quot;,confirm(&quot;value from user&quot;)];alert(a.join());\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\n$ java -jar /usr/local/slando/lib/Google/compiler.jar --version\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1180\r\nBuilt on: 2011/06/15 21:40\r\n\r\nRunning on Linux 2.6.18\r\n\r\n\r\n Please provide any additional information below. \n\r\nHere's a common pattern this would be useful in:\r\n\r\nvar my_jquery_selectors = [];\r\n// ... append to my_jquery_selectors from various parts of the codebase ...\r\n$(my_jquery_selectors.join(&quot;,&quot;)).html(&quot;the code is more readable with the comma left in place&quot;);\n\n[Context/Logs]:\n- Simple enough. I was working on some join() and split() optimization for jquery but got side tracked. I'll keep that in mind.\n- We can handle the literal case '[a,b].join(\",\")' but the general case 'a.join(\",\")' requires type information.  We don't currently use type inference to do this kind of optimization.\n- This issue was closed by revision r1536."}
{"project_id": "Closure", "bug_id": "162", "source_type": "google", "llm_input_text": "[Title]: Incorrect output if a function is assigned to a variable, and the function contains a variable with the same name\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n 1. Enter the following into the online compiler\r\n\r\n  var foo = function bar(){\r\n    var bar;\r\n    alert(bar)\r\n  };\r\n\r\n 2.  Compile using simple optimization\r\n\r\n What is the expected output? What do you see instead? \n\r\n I'd expect to see\r\n\r\n  var foo = function() {\r\n    alert(void 0)\r\n  };\r\n\r\n Instead I see\r\n\r\n  var foo = function bar() {\r\n    alert(bar)\r\n  };\r\n\r\n What version of the product are you using? On what operating system? \n\r\n Using [URL]\r\n\r\n Please provide any additional information below. \n\r\n The compiled output is correct if you remove the &quot;var foo =&quot; part, or if you rename the function from &quot;bar&quot; to something else.\n\n[Context/Logs]:\n- Thanks for the report.\r\n\r\nThis is a problem with how the compiler currently models the scope, which is overly simplistic.  The variable \"bar\" should shadow the function name but does not.\r\n\r\nWe can work around this by tweaking the local name normalization like we do for catch declarations or by removing the name from function expression (which is inaccessible).  The proper fix will likely wait until ES6 support with its lexically scoped declarations (let, const, function).\n- This issue was closed by revision r1552.\n- Issue 597 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "163", "source_type": "google", "llm_input_text": "[Title]: Type checking error when replacing a function with a stub after calling.\n[Symptom]:\nGiven the following Javascript:\r\n\r\n  /** @constructor */\r\n  var myclass = function() {\r\n  }\r\n  \r\n  /** @param {boolean} success */\r\n  myclass.prototype.fn = function(success) { }\r\n  \r\n  myclass.prototype.test = function() {\r\n    this.fn();\r\n    this.fn = function() { };\r\n  }\r\n\r\nI would expect an error at both lines of test(). Instead, the second line causes the error in the first not to be reported.\n"}
{"project_id": "Closure", "bug_id": "164", "source_type": "google", "llm_input_text": "[Title]: Original source line numbers are one-based in source maps.\n[Symptom]:\nGenerated source line/column numbers and original column numbers are zero-based. Original source line numbers should be zero based as well.\n\n[Context/Logs]:\n- @john: what does the spec say?\n- I assume this is a V3 source map encoding issue. Using the API the result should be 1 based, but the encoding should be 0 based (why waste a bit).  We won't change the V1/V2 encoding.\r\n\r\nPavel, can you update the v3 document with appropriate text?  It doesn't indicate the starting index for the encoded source location.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This is just an encoding problem it won't affect users of the common library.\n- This issue was closed by revision r1596."}
{"project_id": "Closure", "bug_id": "165", "source_type": "google", "llm_input_text": "[Title]: jquery1.6 extern file gives compiler warning\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Include jquery1.6.js extern file (--extern jquery1.6.js)\r\n2. Compile\r\n\r\n What is the expected output? What do you see instead? \nCompiled code with no warning, instead:\r\njquery-1.6.js:292: WARNING - property clone already defined on superclass Object; use @override to override it\r\n\r\n What version of the product are you using? On what operating system? \n21/Oct/2011\r\n\r\n Please provide any additional information below. \nAttached is the fix (added @override annotation)\n\n[Context/Logs]:\n- i'm thinking of just removing this warning, because it is not useful. thoughts?\n- I have no problems with explicitly declaring an override.  It can help catch accidental overriding of a method.  Rare problem, I know but one that can be quite painful to debug.  I would vote to keep @override.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I would prefer not to add Object.prototype.clone to the  Jquery externs. That just seems like a workaround for a workaround.\n- This issue was closed by revision r1600."}
{"project_id": "Closure", "bug_id": "166", "source_type": "google", "llm_input_text": "[Title]: Spelling error in NodeUtil.java\n[Symptom]:\nNodeUtil.java contains the word 'assiment' - it should be 'assignment'.\n\n[Context/Logs]:\n- This issue was closed by revision r1603."}
{"project_id": "Closure", "bug_id": "167", "source_type": "google", "llm_input_text": "[Title]: Troubles with back slash with some characters\n[Symptom]:\nI use a quite simple WHITESPACE_ONLY compilation level. There is a nice check whether the browser is Internet Explorer. I use it wide in my JS scripts:\r\n\r\nvar isIE = '\\v'=='v';\r\n\r\nAfter compilation with Google Closure Compiler we have:\r\n\r\nvar isIE=&quot;\\u000b&quot;==&quot;v&quot;;\r\n\r\nand the check doesn't work. I know about ASCII output and reg. expressions which should be splitted with string concatenation. But the statement above is not a reg. expression. Why does \\v get replaced by \\u000b at all? Do you have a workaround for me? Is it a bug?\r\n\r\nMany thanks in advance.\n\n[Context/Logs]:\n- This is related to issue 395. Verified that it is currently occurring.\n- Thanks for a quick reply. I use the r1459 version. Do you mean I should use the last one? Or did it not fixed yet?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1627.\n- 'r1627' doesn't exist anymore since we switched to git.\r\n\r\nSo, for future reference, this is CL 25635092 internally, and commit   in the open source version. In particular, the comment that was added in that CL, in IRFactory, is a nice explanation of how we handle the \\v character."}
{"project_id": "Closure", "bug_id": "168", "source_type": "google", "llm_input_text": "[Title]: \"already defined in this object literal\" parse error when using ES5 getter & setter with same prop name (in strict mode only?)\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nclosurecompiler --language_in ECMASCRIPT5_STRICT --compilation_level ADVANCED_OPTIMIZATIONS &lt;&lt;EOT\r\n'use strict';\r\nfunction App() {}\r\nApp.prototype = {\r\n  get appData() { return this.appData_; },\r\n  set appData(data) { this.appData_ = data; }\r\n};\r\nEOT\r\n\r\n What is the expected output? What do you see instead? \nI expect no errors.  Instead I see:\r\n\r\nstdin:5: ERROR - Parse error. Property &quot;appData&quot; already defined in this object literal.\r\n  set appData(data) { this.appData_ = data; }\r\n                                             ^\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nVersion: 1346\r\nBuilt on: 2011/08/11 15:02,\r\n\r\n[G]Ubuntu 10.04.2 LTS\r\n\r\n\r\n Please provide any additional information below. \nHappens only when using string literal 'use strict'; to trigger strict mode.\r\n\r\nNOTE: I think there's a second bug here, as when you run `closurecompiler --version` I expect it to spit out a version and not go into stdin compilation mode, but it continues to wait for stdin.  Perhaps this is a feature, though?\n\n[Context/Logs]:\n- I can't reproduce this with the latest build.\n- still happening for me on r1459:\r\n\r\n\r\n$ ./compiler.jar --language_in ECMASCRIPT5_STRICT --compilation_level ADVANCED_OPTIMIZATIONS <<EOT\r\n'use strict';\r\nfunction App() {}\r\nApp.prototype = {\r\n  get appData() { return this.appData_; },\r\n  set appData(data) { this.appData_ = data; }\r\n};\r\nEOT\r\n\r\nstdin:5: ERROR - Parse error. Property \"appData\" already defined in this object literal.\r\n  set appData(data) { this.appData_ = data; }\r\n                                             ^\r\n\r\n1 error(s), 0 warning(s)\r\n\r\n\r\n$ ./compiler.jar --version\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 20111003 (revision 1459)\r\nBuilt on: 2011/10/03 11:29\n- ... [Middle Discussions Snipped for Brevity] ...\n- To be clear, this will get fixed soon. John was just suggesting an immediate solution if you needed it.\n- This issue was closed by revision r1628."}
{"project_id": "Closure", "bug_id": "169", "source_type": "google", "llm_input_text": "[Title]: ClassCastException during TypeCheck pass\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile code that has a ProxyObjectType that references a RecordType.  For example, we have a NamedType in a typedef that references a RecordType.\r\n\r\n Please provide any additional information below. \n\r\nPatch attached.  Is this the correct fix?\n\n[Context/Logs]:\n- thanks for the patch! yes it is.\n- This issue was closed by revision r1638."}
{"project_id": "Closure", "bug_id": "170", "source_type": "google", "llm_input_text": "[Title]: VarCheck Crash When Using Modules\n[Symptom]:\njava -jar \\users\\chad\\workspace\\closure-compiler\\build\\compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --formatting PRETTY_PRINT --debug --module jquery:1 --module core:1:jquery --module_output_path_prefix mod_ --js ..\\..\\dist\\jquery.js --js core.js --externs ..\\qunit_externs.js\r\n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable jQuery$$2\r\n  Node(NAME jQuery$$2): core.js:100:12\r\n        equal( jQuery(&quot; &lt;div/&gt; &quot;).length, 1, &quot;Make sure whitespace is trimmed.&quot; );\r\n  Parent(GETPROP): core.js:100:12\r\n        equal( jQuery(&quot; &lt;div/&gt; &quot;).length, 1, &quot;Make sure whitespace is trimmed.&quot; );\r\n\r\n        at com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:628)\r\n        at com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:573)\r\n        at com.google.javascript.jscomp.Compiler.compile(Compiler.java:555)\r\n        at com.google.javascript.jscomp.Compiler.compileModules(Compiler.java:546)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:709)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:329)\r\n        at com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:825)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable jQuery$$2\r\n  Node(NAME jQuery$$2): core.js:100:12\r\n        equal( jQuery(&quot; &lt;div/&gt; &quot;).length, 1, &quot;Make sure whitespace is trimmed.&quot; );\r\n  Parent(GETPROP): core.js:100:12\r\n        equal( jQuery(&quot; &lt;div/&gt; &quot;).length, 1, &quot;Make sure whitespace is trimmed.&quot; );\r\n\r\n        at com.google.javascript.jscomp.VarCheck.visit(VarCheck.java:170)\r\n        at com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:498)\r\n        at com.google.javascript.jscomp.\n...[Description Truncated]...\n\n[Context/Logs]:\n- This is the sanity check VarCheck pass.  This means the definition was removed by an optimization but a reference remains. What version of the compiler is this with?\n- I just updated to r1605 and got the same behavior.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1662.\n- Thanks for taking care of this. I was able to successfully compile the attached code."}
{"project_id": "Closure", "bug_id": "171", "source_type": "google", "llm_input_text": "[Title]: Assignment removed when used as an expression result to Array.push\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Open online closure-compiler\r\n2. Input code:\r\n  function f() {\r\n    var a = [], b;\r\n    a.push(b = []);\r\n    b[0] = 1;\r\n    return a;\r\n  }\r\n3. Press [Compile]\r\n\r\n What is the expected output? What do you see instead? \nExcept OK.\r\nOutput: function f(){var a=[];a.push([]);return a}; //wrong\r\n\r\n What version of the product are you using? On what operating system? \nCurrent online version.\n\n[Context/Logs]:\n- Verified in simple and advanced mode in command line compiler as well.\n- Seems RemoveUnusedVariables is the culprit.\n- I have a fix pending.\n- This issue was closed by revision r1674."}
{"project_id": "Closure", "bug_id": "172", "source_type": "google", "llm_input_text": "[Title]: alert(/ / / / /)\n[Symptom]:\nalert(/ / / / /);\r\noutput: alert(/ /// /);\r\nshould be: alert(/ // / /);\n\n[Context/Logs]:\n- this will be a fun one to fix, i think. thanks!\n- fixed by r1678"}
{"project_id": "Closure", "bug_id": "173", "source_type": "google", "llm_input_text": "[Title]: try ... catch is sometimes optimized away when it shouldn't be\n[Symptom]:\nWhat steps will reproduce the problem? \nThis program does nothing and raises no error (provided that 'a' isn't \r\ndefined, so accessing it raises a ReferenceError)\r\n\r\ntry { while(a); } catch(_){}\r\n\r\nAfter compilation, we get:\r\nfor (;a;);\r\n\r\nwhich throws an error which is not caught.\r\n\r\n What version of the product are you using? On what operating system? \nr15\r\n\r\n Please provide any additional information below. \n\r\nFound using the next version of fuzz-test :)\n\n[Context/Logs]:\n- Ha. Inside Google, we've forced all variables to be explicitly declared for a few \r\nyears, so we haven't looked at plain ReferenceErrors for a long time. (in the stand-\r\nalone jar, you'll get a compiler error with --warning_level=VERBOSE).\r\n\r\nI'm not really sure how we want to handle cases like this. We could mark every extern \r\nvariable access as HAS_SIDE_EFFECTS, but that's not much fun.\r\n\r\nThoughts?\n- Seems reasonable. I guess people who would want to benefit from the side effect + dead \r\ncode elimination passes would need to make sure they declare all their variables.\n- ... [Middle Discussions Snipped for Brevity] ...\n- #7 was probably 'fixed' by the alert which can have sideeffect / exception\n- This issue was closed by revision r1725."}
{"project_id": "Closure", "bug_id": "174", "source_type": "google", "llm_input_text": "[Title]: @lends does not work unless class is defined beforehand\n[Symptom]:\nWhat steps will reproduce the problem? \nWith advanced optimizations enabled as well as type checking (--jscomp_error=checkTypes), try to use @lends in the same way it's used on the jsdoc page at [URL] - using either a utility method called &quot;makeClass&quot; or another method of class constructing such as John Resig's method at [URL]\r\n\r\n What is the expected output? What do you see instead? \nExpected output is to have code compiled but instead I get a compile error such as:\r\n\r\nERROR - Variable Person.prototype not declared before @lends annotation.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nLatest svn build, OS X.\n\n[Context/Logs]:\n- Nick, do you have thoughts about this?\n- I do, but I haven't organized them yet. :)\r\n\r\nFor example, I think that doing:\r\n\r\nfoo(/** @lends {Bar} */ {});\r\nvar Bar = function() {};\r\n\r\nshould probably invalid. So, the bug, as stated is working as intended.\r\n\r\nBut it seems reasonable to support @lends in the statement where a symbol is declared.\r\n\r\ndoes that sound right?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Nick,\r\n\r\nI'd second that this will be a nice feature to allow Closure to be used with other third-party libraries.\r\n\r\nI have been forced to preprocess my Dojo sources to split \"dojo.declare\" calls into two statements in order to avoid this error.  For example:\r\n\r\nvar some.Class = dojo.declare(\"some.Class\", { prototype methods... });\r\n\r\nmust be turned into:\r\n\r\n/** @constructor */\r\nvar some.Class = function() {};\r\nsome.Class = dojo.declare(\"some.Class\", /** @lends {some.Class} */ { prototype methods... });\r\n\r\nin order to compile.  This, however, is a hack and turning one statement into two is not always possible in the context of code.\n- This issue was closed by revision r1727."}
{"project_id": "Closure", "bug_id": "175", "source_type": "google", "llm_input_text": "[Title]: Force recompile in ant task\n[Symptom]:\nWhen using the ant task to compile javascript files, if no files have changed, no compilation is done.\r\n\r\nSometimes I want to recompile the files anyway (for example, to get a list of warnings again.)\r\n\r\nI have written a patch which adds a 'forceRecompile' option to the ant task, which enables this.\n\n[Context/Logs]:\n- Have you signed a Contributors License Agreement as listed here?\r\n\r\n[URL]\n- I'm currently waiting for the company I work for to look into the CLA.\n- ... [Middle Discussions Snipped for Brevity] ...\n- what's the name on the CLA?\n- This issue was closed by revision r1730."}
{"project_id": "Closure", "bug_id": "176", "source_type": "google", "llm_input_text": "[Title]: Simple \"Whitespace only\" compression removing \"each\" keyword from \"for each (var x in arr)\" loop\n[Symptom]:\nWhat steps will reproduce the problem? \nSee below code snippet before after compression\r\n\r\n---Before---\r\ncontactcenter.screenpop.updatePopStatus = function(stamp, status) {\r\nfor each ( var curTiming in this.timeLog.timings ) {\r\nif ( curTiming.callId == stamp ) {\r\ncurTiming.flag = status;\r\nbreak;\r\n}\r\n}\r\n};\r\n---After---\r\ncontactcenter.screenpop.updatePopStatus=function(stamp,status){for(var curTiming in this.timeLog.timings)if(curTiming.callId==stamp){curTiming.flag=status;break}};\r\n\r\n\r\n What is the expected output? What do you see instead? \n---each keyword should be preserved\r\n\r\n What version of the product are you using? On what operating system? \n Please provide any additional information below. \nfor each (** in **) ---&gt;  returns object value\r\nfor (** in **) --&gt; returns index\n\n[Context/Logs]:\n- \"for each\" is not part of the EcmaScript standard: [URL]\r\n\r\nIt should however be a parse error.\n- This issue was closed by revision r1737."}
{"project_id": "Closure", "bug_id": "177", "source_type": "google", "llm_input_text": "[Title]: In ADVANCED mode, Compiler fails to warn about overridden methods with different signatures.\n[Symptom]:\nIn ADVANCED mode, Compiler fails to warn about overridden methods with different signatures. The following code only warns in the one instance noted in the comment, whereas I would expect it to complain about the declarations of both Bar.prototype.add and Bar.prototype.sub, as they claim @inheritDoc, but have seemingly different signatures from that of their superclass methods.\r\n\r\nIt would be helpful to have such a warning so that when you change the signature of a superclass method, you can run the Compiler to trigger warnings and find all of the other signatures that you need to update.\r\n\r\nRun the following:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @use_closure_library true\r\n// ==/ClosureCompiler==\r\n\r\ngoog.provide('Foo');\r\ngoog.provide('Bar');\r\n\r\n\r\n/** @constructor */\r\nFoo = function() {};\r\n\r\n\r\n/**\r\n * @param {number} a\r\n * @param {number} b\r\n * @return {number}\r\n */\r\nFoo.prototype.add = function(a, b) {\r\n  return a + b;\r\n};\r\n\r\n\r\n/**\r\n * @param {number} a\r\n * @param {number} b\r\n * @return {number}\r\n */\r\nFoo.prototype.sub = goog.abstractMethod;\r\n\r\n\r\n/**\r\n * @constructor\r\n * @extends {Foo}\r\n */\r\nBar = function() {\r\n  goog.base(this);\r\n};\r\ngoog.inherits(Bar, Foo);\r\n\r\n\r\n/** @inheritDoc */\r\nBar.prototype.add = function(one) {\r\n  return one;\r\n};\r\n\r\n\r\n/** @inheritDoc */\r\nBar.prototype.sub = function(one) {\r\n  return one;\r\n};\r\n\r\n\r\nvar foo = /** @type {Foo} */ (new Bar());\r\nalert(foo.add(3, 4));\r\n\r\nvar bar = new Bar();\r\n// THIS PRODUCES JSC_WRONG_ARGUMENT_COUNT\r\nalert(bar.add(3, 4));\n\n[Context/Logs]:\n- i think they do have compatible signatures? e.g., Bar.prototype.add can take 2 arguments and it will work just fine.\r\n\r\nI think what we really need to do is infer dynamically that Bar.prototype.add may be called with 1 argument or 2 arguments, and the second argument is optional ALL {*=}. That would be completely consistent in our type system, i think?\n- Yi and I were also talking about the secondary question of whether there should be a warning for the overriding methods. I've said 'no' in the past, because there are many cases where this feature is useful. e.g., if you have an event handler that doesn't use the event object, it doesn't really make sense to declare a variable for it.\r\n\r\nWe've talked about having @override mean \"it's ok to omit arguments\", and @inheritDoc mean \"all the arguments in the original documentation must be in the function\"\n- On p.151 of Closure: The Definitive Guide, I give an example of the dangers of introducing a new, optional argument to a function that is used as a listener function, which is why I discourage omitting the event variable in the signature.\r\n\r\nI included this example because I've definitely been stung by it, and it's hard to track down when it happens!\r\n\r\nNot sure if it completely maps to the current bug at hand, though.\n- This issue was closed by revision r1742."}
{"project_id": "Closure", "bug_id": "178", "source_type": "google", "llm_input_text": "[Title]: -0.0 becomes 0 even in whitespace mode\n[Symptom]:\nAffects dart: [URL]\n\n[Context/Logs]:\n- This issue was closed by revision r1519.\n- This issue was closed by revision r1754."}
{"project_id": "Closure", "bug_id": "179", "source_type": "google", "llm_input_text": "[Title]: smartNameRemoval causing compiler crash\n[Symptom]:\nWhat steps will reproduce the problem? \nCompiler the following code in advanced mode:\r\n\r\n{{{\r\nvar goog = {};\r\ngoog.inherits = function(x, y) {};\r\nvar ns = {};\r\n/** @constructor */ ns.PageSelectionModel = function(){};\r\n\r\n/** @constructor */ \r\nns.PageSelectionModel.FooEvent = function() {};\r\n/** @constructor */ \r\nns.PageSelectionModel.SelectEvent = function() {};\r\ngoog.inherits(ns.PageSelectionModel.ChangeEvent, ns.PageSelectionModel.FooEvent);\r\n}}}\r\n\r\n\r\n What is the expected output? What do you see instead? \nThe compiler will crash. The last var check throws an illegal state exception because it knows something is wrong.\r\n\r\nThe crash is caused by smartNameRemoval. It has special logic for counting references in class-defining function calls (like goog.inherits), and it isn't properly creating a reference to PageSelectionModel.\n\n[Context/Logs]:\n- I can no longer reproduce this with the latest build.  Nick, do you still see a problem?\n- i can still repro.\n- This issue was closed by revision r1759."}
{"project_id": "Closure", "bug_id": "180", "source_type": "google", "llm_input_text": "[Title]: externExport with @typedef can generate invalid externs\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create a file that has a @typedef and code referencing the type def above and below the typedef declaration.\r\n2. Run the closure compiler and grab the externExport string stored on the last result for review.\r\n3. I have attached both source and output files displaying the issue.\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe code above the @typedef references the aliased name of the @typedef as expected however the code below the @typedef tries embedding the body of the @typedef and ends up truncating it if the length is too long with a &quot;...&quot;. This throws bad type errors when compiling against this extern. What is odd is this only seems to be the case when the parameter with the type is optional. When neither are optional it embeds the types, which is not a big deal, except when types are long; they get truncated and throw errors.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nplovr built from revision 3103:d6db24beeb7f\r\nRevision numbers for embedded Closure Tools:\r\nClosure Library:    1374\r\nClosure Compiler:   1559\r\nClosure Templates:    23\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- It doesn't look like the \"optional\" source and \"optional\" output examples match.\n- Doh! Uploaded the wrong file, I'm sorry. Here is a fix. It's essentially the same as the non-optional but with the ? prefix. Thank you so much for reviewing this.\n- ... [Middle Discussions Snipped for Brevity] ...\n- What JSType sub class do @typedefs become?\n- This issue was closed by revision r1761."}
{"project_id": "Closure", "bug_id": "181", "source_type": "google", "llm_input_text": "[Title]: Replace / with File.separator\n[Symptom]:\nProcessCommonJSModules uses &quot;/&quot; in numerous places where it should use File.separator instead.\n\n[Context/Logs]:\n- This issue was closed by revision r1766.\n- according to issue 804, this change was incorrect. We're going to roll this back unless we hear good reasons otherwise.\n- Ok, go ahead. I think the suggested change is not a direct rollback and still looks okay. There have been other changes for windows support since the CL as well. Could be good to add some kind of test with the proposed change, but either way I'm fine with it."}
{"project_id": "Closure", "bug_id": "182", "source_type": "google", "llm_input_text": "[Title]: Fix copy/paste error\n[Symptom]:\nLooks to be a bad comment in CompilerOptions.java\r\n\r\n  /** Transform AMD to Common JS modules. */\r\n  boolean transformAMDToCJSModules = false;\r\n\r\n  /** Transform AMD to Common JS modules. */\r\n  boolean processCommonJSModules = false;\n\n[Context/Logs]:\n- Patched version of CompilerOptions attached.\n- Ben, can you submit a CLA:\r\n[URL]\n- Done.  Signed the electronic version (btw, I'm an ex-Googler in case that makes it any easier).  Thanks for taking a look John.\n- This issue was closed by revision r1767."}
{"project_id": "Closure", "bug_id": "183", "source_type": "google", "llm_input_text": "[Title]: Make common JS module functionality publicly visible\n[Symptom]:\nI want to call ProcessCommonJSModules.toModuleName and access ProcessCommonJSModules.DEFAULT_FILENAME_PREFIX just as the CommandLineRunner is doing, but cannot with the current visibility.  (I'm building compiler integration for the Play Framework and want to invoke the compiler, but on incoming HTTP requests rather than from the command line.)\n\n[Context/Logs]:\n- Patched version of ProcessCommonJSModules attached\n- i'm confused. we usually don't make individual passes publicly visible. what does this buy you?\r\n\r\nalso, for future reference, it's 2x easier to consume a patch if it's expressed as a diff, rather than a copy of the whole file\n- ... [Middle Discussions Snipped for Brevity] ...\n- Essentially you want to make an operation like the CommandLineRunner does here\r\n[URL]\r\nright?\r\n\r\nThat kinda makes sense :)\n- This issue was closed by revision r1768."}
{"project_id": "Closure", "bug_id": "184", "source_type": "google", "llm_input_text": "[Title]: {function(number, string)} should not be assignable to {function(number)}\n[Symptom]:\nConsider the following snippet. I don't think the &quot;second call&quot; should compile. As a side note: it would be great if none of the compiled in some pseudo-strict compile mode.\r\n\r\n/** @param {function(string,number):boolean} param */\r\nfunction func(param) {}\r\n\r\n/** @type {function(string,number,boolean):boolean} */\r\nfunction paramFunc1() {}\r\n\r\n/** @type {function(string):boolean} */\r\nfunction paramFunc2() {}\r\n\r\n// first call\r\nfunc(paramFunc1);\r\n\r\n// second call\r\nfunc(paramFunc2);\n\n[Context/Logs]:\n- Issue 660 has been merged into this issue.\n- This issue was closed by revision r1769."}
{"project_id": "Closure", "bug_id": "185", "source_type": "google", "llm_input_text": "[Title]: Identifier minus a negative number needs a space between the \"-\"s\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the attached file with      java -jar build/compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --js bulletfail.js --js_output_file cc.js\r\n2. Try to run the file in a JS engine, for example           node cc.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe file does not parse properly, because it contains\r\n\r\n  g--0.0\r\n\r\nThis is subtraction of a negative number, but it looks like JS engines interpret it as decrementing g, and then fail to parse the 0.0. (g- -0.0, with a space, would parse ok.)\r\n\r\n What version of the product are you using? On what operating system? \n\r\nTrunk closure compiler on Ubuntu\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This issue was closed by revision r1775."}
{"project_id": "Closure", "bug_id": "186", "source_type": "google", "llm_input_text": "[Title]: incomplete function definition crashes the compiler when ideMode is enabled\n[Symptom]:\nThe code:\r\n\r\nf f f ;\r\nfunction t\r\n\r\nThe cause:\r\n\r\nRhino is creating an incomplete FUNCTION node.  We could fix this in Rhino or the IRFactory.  If it is invalid in Rhino we should fix it there, I'm not sure how to determine this so maybe we should fix it in the IRFactory and be done with it.\r\n\r\nThe stack trace:\r\n\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nat com.google.common.base.Preconditions.checkState(Preconditions.java:135)\r\nat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:544)\r\nat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:493)\r\nat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:501)\r\nat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:281)\r\nat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:459)\r\nat com.google.javascript.jscomp.PrepareAst.process(PrepareAst.java:70)\r\nat com.google.javascript.jscomp.Compiler.prepareAst(Compiler.java:1836)\r\nat com.google.javascript.jscomp.JsAst.parse(JsAst.java:100)\r\nat com.google.javascript.jscomp.JsAst.getAstRoot(JsAst.java:53)\r\nat com.google.javascript.jscomp.CompilerInput.getAstRoot(CompilerInput.java:120)\r\nat com.google.javascript.jscomp.Compiler.parseInputs(Compiler.java:1303)\r\nat com.google.javascript.jscomp.Compiler.parse(Compiler.java:697)\n\n[Context/Logs]:\n- This issue was closed by revision r1786."}
{"project_id": "Closure", "bug_id": "187", "source_type": "google", "llm_input_text": "[Title]: goog.addSingletonGetter prevents unused class removal\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @use_closure_library true\r\n// @formatting pretty_print,print_input_delimiter\r\n// @warning_level VERBOSE\r\n// @debug true\r\n// ==/ClosureCompiler==\r\n\r\ngoog.provide('foo');\r\n\r\nvar foo = function() { this.values = []; };\r\ngoog.addSingletonGetter(foo);\r\n\r\nfoo.prototype.add = function(value) {this.values.push(value)};\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpect: The code is completely removed.\r\n\r\nInstead:\r\n\r\n(function($ctor$$) {\r\n  $ctor$$.$getInstance$ = function $$ctor$$$$getInstance$$() {\r\n    return $ctor$$.$instance_$ || ($ctor$$.$instance_$ = new $ctor$$)\r\n  }\r\n})(function() {\r\n});\r\n\r\n\r\nWhat version of the product are you using? On what operating system?\r\n\r\n[URL] on Feb 28, 2012\r\n\r\nPlease provide any additional information below.\n\n[Context/Logs]:\n- The failure sequence is like this:\r\n1) remove unused prototype properties removes the properties\r\n2) inlineVariables moves the constructor into the goog.addSingletonGetter call\r\n3) NameAnalyzer won't remove it because it has no name \r\n4) goog.addSingletonGetter has side-effect so it won't be removed on its own.\n- This issue was closed by revision r1800."}
{"project_id": "Closure", "bug_id": "188", "source_type": "google", "llm_input_text": "[Title]: assignment to object in conditional causes type error on function w/ record type return type\n[Symptom]:\nslightly dodgy code :)\r\n\r\n/** @returns {{prop1: (Object|undefined), prop2: (string|undefined), prop3: (string|undefined)}} */\r\nfunction func(a, b) {\r\n  var results;\r\n  if (a) {\r\n    results = {};\r\n    results.prop1 = {a: 3};\r\n  }\r\n  if (b) {\r\n    results = results || {};\r\n    results.prop2 = 'prop2';\r\n  } else {\r\n    results = results || {};\r\n    results.prop3 = 'prop3';\r\n  }\r\n  return results;\r\n}\r\nresults in this error:\r\n\r\n\r\nJSC_TYPE_MISMATCH: inconsistent return type\r\nfound   : ({prop1: {a: number}}|{})\r\nrequired: {prop1: (Object|null|undefined), prop2: (string|undefined), prop3: (string|undefined)} at line 18 character 7\r\nreturn results;\r\n\r\n\r\n\r\ndefining results on the first line on the function causes it the world.\r\nthe still dodgy, but slightly less so, use of this is if the function return type were that record type|undefined and not all branches were guaranteed to be executed.\n\n[Context/Logs]:\n- This issue was closed by revision r1802."}
{"project_id": "Closure", "bug_id": "189", "source_type": "google", "llm_input_text": "[Title]: Customise which warnings are used in ant task\n[Symptom]:\nSometimes when using the closure compiler, it's nice to be able to select what level each diagnostic group is reported at. I have written some code which will allow you to do this. \r\n\r\nWe are using this so that our build will fail for most closure warnings, but not on missing properties, as it's going to take a while to get rid of all of those.\r\n\r\nExample:\r\n&lt;jscomp compilationlevel=&quot;simple&quot; warning=&quot;verbose&quot; debug=&quot;false&quot; output=&quot;${out}&quot;&gt;\r\n    &lt;warning group=&quot;MISSING_PROPERTIES&quot; level=&quot;WARNING&quot;/&gt;\r\n    &lt;warning group=&quot;DEPRECATED&quot; level=&quot;ERROR&quot;/&gt;\r\n    &lt;warning group=&quot;VISIBILITY&quot; level=&quot;ERROR&quot;/&gt;\r\n    &lt;warning group=&quot;CONSTANT_PROPERTY&quot; level=&quot;ERROR&quot;/&gt;\r\n    ...\n\n[Context/Logs]:\n- what's currently blocking this patch? do we need a CLA? See:\r\n[URL]\n- I've already signed the CLA (see issue 619)\n- This issue was closed by revision r1804."}
{"project_id": "Closure", "bug_id": "190", "source_type": "google", "llm_input_text": "[Title]: Null Pointer Exception with --process_common_js_modules when --common_js_module_path_prefix is not set or incorrect [patch\n[Symptom]:\nWhat steps will reproduce the problem? \n1. try to compile set of js-files, which use common-js modules example situated in directory other than current, with option --process_common_js_modules but with incorrect --common_js_module_path_prefix\r\n(I can prepare detailed example if needed)\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\n java.lang.RuntimeException: java.lang.NullPointerException\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:629)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:574)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:556)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:515)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:718)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:331)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:871)\r\nCaused by: java.lang.NullPointerException\r\n\tat com.google.javascript.jscomp.JSModuleGraph.&lt;init&gt;(JSModuleGraph.java:94)\r\n\tat com.google.javascript.jscomp.Compiler.processAMDAndCommonJSModules(Compiler.java:1394)\r\n\tat com.google.javascript.jscomp.Compiler.parseInputs(Compiler.java:1232)\r\n\tat com.google.javascript.jscomp.Compiler.parse(Compiler.java:678)\r\n\tat com.google.javascript.jscomp.Compiler.compileInternal(Compiler.java:636)\r\n\tat com.google.javascript.jscomp.Compiler.access$000(Compiler.java:70)\r\n\tat com.google.javascript.jscomp.Compiler$1.call(Compiler.java:559)\r\n\tat com.google.javascript.jscomp.Compiler$1.call(Compiler.java:556)\r\n\tat com.google.javascript.jscomp.Compiler$2.run(Compiler.java:601)\r\n\tat java.lang.Thread.run(Thread.java:722)\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1741\r\nBuilt on: 2012/01/30 15:02\r\n\r\n Please provide any additional information below. \n\r\nPath, whic\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r1825."}
{"project_id": "Closure", "bug_id": "191", "source_type": "google", "llm_input_text": "[Title]: StackOverflowError exception when running closure compiler (javascript attached)\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. I'm trying to run: java -jar compiler.jar --js AdMedia.eam.js --js_output_file AdMedia.eam.min.js\r\n2. AdMedia.eam.js is attached.\r\n\r\n What is the expected output? What do you see instead? \n\r\nI get the following exception:\r\njava.lang.RuntimeException: java.lang.RuntimeException: java.lang.StackOverflowError\r\n        at com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:643)\r\n        at com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:588)\r\n        at com.google.javascript.jscomp.Compiler.toSource(Compiler.java:1492)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner.processResults(AbstractCommandLineRunner.java:788)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:726)\r\n        at com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:334)\r\n        at com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:871)\r\nCaused by: java.lang.RuntimeException: java.lang.StackOverflowError\r\n        at com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:643)\r\n        at com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:588)\r\n        at com.google.javascript.jscomp.Compiler.toSource(Compiler.java:1608)\r\n        at com.google.javascript.jscomp.Compiler$5.call(Compiler.java:1503)\r\n        at com.google.javascript.jscomp.Compiler$5.call(Compiler.java:1492)\r\n        at com.google.javascript.jscomp.Compiler$2.run(Compiler.java:615)\r\n        at java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.StackOverflowError\r\n        at com.google.javascript.jscomp.CodeGenerator.add(CodeGenerator.java:91)\r\n        at com.google.javascript.jscomp.CodeGenerator.addExpr(CodeGenerator.java:881)\r\n        at com.google.javascript.jscomp.CodeGenerator.add(CodeGenerator.java:103)\r\n        at com.google.javascript.jscomp.CodeGenerator.addExpr(CodeGenerator.java:8\n...[Description Truncated]...\n\n[Context/Logs]:\n- hmmm...it works fine for me, but i'm not using that exact JDK. have you tried giving it more stack space?\r\n\r\njava -Xss 1024k -jar compiler.jar ...\n- fyi -- i have a change that i think will help with this.\n- I think that this issue happens only in some JDK builds. As I mentioned in the report it happenes to me on 1.6.0_31 (32 bit) and not on 1.7.0 (64 bit). I also tested later using 1.6.0_27 (64 bit) on CentOS 5.6 and it reproduced only on the first run while subsequent executions were successful.\r\n\r\nUsing larger stack space didn't help :(.\r\n\r\nWhat is the change you wanted to propose?\n- This issue was closed by revision r1849."}
{"project_id": "Closure", "bug_id": "192", "source_type": "google", "llm_input_text": "[Title]: Bug in ComposeWarningsGaurd class\n[Symptom]:\nI had posted this as a discussion here: [URL]\r\n\r\nI'll paste the content of my original post here as well.\r\n\r\n---\r\n\r\nI've been looking at a stacktrace generated by a load test of a Apache \r\nShindig server: \r\n\r\nException created : java.util.ConcurrentModificationException \r\n        at java.util.TreeMap$DescendingSubMapIterator.getNext(TreeMap.java: \r\n419) \r\n        at java.util.TreeMap$DescendingSubMapKeyIterator.next(TreeMap.java: \r\n498) \r\n        at \r\ncom.google.javascript.jscomp.ComposeWarningsGuard.addGuards(ComposeWarningsGuard.java: \r\n99) \r\n        at \r\ncom.google.javascript.jscomp.ComposeWarningsGuard.addGuard(ComposeWarningsGuard.java: \r\n89) \r\n        at \r\ncom.google.javascript.jscomp.ComposeWarningsGuard.addGuards(ComposeWarningsGuard.java: \r\n99) \r\n        at \r\ncom.google.javascript.jscomp.ComposeWarningsGuard.&lt;init&gt;(ComposeWarningsGuard.java: \r\n79) \r\n        at com.google.javascript.jscomp.Compiler.initOptions(Compiler.java: \r\n276) \r\n        at com.google.javascript.jscomp.Compiler.initModules(Compiler.java: \r\n331) \r\n        at com.google.javascript.jscomp.Compiler.init(Compiler.java:311) \r\n        at com.google.javascript.jscomp.Compiler.compile(Compiler.java:510) \r\n\r\nA pretty interesting stack trace... I'm not familiar with this class \r\nin particular but after some investigation, it has nothing to do with \r\nbeing thread-safe. \r\nIt appears there's a condition where the code is modifying the backing \r\nTreeSet from which a Iterable descendingSet() is continued to be \r\nnavigated over. \r\nI believe the solution would be to clone the descendingSet before \r\npassing it to addGuards(Iterable&lt;WarningsGuard&gt; guards)\n\n[Context/Logs]:\n- do you know how you were able to get this?\r\n\r\nfrom the stack trace, it looks like you've got a cycle in you warnings guards.\n- No.  I agree it looks like a cycle in the warnings, and I'm kind of confused about how it's happening.  Would you say the proposed patch inadvertently causes any harm in guarding against this situation?\n- ... [Middle Discussions Snipped for Brevity] ...\n- If you're curious, I can show you the code in shindig where the compiler is being created and run.\r\n\r\nOtherwise, I can create an issue to dig deeper later when I free up a bit.\r\n\r\nIf you're worried about burying it, maybe you can add a log statement right before\r\naddGuards(Lists.newLinkedList(composeGuard.guards.descendingSet()));\r\nif (this.guards == composeGuard.guards)\r\n\r\nYou might even be able to do away with calling it all together if that is true.  I was just unsure if this situation was valid for closure or not.\n- This issue was closed by revision r1851."}
{"project_id": "Closure", "bug_id": "193", "source_type": "google", "llm_input_text": "[Title]: weird object literal invalid property error on unrelated object prototype\n[Symptom]:\nApologies in advance for the convoluted repro case and the vague summary.\r\n\r\nCompile the following code (attached as repro.js) with:\r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --js repro.js *\r\n\r\n/**\r\n * @param {{text: string}} opt_data\r\n * @return {string}\r\n */\r\nfunction temp1(opt_data) {\r\n  return opt_data.text;\r\n}\r\n\r\n/**\r\n * @param {{activity: (boolean|number|string|null|Object)}} opt_data\r\n * @return {string}\r\n */\r\nfunction temp2(opt_data) {\r\n  /** @notypecheck */\r\n  function __inner() {\r\n    return temp1(opt_data.activity);\r\n  }\r\n  return __inner();\r\n}\r\n\r\n/**\r\n * @param {{n: number, text: string, b: boolean}} opt_data\r\n * @return {string}\r\n */\r\nfunction temp3(opt_data) {\r\n  return 'n: ' + opt_data.n + ', t: ' + opt_data.text + '.';\r\n}\r\n\r\nfunction callee() {\r\n  var output = temp3({\r\n    n: 0,\r\n    text: 'a string',\r\n    b: true\r\n  })\r\n  alert(output);\r\n}\r\n\r\ncallee();\r\n\r\n\r\nyields:\r\nrepro.js:30: ERROR - actual parameter 1 of temp3 does not match formal parameter\r\nfound   : {b: boolean, n: number, text: (string|undefined)}\r\nrequired: {b: boolean, n: number, text: string}\r\n  var output = temp3({\r\n\r\nIt seems like temp3 is actually being called with the right type {b: boolean, n: number, text: string} though it seems to think that text is a (string|undefined)\r\nThis seems to happen because of the seemingly unrelated code in functions temp1 and temp2. If I change the name of the text property (as in repro3.js) it works.\r\nAdditionally, if I fix the type of the activity property in the record type of temp2 it works (as in repro2.js)\r\n\r\nThis comes up in our codebase in some situations where we don't have type info for all the objects being passed into a function. It's always a tricky one to find because it reports an error at a location that looks correct.\r\n\r\n\r\n* it also fails with SIMPLE_OPTIMIZATIONS\n\n[Context/Logs]:\n- This issue was closed by revision r1858."}
{"project_id": "Closure", "bug_id": "194", "source_type": "google", "llm_input_text": "[Title]: Preserve doesn't preserve whitespace at start of line\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nCode such as:\r\n/**\r\n * @preserve\r\n\r\nThis\r\n  was\r\n    ASCII\r\n       Art\r\n\r\n*/\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe words line up on the left:\r\n/*\r\nThis\r\nwas\r\nASCII\r\nArt\r\n*/\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nLive web verison.\r\n\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This issue was closed by revision r1869."}
{"project_id": "Closure", "bug_id": "195", "source_type": "google", "llm_input_text": "[Title]: Make it easier to duplicate goog.isNull and friends\n[Symptom]:\nHi,\r\n\r\nI would like to write some functions like goog.isNull, goog.isDef, etc in a codebase that does not use closure library.\r\n\r\nThe following code fails with a warning:\r\n/**\r\n * @param {*} val\r\n * @return {boolean}\r\n */\r\nisNull = function(val) {\r\n  return val === null;\r\n};\r\n\r\n/** @param {number} x */\r\nfunction notNullsOnly(x) {\r\n  window.console.log(x);\r\n}\r\n\r\n/** @param {number|null} x */\r\nfunction maybeNulls(x) {\r\n  if (!isNull(x)) notNullsOnly(x);\r\n}\r\n\r\nmaybeNulls(null);\r\nmaybeNulls(3)\r\n\r\n------------------------\r\nJSC_TYPE_MISMATCH: actual parameter 1 of notNullsOnly does not match formal parameter\r\nfound   : (null|number)\r\nrequired: number at line 17 character 29\r\nif (!isNull(x)) notNullsOnly(x);\r\n                             ^\r\n\r\n\r\nthough passes with no issues in a closure-library world using goog.isNull instead.\r\nI think that most of the magic to make this happens is in ClosureCodingConvention#isPropertyTestFunction and more importantly, ClosureReverseAbstractInterpreter.java\r\n\r\nCreating a new CodingConvention is relatively straightforward but I don't want to exactly copy/paste the code in ClosureReverseAbstractInterpreter.java. Even if I did, I don't have access to SemanticReverseAbstractInterpreter.java for some of the utilities and base behavior.\r\n\r\nThoughts?\n\n[Context/Logs]:\n- do you just need a clone of goog.isNull? or did you want to build more complicated type-inferring stuff?\r\n\r\nyou're probably the better judge of what api you need than i am...\n- Just clones of goog.isNull, goog.isDef, goog.isDefAndNotNull\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yup, almost! If you patch the following I am good to go:\r\n\r\n===================================================================\r\n--- src/com/google/javascript/jscomp/type/ChainableReverseAbstractInterpreter.java\t(revision 1866)\r\n+++ src/com/google/javascript/jscomp/type/ChainableReverseAbstractInterpreter.java\t(working copy)\r\n@@ -113,7 +113,7 @@\r\n    * name whose type is capable of being refined.\r\n    * @return The current type of the node if it can be refined, null otherwise.\r\n    */\r\n-  JSType getTypeIfRefinable(Node node, FlowScope scope) {\r\n+  protected JSType getTypeIfRefinable(Node node, FlowScope scope) {\r\n     switch (node.getType()) {\r\n       case Token.NAME:\r\n         StaticSlot  nameVar = scope.getSlot(node.getString());\r\n@@ -590,14 +590,14 @@\r\n   /**\r\n    * Returns a version of type where undefined is not present.\r\n    */\r\n-  final JSType getRestrictedWithoutUndefined(JSType type) {\r\n+  protected final JSType getRestrictedWithoutUndefined(JSType type) {\r\n     return type == null ? null : type.visit(restrictUndefinedVisitor);\r\n   }\r\n \r\n   /**\r\n    * Returns a version of type where null is not present.\r\n    */\r\n-  final JSType getRestrictedWithoutNull(JSType type) {\r\n+  protected final JSType getRestrictedWithoutNull(JSType type) {\r\n     return type == null ? null : type.visit(restrictNullVisitor);\r\n   }\n- This issue was closed by revision r1870."}
{"project_id": "Closure", "bug_id": "196", "source_type": "google", "llm_input_text": "[Title]: Add support for --manage_closure_dependencies and --only_closure_dependencies with compilation level WHITESPACE_ONLY\n[Symptom]:\nThe compiler options --manage_closure_dependencies and --only_closure_dependencies are currently ignored with compilation level WHITESPACE_ONLY. It would be helpful for testing, if dependency management were supported for WHITESPACE_ONLY in addition to SIMPLE_OPTIMIZATIONS and ADVANCED_OPTIMIZATIONS. For example, both Closure Builder and plovr automatically manage dependencies for all compilation levels.\r\n\r\nThe proposed change (see attached diff) does not automatically manage dependencies, but it enables dependency management if either --manage_closure_dependencies or --only_closure_dependencies is specified, or if at least one --closure_entry_point is specified.\r\n\r\nThe attached diff passed the JUnit tests: ant test\n\n[Context/Logs]:\n- This issue was closed by revision r1879."}
{"project_id": "Closure", "bug_id": "197", "source_type": "google", "llm_input_text": "[Title]: Compiler option --only_closure_dependencies drops base.js (specious moocher)\n[Symptom]:\nThe compiler option --only_closure_dependencies drops moochers (i.e. files that do not provide any symbols; see DependencyOptions.java). This results in a huge reduction in output file size versus --manage_closure_dependencies. However, when compiling a program that uses the Closure Library, base.js is also dropped because it does not explicitly provide &quot;goog&quot; with a call to goog.provide(). This results in programs that do not run because &quot;goog&quot; is undefined.\r\n\r\nWith --only_closure_dependencies, if base.js is passed a dependency to the compiler, shouldn't &quot;goog&quot; be implicitly provided and also considered as one of the closure entry points?\n\n[Context/Logs]:\n- thanks for the report! this flag is still in the experimental stage, so bug reports like this are especially appreciated.\n- This issue was closed by revision r1890."}
{"project_id": "Closure", "bug_id": "198", "source_type": "google", "llm_input_text": "[Title]: Combining temporary strings are over-optimized in advanced build\n[Symptom]:\nWhat steps will reproduce the problem? \n1. This bug only manifests itself in large code bases. How large, and what the specifics are, I haven't yet worked out, since the output differs. But the principle code is:\r\n\r\nsgxColorRGBA.prototype.asHex = function() {\r\n\tvar hexString = &quot;&quot;;\r\n\t\r\n\tstr = (sgxFloor(this.r*255)).toString(16);\r\n\tif (str.length &lt; 2) { str = &quot;0&quot;+str; }\r\n\thexString += str;\r\n\r\n\tstr = (sgxFloor(this.g*255)).toString(16);\r\n\tif (str.length &lt; 2) { str = &quot;0&quot;+str; }\r\n\thexString += str;\r\n\r\n\tstr = (sgxFloor(this.b*255)).toString(16);\r\n\tif (str.length &lt; 2) { str = &quot;0&quot;+str; }\r\n\thexString += str;\r\n\r\n\tstr = (sgxFloor(this.a*255)).toString(16);\r\n\tif (str.length &lt; 2) { str = &quot;0&quot;+str; }\r\n\thexString += str;\r\n\r\n\treturn hexString;\r\n}\r\n\r\nNote that 'str' is not declared as var.\r\n\r\n What is the expected output? What do you see instead? \nI see this:\r\nsgxColorRGBA.prototype.pb = function() {\r\n  str = A(255 * this.A).toString(16);\r\n  2 &gt; str.length &amp;&amp; (str = &quot;0&quot; + str);\r\n  str = A(255 * this.w).toString(16);\r\n  2 &gt; str.length &amp;&amp; (str = &quot;0&quot; + str);\r\n  str = A(255 * this.s).toString(16);\r\n  2 &gt; str.length &amp;&amp; (str = &quot;0&quot; + str);\r\n  str = A(255 * this.r).toString(16);\r\n  2 &gt; str.length &amp;&amp; (str = &quot;0&quot; + str);\r\n  return&quot;&quot; + str + str + str + str\r\n};\r\n\r\nObviously, repeatedly adding 'str' is broken in the final line, compared to the original. So whatever is aggregating the result is seeing a temporary 'str' reference and combining it, I guess. If 'str' is declared as var, the problem goes away.\r\n\r\nI'd expect a warning, at least.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nLive at [URL]\r\n\r\n Please provide any additional information below. \n\r\nAs a stand-alone method, both 'var str' and 'str' works. It's only when the project hits a certain (undetermined) size that it fails.\n\n[Context/Logs]:\n- I entered your code into the compiler, but was not able to reproduce the issue. are you sure that's the code you're using?\n- It is the same code, but as I say in the comments section - it only happens when the project hits a certain (undetermined) size that it fails. I haven't determined how much (of my current 6KLOC project) I need to include, to repro.\r\n\r\nIssue 699 appears to have similar traits and might be connected.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @alan- feel free to assign to me if you're swamped with too much work right now.\n- This issue was closed by revision r1902."}
{"project_id": "Closure", "bug_id": "199", "source_type": "google", "llm_input_text": "[Title]: --flagfile option does not treat quoted strings as single tokens\n[Symptom]:\nFlag file entries such as: --js='/usr/my project/app.js' are split on whitespace such that &quot;/usr/my&quot; and &quot;project/app.js&quot; are treated as separate tokens.\r\n\r\nThe attached patch corrects this issue using a custom tokenizer method tokenizeKeepingQuotedStrings(). The following JUnit test was used in a separate project to test this method:\r\n\r\n@Test public void tokenizeKeepingQuotedStrings() {\r\n  String data = &quot;t1 \\&quot;t2\\&quot; t3='quoted string' --t4=\\&quot;/my project/app.js\\&quot; &quot;\r\n      + String.format(&quot;%n&quot;) + &quot;'adjacent content't5 t6='single'&quot;;\r\n  List&lt;String&gt; tokens = StringUtil.tokenizeKeepingQuotedStrings(data);\r\n  List&lt;String&gt; expected = ImmutableList.of(&quot;t1&quot;, &quot;\\&quot;t2\\&quot;&quot;, &quot;t3='quoted string'&quot;,\r\n      &quot;--t4=\\&quot;/my project/app.js\\&quot;&quot;, &quot;'adjacent content't5&quot;, &quot;t6='single'&quot;);\r\n  assertEquals(expected, tokens);\r\n}\r\n\r\nThe patch has been tested on a small project using a flag file. In addition, &quot;ant test&quot; ran successfully.\n\n[Context/Logs]:\n- This issue was closed by revision r1905."}
{"project_id": "Closure", "bug_id": "200", "source_type": "google", "llm_input_text": "[Title]: Update \"get\", \"set\" and trailing comma parse errors to reference EcmaScript5 options\n[Symptom]:\nselection of esmascript standart using --language is good. but there are no user-readable warning if you cannot minify your script - thats why this is hackwork or moonlighting or trash (I dont know the english word for russian &quot;\u0445\u0430\u043b\u0442\u0443\u0440\u0430&quot;)\r\n\r\nif the was an erorrs (for example JSC_PARSE_ERROR) during minifying your script - warning whould appear:\r\nYour script can't be minified using ${CURRENT_ESMA} standarts. try to select another esma standart using --language_in option\r\n\r\nYou should implement selection of esma standart in webservice page too\n\n[Context/Logs]:\n- I'm very confused. How is this not a user readable error:\r\nJSC_PARSE_ERROR: Parse error. getters are not supported in Internet Explorer at line 1 character 0\r\nvar x = { get 1() {} };\n- yes this is readable error no comments (\u0431\u0435\u0437 \u0431\u0430\u0437\u0430\u0440\u0430). but you know that limited enum of types of exceptions can be trown in esmascript standart 5 if you compile using esmascript standart 3\r\n\r\nwhat I see know:\r\nJSC_PARSE_ERROR...\r\nJSC_PARSE_ERROR...\r\nJSC_PARSE_ERROR...\r\n...\r\n\r\nwhat i want to see:\r\nJSC_PARSE_ERROR...\r\nJSC_PARSE_ERROR...\r\nJSC_PARSE_ERROR...\r\n...\r\nYour script can't be minified using esmascript 3 standarts. try to select another esmascript standart using --language_in option\r\n\r\nhow to implement this in general:\r\nboolean esmascript_mismatch = false;\r\n..\r\ncatch(exception &e) {\r\n  esmascript_mismatch ||= e.esmascript_mismatch\r\n  ...\r\n}\r\nif(esmascript_mismatch)\r\n  cerr << \"Your script can't be minified using esmascript 3 standarts. try to select another esmascript standart using --language_in option\"\n- ... [Middle Discussions Snipped for Brevity] ...\n- yes. but not only getters and setters. you should investigate which exceptions can be thrown in the case of esmascript mismatch\n- This issue was closed by revision r1925."}
{"project_id": "Closure", "bug_id": "201", "source_type": "google", "llm_input_text": "[Title]: Using --process_common_js_modules produces a regex exception when used on Windows\n[Symptom]:\nWhat steps will reproduce the problem? \n1.Use command line arguments \r\n  --process_common_js_modules \r\n  --common_js_entry_module=main.js\r\n\r\n What is the expected output? What do you see instead? \nAn exception is thrown.\r\n\r\n What version of the product are you using? On what operating system? \nOS: Windows\r\n\r\nAdditional Info:\r\nIn file com.google.javascript.jscomp.ProcessCommonJSModules\r\nFile.separator needs to be replaced or further escaped on Windows.\r\n\r\n\r\nFull Stack Trace:\r\nException in thread &quot;main&quot; java.util.regex.PatternSyntaxException: Unexpected internal error near index 4\r\n^\\.\\\r\n    ^\r\n        at java.util.regex.Pattern.error(Unknown Source)\r\n        at java.util.regex.Pattern.compile(Unknown Source)\r\n        at java.util.regex.Pattern.&lt;init&gt;(Unknown Source)\r\n        at java.util.regex.Pattern.compile(Unknown Source)\r\n        at java.lang.String.replaceAll(Unknown Source)\r\n        at com.google.javascript.jscomp.ProcessCommonJSModules.toModuleName(ProcessCommonJSModules.java:83)\r\n        at com.google.javascript.jscomp.CommandLineRunner.initConfigFromFlags(CommandLineRunner.java:656)\r\n        at com.google.javascript.jscomp.CommandLineRunner.&lt;init&gt;(CommandLineRunner.java:556)\r\n        at com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:869)\n\n[Context/Logs]:\n- Potential Patch is attached.  It works for me on Windows.\r\n\r\nI did not run the unit tests and I have not tested it on Linux.\n- Neaket do you have a CLA as per: \r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- I have just submitted a CLA, and it is now being processed.  \r\n\r\n@Nicholas \r\nYes the fix is straight forward a few lines of code.  A backslash needs to be double escaped for windows directories in regex.  And a forward slash is always used for module paths (which are web based).\n- This issue was closed by revision r1927."}
{"project_id": "Closure", "bug_id": "202", "source_type": "google", "llm_input_text": "[Title]: Memory leak from Tracer.ThreadTrace when setTracerMode is set to OFF\n[Symptom]:\nThis was originally reported by tom@sproutbuilder.com in closure-library bug list:\r\n[URL]\r\n\r\n\r\n What steps will reproduce the problem? \n1. Disable your tracer via  options.setTracerMode(CompilerOptions.TracerMode.OFF);\r\n2. Run compiler in a Java project.\r\n3. Stop Tomcat 7 server.\r\n4. View logs:\r\n\r\nSEVERE: The web application [/translator] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@62add0e8]) and a value of type [com.google.javascript.jscomp.Tracer.ThreadTrace] (value []) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.\r\n\r\n4. MaxPermSize JVM setting helps mask the issue, but over time we have gotten OutOfMemory exceptions on our development and staging servers.\r\n\r\n What is the expected output? What do you see instead? \nNo errors or memory leaks should be expected output, because the tracer should be disabled.\r\n\r\n What version of the product are you using? On what operating system? \nclosure-compiler r1811\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Should we be calling traces.remove() rather than traces.set(null) (traces being the ThreadLocal object)?\n- It seems likely that this will need to be debugged in the environment in which it is running.  Chris did you have more details about the server?\n- ... [Middle Discussions Snipped for Brevity] ...\n- As the problem is not fixed, could this please be reopened?\n- From reading the code, I assume the following:\r\nThe `ThreadLocal` is created from the `Tracer.getThreadTrace()` method which is called in the constructor.\r\nThe ThreadLocal is only removed from within `Tracer.clearThreadTrace`. This is called from `clearCurrentThreadTrace()` - which is completely unused - and from `logAndClearCurrentThreadTrace()`. The latter is only called from within the `bootCompilerThread` `Callable`. And that - despite being created unconditionally - is only used if `Compiler.useThreads` is `true`.\r\nThat means that if `Compiler.useThreads` is `false`, the `ThreadLocal` is created but never removed. So could we please reopen this ticket?"}
{"project_id": "Closure", "bug_id": "203", "source_type": "google", "llm_input_text": "[Title]: Using --charset 'utf-8', \\u2028 and \\u2029 are not escaped.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. echo 'alert(&quot;\\u2028\\u2029&quot;)' | java -jar compiler.jar --charset 'utf-8'\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expect `alert(&quot;\\u2028\\u2029&quot;)`, but instead I get `alert(&quot;  &quot;)` (a literal \\u2028 and \\u2029 character).\r\n\r\n What version of the product are you using? On what operating system? \n\r\nbrad:~/Downloads$ java -jar compiler.jar --version\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 20120430 (revision 1918)\r\nBuilt on: 2012/04/30 18:02\n\n[Context/Logs]:\n- brad:~/Downloads$ java -version\r\njava version \"1.6.0_31\"\r\nJava(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3635)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode)\r\n\r\nUsing OSX 10.7.3\n- Note:  This is only with --charset 'utf-8' and does not manifest when not using that flag.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Issue 761 has been merged into this issue.\n- Issue 761 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "204", "source_type": "google", "llm_input_text": "[Title]: closure compiler screws up a perfectly valid isFunction() implementation\n[Symptom]:\nhi, this function does not get compiled correctly via google closure compiler\r\n\r\n isFunction = function(functionToCheck) {\r\n    var getType;\r\n    getType = {}; //just an object\r\n    return functionToCheck &amp;&amp; getType.toString.apply(functionToCheck) === '[object Function]';\r\n  };\r\n\r\ngets compiled into \r\n\r\nisFunction = function(a) {\r\n  return a &amp;&amp; &quot;[object Function]&quot; === (void 0).apply(a)\r\n};\r\n\r\nto make it work, we have to use an array instead of an object (even though we just want to call the object toString method)\r\n\r\n  isFunction = function(functionToCheck) {\r\n    var getType;\r\n    getType = []; //not it's an array \r\n    return functionToCheck &amp;&amp; getType.toString.apply(functionToCheck) === '[object Function]';\r\n  };\r\n\r\ngets compiled into\r\n\r\nisFunction = function(a) {\r\n  var b;\r\n  b = [];\r\n  return a &amp;&amp; &quot;[object Function]&quot; === b.toString.apply(a)\r\n};\r\n\r\nand it does what it should do. \r\n\r\ni wasted an hour to find that bug. bugs me. great tool otherwise.\n\n[Context/Logs]:\n- This issue was closed by revision r1967."}
{"project_id": "Closure", "bug_id": "205", "source_type": "google", "llm_input_text": "[Title]: constant functions not inlined aggressively enough\n[Symptom]:\nIf you call a function that returns 'false' enough times under certain conditions, it doesn't get inlined.\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nfunction f() { return false; }\r\nif (!f()) alert('hi'); // repeat this about 25 times\n\n[Context/Logs]:\n- This issue was closed by revision r1969."}
{"project_id": "Closure", "bug_id": "206", "source_type": "google", "llm_input_text": "[Title]: Error trying to build try-catch block (AST)\n[Symptom]:\n1. EXAMPLE\r\n\r\nNode nodeTry = IR.block(\r\n  IR.var(\r\n    IR.name(&quot;testing&quot;), \r\n    IR.number(11)\r\n  )\r\n);\r\nNode nodeCatch = IR.catchNode(\r\n  IR.name(&quot;blabla&quot;),\r\n    IR.block(\r\n      IR.var(\r\n        IR.name(&quot;testing&quot;),\r\n\tIR.number(22)\r\n      )\r\n    )\r\n);\r\nIR.tryCatch(nodeTry, nodeCatch);\r\n\r\n\r\n2. THROWS ERROR\r\n\r\nException in thread &quot;main&quot; java.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(FUNCTION tt): input.js:2:4\r\n    function tt() {\r\n  Parent(BLOCK): input.js:1:4\r\ntry {\r\n\r\n\r\n3. SOLUTION\r\n\r\nIR.block is verifing the catch node is a statement which it isnt.\n\n[Context/Logs]:\n- This issue was closed by revision r1971."}
{"project_id": "Closure", "bug_id": "207", "source_type": "google", "llm_input_text": "[Title]: Undeclared namespace in the XML representation of a Maven project\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Examine closure-compiler.pom\r\n\r\n What is the expected output? What do you see instead? \nThe default namespace as well as the namespace with the xsi prefix should be defined. It is not so.\r\n\r\n What version of the product are you using? On what operating system? \nRevision 1975. Ubuntu 12.04.\r\n\r\n Please provide any additional information below. \nSee [URL]\n\n[Context/Logs]:\n- thanks, fix on the way..\n- This issue was closed by revision r1978."}
{"project_id": "Closure", "bug_id": "208", "source_type": "google", "llm_input_text": "[Title]: ProcessCommonJSModules module$exports failures when checkTypes enabled\n[Symptom]:\nIf you define a module (echo.js) as:\r\ndefine(function() { return {\r\n  echo: function(val) {\r\n    window.console.log(val);\r\n  }\r\n}});\r\n\r\nand an entry point* that does not define any new modules as:\r\nvar echo = require('echo');\r\necho.echo('hello world');\r\n\r\nand compile with:\r\njava -jar build/compiler.jar --formatting=PRETTY_PRINT --jscomp_error=checkTypes --compilation_level=SIMPLE_OPTIMIZATIONS --transform_amd_modules --process_common_js_modules --js=echo.js --js=echo-main.js --common_js_entry_module=echo-main.js\r\n\r\nYou get the error:\r\necho-main.js:1: ERROR - Property module$exports never defined on module$echo_main\r\n\r\nwhich is probably happening because of ProcessCommonJSModules#emitOptionalModuleExportsOverride is testing a property that doesn't exist. I can try to cook up a patch but it would probably fall back to using goog.isDef and there's probably a cleaner way :)\r\n\r\n\r\n\r\n\r\n*p.s what is the intended definition of entry points that do not define new modules. the following leaves a call to a require function:\r\nrequire(['echo'], function(echo) {\r\n  echo.echo('hello world');\r\n});\n\n[Context/Logs]:\n- This issue was closed by revision r1982."}
{"project_id": "Closure", "bug_id": "209", "source_type": "google", "llm_input_text": "[Title]: anonymous object type inference behavior is different when calling constructors\n[Symptom]:\nThe following compiles fine with:\r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --js ~/Desktop/reverse.js\r\n\r\nreverse.js:\r\n/**\r\n * @param {{prop1: string, prop2: (number|undefined)}} parry\r\n */\r\nfunction callz(parry) {\r\n  if (parry.prop2 &amp;&amp; parry.prop2 &lt; 5) alert('alright!');\r\n  alert(parry.prop1);\r\n}\r\n\r\ncallz({prop1: 'hi'});\r\n\r\n\r\n\r\nHowever, the following does not:\r\n/**\r\n * @param {{prop1: string, prop2: (number|undefined)}} parry\r\n * @constructor\r\n */\r\nfunction callz(parry) {\r\n  if (parry.prop2 &amp;&amp; parry.prop2 &lt; 5) alert('alright!');\r\n  alert(parry.prop1);\r\n}\r\n\r\nnew callz({prop1: 'hi'});\r\n\r\n\r\n/Users/dolapo/Desktop/reverse.js:10: ERROR - actual parameter 1 of callz does not match formal parameter\r\nfound   : {prop1: string}\r\nrequired: {prop1: string, prop2: (number|undefined)}\r\nnew callz({prop1: 'hi'});\r\n\r\n\r\n\r\nThanks!\n\n[Context/Logs]:\n- This issue was closed by revision r1983."}
{"project_id": "Closure", "bug_id": "210", "source_type": "google", "llm_input_text": "[Title]: Properties defined on any record type applying to unrelated record types\n[Symptom]:\nConsider the following code:\r\n\r\n/** @typedef {{name: string, id: number}} */\r\nvar RecordType1;\r\n\r\n/**\r\n* @param {RecordType1} rec\r\n*/\r\nvar func = function(rec) {\r\n  alert(rec.name2);\r\n};\r\nfunc({name: 'jim', id: 0});\r\n\r\nCompiled with: \r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --js ~/Desktop/test.js\r\n\r\nProperly errors:\r\n/Users/dolapo/Desktop/test.js:9: ERROR - Property name2 never defined on rec\r\n  alert(rec.name2);\r\n\r\n\r\nHowever, add another recordtype with name2 defined:\r\n\r\n/** @typedef {{name: string, id: number}} */\r\nvar RecordType1;\r\n\r\n/** @typedef {{name2: string}} */\r\nvar RecordType2;\r\n\r\n/**\r\n* @param {RecordType1} rec\r\n*/\r\nvar func = function(rec) {\r\n  alert(rec.name2);\r\n};\r\nfunc({name: 'jim', id: 0});\r\n\r\n\r\n\r\nand this compiles with no errors.\n\n[Context/Logs]:\n- This issue was closed by revision r1984."}
{"project_id": "Closure", "bug_id": "211", "source_type": "google", "llm_input_text": "[Title]: goog.scope doesn't properly check declared functions\n[Symptom]:\nThe following code is a compiler error:\r\n\r\ngoog.scope(function() {\r\n  var x = function(){};\r\n});\r\n\r\nbut the following code is not:\r\n\r\ngoog.scope(function() {\r\n  function x() {}\r\n});\r\n\r\nBoth code snippets should be a compiler error, because they prevent the goog.scope from being unboxed.\n\n[Context/Logs]:\n- This issue was closed by revision r1993."}
{"project_id": "Closure", "bug_id": "212", "source_type": "google", "llm_input_text": "[Title]: tryFoldArrayAccess does not check for side effects\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following program with simple or advanced optimization:\r\nconsole.log([console.log('hello, '), 'world!'][1]);\r\n\r\n What is the expected output? What do you see instead? \nThe expected output would preserve side effects. It would not transform the program at all or transform it into:\r\n\r\nconsole.log((console.log(&quot;hello&quot;), &quot;world!&quot;));\r\n\r\nInstead, the program is transformed into:\r\n\r\nconsole.log(&quot;world!&quot;);\r\n\r\n What version of the product are you using? On what operating system? \nRevision 2022. Ubuntu 12.04.\r\n\r\n Please provide any additional information below. \ntryFoldArrayAccess in com.google.javascript.jscomp.PeepholeFoldConstants should check whether   every array element that is not going to be preserved has no side effects.\n\n[Context/Logs]:\n- This issue was closed by revision r2030."}
{"project_id": "Closure", "bug_id": "213", "source_type": "google", "llm_input_text": "[Title]: Classify non-rightmost expressions as problematic\n[Symptom]:\nPurpose of code changes: \nWhen it comes to an expression involving the comma operator, only the\r\nfirst element of such a sequence is checked for being free of side\r\neffects. If the element is free of side effects, it is classified as\r\nproblematic and a warning is issued.\r\n\r\nAs other non-rightmost elements are not checked for being free of side\r\neffects and therefore cannot be classified as problematic, this leads\r\nto unexpected behavior:\r\n\r\n1. foo((1, 2, 42)) is transformed into foo((1, 3)) and a warning is\r\nissued only with regard to the first element.\r\n2. foo((bar(), 2, 42)) is transformed into foo((bar(), 3)) and no\r\nwarning is issued.\r\n3. foo(((1, 2, 3), (4, 5, 42))) is transformed into foo((1, 4, 42)) and\r\nwarnings are issued with regard to the first elements of inner\r\nsequences only.\n\n[Context/Logs]:\n- This issue was closed by revision r2054.\n- This issue was closed by revision r2056.\n- This issue was closed by revision r2058."}
{"project_id": "Closure", "bug_id": "214", "source_type": "google", "llm_input_text": "[Title]: Classify non-rightmost expressions as problematic\n[Symptom]:\nPurpose of code changes: \nWhen it comes to an expression involving the comma operator, only the\r\nfirst element of such a sequence is checked for being free of side\r\neffects. If the element is free of side effects, it is classified as\r\nproblematic and a warning is issued.\r\n\r\nAs other non-rightmost elements are not checked for being free of side\r\neffects and therefore cannot be classified as problematic, this leads\r\nto unexpected behavior:\r\n\r\n1. foo((1, 2, 42)) is transformed into foo((1, 3)) and a warning is\r\nissued only with regard to the first element.\r\n2. foo((bar(), 2, 42)) is transformed into foo((bar(), 3)) and no\r\nwarning is issued.\r\n3. foo(((1, 2, 3), (4, 5, 42))) is transformed into foo((1, 4, 42)) and\r\nwarnings are issued with regard to the first elements of inner\r\nsequences only.\n\n[Context/Logs]:\n- This issue was closed by revision r2054.\n- This issue was closed by revision r2056.\n- This issue was closed by revision r2058."}
{"project_id": "Closure", "bug_id": "215", "source_type": "google", "llm_input_text": "[Title]: Classify non-rightmost expressions as problematic\n[Symptom]:\nPurpose of code changes: \nWhen it comes to an expression involving the comma operator, only the\r\nfirst element of such a sequence is checked for being free of side\r\neffects. If the element is free of side effects, it is classified as\r\nproblematic and a warning is issued.\r\n\r\nAs other non-rightmost elements are not checked for being free of side\r\neffects and therefore cannot be classified as problematic, this leads\r\nto unexpected behavior:\r\n\r\n1. foo((1, 2, 42)) is transformed into foo((1, 3)) and a warning is\r\nissued only with regard to the first element.\r\n2. foo((bar(), 2, 42)) is transformed into foo((bar(), 3)) and no\r\nwarning is issued.\r\n3. foo(((1, 2, 3), (4, 5, 42))) is transformed into foo((1, 4, 42)) and\r\nwarnings are issued with regard to the first elements of inner\r\nsequences only.\n\n[Context/Logs]:\n- This issue was closed by revision r2054.\n- This issue was closed by revision r2056.\n- This issue was closed by revision r2058."}
{"project_id": "Closure", "bug_id": "216", "source_type": "google", "llm_input_text": "[Title]: String conversion optimization is incorrect\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nvar f = {\r\n  valueOf: function() { return undefined; }\r\n}\r\nString(f)\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected output: &quot;[object Object]&quot;\r\nActual output: &quot;undefined&quot;\r\n\r\n What version of the product are you using? On what operating system? \n\r\nAll versions (http://closure-compiler.appspot.com/ as well).\r\n\r\n Please provide any additional information below. \n\r\nThe compiler optimizes String(x) calls by replacing them with x + ''. This is correct in most cases, but incorrect in corner cases like the one mentioned above.\n\n[Context/Logs]:\n- The code sample violates the assumption \"Standard methods on Object,\r\nArray, String, Number and Boolean have not be redefined in a way that\r\nbreaks the original contract\" [1].\r\n\r\n[1] [URL]\n- It's not actually breaking the valueOf contract: it takes no arguments, returns a string and has no side effects. It just looks like that the assumption the compiler currently makes:\r\n\r\nString(Foo) = Foo + ''\r\n\r\nisn't always valid. The question remains, how high of a priority is such a case?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r2061.\n- This issue was closed by revision r2061."}
{"project_id": "Closure", "bug_id": "217", "source_type": "google", "llm_input_text": "[Title]: Type refining of 'this' raises IllegalArgumentException\n[Symptom]:\nWhat steps will reproduce the problem? \n1. goog.isFunction(this) or goog.isObject(this) or goog.isNull(this) etc.\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected: normal compilation, checking the type of this\r\nActual output:\r\n\r\n23: java.lang.IllegalArgumentException: Node cannot be refined. \r\nTHIS 1 [source_file: Input_0] : global this\r\n\r\n\tat com.google.javascript.jscomp.type.ChainableReverseAbstractInterpreter.declareNameInScope(ChainableReverseAbstractInterpreter.java:172)\r\n\tat com.google.javascript.jscomp.type.ClosureReverseAbstractInterpreter.restrictParameter(ClosureReverseAbstractInterpreter.java:240)\r\n\tat com.google.javascript.jscomp.type.ClosureReverseAbstractInterpreter.getPreciserScopeKnowingConditionOutcome(ClosureReverseAbstractInterpreter.java:221)\r\n\tat com.google.javascript.jscomp.TypeInference.branchedFlowThrough(TypeInference.java:239)\r\n\tat com.google.javascript.jscomp.TypeInference.branchedFlowThrough(TypeInference.java:59)\r\n\tat com.google.javascript.jscomp.DataFlowAnalysis$BranchedForwardDataFlowAnalysis.flow(DataFlowAnalysis.java:448)\r\n\tat com.google.javascript.jscomp.DataFlowAnalysis.analyze(DataFlowAnalysis.java:213)\r\n\tat com.google.javascript.jscomp.DataFlowAnalysis.analyze(DataFlowAnalysis.java:181)\r\n\tat com.google.javascript.jscomp.TypeInferencePass.inferTypes(TypeInferencePass.java:90)\r\n\tat com.google.javascript.jscomp.TypeInferencePass$TypeInferringCallback.enterScope(TypeInferencePass.java:106)\r\n\tat com.google.javascript.jscomp.NodeTraversal.pushScope(NodeTraversal.java:581)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseWithScope(NodeTraversal.java:345)\r\n\tat com.google.javascript.jscomp.TypeInferencePass.inferTypes(TypeInferencePass.java:81)\r\n\tat com.google.javascript.jscomp.TypeInferencePass.process(TypeInferencePass.java:74)\r\n\tat com.google.javascript.jscomp.DefaultPassConfig$24$1.process(DefaultPassConfig.java:1119)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$PassFactoryDelegate.processInternal(Phase\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r2072."}
{"project_id": "Closure", "bug_id": "218", "source_type": "google", "llm_input_text": "[Title]: Dependency sorting with closurePass set to false no longer works.\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Instantiate new instance of Compiler\r\n\r\n2. Set closurePass to false to prevent goog.require/goog.provide removal.\r\ncompilerOptions.setClosurePass(false);\r\n\r\n3. Turn dependency sorting on.\r\nDependencyOptions dependencyOptions = new DependencyOptions();\r\ndependencyOptions.setDependencySorting(true);\r\n\r\n4. Compile js code\r\n\r\n\r\nWhat is the expected output? \r\nDependent files should be sorted and concatenated in their dependent order.\r\n\r\nWhat do you see instead?\r\nDependent files are not sorted.\r\n\r\n What version of the product are you using? On what operating system? \n&gt; r1824\r\nmac OS 10.7\r\n\r\n\r\n Please provide any additional information below. \nThis worked in the r1810 release. However, it looks like this was changed in r1824. The compiler now expects closurePass to be true for dependency sorting to work.\r\n[URL]\r\n\r\nWhat we are looking for is a way to sort dependencies and concatenate all files in their dependent order without removing the goog.require/goog.provide js calls. Turning closurePass to true causes the goog calls to be replaced. We use this methodology in local development to test our JS code.\r\n\r\nThanks!\n\n[Context/Logs]:\n- seems reasonable to me.\n- This issue was closed by revision r2073."}
{"project_id": "Closure", "bug_id": "219", "source_type": "google", "llm_input_text": "[Title]: @const dumps type cast information\n[Symptom]:\nThe following code compiles fine:\r\n\r\n/**\r\n* Class defining an interface with two numbers.\r\n* @interface\r\n*/\r\nfunction TwoNumbers() {}\r\n\r\n/** @type number */\r\nTwoNumbers.prototype.first;\r\n\r\n/** @type number */\r\nTwoNumbers.prototype.second;\r\n\r\nvar SOME_DEFAULT =\r\n  /** @type {TwoNumbers} */ ({first: 1, second: 2});\r\n\r\n/**\r\n * Class with a two number member.\r\n * @constructor\r\n */\r\nfunction HasTwoNumbers() {\r\n  /** @type {TwoNumbers} */\r\n  this.twoNumbers = this.getTwoNumbers();\r\n}\r\n\r\n/**\r\n * Get the default two numbers.\r\n * @return {TwoNumbers}\r\n */\r\nHasTwoNumbers.prototype.getTwoNumbers = function() {\r\n  return SOME_DEFAULT;\r\n};\r\n\r\nNow realizing that SOME_DEFAULTS is actually a preset constant which should not change I would like to say for that line (just adding an @const)\r\n\r\n/** @const */ var SOME_DEFAULT =\r\n  /** @type {TwoNumbers} */ ({first: 1, second: 2});\r\n\r\nHowever that starts throwing warnings as adding the @const makes the compiler dump the type. (Does the value get inlined without the typecast?)\r\n\r\nExpected:\r\nCompiles fine.\r\n\r\nError can be reproduced on:\r\n[URL]\r\ncopy-past the attached file in there, it throws a warning and does not compile.\n\n[Context/Logs]:\n- 1) I assume you are using ADVANCED mode\r\n2) It does compile, there is just nothing left after dead code removal.\r\n3) It produces two warnings (not errors):\r\n\r\nJSC_TYPE_MISMATCH: initializing variable\r\nfound   : (TwoNumbers|null)\r\nrequired: {first: number, second: number} at line 15 character 27\r\n/** @type {TwoNumbers} */ ({first: 1, second: 2});\r\n                           ^\r\nJSC_TYPE_MISMATCH: inconsistent return type\r\nfound   : {first: number, second: number}\r\nrequired: (TwoNumbers|null) at line 31 character 7\r\nreturn SOME_DEFAULT;\r\n\r\nI assume it is the last that you are asking about?\n- 1) Yes advance mode\r\n2 & 3) that is correct, however our project compiles in strict mode (this is just a simplified version) so for our project this will stop compilation.\r\n\r\nBoth of them right? One is from A -> B and the other form B -> A while it is an A used as A, so it should be all fine, like it is without the @const\r\n\r\nOr am I missing something?\n- This issue was closed by revision r2076."}
{"project_id": "Closure", "bug_id": "220", "source_type": "google", "llm_input_text": "[Title]: JSCompiler does not recursively resolve typedefs\n[Symptom]:\ngoog.provide('a.b.c');\r\n\r\ngoog.scope(function() {\r\nvar b = a.b;\r\nvar c = b.c;\r\n\r\n/** @typedef {string} */\r\nc.MyType;\r\n\r\n/** @param {c.MyType} x The variable. */\r\nc.myFunc = function(x) {};\r\n\r\n});\r\n\r\nresults in a compiler error.\r\n\r\ngiven that JSCompiler *does* recursively resolve other names, this appears to be a bug rather than an intended limitation.\n\n[Context/Logs]:\n- I'm fairly certain that typedefs have to be in the global scope. Although I'm not sure that has been documented anywhere or is the intent.\r\n\r\nIf you remove the goog.scope wrapper, your code compiles correctly.\n- no, typedefs don't have to be in the global scope. goog.scope must enclose everything in the file except goog.provide/goog.require\n- ... [Middle Discussions Snipped for Brevity] ...\n- for the record, the error message is:\r\nJSC_TYPE_PARSE_ERROR: Bad type annotation. Unknown type c.MyType at line 10 character 12\r\n/** @param {c.MyType} x The variable. */\n- This issue was closed by revision r2077."}
{"project_id": "Closure", "bug_id": "221", "source_type": "google", "llm_input_text": "[Title]: Switched order of \"delete key\" and \"key in\" statements changes semantic\n[Symptom]:\n// Input:\r\n\r\nvar customData = { key: 'value' };\r\n\r\nfunction testRemoveKey( key ) {\r\n\tvar dataSlot = customData,\r\n\t\tretval = dataSlot &amp;&amp; dataSlot[ key ],\r\n\t\thadKey = dataSlot &amp;&amp; ( key in dataSlot );\r\n\r\n\tif ( dataSlot )\r\n\t\tdelete dataSlot[ key ];\r\n\r\n\treturn hadKey ? retval : null;\r\n};\r\n\r\nconsole.log( testRemoveKey( 'key' ) ); // 'value'\r\nconsole.log( 'key' in customData ); // false\r\n\r\n\r\n// Compiled version:\r\n\r\nvar customData={key:&quot;value&quot;};function testRemoveKey(b){var a=customData,c=a&amp;&amp;a[b];a&amp;&amp;delete a[b];return a&amp;&amp;b in a?c:null}console.log(testRemoveKey(&quot;key&quot;));console.log(&quot;key&quot;in customData);\r\n\r\n// null\r\n// false\r\n\r\n\r\n&quot;b in a&quot; is executed after &quot;delete a[b]&quot; what obviously doesn't make sense in this case.\r\n\r\n\r\nReproducible on: [URL] and in &quot;Version: 20120430 (revision 1918) Built on: 2012/04/30 18:02&quot;\n\n[Context/Logs]:\n- john figured this out first.\n- This issue was closed by revision r2079.\n- Thanks for quick patch :)."}
{"project_id": "Closure", "bug_id": "222", "source_type": "google", "llm_input_text": "[Title]: closure-compiler breaks js code\n[Symptom]:\nI have js function:\r\n{{{\r\nfunction __Z25ShowSelectStationIfNeeded16CommandContainer8TileArea($cmd, $ta) {\r\n    var tempParam$s2;\r\n    var __stackBase__ = STACKTOP;\r\n    STACKTOP += 8;\r\n    var tempParam = $cmd, tempParam$s2 = tempParam &gt;&gt; 2;\r\n    $cmd = STACKTOP;\r\n    STACKTOP += 148;\r\n    for (var $$src = tempParam$s2, $$dest = $cmd &gt;&gt; 2, $$stop = $$src + 37; $$src &lt; $$stop; $$src++, $$dest++) {\r\n\tHEAP32[$$dest] = HEAP32[$$src];\r\n    }\r\n    var tempParam = $ta, tempParam$s2 = tempParam &gt;&gt; 2;\r\n    $ta = STACKTOP;\r\n    STACKTOP += 8;\r\n    HEAP32[$ta &gt;&gt; 2] = HEAP32[tempParam$s2];\r\n    HEAP32[$ta + 4 &gt;&gt; 2] = HEAP32[tempParam$s2 + 1];\r\n    var $1 = __stackBase__;\r\n    var $2 = $ta;\r\n    var $3 = $1;\r\n    var $4$0 = HEAP32[$2 &gt;&gt; 2];\r\n    var $4$1 = HEAP32[$2 + 4 &gt;&gt; 2];\r\n    HEAP32[$3 &gt;&gt; 2] = $4$0;\r\n    HEAP32[$3 + 4 &gt;&gt; 2] = $4$1;\r\n//    __Z29ShowSelectBaseStationIfNeededI7StationEv16CommandContainer8TileArea($cmd, $1);\r\n    STACKTOP = __stackBase__;\r\n    return;\r\n    return;\r\n}\r\n}}}\r\nAnd after closure it is look like:\r\n{{{\r\nfunction __Z25ShowSelectStationIfNeeded16CommandContainer8TileArea(d, b) {\r\n  var a, e = STACKTOP, d = STACKTOP += 8;\r\n  STACKTOP += 148;\r\n  a = d &gt;&gt; 2;\r\n  for(var c = d &gt;&gt; 2, f = a + 37;a &lt; f;a++, c++) {\r\n    HEAP32[c] = HEAP32[a]\r\n  }\r\n  a = b &gt;&gt; 2;\r\n  b = STACKTOP;\r\n  STACKTOP += 8;\r\n  HEAP32[b &gt;&gt; 2] = HEAP32[a];\r\n  HEAP32[b + 4 &gt;&gt; 2] = HEAP32[a + 1];\r\n  a = b;\r\n  c = HEAP32[a + 4 &gt;&gt; 2];\r\n  HEAP32[e &gt;&gt; 2] = HEAP32[a &gt;&gt; 2];\r\n  HEAP32[e + 4 &gt;&gt; 2] = c;\r\n  STACKTOP = e\r\n}\r\n}}}\r\n\r\nLook at $$src variable in source js. It initial value is $cmd &gt;&gt; 2. But after closure it initial value is (STACKTOP + 8) &gt;&gt; 2. Looks like closure is not respect order of assignment variables.\n\n[Context/Logs]:\n- I run closure with command:\r\njava -Xmx1024m -jar compiler.jar --compilation_level SIMPLE_OPTIMIZATIONS --formatting PRETTY_PRINT --js test.js --js_output_file test-c.js\n- thanks for the report. I can repro as well.\n- This issue was closed by revision r2093."}
{"project_id": "Closure", "bug_id": "223", "source_type": "google", "llm_input_text": "[Title]: bogus 'missing return' warning\n[Symptom]:\nThe following sample code compiles with &quot;Missing return statement. Function expected to return boolean.&quot; warning:\r\n\r\n/**\r\n * @return {boolean}\r\n */\r\nfunction fb(a)\r\n{\r\n    try\r\n    {\r\n        alert(a);      // Some method, which can throw\r\n        if (a &gt; 0)\r\n            return false;\r\n    }\r\n    finally\r\n    {\r\n        a = 5;\r\n    }\r\n    \r\n    return true;\r\n}\n\n[Context/Logs]:\n- Could the control flow graph be incorrect? \r\n\r\nOr the missing return check is not looking at the graph correctly\n- It's really subtle. I sent you a CL for it. Basically, there are 2 UNCOND edges flowing out of the finally node, and there are a couple different (but reasonable) ways to interpret this.\n- This issue was closed by revision r2101."}
{"project_id": "Closure", "bug_id": "224", "source_type": "google", "llm_input_text": "[Title]: anonymous object type inference inconsistency when used in union\n[Symptom]:\nCode:\r\n/** @param {{prop: string, prop2: (string|undefined)}} record */\r\nvar func = function(record) {\r\n  window.console.log(record.prop);\r\n}\r\n\r\n/** @param {{prop: string, prop2: (string|undefined)}|string} record */\r\nvar func2 = function(record) {\r\n  if (typeof record == 'string') {\r\n    window.console.log(record);\r\n  } else {\r\n    window.console.log(record.prop);\r\n  }\r\n}\r\n\r\nfunc({prop: 'a'});\r\nfunc2({prop: 'a'});\r\n\r\n\r\n\r\n\r\nerrors with:\r\nERROR - actual parameter 1 of func2 does not match formal parameter\r\nfound   : {prop: string}\r\nrequired: (string|{prop: string, prop2: (string|undefined)})\r\nfunc2({prop: 'a'});\r\n\r\n\r\nthe type of the record input to func and func2 are identical but the parameters to func2 allow some other type.\n\n[Context/Logs]:\n- This issue was closed by revision r2117."}
{"project_id": "Closure", "bug_id": "225", "source_type": "google", "llm_input_text": "[Title]: true/false are not always replaced for !0/!1\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nfunction some_function() {\r\n  var fn1;\r\n  var fn2;\r\n\r\n  if (any_expression) {\r\n    fn2 = external_ref;\r\n    fn1 = function (content) {\r\n      return fn2();\r\n    }\r\n  }\r\n\r\n  return {\r\n    method1: function () {\r\n      if (fn1) fn1();\r\n      return true;\r\n    },\r\n    method2: function () {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n What is the expected output? What do you see instead? \n\r\nWe expect that true/false will be replaced for !0/!1, but it doesn't happend.\r\n\r\nfunction some_function() {\r\n  var a, b;\r\n  any_expression &amp;&amp; (b = external_ref, a = function () {\r\n    return b()\r\n  });\r\n  return {\r\n    method1: function () {\r\n      a &amp;&amp; a();\r\n      return true\r\n    },\r\n    method2: function () {\r\n      return false\r\n    }\r\n  }\r\n};\r\n\r\n What version of the product are you using? On what operating system? \n\r\nThis is output for latest official build.\r\nI also got the same output for 20120430, 20120305. But 20111117 is OK.\r\n\r\n Please provide any additional information below. \n\r\nHere is just one of example. I found too many non-replaced true/false in compiler output. Replacement non-replaced true/false to !1/!0 in conpiler output saves 1-2 kb for 850 kb js file.\n\n[Context/Logs]:\n- The peephole optimizations are being short circuited, I'm pretty sure I caused this problem so I'll look into it.\n- This issue was closed by revision r2119."}
{"project_id": "Closure", "bug_id": "226", "source_type": "google", "llm_input_text": "[Title]: invalid property not erroring in for loop in prototype function\n[Symptom]:\nI think this example can be simplified to use a typedef instead of externs, but using an extern for the repro case.\r\n\r\nCompile the attached with:\r\njava -jar build/compiler.jar --formatting=PRETTY_PRINT --jscomp_error=checkTypes --jscomp_error=externsValidation --compilation_level=SIMPLE_OPTIMIZATIONS --externs=inloop-externs.js inloop.js (pasted below for completeness)\r\n\r\nI would expect an error on the line in the for loop in the doIt function, but this compiles just fine. The commented out line above it properly errors, and if the same code is outside a prototype function, it errors. It does not error within the prototype function.\r\n\r\nThanks\r\n\r\n\r\n/**\r\n * @param {ns.Thing} thing\r\n * @constructor\r\n */\r\nns.MyClass = function(thing) {\r\n  /** @type {ns.Thing} */ this.thing_ = thing;\r\n};\r\n\r\nns.MyClass.prototype.doIt = function() {\r\n  var subthing = this.thing_.subthing;\r\n  // ERRORS:\r\n  // window.console.log(subthing.noprop);\r\n\r\n  // NO ERROR:\r\n  for (var i = 0; i &lt; subthing.noprop; i++) {\r\n    window.console.log(i);\r\n  }\r\n};\r\n\r\nvar thing = /** @type {ns.Thing} */({subthing: {prop: 3}});\r\n\r\n/*\r\n  ERRORS:\r\n  var subthing = thing.subthing;\r\n  for (var i = 0; i &lt; subthing.noprop; i++) {\r\n    window.console.log(i);\r\n  } */\r\n\r\nvar c = new ns.MyClass(thing);\r\nco.doIt();\n\n[Context/Logs]:\n- This issue was closed by revision r2121."}
{"project_id": "Closure", "bug_id": "227", "source_type": "google", "llm_input_text": "[Title]: Wrong argument count error not reported on this aliasing (on function with @this annotation)\n[Symptom]:\nThe following code (attached as test2-1.js) when compiled with:\r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --jscomp_error=uselessCode --jscomp_off=globalThis --js ~/Desktop/test2.js \r\n\r\ncorrectly fails with:\r\n\r\n/Users/dolapo/Desktop/test2.js:28: ERROR - Function Person.prototype.getName: called with 1 argument(s). Function requires at least 0 argument(s) and no more than 0 argument(s).\r\n\r\nHowever, if the say function is modified such that this is aliased and the function is called within a setTimeout (test2-2.js), the error is not caught\r\n\r\n\r\n\r\n\r\n\r\ntest2-1.js:\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/** @constructor */\r\nvar Person = function(name){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /** @this {Person} */\r\n  initialize: function(name) {\r\n    this.name = name;\r\n  },\r\n\r\n  /** @this {Person} */\r\n  getName: function() { return this.name; },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this {Person}\r\n   */\r\n  say: function(message) {\r\n    window.console.log(this.getName(1) + ' says: ' + message);\r\n  }\r\n});\r\n\r\n\r\nvar joe = new Person('joe');\r\njoe.say('hi');\r\nvar jane = new Person('jane');\r\njane.say('hello');\r\n\r\n\r\n\r\ntest2-2.js:\r\n\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/** @constructor */\r\nvar Person = function(name){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /** @this {Person} */\r\n  initialize: function(name) {\r\n    this.name = name;\r\n  },\r\n\r\n  /** @this {Person} */\r\n  getName: function() { return this.name; },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r2131.\n- This issue was closed by revision r2132.\n- This issue was closed by revision r2137."}
{"project_id": "Closure", "bug_id": "228", "source_type": "google", "llm_input_text": "[Title]: Wrong argument count error not reported on this aliasing (on function with @this annotation)\n[Symptom]:\nThe following code (attached as test2-1.js) when compiled with:\r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --jscomp_error=uselessCode --jscomp_off=globalThis --js ~/Desktop/test2.js \r\n\r\ncorrectly fails with:\r\n\r\n/Users/dolapo/Desktop/test2.js:28: ERROR - Function Person.prototype.getName: called with 1 argument(s). Function requires at least 0 argument(s) and no more than 0 argument(s).\r\n\r\nHowever, if the say function is modified such that this is aliased and the function is called within a setTimeout (test2-2.js), the error is not caught\r\n\r\n\r\n\r\n\r\n\r\ntest2-1.js:\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/** @constructor */\r\nvar Person = function(name){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /** @this {Person} */\r\n  initialize: function(name) {\r\n    this.name = name;\r\n  },\r\n\r\n  /** @this {Person} */\r\n  getName: function() { return this.name; },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this {Person}\r\n   */\r\n  say: function(message) {\r\n    window.console.log(this.getName(1) + ' says: ' + message);\r\n  }\r\n});\r\n\r\n\r\nvar joe = new Person('joe');\r\njoe.say('hi');\r\nvar jane = new Person('jane');\r\njane.say('hello');\r\n\r\n\r\n\r\ntest2-2.js:\r\n\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/** @constructor */\r\nvar Person = function(name){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /** @this {Person} */\r\n  initialize: function(name) {\r\n    this.name = name;\r\n  },\r\n\r\n  /** @this {Person} */\r\n  getName: function() { return this.name; },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r2131.\n- This issue was closed by revision r2132.\n- This issue was closed by revision r2137."}
{"project_id": "Closure", "bug_id": "229", "source_type": "google", "llm_input_text": "[Title]: Try/catch blocks incorporate code not inside original blocks\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nStarting with this code:\r\n\r\n-----\r\nfunction a() {\r\n var x = '1';\r\n try {\r\n  x += somefunction();\r\n } catch(e) {\r\n }\r\n x += &quot;2&quot;;\r\n try {\r\n  x += somefunction();\r\n } catch(e) {\r\n }\r\n document.write(x);\r\n}\r\n\r\na();\r\na();\r\n-----\r\n\r\nIt gets compiled to:\r\n\r\n-----\r\nfunction b() {\r\n  var a;\r\n  try {\r\n    a = &quot;1&quot; + somefunction()\r\n  }catch(c) {\r\n  }\r\n  try {\r\n    a = a + &quot;2&quot; + somefunction()\r\n  }catch(d) {\r\n  }\r\n  document.write(a)\r\n}\r\nb();\r\nb();\r\n-----\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe problem is that it's including the constant &quot;1&quot; and &quot;2&quot; inside the try block when the shouldn't be. When executed uncompiled, the script prints &quot;1212&quot;. When compiled, the script prints &quot;undefinedundefined&quot;.\r\n\r\nThis behavior doesn't happen if the entire function gets inlined, or if the code between the two try blocks is sufficiently complex.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 20120430 (revision 1918)\r\nBuilt on: 2012/04/30 18:02\r\njava version &quot;1.6.0_33&quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode)\n\n[Context/Logs]:\n- This issue was closed by revision r2136."}
{"project_id": "Closure", "bug_id": "230", "source_type": "google", "llm_input_text": "[Title]: Wrong argument count error not reported on this aliasing (on function with @this annotation)\n[Symptom]:\nThe following code (attached as test2-1.js) when compiled with:\r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --jscomp_error=uselessCode --jscomp_off=globalThis --js ~/Desktop/test2.js \r\n\r\ncorrectly fails with:\r\n\r\n/Users/dolapo/Desktop/test2.js:28: ERROR - Function Person.prototype.getName: called with 1 argument(s). Function requires at least 0 argument(s) and no more than 0 argument(s).\r\n\r\nHowever, if the say function is modified such that this is aliased and the function is called within a setTimeout (test2-2.js), the error is not caught\r\n\r\n\r\n\r\n\r\n\r\ntest2-1.js:\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/** @constructor */\r\nvar Person = function(name){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /** @this {Person} */\r\n  initialize: function(name) {\r\n    this.name = name;\r\n  },\r\n\r\n  /** @this {Person} */\r\n  getName: function() { return this.name; },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this {Person}\r\n   */\r\n  say: function(message) {\r\n    window.console.log(this.getName(1) + ' says: ' + message);\r\n  }\r\n});\r\n\r\n\r\nvar joe = new Person('joe');\r\njoe.say('hi');\r\nvar jane = new Person('jane');\r\njane.say('hello');\r\n\r\n\r\n\r\ntest2-2.js:\r\n\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/** @constructor */\r\nvar Person = function(name){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /** @this {Person} */\r\n  initialize: function(name) {\r\n    this.name = name;\r\n  },\r\n\r\n  /** @this {Person} */\r\n  getName: function() { return this.name; },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision r2131.\n- This issue was closed by revision r2132.\n- This issue was closed by revision r2137."}
{"project_id": "Closure", "bug_id": "231", "source_type": "google", "llm_input_text": "[Title]: Record type invalid property not reported on function with @this annotation\n[Symptom]:\nCode:\r\n\r\nvar makeClass = function(protoMethods) {\r\n  var clazz = function() {\r\n    this.initialize.apply(this, arguments);\r\n  }\r\n  for (var i in protoMethods) {\r\n    clazz.prototype[i] = protoMethods[i];\r\n  }\r\n\r\n  return clazz;\r\n}\r\n\r\n/**\r\n * @constructor\r\n * @param {{name: string, height: number}} options\r\n */\r\nvar Person = function(options){};\r\nPerson = makeClass(/** @lends Person.prototype */ {\r\n  /**\r\n   * @this {Person}\r\n   * @param {{name: string, height: number}} options\r\n   */\r\n  initialize: function(options) {\r\n    /** @type {string} */ this.name_ = options.thisPropDoesNotExist;\r\n  },\r\n\r\n  /**\r\n   * @param {string} message\r\n   * @this {Person}\r\n   */\r\n  say: function(message) {\r\n    window.console.log(this.name_ + ' says: ' + message);\r\n  }\r\n});\r\n\r\n\r\nvar joe = new Person({name: 'joe', height: 300});\r\njoe.say('hi');\r\n\r\n\r\ncompiled with:\r\njava -jar build/compiler.jar --formatting=PRETTY_PRINT --jscomp_error=checkTypes --jscomp_error=externsValidation --compilation_level=SIMPLE_OPTIMIZATIONS repro.js\r\n\r\n\r\nI would expect an error on this line:\r\n    /** @type {string} */ this.name_ = options.thisPropDoesNotExist;\r\n\r\nwhich works in other contexts.\r\n\r\nThanks!\n\n[Context/Logs]:\n- Here's a much simpler repro case:\r\n\r\n/**\r\n * @constructor\r\n */\r\nvar Person = function(){};\r\nPerson.prototype.bar = function(options) {\r\n  this.x = options.thisPropDoesNotExist;\r\n};\r\n\r\nsomething very weird is going on, because making very small changes make the warning appear (i.e., changing \"options.thisPropDoesNotExist\" to \"+ options.thisPropDoesNotExist\"\n- oh, i see the problem. by some weird coincidence, dimitris pointed this out to me yesterday.\n- This issue was closed by revision r2185."}
{"project_id": "Closure", "bug_id": "232", "source_type": "google", "llm_input_text": "[Title]: Wrong code generated if mixing types in ternary operator\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Google Closure Compiler to compile this code:\r\n\r\n    var a =(Math.random()&gt;0.5? '1' : 2 ) + 3 + 4;\r\n\r\nYou can either simple or advanced. It doesn't matter\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nI'm seeing this as a result:\r\n    var a = (0.5 &lt; Math.random() ? 1 : 2) + 7;\r\n\r\nThis is obviously wrong as the '1' string literal got converted to a number, and 3+4 got combined into 7 while that's not ok as '1' + 3 + 4 = '134', not '17'.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n\r\n Please provide any additional information below. \n\r\nSeems like this issue happens only when you are mixing types together. If both 1 and 2 are string literals or if they are both numbers it won't happen. I was also a little surprised to see this happening in simple mode as it actually breaks the behavior.\n\n[Context/Logs]:\n- This issue was closed by revision r2206."}
{"project_id": "Closure", "bug_id": "233", "source_type": "google", "llm_input_text": "[Title]: Compiler fails to find amd module in a subdirectory\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Create 1st AMD module in lib/Foo.js\r\n2. Create 2nd AMD module in Bar.js depending on lib/Foo.js\r\n3. Try to compile both files with Bar.js as main module\r\n\r\n What is the expected output? What do you see instead? \n\r\njava -jar compiler.jar --transform_amd_modules --process_common_js_modules --common_js\r\n_entry_module=Bar.js --compilation_level=ADVANCED_OPTIMIZATIONS --js_output_file=out.js --js=Bar.js --js=lib/Foo.js\r\nERROR - required entry point &quot;module$lib$Foo&quot; never provided\r\n\r\n1 error(s), 0 warning(s)\r\nmake: *** [out.js] Error 1\r\n\r\n What version of the product are you using? On what operating system? \n\r\nLatest version from trunk including fix for issue #804\r\n\r\n Please provide any additional information below. \n\r\nFind minimal not-working example attached with Makefile. The same setup has been working prior to fix for #804 (although with backslashes). This feature does not seem to have enough unit test coverage.\n\n[Context/Logs]:\n- What OS are on you building on?\n- i see the problem. to be fair, the code also emitted an error before issue 804 was fixed, it was just a worse error.\n- This issue was closed by revision r2223."}
{"project_id": "Closure", "bug_id": "234", "source_type": "google", "llm_input_text": "[Title]: Obfuscated code triggers TypeError in Firefox\n[Symptom]:\nThe Closure Compiler is a great tool, but I'm having problems with it. It often produces code that triggers TypeError in Firefox, even though original code does not. Here is why. The original code may look as follows:\r\n\r\nfunction(argument){\r\n...//use argument\r\nvar variable = ...;\r\n...//argument not used anymore\r\n}\r\n\r\nBut often Closure Compiler will translate it to:\r\nfunction(a){\r\n...\r\nvar a = ...;\r\n...\r\n}\r\n\r\nThis is not wrong JS, since argument is no longer used, Closure Compiler tries to reuse the name 'a' for something else.\r\n\r\nThis triggers the following in Firefox 13-15:\r\nTypeError: variable a re-declares argument\r\n\r\nStill, the resulting code is correct and runs, but it's very annoying debugging it when I'm getting all the time a lot of TypeErrors in the console.\r\n\r\nAlso, our customers have noticed these TypeErrors when testing the product and it undermines our code reliability.\r\n\r\nCould you please rename variables in such a way as to avoid these TypeErrors (not to rename vars in a way that will coincide with function argument names)?\r\n\r\n What steps will reproduce the problem? \nThis happens reproducibly on our real-life JS input, which I cannot submit for various reasons. If my problem description is not clear enough, please make a comment and I will try to construct some artificial example that also triggers the TypeError.\r\n\r\n What is the expected output? What do you see instead? \nThe expected output is obfuscated code with variables renamed to unique names, in order not to trigger TypeError in Firefox. Instead I see variables renamed to the same name, which runs OK, but Firefox complains with TypeError.\r\n\r\n What version of the product are you using? On what operating system? \nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 20120917 (revision 2180)\r\nBuilt on: 2012/09/17 14:33\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- It seems like we could avoid redeclaring the \"var\" and simply reuse the name, which might be a size win as well.  Although, it seems strange that FF is generating this warning using \"TypeError\".  Have you filed a bug for this as well?\n- hmmm...i haven't been able to reproduce this, either on the closure-compiler side or the firefox side.\r\n\r\nCan you give us an example of a script and compiler invocation where this happens?\r\n\r\nalternatively, is there some special setting in firefox 15 that i have to turn on to make this console warning appear? If i had that, i could probably find my own repro case.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Actually, that does help. I was able to put together a unit test for CollaspseVariableDeclarations that reproduces the problem:\r\n\r\nfunction f(a) { var b=1; a=2; var c }\r\n\r\ngets collapsed to:\r\n\r\nfunction f(a) { var b=1,a=2,c }\n- This issue was closed by revision r2226."}
{"project_id": "Closure", "bug_id": "235", "source_type": "google", "llm_input_text": "[Title]: Prototype methods can't be used from the constructor in case prototype is explicitly defined.\n[Symptom]:\nConsider the following source code:\r\n[URL]\r\n\r\nWhen I mark WebInspector.DOMAgent as a @constructor, I get the following warning.\r\n\r\nSource/WebCore/inspector/front-end/DOMAgent.js:48: WARNING - Property _setAttributesPayload never defined on WebInspector.DOMNode\r\n        this._setAttributesPayload(payload.attributes);\r\n\r\nIt sounds like the problem is in the way we define prototypes in line 83-ish. That's the way WebKit style tells us to do.\n\n[Context/Logs]:\n- I tried compiling DOMAgent.js after adding the @constructor tag, and did not see this warning.\r\n\r\nwhat version of the compiler are you using?\r\n\r\nhere is the command i ran with\r\njava -jar compiler.jar --js=DOMAgent.js --jscomp_warning=checkTypes > /dev/null\n- It seems to depend on the other files content. I now have different set of files and I can no longer repro it. I went back to the original set of files, but could not repro either. Since yesterday, I was actively changing the code to make it compiler-friendly, so I must have fixed something from its perspective. I'll reopen it if I have a repro case.\r\n\r\nVersion:\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1346\r\nBuilt on: 2011/08/11 15:02\n- ... [Middle Discussions Snipped for Brevity] ...\n- We are getting the warnings due to the __proto__ assignment as above again. We decided to move to the prototype = {\r\n    __proto__: \r\n}\r\nsyntax, but I wonder if we are not alone.\n- This issue was closed by revision r2232."}
{"project_id": "Closure", "bug_id": "236", "source_type": "google", "llm_input_text": "[Title]: Type checker misses annotations on functions defined within functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code under --warning_level VERBOSE\r\n\r\nvar ns = {};\r\n\r\n/** @param {string=} b */\r\nns.a = function(b) {}\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n2. Observe that the type checker correctly emits one warning, as 123 \r\ndoesn't match the type {string}\r\n\r\n3. Now compile the code with ns.a defined within an anonymous function, \r\nlike so:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nfunction d() {\r\n    ns.a();\r\n    ns.a(123);\r\n}\r\n\r\n4. Observe that a warning is emitted for calling ns.a with 0 parameters, and \r\nnot for the type error, as though the @param declaration were ignored. \r\n\r\n What version of the product are you using? On what operating system? \nr15\r\n\r\n Please provide any additional information below. \n\r\nThis sort of module pattern is common enough that it strikes me as worth \r\nsupporting.\r\n\r\nOne last note to make matters stranger: if the calling code isn't itself within \r\na function, no warnings are emitted at all:\r\n\r\nvar ns = {};\r\n\r\n(function() {\r\n    /** @param {string=} b */\r\n    ns.a = function(b) {}\r\n})();\r\n\r\nns.a();\r\nns.a(123);\n\n[Context/Logs]:\n- thanks for the report. I vaguely recall there was a very specific reason why this\r\ncase wasn't handled, but I think that reason might have gone away. I'll play with it\r\nagain and report back.\n- notice that if you define ns.a in a local scope, and use it in a later scope, this will now work.\r\n\r\ni'm still working on the case where you define ns.a in a local scope and call it from a global scope.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I understand now.  #3 is fixed now but not the call from global scope.\n- This issue was closed by revision r2240."}
{"project_id": "Closure", "bug_id": "237", "source_type": "google", "llm_input_text": "[Title]: Strange \"wrong parameter\" warning for callback function\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the followed code:\r\n   /** @param {{func: function()}} obj */\r\n   function test1(obj) {};\r\n   var fnStruc1 = {};\r\n   fnStruc1.func = function() {};\r\n   test1(fnStruc1); \r\n\r\n What is the expected output? What do you see instead? \nExpected: compiled OK\r\nI see:\r\nWARNING - actual parameter 1 of func does not match formal parameter\r\nfound   : {func: function (): undefined}\r\nrequired: {func: function (): ?}\r\nfunc(fnStruc);\r\n     ^\r\n\r\n What version of the product are you using? On what operating system? \nr2102, Win7 x64\r\n\r\n Please provide any additional information below. \nThe followed code compiles OK:\r\n   /** @param {{func: function()}} obj */\r\n   function test2(obj) {};\r\n   var fnStruc2 = { func: function() {} };\r\n   test2(fnStruc2);\r\n\r\nDiscussion: [URL]\n\n[Context/Logs]:\n- This issue was closed by revision r2265."}
{"project_id": "Closure", "bug_id": "238", "source_type": "google", "llm_input_text": "[Title]: java.lang.IllegalArgumentException when using --transform_amd_modules\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create three AMD files with this dependency graph:\r\n\r\n     1.js\r\n    /    \\\r\n  2.js   3.js\r\n\r\n2. Compile with --compilation_level ADVANCED_OPTIMIZATIONS and --transform_amd_modules\r\n\r\njava -jar closure-compiler/compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --process_common_js_modules --common_js_entry_module 1.js --transform_amd_modules --js 1.js 2.js 3.js\r\n\r\n\r\n What is the expected output? What do you see instead? \nThe compiler should compile the files.\r\n\r\nInstead of this, there are compilation errors, but there is not compiled output, and compiler throws this exception:\r\n\r\njava.lang.RuntimeException: java.lang.IllegalArgumentException: expected one element but was: &lt;module$2, module$3&gt;\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Compiler.java:654)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:599)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:581)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:540)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:739)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:351)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:905)\r\nCaused by: java.lang.IllegalArgumentException: expected one element but was: &lt;module$2, module$3&gt;\r\n\tat com.google.common.collect.Iterators.getOnlyElement(Iterators.java:308)\r\n\tat com.google.common.collect.Iterables.getOnlyElement(Iterables.java:265)\r\n\tat com.google.javascript.jscomp.JSModuleGraph.getRootModule(JSModuleGraph.java:130)\r\n\tat com.google.javascript.jscomp.AnalyzePrototypeProperties.&lt;init&gt;(AnalyzePrototypeProperties.java:123)\r\n\tat com.google.javascript.jscomp.CrossModuleMethodMotion.&lt;init&gt;(CrossModuleMethodMotion.java:75)\r\n\tat com.google.javascript.jscomp.DefaultPassConfig$66.createInternal(DefaultPassConfig.java:1763)\r\n\tat\n...[Description Truncated]...\n\n[Context/Logs]:\n- Malte can you comment on what is expected here?\n- Could you paste the actual source files?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r2256.\n- Works on the provided test case. Thanks a lot guys! Have a nice day."}
{"project_id": "Closure", "bug_id": "239", "source_type": "google", "llm_input_text": "[Title]: Bad type inference with goog.isFunction and friends\n[Symptom]:\nexperimental/johnlenz/typeerror/test.js:16: WARNING - Property length\r\nnever defined on Number\r\n      var i = object.length;\r\n\r\n\r\nThis is the reduced test case:\r\n\r\n/**\r\n * @param {*} object Any object.\r\n * @return {boolean}\r\n */\r\ntest.isMatched = function(object) {\r\n  if (goog.isDef(object)) {\r\n    if (goog.isFunction(object)) {\r\n      // return object();\r\n    } else if (goog.isBoolean(object)) {\r\n      // return object;\r\n    } else if (goog.isString(object)) {\r\n      // return test.isDef(object);\r\n    } else if (goog.isArray(object)) {\r\n      var i = object.length;\r\n    }\r\n  }\r\n  return false;\r\n};\n\n[Context/Logs]:\n- This issue was closed by revision r2262."}
{"project_id": "Closure", "bug_id": "240", "source_type": "google", "llm_input_text": "[Title]: Strange \"wrong parameter\" warning for callback function\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the followed code:\r\n   /** @param {{func: function()}} obj */\r\n   function test1(obj) {};\r\n   var fnStruc1 = {};\r\n   fnStruc1.func = function() {};\r\n   test1(fnStruc1); \r\n\r\n What is the expected output? What do you see instead? \nExpected: compiled OK\r\nI see:\r\nWARNING - actual parameter 1 of func does not match formal parameter\r\nfound   : {func: function (): undefined}\r\nrequired: {func: function (): ?}\r\nfunc(fnStruc);\r\n     ^\r\n\r\n What version of the product are you using? On what operating system? \nr2102, Win7 x64\r\n\r\n Please provide any additional information below. \nThe followed code compiles OK:\r\n   /** @param {{func: function()}} obj */\r\n   function test2(obj) {};\r\n   var fnStruc2 = { func: function() {} };\r\n   test2(fnStruc2);\r\n\r\nDiscussion: [URL]\n\n[Context/Logs]:\n- This issue was closed by revision r2265."}
{"project_id": "Closure", "bug_id": "241", "source_type": "google", "llm_input_text": "[Title]: Dead code removal too aggressive\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code with advanced optimizations:\r\n\r\ntry {\r\n  new Function('this is an error');\r\n} catch (e) {\r\n  alert('Error caught!');\r\n}\r\nalert('Done.');\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expect the compiler not to change the functionality, so when I run the compiled code, I get both alerts. In reality, this is compiled to &quot;alert('Done.');&quot;, changing behavior.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL]\r\nCode run at 2012-10-25 14:15.\n\n[Context/Logs]:\n- BUILTIN_FUNCTIONS_WITHOUT_SIDEEFFECTS (NodeUtil.java) do not include \"Function\", whereas es3.js classifies the Function constructor as free from side-effects.\n- This issue was closed by revision r2292."}
{"project_id": "Closure", "bug_id": "242", "source_type": "google", "llm_input_text": "[Title]: better 'this' type checking\n[Symptom]:\n/** @constructor */\r\nfunction F() {}\r\nF.prototype.bar = function() { this.baz(); };\r\nF.prototype.baz = function() { };\r\n\r\n/** @constructor */\r\nfunction G() {}\r\nG.prototype.bar = F.prototype.bar;\r\n\r\nWe should notice that &quot;F.prototype.bar&quot; and &quot;G.prototype.bar&quot; have different &quot;this&quot; types, and emit a warning.\n\n[Context/Logs]:\n- Relatedly, new: types in @return should be checked against what's really returned:\r\n\r\nBelow, constructorFactory returns a constuctor that doesn't match the\r\ndeclared return type, yet no warning ensues:\r\n\r\n/**\r\n\u00a0* @typedef {{\r\n\u00a0* \u00a0 foo: function()\r\n\u00a0* }}\r\n\u00a0*/\r\nvar Type;\r\n\r\n/** @constructor */\r\nvar T0 = function() {};\r\n\r\nT0.prototype.foo2 = function() {\r\n\u00a0 window.alert('foo');\r\n};\r\n\r\n/**\r\n\u00a0* @return {function(new:Type)}\r\n\u00a0*/\r\nvar constructorFactory = function() {\r\n\u00a0 return T0;\r\n};\r\n\r\nvar T = constructorFactory();\r\n\r\nvar t = new T;\r\n\r\nt.foo();\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "243", "source_type": "google", "llm_input_text": "[Title]: warning in 'externs.zip//es3.js'\n[Symptom]:\nWhen I compile using today's checkout (#2301) I notice this warning from inside the compiler's native es3.js extern:\r\n\r\n---------------------\r\nexterns.zip//es3.js:1091: WARNING - attempted re-definition of type Date\r\nfound   : function (new:Date, ?, ?, ?, ?, ?, ?, ?): string\r\nexpected: function (new:Date, ?=, ?=, ?=, ?=, ?=, ?=, ?=): string\r\nfunction Date(opt_yr_num, opt_mo_num, opt_day_num, opt_hr_num, opt_min_num,\r\n^\r\n----------------------\r\n\r\n/ Fredrik\n\n[Context/Logs]:\n- The fix has been submitted in the internal repository it should be pushed out tomorrow.\n- This issue was closed by revision r2307."}
{"project_id": "Closure", "bug_id": "244", "source_type": "google", "llm_input_text": "[Title]: comparison with NaN\n[Symptom]:\nI recently stumbled upon code like this:\r\n-----------------\r\nvar x = parseInt(str, 10);\r\nif (x == NaN) {\r\n   alert('invalid input');\r\n}\r\n-------------\r\nThe programmer had obviously mistaken isNaN check for a comparison with NaN. Any comparison with NaN (even NaN == NaN) will result in false.\r\n\r\nThough this might not be a very common mistake I still think the compiler could issue a warning in this case.\r\nYou already have the &quot;WARNING - condition always evaluates to false&quot; message for example.\r\n\r\nSecondly, the compiler could optimize here, not even in advanced mode the code is short-circuited:\r\n------\r\nNaN==parseInt(&quot;asdf&quot;,10)&amp;&amp;alert(&quot;error&quot;);\r\n------\r\n\r\nRegards\r\n/ Fredrik\n\n[Context/Logs]:\n- I know ===NaN is always false but is this true of ==NaN as well?\n- a nifty little visual reference:\r\n[URL]\r\n\r\nYes, we should warn about this.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r2344.\n- Although the warning is now added as suggested, the compiler still doesn't short-circuit optimize.\r\nI.e even in advanced mode the above example outputs: NaN==parseInt(str,10)&&alert(\"invalid input\");\r\n\r\n/Fredrik Blomqvist"}
{"project_id": "Closure", "bug_id": "245", "source_type": "google", "llm_input_text": "[Title]: comparison with NaN\n[Symptom]:\nI recently stumbled upon code like this:\r\n-----------------\r\nvar x = parseInt(str, 10);\r\nif (x == NaN) {\r\n   alert('invalid input');\r\n}\r\n-------------\r\nThe programmer had obviously mistaken isNaN check for a comparison with NaN. Any comparison with NaN (even NaN == NaN) will result in false.\r\n\r\nThough this might not be a very common mistake I still think the compiler could issue a warning in this case.\r\nYou already have the &quot;WARNING - condition always evaluates to false&quot; message for example.\r\n\r\nSecondly, the compiler could optimize here, not even in advanced mode the code is short-circuited:\r\n------\r\nNaN==parseInt(&quot;asdf&quot;,10)&amp;&amp;alert(&quot;error&quot;);\r\n------\r\n\r\nRegards\r\n/ Fredrik\n\n[Context/Logs]:\n- I know ===NaN is always false but is this true of ==NaN as well?\n- a nifty little visual reference:\r\n[URL]\r\n\r\nYes, we should warn about this.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r2344.\n- Although the warning is now added as suggested, the compiler still doesn't short-circuit optimize.\r\nI.e even in advanced mode the above example outputs: NaN==parseInt(str,10)&&alert(\"invalid input\");\r\n\r\n/Fredrik Blomqvist"}
{"project_id": "Closure", "bug_id": "246", "source_type": "google", "llm_input_text": "[Title]: Compiler ignores 'delete' statements, can break functionality.\n[Symptom]:\nWhen the compiler rewrites internally-referenced object variables to non-object  variables, as in the example below, it ignores 'delete' statements. These delete statements work as expected with the objects originally written, but don't function the same when the variables are no longer object properties. See:\r\n\r\n(function(arg) {\r\n  var foo = {};\r\n\r\n  foo.bar = arg;\r\n\r\n  console.log(foo.bar);\r\n\r\n  delete foo.bar;\r\n\r\n  console.log(foo.bar);\r\n})();\r\n\r\nCompiles to (simple setting):\r\n(function(a){console.log(a);delete a;console.log(a)})();\r\n\r\nPerhaps the compiler needs to look for these delete statements and change them to setting the rewritten variable to undefined instead.\n\n[Context/Logs]:\n- This issue was closed by revision r2343."}
{"project_id": "Closure", "bug_id": "247", "source_type": "google", "llm_input_text": "[Title]: comparison with NaN\n[Symptom]:\nI recently stumbled upon code like this:\r\n-----------------\r\nvar x = parseInt(str, 10);\r\nif (x == NaN) {\r\n   alert('invalid input');\r\n}\r\n-------------\r\nThe programmer had obviously mistaken isNaN check for a comparison with NaN. Any comparison with NaN (even NaN == NaN) will result in false.\r\n\r\nThough this might not be a very common mistake I still think the compiler could issue a warning in this case.\r\nYou already have the &quot;WARNING - condition always evaluates to false&quot; message for example.\r\n\r\nSecondly, the compiler could optimize here, not even in advanced mode the code is short-circuited:\r\n------\r\nNaN==parseInt(&quot;asdf&quot;,10)&amp;&amp;alert(&quot;error&quot;);\r\n------\r\n\r\nRegards\r\n/ Fredrik\n\n[Context/Logs]:\n- I know ===NaN is always false but is this true of ==NaN as well?\n- a nifty little visual reference:\r\n[URL]\r\n\r\nYes, we should warn about this.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r2344.\n- Although the warning is now added as suggested, the compiler still doesn't short-circuit optimize.\r\nI.e even in advanced mode the above example outputs: NaN==parseInt(str,10)&&alert(\"invalid input\");\r\n\r\n/Fredrik Blomqvist"}
{"project_id": "Closure", "bug_id": "248", "source_type": "google", "llm_input_text": "[Title]: Unable to compress over the same file\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Specify the same filepath for input and output\r\njava -jar compiler.jar --js test.js --js_output_file test.js\r\n\r\n What is the expected output? What do you see instead? \n\r\ntest.js should be compressed but the result is an empty file.\r\n\r\n What version of the product are you using? On what operating system? \n\r\ncompiler-20120917 on windows7 64bit\n\n[Context/Logs]:\n- We could check if the input and output are the same file and fail gracefully.\n- This issue was closed by revision r2358."}
{"project_id": "Closure", "bug_id": "249", "source_type": "google", "llm_input_text": "[Title]: Function expressions are transformed into function declarations\n[Symptom]:\nFunction expressions are currently transformed into function declarations.\r\nSince func. expression and func. declarations are evaluated at different\r\ntimes during program execution, this, of course, results in a different\r\nbehavior before and after munging:\r\n\r\n  alert(typeof f);\r\n  var f = function(){};\r\n\r\nbecomes:\r\n\r\n  alert(typeof f);function f(){}\n"}
{"project_id": "Closure", "bug_id": "250", "source_type": "google", "llm_input_text": "[Title]: Converting from an interface type to a constructor which @implements itself causes stack overflow.\n[Symptom]:\n// Options: --externs externs/es3.js --property_renaming OFF --variable_renaming OFF --jscomp_warning=checkTypes --js=t.js\r\n\r\n\r\n// File: t.js\r\n/**\r\n * @interface\r\n */\r\nvar OtherType = function() {}\r\n\r\n/**\r\n * @implements {MyType}\r\n * @constructor\r\n */\r\nvar MyType = function() {}\r\n\r\n/**\r\n * @type {MyType}\r\n */\r\nvar x = /** @type {!OtherType} */ (new Object());\r\n\r\nGet Infinite recursion in:\r\n\r\nPrototypeObjectType.isSubtype @ 350\r\n\r\nOptions:\r\n\r\n- prevent cycles in the inheritance/implements graph\r\n- detect cycles after they are created and exit compilation before any subsequent passes run\r\n- detect and remove cycles after they are created but before any subsequent passes run\r\n- make every subsequent pass robust against cycles in that graph\n\n[Context/Logs]:\n- Fixed at r2399"}
{"project_id": "Closure", "bug_id": "251", "source_type": "google", "llm_input_text": "[Title]: Property `control` of HTMLLabelElement not included in bundled externs\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Write code that reads the `control` property of an HTMLLabelElement\r\n2. Compile that code with advanced optimizations\r\n\r\n What is the expected output? What do you see instead? \n\r\nA warning is generated, but none are expected because `control` is a standard property of HTMLLabelElement.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nclosure-compiler.appspot.com on 14 Dec '12.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- As specified by W3C: [URL]\n- Patch.\n- This issue was closed by revision r2406."}
{"project_id": "Closure", "bug_id": "252", "source_type": "google", "llm_input_text": "[Title]: optimization fails with variable in catch clause\n[Symptom]:\nEnter the following in the closure service:\r\n\r\nfunction getStack() {\r\n  var getErrorObject = function() {\r\n    try {\r\n      throw Error(&quot;&quot;);\r\n    } catch(err) {\r\n      return err;\r\n    }\r\n  };\r\n  return getErrorObject().stack;\r\n}\r\nwindow['getStackTrace']=getStack;\r\n\r\nUse Optimization = Simple. Note the following result:\r\n\r\nfunction getStack() \r\n{ \r\n  try \r\n  { \r\n    throw Error(&quot;&quot;); \r\n  }\r\n  catch(a) \r\n  { \r\n  } \r\n  return a.stack \r\n} \r\nwindow.getStackTrace = getStack;\r\n\r\nThe scope of the variable a is limited to the catch clause, but the compiler references it illegally as the return value of the inlined function.\n\n[Context/Logs]:\n- Thanks for the report and the reduced test case.  It looks like the \"flow sensitive variable inliner\" is causing this problem.\n- I have a fix for this.\n- This issue was closed by revision r2415."}
{"project_id": "Closure", "bug_id": "253", "source_type": "google", "llm_input_text": "[Title]: @suppress {ambiguousFunctionDecl} not recognized\n[Symptom]:\n/**\r\n * @param {number} y\r\n * @return {number}\r\n * @suppress {ambiguousFunctionDecl}\r\n */\r\nfunction x(y)\r\n{\r\n\treturn y * 2;\r\n}\r\n\r\nResults in:\r\n\r\nJSC_PARSE_ERROR: Parse error. unknown @suppress parameter: ambiguousFunctionDecl at line 5 character 13\r\n* @suppress {ambiguousFunctionDecl}\r\n\r\nambiguousFunctionDecl is described on the Closure Compiler wiki:\r\n[URL]\n\n[Context/Logs]:\n- Issue 863 has been merged into this issue.\n- i'm not sure what the status is on ambiguousFunctionDecl. It really should be an un-suppressable error in VERBOSE mode, because it really is a parse error according to the language specification. I thought that the current DiagnosticGroup was just a temporary thing so that john could test it out. John?\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'll add this to the list of accepted suppressions but I'm also eventually going to remove the \"ambiguosFunctionDecl\" in favor of a ES5 strict check which will reject a superset of that the \"ambiguousFunctionDecl\" warning complains about.\n- This issue was closed by revision r2420."}
{"project_id": "Closure", "bug_id": "254", "source_type": "google", "llm_input_text": "[Title]: combining @interface and multiple @extends can crash compiler\n[Symptom]:\nCompile this:\r\n---------------------------------\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @warning_level VERBOSE\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n/**\r\n * @interface\r\n * @extends {unknown_1}\r\n * @extends {unknown_2}\r\n */\r\nfunction Foo() {}\r\n---------------------------------\r\n\r\n=&gt; Get this..\r\n---------------------------------------\r\n23: java.lang.NullPointerException\r\n\tat com.google.javascript.jscomp.TypeCheck.checkInterfaceConflictProperties(TypeCheck.java:1544)\r\n\tat com.google.javascript.jscomp.TypeCheck.visitFunction(TypeCheck.java:1635)\r\n\tat com.google.javascript.jscomp.TypeCheck.visit(TypeCheck.java:761)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:509)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:502)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:502)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseWithScope(NodeTraversal.java:347)\r\n\tat com.google.javascript.jscomp.TypeCheck.check(TypeCheck.java:400)\r\n\tat com.google.javascript.jscomp.TypeCheck.process(TypeCheck.java:371)\r\n\tat com.google.javascript.jscomp.DefaultPassConfig$29$1.process(DefaultPassConfig.java:1209)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$PassFactoryDelegate.processInternal(PhaseOptimizer.java:303)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$NamedPass.process(PhaseOptimizer.java:279)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer.process(PhaseOptimizer.java:191)\r\n\tat com.google.javascript.jscomp.Compiler.check(Compiler.java:814)\r\n\tat com.google.javascript.jscomp.Compiler.compileInternal(Compiler.java:729)\r\n\tat com.google.javascript.jscomp.Compiler.access$000(Compiler.java:85)\r\n\tat com.google.javascript.jscomp.Compiler$2.call(Compiler.java:637)\r\n\tat com.google.javascript.jscomp.Compiler$2.call(Compiler.java:634)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:694)\r\n\tat com.googl\n...[Description Truncated]...\n\n[Context/Logs]:\n- First posted in this forum thread:\r\n[URL]\n- Great! Thanks for the tiny reproduction example.\n- This has been fixed in r2423."}
{"project_id": "Closure", "bug_id": "255", "source_type": "google", "llm_input_text": "[Title]: Advanced optimization removes nested code\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile this code:\r\n\r\n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\nvar ImageEditor;\r\n(function (ImageEditor) {\r\n    (function (View) {\r\n        View.defaultLeftPaneWidth = 200;\r\n        var Editor = (function () {\r\n            function Editor(a, b) {\r\n                return a + b;\r\n            }\r\n            return Editor;\r\n        })();\r\n        View.Editor = Editor;        \r\n    })(ImageEditor.View || (ImageEditor.View = {}));\r\n    var View = ImageEditor.View;\r\n})(ImageEditor || (ImageEditor = {}));\r\nwindow[&quot;ImageEditor&quot;]['View'][&quot;Editor&quot;] = ImageEditor.View.Editor;\r\n\r\n\r\n What is the expected output? What do you see instead? \nExpected output:\r\nvar a, b = a || (a = {});\r\n(b.a || (b.a = {})).b = function(c, d) {\r\n  return c + d\r\n};\r\nwindow.ImageEditor.View.Editor = a.a.b;\r\n\r\n\r\nCurrent output:\r\nvar a, b = a || (a = {});\r\nb.a || (b.a = {});\r\nwindow.ImageEditor.View.Editor = a.a.b;\r\n\r\n\r\n What version of the product are you using? On what operating system? \nBuilt at r2388\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Issue 875 has been merged into this issue.\n- @john -- did you start working on this?\n- no, I dug out a out CL of mine but I didn't like it.  I haven't started anything else.\n- This issue was closed by revision r2429."}
{"project_id": "Closure", "bug_id": "256", "source_type": "google", "llm_input_text": "[Title]: function arguments should not be optimized away\n[Symptom]:\nFunction arguments should not be optimized away, as this comprimizes the function's length property.\r\n\r\n What steps will reproduce the problem? \n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\nfunction foo (bar, baz) {\r\n  return bar;\r\n}\r\nalert (foo.length);\r\nfunction foo (bar, baz) {\r\n  return bar;\r\n}\r\nalert (foo.length);\r\n\r\n--------------------------------------\r\n\r\nWhat is the expected output?\r\n\r\nfunction foo(a,b){return a}alert(foo.length);\r\n\r\n--------------------------------------\r\n\r\nWhat do you see instead?\r\n\r\nfunction foo(a){return a}alert(foo.length);\r\n\r\n--------------------------------------\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the product from the web page [URL]\r\n\r\nI'm using Firefox 3.6.10 on Ubuntu 10.0.4\r\n\r\n Please provide any additional information below. \n\r\nThe function's length property is essential to many techniques, such as currying functions.\n\n[Context/Logs]:\n- This kind of reflection is generally not supported by the compiler as evident by its restrictions imposed on eval:  \r\n\r\n[URL]\r\n\r\nIn the general case, referring to length on anything other than named function expression is not safe:\r\n\r\nfunction f(a,b,c) {return f.length};\r\nconsole.info( f() );\r\nvar g = f;\r\nf = function(a) {};\r\nconsole.info( g() );\r\n\r\nFor a named function expression the could replace the length with a constant even in simple mode (although it doesn't currently):\r\n\r\nvar f = function me(a,b,c){ return me.length() };\r\n\r\ncould then be transformed to (after unused variable removal):\r\n\r\nvar f = function() {return 3};\n- Pardon my initial post. I accidentally doubled the code. Should have been:\r\n\r\nfunction foo (bar, baz) {\r\n  return bar;\r\n}\r\nalert (foo.length);\r\n\r\n\r\nI don't think this changes your response to the issue though, but who knows. I fail to see how restrictions on eval is relevant to this issue, given one is working with SIMPLE_OPTIMIZATIONS. Given the description for ADVANCED_OPTIMIZATIONS, I can understand removal of (usually) extraneous function parameters.\r\n\r\nIf this issue does not get solved (via directly fixing the issue or allowing annotations for it or whatnot), it should be documented in the SIMPLE_OPTIMIZATIONS section on your limitations page. As it stands, the SIMPLE_OPTIMIZATIONS section gives no clue that it may remove parameters.\n- ... [Middle Discussions Snipped for Brevity] ...\n- For my purpose, it is enough to remove the following lines\r\n\r\n-    for (Scope fnScope : allFunctionScopes) {\r\n-      removeUnreferencedFunctionArgs(fnScope);\r\n-    }\r\n\r\nfrom src/com/google/javascript/jscomp/RemoveUnusedVars.java .\r\n\r\n-- Cheers, Keigo\n- This issue was closed by revision r2441."}
{"project_id": "Closure", "bug_id": "257", "source_type": "google", "llm_input_text": "[Title]: Add google chart tools / visualization API externs file in contrib/externs\n[Symptom]:\nThe externs file to be used with the chart tools JS API is not bundled with the closure compiler.\r\n\r\nWould it be possible to add this file into the contirb/externs folder ?\r\n\r\nI have found the following posts about this subject:\r\n- [URL]\r\n- [URL]\r\n\r\nThe file is available here: [URL]\r\n\r\nSo it could be as simple as adding the revision number to the filename and bundling those with the compiler.\r\n\r\nThanks for your help\n\n[Context/Logs]:\n- FYI The file linked (gviz-api.js) is uncomplete and produces a lot of warnings (i.e. \"WARNING - Function google.visualization.DataTable.prototype.addColumn: called with 2 argument(s). Function requires at least 3 argument(s) and no more than 3 argument(s).\")\n- That file looks old and out-of-date. It also is very incomplete containing minimal type information.\r\n\r\nUnless there is an internal Google version, this file needs a maintainer/contributor to do the initial work for it to be included.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yes. The annotations looked fine. I got sidetracked by being out sick and the holidays. The only thing left to do was a quick check with a basic sample. I'll see if I can get that done this afternoon.\n- This issue was closed by r2438."}
{"project_id": "Closure", "bug_id": "258", "source_type": "google", "llm_input_text": "[Title]: using a flagfile resets other command line warning settings\n[Symptom]:\nIt seems like using the &quot;--flagfile&quot; command line option resets any additional &quot;--jscomp_warning&quot; etc flags.\r\n\r\nThe documentation describes a flagfile as: &quot;A file containing additional command-line options.&quot;\r\nI.e I assumed the final settings to be the combined(union) of flagfile and the other separate options.\r\n(Personally I use the flagfile only for the &quot;--js&quot; flags due to the large number of files that would otherwise break the command line length limit).\r\n\r\n------\r\nInspecting the code in &quot;CommandLineRunner.java&quot; I find that 'processFlagFile()' initially does a 'Flags.warningGuardSpec.clear();'. And since the flagfile is parsed after the separate args it results in the reset.\r\n-------\r\n\r\nRegards\r\n/ Fredrik Blomqvist\n\n[Context/Logs]:\n- This issue was closed by revision 4482d47abd7d."}
{"project_id": "Closure", "bug_id": "259", "source_type": "google", "llm_input_text": "[Title]: closure compiler crash in simple mode, invalid code removal in whitespace mode.\n[Symptom]:\nI passed the content of the attached file into the closure compiler [URL] and it crashed.\r\n\r\nIn whitespace only mode, it doesn't show that it crashed, but it doesn't give any script back as a result (which is wrong, because my code should give an alert).\r\n\r\nBy the way, to generate the javascript that causes the crash, I used this script (you can use max to vary the nesting depth):\r\nmax=250;depth=0;func=&quot;{alert(depth);}&quot;;for(i=0;i&lt;max;i++)func=&quot;{depth++;return function()&quot;+func+&quot;();}&quot;;exec=&quot;(&quot;+new Function(func)+&quot;)()&quot;;\r\n\r\n\r\nIn simple and advanced mode, I usually get the exception below.\r\n\r\n23: java.lang.IllegalStateException\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:135)\r\n\tat com.google.javascript.jscomp.NodeUtil.tryMergeBlock(NodeUtil.java:1854)\r\n\tat com.google.javascript.jscomp.PeepholeRemoveDeadCode.tryOptimizeBlock(PeepholeRemoveDeadCode.java:532)\r\n\tat com.google.javascript.jscomp.PeepholeRemoveDeadCode.optimizeSubtree(PeepholeRemoveDeadCode.java:51)\r\n\tat com.google.javascript.jscomp.PeepholeOptimizationsPass.visit(PeepholeOptimizationsPass.java:180)\r\n\tat com.google.javascript.jscomp.PeepholeOptimizationsPass.traverse(PeepholeOptimizationsPass.java:131)\r\n\tat com.google.javascript.jscomp.PeepholeOptimizationsPass.traverse(PeepholeOptimizationsPass.java:127)\r\n\tat com.google.javascript.jscomp.PeepholeOptimizationsPass.process(PeepholeOptimizationsPass.java:108)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$PassFactoryDelegate.processInternal(PhaseOptimizer.java:303)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$NamedPass.process(PhaseOptimizer.java:279)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$LoopInternal.process(PhaseOptimizer.java:366)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer.process(PhaseOptimizer.java:191)\r\n\tat com.google.javascript.jscomp.Compiler.optimize(Compiler.java:1894)\r\n\tat com.google.javascript.jscomp.Compiler.compileInternal(Compiler.java:741)\r\n\tat \n...[Description Truncated]...\n\n[Context/Logs]:\n- Hehe. Interesting. Seems like this is hitting more than one bug.\r\n\r\nJust looking at tryOptimizeBlock\r\n\r\n      case Token.SCRIPT:\r\n      case Token.BLOCK:\r\n        return tryOptimizeBlock(subtree);\r\n\r\nWhich would cause it to crash because the subtree can be a script.\r\n\r\nThe web service probably creates the whole AST with script nodes a bit different than the commandline compiler.\n- I know, because I hit some, arguably, edge cases I didn't want to make too much of it :-)\r\n\r\nIf you are researching the compiler crash, it may (or may not) be of interest that the script I use to generate the JavaScript, crashes if max gets a too high number as well. At first this value appears to be a constant value in Chrome, but when I tried on the same machine later, it crashed at a different number... (first time it was 549, second time on a different day, it was 475). Lowest value I got in any browser was in Opera on 256.\r\n\r\nI currently run Chrome version 24.0.1312.57 m on Windows 7 64 bit. Both tests where on this machine, but I do not know if Chrome has updated since the previous test.\n- ... [Middle Discussions Snipped for Brevity] ...\n- The problem here is that the Rhino parser is throwing an exception (rather than reporting an error) and the compiler is eating it and producing an empty file.  I have a fix pending.\n- This issue was closed by revision b2866728fe81."}
{"project_id": "Closure", "bug_id": "260", "source_type": "google", "llm_input_text": "[Title]: Addition to contrib/externs/facebook_javascript_sdk.js\n[Symptom]:\n[URL]\r\n\r\nPlease add:\r\n\r\n/**\r\n * @see [URL]\r\n * @param {function(Object.&lt;*,*&gt;)} callback\r\n */\r\nFB.Canvas.getPageInfo = function(callback) {};\n\n[Context/Logs]:\n- This issue was closed by revision 48342227da94."}
{"project_id": "Closure", "bug_id": "261", "source_type": "google", "llm_input_text": "[Title]: Exception when parsing erroneous jsdoc: /**@return {@code foo} bar   *    baz. */\n[Symptom]:\nThe following causes an exception in JSDocInfoParser.\r\n\r\n/** \r\n * @return {@code foo} bar \r\n *    baz. */\r\nvar x;\r\n\r\n\r\n\r\nFix to follow.\n\n[Context/Logs]:\n- This issue was closed by revision 4fbbc47cb18f."}
{"project_id": "Closure", "bug_id": "262", "source_type": "google", "llm_input_text": "[Title]: Sourcemap generation with ant\n[Symptom]:\nWhat steps will reproduce the problem? \n1. run ant task with following configuration:\r\n  &lt;jscomp compilationLevel=&quot;simple&quot; output=&quot;./combined.js&quot;&gt;\r\n    &lt;sources dir=&quot;./&quot;&gt;\r\n      &lt;file name=&quot;test1.js&quot;/&gt;\r\n      &lt;file name=&quot;test2.js&quot;/&gt;\r\n    &lt;/sources&gt;\r\n  &lt;/jscomp&gt;\r\n\r\n  whereas jscomp is the ant task-definition that calls the CompileTask.\r\n\r\n What is the expected output? What do you see instead? \ncombined.js that includes minified and combined contents of test1.js and test2.js. There is no way to tell the ant task to generate source-map.\r\n\r\nThe patch I made makes this possible. Here is a sample configuration from an ant xml-file:\r\n  &lt;jscomp compilationLevel=&quot;simple&quot; output=&quot;./combined.js&quot; sourceMapOutputFile=&quot;./combined.js.map&quot; sourceMapFormat=&quot;V3&quot;&gt;\r\n    &lt;sources dir=&quot;./&quot;&gt;\r\n      &lt;file name=&quot;test1.js&quot;/&gt;\r\n      &lt;file name=&quot;test2.js&quot;/&gt;\r\n    &lt;/sources&gt;\r\n  &lt;/jscomp&gt;\r\n\r\nThe patched CompileTask saves the sourcemap to the specified file and also generates a comment in combined.js that points to the sourcemap file (combined.js.map in this case).\n\n[Context/Logs]:\n- Thanks for the patch.  Can you provide a CLA as per [URL] ?\n- I thought, I already have one, since I have a gmail account. But anyway, I have just submitted a new one over the following link:\r\n[URL]\n- This issue was closed by revision e93aa3e15049."}
{"project_id": "Closure", "bug_id": "263", "source_type": "google", "llm_input_text": "[Title]: Move contrib/externs/json.js to default externs\n[Symptom]:\nJSON is part of ES5. We should have something like the following in externs/es5.js:\r\n\r\nvar JSON = {};\r\n\r\n/**\r\n * @param {string} jsonStr The string to parse.\r\n * @param {(function(string, *) : *)=} opt_reviver\r\n * @return {*} The JSON object.\r\n * @throws {Error}\r\n * @nosideeffects\r\n */\r\nJSON.parse = function(jsonStr, opt_reviver) {};\r\n\r\n/**\r\n * @param {*} jsonObj Input object.\r\n * @param {(Array.&lt;string&gt;|(function(string, *) : *)|null)=} opt_replacer\r\n * @param {(number|string)=} opt_space\r\n * @return {string} JSON string which represents jsonObj.\r\n * @throws {Error}\r\n * @nosideeffects\r\n */\r\nJSON.stringify = function(jsonObj, opt_replacer, opt_space) {};\n\n[Context/Logs]:\n- It's currently defined as a property of the window object.\r\n[URL]\n- Yeah, I should have searched for \"file:externs/ JSON\". Still this is not correct. JSON is an ES5 global and not related to HTML5. It was very confusing to see references to toJSON in externs/es5.js but not JSON.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Legacy JSON polyfills should not use externs/es5.js since they are using es3.\n- This issue was closed by revision 0e57fadbad43."}
{"project_id": "Closure", "bug_id": "264", "source_type": "google", "llm_input_text": "[Title]: if statement\n[Symptom]:\nWhat steps will reproduce the problem? \nINPUT:\r\nif( es[--esi][ es[esi+1] ] === 1)\r\n{\r\n\tes[esi] = 0;\r\n}\r\nelse\r\n{\r\n\tes[esi] = 1;\r\n}\r\nOUTPUT:\r\n\r\nes[esi] = 1 === es[--esi][es[esi + 1]] ? 0 : 1;\r\n\r\nBUT MUST BE\r\nes[--esi] = 1 === es[esi][es[esi + 1]] ? 0 : 1;\r\n\r\nIm using latest version on windows\n\n[Context/Logs]:\n- This issue was closed by revision 5b9485903b5e."}
{"project_id": "Closure", "bug_id": "265", "source_type": "google", "llm_input_text": "[Title]: Please add: W3C Gamepad API externs\n[Symptom]:\n/**\r\n * @fileoverview Definitions for W3C's Gamepad specification.\r\n *  Created from [URL]\r\n * @externs\r\n */\r\n\r\n/**\r\n * @typedef {{id: string, index: number, timestamp: number, axes: Array.&lt;number&gt;, buttons: Array.&lt;number&gt;}}\r\n */\r\nvar Gamepad;\r\n\r\n/**\r\n * @return {Array.&lt;Gamepad&gt;}\r\n */\r\nnavigator.getGamepads = function() {}\r\n\r\n/**\r\n * @return {Array.&lt;Gamepad&gt;}\r\n */\r\nnavigator.webkitGetGamepads = function() {}\n\n[Context/Logs]:\n- You'll probably have to sign a Contributor License Agreement: [URL]\n- The extern was created here:\r\n\r\n[URL]\n- The extern was created here:\r\n\r\n[URL]\n- Btw.: I've also created externs for WebRTC and a variety of node.js packages. Should I create issues for these / reply to the existing ones or is there a way to contribute directly?"}
{"project_id": "Closure", "bug_id": "266", "source_type": "google", "llm_input_text": "[Title]: unicode characters in property names result in invalid output\n[Symptom]:\nWhat steps will reproduce the problem? \n1. use unicode characters in a property name for an object, like this:\r\nvar test={&quot;a\\u0004b&quot;:&quot;c&quot;};\r\n\r\n2. compile\r\n\r\n What is the expected output? What do you see instead? \nBecause unicode characters are not allowed in property names without quotes, the output should be the same as the input. However, the compiler converts the string \\u0004 to the respective unicode character, and the output is: \r\nvar test={a\u0004b:&quot;c&quot;}; // unicode character between a and b can not be displayed here\r\n\r\n What version of the product are you using? On what operating system? \nnewest current snapshot on multiple os (OSX/linux)\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Okay, I checked the source, and it appears this problem is not really unicode related.\r\n\r\nIt appears that the function used to check for valid identifier names relies on isValidIdentifierName which in turn calls Character.isJavaIdentifierPart, and apparently that is true for \\u0004 (EOT).\r\nhuh?!\n- I've created a patch that seems to resolve the issue; by using Character.isIdentifierIgnorable, the ascii control characters are detected and no longer incorrectly flagged as valid identifiers.\r\nNot entirely sure if any other functions need to be changed, or if this has any sideeffects, but for our projects it seems to work.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Could you sign a Contributor License Agreement to allow us to use your patch in the compiler?\r\n\r\n[URL]\n- This issue was closed by revision 7f6700e2b54a."}
{"project_id": "Closure", "bug_id": "267", "source_type": "google", "llm_input_text": "[Title]: arguments is moved to another scope\n[Symptom]:\nUsing ADVANCED_OPTIMIZATIONS with CompilerOptions.collapsePropertiesOnExternTypes = true a script I used broke, it was something like:\r\n\r\nfunction () {\r\n  return function () {\r\n    var arg = arguments;\r\n    setTimeout(function() { alert(args); }, 0);\r\n  }\r\n}\r\n\r\nUnfortunately it was rewritten to:\r\n\r\nfunction () {\r\n  return function () {\r\n    setTimeout(function() { alert(arguments); }, 0);\r\n  }\r\n}\r\n\r\narguments should not be collapsed.\n\n[Context/Logs]:\n- Can you provide an exact snippet, I'm not able to reproduce this problem.  Also, note that code that you provide here has a typo (\"arg\" vs. \"args\").\r\n\r\nCompilerOptions.collapsePropertiesOnExternTypes should also have nothing to do with inlining variables.\n- Yeah, we almost always model \"arguments\" as \"a global variable that can change over time.\" If there was a bug where a local alias \"arguments\" was getting inlined, then it's likely that bug would affect all global variables, and some project would have run into it by now.\r\n\r\nI suspect that you did see a bug, but that you mis-diagnosed what triggered it... and in an attempt to simplify the repro steps, you edited out the trigger.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for the detailed reproduction steps, I was able to reproduce this.\n- This issue was closed by revision 9fac3ccd2fa9."}
{"project_id": "Closure", "bug_id": "268", "source_type": "google", "llm_input_text": "[Title]: w3c_indexeddb.js externs: keyPath parameter in createIndex could be string or array\n[Symptom]:\nAccording to the specification [URL]\r\n\r\nkeyPath parameter in createIndex could be string or array\r\n\r\n What steps will reproduce the problem? \n\r\nIn \r\n[URL]\r\n\r\n/**\r\n * @param {string} name The name of the index.\r\n * @param {string} keyPath The path to the index key.\r\n * @param {Object=} opt_paramters Optional parameters\r\n *     for the created index.\r\n * @return {!IDBIndex} The IDBIndex object.\r\n */\r\nIDBObjectStore.prototype.createIndex = function(name, keyPath, opt_paramters) \r\n\r\n What is the expected output? What do you see instead? \n\r\n\r\n\r\n/**\r\n * @param {string} name The name of the index.\r\n * @param {string|!Array.&lt;string&gt;} keyPath The path to the index key.\r\n * @param {Object=} opt_paramters Optional parameters\r\n *     for the created index.\r\n * @return {!IDBIndex} The IDBIndex object.\r\n */\r\nIDBObjectStore.prototype.createIndex = function(name, keyPath, opt_paramters) \r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\n\r\n Please provide any additional information below.\n"}
{"project_id": "Closure", "bug_id": "269", "source_type": "google", "llm_input_text": "[Title]: Casting a function before calling it produces bad code and breaks plugin code\n[Symptom]:\n1. Compile this code with ADVANCED_OPTIMIZATIONS:\r\nconsole.log( /** @type {function(!string):!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))['GetVariable'])( '$version' ) );\r\n\r\nproduces:\r\n\r\n'use strict';console.log((0,(new window.ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash&quot;)).GetVariable)(&quot;$version&quot;));\r\n\r\n2. Compare with this code:\r\nconsole.log( /** @type {!string} */ ((new window.ActiveXObject( 'ShockwaveFlash.ShockwaveFlash' ))[Link: 'GetVariable']) )\r\n\r\nproduces:\r\n\r\n'use strict';console.log((new window.ActiveXObject(&quot;ShockwaveFlash.ShockwaveFlash&quot;)).GetVariable(&quot;$version&quot;));\r\n\r\n\r\nNotice the (0,...) wrapping around the GetVariable function in the first example. This causes the call to fail in every browser (this code is IE-only but it's just for a minimal example). The second version produces a warning that the type of GetVariable could not be determined (I enabled type warnings), and it wouldn't be possible to define these in an externs file without making a horrible mess.\r\n\r\nThis applies to all cases where functions are cast, but only causes problems (other than bloat) with plugins like this. It seems to serve no purpose whatsoever, so I assume it is a bug.\r\n\r\nRunning on a mac, not sure what version but it reports Built on: 2013/02/12 17:00, so will have been downloaded about that time.\n\n[Context/Logs]:\n- Well drat. This seems likely that this is a side effect of the introduction of the CAST node to the AST.  I'll take a look.\n- This issue was closed by revision 79a8906570f4."}
{"project_id": "Closure", "bug_id": "270", "source_type": "google", "llm_input_text": "[Title]: The compiler quotes the \"0\" keys in object literals\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile alert({0:0, 1:1});\r\n\r\nWhat is the expected output?\r\nalert({0:0, 1:1});\r\n\r\nWhat do you see instead?\r\nalert({&quot;0&quot;:0, 1:1});\r\n\r\n What version of the product are you using? On what operating system? \nLatest version on Goobuntu.\n\n[Context/Logs]:\n- Thanks. Not sure when someone will get around to fixing this.\n- This issue was closed by revision d82fb38b0121."}
{"project_id": "Closure", "bug_id": "271", "source_type": "google", "llm_input_text": "[Title]: Break in finally block isn't optimized properly\n[Symptom]:\nb: try { throw(&quot;throw me&quot;) } finally { /* fake catcher */ ; break b }; console.log(&quot;ok then...&quot;)\r\n\r\n... gets optimized into ...\r\n\r\n  throw&quot;throw me&quot;;\r\n\r\n... which is not the same.\r\n\r\nThe break in the finally block should prevent the exception from being passed on. The expected result is:\r\n\r\n   console.log(&quot;ok then...&quot;)\r\n\r\nECMA-262 says:\r\n\r\nThe production TryStatement : try Block Finally is evaluated as follows:\r\n\r\nLet B be the result of evaluating Block.\r\nLet F be the result of evaluating Finally.\r\nIf F.type is normal, return B.\r\nReturn F.\r\n\r\nF.type in this case would be 'break' and not 'normal', so 'break' overrides the 'throw' of B\r\n\r\nThis is with the build available for download on Feb 28 2013.\n\n[Context/Logs]:\n- This issue was closed by revision 211dc0161ae7."}
{"project_id": "Closure", "bug_id": "272", "source_type": "google", "llm_input_text": "[Title]: Break in finally block isn't optimized properly\n[Symptom]:\nb: try { throw(&quot;throw me&quot;) } finally { /* fake catcher */ ; break b }; console.log(&quot;ok then...&quot;)\r\n\r\n... gets optimized into ...\r\n\r\n  throw&quot;throw me&quot;;\r\n\r\n... which is not the same.\r\n\r\nThe break in the finally block should prevent the exception from being passed on. The expected result is:\r\n\r\n   console.log(&quot;ok then...&quot;)\r\n\r\nECMA-262 says:\r\n\r\nThe production TryStatement : try Block Finally is evaluated as follows:\r\n\r\nLet B be the result of evaluating Block.\r\nLet F be the result of evaluating Finally.\r\nIf F.type is normal, return B.\r\nReturn F.\r\n\r\nF.type in this case would be 'break' and not 'normal', so 'break' overrides the 'throw' of B\r\n\r\nThis is with the build available for download on Feb 28 2013.\n\n[Context/Logs]:\n- This issue was closed by revision 211dc0161ae7."}
{"project_id": "Closure", "bug_id": "273", "source_type": "google", "llm_input_text": "[Title]: IndexedDB IDBRequest missing 'error' property\n[Symptom]:\nIn IndexedDB externs [URL]\r\n\r\nIDBRequest object must have error value according to [URL]\r\n\r\nAdd \r\n\r\n\r\n/**\r\n * @type {!DOMError}\r\n * @const\r\n */\r\nIDBRequest.prototype.error;\n\n[Context/Logs]:\n- Note: \"error\" readonly not const.\n- This issue was closed by revision e80cb0bd814e."}
{"project_id": "Closure", "bug_id": "274", "source_type": "google", "llm_input_text": "[Title]: Overly aggressive comma removal\n[Symptom]:\nWhen I compile the following code using simple optimizations, \r\nfunction Test(n) {\r\n  var i = 0;\r\n  return typeof n !== &quot;undefined&quot; ? (i = n.length) : (n = &quot;foo&quot;), i\r\n}\r\nvar dummy = &quot;6chars&quot;;\r\nconsole &amp;&amp; console.log( Test(dummy) );\r\n\r\nI get this:\r\nfunction Test(a) {\r\n  return 0\r\n}\r\nvar dummy = &quot;6chars&quot;;\r\nconsole &amp;&amp; console.log(Test(dummy));\r\n\r\nWhich provides a different result than the original code.\n\n[Context/Logs]:\n- This is fixed in revision [URL]"}
{"project_id": "Closure", "bug_id": "275", "source_type": "google", "llm_input_text": "[Title]: Missing type in some extern definitions\n[Symptom]:\nThe attached patch adds type information for the following extern definitions:\r\n\r\nHTMLFrameElement.prototype.contentWindow\r\nHTMLIFrameElement.prototype.contentWindow\r\nDocument.prototype.styleSheets\n\n[Context/Logs]:\n- This issue was closed by revision 6e6c0524fdb8."}
{"project_id": "Closure", "bug_id": "276", "source_type": "google", "llm_input_text": "[Title]: Open source w3c_device_sensor_event.js\n[Symptom]:\nThe attached patch adds the definitions for W3C's DeviceOrientation and DeviceMotion events.\r\n\r\nThe iOS specific attributes (DeviceOrientationEvent.webkitCompassAccuracy and DeviceOrientationEvent.webkitCompassHeading) are included as well.\r\n\r\nOfficial spec: [URL]\n\n[Context/Logs]:\n- This is defined internally.\n- This issue was closed by revision 2601aaf5ee5a."}
{"project_id": "Closure", "bug_id": "277", "source_type": "google", "llm_input_text": "[Title]: IllegalStateException at com.google.javascript.rhino.jstype.FunctionType.getInstanceType\n[Symptom]:\n&gt; What steps will reproduce the problem?\r\n1. Unpack attached test case.\r\n2. Ensure make, wget, unzip, and java are on your PATH\r\n3. make prep (or just set up the build manually, it's not complicated)\r\n4. make crash\r\n\r\n&gt; What is the expected output? What do you see instead?\r\nExpected output: either successful compilation, or a compilation error.\r\nActual output: \r\n$ java \\\r\n\t  -jar ./compiler.jar \\\r\n\t  --js crash.js \\\r\n\t  --warning_level=VERBOSE \\\r\n\t  --compilation_level=SIMPLE_OPTIMIZATIONS\r\njava.lang.RuntimeException: java.lang.IllegalStateException\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Compiler.java:715)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:647)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:603)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(AbstractCommandLineRunner.java:783)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(AbstractCommandLineRunner.java:379)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(CommandLineRunner.java:972)\r\nCaused by: java.lang.IllegalStateException\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:133)\r\n\tat com.google.javascript.rhino.jstype.FunctionType.getInstanceType(FunctionType.java:1071)\r\n\tat com.google.javascript.jscomp.TypeCheck.visitNew(TypeCheck.java:1567)\r\n\tat com.google.javascript.jscomp.TypeCheck.visit(TypeCheck.java:569)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:534)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:528)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:528)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:528)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:528)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:528)\r\n\tat com.google.javascript.jscomp.NodeTraversal.t\n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue was closed by revision 8cef00180a5c."}
{"project_id": "Closure", "bug_id": "278", "source_type": "google", "llm_input_text": "[Title]: Optional argument in CanvasRenderingContext2D\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create the following test file &quot;test.js&quot;:\r\n\r\n/** @param {CanvasRenderingContext2D} ctx */\r\nvar f = function (ctx) {\r\n\tctx.arc(1, 2, 3, 4, 5);\r\n};\r\n\r\n2. Compile it with\r\n\r\njava -jar compiler.jar --warning_level VERBOSE test.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nNo warning expected (the output itself is correct). Warning displayed:\r\n\r\ntest.js:3: WARNING - Function CanvasRenderingContext2D.prototype.arc: called with 5 argument(s). Function requires at least 6 argument(s) and no more than 6 argument(s).\r\n\tctx.arc(1, 2, 3, 4, 5);\r\n\t^\r\n\r\n0 error(s), 1 warning(s), 100,0% typed\r\nvar f=function(a){a.arc(1,2,3,4,5)};\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: exported\r\nBuilt on: 2013/04/11 11:30\r\n\r\nMac OS 10.6.8\r\n\r\n Please provide any additional information below. \n\r\nReference document for HTML5 canvas, at [URL] , shows that the 6th argument of arc (&quot;anticlockwise&quot;) is optional. In closure-compiler file externs/html5.js, line 265 should read &quot;@param {boolean=} anticlockwise&quot; instead of &quot;@param {boolean} anticlockwise&quot;.\r\n\r\nThere are similar issues with other optional arguments, such as with function CanvasRenderingContext2D.prototype.fill; search &quot;optional&quot; in the W3 reference document.\n\n[Context/Logs]:\n- Can you provide a patch?\n- Issue 1003 has been merged into this issue.\n- This issue was closed by revision 6ada994d101c.\n- This issue was closed by revision 1288c2aa78ef."}
{"project_id": "Closure", "bug_id": "279", "source_type": "google", "llm_input_text": "[Title]: Optional argument in CanvasRenderingContext2D\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create the following test file &quot;test.js&quot;:\r\n\r\n/** @param {CanvasRenderingContext2D} ctx */\r\nvar f = function (ctx) {\r\n\tctx.arc(1, 2, 3, 4, 5);\r\n};\r\n\r\n2. Compile it with\r\n\r\njava -jar compiler.jar --warning_level VERBOSE test.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nNo warning expected (the output itself is correct). Warning displayed:\r\n\r\ntest.js:3: WARNING - Function CanvasRenderingContext2D.prototype.arc: called with 5 argument(s). Function requires at least 6 argument(s) and no more than 6 argument(s).\r\n\tctx.arc(1, 2, 3, 4, 5);\r\n\t^\r\n\r\n0 error(s), 1 warning(s), 100,0% typed\r\nvar f=function(a){a.arc(1,2,3,4,5)};\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: exported\r\nBuilt on: 2013/04/11 11:30\r\n\r\nMac OS 10.6.8\r\n\r\n Please provide any additional information below. \n\r\nReference document for HTML5 canvas, at [URL] , shows that the 6th argument of arc (&quot;anticlockwise&quot;) is optional. In closure-compiler file externs/html5.js, line 265 should read &quot;@param {boolean=} anticlockwise&quot; instead of &quot;@param {boolean} anticlockwise&quot;.\r\n\r\nThere are similar issues with other optional arguments, such as with function CanvasRenderingContext2D.prototype.fill; search &quot;optional&quot; in the W3 reference document.\n\n[Context/Logs]:\n- Can you provide a patch?\n- Issue 1003 has been merged into this issue.\n- This issue was closed by revision 6ada994d101c.\n- This issue was closed by revision 1288c2aa78ef."}
{"project_id": "Closure", "bug_id": "280", "source_type": "google", "llm_input_text": "[Title]: Different output from RestAPI and command line jar\n[Symptom]:\nWhen I compile using the jar file from the command line I get a result that is not correct. However, when I test it via the REST API or the Web UI I get a correct output. I've attached a file with the code that we are compiling.\r\n\r\n What steps will reproduce the problem? \n1. Compile the attached file with &quot;java -jar compiler.jar --js test.js&quot;\r\n2. Compile the content of the attached file on [URL]\r\n3. Compare the output, note how the following part is converted in the two cases:\r\n\r\n&quot;var foreignObject = gfx.parentNode.parentNode;\r\nvar parentContainer = foreignObject.parentNode.parentNode;&quot;\r\n\r\n What is the expected output? What do you see instead? \nThe Web UI converts the lines into: if(b){if(a=b.parentNode.parentNode,b=a.parentNode.parentNode,null!==b)\r\nThe command line converts it into: var b=a=a.parentNode.parentNode;\r\nThe Web UI results in correct code, the other results in code that tries to do &quot;c.appendChild(b)&quot; with c = b (c=a=a.parentNode.parentNode)\r\n\r\n What version of the product are you using? On what operating system? \ncompiler.jar: v20130411-90-g4e19b4e\r\nMac OSX 10.8.3\r\nJava: java 1.6.0_45\r\n\r\n Please provide any additional information below. \nWe are also using the compiler form within our java code, with the same result.\r\nWeb UI was called with:\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\n\n[Context/Logs]:\n- This issue was closed by revision e7f4269d0289."}
{"project_id": "Closure", "bug_id": "281", "source_type": "google", "llm_input_text": "[Title]: Assigning object literals to obj.prototype in a immediately executed function not recognized.\n[Symptom]:\n/** @constructor */\r\nfunction foo() {}\r\n(function() {\r\n  foo.prototype = {\r\n    alert: function() {\r\n      alert(&quot;hello world&quot;);\r\n    }\r\n  };\r\n})()\r\nwindow.console.log(foo.prototype.alert); //undefined property warning\n\n[Context/Logs]:\n- This is a major issue for my jQuery build right now.\n- This is just a warning issue? Not an optimization issue?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Correct - But if I put out code that generates warnings, I get complaints :-)\n- This issue was closed by revision 6d38965a1e0a."}
{"project_id": "Closure", "bug_id": "282", "source_type": "google", "llm_input_text": "[Title]: Generates code with invalid for/in left-hand assignment\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile this:\r\n\r\nwindow.Foo = function(A, B, C, D) {\r\n  if ( A ) {                        \r\n    if ( B ) {\r\n      C = 0;\r\n    } else {\r\n      C = 0 in D;\r\n    }\r\n    while ( C-- ) {}\r\n  }\r\n}\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected: Something that doesn't have a syntax error, maybe\r\n\r\nwindow.Foo=function(b,c,a,d){if(b)for(a=c?0:(0 in d);a--;);};\r\n\r\nActual:\r\n\r\nwindow.Foo=function(b,c,a,d){if(b)for(a=c?0:0 in d;a--;);};\r\n\r\nSyntaxError: Unexpected token ; (Chrome)\r\ninvalid for/in left-hand side (Firefox)\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL]\r\n\r\n\r\n Please provide any additional information below. \n\r\nI noticed this while attempting to minify jquery\n\n[Context/Logs]:\n- I bisected, and it appears that the first bad commit is \r\n\r\n[URL]\n- Thanks for the report!\r\n\r\nSounds like a code generation problem.\n- This issue was closed by revision 8d11b8cc7a61."}
{"project_id": "Closure", "bug_id": "283", "source_type": "google", "llm_input_text": "[Title]: Type annotation is missing for Element.prototype.outerHTML in ie_dom.js\n[Symptom]:\nThe attached patch simply adds a missing type annotation for Element.prototype.outerHTML.\n\n[Context/Logs]:\n- This issue was closed by revision c049dc0d458e."}
{"project_id": "Closure", "bug_id": "284", "source_type": "google", "llm_input_text": "[Title]: reportUnknownTypes is missing in list of valid suppressions\n[Symptom]:\nUsing the suppression &quot;reportUnknownTypes&quot; works but generates a warning because it is missing in the list of valid suppressions (src/com/google/javascript/jscomp/parsing/ParserConfig.properties).\r\n\r\nThe attached patch fixes this.\n\n[Context/Logs]:\n- This issue was closed by revision d2a2a236584b."}
{"project_id": "Closure", "bug_id": "285", "source_type": "google", "llm_input_text": "[Title]: Inconsistent handling of non-JSDoc comments\n[Symptom]:\nWhat steps will reproduce the problem? \n 1. \n 2. \n 3. \n\r\n What is the expected output? What do you see instead? \n\r\nWhen given:\r\n\r\n    /* @preserve Foo License */\r\n    alert(&quot;foo&quot;);\r\n\r\nIt spits out:\r\n\r\n    stdin:1: WARNING - Parse error. Non-JSDoc comment has annotations. Did you mean to start it with '/**'?\r\n    /* @license Foo License */\r\n    ^\r\n    \r\n    0 error(s), 1 warning(s)\r\n    alert(&quot;foo&quot;);\r\n\r\nIf I take the suggestion and change the opening of the comment to '/**', everything is great.  However, if I change it to '/*!', the warning goes away, but it doesn't preserve the comment either.\r\n\r\nI expect it to print the above warning, or preserve the comment.  That it does neither when starting with &quot;/*!&quot; (and every other character I tried) is confusing.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nTested with my compilation of the &quot;v20130603&quot; tag:\r\n\r\n    Closure Compiler (http://code.google.com/closure/compiler)\r\n    Version: v20130603\r\n    Built on: 2013/07/07 15:04\r\n\r\nAnd with the provided binary:\r\n\r\n    Closure Compiler (http://code.google.com/closure/compiler)\r\n    Version: v20130411-90-g4e19b4e\r\n    Built on: 2013/06/03 12:07\r\n\r\nI'm on Parabola GNU/Linux-libre with Java:\r\n\r\n    java version &quot;1.7.0_40&quot;\r\n    OpenJDK Runtime Environment (IcedTea 2.4.0) (ArchLinux build 7.u40_2.4.0-1-i686)\r\n    OpenJDK Server VM (build 24.0-b40, mixed mode)\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Thanks for the report. Hopefully I'll fix this today.\n- I submitted a change today that improved detection of suspicious block comments. See\r\n\r\n[URL]\r\n\r\nHowever, it doesn't fix the current issue. Basically, we want to warn for comments which contain annotations that would be checked inside a jsdoc. For example, if one writes\r\n/**\r\n * The first @param of this function is a number\r\n */\r\nthe compiler ignores the @param because it's not the first thing in that line of text. The suspicious-comment check shouldn't warn about such cases, so if there are non blank characters between /* and the tag, we don't warn. I didn't think it was worth it to special-case the check just for the case when the comment starts with /*!\r\n\r\nIn any case, thanks for the report! The new check found many suspicious comments, even though it doesn't fix the originally reported one."}
{"project_id": "Closure", "bug_id": "286", "source_type": "google", "llm_input_text": "[Title]: Type of prototype property incorrectly inferred to string\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code:\r\n\r\n/** @param {Object} a */\r\nfunction f(a) {\r\n  a.prototype = '__proto';\r\n}\r\n\r\n/** @param {Object} a */\r\nfunction g(a) {\r\n  a.prototype = function(){};\r\n}\r\n\r\n What is the expected output? What do you see instead? \n\r\nShould type check. Instead, gives error:\r\n\r\nWARNING - assignment to property prototype of Object\r\nfound   : function (): undefined\r\nrequired: string\r\n  a.prototype = function(){};\r\n  ^\n\n[Context/Logs]:\n- Maybe a better example would be:\r\n\r\n/** @param {Object} a */\r\nfunction f(a) {\r\n  a.prototype = '__proto';\r\n}\r\n\r\n/** @param {Object} a */\r\nfunction g(a) {\r\n  a.prototype = function(){};\r\n}\n- This issue was closed by revision ce86cc8e4600.\n- Nick do you mind taking a look at this change?\n- LGTM\r\n\r\nMy comment at the top of the function remains applicable :)"}
{"project_id": "Closure", "bug_id": "287", "source_type": "google", "llm_input_text": "[Title]: Externs for jquery slideDown/slideUp/slideToggle are wrong\n[Symptom]:\nThe slideUp/slideDown/slideToggle methods of jQuery also accept an options object (See [URL] but the externs provided by closure compiler doesn't support this.\r\n\r\nThe attached patch fixes the problem in all jquery externs.\n\n[Context/Logs]:\n- Great, thanks for the patch!\n- This issue was closed by revision d312c312b37c."}
{"project_id": "Closure", "bug_id": "288", "source_type": "google", "llm_input_text": "[Title]: Overzealous optimization confuses variables\n[Symptom]:\nThe following code:\r\n\r\n\t// ==ClosureCompiler==\r\n\t// @compilation_level ADVANCED_OPTIMIZATIONS\r\n\t// ==/ClosureCompiler==\r\n\tvar uid;\r\n\tfunction reset() {\r\n\t\tuid = Math.random();\r\n\t}\r\n\tfunction doStuff() {\r\n\t\treset();\r\n\t\tvar _uid = uid;\r\n\r\n\t\tif (uid &lt; 0.5) {\r\n\t\t\tdoStuff();\r\n\t\t}\r\n\r\n\t\tif (_uid !== uid) {\r\n\t\t\tthrow 'reset() was called';\r\n\t\t}\r\n\t}\r\n\tdoStuff();\r\n\r\n...gets optimized to:\r\n\r\n\tvar a;function b(){a=Math.random();0.5&gt;a&amp;&amp;b();if(a!==a)throw&quot;reset() was called&quot;;}b();\r\n\r\nNotice how _uid gets optimized away and (uid!==_uid) becomes (a!==a) even though doStuff() might have been called and uid's value may have changed and become different from _uid.\r\n\r\nAs an aside, replacing the declaration with &quot;var _uid = +uid;&quot; fixes it, as does adding an extra &quot;uid = _uid&quot; after &quot;var _uid = uid&quot;.\n\n[Context/Logs]:\n- Ya! Thanks for the nicely isolated bug report!\r\n\r\nLooks like a (non flow sensitive) variable inlining bug.\r\n\r\nAfter function inliner put down var _uid = uid = Math.random(), it might have gotten a bit too aggressive assuming _uid being replaceable by uid.\n- I have a patch that is currently in review. It should be fixed in the next release.\n- This issue was closed by revision 0123fd5303c8."}
{"project_id": "Closure", "bug_id": "289", "source_type": "google", "llm_input_text": "[Title]: Overzealous optimization confuses variables\n[Symptom]:\nThe following code:\r\n\r\n\t// ==ClosureCompiler==\r\n\t// @compilation_level ADVANCED_OPTIMIZATIONS\r\n\t// ==/ClosureCompiler==\r\n\tvar uid;\r\n\tfunction reset() {\r\n\t\tuid = Math.random();\r\n\t}\r\n\tfunction doStuff() {\r\n\t\treset();\r\n\t\tvar _uid = uid;\r\n\r\n\t\tif (uid &lt; 0.5) {\r\n\t\t\tdoStuff();\r\n\t\t}\r\n\r\n\t\tif (_uid !== uid) {\r\n\t\t\tthrow 'reset() was called';\r\n\t\t}\r\n\t}\r\n\tdoStuff();\r\n\r\n...gets optimized to:\r\n\r\n\tvar a;function b(){a=Math.random();0.5&gt;a&amp;&amp;b();if(a!==a)throw&quot;reset() was called&quot;;}b();\r\n\r\nNotice how _uid gets optimized away and (uid!==_uid) becomes (a!==a) even though doStuff() might have been called and uid's value may have changed and become different from _uid.\r\n\r\nAs an aside, replacing the declaration with &quot;var _uid = +uid;&quot; fixes it, as does adding an extra &quot;uid = _uid&quot; after &quot;var _uid = uid&quot;.\n\n[Context/Logs]:\n- Ya! Thanks for the nicely isolated bug report!\r\n\r\nLooks like a (non flow sensitive) variable inlining bug.\r\n\r\nAfter function inliner put down var _uid = uid = Math.random(), it might have gotten a bit too aggressive assuming _uid being replaceable by uid.\n- I have a patch that is currently in review. It should be fixed in the next release.\n- This issue was closed by revision 0123fd5303c8."}
{"project_id": "Closure", "bug_id": "290", "source_type": "google", "llm_input_text": "[Title]: Overzealous optimization confuses variables\n[Symptom]:\nThe following code:\r\n\r\n\t// ==ClosureCompiler==\r\n\t// @compilation_level ADVANCED_OPTIMIZATIONS\r\n\t// ==/ClosureCompiler==\r\n\tvar uid;\r\n\tfunction reset() {\r\n\t\tuid = Math.random();\r\n\t}\r\n\tfunction doStuff() {\r\n\t\treset();\r\n\t\tvar _uid = uid;\r\n\r\n\t\tif (uid &lt; 0.5) {\r\n\t\t\tdoStuff();\r\n\t\t}\r\n\r\n\t\tif (_uid !== uid) {\r\n\t\t\tthrow 'reset() was called';\r\n\t\t}\r\n\t}\r\n\tdoStuff();\r\n\r\n...gets optimized to:\r\n\r\n\tvar a;function b(){a=Math.random();0.5&gt;a&amp;&amp;b();if(a!==a)throw&quot;reset() was called&quot;;}b();\r\n\r\nNotice how _uid gets optimized away and (uid!==_uid) becomes (a!==a) even though doStuff() might have been called and uid's value may have changed and become different from _uid.\r\n\r\nAs an aside, replacing the declaration with &quot;var _uid = +uid;&quot; fixes it, as does adding an extra &quot;uid = _uid&quot; after &quot;var _uid = uid&quot;.\n\n[Context/Logs]:\n- Ya! Thanks for the nicely isolated bug report!\r\n\r\nLooks like a (non flow sensitive) variable inlining bug.\r\n\r\nAfter function inliner put down var _uid = uid = Math.random(), it might have gotten a bit too aggressive assuming _uid being replaceable by uid.\n- I have a patch that is currently in review. It should be fixed in the next release.\n- This issue was closed by revision 0123fd5303c8."}
{"project_id": "Closure", "bug_id": "291", "source_type": "google", "llm_input_text": "[Title]: Operator precedence breaks with certain combinations of *, / and %.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try to compile this: x = a % b / b * c * 2; using either simple or advanced optimizations\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected: probably x=a%b/b*c*2;\r\nActual: x=2*a%b/b*c; (2 is incorrectly bumped to the beginning)\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nHappens on latest version and online. By the looks of things the change occurred somewhere between versions 20111003 and 20111114.\r\n\r\n\r\n Please provide any additional information below. \n\r\nAs *, / and % all have the same operator precedence they should be left-to-right, but hoisting the 2 to the beginning means it's on the wrong side of the modulus operator.\n\n[Context/Logs]:\n- This issue was closed by revision e96ce395944e."}
{"project_id": "Closure", "bug_id": "292", "source_type": "google", "llm_input_text": "[Title]: catch(e) yields JSC_UNDEFINED_NAME warning when e is used in catch in advanced mode\n[Symptom]:\nWhat steps will reproduce the problem? \n1. set closure for advanced compilation\r\n2. compile this:\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\ntry {\r\nvar x = 5;\r\n}\r\ncatch(e) {\r\nvar s = &quot;FAIL&quot; + e.name + &quot;: &quot;+ e.message;\r\n}\r\n\r\n What is the expected output? What do you see instead? \nI expect no warning or error for this.  Instead I see this:\r\n\r\nJSC_UNREACHABLE_CODE: unreachable code at line 4 character 0\r\ncatch(e) {\r\n^\r\nJSC_UNDEFINED_NAME: e is never defined at line 5 character 17\r\nvar s = &quot;FAIL&quot; + e.name + &quot;: &quot;+ e.message;\r\n                 ^\r\nJSC_UNDEFINED_NAME: e is never defined at line 5 character 32\r\nvar s = &quot;FAIL&quot; + e.name + &quot;: &quot;+ e.message;\r\n                                ^\r\nIn my case I'm especially complaining about the JSC_UNDEFINED_NAME warning...  Also it seems the unreachable complaint isn't right, but i'm not sure.\r\n\r\n What version of the product are you using? On what operating system? \nI'm using this url: [URL]\r\nusing chrome browser on windows: Version 28.0.1500.95 m \r\n... but this is a server side error from what I see...\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Yeah, unfortunately the compiler doesn't model correctly variables introduced by a catch block.\r\n\r\nWe're currently in the process of rewriting the type inference algorithm and will fix this in the new algorithm. But it's not going to be ready for a couple more months.\n- @dimvar: i think you're misreading the error. it's much simpler than that. I posted a fix here:\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- As Nick mentioned, the JSC_UNREACHABLE_CODE is correct because the compiler knows that \"var x = 5;\" can never through an error. More complex code CAN throw an error and does not produce that warning. Take the following example:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\ntry {\r\n //Any of the following compile without warning\r\n //throw new Error(\"custom error\");\r\n //document.getElementById('DoesNotExist').innerHTML = 'foo';\r\n window[Link: 'MyExternalFunction'];\r\n}\r\ncatch(e) {\r\nvar s = \"FAIL\" + e.name + \": \"+ e.message;\r\n}\n- This issue was closed by revision 046e0b226e96."}
{"project_id": "Closure", "bug_id": "293", "source_type": "google", "llm_input_text": "[Title]: Prototype method incorrectly removed\n[Symptom]:\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\n/** @const */\r\nvar foo = {};\r\nfoo.bar = {\r\n  'bar1': function() { console.log('bar1'); }\r\n}\r\n\r\n/** @constructor */\r\nfunction foobar() {}\r\nfoobar.prototype = foo.bar;\r\n\r\nfoo.foobar = new foobar;\r\n\r\nconsole.log(foo.foobar['bar1']);\n\n[Context/Logs]:\n- While in the above snippet the prototype method is completely removed, the actual case I came across was doing prototype devirtualization on the quoted prototype property.\r\n\r\nSomething akin to:\r\n\r\nfoo.foobar.foobar_prototype$bar1 = true;\r\n\r\nWhich is also bad\n- Thanks for the report.\r\n\r\nRe: comment #1. Devirtualization only happens with functions.  Disambiguate properties will not remove it from the prototype.  It would be good to know which case you saw.  Neither should modify quoted properties.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision f17961ae4d3d.\n- This issue was closed by revision f17961ae4d3d."}
{"project_id": "Closure", "bug_id": "294", "source_type": "google", "llm_input_text": "[Title]: weird type-inference failure when type-casts added to an unrelated function\n[Symptom]:\nTry the following code.\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n/**\r\n * @param {string} x\r\n * @return {number}\r\n */\r\nvar f1 = function (x) {\r\n  return 3;\r\n};\r\n\r\n/** Function */\r\nvar f2 = function (x) {\r\n  if (!x) throw new Error()\r\n  return /** @type {number} */ (f1('x'))\r\n}\r\n\r\n/**\r\n * @param {string} x\r\n */\r\nvar f3 = function (x) {};\r\n\r\nf1(f3);\r\n\r\nI get the warning:\r\nactual parameter 1 of f1 does not match formal parameter\r\nfound   : function (?): undefined\r\nrequired: string\r\nf1(f3);\r\n\r\nNotice that type inference of f3 has failed.\r\n\r\nIf I remove the type-cast, the type of 'f3' is inferred correctly.\r\n\r\nactual parameter 1 of f1 does not match formal parameter\r\nfound   : function (string): undefined\r\nrequired: string\r\nf1(f3);\r\n\r\nIt seems odd to me that changing the definition of f2 breaks type inference for f3, which makes me suspect a problem with jsdoc parsing.\n\n[Context/Logs]:\n- poking at this a bit more, i think the pattern\r\nif (x) throw Error()\r\nwithout a semi-colon at the end makes the type-checker fail in all sorts of bizarre ways. Adding a semi-colon fixes the issue.\n- I see the problem. Rhino attaches crazy bogus position information to the THROW node, and the new AttachJsDoc uses this information as the source of truth.\r\n\r\nWe might want to be a bit more defensive about idiosyncratic Rhino behavior, but for now I'll apply the easy fix.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 6c43134465d9.\n- This issue was closed by revision 6c43134465d9."}
{"project_id": "Closure", "bug_id": "295", "source_type": "google", "llm_input_text": "[Title]: Wrong type name reported on missing property error.\n[Symptom]:\n/**\r\n * @constructor\r\n */\r\nfunction C2() {}\r\n\r\n/**\r\n * @constructor\r\n */\r\nfunction C3(c2) {\r\n  /**\r\n   * @type {C2} \r\n   * @private\r\n   */\r\n  this.c2_;\r\n\r\n  use(this.c2_.prop);\r\n}\r\n\r\nProduces:\r\n\r\nProperty prop never defined on C3.c2_\r\n\r\nBut should be:\r\n\r\nProperty prop never defined on C2\n\n[Context/Logs]:\n- this has bugged me too for a while\n- This issue was closed by revision 871bca1f36c5.\n- This issue was closed by revision 871bca1f36c5."}
{"project_id": "Closure", "bug_id": "296", "source_type": "google", "llm_input_text": "[Title]: Failure on attempted compression/obfuscation of attached JS file\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Open cmd line\r\n2. Execute java -jar closurecompiler.jar --warning_level QUIET --js_output_file jquery.tokenInput-1.6.1b.min.js --js jquery.tokenInput-1.6.1b.js\r\n\r\n What is the expected output? What do you see instead? \nError caused - see error.png\r\n\r\n What version of the product are you using? On what operating system? \nv20130823 on Win7-64bit\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Code review posted here when one of the other maintainers has a minute. it's a quick one.\r\n[URL]\n- This issue was closed by revision e966682f9040.\n- This issue was closed by revision e966682f9040."}
{"project_id": "Closure", "bug_id": "297", "source_type": "google", "llm_input_text": "[Title]: Google Maps API Externs Missing visualRefresh Property\n[Symptom]:\nThe visualRefresh property is missing from the maps API externs: [URL]\r\n\r\nI'm not sure who has been submitting these externs lately.\n\n[Context/Logs]:\n- Seems like they are deprecating the \"visualRefresh\" but will add it back for older externs.\n- They are deprecating it, but not until November. I can patch it it, but since those are dynamically generated it would just be overwritten.\n- This issue was closed by revision 561f18d01dc7.\n- This issue was closed by revision 561f18d01dc7."}
{"project_id": "Closure", "bug_id": "298", "source_type": "google", "llm_input_text": "[Title]: Typo in w3c_device_sensor_event.js\n[Symptom]:\nThe alpha, beta and gamma properties are missing for the DeviceRotationRate event. Probably a bad copy/paste from DeviceOrientationEvent.\r\n\r\nSee attached patch.\n\n[Context/Logs]:\n- Thanks for the patch!\r\n\r\nHave you completed a CLA? The instructions are here: [URL]\n- Yes, I've already signed the CLA (see\n[URL]\n\nDo I need to add my name into the CONTRIBUTORS file?\n\nw3c_device_sensor_event.js\n\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision d69736d4c3e7.\n- This issue was closed by revision d69736d4c3e7."}
{"project_id": "Closure", "bug_id": "299", "source_type": "google", "llm_input_text": "[Title]: CSS3 Properties Being Renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following code using advanced optimizations.\r\n\r\n    document.getElementById(&quot;id&quot;).style.appearance = &quot;button&quot;;\r\n    document.getElementById(&quot;id&quot;).style.resize = &quot;both&quot;;\r\n\r\n What is the expected output? What do you see instead? \n\r\nOutput expected : as same as the input\r\nOutput seen instead: (formatted)\r\n\r\n    document.getElementById(&quot;id&quot;).style.a = &quot;button&quot;;\r\n    document.getElementById(&quot;id&quot;).style.b = &quot;both&quot;;\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nThis error is with the live version at [URL]\n\n[Context/Logs]:\n- appearance is not standardised yet. webkitAppearance works as expected. [URL]\r\n\r\nresize does appear to be missing (although it is still technically working draft). If you want to add it to your own version, add this to externs/w3c_css.js:\r\n\r\n/**\r\n * @type {string}\r\n * @see [URL]\r\n */\r\nCSSProperties.prototype.resize;\r\n\r\nmaybe somebody will add it to the main code.\n- This issue was closed by revision 0134bb4647b0.\n- This issue was closed by revision 0134bb4647b0."}
{"project_id": "Closure", "bug_id": "300", "source_type": "google", "llm_input_text": "[Title]: No output file should be produced upon error\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create a js source file with error(s), such as file &quot;foo.js&quot; containing *&quot;x.f(); \r\n2. Compile it with option --js_output_file, e.g.\r\njava -jar compiler.jar --js_output_file foo2.js foo.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nAn error message is displayed, which is correct.\r\nFile foo2.js should not be created, or it should be deleted by closure-compiler.\r\nA file foo2.js is created, which can cause problems with make (if make is used to compile a project, the file foo2.js won't be rebuilt when make is run a second time, so the whole build may succeed without any further error from closure-compiler)\r\n\r\n What version of the product are you using? On what operating system? \n\r\nversionClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: exported\r\nBuilt on: 2013/04/11 11:30\r\n\r\nOS X 10.6.8\r\n\r\n Please provide any additional information below. \n\r\nSame problem with more minor errors thrown with options &quot;--compilation_level ADVANCED_OPTIMIZATIONS --warning_level VERBOSE&quot;\n\n[Context/Logs]:\n- wouldn't the inputs have to change to correct underlying problem? And then wouldn't the output need to be rebuild?\n- To correct the underlying problem, yes, the input should be changed. But if for any reason you don't change it before building it a 2nd time (e.g. there are other bugs to fix first, or you're interrupted and forget about it, or you start vi, forget the line number, exit vi and rebuild the project to try to see the error message again), the build looks successful because make won't run closure-compiler again.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 37880c308608.\n- This issue was closed by revision a555e3fdbd56."}
{"project_id": "Closure", "bug_id": "301", "source_type": "google", "llm_input_text": "[Title]: No output file should be produced upon error\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create a js source file with error(s), such as file &quot;foo.js&quot; containing *&quot;x.f(); \r\n2. Compile it with option --js_output_file, e.g.\r\njava -jar compiler.jar --js_output_file foo2.js foo.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nAn error message is displayed, which is correct.\r\nFile foo2.js should not be created, or it should be deleted by closure-compiler.\r\nA file foo2.js is created, which can cause problems with make (if make is used to compile a project, the file foo2.js won't be rebuilt when make is run a second time, so the whole build may succeed without any further error from closure-compiler)\r\n\r\n What version of the product are you using? On what operating system? \n\r\nversionClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: exported\r\nBuilt on: 2013/04/11 11:30\r\n\r\nOS X 10.6.8\r\n\r\n Please provide any additional information below. \n\r\nSame problem with more minor errors thrown with options &quot;--compilation_level ADVANCED_OPTIMIZATIONS --warning_level VERBOSE&quot;\n\n[Context/Logs]:\n- wouldn't the inputs have to change to correct underlying problem? And then wouldn't the output need to be rebuild?\n- To correct the underlying problem, yes, the input should be changed. But if for any reason you don't change it before building it a 2nd time (e.g. there are other bugs to fix first, or you're interrupted and forget about it, or you start vi, forget the line number, exit vi and rebuild the project to try to see the error message again), the build looks successful because make won't run closure-compiler again.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 37880c308608.\n- This issue was closed by revision a555e3fdbd56."}
{"project_id": "Closure", "bug_id": "302", "source_type": "google", "llm_input_text": "[Title]: compiler crash on goog.scope locals\n[Symptom]:\ngoog.provide(&quot;main&quot;);\r\ngoog.scope (function (){\r\n  var a = foo, b, c = 1;\r\n});\r\n\r\nReported by Thomas Fischer\r\n\r\nThere are 2 separate issues here: that there's an error, and that the error make the compiler crash.\n\n[Context/Logs]:\n- Code review at\r\n[URL]\n- This issue was closed by revision d2b3ca66b608.\n- This issue was closed by revision d2b3ca66b608."}
{"project_id": "Closure", "bug_id": "303", "source_type": "google", "llm_input_text": "[Title]: Erroneous optimization in ADVANCED_OPTIMIZATIONS mode\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Create a file input.js with the following &quot;minimal&quot; test case:\r\n\r\n    window[&quot;anchor&quot;] = function (obj, modifiesProp) {\r\n        return (function (saved) {\r\n            return modifiesProp(obj) + saved;\r\n        })(obj[&quot;prop&quot;]);\r\n    }\r\n\r\n2. Compile it with:\r\n\r\n    java -jar .../build/compiler.jar                    \\\r\n        --compilation_level ADVANCED_OPTIMIZATIONS      \\\r\n        --warning_level VERBOSE                         \\\r\n        --externs window.js                             \\\r\n        --js input.js                                   \\\r\n        --js_output_file output.js\r\n\r\n3. That's all!\r\n\r\nWhat is the expected output?\r\n\r\n    window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};\r\n\r\nWhat do you see instead?\r\n\r\n    window.foo=function(a,b){return b(a)+a.prop};\r\n\r\nNote how this is semantically very different if modifiesProp/b (whose\r\nsemantics are unknown to the compiler) side-effects a.prop.\r\n\r\nThe evaluation order of + is well-defined in EcmaScript 5, but even\r\nthen, this happens even if one substitutes the , (comma) operator.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nGit HEAD\r\n\r\n    commit  \r\n    Author: Chad Killingsworth &lt;chadkillingsworth@missouristate.edu&gt;\r\n    Date:   Wed Sep 25 14:52:28 2013 -0500\r\n    \r\n        Add history.state to html5 externs\r\n\r\non Linux.\n\n[Context/Logs]:\n- I had another look at this, and have cooked up the attached patch, which\r\n*seems* safe (as it only disables optimizations), but wreaks havoc in\r\nthe inliner's test suite.\r\n\r\nDisabling \"direct call node\" inlining on Node.mayHaveSideEffects() may\r\nseem a bit drastic, but a downstream pass still performs inlining\u2014while\r\nintroducing the required temp!\u2014on my small test case.  Not sure if/when\r\nthat pass is activated, though, so the change may have a more dramatic\r\neffect on some code bases.\r\n\r\nUnfortunately, I lack the time to study the innards of Closure and sift\r\nthrough these failures; it would be great if somebody familiar with the\r\ncompiler could comment on the next steps to undertake.\r\n\r\nCheers,\r\nDamien Diederen\n- ouch, thanks for the report.  The change in the patch is overly aggressive: we don't need to do this if there aren't any arguments or all of the arguments are literals or otherwise can't be side-effected.\r\n\r\nIf you want to try your hand at a better patch:\r\n\r\nchange \"canInlineReferenceDirectly\" to check if the function body has side-effects and if it does back out if any of the arguments can be side-effected (NodeUtil.canBeSideEffected)\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 038da2119223.\n- Finally got to bump the version of closure used in my project, and can confirm the fix.  Thanks!"}
{"project_id": "Closure", "bug_id": "304", "source_type": "google", "llm_input_text": "[Title]: toDataURL in HTML5 externs is lacking optional quality parameter\n[Symptom]:\ntoDataURL supports more than just a type argument. (see the introduction just above here: [URL]\r\n\r\nSo this code in externs/html5.js:\r\n\r\n/**\r\n * @param {string=} opt_type\r\n * @return {string}\r\n * @throws {Error}\r\n * @nosideeffects\r\n */\r\nHTMLCanvasElement.prototype.toDataURL = function(opt_type) {};\r\n\r\nshould be this:\r\n\r\n/**\r\n * @param {string=} opt_type\r\n * @param {...*} var_args\r\n * @return {string}\r\n * @throws {Error}\r\n * @nosideeffects\r\n */\r\nHTMLCanvasElement.prototype.toDataURL = function(opt_type,var_args) {};\r\n\r\nI don't know if this affects any other functions. Using an optional number would also work for now, since JPEG is the only type which makes use of the arguments (and it takes a number), but I think keeping it variadic is better.\n\n[Context/Logs]:\n- This issue was closed by revision c5bd643353b6.\n- This issue was closed by revision c5bd643353b6."}
{"project_id": "Closure", "bug_id": "305", "source_type": "google", "llm_input_text": "[Title]: Memory leak from Tracer.ThreadTrace when useThreads is set to false\n[Symptom]:\ncopied from issue 685\r\n\r\nThe `ThreadLocal` is created from the `Tracer.getThreadTrace()` method which is called in the constructor.\r\nThe ThreadLocal is only removed from within `Tracer.clearThreadTrace`. This is called from `clearCurrentThreadTrace()` - which is completely unused - and from `logAndClearCurrentThreadTrace()`. The latter is only called from within the `bootCompilerThread` `Callable`. And that - despite being created unconditionally - is only used if `Compiler.useThreads` is `true`.\r\nThat means that if `Compiler.useThreads` is `false`, the `ThreadLocal` is created but never removed.\n\n[Context/Logs]:\n- Do you want to send a patch?\n- I tried to come up with a fix, but I'm not entirely sure if it breaks anything. I have only skimmed through the code. But all the tests pass.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 2d6e1c78f412.\n- This issue was closed by revision 2d6e1c78f412."}
{"project_id": "Closure", "bug_id": "306", "source_type": "google", "llm_input_text": "[Title]: Erroneous optimization in ADVANCED_OPTIMIZATIONS mode\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Create a file input.js with the following &quot;minimal&quot; test case:\r\n\r\n    window[&quot;anchor&quot;] = function (obj, modifiesProp) {\r\n        return (function (saved) {\r\n            return modifiesProp(obj) + saved;\r\n        })(obj[&quot;prop&quot;]);\r\n    }\r\n\r\n2. Compile it with:\r\n\r\n    java -jar .../build/compiler.jar                    \\\r\n        --compilation_level ADVANCED_OPTIMIZATIONS      \\\r\n        --warning_level VERBOSE                         \\\r\n        --externs window.js                             \\\r\n        --js input.js                                   \\\r\n        --js_output_file output.js\r\n\r\n3. That's all!\r\n\r\nWhat is the expected output?\r\n\r\n    window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};\r\n\r\nWhat do you see instead?\r\n\r\n    window.foo=function(a,b){return b(a)+a.prop};\r\n\r\nNote how this is semantically very different if modifiesProp/b (whose\r\nsemantics are unknown to the compiler) side-effects a.prop.\r\n\r\nThe evaluation order of + is well-defined in EcmaScript 5, but even\r\nthen, this happens even if one substitutes the , (comma) operator.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nGit HEAD\r\n\r\n    commit  \r\n    Author: Chad Killingsworth &lt;chadkillingsworth@missouristate.edu&gt;\r\n    Date:   Wed Sep 25 14:52:28 2013 -0500\r\n    \r\n        Add history.state to html5 externs\r\n\r\non Linux.\n\n[Context/Logs]:\n- I had another look at this, and have cooked up the attached patch, which\r\n*seems* safe (as it only disables optimizations), but wreaks havoc in\r\nthe inliner's test suite.\r\n\r\nDisabling \"direct call node\" inlining on Node.mayHaveSideEffects() may\r\nseem a bit drastic, but a downstream pass still performs inlining\u2014while\r\nintroducing the required temp!\u2014on my small test case.  Not sure if/when\r\nthat pass is activated, though, so the change may have a more dramatic\r\neffect on some code bases.\r\n\r\nUnfortunately, I lack the time to study the innards of Closure and sift\r\nthrough these failures; it would be great if somebody familiar with the\r\ncompiler could comment on the next steps to undertake.\r\n\r\nCheers,\r\nDamien Diederen\n- ouch, thanks for the report.  The change in the patch is overly aggressive: we don't need to do this if there aren't any arguments or all of the arguments are literals or otherwise can't be side-effected.\r\n\r\nIf you want to try your hand at a better patch:\r\n\r\nchange \"canInlineReferenceDirectly\" to check if the function body has side-effects and if it does back out if any of the arguments can be side-effected (NodeUtil.canBeSideEffected)\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 038da2119223.\n- Finally got to bump the version of closure used in my project, and can confirm the fix.  Thanks!"}
{"project_id": "Closure", "bug_id": "307", "source_type": "google", "llm_input_text": "[Title]: Bug in require calls processing\n[Symptom]:\nThe Problem\r\n\r\nProcessClosurePrimitives pass has a bug in processRequireCall method.\r\nThe method processes goog.require calls. If a require symbol is invalid i.e is not provided anywhere, the method collects it for further error reporting. If the require symbol is valid, the method removes it from the ast.\r\n\r\nAll invalid require calls must be left for further using/checking of the code! The related comment in the code confirms this.\r\n\r\nNevertheless, the second condition (requiresLevel.isOn() -&gt; see source code) is invalid and always causes removing of the requires when we want to check these requires.\r\n\r\nIn any case, the method should not use the requiresLevel to decide if we need removing. The requiresLevel should be used to check if we need error reporting. \r\n\r\nThe Solution\r\n\r\nRemove the condition.\r\nPlease see the attached patch.\n\n[Context/Logs]:\n- Nick any chance you want to take a look at this?\n- This issue was closed by revision 87071ddf324c.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 87071ddf324c.\n- This issue was closed by revision 0fb76a81bbdd."}
{"project_id": "Closure", "bug_id": "308", "source_type": "google", "llm_input_text": "[Title]: Crash on the web closure compiler\n[Symptom]:\nWith the web application (http://closure-compiler.appspot.com/home)\r\n\r\nConfig:\r\n\r\n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\n\r\n\r\nCode:\r\n\r\nvar g=function(m){return m*Math.random()|0},d=document,h=d.getElementById('h'),c=d.getElementById('c'),l;\r\n(l=function(){requestAnimationFrame(l);h.style.textShadow=&quot;0 0 1px #000,&quot;+(g(10)-5)+&quot;px &quot;+(g(10)-5)+&quot;px 0 #888,0 0 180px rgb(&quot;+g(255)+&quot;,&quot;+g(255)+&quot;,&quot;+g(255)+&quot;)&quot;})();\r\nd.addEventListener('mousemove',function(v){c.style.marginTop=(v.pageY/10+15|0)+'px'})\r\n\r\n\r\nCause:\r\n\r\nvar l; // D\u00e9clare l variable\r\n\r\n// Store function in l var and call\r\n(l = function(){ ... })       ();\r\n\r\n\r\nCrash repport: (long)\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable l\r\n  Node(NAME l): Input_0:2:36\r\n(l=function(){requestAnimationFrame(l);h.style.textShadow=&quot;0 0 1px #000,&quot;+(g(10)-5)+&quot;px &quot;+(g(10)-5)+&quot;px 0 #888,0 0 180px rgb(&quot;+g(255)+&quot;,&quot;+g(255)+&quot;,&quot;+g(255)+&quot;)&quot;})();\r\n  Parent(CALL): Input_0:2:14\r\n(l=function(){requestAnimationFrame(l);h.style.textShadow=&quot;0 0 1px #000,&quot;+(g(10)-5)+&quot;px &quot;+(g(10)-5)+&quot;px 0 #888,0 0 180px rgb(&quot;+g(255)+&quot;,&quot;+g(255)+&quot;,&quot;+g(255)+&quot;)&quot;})();\r\n\r\n\tat com.google.javascript.jscomp.VarCheck.visit(VarCheck.java:159)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:544)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:538)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:538)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:538)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:538)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseRoots(NodeTraversal.java:318\n...[Description Truncated]...\n\n[Context/Logs]:\n- Thank you for the repro case.\n- Looks like a \"smart name removal\" problem. I think I'm going to rename that pass to \"dumb name removal\"\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 5f03c6817341.\n- This issue was closed by revision 5f03c6817341."}
{"project_id": "Closure", "bug_id": "309", "source_type": "google", "llm_input_text": "[Title]: Bug in require calls processing\n[Symptom]:\nThe Problem\r\n\r\nProcessClosurePrimitives pass has a bug in processRequireCall method.\r\nThe method processes goog.require calls. If a require symbol is invalid i.e is not provided anywhere, the method collects it for further error reporting. If the require symbol is valid, the method removes it from the ast.\r\n\r\nAll invalid require calls must be left for further using/checking of the code! The related comment in the code confirms this.\r\n\r\nNevertheless, the second condition (requiresLevel.isOn() -&gt; see source code) is invalid and always causes removing of the requires when we want to check these requires.\r\n\r\nIn any case, the method should not use the requiresLevel to decide if we need removing. The requiresLevel should be used to check if we need error reporting. \r\n\r\nThe Solution\r\n\r\nRemove the condition.\r\nPlease see the attached patch.\n\n[Context/Logs]:\n- Nick any chance you want to take a look at this?\n- This issue was closed by revision 87071ddf324c.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 87071ddf324c.\n- This issue was closed by revision 0fb76a81bbdd."}
{"project_id": "Closure", "bug_id": "310", "source_type": "google", "llm_input_text": "[Title]: Template types on methods incorrectly trigger inference of a template on the class if that template type is unknown\n[Symptom]:\nSee i.e.\r\n\r\n\r\n\r\n/**\r\n  * @constructor\r\n  * @template CLASS\r\n  */\r\nvar Class = function() {};\r\n\r\n/**\r\n  * @param {function(CLASS):CLASS} a\r\n  * @template T\r\n  */\r\nClass.prototype.foo = function(a) {\r\n  return 'string';\r\n};\r\n\r\n/** @param {number} a\r\n  * @return {string} */\r\nvar a = function(a) { return '' };\r\n\r\nnew Class().foo(a);\r\n\r\n\r\nThe CLASS type is never specified. If the @template T line is removed from the foo method, the block compiles with but with the @annotation on the method, the compiler seems to try to infer CLASS from the usage and fails compilation.\n\n[Context/Logs]:\n- This issue was closed by revision b168c8822b2d.\n- This issue was closed by revision b168c8822b2d."}
{"project_id": "Closure", "bug_id": "311", "source_type": "google", "llm_input_text": "[Title]: empty block comment?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Compile any file containing an empty, without whitespace, block comment: /**/\r\n\r\n2. Compiler reports: JSC_PARSE_ERROR: Parse error. Unexpected end of file\r\n\r\n\r\nAFAIK &quot;/**/&quot; is valid JS syntax and should thus simply be treated as a comment (if not, the error message should still be changed to be relevant).\r\n\r\nRegards\r\n/ Fredrik Blomqvist\n\n[Context/Logs]:\n- note: the compiler reports this as a warning. Compilation continues successfully and produces working code.\n- fix posted here\r\n[URL]\n- This issue was closed by revision 450f0f6ef5d9.\n- This issue was closed by revision 450f0f6ef5d9."}
{"project_id": "Closure", "bug_id": "312", "source_type": "google", "llm_input_text": "[Title]: goog.isArray doesn't hint compiler\n[Symptom]:\nWhat steps will reproduce the problem? \n 1. \n\r\n/**\r\n * @param {*} object\r\n * @return {*}\r\n */\r\nvar test = function(object) {\r\n  if (goog.isArray(object)) {\r\n    /** @type {Array} */ var x = object;\r\n    return x;\r\n  }\r\n};\r\n\r\n2. ADVANCED_OPTIMIZATIONS\r\n\r\n What is the expected output? What do you see instead? \n\r\nERROR - initializing variable\r\nfound   : *\r\nrequired: (Array|null)\r\n    /** @type {Array} */ var x = object;\r\n                                 ^\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20130411-90-g4e19b4e\r\nBuilt on: 2013/06/03 12:07\r\n\r\n Please provide any additional information below. \n\r\ngoog.is* is supposed to help the compiler to check which type we're dealing with.\n\n[Context/Logs]:\n- fix posted here\r\n[URL]\n- This issue was closed by revision 6f981f77e5bd.\n- This issue was closed by revision 6f981f77e5bd."}
{"project_id": "Closure", "bug_id": "313", "source_type": "google", "llm_input_text": "[Title]: It takes nearly on hour to compile this file\n[Symptom]:\nWhat steps will reproduce the problem? \n1. wget [URL]\r\n2. time java -jar compiler.jar --compilation_level WHITESPACE_ONLY --js core.js --js_output_file painful-clojurescript-compilation-whitespace-manual.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI just expect it to take a reasonable amount of time to compile. Under a minute? Ironically, whitespace optimizations only takes the longest, but none of the optimizations take less than 45 minutes.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20131014\r\nBuilt on: 2013/10/15 09:45\r\n\r\nMacBook Air 2 GHz Intel Core i7\r\n8 GB 1600 Mhz DDR3\r\nIntel HD Graphics 4000 512 MB\r\nOS X 10.8.5 (12F45)\r\n\r\n Please provide any additional information below. \n\r\ncore.js is a file generated by clojurescript from [URL]\n\n[Context/Logs]:\n- try inserting some new lines. when i replace \",new\" with \",\\nnew\", compile times go down to about 3 sec.\n- I also posted a fix here\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 5917817198c1.\n- This issue was closed by revision 5917817198c1."}
{"project_id": "Closure", "bug_id": "314", "source_type": "google", "llm_input_text": "[Title]: Allow @private top-level functions in goog.scope\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n 1. \ngoog.scope(function() {\r\n    /* @private */\r\n    function test() {}\r\n});\r\n\r\n 2. \nThe code above gives an error &quot;The local variable test is in a goog.scope and is not an alias.&quot;\r\n\r\nWhat is the expected output?\r\n\r\nThe code above should compile, and function test() be referenceable only from inside the file in question. If I replace &quot;function test&quot; with &quot;var test = function&quot;, the code compiles.\n\n[Context/Logs]:\n- Nick, let me know me if you don't have time to look at this (no hurry).\n- I'll take care of it. It's just a little bit tricky because of function hoisting.\n- This issue was closed by revision 13fb7fcbcad8.\n- This issue was closed by revision 13fb7fcbcad8."}
{"project_id": "Closure", "bug_id": "315", "source_type": "google", "llm_input_text": "[Title]: Erroneous optimization in ADVANCED_OPTIMIZATIONS mode\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Create a file input.js with the following &quot;minimal&quot; test case:\r\n\r\n    window[&quot;anchor&quot;] = function (obj, modifiesProp) {\r\n        return (function (saved) {\r\n            return modifiesProp(obj) + saved;\r\n        })(obj[&quot;prop&quot;]);\r\n    }\r\n\r\n2. Compile it with:\r\n\r\n    java -jar .../build/compiler.jar                    \\\r\n        --compilation_level ADVANCED_OPTIMIZATIONS      \\\r\n        --warning_level VERBOSE                         \\\r\n        --externs window.js                             \\\r\n        --js input.js                                   \\\r\n        --js_output_file output.js\r\n\r\n3. That's all!\r\n\r\nWhat is the expected output?\r\n\r\n    window.foo=function(a,b){var HOLD=a.prop;return b(a)+HOLD};\r\n\r\nWhat do you see instead?\r\n\r\n    window.foo=function(a,b){return b(a)+a.prop};\r\n\r\nNote how this is semantically very different if modifiesProp/b (whose\r\nsemantics are unknown to the compiler) side-effects a.prop.\r\n\r\nThe evaluation order of + is well-defined in EcmaScript 5, but even\r\nthen, this happens even if one substitutes the , (comma) operator.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nGit HEAD\r\n\r\n    commit  \r\n    Author: Chad Killingsworth &lt;chadkillingsworth@missouristate.edu&gt;\r\n    Date:   Wed Sep 25 14:52:28 2013 -0500\r\n    \r\n        Add history.state to html5 externs\r\n\r\non Linux.\n\n[Context/Logs]:\n- I had another look at this, and have cooked up the attached patch, which\r\n*seems* safe (as it only disables optimizations), but wreaks havoc in\r\nthe inliner's test suite.\r\n\r\nDisabling \"direct call node\" inlining on Node.mayHaveSideEffects() may\r\nseem a bit drastic, but a downstream pass still performs inlining\u2014while\r\nintroducing the required temp!\u2014on my small test case.  Not sure if/when\r\nthat pass is activated, though, so the change may have a more dramatic\r\neffect on some code bases.\r\n\r\nUnfortunately, I lack the time to study the innards of Closure and sift\r\nthrough these failures; it would be great if somebody familiar with the\r\ncompiler could comment on the next steps to undertake.\r\n\r\nCheers,\r\nDamien Diederen\n- ouch, thanks for the report.  The change in the patch is overly aggressive: we don't need to do this if there aren't any arguments or all of the arguments are literals or otherwise can't be side-effected.\r\n\r\nIf you want to try your hand at a better patch:\r\n\r\nchange \"canInlineReferenceDirectly\" to check if the function body has side-effects and if it does back out if any of the arguments can be side-effected (NodeUtil.canBeSideEffected)\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 038da2119223.\n- Finally got to bump the version of closure used in my project, and can confirm the fix.  Thanks!"}
{"project_id": "Closure", "bug_id": "316", "source_type": "google", "llm_input_text": "[Title]: DiagnosticGroup NullPointer\n[Symptom]:\nWhat steps will reproduce the problem? \nThe error does not happen consistently. We were running the closure compiler in 2 threads, each with its own compiler options. Sometimes DiagnosticGroup throws a NullPointerExpception. We were running it with simple optimizations and warning level quiet.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nv20130722 running Jenkins on Solaris\r\n\r\n Please provide any additional information below. \nCaused by: java.lang.NullPointerException\r\n\tat com.google.javascript.jscomp.DiagnosticGroup.isSubGroup(DiagnosticGroup.java:117)\r\n\tat com.google.javascript.jscomp.DiagnosticGroupWarningsGuard.disables(DiagnosticGroupWarningsGuard.java:42)\r\n\tat com.google.javascript.jscomp.ComposeWarningsGuard.disables(ComposeWarningsGuard.java:130)\r\n\tat com.google.javascript.jscomp.CompilerOptions.disables(CompilerOptions.java:1175)\r\n\tat com.google.javascript.jscomp.Compiler.reconcileOptionsWithGuards(Compiler.java:317)\r\n\tat com.google.javascript.jscomp.Compiler.initOptions(Compiler.java:297)\r\n\tat com.google.javascript.jscomp.Compiler.initModules(Compiler.java:398)\r\n\tat com.google.javascript.jscomp.Compiler.init(Compiler.java:377)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:599)\r\n\tat com.rightmove.closurecompiler.ClosureCompilerWorker.call(ClosureCompilerWorker.java:30)\r\n\tat com.rightmove.closurecompiler.ClosureCompilerWorker.call(ClosureCompilerWorker.java:14)\r\n\t... 5 more\n\n[Context/Logs]:\n- Were you sharing diagnostic class instances between the compiler options objects?  They really need to be \"owned\" by a compiler options object.\n- No I was not using the diagnostics class directly. I was using CompilationLevel.setOptionsForCompilationLevel() and WarningLevel.setOptionsForWarningLevel() to update the compiler options. Each thread has its own instance of CompilerOptions\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 763faa34d5e6.\n- This issue was closed by revision bb893266036c."}
{"project_id": "Closure", "bug_id": "317", "source_type": "google", "llm_input_text": "[Title]: Constructor types that return all or unknown fail to parse\n[Symptom]:\nConstructor types that return the all type or the unknown type currently fail to parse:\r\n\r\n/** @type {function(new:?)} */ var foo = function() {};\r\n/** @type {function(new:*)} */ var bar = function() {};\r\n\r\nfoo.js:1: ERROR - Bad type annotation. type not recognized due to syntax error\r\n/** @type {function(new:?)} */ var foo = function() {};\r\n                        ^\r\n\r\nfoo.js:2: ERROR - Bad type annotation. type not recognized due to syntax error\r\n/** @type {function(new:*)} */ var bar = function() {};\r\n                        ^\r\n\r\nThis is an issue for a code generator that I'm working on.\n\n[Context/Logs]:\n- This seems similar to issue 790\n- The parse simply needs to change from only accepting a type name to accepting a type (a one line change + tests, I would think).  It seems reasonable that this could be a record type or anything else.   \r\n\r\nThe work around it to use a typedef:\r\n\r\n/** @typedef {?} */\r\nvar Unknown;\r\n\r\n/** @type {function(new:Unknown)} */\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 763faa34d5e6.\n- This issue was closed by revision 7d26b7bcae83."}
{"project_id": "Closure", "bug_id": "318", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "319", "source_type": "google", "llm_input_text": "[Title]: initial type of variable wrong when initialize in a \"var\" statement with type declaration.\n[Symptom]:\nThe following code doesn't give any warning even though it is an obvious bug:\r\n\r\n-------------===============================---------\r\n/**\r\n * @constructor\r\n */\r\nfunction MyClass() {\r\n  this.value = 1;\r\n}\r\n\r\nMyClass.prototype.show = function() {\r\n  window.console.log(this.value)\r\n}\r\n\r\n/**\r\n * @type {MyClass}\r\n */\r\nvar x = null;\r\nx.show();\r\n-------------===============================---------\r\n\r\nHowever, if you remove the @type from the var declaration, then closure realizes the problem and warns about x being null rather than an Object.\r\n\r\nIn any case, since x &quot;can be null&quot;, closure should warn about a potential null pointer error, and suggest to guard against the null value, like it does if we try to pass x as an argument where a non-null type is expected. That could be an optional behavior protected behind a flag, but it would definitely help catch lots of errors and write safer code.\r\n\r\nI am using the latest closure version available to date, on Ubuntu 13.04, on an amd64 machine.\n\n[Context/Logs]:\n- We don't plan to warn about potential null pointers wherever there is a nullable object type because it will give numerous spurious warnings.\r\n\r\nIn your example, the reason there is no warning is because when the type of the variable is declared, the compiler always treats it as having that type, even if it can have a subtype. (We may revisit this decision in the future, but there is no specific plan at the moment.)\n- This isn't quite right.\r\n1) x isn't always consider \"MyClass|null\", while assignments are restricted to subtypes of MyClass or null, the actual value type in the flow are known.\r\n\r\n2) While it is true that in general we don't want to warn about potential null values (there are too many false positives), we can and do warn about values that can only be null:\r\n\r\n/** @type {Object} */\r\nvar x;\r\nx = null;\r\nx.call();\r\n\r\nproduces:\r\n\r\nJSC_TYPE_MISMATCH: No properties on this expression\r\nfound   : null\r\nrequired: Object at line 7 character 0\r\nx.call();\r\n\r\nAs has been brought up before, initial type of x in the example is currently wrong, it should be declared to be \"MyClass|null\" but its initial value at declaration should be \"null\" in the flow.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision aeed47f424d9.\n- This issue was closed by revision aeed47f424d9."}
{"project_id": "Closure", "bug_id": "320", "source_type": "google", "llm_input_text": "[Title]: precondition crash: goog.scope local with aliased in the type declaration\n[Symptom]:\nvar goog = {};\r\ngoog.scope;\r\n\r\nvar ns = {};\r\nns.sub = {};\r\n/** @constructor */\r\nns.sub.C = function() {};\r\n\r\n\r\ngoog.scope(function() {\r\n  var sub = ns.sub;\r\n  /** @type {sub.C} */\r\n  var x = null;\r\n});\r\n\r\n\r\nproduces:\r\n\r\njava.lang.IllegalStateException at com.google.common.base.Preconditions.checkState(Preconditions.java:137) at com.google.javascript.jscomp.ScopedAliases$AliasedTypeNode.applyAlias(ScopedAliases.java:236) at com.google.javascript.jscomp.ScopedAliases.hotSwapScript(ScopedAliases.java:147) at com.google.javascript.jscomp.ScopedAliases.process(ScopedAliases.java:128) at\n\n[Context/Logs]:\n- whew, this is really subtle, and it took me a while to figure out what was going on. We do a shallow clone of the jsdoc multiple times in the tree. This usually makes total sense, because jsdoc is usually immutable. But ScopedAliases also rewrites jsdoc, and it's getting into a weird state where its internal bookkeeping is wrong.\n- fix posted here:\r\n[URL]\n- This issue was closed by revision aae547f4d911.\n- This issue was closed by revision aae547f4d911."}
{"project_id": "Closure", "bug_id": "321", "source_type": "google", "llm_input_text": "[Title]: Variable names prefixed with MSG_ cause error with advanced optimizations\n[Symptom]:\nVariables named something with MSG_ seem to cause problems with the module system, even if no modules are used in the code.\r\n\r\n$ echo &quot;var MSG_foo='bar'&quot; | closure --compilation_level ADVANCED_OPTIMIZATIONS\r\nstdin:1: ERROR - message not initialized using goog.getMsg\r\nvar MSG_foo='bar'\r\n    ^\r\n\r\nIt works fine with msg_foo, MSG2_foo, etc.\n\n[Context/Logs]:\n- It actually isn't modules related at all but has to do with goog.getMsg call replacements. The compiler is using the prefix 'MSG_' internally - which is conflicting with your variable names.\r\n\r\nIt seems to me like the compiler should use a prefix less likely to collide with user prefixes. Something like 'JSCompiler_MSG_'. However I'm unsure of the impact this would have on internal Google projects. But if this is the case, then the prefix should be moved to a coding convention at a minimum.\n- Ok. Prefixing internal names with __ would make sense since that's usually used to indicate an implementation/browser-level identifier. So perhaps __JSCompiler_MSG_*.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 49e9565febba.\n- This issue was closed by revision 49e9565febba."}
{"project_id": "Closure", "bug_id": "322", "source_type": "google", "llm_input_text": "[Title]: Looping (\u03c9) Combinator RuntimeException\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Enter: function f(k) { return k(k); } alert(f(f))\r\n2. Select ADVANCED_OPTIMIZATIONS\r\n3. Compile\r\n\r\n What is the expected output? What do you see instead? \nI am unsure what the desired output would be as the expression won't terminate but I received the following stack trace:\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nFixed point loop exceeded the maximum number of iterations.\r\n\tat com.google.javascript.jscomp.Compiler.throwInternalError(Compiler.java:2168)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer$Loop.process(PhaseOptimizer.java:422)\r\n\tat com.google.javascript.jscomp.PhaseOptimizer.process(PhaseOptimizer.java:215)\r\n...\r\n\r\n What version of the product are you using? On what operating system? \nClosure Compiler web UI, Google Chrome, Mac OS X 10.8.5\n\n[Context/Logs]:\n- I assume this is the function inliner going crazy.\n- If you want to try your hand at a fix, the first step is probably to create a unit test reproducing the bug in:\r\n[URL]\r\n\r\nThen we'll need to think of how to improve the inlining heuristic.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 1d5246873fe8.\n- This issue was closed by revision 1d5246873fe8."}
{"project_id": "Closure", "bug_id": "323", "source_type": "google", "llm_input_text": "[Title]: calling hasOwnProperty on an object should prevent property trimming similar to using [] as an accessor\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the following code with advanced optimizations:\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n// ADD YOUR CODE HERE\r\nvar foo = {'a': true, 'b': true }\r\n\r\nconsole.log(foo.hasOwnProperty('a'));\r\n\r\n// Uncomment the following to get the properties of foo to stick.\r\n//console.log(foo['a']);\r\n\r\n What is the expected output? What do you see instead? \nExpected:\r\nEither something highly optimized like the [] accessor only version of the code above: console.log(!0);, or at least accurate like:\r\nconsole.log({a:!0,b:!0}.hasOwnProperty(&quot;a&quot;));\r\n\r\nActual:\r\nconsole.log({}.hasOwnProperty(&quot;a&quot;));\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Looks like CollapseProperties is not respecting quoted properties.\n- Using the \"safe\" version of hasOwnProperties will work:\r\n\r\nObject.prototype.hasOwnProperty.call(foo, 'a');\r\n\r\nand protects against a property called \"hasOwnProperty\"\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 16f7df6d709b.\n- This issue was closed by revision 70c40cc148e4."}
{"project_id": "Closure", "bug_id": "324", "source_type": "google", "llm_input_text": "[Title]: type-checking across commonjs modules\n[Symptom]:\nTranscribed from this thread:\r\n[URL]\r\n\r\n//------------------\r\n//app.js\r\n\r\nvar Hello = require('./Hello.js');\r\n\r\nvar hello = new Hello('world');\r\nhello.sayHello('Adolf');\r\n\r\n//------------------\r\n//Hello.js\r\n\r\n/**\r\n  @constructor\r\n  @param {string} name\r\n*/\r\nfunction Hello(name) {\r\n  this.name = name;\r\n}\r\n\r\n/**\r\n  @param {string} greeter\r\n*/\r\nHello.prototype.sayHello = function(greeter) {\r\n  return console.log(&quot;Hello &quot; + this.name + &quot; from &quot; + greeter + &quot;!&quot;);\r\n};\r\n\r\nmodule.exports = Hello;\r\n\r\n//------------------\r\n\r\njava -jar compiler.jar --js app.js --js Hello.js --externs externs.js --js_output_file all.js --process_common_js_modules --common_js_entry_module app.js --compilation_level ADVANCED_OPTIMIZATIONS --formatting=pretty_print --warning_level VERBOSE\r\n\r\nshould emit no warnings.\n\n[Context/Logs]:\n- i posted a fix here:\r\n[URL]\n- I'll look at this and your other patch on Monday.\n- This issue was closed by revision 0a7df2fc96d6.\n- This issue was closed by revision 0a7df2fc96d6."}
{"project_id": "Closure", "bug_id": "325", "source_type": "google", "llm_input_text": "[Title]: calling hasOwnProperty on an object should prevent property trimming similar to using [] as an accessor\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the following code with advanced optimizations:\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\n// ADD YOUR CODE HERE\r\nvar foo = {'a': true, 'b': true }\r\n\r\nconsole.log(foo.hasOwnProperty('a'));\r\n\r\n// Uncomment the following to get the properties of foo to stick.\r\n//console.log(foo['a']);\r\n\r\n What is the expected output? What do you see instead? \nExpected:\r\nEither something highly optimized like the [] accessor only version of the code above: console.log(!0);, or at least accurate like:\r\nconsole.log({a:!0,b:!0}.hasOwnProperty(&quot;a&quot;));\r\n\r\nActual:\r\nconsole.log({}.hasOwnProperty(&quot;a&quot;));\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Looks like CollapseProperties is not respecting quoted properties.\n- Using the \"safe\" version of hasOwnProperties will work:\r\n\r\nObject.prototype.hasOwnProperty.call(foo, 'a');\r\n\r\nand protects against a property called \"hasOwnProperty\"\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 16f7df6d709b.\n- This issue was closed by revision 70c40cc148e4."}
{"project_id": "Closure", "bug_id": "326", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "327", "source_type": "google", "llm_input_text": "[Title]: Unnecessary warnings for constructors defined inside goog.scope\n[Symptom]:\nWhat version of the product are you using? On what operating system? \nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20140110\r\nBuilt on: 2014/01/14 16:25\r\n\r\nDebian GNU/Linux Xfce\r\n\r\n Please provide any additional information below. \nFirst, try compiling the following program with ADVANCED_OPTIMIZATIONS:\r\n\r\n(function () {\r\n  /**\r\n   * @constructor\r\n   */\r\n  function Foo(x, y) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  console.log(new Foo(x, y))\r\n})()\r\n\r\nThis works as expected. Now, try compiling this program:\r\n\r\ngoog.scope(function () {\r\n  /**\r\n   * @constructor\r\n   */\r\n  function Foo(x, y) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  console.log(new Foo(x, y))\r\n})\r\n\r\nThis produces the same result, *except* the compiler emits warnings about &quot;dangerous use of this in static method&quot;.\r\n\r\nTo suppress these warnings, you must wrap the inside of goog.scope in another function, which is ridiculous:\r\n\r\ngoog.scope(function () {\r\n  (function () {\r\n    /**\r\n     * @constructor\r\n     */\r\n    function Foo(x, y) {\r\n      this.x = x\r\n      this.y = y\r\n    }\r\n\r\n    console.log(new Foo(x, y))\r\n  })()\r\n})\n\n[Context/Logs]:\n- thanks for the report. I posted a fix here:\r\n[URL]\n- This issue was closed by revision d1aab437e2a2."}
{"project_id": "Closure", "bug_id": "328", "source_type": "google", "llm_input_text": "[Title]: Source map locations are wrong when using goog.scope\n[Symptom]:\nWhat version of the product are you using? On what operating system? \nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20140110\r\nBuilt on: 2014/01/14 16:25\r\n\r\nDebian GNU/Linux Xfce\r\n\r\n Please provide any additional information below. \nConsider this simple assert module:\r\n\r\n  goog.provide(&quot;log&quot;)\r\n\r\n  log.assert = function (x) {\r\n    if (!x) {\r\n      throw new Error(&quot;Assertion failed&quot;)\r\n    }\r\n  }\r\n\r\nNow consider this simple program that uses the assert module:\r\n\r\n  goog.provide(&quot;foo&quot;)\r\n  goog.require(&quot;log&quot;)\r\n\r\n  foo.init = function () {\r\n    log.assert(false)\r\n    log.assert(false)\r\n  }\r\n\r\n  foo.init()\r\n\r\nIf you compile the above with ADVANCED_OPTIMIZATIONS and generate a source map, the error will correctly point to foo.js, line 5. Now, if you shorten the assert form, like so...\r\n\r\n  goog.provide(&quot;foo&quot;)\r\n  goog.require(&quot;log&quot;)\r\n\r\n  var assert = log.assert\r\n\r\n  foo.init = function () {\r\n    assert(false)\r\n    assert(false)\r\n  }\r\n\r\n  foo.init()\r\n\r\nIt correctly shows foo.js, line 7. But if you wrap it in goog.scope...\r\n\r\n  goog.provide(&quot;foo&quot;)\r\n  goog.require(&quot;log&quot;)\r\n\r\n  goog.scope(function () {\r\n    var assert = log.assert\r\n  \r\n    foo.init = function () {\r\n      assert(false)\r\n      assert(false)\r\n    }\r\n  })\r\n\r\n  foo.init()\r\n\r\nIt then INCORRECTLY shows foo.js, line 5.\r\n\r\nIt appears that when the compiler does the goog.scope aliasing, it uses the line/column of the &quot;var assert = ...&quot; rather than the &quot;assert(...)&quot;\n\n[Context/Logs]:\n- fix posted here:\r\n[URL]\n- This issue was closed by revision 10e65e9a6fae.\n- Thank you very much! That will help out a *lot* when debugging the minified source code."}
{"project_id": "Closure", "bug_id": "329", "source_type": "google", "llm_input_text": "[Title]: goog.abstractMethod prevents cross-module code motion\n[Symptom]:\nCreate 2 modules:\r\n\r\nModule 1:\r\nvar nullMethod = function () {}\r\nwindow.nullMethod = nullMethod\r\n\r\n/** @constructor */\r\nvar Class = function () {\r\n}\r\nClass.prototype.x = nullMethod\r\n\r\nModule 2:\r\nnew Class();\r\n\r\nexpected result:\r\ncross-module code motion should move Class into module 2.\r\n\r\nactual result:\r\nClass stays in module 1. If I change nullMethod to a function literal, the issue goes away.\r\n\r\nThe problem is that the compiler conservatively assumes that the variable may change, and so won't move the class.\n\n[Context/Logs]:\n- posted a fix here:\r\n[URL]\n- This issue was closed by revision 5ce23442b57d."}
{"project_id": "Closure", "bug_id": "330", "source_type": "google", "llm_input_text": "[Title]: Foo.prototype.eval() is required to return {?Object}\n[Symptom]:\nQuite serious issue from my PoV...\r\n\r\n/**\r\n * @constructor\r\n */\r\nvar Foo = function() {}\r\n\r\nFoo.prototype = {\r\n  eval: function(a, b)\r\n  {\r\n    var foo = null;\r\n  }\r\n}\r\n\r\nCompiling this code will result in:\r\n\r\nFoo.js:10: WARNING - Missing return statement. Function expected to return (Object|null).\r\n  eval: function(a, b)\r\n        ^\n\n[Context/Logs]:\n- I have a fix for this.\n- This issue was closed by revision aa21050fcac1."}
{"project_id": "Closure", "bug_id": "331", "source_type": "google", "llm_input_text": "[Title]: goog.scope aliasing improperly applied to object property names in @typedef\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile this file:\r\n\r\ngoog.provide('foo.bar.baz');\r\n    \r\ngoog.scope(function() {\r\nvar baz = foo.bar.baz;\r\n\r\n/**\r\n * @typedef {{baz: string}}\r\n */ \r\nbaz.SomeType;\r\n    \r\n/** \r\n * @type {baz.SomeType}\r\n */ \r\nbaz.instance = {baz: 'Foo'};\r\n    \r\n}); // goog.scope\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected output: No warnings.\r\nActual output:\r\nfoo.js:18: WARNING - assignment to property instance of \r\nfoo.bar.baz\r\nfound   : {baz: string}\r\nrequired: {foo.bar.baz: string}\r\nbaz.instance = {baz: 'Foo'};\r\n\r\n What version of the product are you using? On what operating system? \nHEAD on Linux.\r\n\r\n Please provide any additional information below. \n\r\nWorkarounds:\r\n\r\n(1) Enclose the property name in quotes \r\nor (2) Move the @typedef outside of the goog.scope.\n\n[Context/Logs]:\n- fix posted here:\r\n[URL]\n- This issue was closed by revision d6aa74f95878."}
{"project_id": "Closure", "bug_id": "332", "source_type": "google", "llm_input_text": "[Title]: oninput get renamed with ADVANCED_OPTIMIZATIONS\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run the following code through the compiler\r\n\r\n    var since = document.getElementById(&quot;sc&quot;);\r\n    since.value = &quot;&quot;;\r\n    since.oninput = ParseSince;\r\n\r\nWhat is the expected output?\r\n\r\n    a = document.getElementById(&quot;sc&quot;);\r\n    a.value = &quot;&quot;;\r\n    a.oninput = B;\r\n    \r\nWhat do you see instead?\r\n\r\n    a = document.getElementById(&quot;sc&quot;);\r\n    a.value = &quot;&quot;;\r\n    a.Ra = B;\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20140110\r\nBuilt on: 2014/01/14 16:25\r\n\r\n Please provide any additional information below. \n\r\nUsed these flags:\r\n--compilation_level ADVANCED_OPTIMIZATIONS \\\r\n--language_in=ECMASCRIPT5_STRICT \\\n\n[Context/Logs]:\n- An extern patch would be welcome.  Just be sure to reference the correct documentation for the method.\n- Here it is.\r\n\r\nThe specific events added is documented here.\r\n[URL]\r\n\r\nBut since that part of the file already references [URL] no extra documentation was added.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Yes I had, I've also added myself to the CONTRIBUTORS with this new patch.\n- This issue was closed by revision 6417b898f917."}
{"project_id": "Closure", "bug_id": "333", "source_type": "google", "llm_input_text": "[Title]: HTMLCanvasElement not recognized\n[Symptom]:\nWhat steps will reproduce the problem? \n1. compile code that uses window.HTMLCanvasElement with Advanced Compilation\r\n(example:  [URL]\r\n\r\n What is the expected output? What do you see instead? \nthe code should still reference window.HTMLCanvasElement\r\n\r\n What version of the product are you using? On what operating system? \ncompiler-20131014 (local jar)\n\n[Context/Logs]:\n- This issue was closed by revision eb8f02b6e06b."}
{"project_id": "Closure", "bug_id": "334", "source_type": "google", "llm_input_text": "[Title]: @template {T} should generate a parse error\n[Symptom]:\ncurrently &quot;@template {T}&quot; is currently ignored\n\n[Context/Logs]:\n- This issue was closed by revision 0b460ae991e2."}
{"project_id": "Closure", "bug_id": "335", "source_type": "google", "llm_input_text": "[Title]: ant jscomp does not pass outputEncoding to compiler options\n[Symptom]:\nThe output encoding specified in the ant file is not passed to the compiler.  The means the compiler will always output the default ascii (or match the input) no matter what output encoding is passed.  May result on odd behaviors depending on the settings passed. \r\n\r\nAttached patch to fix.\n\n[Context/Logs]:\n- Sorry for the delay. Can you sign the CLA?\r\n[URL]\n- Did so already via online form.  Should I do it again?\n- No, that should be enough.\n- This issue was closed by revision a975532c915c."}
{"project_id": "Closure", "bug_id": "336", "source_type": "google", "llm_input_text": "[Title]: Advanced optimizations removes instanceof check\n[Symptom]:\nGiven the following input:\r\n\r\nif (propEvt instanceof window.MouseEvent) propEvt.preventDefault();\r\nif (globalEvt instanceof MouseEvent) globalEvt.preventDefault();\r\n\r\n$ closure --compilation_level ADVANCED_OPTIMIZATIONS mouseeventtest.js\r\nglobalEvt instanceof MouseEvent&amp;&amp;globalEvt.preventDefault();\r\n\r\nThe same happens with any property on window, unless it has been accessed or set before. So a simple if (window.MouseEvent) ... in the beginning of the file will prevent the propEvt line from being optimized away.\r\n\r\nI'm not sure if this is a feature, but in that case it is an unexpected one.\n\n[Context/Logs]:\n- I'm not sure what pass is doing this but without a definition for window.MouseEvent, something is assuming the expression is false.  Adding a definition for \"window.MouseEvent\" in the externs should be sufficient to fix this, if this is the case.\n- I posted a fix for this here:\r\n[URL]\n- This issue was closed by revision 7de691d40240."}
{"project_id": "Closure", "bug_id": "337", "source_type": "google", "llm_input_text": "[Title]: Const extern not respected\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile with the following extern:\r\n/** @const */ var FOO;\r\nand the following code:\r\nFOO = 1;\r\nFOO = 2;\r\n\r\n What is the expected output? What do you see instead? \nWarning about assignment to const (x2)\r\nInstead get no warnings at all.\r\n\r\n What version of the product are you using? On what operating system? \njscomp-debug\r\n\r\n Please provide any additional information below. \nIf the const definition is moved from the externs to the code, get warning on second asssignment (as expected).\n\n[Context/Logs]:\n- Question: If we have \"/** @const */ var FOO;\" in the externs, should that mean:\r\n\r\n1. FOO is not only declared externally, but also given a value, or\r\n2. FOO is declared externally, but may not have a value yet, so it's okay to assign to it in the non-externs code.\r\n?\r\n\r\nIf we choose option 1, then just writing \"FOO = 1;\" would be an error. If we choose option 2, then \"FOO = 1;\" on its own would be okay, but \"FOO = 1; FOO = 2;\" would be an error. I would lean toward option 1.\n- I would also lean toward option 1. Some constants are not known at compile time, but are still known to never change.\n- This issue was closed by revision 8f5bc28d124b."}
{"project_id": "Closure", "bug_id": "338", "source_type": "google", "llm_input_text": "[Title]: cross-module extends doesn't work\n[Symptom]:\n// Module 1\r\n/** @constructor */ function Foo() {}\r\nmodule.exports = Foo\r\n\r\n// Module 2\r\n/** @const */\r\nvar Foo = require('./foo')\r\nvar util = require('util')\r\n\r\n/**\r\n * @constructor\r\n * @extends {Foo}\r\n */\r\nvar SubFoo = function () {}\r\nutil.inherits(SubFoo, Foo)\r\n\r\nEmits a warning like:\r\n    [junit] JSC_TYPE_MISMATCH. mismatch in declaration of superclass type\r\n    [junit] found   : Foo$$module$foo\r\n    [junit] required: Foo$$module$subfoo\r\n\r\nThe @const requirement is also a bit weird, but for this bug i'm focusing on the mismatch. There's a problem where it doesn't recognize that the alias is equivalent to the original type.\n\n[Context/Logs]:\n- (or perhaps more precisely, it resolves the Foo symbol in the type annotation differently than the Foo symbol in the inherits expression, and doesn't treat the 2 symbols equal. We could either fix this by fixing the equality relation, or fixing the symbol resolution.\n- posted a fix here:\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- It seemed to introduce a new JSC_TYPE_MISMATCH during a goog.inherits\n- This issue was closed by revision 4ee706b87bdc."}
{"project_id": "Closure", "bug_id": "339", "source_type": "google", "llm_input_text": "[Title]: \"this\" property types are evaluated in the wrong scope\n[Symptom]:\n/** @constructor */\r\nfunction A() {\r\n  /** @constructor */\r\n  function B() {}\r\n\r\n  /** @type {B} */  // &lt;-- unknown type warning here\r\n  this.foo;\r\n\r\n  /** @type {B} */ // &lt;-- no type warning here\r\n  var C;\r\n}\n\n[Context/Logs]:\n- Note that this bug makes the code to resolve class type parameters names more complicated.\n- fix posted here:\r\n[URL]\n- This issue was closed by revision 336935a971e1."}
{"project_id": "Closure", "bug_id": "340", "source_type": "google", "llm_input_text": "[Title]: Add options.setTrustedStrings(true) to ant jscomp\n[Symptom]:\nAbstractCommandlineRunner calls &quot;options.setTrustedStrings(true)&quot;.  The ant task should do the same.\r\n\r\nAttached patch.\n\n[Context/Logs]:\n- This issue was closed by revision a4ab4f2b031f."}
{"project_id": "Closure", "bug_id": "341", "source_type": "google", "llm_input_text": "[Title]: \"@const @private\" works, but \"@private @const\" does not\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile e.g:\r\ngoog.provide('foo.MyClass');\r\n\r\n/** @constructor */\r\nfoo.MyClass = function() {\r\n  /** @private @const {number} */\r\n  this.foo_ = 42;\r\n\r\n  this.foo_ = 36;\r\n};\r\n\r\n\r\n What is the expected output? What do you see instead? \nExpected: Warning about constant foo_ being assigned a value twice.\r\nActual: No warning.\r\n\r\n\r\n What version of the product are you using? On what operating system? \njscomp-debug\r\n\r\n\r\n Please provide any additional information below. \nIt does work when the order of the two annotations is switched (i.e. &quot;@const @private {number}&quot;).\n\n[Context/Logs]:\n- Looking into this a little bit, after the parser consumes the '@private' it calls recordDescription, so the entire string \"@const {number}\" is being parsed as a description for the \"@private\" annotation, rather than as a @const annotation with a type. The logic in extractMultilineTextualBlock knows to stop when it sees an annotation (like @const) but it consumes an entire line before that logic kicks in: [URL]\r\n\r\nI guess that's left over from when annotations were not stackable (each one had to be on its own line)?\n- This issue was closed by revision a5b01a8a8df6.\n- This issue was closed by revision 1c59a0dfc63e.\n- This issue was closed by revision b850cd12281f."}
{"project_id": "Closure", "bug_id": "342", "source_type": "google", "llm_input_text": "[Title]: \"@const @private\" works, but \"@private @const\" does not\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile e.g:\r\ngoog.provide('foo.MyClass');\r\n\r\n/** @constructor */\r\nfoo.MyClass = function() {\r\n  /** @private @const {number} */\r\n  this.foo_ = 42;\r\n\r\n  this.foo_ = 36;\r\n};\r\n\r\n\r\n What is the expected output? What do you see instead? \nExpected: Warning about constant foo_ being assigned a value twice.\r\nActual: No warning.\r\n\r\n\r\n What version of the product are you using? On what operating system? \njscomp-debug\r\n\r\n\r\n Please provide any additional information below. \nIt does work when the order of the two annotations is switched (i.e. &quot;@const @private {number}&quot;).\n\n[Context/Logs]:\n- Looking into this a little bit, after the parser consumes the '@private' it calls recordDescription, so the entire string \"@const {number}\" is being parsed as a description for the \"@private\" annotation, rather than as a @const annotation with a type. The logic in extractMultilineTextualBlock knows to stop when it sees an annotation (like @const) but it consumes an entire line before that logic kicks in: [URL]\r\n\r\nI guess that's left over from when annotations were not stackable (each one had to be on its own line)?\n- This issue was closed by revision a5b01a8a8df6.\n- This issue was closed by revision 1c59a0dfc63e.\n- This issue was closed by revision b850cd12281f."}
{"project_id": "Closure", "bug_id": "343", "source_type": "google", "llm_input_text": "[Title]: \"@const @private\" works, but \"@private @const\" does not\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile e.g:\r\ngoog.provide('foo.MyClass');\r\n\r\n/** @constructor */\r\nfoo.MyClass = function() {\r\n  /** @private @const {number} */\r\n  this.foo_ = 42;\r\n\r\n  this.foo_ = 36;\r\n};\r\n\r\n\r\n What is the expected output? What do you see instead? \nExpected: Warning about constant foo_ being assigned a value twice.\r\nActual: No warning.\r\n\r\n\r\n What version of the product are you using? On what operating system? \njscomp-debug\r\n\r\n\r\n Please provide any additional information below. \nIt does work when the order of the two annotations is switched (i.e. &quot;@const @private {number}&quot;).\n\n[Context/Logs]:\n- Looking into this a little bit, after the parser consumes the '@private' it calls recordDescription, so the entire string \"@const {number}\" is being parsed as a description for the \"@private\" annotation, rather than as a @const annotation with a type. The logic in extractMultilineTextualBlock knows to stop when it sees an annotation (like @const) but it consumes an entire line before that logic kicks in: [URL]\r\n\r\nI guess that's left over from when annotations were not stackable (each one had to be on its own line)?\n- This issue was closed by revision a5b01a8a8df6.\n- This issue was closed by revision 1c59a0dfc63e.\n- This issue was closed by revision b850cd12281f."}
{"project_id": "Closure", "bug_id": "344", "source_type": "google", "llm_input_text": "[Title]: Add entryPoints option to ant compile task\n[Symptom]:\nAnt task has manageClosureDependencies option.  \r\n\r\nThe next logical addition to make this functionality really helpful would be to able to specify entry point(s) as is possible from the command line. \r\n\r\nThis would make ant output smaller and inputs easier to specify.\r\n\r\nNOTE:\r\nThe AbstractCommandLineRunner uses setDependencyOptions, but the ant CompileTask uses setManageClosureDependencies.  Consider converting the ant task to use setDependencyOptions as part of this change, maybe making the createDependencyOption method part of the Compiler options so that logic is more widely available. \r\n\r\n[URL]\r\n[URL]\n\n[Context/Logs]:\n- Here's an simple patch to enable this.\n- This issue was closed by revision accab86f9240.\n- This issue was closed by revision 5a1ffbe7af5c."}
{"project_id": "Closure", "bug_id": "345", "source_type": "google", "llm_input_text": "[Title]: \"new RegExp\" compiles to just \"RegExp\" in advanced mode\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run the code snippet below. The output should be\r\n\r\na\r\na\r\n\r\n2. Compile it in advanced mode on [URL] and run the output. The output will be\r\n\r\na\r\nb\r\n\r\n3. This happens because &quot;new RegExp&quot; turns into just &quot;RegExp&quot; which doesn't work because regular expression are not stateless in JS.\r\n\r\nCode:\r\nvar re = /./g;\r\nvar s = 'abc';\r\nvar re1 = new RegExp(re);\r\nvar re2 = new RegExp(re);\r\nwindow.console.log(re1.exec(s)[0]);\r\nwindow.console.log(re2.exec(s)[0]);\r\n\r\nCompiler output:\r\nvar a=/./g,b=RegExp(a);window.console.log(RegExp(a).exec(&quot;abc&quot;)[0]);window.console.log(b.exec(&quot;abc&quot;)[0]);\n\n[Context/Logs]:\n- It looks like this happens in PeepholeSubstituteAlternateSyntax#tryFoldStandardConstructors. I think the rationale was that \"new RegExp('somestring')\" is equivalent to \"RegExp('somestring')\". But if you pass another RegExp to the RegExp constructor, then apparently it's not equivalent.\r\n\r\nAs a simple quickfix we could remove RegExp from the STANDARD_OBJECT_CONSTRUCTORS set, but the real fix is probably to do the replacement only if the argument is known to be a string.\n- Wouldn't it be better to turn new RegExp('foo') into /foo/ rather than RegExp('foo')?\n- Actually, it looks like we already do that if the argument is a string literal. If it's a variable, we just drop the 'new.' So the cases are:\r\n\r\n// string literal\r\nnew RegExp('foo') => /foo/\r\n\r\n// variable known to be of type {string}\r\nnew RegExp(stringVar) => RegExp(stringVar)\r\n\r\n// variable that is not a string, or has an unknown type\r\nnew RegExp(nonStringVar) => new RegExp(nonStringVar)\r\n\r\nCurrently the third case is the one we get wrong. Since we're already switching to /foo/ for string literals (which are, I would guess, the most common case) maybe we should actually just remove RegExp from the list of standard constructors.\n- This issue was closed by revision 27a73fe08dcb."}
{"project_id": "Closure", "bug_id": "346", "source_type": "google", "llm_input_text": "[Title]: cross-module extends doesn't work\n[Symptom]:\n// Module 1\r\n/** @constructor */ function Foo() {}\r\nmodule.exports = Foo\r\n\r\n// Module 2\r\n/** @const */\r\nvar Foo = require('./foo')\r\nvar util = require('util')\r\n\r\n/**\r\n * @constructor\r\n * @extends {Foo}\r\n */\r\nvar SubFoo = function () {}\r\nutil.inherits(SubFoo, Foo)\r\n\r\nEmits a warning like:\r\n    [junit] JSC_TYPE_MISMATCH. mismatch in declaration of superclass type\r\n    [junit] found   : Foo$$module$foo\r\n    [junit] required: Foo$$module$subfoo\r\n\r\nThe @const requirement is also a bit weird, but for this bug i'm focusing on the mismatch. There's a problem where it doesn't recognize that the alias is equivalent to the original type.\n\n[Context/Logs]:\n- (or perhaps more precisely, it resolves the Foo symbol in the type annotation differently than the Foo symbol in the inherits expression, and doesn't treat the 2 symbols equal. We could either fix this by fixing the equality relation, or fixing the symbol resolution.\n- posted a fix here:\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- It seemed to introduce a new JSC_TYPE_MISMATCH during a goog.inherits\n- This issue was closed by revision 4ee706b87bdc."}
{"project_id": "Closure", "bug_id": "347", "source_type": "google", "llm_input_text": "[Title]: Add entryPoints option to ant compile task\n[Symptom]:\nAnt task has manageClosureDependencies option.  \r\n\r\nThe next logical addition to make this functionality really helpful would be to able to specify entry point(s) as is possible from the command line. \r\n\r\nThis would make ant output smaller and inputs easier to specify.\r\n\r\nNOTE:\r\nThe AbstractCommandLineRunner uses setDependencyOptions, but the ant CompileTask uses setManageClosureDependencies.  Consider converting the ant task to use setDependencyOptions as part of this change, maybe making the createDependencyOption method part of the Compiler options so that logic is more widely available. \r\n\r\n[URL]\r\n[URL]\n\n[Context/Logs]:\n- Here's an simple patch to enable this.\n- This issue was closed by revision accab86f9240.\n- This issue was closed by revision 5a1ffbe7af5c."}
{"project_id": "Closure", "bug_id": "348", "source_type": "google", "llm_input_text": "[Title]: Don't warn about deprecation if the code is just declaring a field (not reading it).\n[Symptom]:\nThe Closure library right now has this in goog.fs.Error:\r\n\r\ngoog.fs.Error = function(...) {\r\n  ...\r\n\r\n  /**\r\n   * @type {goog.fs.Error.ErrorCode}\r\n   * @deprecated Use the 'name' or 'message' field instead.\r\n   */\r\n  this.code;\r\n}\r\n\r\nand we get a deprecation warning even though we never read the 'code' field. I think the compiler is treating that 'this.code' line as though it's reading the variable, but really it's just declaring it. We should not warn about the deprecation in this case.\n\n[Context/Logs]:\n- This issue was closed by revision dff906efdc8b."}
{"project_id": "Closure", "bug_id": "349", "source_type": "google", "llm_input_text": "[Title]: Global Constructors are not always properties of the global (window)\n[Symptom]:\nWhat steps will reproduce the problem? \nCompile the following code using Advanced Optimizations -\r\nif (window.FileReader) console.log(new window.FileReader());\r\n\r\nWhat is the expected output?\r\nwindow.FileReader&amp;&amp;console.log(new window.FileReader());\r\n\r\nWhat do you see instead?\r\nwindow.a&amp;&amp;console.log(new window.a);\r\n\r\nWhat version of the product are you using?\r\nClosure Compiler v20140110.\r\n\r\nOn what operating system?\r\nWindows 7 Enterprise 64 bit, Java(TM) SE Runtime Environment (build 1.7.0_51-b13).\r\n\r\n Please provide any additional information below. \n\r\nI expect any global constructor (or variable, or whatever) to also be defined on window, since it is the global in browsers.\r\nIf you want Closure Compiler to be node.js compatible (or any other ECMAScript based environment), a --browser flag can be added (or --global window, or whatever).\r\n\r\nI see that some externs define stuff as global variables as well as properties of Window and some are not. I cannot think of a reason for which this duplication is even needed and not automatically assumed at the compiler level.\n\n[Context/Logs]:\n- It's not needed, it just happens to be how the compiler is working now. We'd like to make all global variables in externs properties of the global object automatically, but until then, feel free to submit patches duplicating the definitions for the ones you care about.\n- Would it be acceptable if I create patches for all of the externs files that essentially duplicate everything?\r\n\r\nI had a production bug due to this issue, the point of this issue is to eliminate such bugs before the fact.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for the guidance. Like I wrote, I could not even build the compiler in the first place when I tried it a few months ago.\r\nI was using the Android SDK provided Eclipse, though.\r\n\r\nSorry, this is not a support group, so feel free to ignore. :)\n- Feel free to try again from the command line. Instructions here:\r\n[URL]\r\n\r\nBasically, \"ant jar\" should be all you need."}
{"project_id": "Closure", "bug_id": "350", "source_type": "google", "llm_input_text": "[Title]: Add W3C's Pointer Events externs\n[Symptom]:\nThe attached patch adds extern for the W3C's Pointer Events.\r\n[URL]\r\n\r\nThe code is also available here: [URL]\n\n[Context/Logs]:\n- I thought we already had definitions for these?\n- Externs exist for MSPointerEvent (in externs/ie_event.js) but not for the W3C one.\n- Looks good to me.\r\nThanks for the patch (and github link).\n- This issue was closed by revision c8062b845120."}
{"project_id": "Closure", "bug_id": "351", "source_type": "google", "llm_input_text": "[Title]: Interfaces not getting resolved because of declaration order\n[Symptom]:\nHey Nick, can you take a look at this? I spent a few hours on it, but I don't know TypedScopeCreator well so I couldn't figure it out.\r\n\r\nBasically, for 2 or more levels of inheritance for interfaces, the compiler doesn't resolve them correctly if they're not declared in order. For classes it works fine. \r\n\r\nThis was uncovered by a google-internal project. It works correctly in the new type inference, but it's not ready to land, so it's probably better to fix it in the existing type inference as well.\r\n\r\nSee example below.\r\n\r\n\r\n\r\n/** @interface @extends {MidI} */\r\nfunction LowI() {}\r\n\r\n/** @interface @extends {HighI} */\r\nfunction MidI() {}\r\n\r\n/** @interface */\r\nfunction HighI() {}\r\n\r\n\r\n/** @constructor @extends {MidC} */\r\nfunction LowC() {}\r\n\r\n/** @constructor @extends {HighC} */\r\nfunction MidC() {}\r\n\r\n/** @constructor */\r\nfunction HighC() {}\n\n[Context/Logs]:\n- sure, i'll take a look\n- just to clarify, the example with the constructors works fine. it's just the one with the interfaces that's broken. right?\n- Thanks for looking into this! I've added some comments to the review.\n- This issue was closed by revision bad5890d0a9c."}
{"project_id": "Closure", "bug_id": "352", "source_type": "google", "llm_input_text": "[Title]: Const property not respected without collapse properties or in IDE mdoe\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the following:\r\n---\r\nvar a = {};\r\n\r\n/** @const */\r\na.FOO = 1;\r\n\r\na.FOO = 2;\r\n---\r\n\r\n What is the expected output? What do you see instead? \nWarning about assignment to const.\r\nInstead no warning is generated.\r\n\r\n What version of the product are you using? On what operating system? \njscomp-debug\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- I spoke to Nick, the issue here is a \"debug\" build without collapse_property and renaming.  The \"CheckConst\" pass only works with variables and without collapse properties, misses these.  We should always use types information for constant checking and get rid of the existing \"CheckConst\" pass.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "353", "source_type": "google", "llm_input_text": "[Title]: Bad optimization resulting in a=a=something\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nBelow is a test function:\r\n\r\nfunction test(p0, p1) {\r\n  var i, foo, bar, ndx;\r\n\r\n  foo = Math.max(1, p1 - 8);\r\n  bar = Math.min(p0, foo + 16);\r\n  foo = Math.max(1, bar - 16);\r\n\r\n  for(i = foo, ndx = []; i &lt;= bar; i++) {\r\n    ndx.push(i);\r\n  }\r\n\r\n  return ndx;\r\n}\r\n\r\nWe compile it with SIMPLE_OPTIMIZATIONS:\r\n\r\njava -jar /path/to/compiler.jar --compilation_level SIMPLE_OPTIMIZATIONS --js test.js --js_output_file test.min.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nOutput:\r\n\r\nfunction test(d,e){var a,b,c;a=Math.max(1,e-8);b=Math.min(d,a+16);a=a=Math.max(1,b-16);for(c=[];a&lt;=b;a++)c.push(a);return c};\r\n\r\nUnexpected code: &quot;a=a=...&quot;\r\n\r\n What version of the product are you using? On what operating system? \n\r\nVersion: 20100917 (revision 440)\r\nBuilt on: 2010/09/17 17:55\r\nWindows 7 Pro / 64-bit\r\n\r\n Please provide any additional information below. \n\r\nMy guess: Closure Compiler moved the &quot;i = foo&quot; out of the for loop but failed to notice that the same temporary variable is used for both 'foo' and 'i'. So it did the assignment twice. Hence the &quot;a=a=...&quot;.\n\n[Context/Logs]:\n- [UPDATE] This problem *does not* occur with the latest stable version (revision 706), at least with this test function. So it may have been already fixed.\n- Fixed in a prior release."}
{"project_id": "Closure", "bug_id": "354", "source_type": "google", "llm_input_text": "[Title]: Compiler crashes on assign statement\n[Symptom]:\nIt is a large app (containing the entire Dojo Toolkit library). Code fragment that fails:\r\n\r\n/** @constructor\r\n *  @param {...Object} params\r\n */\r\ndojox.gfx.shape.Shape = function(params) {};\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ { .......\r\n\r\n\r\nError message:\r\n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable dojox$gfx$shape$Shape\r\n  Node(NAME dojox$gfx$shape$Shape): release\\src\\dijit.js.uncompressed.js:15135:0\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n  Parent(ASSIGN): release\\src\\dijit.js.uncompressed.js:15135:22\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nUnexpected variable dojox$gfx$shape$Shape\r\n  Node(NAME dojox$gfx$shape$Shape): release\\src\\dijit.js.uncompressed.js:15135:0\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n  Parent(ASSIGN): release\\src\\dijit.js.uncompressed.js:15135:22\r\ndojox.gfx.shape.Shape = dojo.declare(&quot;dojox.gfx.shape.Shape&quot;, null, /** @lends dojox.gfx.shape.Shape.prototype */ {\r\n\r\n\tat com.google.javascript.jscomp.V\n...[Description Truncated]...\n\n[Context/Logs]:\n- Sorry, forgot again.  Newest Mar 22 version.\n- Would you be able to give us a code snippet that can reproduce this?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Great!  Does it solve the --debug true prob as well?\n- i believe that problem was fixed in an unrelated change."}
{"project_id": "Closure", "bug_id": "355", "source_type": "google", "llm_input_text": "[Title]: Workaround for nested assignment bug in Opera\n[Symptom]:\n[URL]\r\n\r\n[URL] line 6750,transport should not be null.\n\n[Context/Logs]:\n- i have no idea what this bug report means. i looked at the ticket, and I was even more confused.\r\n[URL] \r\ndoesn't say anything about how closure compiler is being run, but it's marked as a duplicate of\r\n[URL]\r\nwhich says that they acknowledge this won't work.\r\n\r\nCan you provide a bit more context on how we can reproduce the issue, please?\r\nwhat compiler version are you using?\r\nwhat flags are you running it with?\n- latest version compiler and default flags,compiler compressed jquery cannot perform ajax request in opera11(works fine with chrome and firefox and IE9),uglifyjs compressed jquery works fine with all browser\n- ... [Middle Discussions Snipped for Brevity] ...\n- When is a good time to remove this workaround?\n- Opera 11.10 Final has the compilation scheme fix, as has the upcoming 11.50. Hard to say if we're living in the shadow of your good work wrt older browser versions, but there's an automatic upgrade path available to users should they run into the issue.\r\n\r\nSo, please retire the workaround pass whenever suits you. We really appreciate the quick help in tiding us over with this bug; great stuff.\r\n\r\n--sigbjorn / sof@opera.com"}
{"project_id": "Closure", "bug_id": "356", "source_type": "google", "llm_input_text": "[Title]: Override annotations in default \texterns\n[Symptom]:\nWhen compiling a JavaScript file with enabled override annotation check\r\nthen the compiler complains about some missing annotations in the default\r\nexterns file.\r\n\r\nI have attached a patch which corrects this.\n\n[Context/Logs]:\n- This issue was closed by revision r138."}
{"project_id": "Closure", "bug_id": "357", "source_type": "google", "llm_input_text": "[Title]: Mis-optimization\n[Symptom]:\nAt [URL]\r\nenter the below in the source texttarea\r\n\r\n\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nvar o = {};\r\nwindow['o'] = p;\r\n\r\n\r\n\r\nThen hit the Compile button.\r\n\r\nI expected to get\r\n\r\n\r\n\r\nwindow.o={}\r\n\r\n\r\n\r\n\r\nbut actually got\r\n\r\n\r\n\r\nwindow.o=p;\r\n\r\n\r\n\r\nwith nothing in either the warning or error tabs.\n\n[Context/Logs]:\n- Two things:\r\n1) \"p\" is unknown but the web-service runs with the equivalent of the command-line \"--third_party\", which assumes undefined variables are external values.\r\n2) in advanced mode a global \"o\" and \"window['o']\" are not treated as equivalent:\r\n[URL]\r\n\r\nGiven #2, \"var o\" is unused and removed.\r\n\r\nThat said, assuming you didn't expect #2, I don't known why you would expect:\r\n  window.o = {};\r\nover:\r\n  var o={};o=p;\r\nor \r\n  var o={};window.o = p;\r\nor \r\n  window.o = p;\n- Sorry.  Very stupid of me.  Just a typo."}
{"project_id": "Closure", "bug_id": "358", "source_type": "google", "llm_input_text": "[Title]: Mis-optimization\n[Symptom]:\nAt [URL]\r\nenter the below in the source texttarea\r\n\r\n\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nvar o = {};\r\nwindow['o'] = p;\r\n\r\n\r\n\r\nThen hit the Compile button.\r\n\r\nI expected to get\r\n\r\n\r\n\r\nwindow.o={}\r\n\r\n\r\n\r\n\r\nbut actually got\r\n\r\n\r\n\r\nwindow.o=p;\r\n\r\n\r\n\r\nwith nothing in either the warning or error tabs.\n\n[Context/Logs]:\n- Two things:\r\n1) \"p\" is unknown but the web-service runs with the equivalent of the command-line \"--third_party\", which assumes undefined variables are external values.\r\n2) in advanced mode a global \"o\" and \"window['o']\" are not treated as equivalent:\r\n[URL]\r\n\r\nGiven #2, \"var o\" is unused and removed.\r\n\r\nThat said, assuming you didn't expect #2, I don't known why you would expect:\r\n  window.o = {};\r\nover:\r\n  var o={};o=p;\r\nor \r\n  var o={};window.o = p;\r\nor \r\n  window.o = p;\n- Sorry.  Very stupid of me.  Just a typo."}
{"project_id": "Closure", "bug_id": "359", "source_type": "google", "llm_input_text": "[Title]: Mis-optimization\n[Symptom]:\nAt [URL]\r\nenter the below in the source texttarea\r\n\r\n\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nvar o = {};\r\nwindow['o'] = p;\r\n\r\n\r\n\r\nThen hit the Compile button.\r\n\r\nI expected to get\r\n\r\n\r\n\r\nwindow.o={}\r\n\r\n\r\n\r\n\r\nbut actually got\r\n\r\n\r\n\r\nwindow.o=p;\r\n\r\n\r\n\r\nwith nothing in either the warning or error tabs.\n\n[Context/Logs]:\n- Two things:\r\n1) \"p\" is unknown but the web-service runs with the equivalent of the command-line \"--third_party\", which assumes undefined variables are external values.\r\n2) in advanced mode a global \"o\" and \"window['o']\" are not treated as equivalent:\r\n[URL]\r\n\r\nGiven #2, \"var o\" is unused and removed.\r\n\r\nThat said, assuming you didn't expect #2, I don't known why you would expect:\r\n  window.o = {};\r\nover:\r\n  var o={};o=p;\r\nor \r\n  var o={};window.o = p;\r\nor \r\n  window.o = p;\n- Sorry.  Very stupid of me.  Just a typo."}
{"project_id": "Closure", "bug_id": "360", "source_type": "google", "llm_input_text": "[Title]: Incomplete annotations for the animate & queue functions in jquery externs\n[Symptom]:\nThe animate and queue functions need slightly more flexible annotations on their arguments.\r\n\r\n.animate():\r\nThe easing argument can be dropped with the callback becoming the 3rd argument.\r\nSee the 2nd example under Basic usage: [URL]\r\n\r\n.queue();\r\nThe queue-name can be dropped with the queue becoming the 1st argument.\r\n[URL]\r\n\r\nHere's what I've changed them to. Somehow I can't create a diff because the file is marked as a binary file in the svn (application/javascript mime-type)..\r\n\r\n/**\r\n * @param {Object.&lt;string,*&gt;} properties\r\n * @param {(string|number|Object.&lt;string,*&gt;)=} arg2\r\n * @param {(string|function())=} arg3\r\n * @param {function()=} complete\r\n * @return {jQuery}\r\n */\r\njQuery.prototype.animate = function(properties, arg2, arg3, complete) {};\r\n\r\n\r\n/**\r\n * @param {(string|Array.&lt;function(this:jQuery)&gt;|function(function()))=} arg1\r\n * @param {(Array.&lt;function(this:jQuery)&gt;|function(function()))=} arg2\r\n * @return {(Array.&lt;Element&gt;|jQuery)}\r\n */\r\njQuery.prototype.queue = function(arg1, arg2) {};\n\n[Context/Logs]:\n- The jQuery extern is generated from [URL]\r\n\r\nFor animate, I've contacted the jQuery documentation team to ask that a signature be added to the API that reflects this usage.\r\n\r\nFor methods who have an optional first parameter, I'll need to make some corrections on my end.\n- The jQuery team has confirmed that for all methods, you may omit an optional parameter without omitting any following parameters. This will significantly change my generation program and add complexity. I'm working on addressing this, but it will take time.\n- Thanks for looking into this. I figured functions like .click() work in a similar way - the 2nd arg can also become the first one. But I see now that the 2nd arg is mandatory there..\n- This issue was fixed by r1079"}
{"project_id": "Closure", "bug_id": "361", "source_type": "google", "llm_input_text": "[Title]: Closure Compiler failed to translate all instances of a function name\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the attached jQuery Multicheck plugin using SIMPLE optimization.\r\n\r\n What is the expected output? What do you see instead? \nYou expect that the function preload_check_all() gets its name translated appropriately. In fact, the Closure Compiler breaks the code by changing the function declaration but NOT changing the call to the function on line 76.\n\n[Context/Logs]:\n- thanks for reporting this. this is an interesting bug to me.\n- something's going wrong with the function inliner. it's trying to inline one of you functions, but botches the job. here's the simplest repro case i can come up with:\r\n\r\n(function($) {\r\n  $.fn.multicheck = function(options) {\r\n    initialize.call(this, options);\r\n  };\r\n\r\n  function initialize(options) {\r\n    options.checkboxes = $(this).siblings(':checkbox');\r\n    preload_check_all.call(this);\r\n  };\r\n\r\n  function preload_check_all() {\r\n    $(this).data('checkboxes');\r\n  };\r\n})(jQuery);\n- ... [Middle Discussions Snipped for Brevity] ...\n- I have a fix under review for his.\n- This issue was closed by revision r1011."}
{"project_id": "Closure", "bug_id": "362", "source_type": "google", "llm_input_text": "[Title]: Internal Compiler Error on Bullet\n[Symptom]:\nWhat steps will reproduce the problem? \n1. The attachment is the Bullet physics library, compiled from C++ to JS using Emscripten.\r\n2. I tried to compile it using the Closure Compiler, latest downloadable version (Apr 5 2011), with\r\n\r\njava -jar apr5compiler.jar --compilation_level ADVANCED_OPTIMIZATIONS --variable_map_output_file js.vars --js bullet_1_1_q1.js --js_output_file bullet_1_1_q1.cc.js\r\n\r\n What is the expected output? What do you see instead? \n\r\nI would expect it to compile successfully. Instead it halts (after a few hours) with\r\n\r\n\r\n==================\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(LABEL): bullet_1_1_q1.js:60150:8\r\n        $for_body$5: while(1) { \r\n  Parent(BLOCK): bullet_1_1_q1.js:60043:26\r\n      if (__label__ == 0) {\r\n\r\n\tat com.google.javascript.jscomp.Compiler.runCallable(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.runInCompilerThread(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.doRun(Unknown Source)\r\n\tat com.google.javascript.jscomp.AbstractCommandLineRunner.run(Unknown Source)\r\n\tat com.google.javascript.jscomp.CommandLineRunner.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(LABEL): bullet_1_1_q1.js:60150:8\r\n        $for_body$5: while(1) { \r\n  Parent(BLOCK): bullet_1_1_q1.js:60043:26\r\n      if (__label__ == 0) {\r\n\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:129)\r\n\tat com.google.javascript.jscomp.RenameLabels$ProcessLabels.shouldTraverse(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unknown Source)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(Unkno\n...[Description Truncated]...\n\n[Context/Logs]:\n- We should split this into two issues, one for the exception and one for the runtime.  In my first attempt to reproduce this the \"coalesceVariableNames\" pass ran for 30 minutes before I killed it.\n- I should also not that \"flowSensitiveInlineVariables\" ran to completion in 70 seconds (which is too long, as well).\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1050.\n- Interesting. I was just reading the Emscripten paper last week.\r\n\r\nThis looks like lots of opportunities for both variable inliner and variable name coalescing. I think that's why it spends so much time on it. We never really tested on generated code that looks like 3 address SSA forms so it might not be optimized in terms of compilation time.\r\n\r\nWe should create a seperate issue to address the compilation time.\r\n\r\n-Alan"}
{"project_id": "Closure", "bug_id": "363", "source_type": "google", "llm_input_text": "[Title]: Node.propToString fails on certain property types.\n[Symptom]:\nPatch attached\n\n[Context/Logs]:\n- This issue was closed by revision r1104."}
{"project_id": "Closure", "bug_id": "364", "source_type": "google", "llm_input_text": "[Title]: jquery1.6 extern file gives compiler warning\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Include jquery1.6.js extern file (--extern jquery1.6.js)\r\n2. Compile\r\n\r\n What is the expected output? What do you see instead? \nCompiled code with no warning, instead:\r\njquery-1.6.js:292: WARNING - property clone already defined on superclass Object; use @override to override it\r\n\r\n What version of the product are you using? On what operating system? \n21/Oct/2011\r\n\r\n Please provide any additional information below. \nAttached is the fix (added @override annotation)\n\n[Context/Logs]:\n- i'm thinking of just removing this warning, because it is not useful. thoughts?\n- I have no problems with explicitly declaring an override.  It can help catch accidental overriding of a method.  Rare problem, I know but one that can be quite painful to debug.  I would vote to keep @override.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I would prefer not to add Object.prototype.clone to the  Jquery externs. That just seems like a workaround for a workaround.\n- This issue was closed by revision r1600."}
{"project_id": "Closure", "bug_id": "365", "source_type": "google", "llm_input_text": "[Title]: named function expression shadowed via var declaration breaks code\n[Symptom]:\nWhat steps will reproduce the problem? \n1. create a variable with same function expression name but different value\r\n2. try to operate as expected with that variable\r\n3. see code breaking for no reason\r\n\r\nvar o = {\r\n    draw: function draw() {\r\n        var draw = [];\r\n        return draw.push(123);\r\n    }\r\n};\r\n\r\n// compiles into\r\nvar o={draw:function draw(){draw=[];return draw.push(123)}};\r\n// problem is in draw=[]\r\n\r\n What is the expected output? What do you see instead? \nexpected output is 1\r\nI see an error since function draw has no method push\r\nThe fact a variable has same function expression name means the function expression name could be removed from its inner scope since var sameName will shadow it in any case.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nit does not matter, the output is wrong\r\n\r\n\r\n Please provide any additional information below. \nFunction declarations do not have this problem.\r\nWhenever this is a good technique or not, there is a logic problem with the parser when function expression name is shadowed.\r\n\r\nSame happens within a closure:\r\nthis.o = (function(){\r\n    return {\r\n    draw: function draw() {\r\n            var draw = [];\r\n            return draw.push(123);\r\n        }\r\n    };\r\n}());\r\n\r\nBest Regards\n\n[Context/Logs]:\n- Hi Nicholas, I swear I have searched before creating this but I guess comments are not part of the search ( I looked for function expression name shadowed ). Thanks for the merge"}
{"project_id": "Closure", "bug_id": "366", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "367", "source_type": "google", "llm_input_text": "[Title]: named function expression shadowed via var declaration breaks code\n[Symptom]:\nWhat steps will reproduce the problem? \n1. create a variable with same function expression name but different value\r\n2. try to operate as expected with that variable\r\n3. see code breaking for no reason\r\n\r\nvar o = {\r\n    draw: function draw() {\r\n        var draw = [];\r\n        return draw.push(123);\r\n    }\r\n};\r\n\r\n// compiles into\r\nvar o={draw:function draw(){draw=[];return draw.push(123)}};\r\n// problem is in draw=[]\r\n\r\n What is the expected output? What do you see instead? \nexpected output is 1\r\nI see an error since function draw has no method push\r\nThe fact a variable has same function expression name means the function expression name could be removed from its inner scope since var sameName will shadow it in any case.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nit does not matter, the output is wrong\r\n\r\n\r\n Please provide any additional information below. \nFunction declarations do not have this problem.\r\nWhenever this is a good technique or not, there is a logic problem with the parser when function expression name is shadowed.\r\n\r\nSame happens within a closure:\r\nthis.o = (function(){\r\n    return {\r\n    draw: function draw() {\r\n            var draw = [];\r\n            return draw.push(123);\r\n        }\r\n    };\r\n}());\r\n\r\nBest Regards\n\n[Context/Logs]:\n- Hi Nicholas, I swear I have searched before creating this but I guess comments are not part of the search ( I looked for function expression name shadowed ). Thanks for the merge"}
{"project_id": "Closure", "bug_id": "368", "source_type": "google", "llm_input_text": "[Title]: SIMPLE_OPTIMIZATIONS breaks code emited by uhc's js backend\n[Symptom]:\nWhat steps will reproduce the problem? \n1. install uhc &gt;= 1.1.3\r\n2. run build (setting the CLOSURE_COMPILER environment variable to the location of compiler.jar)\r\n3. open a browser at index.html\r\n4. observe &quot;Hello world&quot;\r\n5. in build, replace WHITESPACE_ONLY with SIMPLE_OPTIMIZATIONS\r\n6. open a browser at index.html\r\n7. observe type error.\r\n\r\n What is the expected output? What do you see instead? \nI expect optimizations not to effect the output, but they do.\r\n\r\n What version of the product are you using? On what operating system? \nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 1741\r\nBuilt on: 2012/01/30 15:02\r\n\r\nUbuntu 11.10\r\n\r\n Please provide any additional information below. \nN/A\n\n[Context/Logs]:\n- i have no idea what UHC is. United Health Care?\r\n\r\nwould it be possible to attach the actual code you're compiling?\n- UHC == Utrecht Haskell Compiler. Here are the files it generates.\n- The Compiler only supports a subset of JavaScript:\r\n[URL]\r\n\r\n[URL]\r\n\r\nIf you can be a little more specific about where the problem is we can narrow down if this is an limitation or a bug.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "369", "source_type": "google", "llm_input_text": "[Title]: Memory leak from Tracer.ThreadTrace when setTracerMode is set to OFF\n[Symptom]:\nThis was originally reported by tom@sproutbuilder.com in closure-library bug list:\r\n[URL]\r\n\r\n\r\n What steps will reproduce the problem? \n1. Disable your tracer via  options.setTracerMode(CompilerOptions.TracerMode.OFF);\r\n2. Run compiler in a Java project.\r\n3. Stop Tomcat 7 server.\r\n4. View logs:\r\n\r\nSEVERE: The web application [/translator] created a ThreadLocal with key of type [java.lang.ThreadLocal] (value [java.lang.ThreadLocal@62add0e8]) and a value of type [com.google.javascript.jscomp.Tracer.ThreadTrace] (value []) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.\r\n\r\n4. MaxPermSize JVM setting helps mask the issue, but over time we have gotten OutOfMemory exceptions on our development and staging servers.\r\n\r\n What is the expected output? What do you see instead? \nNo errors or memory leaks should be expected output, because the tracer should be disabled.\r\n\r\n What version of the product are you using? On what operating system? \nclosure-compiler r1811\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- Should we be calling traces.remove() rather than traces.set(null) (traces being the ThreadLocal object)?\n- It seems likely that this will need to be debugged in the environment in which it is running.  Chris did you have more details about the server?\n- ... [Middle Discussions Snipped for Brevity] ...\n- As the problem is not fixed, could this please be reopened?\n- From reading the code, I assume the following:\r\nThe `ThreadLocal` is created from the `Tracer.getThreadTrace()` method which is called in the constructor.\r\nThe ThreadLocal is only removed from within `Tracer.clearThreadTrace`. This is called from `clearCurrentThreadTrace()` - which is completely unused - and from `logAndClearCurrentThreadTrace()`. The latter is only called from within the `bootCompilerThread` `Callable`. And that - despite being created unconditionally - is only used if `Compiler.useThreads` is `true`.\r\nThat means that if `Compiler.useThreads` is `false`, the `ThreadLocal` is created but never removed. So could we please reopen this ticket?"}
{"project_id": "Closure", "bug_id": "370", "source_type": "google", "llm_input_text": "[Title]: weird object literal invalid property error on unrelated object prototype\n[Symptom]:\nApologies in advance for the convoluted repro case and the vague summary.\r\n\r\nCompile the following code (attached as repro.js) with:\r\njava -jar build/compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --jscomp_error=accessControls --jscomp_error=checkTypes --jscomp_error=checkVars --js repro.js *\r\n\r\n/**\r\n * @param {{text: string}} opt_data\r\n * @return {string}\r\n */\r\nfunction temp1(opt_data) {\r\n  return opt_data.text;\r\n}\r\n\r\n/**\r\n * @param {{activity: (boolean|number|string|null|Object)}} opt_data\r\n * @return {string}\r\n */\r\nfunction temp2(opt_data) {\r\n  /** @notypecheck */\r\n  function __inner() {\r\n    return temp1(opt_data.activity);\r\n  }\r\n  return __inner();\r\n}\r\n\r\n/**\r\n * @param {{n: number, text: string, b: boolean}} opt_data\r\n * @return {string}\r\n */\r\nfunction temp3(opt_data) {\r\n  return 'n: ' + opt_data.n + ', t: ' + opt_data.text + '.';\r\n}\r\n\r\nfunction callee() {\r\n  var output = temp3({\r\n    n: 0,\r\n    text: 'a string',\r\n    b: true\r\n  })\r\n  alert(output);\r\n}\r\n\r\ncallee();\r\n\r\n\r\nyields:\r\nrepro.js:30: ERROR - actual parameter 1 of temp3 does not match formal parameter\r\nfound   : {b: boolean, n: number, text: (string|undefined)}\r\nrequired: {b: boolean, n: number, text: string}\r\n  var output = temp3({\r\n\r\nIt seems like temp3 is actually being called with the right type {b: boolean, n: number, text: string} though it seems to think that text is a (string|undefined)\r\nThis seems to happen because of the seemingly unrelated code in functions temp1 and temp2. If I change the name of the text property (as in repro3.js) it works.\r\nAdditionally, if I fix the type of the activity property in the record type of temp2 it works (as in repro2.js)\r\n\r\nThis comes up in our codebase in some situations where we don't have type info for all the objects being passed into a function. It's always a tricky one to find because it reports an error at a location that looks correct.\r\n\r\n\r\n* it also fails with SIMPLE_OPTIMIZATIONS\n\n[Context/Logs]:\n- This issue was closed by revision r1858."}
{"project_id": "Closure", "bug_id": "371", "source_type": "google", "llm_input_text": "[Title]: The numbers in Calendar popup in Settings>vacation responder and in tasks mole are displayed as ASCII digits instead of Arabic-Indic digits.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Login to gmail\r\n2. Set UI to Persian\r\n3. Go to general settings and open the date picker in vacation responder drop down list. (or) Open a task mole, open a task and click on date picker.\r\n\r\n What is the expected output? What do you see instead? \nExpected Results:\r\nNumber should be displayed as Arabic-Indic digits.\r\n\r\nActual Results:\r\nThe numbers are displayed as ASCII digit.\r\n\r\n What version of the product are you using? On what operating system? \nRepro on all OS/Browsers.\r\n\r\n Please provide any additional information below.\n"}
{"project_id": "Closure", "bug_id": "372", "source_type": "google", "llm_input_text": "[Title]: ComposeWarningsGuard is not thread safe\n[Symptom]:\nWhen using google closure compiler with ComposeWarningGard in a concurrent environment, the following exception is thrown:\r\n\r\njava.util.ConcurrentModificationException\r\n\tat java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1100)\r\n\tat java.util.TreeMap$KeyIterator.next(TreeMap.java:1154)\r\n\tat com.google.javascript.jscomp.ComposeWarningsGuard.enables(ComposeWarningsGuard.java:150)\r\n\tat com.google.javascript.jscomp.CompilerOptions.enables(CompilerOptions.java:1027)\r\n\tat com.google.javascript.jscomp.Compiler.initOptions(Compiler.java:257)\r\n\tat com.google.javascript.jscomp.Compiler.initModules(Compiler.java:347)\r\n\tat com.google.javascript.jscomp.Compiler.init(Compiler.java:328)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:536)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:522)\n"}
{"project_id": "Closure", "bug_id": "373", "source_type": "google", "llm_input_text": "[Title]: ComposeWarningsGuard is not thread safe\n[Symptom]:\nWhen using google closure compiler with ComposeWarningGard in a concurrent environment, the following exception is thrown:\r\n\r\njava.util.ConcurrentModificationException\r\n\tat java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1100)\r\n\tat java.util.TreeMap$KeyIterator.next(TreeMap.java:1154)\r\n\tat com.google.javascript.jscomp.ComposeWarningsGuard.enables(ComposeWarningsGuard.java:150)\r\n\tat com.google.javascript.jscomp.CompilerOptions.enables(CompilerOptions.java:1027)\r\n\tat com.google.javascript.jscomp.Compiler.initOptions(Compiler.java:257)\r\n\tat com.google.javascript.jscomp.Compiler.initModules(Compiler.java:347)\r\n\tat com.google.javascript.jscomp.Compiler.init(Compiler.java:328)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:536)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:522)\n"}
{"project_id": "Closure", "bug_id": "374", "source_type": "google", "llm_input_text": "[Title]: Bad type inference with goog.isFunction and friends\n[Symptom]:\nexperimental/johnlenz/typeerror/test.js:16: WARNING - Property length\r\nnever defined on Number\r\n      var i = object.length;\r\n\r\n\r\nThis is the reduced test case:\r\n\r\n/**\r\n * @param {*} object Any object.\r\n * @return {boolean}\r\n */\r\ntest.isMatched = function(object) {\r\n  if (goog.isDef(object)) {\r\n    if (goog.isFunction(object)) {\r\n      // return object();\r\n    } else if (goog.isBoolean(object)) {\r\n      // return object;\r\n    } else if (goog.isString(object)) {\r\n      // return test.isDef(object);\r\n    } else if (goog.isArray(object)) {\r\n      var i = object.length;\r\n    }\r\n  }\r\n  return false;\r\n};\n\n[Context/Logs]:\n- This issue was closed by revision r2262."}
{"project_id": "Closure", "bug_id": "375", "source_type": "google", "llm_input_text": "[Title]: @export functionality does not work with --transform_amd_modules\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Create an AMD module and annotate some symbols with @export\r\n\r\nFind the attached amd.zip as usual.\r\n\r\n What is the expected output? What do you see instead? \n\r\nProperly compiled library code with @exported symbols preserved is expected, instead the following error occurs:\r\n\r\njava -jar ../../../../build/tool/gccompiler/compiler.jar --common_js_entry_module=Foo.js --compilation_level=ADVANCED_OP\r\nTIMIZATIONS --generate_exports --process_common_js_modules --transform_amd_modules --warning_level=VERBOSE --js=Foo.js -\r\n-js=lib/Bar.js --js=lib/Baz.js &gt; out.js\r\nFoo.js:9: ERROR - variable goog is undeclared\r\n  var Foo = function() {\r\n  ^\r\n\r\n1 error(s), 0 warning(s)\r\nmake: *** [out.js] Error 1\r\n\r\n What version of the product are you using? On what operating system? \n\r\nGJSCC r2256, Win7 x64\r\n\r\n Please provide any additional information below. \n\r\n1. Adding --process_closure_primitives does not help\r\n2. Adding goog/base.js as a source file does not help\r\n3. Changing --warning_level from VERBOSE to DEFAULT produces the following output:\r\n\r\nvar a=[];function b(g){return function(){return a[g].apply(this,arguments)}};var c={};function d(){}d.prototype={};d.prototype.b=b(1);c.a={c:d};c.a&amp;&amp;(c=c.a);var e={};function f(){}f.prototype={};f.prototype.b=b(0);e.a={d:f};e.a&amp;&amp;(e=e.a);function h(g,l){return a[g]=l}d.prototype.b=h(1,function(){return&quot;Hello&quot;});f.prototype.b=h(0,function(){return&quot;Goodbye&quot;});var i={},j=c.c;function k(){}goog.g(&quot;Foo$$module$Foo&quot;,k);k.prototype=Object.create(j.prototype);k.prototype.b=function(){return j.prototype.b.call(this)+&quot;, World!&quot;};goog.f(k.prototype,&quot;foo&quot;,k.prototype.b);i.a={e:k};i.a&amp;&amp;(i=i.a);\r\n\r\n3a. Generated symbol for Foo constructor seems to be mangled\r\n3b. Export functions goog.g/d are not defined in the source\r\n3c. Adding goog/base.js to the sources does not help\r\n\r\nPerhaps in case of AMD modules compiler could generate export fun\n...[Description Truncated]...\n\n[Context/Logs]:\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "376", "source_type": "google", "llm_input_text": "[Title]: Bad type inference with goog.isFunction and friends\n[Symptom]:\nexperimental/johnlenz/typeerror/test.js:16: WARNING - Property length\r\nnever defined on Number\r\n      var i = object.length;\r\n\r\n\r\nThis is the reduced test case:\r\n\r\n/**\r\n * @param {*} object Any object.\r\n * @return {boolean}\r\n */\r\ntest.isMatched = function(object) {\r\n  if (goog.isDef(object)) {\r\n    if (goog.isFunction(object)) {\r\n      // return object();\r\n    } else if (goog.isBoolean(object)) {\r\n      // return object;\r\n    } else if (goog.isString(object)) {\r\n      // return test.isDef(object);\r\n    } else if (goog.isArray(object)) {\r\n      var i = object.length;\r\n    }\r\n  }\r\n  return false;\r\n};\n\n[Context/Logs]:\n- This issue was closed by revision r2262."}
{"project_id": "Closure", "bug_id": "377", "source_type": "google", "llm_input_text": "[Title]: Variable i first declared in externs.zip/window.js\n[Symptom]:\nWith r2279, variables named &quot;i&quot; in the global scope give a redeclaration error.\r\n\r\nSeems to me like we can find a better way to handle this.\n\n[Context/Logs]:\n- Yeah, it is pretty annoying, but it keeps people from being broken by the stupid browser extension injecting \"i\".\n- Can someone take a look at this approach?\r\n\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- I was worried that a @suppress tag would fail to warn about a legitimate redeclaration error:\r\n\r\nfor(var i = 0; i < 10; i++) {\r\n\talert(i);\r\n}\r\n\r\nfor(var i = 0; i < 10; i++) {\r\n\talert(i);\r\n}\r\n\r\nHowever, that was not the case (the @suppress only applied to the first re-declaration). I've updated the codereview to just be an extern change.\n- This issue was closed by r2315"}
{"project_id": "Closure", "bug_id": "378", "source_type": "google", "llm_input_text": "[Title]: jQuery deferred.then allows null but is marked as non-null\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Visit [URL]\r\n\r\n2. Select Advanced.\r\n\r\n3. Paste the following:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// @externs_url [URL]\r\n// ==/ClosureCompiler==\r\n\r\n$(&quot;foo&quot;).animate({}).promise().then(function(){}, null);\r\n\r\n4. Click Compile.\r\n\r\n5. Click Warnings.\r\n\r\nEXPECTING: no warnings.\r\n\r\nACTUAL: \r\n\r\nJSC_TYPE_MISMATCH: actual parameter 2 of jQuery.Promise.then does not match formal parameter\r\nfound   : null\r\nrequired: function (): ? at line 1 character 50\r\n$(&quot;foo&quot;).animate({}).promise().then(function(){}, null);\n\n[Context/Logs]:\n- See [URL]\r\n\r\n\"All three arguments (including progressCallbacks, as of jQuery 1.7) can be either a single function or an array of functions. The arguments can also be null if no callback of that type is desired.\"\n- This issue was closed by r2291"}
{"project_id": "Closure", "bug_id": "379", "source_type": "google", "llm_input_text": "[Title]: \"invalid property id\" errors using reserved names as IdentifierNames\n[Symptom]:\nWhat steps will reproduce the problem? \n1. use a reserved word as an IdentifierName (vs Identifier)\r\ni.e. a={class: 123, import: &quot;abc&quot;}\r\n2. compile\r\n\r\n What is the expected output? What do you see instead? \nAs &quot;class&quot; and &quot;import&quot; are used as an IdentifierNames and NOT as as Identifiers (as described in es5.github.com/#A.1).\r\nStill the Closure Compiler returns\r\n&quot;JSC_PARSE_ERROR: Parse error. invalid property id at line 1 character 3&quot;\r\n\r\nIt should be completely valid and works (at least) in FF 17 and Chrome 23 and IE 10.\r\n\r\nA example similar to the one above is provided by Mozilla [URL]\n\n[Context/Logs]:\n- Closure Compiler defaults to ES3\r\n[URL]\r\n\r\nthe es5.github.com spec you're pointing at is for ES5. If you want to use ES5, you can use the --language_in=ECMASCRIPT5 flag"}
{"project_id": "Closure", "bug_id": "380", "source_type": "google", "llm_input_text": "[Title]: String conversion optimization is incorrect\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nvar f = {\r\n  valueOf: function() { return undefined; }\r\n}\r\nString(f)\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected output: &quot;[object Object]&quot;\r\nActual output: &quot;undefined&quot;\r\n\r\n What version of the product are you using? On what operating system? \n\r\nAll versions (http://closure-compiler.appspot.com/ as well).\r\n\r\n Please provide any additional information below. \n\r\nThe compiler optimizes String(x) calls by replacing them with x + ''. This is correct in most cases, but incorrect in corner cases like the one mentioned above.\n\n[Context/Logs]:\n- The code sample violates the assumption \"Standard methods on Object,\r\nArray, String, Number and Boolean have not be redefined in a way that\r\nbreaks the original contract\" [1].\r\n\r\n[1] [URL]\n- It's not actually breaking the valueOf contract: it takes no arguments, returns a string and has no side effects. It just looks like that the assumption the compiler currently makes:\r\n\r\nString(Foo) = Foo + ''\r\n\r\nisn't always valid. The question remains, how high of a priority is such a case?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r2061.\n- This issue was closed by revision r2061."}
{"project_id": "Closure", "bug_id": "381", "source_type": "google", "llm_input_text": "[Title]: Addition to contrib/externs/facebook_javascript_sdk.js\n[Symptom]:\n[URL]\r\n\r\nPlease add:\r\n\r\n/**\r\n * @see [URL]\r\n * @param {function(Object.&lt;*,*&gt;)} callback\r\n */\r\nFB.Canvas.getPageInfo = function(callback) {};\n\n[Context/Logs]:\n- This issue was closed by revision 48342227da94."}
{"project_id": "Closure", "bug_id": "382", "source_type": "google", "llm_input_text": "[Title]: Add a warning when implicitly converting a function to a boolean\n[Symptom]:\nCompile the following code:\r\n\r\n  goog.require('goog.structs.Map');\r\n\r\n  var main = function() {\r\n    var map = new goog.structs.Map();\r\n    if (map.isEmpty) { // &lt;-- *\r\n      alert('empty');\r\n    }\r\n  };\r\n\r\n  main();\r\n\r\nWhat is the expected output?\r\nA warning that says something like &quot;Warning: map.isEmpty is a function. Did you mean &quot;map.isEmpty()&quot;?\r\n\r\nWhat do you see instead?\r\nNo warning.\n\n[Context/Logs]:\n- This has come up before. The counter-argument is that this is a very common pattern in JS\r\nif (element.chromeMagic) {\r\n  element.chromeMagic()\r\n}\n- This is used widely. This problem is made worse by the fact that property renaming invalidates the following pattern:\r\n\r\nif ('getContext' in element) {\r\n  element.getContext('2d');\r\n}\r\n\r\nI could see such a warning being part of a diagnostic group that wasn't enabled by default.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We could encourage \"!= undefined\" for these special cases. The check, I think is worthwhile.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "383", "source_type": "google", "llm_input_text": "[Title]: Add a warning when implicitly converting a function to a boolean\n[Symptom]:\nCompile the following code:\r\n\r\n  goog.require('goog.structs.Map');\r\n\r\n  var main = function() {\r\n    var map = new goog.structs.Map();\r\n    if (map.isEmpty) { // &lt;-- *\r\n      alert('empty');\r\n    }\r\n  };\r\n\r\n  main();\r\n\r\nWhat is the expected output?\r\nA warning that says something like &quot;Warning: map.isEmpty is a function. Did you mean &quot;map.isEmpty()&quot;?\r\n\r\nWhat do you see instead?\r\nNo warning.\n\n[Context/Logs]:\n- This has come up before. The counter-argument is that this is a very common pattern in JS\r\nif (element.chromeMagic) {\r\n  element.chromeMagic()\r\n}\n- This is used widely. This problem is made worse by the fact that property renaming invalidates the following pattern:\r\n\r\nif ('getContext' in element) {\r\n  element.getContext('2d');\r\n}\r\n\r\nI could see such a warning being part of a diagnostic group that wasn't enabled by default.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We could encourage \"!= undefined\" for these special cases. The check, I think is worthwhile.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "384", "source_type": "google", "llm_input_text": "[Title]: Compiler option --only_closure_dependencies drops base.js (specious moocher)\n[Symptom]:\nThe compiler option --only_closure_dependencies drops moochers (i.e. files that do not provide any symbols; see DependencyOptions.java). This results in a huge reduction in output file size versus --manage_closure_dependencies. However, when compiling a program that uses the Closure Library, base.js is also dropped because it does not explicitly provide &quot;goog&quot; with a call to goog.provide(). This results in programs that do not run because &quot;goog&quot; is undefined.\r\n\r\nWith --only_closure_dependencies, if base.js is passed a dependency to the compiler, shouldn't &quot;goog&quot; be implicitly provided and also considered as one of the closure entry points?\n\n[Context/Logs]:\n- thanks for the report! this flag is still in the experimental stage, so bug reports like this are especially appreciated.\n- This issue was closed by revision r1890."}
{"project_id": "Closure", "bug_id": "385", "source_type": "google", "llm_input_text": "[Title]: re-defining exception parameter in catch block throws runtime exception\n[Symptom]:\nWe were attempting to compile some external libraries and came across this issue, it's bad \r\njavascript and easily fixed, but here's a reduced version of the js that triggers the error if it's \r\nsomething you guys are interested in fixing:\r\n\r\n What steps will reproduce the problem? \n\r\n1. compile this code at simple or advanced level: (http://gist.github.com/416406)\r\nfoo = function() {\r\n  try{\r\n    var a = 0;\r\n  }catch(e){\r\n    var e = 1;\r\n  }\r\n};\r\n\r\n What is the expected output? What do you see instead? \n\r\njava.lang.RuntimeException: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\ncurrent version up on [URL] and the version I downloaded \r\ntoday (5/27/10) can't find a version number)\r\n\r\n Please provide any additional information below. \nIf you simply reassign the parameter it works fine.\n\n[Context/Logs]:\n- Here is the relevant portion of the stack trace:\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nnull\r\n  Node(FUNCTION ): Input_0:1:14\r\nfoo = function() {\r\n  Parent(ASSIGN): Input_0:1:4\r\nfoo = function() {\r\n\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:131)\r\n\tat\r\ncom.google.javascript.jscomp.Normalize$DuplicateDeclarationHandler.onRedeclaration(Normalize.java:549)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.declareVar(SyntacticScopeCreator.java:246)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanVars(SyntacticScopeCreator.java:129)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanVars(SyntacticScopeCreator.java:171)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanVars(SyntacticScopeCreator.java:157)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanVars(SyntacticScopeCreator.java:171)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanVars(SyntacticScopeCreator.java:171)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanVars(SyntacticScopeCreator.java:171)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.scanRoot(SyntacticScopeCreator.java:108)\r\n\tat\r\ncom.google.javascript.jscomp.SyntacticScopeCreator.createScope(SyntacticScopeCreator.java:76)\r\n\tat com.google.javascript.jscomp.NodeTraversal.getScope(NodeTraversal.java:576)\r\n\tat\r\ncom.google.javascript.jscomp.Normalize$ScopeTicklingCallback.enterScope(Normalize.java:621)\n...[Text Truncated]...\nl.pushScope(NodeTraversal.java:540)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:498)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:462)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:470)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:470)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:470)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:470)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:253)\r\n\tat\r\ncom.google.javascript.jscomp.Normalize.removeDuplicateDeclarations(Normalize.java:529)\r\n\tat com.google.javascript.jscomp.Normalize.process(Normalize.java:103)\r\n\tat com.google.javascript.jscomp.Compiler.process(Compiler.java:712)\r\n\tat com.google.javascript.jscomp.Compiler.normalize(Compiler.java:1475)\r\n\tat com.google.javascript.jscomp.Compiler.optimize(Compiler.java:1421)\r\n\tat com.google.javascript.jscomp.Compiler.compileInternal(Compiler.java:605)\n- Something has to do with name normalization. Mind taking a look, John?\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r237.\n- I had to go with the \"we don't support this\" error message (specifically \"The use of\r\nscope variable {0} is not allowed within a catch block with a catch exception of the\r\nsame name.\").  More details are available in the source code."}
{"project_id": "Closure", "bug_id": "386", "source_type": "google", "llm_input_text": "[Title]: Webserver on Port !== 80 is not supported\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Webserver on Port !== 80\r\n2. Use closure-compiler with js file on this browser\r\n3. see error message\r\n\r\n&gt;What is the expected output? \r\nclosure-compiler should work :-)\r\n\r\n&gt;What do you see instead?\r\nclosure-compiler does not work :-P\r\n\r\n12: URL [URL] is not formed \r\nproperly.\r\nOriginal Post Data: \r\noutput_format=json&amp;output_info=compiled_code&amp;output_info=warnings&amp;output_info=errors&amp;output_info=statistics&amp;compilation_level=SIMPLE_OPTIMIZATIONS&amp;warning_level=default&amp;code_url=http\r\n%3A%2F%correctHostname%3A8015%2FJavaScript%2Fclass.js&amp;js_code=\r\n\r\nServing the same JS from a Webserver on Port 80 works.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL] with Browser Opera 10.01\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The web service is hosted on AppEngine, and to prevent abuse, AppEngine does not allow \r\nconnections to non-standard port:\r\n\r\n[URL]\r\n\r\n\"... The URL must use the standard ports for HTTP (80) and HTTPS (443). The port is implied \r\nby the scheme, but may also be mentioned in the URL as long as the port is standard for the \r\nscheme (https://...:443/). An app cannot connect to an arbitrary port of a remote host, nor \r\ncan it use a non-standard port for a scheme. ...\"\r\n\r\nConsidering downloading and using the compiler locally:\r\n\r\n[URL]"}
{"project_id": "Closure", "bug_id": "387", "source_type": "google", "llm_input_text": "[Title]: DeviceOrientationEvent externs, iOS only extensions\n[Symptom]:\nI don't know what's the policy about vendor specific extension but I'm attaching a patch to the DeviceOrientationEvent externs file that adds the webkitCompassAccuracy and webkitCompassHeading properties.\r\n\r\nOnly available in iOS 5.0 and later.\r\n\r\nref: [URL]\n\n[Context/Logs]:\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "388", "source_type": "google", "llm_input_text": "[Title]: Typo in w3c_device_sensor_event.js\n[Symptom]:\nThe alpha, beta and gamma properties are missing for the DeviceRotationRate event. Probably a bad copy/paste from DeviceOrientationEvent.\r\n\r\nSee attached patch.\n\n[Context/Logs]:\n- Thanks for the patch!\r\n\r\nHave you completed a CLA? The instructions are here: [URL]\n- Yes, I've already signed the CLA (see\n[URL]\n\nDo I need to add my name into the CONTRIBUTORS file?\n\nw3c_device_sensor_event.js\n\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision d69736d4c3e7.\n- This issue was closed by revision d69736d4c3e7."}
{"project_id": "Closure", "bug_id": "389", "source_type": "google", "llm_input_text": "[Title]: DiagnosticGroup NullPointer\n[Symptom]:\nWhat steps will reproduce the problem? \nThe error does not happen consistently. We were running the closure compiler in 2 threads, each with its own compiler options. Sometimes DiagnosticGroup throws a NullPointerExpception. We were running it with simple optimizations and warning level quiet.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nv20130722 running Jenkins on Solaris\r\n\r\n Please provide any additional information below. \nCaused by: java.lang.NullPointerException\r\n\tat com.google.javascript.jscomp.DiagnosticGroup.isSubGroup(DiagnosticGroup.java:117)\r\n\tat com.google.javascript.jscomp.DiagnosticGroupWarningsGuard.disables(DiagnosticGroupWarningsGuard.java:42)\r\n\tat com.google.javascript.jscomp.ComposeWarningsGuard.disables(ComposeWarningsGuard.java:130)\r\n\tat com.google.javascript.jscomp.CompilerOptions.disables(CompilerOptions.java:1175)\r\n\tat com.google.javascript.jscomp.Compiler.reconcileOptionsWithGuards(Compiler.java:317)\r\n\tat com.google.javascript.jscomp.Compiler.initOptions(Compiler.java:297)\r\n\tat com.google.javascript.jscomp.Compiler.initModules(Compiler.java:398)\r\n\tat com.google.javascript.jscomp.Compiler.init(Compiler.java:377)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:599)\r\n\tat com.rightmove.closurecompiler.ClosureCompilerWorker.call(ClosureCompilerWorker.java:30)\r\n\tat com.rightmove.closurecompiler.ClosureCompilerWorker.call(ClosureCompilerWorker.java:14)\r\n\t... 5 more\n\n[Context/Logs]:\n- Were you sharing diagnostic class instances between the compiler options objects?  They really need to be \"owned\" by a compiler options object.\n- No I was not using the diagnostics class directly. I was using CompilationLevel.setOptionsForCompilationLevel() and WarningLevel.setOptionsForWarningLevel() to update the compiler options. Each thread has its own instance of CompilerOptions\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 763faa34d5e6.\n- This issue was closed by revision bb893266036c."}
{"project_id": "Closure", "bug_id": "390", "source_type": "google", "llm_input_text": "[Title]: compiler crash on goog.scope locals\n[Symptom]:\ngoog.provide(&quot;main&quot;);\r\ngoog.scope (function (){\r\n  var a = foo, b, c = 1;\r\n});\r\n\r\nReported by Thomas Fischer\r\n\r\nThere are 2 separate issues here: that there's an error, and that the error make the compiler crash.\n\n[Context/Logs]:\n- Code review at\r\n[URL]\n- This issue was closed by revision d2b3ca66b608.\n- This issue was closed by revision d2b3ca66b608."}
{"project_id": "Closure", "bug_id": "391", "source_type": "google", "llm_input_text": "[Title]: var obj2 = /** @dict */ { x: 321 }; displaying warninging in ADVANCED_OPTIMIZATION mode\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create a file with the following content\r\n\r\n/** @expose */\r\nvar obj2 = /** @dict */ { x: 321 };\r\nalert(obj2[x]);\r\n\r\n2. Compile the file with the flag &quot;--compilation_level ADVANCED_OPTIMIZATIONS&quot;\r\n3. The compiler will compile the file and output an incorrect warning message\r\n\r\n What is the expected output? What do you see instead? \nI expected zero warnings. Instead I saw one warning, &quot;ERROR - Illegal key, the object literal is a dict&quot;.  Based on the document for @dict this should be working without any warnings: [URL]\r\n\r\n What version of the product are you using? On what operating system? \nOS: Ubuntu 10\r\nClosure Compiler: Version: v20130823 Built on: 2013/08/26 10:59\r\n\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The warning is correct, the object-literal key should be quoted, { 'x': 321 }.\r\n\r\nThe doc is out of date, sorry about that.\n- I updated the doc.\r\n[URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- what are the two different outputs?\n- @expose is only valid on a property (we should probably warn when it is used elsewhere).\r\n\r\nYour second example still doesn't have the array index quoted. The corrected sample would be:\r\n\r\n/**\r\n * @expose\r\n * @dict\r\n */\r\nvar obj2 = { };\r\n/**\r\n * @type {number}\r\n */\r\nobj2['x'] = 321;\r\nalert(obj2['x']);\r\n\r\nWhen corrected, both examples produce the same output of:\r\n\r\nalert(321);"}
{"project_id": "Closure", "bug_id": "392", "source_type": "google", "llm_input_text": "[Title]: goog.isArray doesn't hint compiler\n[Symptom]:\nWhat steps will reproduce the problem? \n 1. \n\r\n/**\r\n * @param {*} object\r\n * @return {*}\r\n */\r\nvar test = function(object) {\r\n  if (goog.isArray(object)) {\r\n    /** @type {Array} */ var x = object;\r\n    return x;\r\n  }\r\n};\r\n\r\n2. ADVANCED_OPTIMIZATIONS\r\n\r\n What is the expected output? What do you see instead? \n\r\nERROR - initializing variable\r\nfound   : *\r\nrequired: (Array|null)\r\n    /** @type {Array} */ var x = object;\r\n                                 ^\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20130411-90-g4e19b4e\r\nBuilt on: 2013/06/03 12:07\r\n\r\n Please provide any additional information below. \n\r\ngoog.is* is supposed to help the compiler to check which type we're dealing with.\n\n[Context/Logs]:\n- fix posted here\r\n[URL]\n- This issue was closed by revision 6f981f77e5bd.\n- This issue was closed by revision 6f981f77e5bd."}
{"project_id": "Closure", "bug_id": "393", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "394", "source_type": "google", "llm_input_text": "[Title]: HTMLCanvasElement not recognized\n[Symptom]:\nWhat steps will reproduce the problem? \n1. compile code that uses window.HTMLCanvasElement with Advanced Compilation\r\n(example:  [URL]\r\n\r\n What is the expected output? What do you see instead? \nthe code should still reference window.HTMLCanvasElement\r\n\r\n What version of the product are you using? On what operating system? \ncompiler-20131014 (local jar)\n\n[Context/Logs]:\n- This issue was closed by revision eb8f02b6e06b."}
{"project_id": "Closure", "bug_id": "395", "source_type": "google", "llm_input_text": "[Title]: Enum unfolding doesn't work in some cases\n[Symptom]:\nI hope it's not too annoying posting all these tiny little bugs, but I try to keep code as verbose as possible and let the compressor do the rest. In this case I found a strange behavior, that CG doesn't unroll the following enum:\r\n\r\n(function(window) {\r\n\r\n/**\r\n*\r\n* @enum {number}\r\n*\r\n*/\r\nvar STATUS = {\r\nPLAY: 0,\r\nPAUSE: 1,\r\nGAMEOVER: 2,\r\nWAIT: 3\r\n};\r\n\r\nfunction integratePiece() {\r\ngameStatus = STATUS.GAMEOVER;\r\n}\r\n\r\nfunction loop() {\r\nintegratePiece();\r\nsetTimeout(loop, speed);\r\n}\r\n\r\nloop();\r\n\r\n})(this);\r\n\r\nIn simple mode I just get:\r\n\r\n(function(c){function a(){gameStatus=b.GAMEOVER;setTimeout(a,speed)}var b={PLAY:0,PAUSE:1,GAMEOVER:2,WAIT:3};a()})(this);\r\n\r\nAdvanced mode isn't much better:\r\n\r\n(function(){function a(){gameStatus=b.a;setTimeout(a,speed)}var b={c:0,b:1,a:2,d:3};a()})(this);\r\n\r\nI tried to add a @const annotation as well, without any effect.\r\n\r\nP.S.: The variables are all global because I reduced the code as much as possible to proof the problem. In the real code all the variables are defined in the closure.\r\n\r\nThanks!\r\n\r\nRobert\n\n[Context/Logs]:\n- This is a function declaration ordering issue.  Change this function declarations to var initializations:\r\n\r\nvar loop = function() {...}\r\n\r\nFixes this issue."}
{"project_id": "Closure", "bug_id": "396", "source_type": "google", "llm_input_text": "[Title]: Change @nosideeffects to @throws on RegExp constructor extern\n[Symptom]:\nObserve [URL]\r\n\r\nAs per [URL] , the constructor of the RegExp object may throw TypeError or SyntaxError (and therefore should not be @nosideeffects).\r\n\r\nRecommend replacing this directive with @throws{(SyntaxError|TypeError)}\r\n\r\nChange addresses code-stripping in the following usage pattern (the compiler will strip the &quot;var unused&quot; line, even though the RegExp constructor could throw as a side-effect):\r\n\r\nfunction verifyOnClientAndSendRegexpToServer(pattern) {\r\n  // Check client-side to save the round-trip. This will throw\r\n  // if the pattern is not a valid RegExp. \r\n  var unused = new RegExp(pattern);\r\n  sendRegexpToServer(pattern);\r\n}\n\n[Context/Logs]:\n- We should avoid unsounded optimizations as much as possible so in this case, I propose this:\r\n\r\n1. Make compiler understand @nosideeffect should be dropped with @throw\r\n2. Make a special pass that runs the regex checker to see if the pattern is valid. If so, optimze it like it is sideeffect free\n- As per the directions at [URL] I've attached the patch below.\r\n\r\n(Note: If there's a unit test to add, I'd be happy to, but I didn't find any section of the unit tests that validates the extern type annotations on the Javascript core itself).\r\n\r\nDiff generated via 'git diff ^HEAD HEAD' on my clone of the project.\n- As a googler you can also prepare a CL internally, which is easier to consume as it can be tested against our internal code base.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "397", "source_type": "google", "llm_input_text": "[Title]: Missing CompileTask in jar from Maven.org in v20140407\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Download 'closure-compiler-v20140407.jar', from [URL]\r\n\r\n What is the expected output? What do you see instead? \nThe 'com.google.javascript.jscomp.ant' package is not found in the most recent closure-compiler downloaded from maven.org.\r\n\r\nHas it been moved somewhere else, and I keep over looking it?\r\n\r\n What version of the product are you using? On what operating system? \nv20140407\r\nWindows 7 64bit\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- To avoid pulling in ant dependencies I omitted this from the closure-compiler target.  What's your use case?  You can find the ant-related code in the uber jar from the tarball (for now)\n- Current use case is to have a fully automated build that currently is just Ant + Ivy. I have an Ant task that uses Ivy and downloads third party libraries used during the build process. Our build server is configured to only be able to access a few different external hostnames, one of which is the maven.org repo's\n- Would a separate closure-compiler-anttask target work for you?\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "398", "source_type": "google", "llm_input_text": "[Title]: Output source map does not use input source maps\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Build [URL]\r\n2. Look at the generated source map\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected output source map to be a transformed version of the input source map (the input file contains the &quot;//# sourceMappingURL&quot; pragma at the bottom). Instead, the input source map is ignored.\r\n\r\nThe transformation should at least preserve the original file names and line/column mappings, but it would also be very helpful to have an option for the sourcesContent field to be carried over and updated. I'm using closure compiler to optimize the output of a custom compile-to-js language as you can tell from the input source map.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nVersion: v20140303\r\nBuilt on: 2014/03/04 10:53\r\nMac OS X 10.9.2\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This is useful for other compilers whose priority isn't speed nor compression to use the closure compiler. Basically means a composition of source-maps.\n- I would also like this feature, i've also noticed that the source map \"source\" uses an absolute path to the file not not realtive to the JS file which means i need to edit both files manually and can't include this in a build script.\n- also [URL] is the same issue, and no you can't get around this using --output_wrapper flag.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "399", "source_type": "google", "llm_input_text": "[Title]: SourceMapConsumerV3.visitMappings() omits the last mapping on the last line\n[Symptom]:\nIt looks like it sets pending=true but nothing prints the mapping if the loop exits.\r\n\r\n[1] [URL]\n\n[Context/Logs]:\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "400", "source_type": "google", "llm_input_text": "[Title]: Math.{min,max} are recognized as a 0 or 1 argument functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try to compile &quot;Math.{min,max}(1,2)&quot;\r\n2. Use @compilation_level ADVANCED_OPTIMIZATIONS\r\n\r\nWhat is the expected output?\r\nNo warnings.\r\n\r\nWhat do you see instead?\r\nWarning:\r\nJSC_WRONG_ARGUMENT_COUNT: Function Object.min: called with 2 argument(s). \r\nFunction requires at least 0 argument(s) and no more than 1 argument(s). \r\nat line 1 character 8\r\nMath.min(1,2);\r\n        ^\r\n\r\n What version of the product are you using? On what operating system? \nBrowser: Opera/9.80 (Macintosh; Intel Mac OS X; U; en) Presto/2.2.15 \r\nVersion/10.10\r\nApp: [URL]\n\n[Context/Logs]:\n- My test case was:\r\n\r\nalert(Math.max(1,2));\n- i think i know the problem. Note that it works in the standalone jar, but not in the \r\nweb service.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Agreed, I experienced this as well from the closure tool hosted at\r\n[URL]  I was just about to log this bug when I\r\nfound this defect.  My code was:\r\nalert( Math.min( 1, 2 ) );\n- SVN and webservice have now both been update.\r\n\r\nPlease verify."}
{"project_id": "Closure", "bug_id": "401", "source_type": "google", "llm_input_text": "[Title]: Math.random() fails with --use_only_custom_externs\n[Symptom]:\nWhat version of the product are you using? On what operating system? \nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20140110\r\nBuilt on: 2014/01/14 16:25\r\n\r\nDebian GNU/Linux Xfce\r\n\r\n Please provide any additional information below. \nCompile a program with these options:\r\n\r\n  --compilation_level=ADVANCED_OPTIMIZATIONS\r\n  --use_only_custom_externs\r\n  --debug\r\n\r\nIt should look like this:\r\n\r\n  Math.$random$();\r\n  ...rest of code here...\r\n\r\nNotice that it's called Math.$random$ rather than Math.random. Which means if you remove --debug, it'll get renamed to something short like Math.K, which obviously fails.\r\n\r\nThe problem is line 1006 in the base.js file of the Closure Library:\r\n\r\n  goog.UID_PROPERTY_ = 'closure_uid_' + ((Math.random() * 1e9) &gt;&gt;&gt; 0);\r\n\r\nNormally this isn't a problem because of &quot;externs/es3.js&quot;.\r\n\r\nBut because the call to Math.random is at the top level (and not inside a function), it doesn't get stripped out when using --use_only_custom_externs.\r\n\r\nThis means that if a user wants to use --use_only_custom_externs they *must* provide their own extern for Math.random, even if they never call Math.random themself.\r\n\r\nA quick fix would be to change the line in base.js to this:\r\n\r\n  goog.UID_PROPERTY_ = 'closure_uid_' + ((Math[Link: 'random'] * 1e9) &gt;&gt;&gt; 0);\r\n\r\nAt least then it won't fail with an error, though you'll still have a useless Math.random call in the output.\r\n\r\nA better fix would be to make the compiler smart enough to strip out the Math.random even without an extern (perhaps treating the base.js file as special). Alternatively, the line could be moved into a function.\n\n[Context/Logs]:\n- This is expected behavior. The externs for the built-in ecmascript objects MUST be provided. \r\n\r\nSee comment #2 on issue 755\n- My point is that this makes --use_only_custom_externs significantly less useful, because you must provide an extern for Math.random *even if you never use Math.random*, because base.js uses it at the top-level.\n- --use_only_custom_externs is for a very slim set of users. If you're using base.js, then it isn't meant for you."}
{"project_id": "Closure", "bug_id": "402", "source_type": "google", "llm_input_text": "[Title]: Webserver on Port !== 80 is not supported\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Webserver on Port !== 80\r\n2. Use closure-compiler with js file on this browser\r\n3. see error message\r\n\r\n&gt;What is the expected output? \r\nclosure-compiler should work :-)\r\n\r\n&gt;What do you see instead?\r\nclosure-compiler does not work :-P\r\n\r\n12: URL [URL] is not formed \r\nproperly.\r\nOriginal Post Data: \r\noutput_format=json&amp;output_info=compiled_code&amp;output_info=warnings&amp;output_info=errors&amp;output_info=statistics&amp;compilation_level=SIMPLE_OPTIMIZATIONS&amp;warning_level=default&amp;code_url=http\r\n%3A%2F%correctHostname%3A8015%2FJavaScript%2Fclass.js&amp;js_code=\r\n\r\nServing the same JS from a Webserver on Port 80 works.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL] with Browser Opera 10.01\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The web service is hosted on AppEngine, and to prevent abuse, AppEngine does not allow \r\nconnections to non-standard port:\r\n\r\n[URL]\r\n\r\n\"... The URL must use the standard ports for HTTP (80) and HTTPS (443). The port is implied \r\nby the scheme, but may also be mentioned in the URL as long as the port is standard for the \r\nscheme (https://...:443/). An app cannot connect to an arbitrary port of a remote host, nor \r\ncan it use a non-standard port for a scheme. ...\"\r\n\r\nConsidering downloading and using the compiler locally:\r\n\r\n[URL]"}
{"project_id": "Closure", "bug_id": "403", "source_type": "google", "llm_input_text": "[Title]: DiagnosticGroup NullPointer\n[Symptom]:\nWhat steps will reproduce the problem? \nThe error does not happen consistently. We were running the closure compiler in 2 threads, each with its own compiler options. Sometimes DiagnosticGroup throws a NullPointerExpception. We were running it with simple optimizations and warning level quiet.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nv20130722 running Jenkins on Solaris\r\n\r\n Please provide any additional information below. \nCaused by: java.lang.NullPointerException\r\n\tat com.google.javascript.jscomp.DiagnosticGroup.isSubGroup(DiagnosticGroup.java:117)\r\n\tat com.google.javascript.jscomp.DiagnosticGroupWarningsGuard.disables(DiagnosticGroupWarningsGuard.java:42)\r\n\tat com.google.javascript.jscomp.ComposeWarningsGuard.disables(ComposeWarningsGuard.java:130)\r\n\tat com.google.javascript.jscomp.CompilerOptions.disables(CompilerOptions.java:1175)\r\n\tat com.google.javascript.jscomp.Compiler.reconcileOptionsWithGuards(Compiler.java:317)\r\n\tat com.google.javascript.jscomp.Compiler.initOptions(Compiler.java:297)\r\n\tat com.google.javascript.jscomp.Compiler.initModules(Compiler.java:398)\r\n\tat com.google.javascript.jscomp.Compiler.init(Compiler.java:377)\r\n\tat com.google.javascript.jscomp.Compiler.compile(Compiler.java:599)\r\n\tat com.rightmove.closurecompiler.ClosureCompilerWorker.call(ClosureCompilerWorker.java:30)\r\n\tat com.rightmove.closurecompiler.ClosureCompilerWorker.call(ClosureCompilerWorker.java:14)\r\n\t... 5 more\n\n[Context/Logs]:\n- Were you sharing diagnostic class instances between the compiler options objects?  They really need to be \"owned\" by a compiler options object.\n- No I was not using the diagnostics class directly. I was using CompilationLevel.setOptionsForCompilationLevel() and WarningLevel.setOptionsForWarningLevel() to update the compiler options. Each thread has its own instance of CompilerOptions\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision 763faa34d5e6.\n- This issue was closed by revision bb893266036c."}
{"project_id": "Closure", "bug_id": "404", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "405", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "406", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "407", "source_type": "google", "llm_input_text": "[Title]: ant jscomp with manageDependencies and advanced compilation produces no output\n[Symptom]:\nWhat steps will reproduce the problem? \n1. run ant jscomp task with the following settings:\r\n        &lt;!-- Run jscomp for this module --&gt;\r\n        &lt;jscomp warning=&quot;verbose&quot;\r\n                encoding=&quot;UTF-8&quot;\r\n                compilationLevel=&quot;advanced&quot;\r\n                customExternsOnly=&quot;false&quot;\r\n                generateExports=&quot;true&quot;\r\n                manageDependencies=&quot;true&quot;\r\n                debug=&quot;false&quot;\r\n                prettyprint=&quot;false&quot;\r\n                output=compiled.js&quot;&gt;\r\n\r\n        &lt;!-- source file specifications --&gt;\r\n\r\n    &lt;/jscomp&gt;\r\n\r\nEXPECTED:\r\ncompiled output in compiled.js\r\n\r\nACTUAL: \r\nempty file with no output\r\n\r\nNOTE: \r\nsetting manageDependencies=&quot;false&quot; causes compiled output to work.\r\n\r\nVERSION:\r\nv20140110\n\n[Context/Logs]:\n- This might be related to the differing code paths noted in [URL] .  Haven't tried stepping through it yet.\n- i'm pretty sure this is expected? if you don't list any entry points, then you don't get any files. it's likely the api is just broken, per your comment in 1217"}
{"project_id": "Closure", "bug_id": "408", "source_type": "google", "llm_input_text": "[Title]: goog.isArray doesn't hint compiler\n[Symptom]:\nWhat steps will reproduce the problem? \n 1. \n\r\n/**\r\n * @param {*} object\r\n * @return {*}\r\n */\r\nvar test = function(object) {\r\n  if (goog.isArray(object)) {\r\n    /** @type {Array} */ var x = object;\r\n    return x;\r\n  }\r\n};\r\n\r\n2. ADVANCED_OPTIMIZATIONS\r\n\r\n What is the expected output? What do you see instead? \n\r\nERROR - initializing variable\r\nfound   : *\r\nrequired: (Array|null)\r\n    /** @type {Array} */ var x = object;\r\n                                 ^\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: v20130411-90-g4e19b4e\r\nBuilt on: 2013/06/03 12:07\r\n\r\n Please provide any additional information below. \n\r\ngoog.is* is supposed to help the compiler to check which type we're dealing with.\n\n[Context/Logs]:\n- fix posted here\r\n[URL]\n- This issue was closed by revision 6f981f77e5bd.\n- This issue was closed by revision 6f981f77e5bd."}
{"project_id": "Closure", "bug_id": "409", "source_type": "google", "llm_input_text": "[Title]: Math.{min,max} are recognized as a 0 or 1 argument functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try to compile &quot;Math.{min,max}(1,2)&quot;\r\n2. Use @compilation_level ADVANCED_OPTIMIZATIONS\r\n\r\nWhat is the expected output?\r\nNo warnings.\r\n\r\nWhat do you see instead?\r\nWarning:\r\nJSC_WRONG_ARGUMENT_COUNT: Function Object.min: called with 2 argument(s). \r\nFunction requires at least 0 argument(s) and no more than 1 argument(s). \r\nat line 1 character 8\r\nMath.min(1,2);\r\n        ^\r\n\r\n What version of the product are you using? On what operating system? \nBrowser: Opera/9.80 (Macintosh; Intel Mac OS X; U; en) Presto/2.2.15 \r\nVersion/10.10\r\nApp: [URL]\n\n[Context/Logs]:\n- My test case was:\r\n\r\nalert(Math.max(1,2));\n- i think i know the problem. Note that it works in the standalone jar, but not in the \r\nweb service.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Agreed, I experienced this as well from the closure tool hosted at\r\n[URL]  I was just about to log this bug when I\r\nfound this defect.  My code was:\r\nalert( Math.min( 1, 2 ) );\n- SVN and webservice have now both been update.\r\n\r\nPlease verify."}
{"project_id": "Closure", "bug_id": "410", "source_type": "google", "llm_input_text": "[Title]: ! is not respected on a template type with a parameterized subclass\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Compile the attached js file with type checking.  I used the following: \r\njava -jar compiler.jar --warning_level=VERBOSE --js=snippet.js --closure_entry_point=snippet --js=closure/goog/base.js --js_output_file=out.js       \r\n\r\n What is the expected output? What do you see instead? \nOutput: \r\nsnippet.js:32: WARNING - actual parameter 1 of requiresNonNull does not match formal parameter\r\nfound   : (Object|null)\r\nrequired: Object\r\n  requiresNonNull(nonNullable);  //nonNullable is !Object, should be no error, is error\r\n                  ^\r\n\r\nsnippet.js:35: WARNING - actual parameter 1 of requiresNonNull does not match formal parameter\r\nfound   : (Object|null)\r\nrequired: Object\r\n  requiresNonNull(nullable);  //nullable is Object|null, should be and is error\r\n                  ^\r\n\r\nLine 35 is correctly identified as an error, but line 32 should not be an error.\r\n\r\n What version of the product are you using? On what operating system? \nv20131014, Ubuntu 12.04 and others\r\n\r\n Please provide any additional information below. \nWhen BadChild extends ParentObject.&lt;Object&gt;, (new BadChild()).doThing should take {!Object} as its first argument, and {Object} as its second.  The type checker believes that nonNullable in that case is (Object|null), despite the type declaration of its parent requiring non-null.\r\n\r\nGoodChild extends ParentObject.&lt;!Object&gt;, which silences our compiler warnings with redundant !s, and prevents us from taking the second argument of doThing as null.\n"}
{"project_id": "Closure", "bug_id": "411", "source_type": "google", "llm_input_text": "[Title]: js-for-compiler.html#types should mention {Object?} and {?Object} equivalence, if true\n[Symptom]:\nbase.js includes a line:\r\n  @return {Object?} The object or, if not found, null.\r\n\r\nI assume that {Object?} is the same as {?Object}, but\r\n[URL]\r\nonly mentions the first form. The same probably applies for &quot;!&quot;\n\n[Context/Logs]:\n- Thanks for your comment.  \"?Object\"/\"!Object\" is the preferred form.  The \"Object?\r\n\"/\"Object!\" form is deprecated. \r\n\r\nIf the intent was to have base.js updated, it should be filed against closure-library.\n- Yes, the ES4 specification changed while we were implementing it. {?Object} is the \r\ncorrect form. {Object?} is deprecated.\r\n\r\nIt is likely that we will remove support for {Object?} in some time in the future. But \r\nif we did, we would provide a script for auto-converting all the existing annotations."}
{"project_id": "Closure", "bug_id": "412", "source_type": "google", "llm_input_text": "[Title]: warning in 'externs.zip//es3.js'\n[Symptom]:\nWhen I compile using today's checkout (#2301) I notice this warning from inside the compiler's native es3.js extern:\r\n\r\n---------------------\r\nexterns.zip//es3.js:1091: WARNING - attempted re-definition of type Date\r\nfound   : function (new:Date, ?, ?, ?, ?, ?, ?, ?): string\r\nexpected: function (new:Date, ?=, ?=, ?=, ?=, ?=, ?=, ?=): string\r\nfunction Date(opt_yr_num, opt_mo_num, opt_day_num, opt_hr_num, opt_min_num,\r\n^\r\n----------------------\r\n\r\n/ Fredrik\n\n[Context/Logs]:\n- The fix has been submitted in the internal repository it should be pushed out tomorrow.\n- This issue was closed by revision r2307."}
{"project_id": "Closure", "bug_id": "413", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "414", "source_type": "google", "llm_input_text": "[Title]: Works using closure-compiler.appspot.com, fails using compiler.jar (Variable $ first declared...)\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1. Feed the JavaScript at [URL] into the compiler at \r\n[URL] (either by pasting in the JS itself, or the URL to it)\r\n2. Click compile and observe results\r\n3. Now feed the same JavaScript into the command-line compiler (java -jar compiler.jar --\r\njs=ajax.max.js  --js_output_file=ajax.min.js) and observe the results\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected to see the same output for both online compiler and the compiler one.\r\n\r\nInstead see:\r\n\r\n1. Correctly compiled output for the online compiler with no errors or warnings.\r\n2. For the command-line compiler get a zero-byte output file and see:\r\n\r\n  {SyntheticVarsDeclar}: ERROR - Variable $ first declared in {SyntheticVarsDeclar}\r\n\r\n  1 error(s), 0 warning(s)\r\n\r\nAs the compiler doesn't include any line or column information with this error it is a bit difficult \r\nto know why it is choking.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nDownloaded &quot;compiler-latest.zip&quot; on 9 November 2009, which I suppose corresponds to \r\ncompiler-20091106b.zip.\r\n\r\nThis is on Mac OS X 10.6.1; first few lines of &quot;java -showversion&quot; output:\r\n\r\n  java version &quot;1.6.0_15&quot;\r\n  Java(TM) SE Runtime Environment (build 1.6.0_15-b03-219)\r\n  Java HotSpot(TM) Client VM (build 14.1-b02-90, mixed mode)\r\n\r\nI get similar results (success with the online compiler, failure with the command-line compiler) \r\nfor other inputs:\r\n\r\n[URL]\r\n[URL]\r\n\r\nCan only get trivial examples to work with command-line compiler.\n\n[Context/Logs]:\n- I have the same kind of errors trying to compile last version of jquery. I'm using\r\ncompiler-20091106b. The errors are the same for normal and avanced compilation, this\r\nis the outut:\r\n\r\n\r\njquery-1.3.2.js:988: WARNING - Suspicious code. This code lacks side-effects. Is\r\nthere a bug?\r\n\t\t\tif ( name == \"selected\" && elem.parentNode )\r\n\t\t\t^\r\n\r\njquery-1.3.2.js:989: WARNING - Suspicious code. This code lacks side-effects. Is\r\nthere a bug?\r\n\t\t\t\telem.parentNode.selectedIndex;\r\n\t\t\t\t^\r\n\r\njquery-1.3.2.js:1866: WARNING - Suspicious code. This code lacks side-effects. Is\r\nthere a bug?\r\n\t\t\telem.parentNode.selectedIndex;\r\n\t\t\t^\r\n\r\n{SyntheticVarsDeclar}: ERROR - Variable clearInterval first declared in\r\n{SyntheticVarsDeclar}\r\n\r\n{SyntheticVarsDeclar}: ERROR - Variable hasDuplicate first declared in\r\n{SyntheticVarsDeclar}\r\n\r\n{SyntheticVarsDeclar}: ERROR - Variable setInterval first declared in\r\n{SyntheticVarsDeclar}\r\n\r\n{SyntheticVarsDeclar}: ERROR - Variable setTimeout first declared in\r\n{SyntheticVarsDeclar}\r\n\r\n4 error(s), 3 warning(s)\n- Same effect with latest jQuery (1.3.2) and closure-compiler checked out from SVN.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Confirmed that the 11/10 jar doesn't choke on those files any more.\r\n\r\nThanks for the fix.\n- The question is whether jQuery works after compiling it with the compiler?\r\nFor me it doesn't as $ function is broken and doesn't return HTML Element wrapped inside jQuery object.\r\n\r\nPlus MooTools compilation is still broken (same errors as above).\r\nI've been using the latest version from SVN."}
{"project_id": "Closure", "bug_id": "415", "source_type": "google", "llm_input_text": "[Title]: externs/es3.js missing optional flags for Date.UTC - causes warning in closure library.\n[Symptom]:\nUsing closure library, I see:\r\n\r\nclosure-library/closure/goog/i18n/timezone.js:209: WARNING - Function \r\nDate.UTC: called with 5 argument(s). Function requires at least 7 \r\nargument(s) and no more than 7 argument(s).\r\n  var timeInMs = Date.UTC(date.getUTCFullYear(), date.getUTCMonth(),\r\n                         ^\r\n\r\nMozilla documentation says all arguments but year and month are optional.\r\nAdding @param {number=} for the others should do the trick. I do not know if \r\nthe method would take strings, too.\n\n[Context/Logs]:\n- This issue was closed by revision r98."}
{"project_id": "Closure", "bug_id": "416", "source_type": "google", "llm_input_text": "[Title]: Namespace definition in Prototype is broken\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Namespace definition in prototype.js (Prototype library) looks like:\r\nif (!Node) var Node = { };\r\n2. Compile with latest command line compiler (Version: 20100917 (revision 440) Built on: 2010/09/17 17:55), with default options\r\n3. Open html which uses this script in IE8 - IE will show error message (something like &quot;Node - definition is missing&quot;, I use localized version and cannot write exact english message).\r\n\r\nWhat is the expected output?\r\nSomething like:\r\nif(!Node)var Node={};\r\n\r\nWhat do you see instead?\r\nNode||(Node={});\r\n\r\n What version of the product are you using? On what operating system? \nCommand line compiler (Version: 20100917 (revision 440) Built on: 2010/09/17 17:55), with default options, OS Linux Mint 7.\n\n[Context/Logs]:\n- This issue was closed by revision r614."}
{"project_id": "Closure", "bug_id": "417", "source_type": "google", "llm_input_text": "[Title]: $super is replaced when it should not be replaced\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Have javascript using prototype's $super\r\n2. Compile with advanced_optimizations\r\n3. See that $super is replaced by for example $super$$4\r\n\r\n What is the expected output? What do you see instead? \n$super should not be renamed as it is used by prototype.\r\n\r\n What version of the product are you using? On what operating system? \nLatest from svn.\r\n\r\n Please provide any additional information below. \nPersonally I made a quick fix in MakeDeclaredNamesUnique.java line 79:\r\nif (t.getCompiler().getCodingConvention().isExported(name)) { continue; }\r\nThis fixed it for me, but not sure if that's the right place or method to\r\nsolve this, as I am unfamiliar with the project.\n\n[Context/Logs]:\n- Quick question: Are you building from the command line, or using Closure Compiler programmatically?  What \r\ndoes your command line to the compiler look like?\n- I am building from the command line, here's what the command looks like:\r\n\r\njava -jar /Users/jochen/closure/build/compiler.jar --compilation_level\r\nADVANCED_OPTIMIZATIONS --js share.js --module share:1 --js main.js --module main:1\r\n--js recording.js --module recording:1 --js comments.form.js --module commentsform:1\r\n--js facebook.share.js --module facebookshare:1 --externs prototype.js\r\n--module_output_path_prefix /Users/jochen/ruby/karaoke/public/javascripts/compiled/\n- ... [Middle Discussions Snipped for Brevity] ...\n- To make my comment clear, one of the points of the normalization is to make it easier\r\nfor passes if the \"x\" they saw is the same \"x\" they saw earlier (without needing to\r\ntrack scope).  This makes things much easier for code motion because you don't need\r\nto worry about masking a variable of the same name.  If you change it \"$super\" is not\r\nunique the results would be unpredictable. After renaming it doesn't matter if the\r\nname is unique as the normalization is expected as renaming by design creates as many\r\nnon-unique names as possible.\n- This issue was closed by revision r139."}
{"project_id": "Closure", "bug_id": "418", "source_type": "google", "llm_input_text": "[Title]: Misplaced nosideeffects annotations in jquery externs\n[Symptom]:\nThe definitions for the following functions shouldn't have the @nosideeffects annotation, because passing values to them changes properties of DOM elements. They shouldn't be eliminated by the compiler.\r\n\r\njQueryObject.prototype.height\r\njQueryObject.prototype.offset\r\njQueryObject.prototype.width\r\n\r\nThis applies to all jQuery externs incl. jquery-1.5.\n\n[Context/Logs]:\n- Anybody have time for a quick review?\r\n[URL]\n- This issue was closed by r806."}
{"project_id": "Closure", "bug_id": "419", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "420", "source_type": "google", "llm_input_text": "[Title]: Property `control` of HTMLLabelElement not included in bundled externs\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Write code that reads the `control` property of an HTMLLabelElement\r\n2. Compile that code with advanced optimizations\r\n\r\n What is the expected output? What do you see instead? \n\r\nA warning is generated, but none are expected because `control` is a standard property of HTMLLabelElement.\r\n\r\n What version of the product are you using? On what operating system? \n\r\nclosure-compiler.appspot.com on 14 Dec '12.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- As specified by W3C: [URL]\n- Patch.\n- This issue was closed by revision r2406."}
{"project_id": "Closure", "bug_id": "421", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "422", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "423", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "424", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "425", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "426", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "427", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "428", "source_type": "google", "llm_input_text": "[Title]: Math.{min,max} are recognized as a 0 or 1 argument functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try to compile &quot;Math.{min,max}(1,2)&quot;\r\n2. Use @compilation_level ADVANCED_OPTIMIZATIONS\r\n\r\nWhat is the expected output?\r\nNo warnings.\r\n\r\nWhat do you see instead?\r\nWarning:\r\nJSC_WRONG_ARGUMENT_COUNT: Function Object.min: called with 2 argument(s). \r\nFunction requires at least 0 argument(s) and no more than 1 argument(s). \r\nat line 1 character 8\r\nMath.min(1,2);\r\n        ^\r\n\r\n What version of the product are you using? On what operating system? \nBrowser: Opera/9.80 (Macintosh; Intel Mac OS X; U; en) Presto/2.2.15 \r\nVersion/10.10\r\nApp: [URL]\n\n[Context/Logs]:\n- My test case was:\r\n\r\nalert(Math.max(1,2));\n- i think i know the problem. Note that it works in the standalone jar, but not in the \r\nweb service.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Agreed, I experienced this as well from the closure tool hosted at\r\n[URL]  I was just about to log this bug when I\r\nfound this defect.  My code was:\r\nalert( Math.min( 1, 2 ) );\n- SVN and webservice have now both been update.\r\n\r\nPlease verify."}
{"project_id": "Closure", "bug_id": "429", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "430", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "431", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "432", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "433", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "434", "source_type": "google", "llm_input_text": "[Title]: do ramifying\n[Symptom]:\nWhat steps will reproduce the problem? \n1. [URL]\r\n2. enter sample:\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\nvar test = document.documentElement.uniqueID ? function(a) {\r\n\tvar b = {\r\n\t\t'X' : 1,\r\n\t\t'Y' : 2,\r\n\t\taaaa : 3,\r\n\t\tbbbb : 4\r\n\t};\r\n\tb.cccc = 5;\r\n\ta(b)\r\n} : function(a) {\r\n\ta({\r\n\t\t\t\t'X' : -1,\r\n\t\t\t\t'Y' : -2,\r\n\t\t\t\taaaa : -3,\r\n\t\t\t\tbbbb : -4,\r\n\t\t\t\tcccc : -5\r\n\t\t\t})\r\n};\r\ntest(function(a) {\r\n\t\t\talert(&quot;o.X:&quot; + a.X + &quot;\\no.Y:&quot; + a.Y + &quot;\\no.aaaa:&quot; + a.aaaa\r\n\t\t\t\t\t+ &quot;\\no.bbbb:&quot; + a.bbbb + &quot;\\no.cccc:&quot; + a.cccc)\r\n\t\t});\r\n3. recive:\r\n(document.documentElement.uniqueID ? function(a) {\r\n\tvar b = {\r\n\t\tX : 1,\r\n\t\tY : 2,\r\n\t\ta : 3,\r\n\t\tb : 4\r\n\t};\r\n\tb.c = 5;\r\n\ta(b)\r\n} : function(a) {\r\n\ta({\r\n\t\t\t\td : -1,\r\n\t\t\t\te : -2,\r\n\t\t\t\ta : -3,\r\n\t\t\t\tb : -4,\r\n\t\t\t\tc : -5\r\n\t\t\t})\r\n})(function(a) {\r\n\t\t\talert(&quot;o.X:&quot; + a.d + &quot;\\no.Y:&quot; + a.e + &quot;\\no.aaaa:&quot; + a.a\r\n\t\t\t\t\t+ &quot;\\no.bbbb:&quot; + a.b + &quot;\\no.cccc:&quot; + a.c)\r\n\t\t});\r\n\r\n What is the expected output? What do you see instead? \n\r\nalert(&quot;o.X:&quot; + a.d ...\r\nmust be: alert(&quot;o.X:&quot; + a.X ...\r\n\r\nP.S. sorry i bad in englidh.\r\nbad solution add parametrs:\r\n// @js_externs this.X,this.Y\n\n[Context/Logs]:\n- function offset(node){\r\n    var doc = node.ownerDocument,\r\n    rootNode = doc.documentElement,\r\n    box = node.getBoundingClientRect(),\r\n    result={'Left':box.left,'Top':box.top},\r\n    k, t;\r\n    for (k in result){\r\n      t='scroll'+k;\r\n      result[k] = parseInt(\r\n        result[k] + Math.max( rootNode[t], doc.body[t] ) - rootNode['client'+k],\r\n        10\r\n      )\r\n    }\r\n    return {\r\n      'top': result.Top,\r\n      'left': result.Left\r\n    }\r\n  }\r\nalert(offset(dociment.body).left);\r\n\r\nresult:\r\nfunction f(a) { var d = a.ownerDocument, e = d.documentElement; a =\r\na.getBoundingClientRect(); a = {Left:a.left, Top:a.top}; var b, c; for(b in a) { c =\r\n\"scroll\" + b; a[b] = parseInt(a[b] + Math.max(e[c], d.body[c]) - e[\"client\" + b], 10) }\r\nreturn{top:a.b /* <- wrong, must be a.Top */ , left:a.a /* <- wrong, must be a.Left*/}\r\n} alert(f(dociment.body).left);\n- This behavior is expected with ADVANCED mode. please read:\r\n[URL]"}
{"project_id": "Closure", "bug_id": "435", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "436", "source_type": "google", "llm_input_text": "[Title]: Lack of cyrillic charset windows-1251 Google Closure Compiler REST API support for input & output.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Create *.js file with charset windows-1251 and cyrillic symbols in it (ex. &quot;\u0414\u0430 \u0437\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0435\u0442 \u044d\u0442\u043e\u0442 \u043f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u043c\u0438\u0440!&quot;);\r\n2. Add it as a source url to google compiler ( REST API ) with request parameter &quot;..&amp;charset=windows-1251&amp;..&quot;;\r\n3. Try to compile.\r\n\r\n What is the expected output? What do you see instead? \nJS part'll be compiled with success, except cyrillic symbols, which will be outputs as &quot;\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd\\ufffd \\ufffd\\ufffd\\ufffd!&quot;\r\n\r\n What version of the product are you using? On what operating system? \nThe latest version of REST API, using Google Chrome on Windows.\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- How are you encoding your POST?\n- Javascript file has windows-1251 encoding. POST request has charset=windows-1251 as a get parameter also. But cyrillic symbols encodes like unknown.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've just set request header to:\r\nContent-Type: application/x-www-form-urlencoded; charset=windows-1251\r\n\r\nSpecify charset parameter in request string next way:\r\n\"?compilation_level=SIMPLE_OPTIMIZATIONS&output_format=json&output_info=compiled_code&output_info=warnings&output_info=errors&charset=Windows-1251&code_url=path_to_file\"\r\n\r\nParameters string values encoded with encodeURIComponenets and names with encodeURI.\r\n\r\nBut the output format still UTF-8.\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "437", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "438", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "439", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "440", "source_type": "google", "llm_input_text": "[Title]: Optimization on if parameter with boolean assignment\n[Symptom]:\nThe code:\r\n\r\nfunction hello(name) {\r\n  var i = true;\r\n  if ( i = false ){\r\n     alert('Hello');\r\n  }\r\n}\r\n\r\nsince the if statement will always be false it could be optimized\n\n[Context/Logs]:\n- Thanks for the report, but I've been unable to reproduce the problem. I'm closing \r\nthis for now, if you have another example, where it fails we can reopen it.\r\n\r\nThe webservice produces:\r\n\r\n\"function hello(a){a=true};\" even in simple mode.\r\n\r\nHere is the script that I used:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nfunction hello(name) {\r\n  var i = true;\r\n  if ( i = false ){\r\n     alert('Hello');\r\n  }\r\n}\n- I try it again, and found that the statement \"function hello(a){a=true};\" cannot be\r\nvalid. Where does it comes the \"a = true\" ? In the unoptimized code, the parameter\r\n\"name\" is never read anywhere, and in the statement, the parameter \"a\" is used in \"a\r\n= true\".\n- Another think that I found is that, if I use the same code:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// @output_file_name default.js\r\n// ==/ClosureCompiler==\r\n\r\nfunction hello(name) {\r\n  var i = true;\r\n  if ( i = false ){\r\n     alert('Hello');\r\n  }\r\n}\r\n\r\n// calling the function\r\nhello(\"tetris\");\r\n\r\nin this case the function is empty and does nothing, can it be removed ?\n- Not is simple mode.  You need to use advanced optimization if you are willing to have \r\nthe compiler change the global namespace."}
{"project_id": "Closure", "bug_id": "441", "source_type": "google", "llm_input_text": "[Title]: --jscomp_off=externsValidation turns off externsValidation not completely\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\njava -jar compiler-r1592.jar \\\r\n  --compilation_level ADVANCED_OPTIMIZATIONS \\\r\n  --warning_level VERBOSE \\\r\n  --js sample.js \\\r\n  --js_output_file sample.min.js \\\r\n  --externs ymaps.js \\\r\n  --jscomp_off externsValidation\r\n\r\n(ymaps.js and sample.js are attached)\r\n\r\n\r\nWhat is the expected output?\r\n\r\nNo validation of extern ymaps.js, just parsing of its classes.\r\n\r\n\r\nWhat do you see instead?\r\n\r\n6 error(s), 0 warning(s)\r\nERROR - variable _$ is undeclared\r\nand so on.\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nClosure Compiler r1592. Mac OS X 10.7.2\r\n\r\n\r\nComment.\r\n--warning_level VERBOSE obviously makes --jscomp_error=checkVars (http://code.google.com/p/closure-compiler/wiki/Warnings) and it influences on extern validation.\r\n\r\nexternsValidation have to have highest precedence and no other directives can affect this.\r\n\r\nThis is a real problem for huge externs (like my ymaps.js - Yandex Maps russian service) that don't have any public extern files.\n\n[Context/Logs]:\n- externsValidation is just for warnings--\"code smells\" that probably indicate you're doing something wrong, but that are perfectly syntactically valid.\r\n\r\nTurning off externsValidation *doesn't* mean you can just throw any random JS file in the externs and Closure Compiler will be able to magically figure out what you're trying to do. In particular, JS implementation code will almost never work as an externs file.\r\n\r\nI think it would be more productive if you sent an email to the mailing list\r\n[URL]\r\nand explained what you're trying to do. I think you've got some core misunderstandings that would be easier to hash out on the mailing list."}
{"project_id": "Closure", "bug_id": "442", "source_type": "google", "llm_input_text": "[Title]: Function expressions are transformed into function declarations\n[Symptom]:\nFunction expressions are currently transformed into function declarations.\r\nSince func. expression and func. declarations are evaluated at different\r\ntimes during program execution, this, of course, results in a different\r\nbehavior before and after munging:\r\n\r\n  alert(typeof f);\r\n  var f = function(){};\r\n\r\nbecomes:\r\n\r\n  alert(typeof f);function f(){}\n"}
{"project_id": "Closure", "bug_id": "443", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "444", "source_type": "google", "llm_input_text": "[Title]: Access to `arguments` members is replaced with access to actual arguments.\n[Symptom]:\nAn example of changed behavior before and after munging:\r\n\r\n  (function() {\r\n    alert(arguments[0] + '; ' + arguments['callee'].length);\r\n  })();\r\n\r\nmunges to:\r\n\r\n  (function(a){alert(a+&quot;; &quot;+arguments.callee.length)})();\n\n[Context/Logs]:\n- Seems like that's currently done:\r\n\r\n// ==ClosureCompiler==\r\n// @compilation_level SIMPLE_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction hello() {alert('Hello, ' + arguments[0])}\r\nhello('New user');\r\n\r\nyields:\r\n\r\nfunction hello(a){alert(\"Hello, \"+a)}hello(\"New user\");\n- Yes, it is currently done, which is why there's a problem.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @acleung What exactly is fixed? base object augmentation or evaling? I still see both\r\nissues in rev16.\n- var getBase = function(){ return this; };\r\n  (function(x,y){ alert(arguments[Link: 0]); })(getBase);\r\n\r\nis fixed. It was just pushed with r17.\r\n\r\neval() won't be fixed. In general, that is a not computable problem.\r\n\r\nJohn is working on emitting warnings for with and eval."}
{"project_id": "Closure", "bug_id": "445", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "446", "source_type": "google", "llm_input_text": "[Title]: Cannot make a nullable object typedef non-nullable\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nI'd like to use nullable object @typedefs, so that they match default nullability behavior of the @constructor type names.\r\n\r\nSo, I define a type like this:\r\n\r\n/** @typedef {{foo:number}|null} */\r\nTypes.MyClass;\r\n\r\nBut this way, it can be no longer made non-null (unlike @constructor types). i.e.\r\n\r\n/**\r\n * @param {!Types.MyClass} a\r\n */\r\nfunction dontWantNulls(a) {\r\n}\r\ndontWantNulls(null); // No compiler warnings!\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe /** @type {!Types.MyClass} */ should describe a non-null Object.\r\n\r\n\r\n What version of the product are you using? On what operating system? \nBuild at r2388. Linux OS.\n\n[Context/Logs]:\n- Try this:\r\n\r\n/** @typedef {?{foo:number}} */\r\nTypes.MyClass;\n- It is the same thing. And I do expect this to be the same.\n- This is interesting.  It works for variable declarations:\r\n\r\n/** @const */\r\nvar Types = {};\r\n/** @typedef {{foo:number}|null} */\r\nTypes.MyClass;\r\n\r\n/** @type {!Types.MyClass} */\r\nvar x = null;   // warning\r\n\r\n/** @type {Types.MyClass} */\r\nvar y = null;   // no warning\r\n\r\n/**\r\n * @param {!Types.MyClass} a\r\n */\r\nfunction dontWantNulls(a) {}\r\ndontWantNulls(null); // no warning\n- Issue tracking has been migrated to github. Please make any further comments on this issue through [URL]"}
{"project_id": "Closure", "bug_id": "447", "source_type": "google", "llm_input_text": "[Title]: Exception in FoldConstants while inspect if statements.\n[Symptom]:\nHere is the test case:\r\n\r\nfunction foo() {\r\n      if(sections.length != 1)children[i] = 0;\r\n      else var selectedid = children[i]\r\n} \r\n\r\nHere is the stack trace:\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nGETELEM 2 is not a string node\r\n  Node: Input_0:2:6\r\n      if(sections.length != 1)children[i] = 0;\r\n  Parent: Input_0:1:15\r\nfunction foo() {\r\n\r\n\tat com.google.javascript.rhino.Node.getString(Node.java:847)\r\n\tat com.google.javascript.jscomp.FoldConstants.tryMinimizeIf(FoldConstants.java:813)\r\n\tat com.google.javascript.jscomp.FoldConstants.visit(FoldConstants.java:275)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:463)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseFunction(NodeTraversal.java:490)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:448)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverseBranch(NodeTraversal.java:456)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:245)\r\n\tat com.google.javascript.jscomp.NodeTraversal.traverse(NodeTraversal.java:412)\r\n\tat com.google.javascript.jscomp.FoldConstants.process(FoldConstants.java:87)\n\n[Context/Logs]:\n- Fixed pending integration"}
{"project_id": "Closure", "bug_id": "448", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "449", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "450", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "451", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "452", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "453", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "454", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "455", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "456", "source_type": "google", "llm_input_text": "[Title]: Base Test inherits failure\n[Symptom]:\nWhat steps will reproduce the problem? \n1. run the test suite\r\n2. both inherits tests fail\r\n\r\n What is the expected output? What do you see instead? \nBoth should pass\r\n\r\n\r\n What version of the product are you using? On what operating system? \nsvn r3 on withdows running in Google Chrome.\n\n[Context/Logs]:\n- Bah wong issues page =P\n- Bah wrong issues page =P\n- Was filed against the wrong project"}
{"project_id": "Closure", "bug_id": "457", "source_type": "google", "llm_input_text": "[Title]: Math.{min,max} are recognized as a 0 or 1 argument functions\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Try to compile &quot;Math.{min,max}(1,2)&quot;\r\n2. Use @compilation_level ADVANCED_OPTIMIZATIONS\r\n\r\nWhat is the expected output?\r\nNo warnings.\r\n\r\nWhat do you see instead?\r\nWarning:\r\nJSC_WRONG_ARGUMENT_COUNT: Function Object.min: called with 2 argument(s). \r\nFunction requires at least 0 argument(s) and no more than 1 argument(s). \r\nat line 1 character 8\r\nMath.min(1,2);\r\n        ^\r\n\r\n What version of the product are you using? On what operating system? \nBrowser: Opera/9.80 (Macintosh; Intel Mac OS X; U; en) Presto/2.2.15 \r\nVersion/10.10\r\nApp: [URL]\n\n[Context/Logs]:\n- My test case was:\r\n\r\nalert(Math.max(1,2));\n- i think i know the problem. Note that it works in the standalone jar, but not in the \r\nweb service.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Agreed, I experienced this as well from the closure tool hosted at\r\n[URL]  I was just about to log this bug when I\r\nfound this defect.  My code was:\r\nalert( Math.min( 1, 2 ) );\n- SVN and webservice have now both been update.\r\n\r\nPlease verify."}
{"project_id": "Closure", "bug_id": "458", "source_type": "google", "llm_input_text": "[Title]: @implements {Something} fails to produce warnings when interface is not implemented fully\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Save attached hello.js \r\n1. java -jar compiler.jar --summary_detail_level 3 --js hello.js --\r\njs_output_file hello-compiled.js\r\n2. Observe 0 warnings\r\n\r\n What is the expected output? What do you see instead? \n\r\nI expected a warning, because the documentation says &quot;The compiler produces \r\na warning if you tag a constructor with @implements and then fail to \r\nimplement all of the methods and properties defined by the interface.&quot;\r\n\r\n\r\nI could be doing it wrong, or this might be a documentation bug. I don't \r\nknow what's going on.\n\n[Context/Logs]:\n- Yes, we forgot to add a flag for it. The intended flag is --warning_level=VERBOSE. \r\nWe'll try to check this in this afternoon.\n- should be fixed in the 11/06 build"}
{"project_id": "Closure", "bug_id": "459", "source_type": "google", "llm_input_text": "[Title]: ADVANCED_OPTIMIZATIONS: object property incorrectly renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1.) Create a file &quot;test.js&quot; with the following contents:\r\n\r\nwindow.a = {\r\n    'beer': function() {\r\n        print(&quot;beer was called&quot;);\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\n2.) Now run the closure compiler with &quot;ADVANCED_OPTIMIZATIONS&quot;\r\nas the compilation level. For example:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js=test.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe expected output should be:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.beer();\r\n\r\nInstead the output is:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.b();\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the version in subversion. I'm running my test on Ubuntu Linux.\n\n[Context/Logs]:\n- The compiler keeps the quoted names and renames everything else. If you remove the \r\nquotes around beer, the compiler won't break your code.\r\n\r\nwindow.a = {\r\n    beer: function() {\r\n        print(\"beer was called\");\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\nFor further details see the tutorial at [URL]\n- alternately, you can use quotes in both places:\r\n\r\na[Link: 'beer'];\n- This is working as intended.\n- Issue 52 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "460", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "461", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "462", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "463", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "464", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "465", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "466", "source_type": "google", "llm_input_text": "[Title]: Semicolon insertion should be avoided\n[Symptom]:\nWhat steps will reproduce the problem? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n1. Compile the following code:\r\n\r\n// ============= START OF EXAMPLE ===========\r\n// ==ClosureCompiler==\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// ==/ClosureCompiler==\r\nfunction buggyReturn() {\r\n  return \r\n  {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\nalert(buggyReturn().b);\r\n// ============= END OF EXAMPLE ===========\r\n\r\nThis code causes the following compilation errors:\r\n\r\n// ============= START OF ERRORS ==========\r\nNumber of errors: 2\r\nJSC_PARSE_ERROR: Parse error. missing ; before statement at line 5 character 7\r\nb:&quot;34234&quot;\r\n^\r\nJSC_PARSE_ERROR: Parse error. missing } after function body at line 8\r\ncharacter 23\r\n// ============= END OF ERRORS ==========\r\n\r\n\r\n What is the expected output? What do you see instead? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nIn my oppinion the compiler should not do automatic semicolon insertion and\r\ncause an error instead!\r\n\r\nfunction noMorebuggyReturn() {\r\n  return {\r\n    a:&quot;&quot;,\r\n    b:&quot;34234&quot;\r\n  };\r\n}\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\uc9f8\r\n\r\nI am using the current version of the online compiler:\r\n[URL]\n\n[Context/Logs]:\n- maybe you delete this issue ;)\n- Try typing that code into a browser. This is exactly how the browser would interpret \r\nyou code. So the compiler error is correct."}
{"project_id": "Closure", "bug_id": "467", "source_type": "google", "llm_input_text": "[Title]: ADVANCED_OPTIMIZATIONS: object property incorrectly renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1.) Create a file &quot;test.js&quot; with the following contents:\r\n\r\nwindow.a = {\r\n    'beer': function() {\r\n        print(&quot;beer was called&quot;);\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\n2.) Now run the closure compiler with &quot;ADVANCED_OPTIMIZATIONS&quot;\r\nas the compilation level. For example:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js=test.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe expected output should be:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.beer();\r\n\r\nInstead the output is:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.b();\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the version in subversion. I'm running my test on Ubuntu Linux.\n\n[Context/Logs]:\n- The compiler keeps the quoted names and renames everything else. If you remove the \r\nquotes around beer, the compiler won't break your code.\r\n\r\nwindow.a = {\r\n    beer: function() {\r\n        print(\"beer was called\");\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\nFor further details see the tutorial at [URL]\n- alternately, you can use quotes in both places:\r\n\r\na[Link: 'beer'];\n- This is working as intended.\n- Issue 52 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "468", "source_type": "google", "llm_input_text": "[Title]: MinimizeExitPoints does not properly hoist function definitions.\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Start with this code snippet:\r\nfunction a(b) {\r\n  if (b) {\r\n    c()\r\n    return undefined\r\n  }\r\n  function c(){}\r\n}\r\na(1)\r\n\r\n2. Observe that it runs without error in Firefox 3.5.5\r\n3. Compile the snippet with either simple or advanced optimizations\r\n4. Observe that you get the following output:\r\nfunction a(b){if(b)c();else{function c(){}}}a(1);\r\n\r\n5. Run the output code in Firefox 3.5.5\r\n\r\n What is the expected output? What do you see instead? \n\r\nExpected output: code without errors will compile into code that does not \r\nraise errors\r\n\r\nInstead I get the error: &quot;c is not defined&quot;\r\n\r\n What version of the product are you using? On what operating system? \n\r\nTested with version 20091103 in Firefox 3.5.5 on Snow Leopard.  The \r\noutputted code also fails with Rhino 1.7 release 2 2009 03 22.\r\n\r\nChrome (Mac Dev  ) and Safari (4.0.3) execute the outputted \r\ncode without error.\r\n\r\n Please provide any additional information below. \n\r\nThis is a reduced test case extracted from the ajax method of jQuery 1.3.2\n\n[Context/Logs]:\n- This error is also present in 20091106b\n- It should either move the function definition to the top of the function block or leave \r\nit at the bottom, but it should not move it into the else condition.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Verified that this issue (and the jquery code that spawned it) is fixed and working correctly on the command-line in \r\ntoday's updated jar.\n- The webservice has been updated."}
{"project_id": "Closure", "bug_id": "469", "source_type": "google", "llm_input_text": "[Title]: ADVANCED_OPTIMIZATIONS: object property incorrectly renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1.) Create a file &quot;test.js&quot; with the following contents:\r\n\r\nwindow.a = {\r\n    'beer': function() {\r\n        print(&quot;beer was called&quot;);\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\n2.) Now run the closure compiler with &quot;ADVANCED_OPTIMIZATIONS&quot;\r\nas the compilation level. For example:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js=test.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe expected output should be:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.beer();\r\n\r\nInstead the output is:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.b();\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the version in subversion. I'm running my test on Ubuntu Linux.\n\n[Context/Logs]:\n- The compiler keeps the quoted names and renames everything else. If you remove the \r\nquotes around beer, the compiler won't break your code.\r\n\r\nwindow.a = {\r\n    beer: function() {\r\n        print(\"beer was called\");\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\nFor further details see the tutorial at [URL]\n- alternately, you can use quotes in both places:\r\n\r\na[Link: 'beer'];\n- This is working as intended.\n- Issue 52 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "470", "source_type": "google", "llm_input_text": "[Title]: ADVANCED_OPTIMIZATIONS: object property incorrectly renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1.) Create a file &quot;test.js&quot; with the following contents:\r\n\r\nwindow.a = {\r\n    'beer': function() {\r\n        print(&quot;beer was called&quot;);\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\n2.) Now run the closure compiler with &quot;ADVANCED_OPTIMIZATIONS&quot;\r\nas the compilation level. For example:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js=test.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe expected output should be:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.beer();\r\n\r\nInstead the output is:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.b();\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the version in subversion. I'm running my test on Ubuntu Linux.\n\n[Context/Logs]:\n- The compiler keeps the quoted names and renames everything else. If you remove the \r\nquotes around beer, the compiler won't break your code.\r\n\r\nwindow.a = {\r\n    beer: function() {\r\n        print(\"beer was called\");\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\nFor further details see the tutorial at [URL]\n- alternately, you can use quotes in both places:\r\n\r\na[Link: 'beer'];\n- This is working as intended.\n- Issue 52 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "471", "source_type": "google", "llm_input_text": "[Title]: Webserver on Port !== 80 is not supported\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Webserver on Port !== 80\r\n2. Use closure-compiler with js file on this browser\r\n3. see error message\r\n\r\n&gt;What is the expected output? \r\nclosure-compiler should work :-)\r\n\r\n&gt;What do you see instead?\r\nclosure-compiler does not work :-P\r\n\r\n12: URL [URL] is not formed \r\nproperly.\r\nOriginal Post Data: \r\noutput_format=json&amp;output_info=compiled_code&amp;output_info=warnings&amp;output_info=errors&amp;output_info=statistics&amp;compilation_level=SIMPLE_OPTIMIZATIONS&amp;warning_level=default&amp;code_url=http\r\n%3A%2F%correctHostname%3A8015%2FJavaScript%2Fclass.js&amp;js_code=\r\n\r\nServing the same JS from a Webserver on Port 80 works.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL] with Browser Opera 10.01\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The web service is hosted on AppEngine, and to prevent abuse, AppEngine does not allow \r\nconnections to non-standard port:\r\n\r\n[URL]\r\n\r\n\"... The URL must use the standard ports for HTTP (80) and HTTPS (443). The port is implied \r\nby the scheme, but may also be mentioned in the URL as long as the port is standard for the \r\nscheme (https://...:443/). An app cannot connect to an arbitrary port of a remote host, nor \r\ncan it use a non-standard port for a scheme. ...\"\r\n\r\nConsidering downloading and using the compiler locally:\r\n\r\n[URL]"}
{"project_id": "Closure", "bug_id": "472", "source_type": "google", "llm_input_text": "[Title]: Webserver on Port !== 80 is not supported\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Webserver on Port !== 80\r\n2. Use closure-compiler with js file on this browser\r\n3. see error message\r\n\r\n&gt;What is the expected output? \r\nclosure-compiler should work :-)\r\n\r\n&gt;What do you see instead?\r\nclosure-compiler does not work :-P\r\n\r\n12: URL [URL] is not formed \r\nproperly.\r\nOriginal Post Data: \r\noutput_format=json&amp;output_info=compiled_code&amp;output_info=warnings&amp;output_info=errors&amp;output_info=statistics&amp;compilation_level=SIMPLE_OPTIMIZATIONS&amp;warning_level=default&amp;code_url=http\r\n%3A%2F%correctHostname%3A8015%2FJavaScript%2Fclass.js&amp;js_code=\r\n\r\nServing the same JS from a Webserver on Port 80 works.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL] with Browser Opera 10.01\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The web service is hosted on AppEngine, and to prevent abuse, AppEngine does not allow \r\nconnections to non-standard port:\r\n\r\n[URL]\r\n\r\n\"... The URL must use the standard ports for HTTP (80) and HTTPS (443). The port is implied \r\nby the scheme, but may also be mentioned in the URL as long as the port is standard for the \r\nscheme (https://...:443/). An app cannot connect to an arbitrary port of a remote host, nor \r\ncan it use a non-standard port for a scheme. ...\"\r\n\r\nConsidering downloading and using the compiler locally:\r\n\r\n[URL]"}
{"project_id": "Closure", "bug_id": "473", "source_type": "google", "llm_input_text": "[Title]: Webserver on Port !== 80 is not supported\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Webserver on Port !== 80\r\n2. Use closure-compiler with js file on this browser\r\n3. see error message\r\n\r\n&gt;What is the expected output? \r\nclosure-compiler should work :-)\r\n\r\n&gt;What do you see instead?\r\nclosure-compiler does not work :-P\r\n\r\n12: URL [URL] is not formed \r\nproperly.\r\nOriginal Post Data: \r\noutput_format=json&amp;output_info=compiled_code&amp;output_info=warnings&amp;output_info=errors&amp;output_info=statistics&amp;compilation_level=SIMPLE_OPTIMIZATIONS&amp;warning_level=default&amp;code_url=http\r\n%3A%2F%correctHostname%3A8015%2FJavaScript%2Fclass.js&amp;js_code=\r\n\r\nServing the same JS from a Webserver on Port 80 works.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL] with Browser Opera 10.01\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The web service is hosted on AppEngine, and to prevent abuse, AppEngine does not allow \r\nconnections to non-standard port:\r\n\r\n[URL]\r\n\r\n\"... The URL must use the standard ports for HTTP (80) and HTTPS (443). The port is implied \r\nby the scheme, but may also be mentioned in the URL as long as the port is standard for the \r\nscheme (https://...:443/). An app cannot connect to an arbitrary port of a remote host, nor \r\ncan it use a non-standard port for a scheme. ...\"\r\n\r\nConsidering downloading and using the compiler locally:\r\n\r\n[URL]"}
{"project_id": "Closure", "bug_id": "474", "source_type": "google", "llm_input_text": "[Title]: void function () {}(); wrongly identified as having no side effects\n[Symptom]:\nThis code results in the execution of the function and should not be identified as having no side effects.\n\n[Context/Logs]:\n- You mean (function() {})() ?\r\n\r\nWhat sort of side effect does that have?\n- I'm sorry, I had typed the expression into the summary like this for brevity, even if the function has a body it is still stripped, eg:\r\n\r\nvoid function () {\r\n   my_global = true;\r\n}();\n- ... [Middle Discussions Snipped for Brevity] ...\n- This issue was closed by revision r1248.\n- Issue 515 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "475", "source_type": "google", "llm_input_text": "[Title]: Webserver on Port !== 80 is not supported\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Use Webserver on Port !== 80\r\n2. Use closure-compiler with js file on this browser\r\n3. see error message\r\n\r\n&gt;What is the expected output? \r\nclosure-compiler should work :-)\r\n\r\n&gt;What do you see instead?\r\nclosure-compiler does not work :-P\r\n\r\n12: URL [URL] is not formed \r\nproperly.\r\nOriginal Post Data: \r\noutput_format=json&amp;output_info=compiled_code&amp;output_info=warnings&amp;output_info=errors&amp;output_info=statistics&amp;compilation_level=SIMPLE_OPTIMIZATIONS&amp;warning_level=default&amp;code_url=http\r\n%3A%2F%correctHostname%3A8015%2FJavaScript%2Fclass.js&amp;js_code=\r\n\r\nServing the same JS from a Webserver on Port 80 works.\r\n\r\n What version of the product are you using? On what operating system? \n\r\n[URL] with Browser Opera 10.01\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- The web service is hosted on AppEngine, and to prevent abuse, AppEngine does not allow \r\nconnections to non-standard port:\r\n\r\n[URL]\r\n\r\n\"... The URL must use the standard ports for HTTP (80) and HTTPS (443). The port is implied \r\nby the scheme, but may also be mentioned in the URL as long as the port is standard for the \r\nscheme (https://...:443/). An app cannot connect to an arbitrary port of a remote host, nor \r\ncan it use a non-standard port for a scheme. ...\"\r\n\r\nConsidering downloading and using the compiler locally:\r\n\r\n[URL]"}
{"project_id": "Closure", "bug_id": "476", "source_type": "google", "llm_input_text": "[Title]: Closure can break code by moving function invocations that have side affects within an object\n[Symptom]:\nWhat steps will reproduce the problem? \n1. Run the attached code. Notice &quot;awesome&quot; in the output\r\n2. Run closure against the attached code, rerun, notice &quot;failure&quot; in the output\r\n\r\n What is the expected output? What do you see instead? \nExpected awesome, got failure. Closure moves the function call who side affect is to alter the variable containing the message.\r\n\r\n What version of the product are you using? On what operating system? \nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 20120305 (revision 1810)\r\nBuilt on: 2012/03/05 20:55\r\nMac / Lion\r\n\r\n Please provide any additional information below.\n\n[Context/Logs]:\n- This looks like a variable inlining bug:\r\n\r\n// ==ClosureCompiler==\r\n// @output_file_name default.js\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @debug true\r\n// @formatting pretty_print\r\n// ==/ClosureCompiler==\r\n\r\nfunction MyClass() {\r\n  this.lastFormData = \"failure\";\r\n}\r\n\r\nMyClass.prototype.validate = function() {\r\n  console.log(\"validate\");\r\n  this.lastFormData = \"awesome\";\r\n  return Math.random() > 0.5;\r\n}\r\n\r\nMyClass.prototype._setErrors = function(errors) {\r\n  console.log(\"setting errors\");\r\n}\r\n\r\nMyClass.prototype._updateReport = function(){\r\n  var errors = this.validate();\r\n  var data = this.lastFormData;\r\n\r\n  this._setErrors(errors);\r\n\r\n  console.log(data);\r\n\r\n  eval(\"updateReport\");\r\n};\r\n\r\n\r\nvar m = new MyClass();\r\nm._updateReport();\r\n\r\n\r\n\r\nproduces:\r\n\r\n\r\n\r\nfunction $MyClass$$() {\r\n  this.$lastFormData$ = \"failure\"\r\n}\r\nfunction $JSCompiler_StaticMethods_validate$$($JSCompiler_StaticMethods_validate$self$$) {\r\n  eval(\"me\");\r\n  $JSCompiler_StaticMethods_validate$self$$.$lastFormData$ = \"awesome\";\r\n  return 0.5 < Math.random()\r\n}\r\nfunction $JSCompiler_StaticMethods__setErrors$$() {\r\n  console.log(\"setting errors\")\r\n}\r\n(function() {\r\n  var $JSCompiler_StaticMethods__updateReport$self$$ = new $MyClass$$, $data$$21$$ = $JSCompiler_StaticMethods__updateReport$self$$.$lastFormData$;\r\n  $JSCompiler_StaticMethods__setErrors$$($JSCompiler_StaticMethods_validate$$($JSCompiler_StaticMethods__updateReport$self$$));\r\n  console.log($data$$21$$);\r\n  eval(\"updateReport\")\r\n})();\n- ya, this is the bug we were talking to evan about on friday. we should have a fix soon.\n- Fixed with r2021?"}
{"project_id": "Closure", "bug_id": "477", "source_type": "google", "llm_input_text": "[Title]: ADVANCED_OPTIMIZATIONS: object property incorrectly renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1.) Create a file &quot;test.js&quot; with the following contents:\r\n\r\nwindow.a = {\r\n    'beer': function() {\r\n        print(&quot;beer was called&quot;);\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\n2.) Now run the closure compiler with &quot;ADVANCED_OPTIMIZATIONS&quot;\r\nas the compilation level. For example:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js=test.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe expected output should be:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.beer();\r\n\r\nInstead the output is:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.b();\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the version in subversion. I'm running my test on Ubuntu Linux.\n\n[Context/Logs]:\n- The compiler keeps the quoted names and renames everything else. If you remove the \r\nquotes around beer, the compiler won't break your code.\r\n\r\nwindow.a = {\r\n    beer: function() {\r\n        print(\"beer was called\");\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\nFor further details see the tutorial at [URL]\n- alternately, you can use quotes in both places:\r\n\r\na[Link: 'beer'];\n- This is working as intended.\n- Issue 52 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "478", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Closure", "bug_id": "479", "source_type": "google", "llm_input_text": "[Title]: ADVANCED_OPTIMIZATIONS: object property incorrectly renamed\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\n1.) Create a file &quot;test.js&quot; with the following contents:\r\n\r\nwindow.a = {\r\n    'beer': function() {\r\n        print(&quot;beer was called&quot;);\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\n2.) Now run the closure compiler with &quot;ADVANCED_OPTIMIZATIONS&quot;\r\nas the compilation level. For example:\r\n\r\njava -jar compiler.jar --compilation_level=ADVANCED_OPTIMIZATIONS --js=test.js\r\n\r\n\r\n What is the expected output? What do you see instead? \n\r\nThe expected output should be:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.beer();\r\n\r\nInstead the output is:\r\n\r\nwindow.a={beer:function(){print(&quot;beer was called&quot;)}};window.a.b();\r\n\r\n\r\n What version of the product are you using? On what operating system? \n\r\nI'm using the version in subversion. I'm running my test on Ubuntu Linux.\n\n[Context/Logs]:\n- The compiler keeps the quoted names and renames everything else. If you remove the \r\nquotes around beer, the compiler won't break your code.\r\n\r\nwindow.a = {\r\n    beer: function() {\r\n        print(\"beer was called\");\r\n    }\r\n};\r\nwindow.a.beer();\r\n\r\nFor further details see the tutorial at [URL]\n- alternately, you can use quotes in both places:\r\n\r\na[Link: 'beer'];\n- This is working as intended.\n- Issue 52 has been merged into this issue."}
{"project_id": "Closure", "bug_id": "480", "source_type": "google", "llm_input_text": "[Title]: crash on recursive function?\n[Symptom]:\nWhat steps will reproduce the problem? \n\r\nAt [URL] enter the code\r\n---\r\nvar walk_the_DOM = function walk(node, aFunction) {\r\n    walk(node, aFunction);\r\n};\r\nvar getElementsByAttribute = function(anAttribute, value) {\r\n    walk_the_DOM();\r\n};\r\nvar theAttributes = getElementsByAttribute('src');\r\nfor(value in theAttributes) {\r\n    document.writeln(value);\r\n}\r\n\r\nThe compiler will crash with an exception on the walk() call.\r\n\r\n23: java.lang.RuntimeException: INTERNAL COMPILER ERROR.\r\nPlease report this problem.\r\nConflicting externs name: {SyntheticVarsDeclar}\r\n  Node: Input_0:2:4\r\n    walk(node, aFunction);\r\n  Parent: Input_0:2:8\r\n    walk(node, aFunction);\r\n\r\n\r\nThere are two separate problems here:\r\n1) is that the compiler is trying to synthesize a variable during sanity \r\nchecking.\r\n2) is that the compiler is trying to synthesize a variable there at all.\n\n[Context/Logs]:\n- I get this same error when attempting to compile the latest jQuery nightly (see the\r\nattached error dump). The code in question, from the source:\r\n\r\n\t\tdiv.attachEvent(\"onclick\", function click(){\r\n\t\t\t// Cloning a node shouldn't copy over any\r\n\t\t\t// bound event handlers (IE does this)\r\n\t\t\tjQuery.support.noCloneEvent = false;\r\n\t\t\tdiv.detachEvent(\"onclick\", click);\r\n\t\t});\n- Oops, forgot to attach the error dump."}
{"project_id": "Csv", "bug_id": "1", "source_type": "jira", "llm_input_text": "[Title]: CSVParser.iterator().remove() should throw throw new UnsupportedOperationException()\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- If you want, but the iterator is really there for the convenience of using for each loops. What happens when remove() is called doesn't matter much."}
{"project_id": "Csv", "bug_id": "2", "source_type": "jira", "llm_input_text": "[Title]: UnicodeUnescapeReader should not be applied before parsing\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Good point but I'm not sure it actually happens. So far the only application I have found supporting unicode escapes is HSQLDB. It can read them but doesn't write them (I checked HSQL 1.8, I'll look at 2.x). I believe these unicode escapes are typically created by a program like native2ascii which converts only non ascii characters, so I believe the line separators are safe. \n\n I agree on removing the unicode escape setting from CSVFormat. I would prefer submitting the reader to  &#91;io&#93;  than making it public in  &#91;csv&#93;  though.\n- OK, I'm working on removing it and moving the reader class to IO for a future release."}
{"project_id": "Csv", "bug_id": "3", "source_type": "jira", "llm_input_text": "[Title]: ExtendedBufferReader does not handle EOL consistently\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I added a test demonstrating the issue. \n\n I wonder if the line counting should be handled by the lexer instead.\n- Yes, perhaps it should be done by the lexer. But the quickest fix would be to patch the reader. \n\n I wonder whether ExtendedBufferReader is actually necessary; lookAhead() could easily be provided by the Lexer class. \nAnd I'm not sure that readAgain() is really necessary.\n- Enabled new test and added patch to fix it. \nBut we should still consider if ExtendedBufferReader is really necessary."}
{"project_id": "Csv", "bug_id": "4", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.isCommentingDisabled() is confusing/confused\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Renamed method to isCommentingEnabled"}
{"project_id": "Csv", "bug_id": "5", "source_type": "jira", "llm_input_text": "[Title]: CSVLexer.nextToken does not need wsBuf\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Removal of the buffer improves performance by about 25%"}
{"project_id": "Csv", "bug_id": "6", "source_type": "jira", "llm_input_text": "[Title]: RFC 4180 (DEFAULT) format is wrong; should not ignore spaces or blank lines\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Section 2.4 relates to a field value, but a blank line doesn't contain any field. I agree this is open to interpretation. \n\n Ignoring blank lines is probably the best default behavior. I often see csv files with leading blank lines (because they were generated by a JSP for example) or trailing blank lines. Getting an empty record in these cases is never desirable. \n\n Regarding the trimming of values, I agree this should not be part of the default format.\n- I agree that ignoring blank lines is probably better than returning empty records. \n\n However RFC 4180 does not allow blank lines. \nSo it is wrong to equate DEFAULT with RFC 4180.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think we should keep the strict RFC4180 definition.\n- What's the point of adding a useless constant? It bloats the API for no purpose."}
{"project_id": "Csv", "bug_id": "7", "source_type": "jira", "llm_input_text": "[Title]: Confusing semantic of the ignore leading/trailing spaces parameters\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I suggest replacing  leading/trailingSpacesIgnored  with two parameters: \n \n\t  interleavedSpacesIgnored : this will ignore the spaces between the delimiter and the opening quote, and between the closing quote and the next delimiter. \n\t  trimmedSpaces : this will remove the spaces around the values, on the left and on the right. I don't see the need to trim only on one side and not the other.\n- I'm not sure I would expect any space removal to ever occur within quoted values. \nSurely that's one of the reasons why values are quoted - to prevent removal of spaces.\n- The reason for enclosing the values into quotes is to put a delimiter or a line separator in the value. Spaces are always part of the value, quoted or not. At least that's how it's specified in RFC 4180.\n- Definitely better to drop the separate leading/trailing space options. \n\n However, I think \"interleavedSpacesIgnored\" should apply for both quoted and unquoted values. \nAs far as I can tell, that is the expectation in the CSV format specs I've seen. \n\n The \"trimmedSpaces\" setting would then be identical to \"interleavedSpacesIgnored\" for unquoted values. \nFor quoted values it would also trim the enclosed value; not sure that's particularly useful to provide as part of CSV. \nIt's easy enough for the application to trim the fields, so I'm not sure the setting is necessary. \nSeems like it is straying away from the basic purpose of CSV. \n\n However, if/when CSV is updated support creating Java Beans, value trimming would be much more appropriate there, as it would be on a per-column basis. \n\n Let's keep the initial parsing simple."}
{"project_id": "Csv", "bug_id": "8", "source_type": "jira", "llm_input_text": "[Title]: ExtendedBufferReader does not handle EOL consistently\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I added a test demonstrating the issue. \n\n I wonder if the line counting should be handled by the lexer instead.\n- Yes, perhaps it should be done by the lexer. But the quickest fix would be to patch the reader. \n\n I wonder whether ExtendedBufferReader is actually necessary; lookAhead() could easily be provided by the Lexer class. \nAnd I'm not sure that readAgain() is really necessary.\n- Enabled new test and added patch to fix it. \nBut we should still consider if ExtendedBufferReader is really necessary."}
{"project_id": "Csv", "bug_id": "9", "source_type": "jira", "llm_input_text": "[Title]: CSVParser.getRecords() returns null rather than empty List at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "10", "source_type": "jira", "llm_input_text": "[Title]: ExtendedBufferReader does not handle EOL consistently\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I added a test demonstrating the issue. \n\n I wonder if the line counting should be handled by the lexer instead.\n- Yes, perhaps it should be done by the lexer. But the quickest fix would be to patch the reader. \n\n I wonder whether ExtendedBufferReader is actually necessary; lookAhead() could easily be provided by the Lexer class. \nAnd I'm not sure that readAgain() is really necessary.\n- Enabled new test and added patch to fix it. \nBut we should still consider if ExtendedBufferReader is really necessary."}
{"project_id": "Csv", "bug_id": "11", "source_type": "jira", "llm_input_text": "[Title]: ExtendedBufferReader does not handle EOL consistently\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I added a test demonstrating the issue. \n\n I wonder if the line counting should be handled by the lexer instead.\n- Yes, perhaps it should be done by the lexer. But the quickest fix would be to patch the reader. \n\n I wonder whether ExtendedBufferReader is actually necessary; lookAhead() could easily be provided by the Lexer class. \nAnd I'm not sure that readAgain() is really necessary.\n- Enabled new test and added patch to fix it. \nBut we should still consider if ExtendedBufferReader is really necessary."}
{"project_id": "Csv", "bug_id": "12", "source_type": "jira", "llm_input_text": "[Title]: Escaped line separators are not supported\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- What should happen in the case of &lt;escape&gt;CRLF? \nI presume only the CR should be subject to the escape. \nIf an application wants to include CRLF in a field, then the application should generate &lt;escape&gt;CR&lt;escape&gt;LF.\n- The Lexer does currently (r1036896) handle &lt;esc&gt;LF and &lt;esc&gt;CR. \n\n The code currently treats &lt;esc&gt;CRLF as &lt;esc&gt;CR followed by LF. The LF is handled as EOL.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've asked the ML to to comment on this fix.\n- As discussed on the ML, I'm moving this to 1.x, so we can release 1.0.  &#91;1&#93;  \n\n I've implemented logic that makes sure only record separators, we can handle are used. \n\n  &#91;1&#93;   [URL]"}
{"project_id": "Csv", "bug_id": "13", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat isEscaping/isEncapsulating are not public\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Likewise there could be a public version of getHeader(). \nIt would need to clone the array."}
{"project_id": "Csv", "bug_id": "14", "source_type": "jira", "llm_input_text": "[Title]: Not possible to create a CSVFormat from scratch\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- +0 for a no arg constructor equivalent to the default format. \n\n -1 for more constructors or making PRISTINE public. More constructors defeats the purpose of the fluent API, and PRISTINE is useless as a base format because all properties have to be defined.\n- +0 for a no arg constructor equivalent to the default format.  \n\n If you mean the DEFAULT format here then that achieves nothing, as the user would have to override any unwanted settings - and the use would have to know which ones to override. If the DEFAULT format were ever later updated, that could invalidate the user's format. \n\n I meant that the ctor should be equivalent to PRISTINE or perhaps PRISTINE + CRLF. \n\n To fit in with the fluent API, there needs to be a static method.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Good points, must ponder some more... with adding back the DISABLED nastiness.\n- I think it's now sorted: \n\n Added ctor with single char delimiter parameter; that solves the original issue, and also allows PRISTINE to be private. \n\n Restored DISABLED char, but as a private constant only used in the PRISTINE constant. \n\n The DISABLED char is now not needed externally."}
{"project_id": "Csv", "bug_id": "15", "source_type": "jira", "llm_input_text": "[Title]: Unescape handling needs rethinking\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you sure? The unicode escape sequences are transformed before reaching the parser.\n- If unicode parsing is not selected, the unicode sequences lose their escape character so cannot then be parsed later. \n\n This is really about more than just unicode escape sequences, though that is what alerted me to the issue. \n\n The whole business of escape handling needs to be very carefully documented (and tested!) to ensure predictable behaviour.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Those tests only check the unescaping, i.e. the parsing. \n\n What happens when the same format is used to create a new record? \n\n The format should be symmetric, i.e. it should be able to do round-trip conversion.\n- I now think that only meta-characters (and the record-separator) should be unescaped, because only meta-characters need to be unescaped on output. All other escapes should be left as-is, and should be handled separately (probably by the application). \n\n However, this may cause some issues with multi-char record separators - needs further investigation. \nMore complications may occur if the RS can be specified as a list of strings. \nIt may be necessary to restrict the RS to a single string."}
{"project_id": "Csv", "bug_id": "16", "source_type": "jira", "llm_input_text": "[Title]: Unescape handling needs rethinking\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you sure? The unicode escape sequences are transformed before reaching the parser.\n- If unicode parsing is not selected, the unicode sequences lose their escape character so cannot then be parsed later. \n\n This is really about more than just unicode escape sequences, though that is what alerted me to the issue. \n\n The whole business of escape handling needs to be very carefully documented (and tested!) to ensure predictable behaviour.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Those tests only check the unescaping, i.e. the parsing. \n\n What happens when the same format is used to create a new record? \n\n The format should be symmetric, i.e. it should be able to do round-trip conversion.\n- I now think that only meta-characters (and the record-separator) should be unescaped, because only meta-characters need to be unescaped on output. All other escapes should be left as-is, and should be handled separately (probably by the application). \n\n However, this may cause some issues with multi-char record separators - needs further investigation. \nMore complications may occur if the RS can be specified as a list of strings. \nIt may be necessary to restrict the RS to a single string."}
{"project_id": "Csv", "bug_id": "17", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord does not verify that the length of the header mapping matches the number of values\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I'm not sure if CSVRecord's ctor is the right place for checking if the header mapping length is correct. This may lead to a lot of over head because everytime a CSVRecord is created we would have to do something like: \n\n  \n  if (mappings !=  null  &amp;&amp; mapping.size() != values.length) {\n    throw  Exception\n}\n \n  \n\n For very big files, this may be an issue. Would be better to just test this when the first record is created by the parser.\n- So is this a matter of which exception to throw?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Right, each record is independent.\n- Has been fixed by wrapping the ArrayOutOfBoundsException into an IllegalArgumentException."}
{"project_id": "Csv", "bug_id": "18", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord does not verify that the length of the header mapping matches the number of values\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I'm not sure if CSVRecord's ctor is the right place for checking if the header mapping length is correct. This may lead to a lot of over head because everytime a CSVRecord is created we would have to do something like: \n\n  \n  if (mappings !=  null  &amp;&amp; mapping.size() != values.length) {\n    throw  Exception\n}\n \n  \n\n For very big files, this may be an issue. Would be better to just test this when the first record is created by the parser.\n- So is this a matter of which exception to throw?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Right, each record is independent.\n- Has been fixed by wrapping the ArrayOutOfBoundsException into an IllegalArgumentException."}
{"project_id": "Csv", "bug_id": "19", "source_type": "jira", "llm_input_text": "[Title]: Allow the String value for null to be customized for the CSV printer\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- commit -m \"[CSV-97] Allow the String value for null to be customized for the CSV printer.\" C:/svn/org/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java C:/svn/org/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/svn/org/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVPrinterTest.java C:/svn/org/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVFormatBuilderTest.java C:/svn/org/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVFormatBuilderTest.java\n    Sending        C:/svn/org/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVPrinterTest.java\n    Transmitting file data ...\n    Committed revision 1465768."}
{"project_id": "Csv", "bug_id": "20", "source_type": "jira", "llm_input_text": "[Title]: Unescape handling needs rethinking\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you sure? The unicode escape sequences are transformed before reaching the parser.\n- If unicode parsing is not selected, the unicode sequences lose their escape character so cannot then be parsed later. \n\n This is really about more than just unicode escape sequences, though that is what alerted me to the issue. \n\n The whole business of escape handling needs to be very carefully documented (and tested!) to ensure predictable behaviour.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Those tests only check the unescaping, i.e. the parsing. \n\n What happens when the same format is used to create a new record? \n\n The format should be symmetric, i.e. it should be able to do round-trip conversion.\n- I now think that only meta-characters (and the record-separator) should be unescaped, because only meta-characters need to be unescaped on output. All other escapes should be left as-is, and should be handled separately (probably by the application). \n\n However, this may cause some issues with multi-char record separators - needs further investigation. \nMore complications may occur if the RS can be specified as a list of strings. \nIt may be necessary to restrict the RS to a single string."}
{"project_id": "Csv", "bug_id": "21", "source_type": "jira", "llm_input_text": "[Title]: Unescape handling needs rethinking\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you sure? The unicode escape sequences are transformed before reaching the parser.\n- If unicode parsing is not selected, the unicode sequences lose their escape character so cannot then be parsed later. \n\n This is really about more than just unicode escape sequences, though that is what alerted me to the issue. \n\n The whole business of escape handling needs to be very carefully documented (and tested!) to ensure predictable behaviour.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Those tests only check the unescaping, i.e. the parsing. \n\n What happens when the same format is used to create a new record? \n\n The format should be symmetric, i.e. it should be able to do round-trip conversion.\n- I now think that only meta-characters (and the record-separator) should be unescaped, because only meta-characters need to be unescaped on output. All other escapes should be left as-is, and should be handled separately (probably by the application). \n\n However, this may cause some issues with multi-char record separators - needs further investigation. \nMore complications may occur if the RS can be specified as a list of strings. \nIt may be necessary to restrict the RS to a single string."}
{"project_id": "Csv", "bug_id": "22", "source_type": "jira", "llm_input_text": "[Title]: Line number counting is confusing\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Resolved by adjusting the EOL count if reader is currently processing a line and has yet to reach EOL. \n\n Renamed the methods and adjusted the single test case that relied on the odd numbering scheme. \n\n URL:  [URL]\nLog: \n  CSV-98    Line number counting is confusing \n\n Modified: \n    commons/proper/csv/trunk/src/main/java/org/apache/commons/csv/CSVLexer.java \n    commons/proper/csv/trunk/src/main/java/org/apache/commons/csv/CSVParser.java \n    commons/proper/csv/trunk/src/main/java/org/apache/commons/csv/ExtendedBufferedReader.java \n    commons/proper/csv/trunk/src/main/java/org/apache/commons/csv/Lexer.java \n    commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/CSVLexer1.java \n    commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/CSVLexer1306663.java \n    commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/CSVLexer1306667.java \n    commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/CSVLexer3.java \n    commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/CSVParserTest.java \n    commons/proper/csv/trunk/src/test/java/org/apache/commons/csv/ExtendedBufferedReaderTest.java"}
{"project_id": "Csv", "bug_id": "23", "source_type": "jira", "llm_input_text": "[Title]: CSVParser: getHeaderMap throws NPE\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- commit -m \"[CSV-100] CSVParser: getHeaderMap throws NPE.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java\n    Transmitting file data ...\n    Committed revision 1524435."}
{"project_id": "Csv", "bug_id": "24", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.format allways append null\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I can see how your example would do that. I'll address it am done with the flu...\n- Thank you for the report. Keep them coming!   \n\n  \n commit -m \"[CSV-106] CSVFormat.format always append null.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVFormatTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVFormatTest.java\n    Transmitting file data ...\n    Committed revision 1577011."}
{"project_id": "Csv", "bug_id": "25", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.EXCEL.parse should handle byte order marks\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you attach a sample file and tell us how you created it?\n- I used this url to fetch the content: \n [URL]\n\n which produced the vod.csv file.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm OK with no code changes for 1.0 and adding docs, which I just did. See the site xdocs and feel free to move/change.\n- The fix is documented at \n\n  [URL]"}
{"project_id": "Csv", "bug_id": "26", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.EXCEL.parse should handle byte order marks\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you attach a sample file and tell us how you created it?\n- I used this url to fetch the content: \n [URL]\n\n which produced the vod.csv file.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm OK with no code changes for 1.0 and adding docs, which I just did. See the site xdocs and feel free to move/change.\n- The fix is documented at \n\n  [URL]"}
{"project_id": "Csv", "bug_id": "27", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.EXCEL.parse should handle byte order marks\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you attach a sample file and tell us how you created it?\n- I used this url to fetch the content: \n [URL]\n\n which produced the vod.csv file.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm OK with no code changes for 1.0 and adding docs, which I just did. See the site xdocs and feel free to move/change.\n- The fix is documented at \n\n  [URL]"}
{"project_id": "Csv", "bug_id": "28", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord.toMap() fails if row length shorter than header length\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- commit -m \"[CSV-111] CSVRecord.toMap() fails if row length shorter than header length.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVRecord.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVRecordTest.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVRecord.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVRecordTest.java\n    Transmitting file data ...\n    Committed revision 1589281."}
{"project_id": "Csv", "bug_id": "29", "source_type": "jira", "llm_input_text": "[Title]: HeaderMap is inconsistent when it is parsed from an input with duplicate columns names\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The problem is, that we provide a key based access to the values of a  CSVRecord  using the  get(String)  method. How should that method behave if there are duplicate column names? \n\n Throwing an exception seems reasonable here.\n- I guess handling this would imply too many changes in the API.\n- Fixed in revision 1592371. An IllegalStateException is now thrown when an inconsistent header is parsed from the input."}
{"project_id": "Csv", "bug_id": "30", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat constructor should reject a header array with duplicate entries\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- CSVFormat currently checks the header when validate() is called by the Parser/Printer. I agree, that this is too late and should be done when withHeader is called.\n- Fixed in r1593076"}
{"project_id": "Csv", "bug_id": "31", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord.toMap() throws NPE on formats with no headers.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Patch to main code as well as unit test exposing condition.\n- commit -m \"&lt;action issue=\"CSV-118\" type=\"fix\" dev=\"ggregory\" due-to=\"Enrique Lara\"&gt;CSVRecord.toMap() throws NPE on formats with no headers.&lt;/action&gt;\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVRecordTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVRecord.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVRecord.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVRecordTest.java\n    Transmitting file data ...\n    Committed revision 1594966."}
{"project_id": "Csv", "bug_id": "32", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat#withHeader doesn't work with CSVPrinter\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Sounds like a good idea. Done: \n\n  \n commit -m \"&lt;action issue=\"CSV-120\" type=\"add\" dev=\"ggregory\" due-to=\"Sergei Lebedev\"&gt;CSVFormat#withHeader doesn't work with CSVPrinter&lt;/action&gt;\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVPrinterTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVPrinterTest.java\n    Transmitting file data ...\n    Committed revision 1601517."}
{"project_id": "Csv", "bug_id": "33", "source_type": "jira", "llm_input_text": "[Title]: IllegalArgumentException thrown when the header contains duplicate names when the column names are empty.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- When does it make sense to have a mix of named and unnamed columns? IOW, what is your user story?\n- Two comments: \n1) the patch in the pull request includes lots of spurious changes. Even if the change is agreed, the patch cannot be used as it stands \n\n 2) The patch ignores columns with no names; I would have thought a more suitable fix would be to report IAE for an empty column name. In other words, the current behaviour is correct, but the IAE message is a bit confusing and could be changed.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Or simply disable the error when duplicate column names are found. Being able to parse malformed or ambiguous input is a plus.\n- I Added the format setting  ignoreEmptyHeaders , which defaults to false to keep the IAE as the default behavior. \n\n  \n commit -m \"[CSV-121] Exception that the header contains duplicate names when the column names are empty. Added the setting ignoreEmptyHeaders, defaults to false to keep the IAE as the default behavior.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java\n    Transmitting file data ...\n    Committed revision 1602206."}
{"project_id": "Csv", "bug_id": "34", "source_type": "jira", "llm_input_text": "[Title]: IllegalArgumentException thrown when the header contains duplicate names when the column names are empty.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- When does it make sense to have a mix of named and unnamed columns? IOW, what is your user story?\n- Two comments: \n1) the patch in the pull request includes lots of spurious changes. Even if the change is agreed, the patch cannot be used as it stands \n\n 2) The patch ignores columns with no names; I would have thought a more suitable fix would be to report IAE for an empty column name. In other words, the current behaviour is correct, but the IAE message is a bit confusing and could be changed.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Or simply disable the error when duplicate column names are found. Being able to parse malformed or ambiguous input is a plus.\n- I Added the format setting  ignoreEmptyHeaders , which defaults to false to keep the IAE as the default behavior. \n\n  \n commit -m \"[CSV-121] Exception that the header contains duplicate names when the column names are empty. Added the setting ignoreEmptyHeaders, defaults to false to keep the IAE as the default behavior.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java\n    Transmitting file data ...\n    Committed revision 1602206."}
{"project_id": "Csv", "bug_id": "35", "source_type": "jira", "llm_input_text": "[Title]: IllegalArgumentException thrown when the header contains duplicate names when the column names are empty.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- When does it make sense to have a mix of named and unnamed columns? IOW, what is your user story?\n- Two comments: \n1) the patch in the pull request includes lots of spurious changes. Even if the change is agreed, the patch cannot be used as it stands \n\n 2) The patch ignores columns with no names; I would have thought a more suitable fix would be to report IAE for an empty column name. In other words, the current behaviour is correct, but the IAE message is a bit confusing and could be changed.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Or simply disable the error when duplicate column names are found. Being able to parse malformed or ambiguous input is a plus.\n- I Added the format setting  ignoreEmptyHeaders , which defaults to false to keep the IAE as the default behavior. \n\n  \n commit -m \"[CSV-121] Exception that the header contains duplicate names when the column names are empty. Added the setting ignoreEmptyHeaders, defaults to false to keep the IAE as the default behavior.\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVParser.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java\n    Transmitting file data ...\n    Committed revision 1602206."}
{"project_id": "Csv", "bug_id": "36", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.EXCEL.parse should handle byte order marks\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you attach a sample file and tell us how you created it?\n- I used this url to fetch the content: \n [URL]\n\n which produced the vod.csv file.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm OK with no code changes for 1.0 and adding docs, which I just did. See the site xdocs and feel free to move/change.\n- The fix is documented at \n\n  [URL]"}
{"project_id": "Csv", "bug_id": "37", "source_type": "jira", "llm_input_text": "[Title]: NullPointerException when empty header string and and null string of \"\"\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Test and fix\n- bene@localhost:~/workspace/apache/commons/csv$ svn ci -m  \"CSV-122: NullPointerException when empty header string and and  null  string of \\\" \\ \". Thanks to Mike Lewis.\" \nSending        src/changes/changes.xml\nSending        src/main/java/org/apache/commons/csv/CSVParser.java\nSending        src/test/java/org/apache/commons/csv/CSVParserTest.java\nTransmitting file data ...\nCommitted revision 1609768.\n\nThanks!"}
{"project_id": "Csv", "bug_id": "38", "source_type": "jira", "llm_input_text": "[Title]: NullPointerException when empty header string and and null string of \"\"\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Test and fix\n- bene@localhost:~/workspace/apache/commons/csv$ svn ci -m  \"CSV-122: NullPointerException when empty header string and and  null  string of \\\" \\ \". Thanks to Mike Lewis.\" \nSending        src/changes/changes.xml\nSending        src/main/java/org/apache/commons/csv/CSVParser.java\nSending        src/test/java/org/apache/commons/csv/CSVParserTest.java\nTransmitting file data ...\nCommitted revision 1609768.\n\nThanks!"}
{"project_id": "Csv", "bug_id": "39", "source_type": "jira", "llm_input_text": "[Title]: No longer works with Java 6\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi Bruno, in what context do you use commons-csv? Upgrading to Java 7 isn't an option for you?\n- Hi Emmanuel, we are using this in production in more than one app. \nUnfortunately, migrating to java 7 is not planned for the next six months, and that it is why added this bug.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've reverted the language level back to Java 6 in r1611389. \n\n To all who experienced problems: It is generally not a good idea to depend on SNAPSHOTs in production code. You should better download the sources and deploy and deploy that to your company's maven repository.\n- You need to revert the release notes template as well. Maybe something like: \n\n CSV 1.0 can be built and used with Java 6 or newer. The site-build should be executed with at least Java 7 (it is tested with Java 8 as well). \n\n I would also add this somewhere to the site."}
{"project_id": "Csv", "bug_id": "40", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.EXCEL should ignore empty header names\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Ok, so this can be handled with  withAllowMissingColumnNames(true)  so the bug could be that the built-in  EXCEL  format object should have  withAllowMissingColumnNames(true) . \n\n How about that? \n\n I have a commit read and I changed the title of this JIRA to reflect the change to \"CSVFormat.EXCEL should ignore empty header names\"\n- commit -m \"[CSV-128] CSVFormat.EXCEL should ignore empty header names\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVParserTest.java\n    Transmitting file data ...\n    Committed revision 1620902."}
{"project_id": "Csv", "bug_id": "41", "source_type": "jira", "llm_input_text": "[Title]: Incorrect Javadoc referencing org.apache.commons.csv.CSVFormat withQuote()\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you for the report. Keep them coming! \n\n Fixed in svn: \n\n  \n commit -m \"[CSV-132] Incorrect Javadoc referencing org.apache.commons.csv.CSVFormat withQuote()\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Transmitting file data ...\n    Committed revision 1623971."}
{"project_id": "Csv", "bug_id": "42", "source_type": "jira", "llm_input_text": "[Title]: QuoteMode.NON_NUMERIC doesn't work with CSVPrinter.printRecords(ResultSet)\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Patch. Trivial. I can apply it, it's just here for feedback.\n- What happens if the locale uses a comma as the decimal separator?\n- ... [Middle Discussions Snipped for Brevity] ...\n- I see. Calling getObject would work but seems a waste since we'd create a Java Object (like a Number) that is only used for an instanceof check. It would be better to use the ResultSet metadata to figure out the type of a column once.  \n\n Thoughts?\n- No need to worry about this kind of performance issue (or not) since the proposed fix is simple and works. \n\n  damjan  Please verify. \n\n  \n commit -m \"[CSV-140] QuoteMode.NON_NUMERIC doesn't work with CSVPrinter.printRecords(ResultSet)\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVPrinter.java\n    Transmitting file data ...\n    Committed revision 1637781."}
{"project_id": "Csv", "bug_id": "43", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.with* methods clear the header comments\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you for the report. This is now fixed in SVN: \n\n  \n commit -m \"[CSV-145] CSVFormat.with* methods clear the header comments\" C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVPrinterTest.java C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/changes/changes.xml\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/main/java/org/apache/commons/csv/CSVFormat.java\n    Sending        C:/vcs/svn/apache/commons/trunks-proper/csv/src/test/java/org/apache/commons/csv/CSVPrinterTest.java\n    Transmitting file data ...\n    Committed revision 1641845.\n \n  \n\n Keep them coming!"}
{"project_id": "Csv", "bug_id": "44", "source_type": "jira", "llm_input_text": "[Title]: Incorrect Javadoc on QuoteMode.NONE\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Updating the Java to read  \n\n  Never quotes fields. When the delimiter occurs in data, the printer prefixes it with the current escape character. If the escape character is not set, format validation throws an exception.\n- Fixed in SVN trunk. Please verify and close."}
{"project_id": "Csv", "bug_id": "45", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.withHeaderComments() doesn't print comments header comments depending on when it is called\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you able to provide a patch with a unit test? \n\n Gary\n- Oh, I don't have a fix for it. I suspect it has something to do with ordering. I saw some comments about optimizing header printing in the code somewhere.\n- ... [Middle Discussions Snipped for Brevity] ...\n- These tests pass: \n\n  \n     @Test\n     public  void testJiraCsv154_withCommentMarker()  throws  IOException {\n         final   String  comment =  \"This is a header comment\" ;\n        CSVFormat format = CSVFormat.EXCEL.withHeader( \"H1\" ,  \"H2\" ).withCommentMarker( '#' ).withHeaderComments(comment);\n        StringBuilder out =  new  StringBuilder();\n         final  CSVPrinter printer = format.print(out);\n        printer.print( \"A\" );\n        printer.print( \"B\" );\n        printer.close();\n         String  s = out.toString();\n        Assert.assertTrue(s, s.contains(comment));\n    }\n\n    @Test\n     public  void testJiraCsv154_withHeaderComments()  throws  IOException {\n         final   String  comment =  \"This is a header comment\" ;\n        CSVFormat format = CSVFormat.EXCEL.withHeader( \"H1\" ,  \"H2\" ).withHeaderComments(comment).withCommentMarker( '#' );\n        StringBuilder out =  new  StringBuilder();\n         final  CSVPrinter printer = format.print(out);\n        printer.print( \"A\" );\n        printer.print( \"B\" );\n        printer.close();\n         String  s = out.toString();\n        Assert.assertTrue(s, s.contains(comment));\n    }\n \n  \n\n Can you submit a unit test that fails with the SVN trunk code? With 1.2 would be OK as well.\n- Sure. I will shortly."}
{"project_id": "Csv", "bug_id": "46", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.withHeaderComments() doesn't print comments header comments depending on when it is called\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Are you able to provide a patch with a unit test? \n\n Gary\n- Oh, I don't have a fix for it. I suspect it has something to do with ordering. I saw some comments about optimizing header printing in the code somewhere.\n- ... [Middle Discussions Snipped for Brevity] ...\n- These tests pass: \n\n  \n     @Test\n     public  void testJiraCsv154_withCommentMarker()  throws  IOException {\n         final   String  comment =  \"This is a header comment\" ;\n        CSVFormat format = CSVFormat.EXCEL.withHeader( \"H1\" ,  \"H2\" ).withCommentMarker( '#' ).withHeaderComments(comment);\n        StringBuilder out =  new  StringBuilder();\n         final  CSVPrinter printer = format.print(out);\n        printer.print( \"A\" );\n        printer.print( \"B\" );\n        printer.close();\n         String  s = out.toString();\n        Assert.assertTrue(s, s.contains(comment));\n    }\n\n    @Test\n     public  void testJiraCsv154_withHeaderComments()  throws  IOException {\n         final   String  comment =  \"This is a header comment\" ;\n        CSVFormat format = CSVFormat.EXCEL.withHeader( \"H1\" ,  \"H2\" ).withHeaderComments(comment).withCommentMarker( '#' );\n        StringBuilder out =  new  StringBuilder();\n         final  CSVPrinter printer = format.print(out);\n        printer.print( \"A\" );\n        printer.print( \"B\" );\n        printer.close();\n         String  s = out.toString();\n        Assert.assertTrue(s, s.contains(comment));\n    }\n \n  \n\n Can you submit a unit test that fails with the SVN trunk code? With 1.2 would be OK as well.\n- Sure. I will shortly."}
{"project_id": "Csv", "bug_id": "47", "source_type": "jira", "llm_input_text": "[Title]: Comment line hides next record\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I converted the attached to a simple unit test with revision 1721778.\n- Still looking for a patch here...\n- ... [Middle Discussions Snipped for Brevity] ...\n- OK, i got it by now! \n\n It was not clear to me that I get the comment together with the real data. \nThis was the reason why i have missed record #7. I would recommend to add this behavior to the documentation and close this Jira. \n\n Kind regards \nRen\u00e9\n- Javadoc clarified; method renamed"}
{"project_id": "Csv", "bug_id": "48", "source_type": "jira", "llm_input_text": "[Title]: The null string should be case-sensitive when reading records\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In SVN trunk now. Please verify and close this issue. \n\n You can also try a SNAPSHOT for the Apache SNAPSHOT repository here:  [URL]"}
{"project_id": "Csv", "bug_id": "49", "source_type": "jira", "llm_input_text": "[Title]: CsvFormat.nullString should not be escaped\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I'm not sure about changing the behavior. What if you do want it escaped? I'm not sure there is a case for that... What about adding a escapeNull boolean setting?\n- Is the literal string  \"\\N\"  the default for MySQL exports? If not  \"null\" , what should the default null String value be for  CSVFormat.MYSQL ?\n- ... [Middle Discussions Snipped for Brevity] ...\n- In SVN trunk now. Please verify and close this issue. \n\n You can also try a SNAPSHOT for the Apache SNAPSHOT repository here:  [URL]\n- It works for 1.3-SNAPSHOT - thanks. I've missed your previous comment, I'm in EET timezone."}
{"project_id": "Csv", "bug_id": "50", "source_type": "jira", "llm_input_text": "[Title]: CsvFormat.nullString should not be escaped\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I'm not sure about changing the behavior. What if you do want it escaped? I'm not sure there is a case for that... What about adding a escapeNull boolean setting?\n- Is the literal string  \"\\N\"  the default for MySQL exports? If not  \"null\" , what should the default null String value be for  CSVFormat.MYSQL ?\n- ... [Middle Discussions Snipped for Brevity] ...\n- In SVN trunk now. Please verify and close this issue. \n\n You can also try a SNAPSHOT for the Apache SNAPSHOT repository here:  [URL]\n- It works for 1.3-SNAPSHOT - thanks. I've missed your previous comment, I'm in EET timezone."}
{"project_id": "Csv", "bug_id": "51", "source_type": "jira", "llm_input_text": "[Title]: Fix Javadoc to say CSVFormat with() methods return a new CSVFormat\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I attached some tests that reproduce the bug. Depending on multiple line or one line declaration of a new  CSVFormat  the quotes are ignored or not.\n- Hi Kristof,  CSVFormat  is immutable, if you don't use or assign the return value of the  withXXX()  methods it has no effect. \n\n For this reason your second test: \n\n  \n      public  void declarationOneLineForEach() {\n        CSVFormat csvFormat = CSVFormat.newFormat( ',' );\n        csvFormat.withQuote( '\\' ');\n        csvFormat.withQuoteMode(QuoteMode.ALL);\n        assertEquals( \" 'x' , ' y ' , 'z' \" , csvFormat.format(strings));\n    }\n \n  \n is actually equivalent to: \n  \n      public  void declarationOneLineForEach() {\n        CSVFormat csvFormat = CSVFormat.newFormat( ',' );\n        assertEquals( \" 'x' , ' y ' , 'z' \" , csvFormat.format(strings));\n    }\n \n  \n I guess this explains the behavior you observed.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I've renamed this ticket to  Fix Javadoc to say CSVFormat with() methods return a new CSVFormat  and updated the Javadoc to make it crystal clear that a new  CSVFormat  is always returned from  with()  methods. \n\n For example: \n\n  \n     /**\n     * Returns a  new  {@code CSVFormat} with the output quote policy of the format set to the specified value.\n     *\n     * @param quoteModePolicy\n     *            the quote policy to use  for  output.\n     *\n     * @ return  A  new  CSVFormat that is equal to  this  but with the specified quote policy\n     */\n \n  \n\n Note that the  @return tag  was already explicit but the main comment was not.\n- Please verify and close this issue. \n\n Committed revision 1725409."}
{"project_id": "Csv", "bug_id": "52", "source_type": "jira", "llm_input_text": "[Title]: Comment line hides next record\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I converted the attached to a simple unit test with revision 1721778.\n- Still looking for a patch here...\n- ... [Middle Discussions Snipped for Brevity] ...\n- OK, i got it by now! \n\n It was not clear to me that I get the comment together with the real data. \nThis was the reason why i have missed record #7. I would recommend to add this behavior to the documentation and close this Jira. \n\n Kind regards \nRen\u00e9\n- Javadoc clarified; method renamed"}
{"project_id": "Csv", "bug_id": "53", "source_type": "jira", "llm_input_text": "[Title]: Comment line hides next record\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I converted the attached to a simple unit test with revision 1721778.\n- Still looking for a patch here...\n- ... [Middle Discussions Snipped for Brevity] ...\n- OK, i got it by now! \n\n It was not clear to me that I get the comment together with the real data. \nThis was the reason why i have missed record #7. I would recommend to add this behavior to the documentation and close this Jira. \n\n Kind regards \nRen\u00e9\n- Javadoc clarified; method renamed"}
{"project_id": "Csv", "bug_id": "54", "source_type": "jira", "llm_input_text": "[Title]: Comment line hides next record\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I converted the attached to a simple unit test with revision 1721778.\n- Still looking for a patch here...\n- ... [Middle Discussions Snipped for Brevity] ...\n- OK, i got it by now! \n\n It was not clear to me that I get the comment together with the real data. \nThis was the reason why i have missed record #7. I would recommend to add this behavior to the documentation and close this Jira. \n\n Kind regards \nRen\u00e9\n- Javadoc clarified; method renamed"}
{"project_id": "Csv", "bug_id": "55", "source_type": "jira", "llm_input_text": "[Title]: Negative numeric values in the first column are always quoted in minimal mode\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I wonder if that newRecord rule is a poorer version of the rule higher up that ensures that if there is only one single column that it is quoted. \nCompletely agree that it'd be really helpful if this worked correctly with negative numbers in particular as this causes problems when e.g. writing out a CSV file and then attempting to import it as some systems take the quotes as forcing it to be a string.\n- The first char test is now per RFC4180 ( [URL] TEXTDATA =  %x20-21 / %x23-2B / %x2D-7E. \n\n Please verify and fix."}
{"project_id": "Csv", "bug_id": "56", "source_type": "jira", "llm_input_text": "[Title]: Fix incorrect method name 'withFirstRowAsHeader' in user guide\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you kindly for the report and the patch. Patch applied in Git master. Please verify and close this ticket."}
{"project_id": "Csv", "bug_id": "57", "source_type": "jira", "llm_input_text": "[Title]: Fix outdated comments about FileReader in CSVParser #13\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In Git master. Closes #13."}
{"project_id": "Csv", "bug_id": "58", "source_type": "jira", "llm_input_text": "[Title]: withNullString value is printed without quotes when QuoteMode.ALL is specified; add QuoteMode.ALL_NON_NULL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Very nice wording \"CommonsCsvIsSlightlyBroken\" - makes me want to fix that right away for you   \n\n Are you up for providing a patch?\n- Right up the alley of a \"ImNotDeadYet\"!\n- ... [Middle Discussions Snipped for Brevity] ...\n- In Git master. Please verify and close.\n- nexus7tha  \n\n WRT to MySQL and PostgreSQL, we just need to make sure that our presets for these two are correct. \n\n Gary"}
{"project_id": "Csv", "bug_id": "59", "source_type": "jira", "llm_input_text": "[Title]: withNullString value is printed without quotes when QuoteMode.ALL is specified; add QuoteMode.ALL_NON_NULL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Very nice wording \"CommonsCsvIsSlightlyBroken\" - makes me want to fix that right away for you   \n\n Are you up for providing a patch?\n- Right up the alley of a \"ImNotDeadYet\"!\n- ... [Middle Discussions Snipped for Brevity] ...\n- In Git master. Please verify and close.\n- nexus7tha  \n\n WRT to MySQL and PostgreSQL, we just need to make sure that our presets for these two are correct. \n\n Gary"}
{"project_id": "Csv", "bug_id": "60", "source_type": "jira", "llm_input_text": "[Title]: withNullString value is printed without quotes when QuoteMode.ALL is specified; add QuoteMode.ALL_NON_NULL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Very nice wording \"CommonsCsvIsSlightlyBroken\" - makes me want to fix that right away for you   \n\n Are you up for providing a patch?\n- Right up the alley of a \"ImNotDeadYet\"!\n- ... [Middle Discussions Snipped for Brevity] ...\n- In Git master. Please verify and close.\n- nexus7tha  \n\n WRT to MySQL and PostgreSQL, we just need to make sure that our presets for these two are correct. \n\n Gary"}
{"project_id": "Csv", "bug_id": "61", "source_type": "jira", "llm_input_text": "[Title]: CSVParser#iterator()#hasNext() fails\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This is normal behavior with the current architecture: The  iterator()  API presents an object that is backed by data in the  CSVParser  as the parser is  streaming  over the file. The  CSVParser  is like a forward-only stream. \n\n When you create a new  Iterator  you are only created a new view on the same position in the parser's stream. \n\n For the behavior you want, you need to open a new  CSVParser . \n\n You can also abreviate the parser creation like this: \n\n  \n CSVParser parser = csvFormat.parse( new  InputStreamReader( new  FileInputStream(csvFile), StandardCharsets.UTF_8));\n- garydgregory \u00a0the issue is that in current architecture the hasNext() method is unusable, because it cant be used with next() method due to skipping of records\n- ... [Middle Discussions Snipped for Brevity] ...\n- Works with\u00a0commons-csv-1.7-20181217.213125-13.jar \n\n No longer getting the below error. \n\n Exception in thread \"main\" java.util.NoSuchElementException: No more CSV records available \n at org.apache.commons.csv.CSVParser$1.next(CSVParser.java:472) \n at org.apache.commons.csv.CSVParser$1.next(CSVParser.java:436) \n at com.somename.CommonsCSVExample.createEndChannel(CommonsCSVExample.java:32) \n at com.somename.CommonsCSVExample.main(CommonsCSVExample.java:46)\n- Reported as fixed"}
{"project_id": "Csv", "bug_id": "62", "source_type": "jira", "llm_input_text": "[Title]: Add autoFlush option for CSVPrinter\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi All, \n\n That seems open to interpretation to me: if you look at the definition of  Closeable ,  Flushable  and  OutputStream  even (which  CSVPrinter  does not extend.) there is no requirement that  close()  MUST call  flush() . These two operation are separate for a reason. You could imaging wanting to close a resource without flushing in the case where you'd want to release resources during error handling; without going through the bother of flushing out bad or inappropriate data for example. \n\n That said, I am open to suggestions here. I wonder if a new API  close(boolean flush)  would work for you. Alternatively, we could have an  autoFlush  setting in  CSVFformat . The  autoFlush  default would be  false  for compatibility. Or have both mechanisms, which I would not mind adding or getting a PR with tests would be better!   \n\n No matter which way we go, your call site will have to adapt, today to call  flush  or later to use an alternate mechanism. For 1.x, I think we would want to maintain compatibility in behavior.  \n\n But, again, I am open to hearing what the community has to say on this topic. \n\n Gary\n- In git master. Please verify and close."}
{"project_id": "Csv", "bug_id": "63", "source_type": "jira", "llm_input_text": "[Title]: Add autoFlush option for CSVPrinter\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi All, \n\n That seems open to interpretation to me: if you look at the definition of  Closeable ,  Flushable  and  OutputStream  even (which  CSVPrinter  does not extend.) there is no requirement that  close()  MUST call  flush() . These two operation are separate for a reason. You could imaging wanting to close a resource without flushing in the case where you'd want to release resources during error handling; without going through the bother of flushing out bad or inappropriate data for example. \n\n That said, I am open to suggestions here. I wonder if a new API  close(boolean flush)  would work for you. Alternatively, we could have an  autoFlush  setting in  CSVFformat . The  autoFlush  default would be  false  for compatibility. Or have both mechanisms, which I would not mind adding or getting a PR with tests would be better!   \n\n No matter which way we go, your call site will have to adapt, today to call  flush  or later to use an alternate mechanism. For 1.x, I think we would want to maintain compatibility in behavior.  \n\n But, again, I am open to hearing what the community has to say on this topic. \n\n Gary\n- In git master. Please verify and close."}
{"project_id": "Csv", "bug_id": "64", "source_type": "jira", "llm_input_text": "[Title]: Add autoFlush option for CSVPrinter\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi All, \n\n That seems open to interpretation to me: if you look at the definition of  Closeable ,  Flushable  and  OutputStream  even (which  CSVPrinter  does not extend.) there is no requirement that  close()  MUST call  flush() . These two operation are separate for a reason. You could imaging wanting to close a resource without flushing in the case where you'd want to release resources during error handling; without going through the bother of flushing out bad or inappropriate data for example. \n\n That said, I am open to suggestions here. I wonder if a new API  close(boolean flush)  would work for you. Alternatively, we could have an  autoFlush  setting in  CSVFformat . The  autoFlush  default would be  false  for compatibility. Or have both mechanisms, which I would not mind adding or getting a PR with tests would be better!   \n\n No matter which way we go, your call site will have to adapt, today to call  flush  or later to use an alternate mechanism. For 1.x, I think we would want to maintain compatibility in behavior.  \n\n But, again, I am open to hearing what the community has to say on this topic. \n\n Gary\n- In git master. Please verify and close."}
{"project_id": "Csv", "bug_id": "65", "source_type": "jira", "llm_input_text": "[Title]: The behavior of quote char using is not similar as Excel does when the first string contains CJK char(s)\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This is the patch to solve the problem.\n- Our quoting seems off IMO. Why not simply do: \n  \n diff --git a/src/main/java/org/apache/commons/csv/CSVFormat.java b/src/main/java/org/apache/commons/csv/CSVFormat.java\nindex 58948fd..dc7588b 100644\n--- a/src/main/java/org/apache/commons/csv/CSVFormat.java\n+++ b/src/main/java/org/apache/commons/csv/CSVFormat.java\n@@ -1186,10 +1186,7 @@\n             } else {\n                 char c = value.charAt(pos);\n \n-                // RFC4180 (https://tools.ietf.org/html/rfc4180) TEXTDATA =  %x20-21 / %x23-2B / %x2D-7E\n-                if (newRecord &amp;&amp; (c &lt; 0x20 || c &gt; 0x21 &amp;&amp; c &lt; 0x23 || c &gt; 0x2B &amp;&amp; c &lt; 0x2D || c &gt; 0x7E)) {\n-                    quote = true;\n-                } else if (c &lt;= COMMENT) {\n+                if (c &lt;= COMMENT) {\n                     // Some other chars at the start of a value caused the parser to fail, so for now\n                     // encapsulate if we start in anything less than '#'. We are being conservative\n                     // by including the default comment char too.\ndiff --git a/src/test/java/org/apache/commons/csv/CSVPrinterTest.java b/src/test/java/org/apache/commons/csv/CSVPrinterTest.java\nindex ae7aae2..5a09627 100644\n--- a/src/test/java/org/apache/commons/csv/CSVPrinterTest.java\n+++ b/src/test/java/org/apache/commons/csv/CSVPrinterTest.java\n@@ -1033,11 +1033,20 @@\n     }\n \n     @Test\n-    public void testRfc4180QuoteSingleChar() throws IOException {\n+    public void testDontQuoteEuroFirstChar() throws IOException {\n         final StringWriter sw = new StringWriter();\n         try (final CSVPrinter printer = new CSVPrinter(sw, CSVFormat.RFC4180)) {\n             printer.printRecord(EURO_CH, \"Deux\");\n-            assertEquals(\"\\\"\" + EURO_CH + \"\\\",Deux\" + recordSeparator, sw.toString());\n+            assertEquals(EURO_CH + \",Deux\" + recordSeparator, sw.toString());\n+        }\n+    }\n+\n+    @Test\n+    public void testQuoteCommaFirstChar() throws IOException {\n+        final StringWriter sw = new StringWriter();\n+        try (final CSVPrinter printer = new CSVPrinter(sw, CSVFormat.RFC4180)) {\n+            printer.printRecord(\",\");\n+            assertEquals(\"\\\",\\\"\" + recordSeparator, sw.toString());\n         }\n     }\n \n  \n I do not see why the first char in a record being not in TEXTDATA should quote the first field. \n\n Thoughts from other. With the above patch, all tests pass.\n- ... [Middle Discussions Snipped for Brevity] ...\n- In git master. Please verify and close.\n- Thanks Gary very much. I have confirmed and tested the sourcecode of git master, it is OK now. \nAlso thanks Charles for the comment."}
{"project_id": "Csv", "bug_id": "66", "source_type": "jira", "llm_input_text": "[Title]: Inconsistency between Javadoc of  CSVFormat DEFAULT EXCEL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- samuelm :\u00a0 \n\n Thank you for your report. We should fix the Javadoc. Would you submit a PR on GitHub please?  [URL]\n\n Gary\n- Pull request added at  [URL]\n- Patch applied. Thank you for the PR. Please verify and close this ticket."}
{"project_id": "Csv", "bug_id": "67", "source_type": "jira", "llm_input_text": "[Title]: Some multi-iterator parsing peek sequences incorrectly consume elements\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you for your report  Dave Warshaw . \n\n This seems like it deserves a PR. But it is worth noting that the workaround is simple.\n- The workaround is simple, if you know you have the problem. \n\n With the number of\u00a0batching / chunking Java based CSV processing apps out in the wild, I can't believe that everyone has avoided this error.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I started looking at the patch last week but got side tracked by some work issues. I should be able to look again in the coming week. Thank you for the PR.\n- Patch applied, thank you. Please verify and close this ticket and related PR."}
{"project_id": "Csv", "bug_id": "68", "source_type": "jira", "llm_input_text": "[Title]: Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The test   CSVFormatTest.java      causes \n{{ \njava.io.IOException: (startline 1) EOF reached before encapsulated token finished \n\tat org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:288) \n\tat org.apache.commons.csv.Lexer.nextToken(Lexer.java:158) \n\tat org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:586) \n\tat org.apache.commons.csv.CSVParser.getRecords(CSVParser.java:448) \n}}\n- I'm running into the same issue. \nI'm now using the the following format: \n  \n \nCSVFormat.POSTGRESQL_CSV.withEscape( '\\\\' );\n \n  \n It seems to work ok. \n\n So the bug is in the defautl formatters. I  submitted a simple PR , but integration tests seem to fail for reasons unclear to me. \n\n But it exposes another issue: you can assign the quote and the escape character the same character. This is not supported. So either you should get an IllegalArgumentException, or it should be supported by commons-csv I feel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi  garydgregory , \n\n You asked me to verify what was in master. When I confirmed that all was ok, I meant that the changes in  PR#32  were correctly copied to master. I did not mean that this issue is fixed now. \n\n The issue that my PR addresses is the inconsistencies between Commons-csv's POSTGRESQL_TEXT and POSTGRESQL_CSV formats and PostgreSQL itself. Those inconstencies are now fixed. \n\n The   CSV-208   issue is on having the QUOTE and the ESCAPE character the same. Commons-csv can not parse such CSV files; it spits out a stacktrace  as posted above . So this issue should remain open.\n- Hi  jurrieovergoor : \n\n I'd like to narrow this issue to fixing the Javadoc and the escape character for PostgreSQL. The general issue with parsing, the quote, and escape character is already covered in  CSV-200  which is now linked to this issue. If you have a general solution to this problem, please comment or provide a PR in  CSV-200 . \n\n Thank you! \n\n Gary"}
{"project_id": "Csv", "bug_id": "69", "source_type": "jira", "llm_input_text": "[Title]: Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The test   CSVFormatTest.java      causes \n{{ \njava.io.IOException: (startline 1) EOF reached before encapsulated token finished \n\tat org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:288) \n\tat org.apache.commons.csv.Lexer.nextToken(Lexer.java:158) \n\tat org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:586) \n\tat org.apache.commons.csv.CSVParser.getRecords(CSVParser.java:448) \n}}\n- I'm running into the same issue. \nI'm now using the the following format: \n  \n \nCSVFormat.POSTGRESQL_CSV.withEscape( '\\\\' );\n \n  \n It seems to work ok. \n\n So the bug is in the defautl formatters. I  submitted a simple PR , but integration tests seem to fail for reasons unclear to me. \n\n But it exposes another issue: you can assign the quote and the escape character the same character. This is not supported. So either you should get an IllegalArgumentException, or it should be supported by commons-csv I feel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi  garydgregory , \n\n You asked me to verify what was in master. When I confirmed that all was ok, I meant that the changes in  PR#32  were correctly copied to master. I did not mean that this issue is fixed now. \n\n The issue that my PR addresses is the inconsistencies between Commons-csv's POSTGRESQL_TEXT and POSTGRESQL_CSV formats and PostgreSQL itself. Those inconstencies are now fixed. \n\n The   CSV-208   issue is on having the QUOTE and the ESCAPE character the same. Commons-csv can not parse such CSV files; it spits out a stacktrace  as posted above . So this issue should remain open.\n- Hi  jurrieovergoor : \n\n I'd like to narrow this issue to fixing the Javadoc and the escape character for PostgreSQL. The general issue with parsing, the quote, and escape character is already covered in  CSV-200  which is now linked to this issue. If you have a general solution to this problem, please comment or provide a PR in  CSV-200 . \n\n Thank you! \n\n Gary"}
{"project_id": "Csv", "bug_id": "70", "source_type": "jira", "llm_input_text": "[Title]: Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- The test   CSVFormatTest.java      causes \n{{ \njava.io.IOException: (startline 1) EOF reached before encapsulated token finished \n\tat org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:288) \n\tat org.apache.commons.csv.Lexer.nextToken(Lexer.java:158) \n\tat org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:586) \n\tat org.apache.commons.csv.CSVParser.getRecords(CSVParser.java:448) \n}}\n- I'm running into the same issue. \nI'm now using the the following format: \n  \n \nCSVFormat.POSTGRESQL_CSV.withEscape( '\\\\' );\n \n  \n It seems to work ok. \n\n So the bug is in the defautl formatters. I  submitted a simple PR , but integration tests seem to fail for reasons unclear to me. \n\n But it exposes another issue: you can assign the quote and the escape character the same character. This is not supported. So either you should get an IllegalArgumentException, or it should be supported by commons-csv I feel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi  garydgregory , \n\n You asked me to verify what was in master. When I confirmed that all was ok, I meant that the changes in  PR#32  were correctly copied to master. I did not mean that this issue is fixed now. \n\n The issue that my PR addresses is the inconsistencies between Commons-csv's POSTGRESQL_TEXT and POSTGRESQL_CSV formats and PostgreSQL itself. Those inconstencies are now fixed. \n\n The   CSV-208   issue is on having the QUOTE and the ESCAPE character the same. Commons-csv can not parse such CSV files; it spits out a stacktrace  as posted above . So this issue should remain open.\n- Hi  jurrieovergoor : \n\n I'd like to narrow this issue to fixing the Javadoc and the escape character for PostgreSQL. The general issue with parsing, the quote, and escape character is already covered in  CSV-200  which is now linked to this issue. If you have a general solution to this problem, please comment or provide a PR in  CSV-200 . \n\n Thank you! \n\n Gary"}
{"project_id": "Csv", "bug_id": "71", "source_type": "jira", "llm_input_text": "[Title]: withNullString value is printed without quotes when QuoteMode.ALL is specified; add QuoteMode.ALL_NON_NULL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Very nice wording \"CommonsCsvIsSlightlyBroken\" - makes me want to fix that right away for you   \n\n Are you up for providing a patch?\n- Right up the alley of a \"ImNotDeadYet\"!\n- ... [Middle Discussions Snipped for Brevity] ...\n- In Git master. Please verify and close.\n- nexus7tha  \n\n WRT to MySQL and PostgreSQL, we just need to make sure that our presets for these two are correct. \n\n Gary"}
{"project_id": "Csv", "bug_id": "72", "source_type": "jira", "llm_input_text": "[Title]: withNullString value is printed without quotes when QuoteMode.ALL is specified; add QuoteMode.ALL_NON_NULL\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Very nice wording \"CommonsCsvIsSlightlyBroken\" - makes me want to fix that right away for you   \n\n Are you up for providing a patch?\n- Right up the alley of a \"ImNotDeadYet\"!\n- ... [Middle Discussions Snipped for Brevity] ...\n- In Git master. Please verify and close.\n- nexus7tha  \n\n WRT to MySQL and PostgreSQL, we just need to make sure that our presets for these two are correct. \n\n Gary"}
{"project_id": "Csv", "bug_id": "73", "source_type": "jira", "llm_input_text": "[Title]: Site link \"Source Repository\" does not work\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I think we can get rid of the link in favor of the more complete  [URL] as listed under the section \"PROJECT DOCUMENTATION -&gt; Project Information\".\n- In git  master . Please verify and close.\n- From\u00a0 [URL]\u00a0as linked to on the left menu, as Source Repository still reference the broken url.\u00a0 Checked today 1/31/2019.\n- The link has been removed in git master a while ago and I just republished the site for that change to be public."}
{"project_id": "Csv", "bug_id": "74", "source_type": "jira", "llm_input_text": "[Title]: Escape quotes in CLOBs\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In git master. \n\n Please verify and close."}
{"project_id": "Csv", "bug_id": "75", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat#valiadte() does not account for allowDuplicateHeaderNames #43\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "76", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat equals() and hashCode() don't use all fields\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Fixed by: \n\n 605bc01    CSV-242   CSVFormat equals() and hash() don't use all fields \nc683594    CSV-242   CSVFormat equals() and hashCode() don't use all fields \n7ddc71c  Wrong method name"}
{"project_id": "Csv", "bug_id": "77", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat equals() and hashCode() don't use all fields\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Fixed by: \n\n 605bc01    CSV-242   CSVFormat equals() and hash() don't use all fields \nc683594    CSV-242   CSVFormat equals() and hashCode() don't use all fields \n7ddc71c  Wrong method name"}
{"project_id": "Csv", "bug_id": "78", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat withTrim() and withIgnoreSurroundingSpaces() need better docs\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- dd5de38    CSV-243   CSVFormat withTrim() and withIgnoreSurroundingSpaces()\n- Turns out that withTrim() is used by CSVParser as well as CSVFormat#print. \n\n CSVParser#addRecord uses it to determine whether to trim the field value before storing in the recordList.\n- bc64fb5    CSV-243   CSVFormat withTrim() and withIgnoreSurroundingSpaces()"}
{"project_id": "Csv", "bug_id": "79", "source_type": "jira", "llm_input_text": "[Title]: Test case failures following CSVFormat#equals() update\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- 42b9fdb    CSV-244   Test case failures following CSVFormat#equals() update"}
{"project_id": "Csv", "bug_id": "80", "source_type": "jira", "llm_input_text": "[Title]: Post 1.7 release fixes.\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "81", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat withTrim() and withIgnoreSurroundingSpaces() need better docs\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- dd5de38    CSV-243   CSVFormat withTrim() and withIgnoreSurroundingSpaces()\n- Turns out that withTrim() is used by CSVParser as well as CSVFormat#print. \n\n CSVParser#addRecord uses it to determine whether to trim the field value before storing in the recordList.\n- bc64fb5    CSV-243   CSVFormat withTrim() and withIgnoreSurroundingSpaces()"}
{"project_id": "Csv", "bug_id": "82", "source_type": "jira", "llm_input_text": "[Title]: Char escape doesn't work properly with quoting\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I can confirm that: \n\n  \n l.add( \"\\\\\" );\n \n  \n\n does not output: \n  \n  \"\\\\\" \n \n  \n\n But instead: \n\n does not output: \n  \n  \"\\\" \n \n  \n\n which causes an EOFException in the parser if you try to read it back. \n\n But I thought that anything goes inside of quotes, which is the point of quoting... \n\n Thoughts?\n- Yes, anything goes inside double-quotes - except a double-quote (DQ). \n\n There are two ways to support embedded DQ: doubling the DQ, or escaping the DQ. \n\n In this case, the backslash is presumably being treated as an escape, and since the next char is a DQ, it causes the parser to run off the end of the string. \nHowever, if backslash is not treated as an escape, there would be no problem with the string. \n\n AFAICT, escaping a DQ - instead of doubling it - is not a standard feature of CSV. \nAccording to Wikipedia escaping is used in Sybase. \nIn which case, it suggests that the parser should default to not processing escapes in DQ strings. \n\n The fundamental problem here is that there is no single definition of what constitutes the CSV format.\n- ... [Middle Discussions Snipped for Brevity] ...\n- 7754cd4    CSV-135   - Char escape doesn't work properly with quoting\n- Sorry, I probably did not make my point clear before. \n If the field value is: \n \n\t \"D:\\Property Documents\\ID 1.docx\" \n \n\n the `\\` is obviously a literal not an escape. While for\u00a0 \n \n\t \"3rd Lincoln boulevard\\, Miami\\, FL\" \n \n\n the `\\` may or may-not be an escape. \n\n The solution could be by adding a new flag (or a new  enum ) that modifies  QuoteMode 's handling by making it explicit whether `\\`\u00a0are literals, or an escape only if followed by specific chars (i.e. `,`,`\\`) or always an escape."}
{"project_id": "Csv", "bug_id": "83", "source_type": "jira", "llm_input_text": "[Title]: Char escape doesn't work properly with quoting\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I can confirm that: \n\n  \n l.add( \"\\\\\" );\n \n  \n\n does not output: \n  \n  \"\\\\\" \n \n  \n\n But instead: \n\n does not output: \n  \n  \"\\\" \n \n  \n\n which causes an EOFException in the parser if you try to read it back. \n\n But I thought that anything goes inside of quotes, which is the point of quoting... \n\n Thoughts?\n- Yes, anything goes inside double-quotes - except a double-quote (DQ). \n\n There are two ways to support embedded DQ: doubling the DQ, or escaping the DQ. \n\n In this case, the backslash is presumably being treated as an escape, and since the next char is a DQ, it causes the parser to run off the end of the string. \nHowever, if backslash is not treated as an escape, there would be no problem with the string. \n\n AFAICT, escaping a DQ - instead of doubling it - is not a standard feature of CSV. \nAccording to Wikipedia escaping is used in Sybase. \nIn which case, it suggests that the parser should default to not processing escapes in DQ strings. \n\n The fundamental problem here is that there is no single definition of what constitutes the CSV format.\n- ... [Middle Discussions Snipped for Brevity] ...\n- 7754cd4    CSV-135   - Char escape doesn't work properly with quoting\n- Sorry, I probably did not make my point clear before. \n If the field value is: \n \n\t \"D:\\Property Documents\\ID 1.docx\" \n \n\n the `\\` is obviously a literal not an escape. While for\u00a0 \n \n\t \"3rd Lincoln boulevard\\, Miami\\, FL\" \n \n\n the `\\` may or may-not be an escape. \n\n The solution could be by adding a new flag (or a new  enum ) that modifies  QuoteMode 's handling by making it explicit whether `\\`\u00a0are literals, or an escape only if followed by specific chars (i.e. `,`,`\\`) or always an escape."}
{"project_id": "Csv", "bug_id": "84", "source_type": "jira", "llm_input_text": "[Title]: ArrayIndexOutOfBoundsException when trying to read record written by CSVPrinter using CSVParser with same format\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Seems to be a duplicate of an issue from 2016 !!! \n\n \u00a0 \n\n Apache spark ships with both .escapa character and quote character set, so is effectively broken this way\n- I cannot reproduce this in 1.8-SNAPSHOT with the new test  org.apache.commons.csv.issues.JiraCvs249Test . Please verify and close."}
{"project_id": "Csv", "bug_id": "85", "source_type": "jira", "llm_input_text": "[Title]: ArrayIndexOutOfBoundsException when trying to read record written by CSVPrinter using CSVParser with same format\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Seems to be a duplicate of an issue from 2016 !!! \n\n \u00a0 \n\n Apache spark ships with both .escapa character and quote character set, so is effectively broken this way\n- I cannot reproduce this in 1.8-SNAPSHOT with the new test  org.apache.commons.csv.issues.JiraCvs249Test . Please verify and close."}
{"project_id": "Csv", "bug_id": "86", "source_type": "jira", "llm_input_text": "[Title]: A single empty header is allowed when not allowing empty column headers.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I think this works as designed in git master, please see  [URL]\n\n Note that using   withHeaders()   without any arguments uses the first line as the header line.\n- I still think there is an inconsistency. \n\n My original test case in the ticket header expects an exception when there is a single missing header and the parser is configured to not allow missing column names. \n\n This is how the code works. This runs fine against current master: \n  \n \n@Test\n public  void testHeadersMissing()  throws  Exception {\n     final  CSVFormat format = CSVFormat.DEFAULT.withHeader();\n\n     // The  default  does not allow missing column names but allows\n      // duplicate headers\n     Assertions.assertFalse(format.getAllowMissingColumnNames(),\n         \"By  default  we should not allow missing column names\" );\n    Assertions.assertTrue(format.getAllowDuplicateHeaderNames(),\n         \"By  default  we should allow duplicate column names\" );\n\n    Assertions.assertDoesNotThrow(() -&gt; {\n         final  Reader in =  new  StringReader( \"a,,c,d,e\\n1,2,3,4,5\\nv,w,x,y,z\" );\n        format.parse(in).iterator();\n    },  \"1 missing column header is OK\" );\n\n    Assertions.assertThrows(IllegalArgumentException.class, () -&gt; {\n         final  Reader in =  new  StringReader( \"a,,c,d,\\n1,2,3,4,5\\nv,w,x,y,z\" );\n        format.parse(in).iterator();\n    },  \"2+ missing column headers is not allowed!\" );\n}\n \n  \n So 1 missing header is fine but not 2 or more. This is the bug. \n\n My PR to fix this is old. Do you want a rebased version with tests showing what I expect?\n- ... [Middle Discussions Snipped for Brevity] ...\n- ggregory  \n\n I've updated the PR with a quick rebase. The code logic in CSVParser was unchanged. The recent switch from JUnit 4 to 5 was preventing an auto-merge by git but the change was trivial. \n\n I also added a variant of the above test to the issues test: JiraCsv247Test.\n- aherbert  \n\n I merged the PR to git master. Please verify and close this ticket. \n\n Thank you! \nGary"}
{"project_id": "Csv", "bug_id": "87", "source_type": "jira", "llm_input_text": "[Title]: A single empty header is allowed when not allowing empty column headers.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I think this works as designed in git master, please see  [URL]\n\n Note that using   withHeaders()   without any arguments uses the first line as the header line.\n- I still think there is an inconsistency. \n\n My original test case in the ticket header expects an exception when there is a single missing header and the parser is configured to not allow missing column names. \n\n This is how the code works. This runs fine against current master: \n  \n \n@Test\n public  void testHeadersMissing()  throws  Exception {\n     final  CSVFormat format = CSVFormat.DEFAULT.withHeader();\n\n     // The  default  does not allow missing column names but allows\n      // duplicate headers\n     Assertions.assertFalse(format.getAllowMissingColumnNames(),\n         \"By  default  we should not allow missing column names\" );\n    Assertions.assertTrue(format.getAllowDuplicateHeaderNames(),\n         \"By  default  we should allow duplicate column names\" );\n\n    Assertions.assertDoesNotThrow(() -&gt; {\n         final  Reader in =  new  StringReader( \"a,,c,d,e\\n1,2,3,4,5\\nv,w,x,y,z\" );\n        format.parse(in).iterator();\n    },  \"1 missing column header is OK\" );\n\n    Assertions.assertThrows(IllegalArgumentException.class, () -&gt; {\n         final  Reader in =  new  StringReader( \"a,,c,d,\\n1,2,3,4,5\\nv,w,x,y,z\" );\n        format.parse(in).iterator();\n    },  \"2+ missing column headers is not allowed!\" );\n}\n \n  \n So 1 missing header is fine but not 2 or more. This is the bug. \n\n My PR to fix this is old. Do you want a rebased version with tests showing what I expect?\n- ... [Middle Discussions Snipped for Brevity] ...\n- ggregory  \n\n I've updated the PR with a quick rebase. The code logic in CSVParser was unchanged. The recent switch from JUnit 4 to 5 was preventing an auto-merge by git but the change was trivial. \n\n I also added a variant of the above test to the issues test: JiraCsv247Test.\n- aherbert  \n\n I merged the PR to git master. Please verify and close this ticket. \n\n Thank you! \nGary"}
{"project_id": "Csv", "bug_id": "88", "source_type": "jira", "llm_input_text": "[Title]: A single empty header is allowed when not allowing empty column headers.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I think this works as designed in git master, please see  [URL]\n\n Note that using   withHeaders()   without any arguments uses the first line as the header line.\n- I still think there is an inconsistency. \n\n My original test case in the ticket header expects an exception when there is a single missing header and the parser is configured to not allow missing column names. \n\n This is how the code works. This runs fine against current master: \n  \n \n@Test\n public  void testHeadersMissing()  throws  Exception {\n     final  CSVFormat format = CSVFormat.DEFAULT.withHeader();\n\n     // The  default  does not allow missing column names but allows\n      // duplicate headers\n     Assertions.assertFalse(format.getAllowMissingColumnNames(),\n         \"By  default  we should not allow missing column names\" );\n    Assertions.assertTrue(format.getAllowDuplicateHeaderNames(),\n         \"By  default  we should allow duplicate column names\" );\n\n    Assertions.assertDoesNotThrow(() -&gt; {\n         final  Reader in =  new  StringReader( \"a,,c,d,e\\n1,2,3,4,5\\nv,w,x,y,z\" );\n        format.parse(in).iterator();\n    },  \"1 missing column header is OK\" );\n\n    Assertions.assertThrows(IllegalArgumentException.class, () -&gt; {\n         final  Reader in =  new  StringReader( \"a,,c,d,\\n1,2,3,4,5\\nv,w,x,y,z\" );\n        format.parse(in).iterator();\n    },  \"2+ missing column headers is not allowed!\" );\n}\n \n  \n So 1 missing header is fine but not 2 or more. This is the bug. \n\n My PR to fix this is old. Do you want a rebased version with tests showing what I expect?\n- ... [Middle Discussions Snipped for Brevity] ...\n- ggregory  \n\n I've updated the PR with a quick rebase. The code logic in CSVParser was unchanged. The recent switch from JUnit 4 to 5 was preventing an auto-merge by git but the change was trivial. \n\n I also added a variant of the above test to the issues test: JiraCsv247Test.\n- aherbert  \n\n I merged the PR to git master. Please verify and close this ticket. \n\n Thank you! \nGary"}
{"project_id": "Csv", "bug_id": "89", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commit\u00a0 . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commit\u00a0 ."}
{"project_id": "Csv", "bug_id": "90", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commit\u00a0 . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commit\u00a0 ."}
{"project_id": "Csv", "bug_id": "91", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commit\u00a0 . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commit\u00a0 ."}
{"project_id": "Csv", "bug_id": "92", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commit\u00a0 . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commit\u00a0 ."}
{"project_id": "Csv", "bug_id": "93", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commit\u00a0 . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commit\u00a0 ."}
{"project_id": "Csv", "bug_id": "94", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord is not Serializable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This throws a NotSerializableException. \n\n  \n \n@Test\n public  void testSerialization()  throws  IOException {\n    CSVRecord shortRec;\n     try  ( final  CSVParser parser = CSVParser.parse( \"a,b\" , CSVFormat.newFormat( ',' ))) {\n        shortRec = parser.iterator().next();\n    }\n     final  ByteArrayOutputStream out =  new  ByteArrayOutputStream();\n     try  (ObjectOutputStream oos =  new  ObjectOutputStream(out)) {\n        oos.writeObject(shortRec);\n    }\n}\n- aherbert  \n\n The record's parser field is now transient.\n- Serialization functionality is restored. \n\n A test was added to assert the record after deserialisation in commit\u00a0 . \n\n A test was added to deserialise a record that was serialised using version 1.6 in commit\u00a0 ."}
{"project_id": "Csv", "bug_id": "95", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.printWithEscapes throws StringIndexOutOfBoundsException when value is Reader\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I found that the method\u00a0 \n  \n \n //\u4ee3\u7801\u5360\u4f4d\u7b26\n printWithQuotes\n \n  \n \u00a0 \n  \n \n //\u4ee3\u7801\u5360\u4f4d\u7b26\n builder.setLength(0);\npos = -1;\n \n  \n \u00a0 \n\n after builder.setLength(0); following\u00a0pos = -1; \n\n that will also pass the testcase \n\n \u00a0 \n\n pr on github \n\n [pr61| [URL]\n- FTR, this is the actual exception when the patch when the patch is applied without the main change: \n  \n java.lang.StringIndexOutOfBoundsException: String index out of range: 3\n\tat java.lang.AbstractStringBuilder.substring(AbstractStringBuilder.java:933)\n\tat java.lang.StringBuilder.substring(StringBuilder.java:76)\n\tat org.apache.commons.csv.CSVFormat.printWithEscapes(CSVFormat.java:1409)\n\tat org.apache.commons.csv.CSVFormat.print(CSVFormat.java:1289)\n\tat org.apache.commons.csv.CSVFormat.print(CSVFormat.java:1232)\n\tat org.apache.commons.csv.CSVPrinter.print(CSVPrinter.java:171)\n\tat org.apache.commons.csv.CSVPrinterTest.testCSV259(CSVPrinterTest.java:320)\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "96", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.printWithEscapes throws StringIndexOutOfBoundsException when value is Reader\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I found that the method\u00a0 \n  \n \n //\u4ee3\u7801\u5360\u4f4d\u7b26\n printWithQuotes\n \n  \n \u00a0 \n  \n \n //\u4ee3\u7801\u5360\u4f4d\u7b26\n builder.setLength(0);\npos = -1;\n \n  \n \u00a0 \n\n after builder.setLength(0); following\u00a0pos = -1; \n\n that will also pass the testcase \n\n \u00a0 \n\n pr on github \n\n [pr61| [URL]\n- FTR, this is the actual exception when the patch when the patch is applied without the main change: \n  \n java.lang.StringIndexOutOfBoundsException: String index out of range: 3\n\tat java.lang.AbstractStringBuilder.substring(AbstractStringBuilder.java:933)\n\tat java.lang.StringBuilder.substring(StringBuilder.java:76)\n\tat org.apache.commons.csv.CSVFormat.printWithEscapes(CSVFormat.java:1409)\n\tat org.apache.commons.csv.CSVFormat.print(CSVFormat.java:1289)\n\tat org.apache.commons.csv.CSVFormat.print(CSVFormat.java:1232)\n\tat org.apache.commons.csv.CSVPrinter.print(CSVPrinter.java:171)\n\tat org.apache.commons.csv.CSVPrinterTest.testCSV259(CSVPrinterTest.java:320)\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "97", "source_type": "jira", "llm_input_text": "[Title]: Line number is not proper at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you provide a unit test to reproduce the problem please?\n- Please find the code and output below \n\n Code \n======= \npublic class TestCsv \n{ \n\tpublic static void main(String[] args) throws Exception \n\t{ \n\t\tString records = \"A,B,C,D\\r\\n\" \n\t\t\t\t+ \"a1,b1,c1,d1\\r\\n\" \n\t\t\t\t+ \"a2,b2,c2,d2\"; \n\n \t\tCSVParser parser = new CSVParser(new StringReader(records), CSVFormat.EXCEL.withHeader()); \n\t\tIterator&lt;CSVRecord&gt; recordIt = parser.iterator(); \n\n \t\twhile(recordIt.hasNext()) \n\t\t{\n\t\t\tSystem.out.println(parser.getCurrentLineNumber() + \" ==&gt; \" + recordIt.next());\n\t\t}\n\n \t\tparser.close(); \n\t} \n} \n\n Actual Output \n========== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n2 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ] \n\n Expected Output \n============== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n3 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ]\n- I have commit a pr at github\u00a0[pr| [URL] , may somebody have review?\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "98", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.format trims last delimiter if the delimiter is a white space\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi Alpesh, \n\n Thank you for your report. \n\n Are you available to provide a (failing) unit test along with a fix. You can use a patch file or a GitHub PR. \n\n Gary\n- Sure. I will have a patch ready soon."}
{"project_id": "Csv", "bug_id": "99", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat.format trims last delimiter if the delimiter is a white space\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi Alpesh, \n\n Thank you for your report. \n\n Are you available to provide a (failing) unit test along with a fix. You can use a patch file or a GitHub PR. \n\n Gary\n- Sure. I will have a patch ready soon."}
{"project_id": "Csv", "bug_id": "100", "source_type": "jira", "llm_input_text": "[Title]: Line number is not proper at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you provide a unit test to reproduce the problem please?\n- Please find the code and output below \n\n Code \n======= \npublic class TestCsv \n{ \n\tpublic static void main(String[] args) throws Exception \n\t{ \n\t\tString records = \"A,B,C,D\\r\\n\" \n\t\t\t\t+ \"a1,b1,c1,d1\\r\\n\" \n\t\t\t\t+ \"a2,b2,c2,d2\"; \n\n \t\tCSVParser parser = new CSVParser(new StringReader(records), CSVFormat.EXCEL.withHeader()); \n\t\tIterator&lt;CSVRecord&gt; recordIt = parser.iterator(); \n\n \t\twhile(recordIt.hasNext()) \n\t\t{\n\t\t\tSystem.out.println(parser.getCurrentLineNumber() + \" ==&gt; \" + recordIt.next());\n\t\t}\n\n \t\tparser.close(); \n\t} \n} \n\n Actual Output \n========== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n2 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ] \n\n Expected Output \n============== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n3 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ]\n- I have commit a pr at github\u00a0[pr| [URL] , may somebody have review?\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "101", "source_type": "jira", "llm_input_text": "[Title]: Line number is not proper at EOF\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Can you provide a unit test to reproduce the problem please?\n- Please find the code and output below \n\n Code \n======= \npublic class TestCsv \n{ \n\tpublic static void main(String[] args) throws Exception \n\t{ \n\t\tString records = \"A,B,C,D\\r\\n\" \n\t\t\t\t+ \"a1,b1,c1,d1\\r\\n\" \n\t\t\t\t+ \"a2,b2,c2,d2\"; \n\n \t\tCSVParser parser = new CSVParser(new StringReader(records), CSVFormat.EXCEL.withHeader()); \n\t\tIterator&lt;CSVRecord&gt; recordIt = parser.iterator(); \n\n \t\twhile(recordIt.hasNext()) \n\t\t{\n\t\t\tSystem.out.println(parser.getCurrentLineNumber() + \" ==&gt; \" + recordIt.next());\n\t\t}\n\n \t\tparser.close(); \n\t} \n} \n\n Actual Output \n========== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n2 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ] \n\n Expected Output \n============== \n2 ==&gt; CSVRecord [comment=null, mapping= \n{A=0, B=1, C=2, D=3}, recordNumber=1, values= &#91;a1, b1, c1, d1&#93; ] \n3 ==&gt; CSVRecord [comment=null, mapping={A=0, B=1, C=2, D=3}\n , recordNumber=2, values= &#91;a2, b2, c2, d2&#93; ]\n- I have commit a pr at github\u00a0[pr| [URL] , may somebody have review?\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "102", "source_type": "jira", "llm_input_text": "[Title]: Add test cases for withIgnoreSurroundingSpaces() and withTrim() #70\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Patches welcome\n- I prepared a patch. \nHow can I submit? \n\n base is: \n   trunk   \n URL: [URL]\nRepository Root: [URL]\nRepository UUID: 13f79535-47bb-0310-9956-ffa450edef68\nRevision: 1657615\nNode Kind: directory\nSchedule: normal\nLast Changed Author: britter\nLast Changed Rev: 1651287\nLast Changed Date: 2015-01-13 08:05:25 +0100 (Tue, 13 Jan 2015)\n- ... [Middle Discussions Snipped for Brevity] ...\n- just replace\u00a0 \n  \n \n.withIgnoreSurroundingSpaces( true )\n \n  \n  to  \n  \n \n.withTrim()\n \n  \n the testunit could past . so why dou we need a patch?\n- This is a problem of use, not a bug. \n\n I added test cases to illustrate the difference between withIgnoreSurroundingSpace() and withTrim() in PR #70 \n\n This should be resolved."}
{"project_id": "Csv", "bug_id": "103", "source_type": "jira", "llm_input_text": "[Title]: Add test cases for withIgnoreSurroundingSpaces() and withTrim() #70\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Patches welcome\n- I prepared a patch. \nHow can I submit? \n\n base is: \n   trunk   \n URL: [URL]\nRepository Root: [URL]\nRepository UUID: 13f79535-47bb-0310-9956-ffa450edef68\nRevision: 1657615\nNode Kind: directory\nSchedule: normal\nLast Changed Author: britter\nLast Changed Rev: 1651287\nLast Changed Date: 2015-01-13 08:05:25 +0100 (Tue, 13 Jan 2015)\n- ... [Middle Discussions Snipped for Brevity] ...\n- just replace\u00a0 \n  \n \n.withIgnoreSurroundingSpaces( true )\n \n  \n  to  \n  \n \n.withTrim()\n \n  \n the testunit could past . so why dou we need a patch?\n- This is a problem of use, not a bug. \n\n I added test cases to illustrate the difference between withIgnoreSurroundingSpace() and withTrim() in PR #70 \n\n This should be resolved."}
{"project_id": "Csv", "bug_id": "104", "source_type": "jira", "llm_input_text": "[Title]: Missing separator with \"print(object)\" followed by \"printRecord(Object[])\"\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi  michael@wyraz.de , \n\n May you please try with the current version 1.9 and report back? \n\n TY\n- Same with 1.9-SNAPSHOT. I created a testcase for the both scenarios, the array case fails as described: \n\n \u00a0 \n\n  [URL]\n\n (link edited)\n- ... [Middle Discussions Snipped for Brevity] ...\n- ggregory \u00a0After merging PR #157, the method  public void printRecord(final Appendable appendable, final Object... values)\u00a0   in  CSVFormat.java   is unused. I think we can remove that. \n\n  Let me know what you think.\n- amarlearning  \nWe cannot break binary compatibility."}
{"project_id": "Csv", "bug_id": "105", "source_type": "jira", "llm_input_text": "[Title]: Fix EOL checking for read array in ExtendedBufferedReader\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I currently don't understand the porposed change. I've asked the contributor to supply some unit tests."}
{"project_id": "Csv", "bug_id": "106", "source_type": "jira", "llm_input_text": "[Title]: Fix EOL checking for read array in ExtendedBufferedReader\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I currently don't understand the porposed change. I've asked the contributor to supply some unit tests."}
{"project_id": "Csv", "bug_id": "107", "source_type": "jira", "llm_input_text": "[Title]: Print from Reader with embedded quotes generates incorrect output\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "108", "source_type": "jira", "llm_input_text": "[Title]: CSV comments break CSVRecord#getCharacterPosition\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Please include the result of running the code in the description."}
{"project_id": "Csv", "bug_id": "109", "source_type": "jira", "llm_input_text": "[Title]: CSV comments break CSVRecord#getCharacterPosition\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Please include the result of running the code in the description."}
{"project_id": "Csv", "bug_id": "110", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord.values() accessor is package-private instead of public\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Incorrect, this method is used within the package.\n- ggregory \u00a0yes you are right there is one use in  CSVParser#createHeaders  (don't know why I didn't see it before). \n\n May I renew my request to make this accessor a public method ? \n\n Nowadays I must write:  var columns =\u00a0csvRecord.toList().toArray(new String &#91;0&#93; )  in order to pass the columns from the csvRecord into another domain oriented object of my own. It's not that copying is conceptually bad (immutability is a good thing), it's just that, in this case, it's a waste of time and space, and because reading csv records tends to live inside (large)\u00a0loops, time and space penalty quickly add up. \n\n One could still use  csvRecord.toList().toArray(new String &#91;0&#93; )  (or  System.arraycopy()   which is more efficient than  toList().toArray()  ) to make a  copy  of the columns in case the CsvRecord might be shared. \n\n What do you think ?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can you make the version 1.9.1 available on Maven central ?\n- Maven Central is updated when we go through our release process, which has not happened yet or has been planned. Until then you can point your POM to the Apache Snapshot Maven repository or build the project locally."}
{"project_id": "Csv", "bug_id": "111", "source_type": "jira", "llm_input_text": "[Title]: No Automatic-Module-Name prevents usage in JPMS projects without repacking the JAR\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "112", "source_type": "jira", "llm_input_text": "[Title]: No Automatic-Module-Name prevents usage in JPMS projects without repacking the JAR\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "113", "source_type": "jira", "llm_input_text": "[Title]: String delimiter (||) is not working as expected.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Failing test case : \n  \n \n\norg.apache.commons.csv.CSVParserTest#testParseWithDoublePipeDelimiter@Test\n\n     public  void testParseWithDoublePipeDelimiter()  throws  Exception {\n         final  Reader in =  new  StringReader( \"a||b||c||d||||f\" );\n        StringBuilder stringBuilder =  new  StringBuilder();\n         try  (CSVPrinter csvPrinter =  new  CSVPrinter(stringBuilder, CSVFormat.EXCEL);\n             CSVParser csvParser = CSVParser.parse(in, CSVFormat.Builder.create().setDelimiter( \"||\" ).build())) {\n             for  (CSVRecord csvRecord : csvParser) {\n                 for  ( int  i = 0; i &lt; csvRecord.size(); i++) {\n                    csvPrinter.print(csvRecord.get(i));\n                }\n                assertEquals( \"a,b,c,d,,f\" , stringBuilder.toString());\n            }\n        }\n    }\n- In below line in Lexer.java, the isDelimiter() unintentionally advance the buffer pointer\u00a0 and \"eat\" the first \"|\" when it comes to the \"b\" in \"|b|\" (lastChar is \"|\", nextChar is also \"|\", make it \"||\"). So \"a||bc||d \" doesn't fail (lastChar is \"|\", but next char is \"c\"), neither if the delimiter is two different char (e.g. |!). \n\n The checking is used to detect the last empty column (e.g. in \"a,b,\") \n  \n \n // did we reach eof during the last iteration already ? EOF\n  if  (isEndOfFile(lastChar) || !isDelimiter(lastChar) &amp;&amp; isEndOfFile(c)) {\n- ... [Middle Discussions Snipped for Brevity] ...\n- ggregory  Can we know when 1.10.0 version will be officially released?\n- Hi. ssapa@snaplogic.com \u00a0 \n\n Hopefully in a month or so."}
{"project_id": "Csv", "bug_id": "114", "source_type": "jira", "llm_input_text": "[Title]: String delimiter (||) is not working as expected.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Failing test case : \n  \n \n\norg.apache.commons.csv.CSVParserTest#testParseWithDoublePipeDelimiter@Test\n\n     public  void testParseWithDoublePipeDelimiter()  throws  Exception {\n         final  Reader in =  new  StringReader( \"a||b||c||d||||f\" );\n        StringBuilder stringBuilder =  new  StringBuilder();\n         try  (CSVPrinter csvPrinter =  new  CSVPrinter(stringBuilder, CSVFormat.EXCEL);\n             CSVParser csvParser = CSVParser.parse(in, CSVFormat.Builder.create().setDelimiter( \"||\" ).build())) {\n             for  (CSVRecord csvRecord : csvParser) {\n                 for  ( int  i = 0; i &lt; csvRecord.size(); i++) {\n                    csvPrinter.print(csvRecord.get(i));\n                }\n                assertEquals( \"a,b,c,d,,f\" , stringBuilder.toString());\n            }\n        }\n    }\n- In below line in Lexer.java, the isDelimiter() unintentionally advance the buffer pointer\u00a0 and \"eat\" the first \"|\" when it comes to the \"b\" in \"|b|\" (lastChar is \"|\", nextChar is also \"|\", make it \"||\"). So \"a||bc||d \" doesn't fail (lastChar is \"|\", but next char is \"c\"), neither if the delimiter is two different char (e.g. |!). \n\n The checking is used to detect the last empty column (e.g. in \"a,b,\") \n  \n \n // did we reach eof during the last iteration already ? EOF\n  if  (isEndOfFile(lastChar) || !isDelimiter(lastChar) &amp;&amp; isEndOfFile(c)) {\n- ... [Middle Discussions Snipped for Brevity] ...\n- ggregory  Can we know when 1.10.0 version will be officially released?\n- Hi. ssapa@snaplogic.com \u00a0 \n\n Hopefully in a month or so."}
{"project_id": "Csv", "bug_id": "115", "source_type": "jira", "llm_input_text": "[Title]: Duplicate empty header names are allowed even with `.withAllowDuplicateHeaderNames(false)`\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- It looks to me like this is intentional.  \n\n  [URL]\n\n  \n \n // Note: This will always allow a duplicate header  if  the header is empty \n \n  \n\n A possible reason for this could be the following: \n\n \n  \n \n A \n B \n &nbsp; \n &nbsp; \n C \n D \n \n \n 1 \n 2 \n &nbsp; \n &nbsp; \n 3 \n 4 \n \n  \n \n\n I don't think it would be user-friendly to make this a failure, but it has duplicate column names if we consider the empty headers which are left for formatting. Granted I do think it'd be silly essentially store a bunch of empty cells as well. \n\n &#8212; \n\n I can think of a couple of ways this issue could be solved: \n \n\t Simply count empty header names towards duplicates, but documents like above that use gaps for formatting purposes will have to enable withAllowDuplicateHeaderNames, I don't think this is ideal. \n\t Check the entire column when parsing the document, and if it contains values in a non-header row, then it counts towards the duplicate. This would avoid empty headers because for formatting, but this sounds like it could get heavy, though. \n\t Create a new option which allows empty duplicates, but I don't think this option makes much sense as it's too similar and conflicts with withAllowDuplicateHeaderNames. \n\t Change the withAllowDuplicateHeaderNames boolean to a withDuplicateHeaderRule enum with the values \"ALLOW_ALL_DUPLICATES\", \"ALLOW_EMPTY_DUPLICATES\", \"DISALLOW_DUPLICATES\". \n \n\n I was going to PR #1, but I don't think it's a good solution. \n\n If a maintainer could say what they th\n...[Text Truncated]...\nof CSVParser when  allowMissingColumnNames=true and ignoreHeaderCase=false . \n\n A header of  &#91;&quot;A&quot;, &quot;a&quot;&#93;  with  ignoreHeaderCase=true  and  duplicateHeaderMode=DISALLOW  will not raise an exception in the CSVFormat. \n   Behavioural Compatibility \n\n The  DuplicateHeaderMode  enum replaces the flag  allowDuplicateHeaders . For behavioural compatibility  allowDuplicateHeaders=false  will still allow duplicate empty headers: \n \n  \n \n allowDuplicateHeaders (deprecated) \n DuplicateHeaderMode \n \n \n true \n ALLOW_ALL \n \n \n false \n ALLOW_EMPTY \n \n \n \u00a0 \n DISALLOW \n \n  \n \n\n This behaviour to allow duplicate empty headers dates back to CSV v1.0. To control empty headers the flag  ignoreEmptyHeaders  was added at the same time (see   CSV-121  ). \n\n Supporting this legacy behaviour means that CSVFormat validation, which does not use the  ignoreEmptyHeaders  flag, must use  DuplicateHeaderMode.DISALLOW  instead of  allowDuplicateHeaders=false  to check for duplicate empty headers. Validation of any missing headers is not currently possible in CSVFormat. \n   Summary \n \n\t Missing column headers are any of: null; \"\"; or blank strings. \n\t All missing column headers are considered the same for duplicate checks \n\t CSVParser must enable  allowMissingColumnNames  to be able to use the  DuplicateHeaderMode.ALLOW_EMPTY  behaviour. \n\t CSVParser respects\u00a0 the  ignoreHeaderCase  flag when checking for duplicates. \n \n\n All current behaviour is tested in  CSVDuplicateHeaderTest ."}
{"project_id": "Csv", "bug_id": "116", "source_type": "jira", "llm_input_text": "[Title]: Duplicate empty header names are allowed even with `.withAllowDuplicateHeaderNames(false)`\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- It looks to me like this is intentional.  \n\n  [URL]\n\n  \n \n // Note: This will always allow a duplicate header  if  the header is empty \n \n  \n\n A possible reason for this could be the following: \n\n \n  \n \n A \n B \n &nbsp; \n &nbsp; \n C \n D \n \n \n 1 \n 2 \n &nbsp; \n &nbsp; \n 3 \n 4 \n \n  \n \n\n I don't think it would be user-friendly to make this a failure, but it has duplicate column names if we consider the empty headers which are left for formatting. Granted I do think it'd be silly essentially store a bunch of empty cells as well. \n\n &#8212; \n\n I can think of a couple of ways this issue could be solved: \n \n\t Simply count empty header names towards duplicates, but documents like above that use gaps for formatting purposes will have to enable withAllowDuplicateHeaderNames, I don't think this is ideal. \n\t Check the entire column when parsing the document, and if it contains values in a non-header row, then it counts towards the duplicate. This would avoid empty headers because for formatting, but this sounds like it could get heavy, though. \n\t Create a new option which allows empty duplicates, but I don't think this option makes much sense as it's too similar and conflicts with withAllowDuplicateHeaderNames. \n\t Change the withAllowDuplicateHeaderNames boolean to a withDuplicateHeaderRule enum with the values \"ALLOW_ALL_DUPLICATES\", \"ALLOW_EMPTY_DUPLICATES\", \"DISALLOW_DUPLICATES\". \n \n\n I was going to PR #1, but I don't think it's a good solution. \n\n If a maintainer could say what they th\n...[Text Truncated]...\nof CSVParser when  allowMissingColumnNames=true and ignoreHeaderCase=false . \n\n A header of  &#91;&quot;A&quot;, &quot;a&quot;&#93;  with  ignoreHeaderCase=true  and  duplicateHeaderMode=DISALLOW  will not raise an exception in the CSVFormat. \n   Behavioural Compatibility \n\n The  DuplicateHeaderMode  enum replaces the flag  allowDuplicateHeaders . For behavioural compatibility  allowDuplicateHeaders=false  will still allow duplicate empty headers: \n \n  \n \n allowDuplicateHeaders (deprecated) \n DuplicateHeaderMode \n \n \n true \n ALLOW_ALL \n \n \n false \n ALLOW_EMPTY \n \n \n \u00a0 \n DISALLOW \n \n  \n \n\n This behaviour to allow duplicate empty headers dates back to CSV v1.0. To control empty headers the flag  ignoreEmptyHeaders  was added at the same time (see   CSV-121  ). \n\n Supporting this legacy behaviour means that CSVFormat validation, which does not use the  ignoreEmptyHeaders  flag, must use  DuplicateHeaderMode.DISALLOW  instead of  allowDuplicateHeaders=false  to check for duplicate empty headers. Validation of any missing headers is not currently possible in CSVFormat. \n   Summary \n \n\t Missing column headers are any of: null; \"\"; or blank strings. \n\t All missing column headers are considered the same for duplicate checks \n\t CSVParser must enable  allowMissingColumnNames  to be able to use the  DuplicateHeaderMode.ALLOW_EMPTY  behaviour. \n\t CSVParser respects\u00a0 the  ignoreHeaderCase  flag when checking for duplicates. \n \n\n All current behaviour is tested in  CSVDuplicateHeaderTest ."}
{"project_id": "Csv", "bug_id": "117", "source_type": "jira", "llm_input_text": "[Title]: CSVRecord.get(Enum) should use Enum.name() instead of Enum.toString()\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Thank you for your report. Feel free to provide PR on GitHub with a unit test.\n- In git master, please verify and close."}
{"project_id": "Csv", "bug_id": "118", "source_type": "jira", "llm_input_text": "[Title]: Produced CSV using PostgreSQL format cannot be read\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In the Lexer class, method\u00a0parseEncapsulatedToken, I did modification as following \n  \n \n while  ( true ) {\n  c = reader.read();            \n  \n   //  if  (isEscape(c)) { // commented out  this  line\n    if  (isEscape(c) &amp;&amp; !isQuoteChar(c)) {  // inserted  this  line.  \n \n  \n If I understood the logic correctly, that method is invoked only for those cases when a \"cell\" value starts with the QUOTE character. This means that the ESCAPE character won't be encountered for escaping the DELIMITER character. \n  \n \n@Test\n public  void testQuotedString()  throws  IOException {\n    /*\n     * file:  \"a\" , \"b\"  \"b\" , \"c\" \n     */\n     final   String  code =  \"\\\" a\\ \",\\\" b\\ \"\\\" b\\ \",\\\" c\\\"\";\n     final  CSVFormat format = CSVFormat.POSTGRESQL_CSV.withIgnoreEmptyLines( false );\n    \n     try  ( final  Lexer parser = createLexer(code, format)) {\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"a\" ));\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"b\\\" b\"));\n        assertThat(parser.nextToken( new  Token()), matches(EOF,  \"c\" ));\n    }\n}\n- The best would be to provide a PR on GitHub.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We updated git master recently that could affect this, would you check against git master and/or  [URL] ?\n- I tested in\u00a0psql 14.5 Homebrew in Mac M1. \n\n for  CSVFormat.POSTGRESQL_CSV , special characters are not escaped. \nfor  CSVFormat.POSTGRESQL_TEXT , values are not quoted. \n  \n \n create   table  COMMONS_CSV_PSQL_TEST (ID  INTEGER , COL1  VARCHAR , COL2  VARCHAR , COL3  VARCHAR , COL4  VARCHAR );\n insert   into  COMMONS_CSV_PSQL_TEST  select  1,  'abc' ,  'test line 1'  || chr(10) ||  'test line 2' ,  null , '';\n insert   into  COMMONS_CSV_PSQL_TEST  select  2,  'xyz' ,  '\\b:'  || chr(8) ||  ' \\n:'  || chr(10) ||  ' \\r:'  || chr(13),  ' a ' ,  'b' ;\n insert   into  COMMONS_CSV_PSQL_TEST  values  (3,  ' a ' ,  'b, c ,d' ,  ' \"quoted\" ' ,  'e' );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql. csv '   with  (FORMAT  CSV );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql.tsv' ; \n  \n  \n \ncat /tmp/psql.csv\n1,abc,\"test line 1\ntest line 2 \",,\" \"\n2,xyz,\"\\b:^H \\n:\n\\r:^M\",a,b\n3,a, \"b,c,d\" , \"\"\"quoted\" \"\",e \n  \n  \n \ncat /tmp/psql.tsv\n1 \u00a0 \u00a0abc \u00a0 \u00a0test line 1\\ntest line 2 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \\N\n2 \u00a0 \u00a0xyz \u00a0 \u00a0\\\\b:\\b \\\\n:\\n \\\\r:\\r \u00a0 \u00a0 \u00a0 a \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 b\n3 \u00a0 \u00a0a \u00a0 \u00a0 \u00a0b,c,d \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"quoted\"  \u00a0 \u00a0e"}
{"project_id": "Csv", "bug_id": "119", "source_type": "jira", "llm_input_text": "[Title]: Produced CSV using PostgreSQL format cannot be read\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In the Lexer class, method\u00a0parseEncapsulatedToken, I did modification as following \n  \n \n while  ( true ) {\n  c = reader.read();            \n  \n   //  if  (isEscape(c)) { // commented out  this  line\n    if  (isEscape(c) &amp;&amp; !isQuoteChar(c)) {  // inserted  this  line.  \n \n  \n If I understood the logic correctly, that method is invoked only for those cases when a \"cell\" value starts with the QUOTE character. This means that the ESCAPE character won't be encountered for escaping the DELIMITER character. \n  \n \n@Test\n public  void testQuotedString()  throws  IOException {\n    /*\n     * file:  \"a\" , \"b\"  \"b\" , \"c\" \n     */\n     final   String  code =  \"\\\" a\\ \",\\\" b\\ \"\\\" b\\ \",\\\" c\\\"\";\n     final  CSVFormat format = CSVFormat.POSTGRESQL_CSV.withIgnoreEmptyLines( false );\n    \n     try  ( final  Lexer parser = createLexer(code, format)) {\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"a\" ));\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"b\\\" b\"));\n        assertThat(parser.nextToken( new  Token()), matches(EOF,  \"c\" ));\n    }\n}\n- The best would be to provide a PR on GitHub.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We updated git master recently that could affect this, would you check against git master and/or  [URL] ?\n- I tested in\u00a0psql 14.5 Homebrew in Mac M1. \n\n for  CSVFormat.POSTGRESQL_CSV , special characters are not escaped. \nfor  CSVFormat.POSTGRESQL_TEXT , values are not quoted. \n  \n \n create   table  COMMONS_CSV_PSQL_TEST (ID  INTEGER , COL1  VARCHAR , COL2  VARCHAR , COL3  VARCHAR , COL4  VARCHAR );\n insert   into  COMMONS_CSV_PSQL_TEST  select  1,  'abc' ,  'test line 1'  || chr(10) ||  'test line 2' ,  null , '';\n insert   into  COMMONS_CSV_PSQL_TEST  select  2,  'xyz' ,  '\\b:'  || chr(8) ||  ' \\n:'  || chr(10) ||  ' \\r:'  || chr(13),  ' a ' ,  'b' ;\n insert   into  COMMONS_CSV_PSQL_TEST  values  (3,  ' a ' ,  'b, c ,d' ,  ' \"quoted\" ' ,  'e' );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql. csv '   with  (FORMAT  CSV );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql.tsv' ; \n  \n  \n \ncat /tmp/psql.csv\n1,abc,\"test line 1\ntest line 2 \",,\" \"\n2,xyz,\"\\b:^H \\n:\n\\r:^M\",a,b\n3,a, \"b,c,d\" , \"\"\"quoted\" \"\",e \n  \n  \n \ncat /tmp/psql.tsv\n1 \u00a0 \u00a0abc \u00a0 \u00a0test line 1\\ntest line 2 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \\N\n2 \u00a0 \u00a0xyz \u00a0 \u00a0\\\\b:\\b \\\\n:\\n \\\\r:\\r \u00a0 \u00a0 \u00a0 a \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 b\n3 \u00a0 \u00a0a \u00a0 \u00a0 \u00a0b,c,d \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"quoted\"  \u00a0 \u00a0e"}
{"project_id": "Csv", "bug_id": "120", "source_type": "jira", "llm_input_text": "[Title]: CSVParser.iterator() does not iterate over result set as expected.\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi  dguiney4 \u00a0 \n\n As you can read in the Javadoc for  CSVParser.getRecords() : \n  Parses the CSV input according to the given format and returns the content as a list of \nCSVRecord CSVRecords.  \n \u00a0 \nObviously, the only way to do that is to read the whole input. \n\n If you look at 1.9.0-SNAPSHOT ( [URL] or git master, you'll find: \n  \n \n    /**\n     * Returns a sequential {@code Stream} with  this  collection as its source.\n     *\n     * @ return  a sequential {@code Stream} with  this  collection as its source.\n     * @since 1.9.0\n     */\n     public  Stream&lt;CSVRecord&gt; stream() {\n         return  StreamSupport.stream(Spliterators.spliteratorUnknownSize(iterator(), Spliterator.ORDERED),  false );\n    }\n \n  \n Which works and is tested in  CSVParserTest.testStream() .\n- I think this is not a bug that should be fixed in the code, but maybe this kind of usage could be warned about in the docs? \n\n As I understand it the issue is that the parser gets closed as control exits the try-with-resources block, hence the iterator and the stream that wraps it will not return any more records. I also made this mistake, and I felt it was not immediately obvious why my code was wrong.\n- ... [Middle Discussions Snipped for Brevity] ...\n- OK I've added PR  [URL]\n- Javadoc updated in 1.10.0."}
{"project_id": "Csv", "bug_id": "121", "source_type": "jira", "llm_input_text": "[Title]: Produced CSV using PostgreSQL format cannot be read\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- In the Lexer class, method\u00a0parseEncapsulatedToken, I did modification as following \n  \n \n while  ( true ) {\n  c = reader.read();            \n  \n   //  if  (isEscape(c)) { // commented out  this  line\n    if  (isEscape(c) &amp;&amp; !isQuoteChar(c)) {  // inserted  this  line.  \n \n  \n If I understood the logic correctly, that method is invoked only for those cases when a \"cell\" value starts with the QUOTE character. This means that the ESCAPE character won't be encountered for escaping the DELIMITER character. \n  \n \n@Test\n public  void testQuotedString()  throws  IOException {\n    /*\n     * file:  \"a\" , \"b\"  \"b\" , \"c\" \n     */\n     final   String  code =  \"\\\" a\\ \",\\\" b\\ \"\\\" b\\ \",\\\" c\\\"\";\n     final  CSVFormat format = CSVFormat.POSTGRESQL_CSV.withIgnoreEmptyLines( false );\n    \n     try  ( final  Lexer parser = createLexer(code, format)) {\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"a\" ));\n        assertThat(parser.nextToken( new  Token()), matches(TOKEN,  \"b\\\" b\"));\n        assertThat(parser.nextToken( new  Token()), matches(EOF,  \"c\" ));\n    }\n}\n- The best would be to provide a PR on GitHub.\n- ... [Middle Discussions Snipped for Brevity] ...\n- We updated git master recently that could affect this, would you check against git master and/or  [URL] ?\n- I tested in\u00a0psql 14.5 Homebrew in Mac M1. \n\n for  CSVFormat.POSTGRESQL_CSV , special characters are not escaped. \nfor  CSVFormat.POSTGRESQL_TEXT , values are not quoted. \n  \n \n create   table  COMMONS_CSV_PSQL_TEST (ID  INTEGER , COL1  VARCHAR , COL2  VARCHAR , COL3  VARCHAR , COL4  VARCHAR );\n insert   into  COMMONS_CSV_PSQL_TEST  select  1,  'abc' ,  'test line 1'  || chr(10) ||  'test line 2' ,  null , '';\n insert   into  COMMONS_CSV_PSQL_TEST  select  2,  'xyz' ,  '\\b:'  || chr(8) ||  ' \\n:'  || chr(10) ||  ' \\r:'  || chr(13),  ' a ' ,  'b' ;\n insert   into  COMMONS_CSV_PSQL_TEST  values  (3,  ' a ' ,  'b, c ,d' ,  ' \"quoted\" ' ,  'e' );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql. csv '   with  (FORMAT  CSV );\n copy  COMMONS_CSV_PSQL_TEST  to   '/tmp/psql.tsv' ; \n  \n  \n \ncat /tmp/psql.csv\n1,abc,\"test line 1\ntest line 2 \",,\" \"\n2,xyz,\"\\b:^H \\n:\n\\r:^M\",a,b\n3,a, \"b,c,d\" , \"\"\"quoted\" \"\",e \n  \n  \n \ncat /tmp/psql.tsv\n1 \u00a0 \u00a0abc \u00a0 \u00a0test line 1\\ntest line 2 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \\N\n2 \u00a0 \u00a0xyz \u00a0 \u00a0\\\\b:\\b \\\\n:\\n \\\\r:\\r \u00a0 \u00a0 \u00a0 a \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 b\n3 \u00a0 \u00a0a \u00a0 \u00a0 \u00a0b,c,d \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"quoted\"  \u00a0 \u00a0e"}
{"project_id": "Csv", "bug_id": "122", "source_type": "jira", "llm_input_text": "[Title]: Duplicate empty header names are allowed even with `.withAllowDuplicateHeaderNames(false)`\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- It looks to me like this is intentional.  \n\n  [URL]\n\n  \n \n // Note: This will always allow a duplicate header  if  the header is empty \n \n  \n\n A possible reason for this could be the following: \n\n \n  \n \n A \n B \n &nbsp; \n &nbsp; \n C \n D \n \n \n 1 \n 2 \n &nbsp; \n &nbsp; \n 3 \n 4 \n \n  \n \n\n I don't think it would be user-friendly to make this a failure, but it has duplicate column names if we consider the empty headers which are left for formatting. Granted I do think it'd be silly essentially store a bunch of empty cells as well. \n\n &#8212; \n\n I can think of a couple of ways this issue could be solved: \n \n\t Simply count empty header names towards duplicates, but documents like above that use gaps for formatting purposes will have to enable withAllowDuplicateHeaderNames, I don't think this is ideal. \n\t Check the entire column when parsing the document, and if it contains values in a non-header row, then it counts towards the duplicate. This would avoid empty headers because for formatting, but this sounds like it could get heavy, though. \n\t Create a new option which allows empty duplicates, but I don't think this option makes much sense as it's too similar and conflicts with withAllowDuplicateHeaderNames. \n\t Change the withAllowDuplicateHeaderNames boolean to a withDuplicateHeaderRule enum with the values \"ALLOW_ALL_DUPLICATES\", \"ALLOW_EMPTY_DUPLICATES\", \"DISALLOW_DUPLICATES\". \n \n\n I was going to PR #1, but I don't think it's a good solution. \n\n If a maintainer could say what they th\n...[Text Truncated]...\nof CSVParser when  allowMissingColumnNames=true and ignoreHeaderCase=false . \n\n A header of  &#91;&quot;A&quot;, &quot;a&quot;&#93;  with  ignoreHeaderCase=true  and  duplicateHeaderMode=DISALLOW  will not raise an exception in the CSVFormat. \n   Behavioural Compatibility \n\n The  DuplicateHeaderMode  enum replaces the flag  allowDuplicateHeaders . For behavioural compatibility  allowDuplicateHeaders=false  will still allow duplicate empty headers: \n \n  \n \n allowDuplicateHeaders (deprecated) \n DuplicateHeaderMode \n \n \n true \n ALLOW_ALL \n \n \n false \n ALLOW_EMPTY \n \n \n \u00a0 \n DISALLOW \n \n  \n \n\n This behaviour to allow duplicate empty headers dates back to CSV v1.0. To control empty headers the flag  ignoreEmptyHeaders  was added at the same time (see   CSV-121  ). \n\n Supporting this legacy behaviour means that CSVFormat validation, which does not use the  ignoreEmptyHeaders  flag, must use  DuplicateHeaderMode.DISALLOW  instead of  allowDuplicateHeaders=false  to check for duplicate empty headers. Validation of any missing headers is not currently possible in CSVFormat. \n   Summary \n \n\t Missing column headers are any of: null; \"\"; or blank strings. \n\t All missing column headers are considered the same for duplicate checks \n\t CSVParser must enable  allowMissingColumnNames  to be able to use the  DuplicateHeaderMode.ALLOW_EMPTY  behaviour. \n\t CSVParser respects\u00a0 the  ignoreHeaderCase  flag when checking for duplicates. \n \n\n All current behaviour is tested in  CSVDuplicateHeaderTest ."}
{"project_id": "Csv", "bug_id": "123", "source_type": "jira", "llm_input_text": "[Title]: The User Guide examples use deprecated methods\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "124", "source_type": "jira", "llm_input_text": "[Title]: The User Guide examples use deprecated methods\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "125", "source_type": "jira", "llm_input_text": "[Title]: The User Guide examples use deprecated methods\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "126", "source_type": "jira", "llm_input_text": "[Title]: The User Guide examples use deprecated methods\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "127", "source_type": "jira", "llm_input_text": "[Title]: The User Guide examples use deprecated methods\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "128", "source_type": "jira", "llm_input_text": "[Title]: OutOfMemory for very long rows despite using column value of type Reader\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hello  cfeuersa \u00a0 \n\n This issue is fixed in git master and snapshot builds in  [URL]\n\n Please let us know how this works for your use case.\n- Wow, I am impressed! My tests passed without any OOMs! Thank you for the fast and precise work! \n\n A side-note which is not directly related to my issue: I also looked into the code and stumbled over CSVFormat.printWithEscapes \u2013 it appears to have the very same weakness (judging from a glance at the source code). Do you think your solution might fit here as well?\n- Thank you  cfeuersa . \n\n The reader version of  printWithEscapes  also uses a temporary  StringBuilder  so it could be improved. Feel free to provide a PR on GitHub"}
{"project_id": "Csv", "bug_id": "129", "source_type": "jira", "llm_input_text": "[Title]: CSVFormat does not support explicit \" as escape char\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This is the exception thrown while parsing with \" as escape character: \n\n Caused by: java.io.IOException: (startline 3) EOF reached before encapsulated token finished \n\u00a0 \u00a0 at org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:371) \n\u00a0 \u00a0 at org.apache.commons.csv.Lexer.nextToken(Lexer.java:285) \n\u00a0 \u00a0 at org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:701) \n\u00a0 \u00a0 at org.apache.commons.csv.CSVParser$CSVRecordIterator.getNextRecord(CSVParser.java:146) \n\u00a0 \u00a0 ... 3 more\n- Added a test reproducing the issue.\n- Even the input string (\"a\") will cause the exception as Lexer.java treats the second (\") as an escape char and read the unescaped \\r, and then complain for missing the ending-quote (\") \n\n E.g. \n  \n \nCSVFormat.Builder.create().setEscape( ' \"' ).build().parse( new  StringReader(\" \\ \"a\\\" \")).getRecords(); \n  \n I think you cannot use the quote char as escape char. commons-cvs already implement the RFC part that the quote char is escaped by preceding quote char, but not the escape char \n\n E.g. \n  \n \n System .out.println( \"1 \"  + CSVFormat.Builder.create().build().parse( new  StringReader( \"\\\" a\\\"\")).getRecords().get(0).get(0));\n System .out.println( \"2 \"  + CSVFormat.Builder.create().build().parse( new  StringReader( \"\\\" \\ \"\\\" a\\ \"\\\" \\\"\")).getRecords().get(0).get(0));\n System .out.println( \"3 \"  + CSVFormat.Builder.create().setQuote( '|' ).build().parse( new  StringReader( \"|a|\" )).getRecords().get(0).get(0));\n System .out.println( \"4 \"  + CSVFormat.Builder.create().setQuote( '|' ).build().parse( new  StringReader( \"|||a|||\" )).getRecords().get(0).get(0));\n \n  \n Output \n  \n \n1 a\n2  \"a\" \n3 a\n4 |a|\n- I added JiraCsv294Test to git master and it is green, so this has been fixed since 1.9.0."}
{"project_id": "Csv", "bug_id": "130", "source_type": "jira", "llm_input_text": "[Title]: Escaping is not disableable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I don't understand the proposed change. Can you provide an SVN diff? A JUnit test showing the problem would also be nice\n- As requested a patch containing a unit test and the required fix. You may guess that the test looks like containing an encoding problem. You're right, but the lexer should survive  that.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This seems to be about parsing non-characters like \\ufffe which feels like a garbage-in problem.\n- In git master and snapshot builds  [URL]"}
{"project_id": "Csv", "bug_id": "131", "source_type": "jira", "llm_input_text": "[Title]: Escaping is not disableable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I don't understand the proposed change. Can you provide an SVN diff? A JUnit test showing the problem would also be nice\n- As requested a patch containing a unit test and the required fix. You may guess that the test looks like containing an encoding problem. You're right, but the lexer should survive  that.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This seems to be about parsing non-characters like \\ufffe which feels like a garbage-in problem.\n- In git master and snapshot builds  [URL]"}
{"project_id": "Csv", "bug_id": "132", "source_type": "jira", "llm_input_text": "[Title]: Escaping is not disableable\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- I don't understand the proposed change. Can you provide an SVN diff? A JUnit test showing the problem would also be nice\n- As requested a patch containing a unit test and the required fix. You may guess that the test looks like containing an encoding problem. You're right, but the lexer should survive  that.\n- ... [Middle Discussions Snipped for Brevity] ...\n- This seems to be about parsing non-characters like \\ufffe which feels like a garbage-in problem.\n- In git master and snapshot builds  [URL]"}
{"project_id": "Csv", "bug_id": "133", "source_type": "jira", "llm_input_text": "[Title]: Missing OSGi Import-Package versions in Manifest can make commons-csv unusable in OSGi environments\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi  Adhip  \n\n Feel free to create a PR and I'll be happy to review it."}
{"project_id": "Csv", "bug_id": "134", "source_type": "jira", "llm_input_text": "[Title]: Missing OSGi Import-Package versions in Manifest can make commons-csv unusable in OSGi environments\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Hi  Adhip  \n\n Feel free to create a PR and I'll be happy to review it."}
{"project_id": "Csv", "bug_id": "135", "source_type": "jira", "llm_input_text": "[Title]: Release history link changed from changes-report.html to changes.html\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "136", "source_type": "jira", "llm_input_text": "[Title]: Release history link changed from changes-report.html to changes.html\n[Symptom]:\nThis file is an XML representation of an issue\n"}
{"project_id": "Csv", "bug_id": "137", "source_type": "jira", "llm_input_text": "[Title]: CSVPrinter.printRecord(Stream) hangs if given a parallel stream\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- tupari \u00a0 \n\n Thank you for your report. \n\n The deadlock occurs because  CSVPrinter.print(Object)  is synchronized and the parallel stream uses the fork-join framework. \n\n Please see  JiraCsv318Test . \n\n I'll need to think about this one some more...\n- tupari  \n\n This issue is now fixed in git master and snapshot builds in  [URL]\n\n Please test your use case and report back here. \n\n TY!\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello  tupari  \n\n The topic was one of many in a long-form video, from JavaOne 2025, or specifically for the Java 24 release (or 25 WIP), or even maybe a Devoxx video. I spent 15 minutes poking around but could not find it, sorry.\n- Found it:  [URL] which is included in Java 24.  Of course the problem for library authors is that since they have to support Java versions 21-23 they'll still have to get rid of their synchronized usages until Java 21 is EOL."}
{"project_id": "Csv", "bug_id": "138", "source_type": "jira", "llm_input_text": "[Title]: CSVPrinter.printRecord(Stream) hangs if given a parallel stream\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- tupari \u00a0 \n\n Thank you for your report. \n\n The deadlock occurs because  CSVPrinter.print(Object)  is synchronized and the parallel stream uses the fork-join framework. \n\n Please see  JiraCsv318Test . \n\n I'll need to think about this one some more...\n- tupari  \n\n This issue is now fixed in git master and snapshot builds in  [URL]\n\n Please test your use case and report back here. \n\n TY!\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello  tupari  \n\n The topic was one of many in a long-form video, from JavaOne 2025, or specifically for the Java 24 release (or 25 WIP), or even maybe a Devoxx video. I spent 15 minutes poking around but could not find it, sorry.\n- Found it:  [URL] which is included in Java 24.  Of course the problem for library authors is that since they have to support Java versions 21-23 they'll still have to get rid of their synchronized usages until Java 21 is EOL."}
{"project_id": "Csv", "bug_id": "139", "source_type": "jira", "llm_input_text": "[Title]: CSVPrinter.printRecord(Stream) hangs if given a parallel stream\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- tupari \u00a0 \n\n Thank you for your report. \n\n The deadlock occurs because  CSVPrinter.print(Object)  is synchronized and the parallel stream uses the fork-join framework. \n\n Please see  JiraCsv318Test . \n\n I'll need to think about this one some more...\n- tupari  \n\n This issue is now fixed in git master and snapshot builds in  [URL]\n\n Please test your use case and report back here. \n\n TY!\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello  tupari  \n\n The topic was one of many in a long-form video, from JavaOne 2025, or specifically for the Java 24 release (or 25 WIP), or even maybe a Devoxx video. I spent 15 minutes poking around but could not find it, sorry.\n- Found it:  [URL] which is included in Java 24.  Of course the problem for library authors is that since they have to support Java versions 21-23 they'll still have to get rid of their synchronized usages until Java 21 is EOL."}
{"project_id": "Csv", "bug_id": "140", "source_type": "jira", "llm_input_text": "[Title]: POSTGRESQL_CSV cannot parse correctly (null vs zero-length string)\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- Not quite, see  [URL]\nAn empty string is not the same as a  null .\n- Not quite, see  [URL]\n An empty string is not the same as a  null .  \n Exactly! And this is essentially what this ticket is about. Not sure I understand the comment.   \n\n The  POSTGRESQL_CSV  format cannot properly distinguish between empty string and null while parsing. So it gets it wrong. The reason why  POSTGRESQL_CSV  format can't is not due as much to the format itself, but to an underlying deficiency in the Parser which is proposed fixed in  PR51  /  CSV-253 . \n\n Please suggest how to proceed. I'll be happy to do more work if required or change stuff in PR51or whatever. \n\n Thx.\n- Hello  lbruun \u00a0 \n\n Please test git master or  [URL] this area has recently changed for   CSV-290   with  [URL]"}
{"project_id": "Csv", "bug_id": "141", "source_type": "jira", "llm_input_text": "[Title]: Updating from 1.6 to 1.7 breaks a header line with a missing header name\n[Symptom]:\nThis file is an XML representation of an issue\n\n[Context/Logs]:\n- This example is obtuse to me; why do you write: \n  \n \n \",\" .charAt(0);\n \n  \n instead of \n  \n \n 'c' \n \n  \n ? \n Same for the obfuscation of building the reader. Are we to conclude that the whole input for your data file is: \n  \n ,\n \n  \n Which is seems meaningless are a header record. \n\n What am I missing?\n- I don't think that is a problem, after tracing the code in CSVParser.java linenum 498 as below .The Parser does not think emptystring is a\u00a0meaningful header \n  \n \n //\u4ee3\u7801\u5360\u4f4d\u7b26\n  final   boolean  emptyHeader = header ==  null  || header.trim().isEmpty();\n if  (emptyHeader &amp;&amp; ! this .format.getAllowMissingColumnNames()) {\n     throw   new  IllegalArgumentException(\n         \"A header name is missing in \"  + Arrays.toString(headerRecord));\n}\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think that the commons-csv should not be opinionated concerning the question if an empty header makes sense or not. It should parse it (if the structure is legit csv) and leave this decision to the user. \n\n \u00a0 \n\n It's a common pattern to have an empty header for the first column containing the row number/index. E.g. see official examples such as\u00a0 [URL]\n- After a second look at this issue, I think there should probably be a way to configure a CSVFormat such that this example at least doesn't throw an exception. \n\n But, if you have two columns with the same name, or two column names missing, that would cause undefined results for  CSVRecord.get(String) , which is bad IMO, and  CSVRecord.get(int)  would still be OK. \n\n Perhaps throwing an exception could be changed from the current fail-fast to delegating it to\u00a0 CSVRecord.get(String) . I don't think we want to allow for undefined results. \n\n ATM, I do not think we should add an option to make fail-fast vs. not vs.  CSVRecord.get(String)  throws vs.  CSVRecord.get(String)  doesn't throw. \n\n Thoughts?"}
{"project_id": "Electron", "bug_id": "1", "source_type": "github", "llm_input_text": "[Title]: Crash when BrowserWindow is garbaged collected\n[Symptom]:\nI'm trying to create a child process in the renderer process and communicate with it throught stdin/stdout.\nI'm able to receive messages, but it crashed automatically when I leave the app without doing anything.\n\nThe dump is attached below, I saw `IdleNotification` and `~Window` there, but I'm not sure what's going on.\n\nThe specific code I'm using is here: [URL]\n\nWhat could it be?\n\n```\nThread 0 Crashed:: CrBrowserMain  Dispatch queue: com.apple.main-thread\n0   libsystem_kernel.dylib            __pthread_kill + 10\n1   libsystem_pthread.dylib           pthread_kill + 92\n2   libsystem_c.dylib                 abort + 125\n3   com.github.AtomFramework          node::MakeCallback(node::Environment*, v8::Handle , v8::Handle , int, v8::Handle *) + 91\n... [Log Snipped] ...\n49  com.github.AtomFramework          AtomMain + 72\n50  libdyld.dylib                     start + 1\n```\n\n[Context/Logs]:\n- This crash happens because your `BrowserWindow` object is garbage collected, in your case you can make your `win` object global to fix it:\n[URL]\n\nI'm keeping this open since it should not crash the whole process.\n- That seems to fixe the crash. Thanks!"}
{"project_id": "Electron", "bug_id": "2", "source_type": "github", "llm_input_text": "[Title]: Print API crash Electron with dev-tool opening.\n[Symptom]:\nAppear in v0.27.3 on Windows. Reproduce steps:\n1. Launch Electron, and open dev-tool\n2. Type `window.print()`\n3. A system dialog shows up and click `cancel`\n4. Close the Electron Window, then Electron Crashes.\n\nIf we close the dev-tool before closing browser window, it quit finely.\n\nBelow is stacktrace:\n\n```\nelectron.exe!std::_Tree_unchecked_const_iterator  > > >,std::_Iterator_base0>::operator++() Line 62 C++\n    electron.exe!std::_Tree_const_iterator  > > > >::operator++() Line 272  C++\n    electron.exe!std::_Tree_iterator  > > > >::operator++() Line 413    C++\n    content.dll!content::WebContentsImpl::~WebContentsImpl() Line 414   C++\n... [Log Snipped] ...\n    content.dll!content::RenderViewHostImpl::OnMessageReceived(const IPC::Message & msg) Line 867   C++\n    content.dll!content::RenderProcessHostImpl::OnMessageReceived(const IPC::Message & msg) Line 1539   C++\n```\n"}
{"project_id": "Electron", "bug_id": "3", "source_type": "github", "llm_input_text": "[Title]: Crash after IPC connection failure\n[Symptom]:\nI created a connection to a IPC file on mac using the node native `net` module. When the connection creation fails due to `NSURLErrorDomain -1004` (Note that the errors before are logged from the net.on('error') event).\n\nThis happens when i try to open two connections over the same IPC socket file.\n\n```\nERROR { [Error: This socket has been ended by the other party] code: 'EPIPE' } Error: This socket has been ended by the other party\nERROR { [Error: This socket has been ended by the other party] code: 'EPIPE' } Error: This socket has been ended by the other party\nERROR { [Error: This socket has been ended by the other party] code: 'EPIPE' } Error: This socket has been ended by the other party\nERROR { [Error: This socket has been ended by the other party] code: 'EPIPE' } Error: This socket has been ended by the other party\n[0626/111521:ERROR:http_transport_mac.mm(186)] Could not connect to the server. (NSURLErrorDomain -1004)\n```\n\nElectron crashes with the following log: [URL]\n\n[Context/Logs]:\n- I figured that it only crashes when i use an incoming sendSync IPC connection, to forward to the `net` socket.\n\nA simplified example looks like this:\n\n```\njs\nvar syncEvents = {};\n\n// create connection on \"ipcSocket\"\n\n... [Log Snipped] ...\n    syncEvents['xyz'] = event;\n});\n```\n\nWhen i set the return value, it crashes.\nIf you do the same async, it works fine.\nHope that helps.\n- Can you provide a demo app? I'm unable to reproduce according to your descriptions.\n- I figured out what causes the issue, and also created a repro app here: [URL]\n\nThis one seems to be related to my other issue: [URL]\n\nWhat happens is that i try to re-connect when the net error event is fired, as it could be the the socket was closed from the otherside and i want to reconnect.\n\nThe demo app itself, creates a web view, which then creates a IPC connection to the main process and starts a IPC connection using the `net` package to whatever IPC socket (doesn't need to work, to test the crash)\n\nBut because the web view, or window is closed it seems that the connect failure of the net package kills electron.\n\n**To try for yourself:**\nRun the demo app and then close the window (tested on mac osx).\nIt will then after ~1 sec it will kill electron.\n\nThe main line here is `/ipcProvidorBackend.js:86`\n\nIdeally this error should be handled in a way that it doesn't cause electron to crash. And stop the net processes automatically, if possible.\n- This issue is actually rather critical as it always crashes electron, when the `Could not connect to the server. (NSURLErrorDomain -1004)` error appears. And there is now way to catch it."}
{"project_id": "Electron", "bug_id": "4", "source_type": "github", "llm_input_text": "[Title]: BrowserWindow 'title-bar-style': 'hidden-inset' option causes crash on OS X 10.9\n[Symptom]:\nFrom: [URL]\n\n``` js\nconst win = new BrowserWindow({\n        'width': 800,\n        'height': 600,\n        'title-bar-style': 'hidden-inset'\n});\n```\n\nThis throws on OS X 10.9 with Electron 0.32.3.\n\n[Image: image]\n\n[Context/Logs]:\n- I see the issue on OS X 10.10.5 too.\n- This is strange. I now reviewed and tested the Chromium implementation of `IsOSYosemiteOrLater` and it looks correct. It should guard against that method running. @sindresorhus and @ssreekanth what does `uname -r` (from command line) return on your Mavericks system?\n- ... [Middle Discussions Snipped for Brevity] ...\n- @jaanus Running `uname -r` on Mavericks returns: `13.4.0`.\n- @jaanus I just published my [Link: app] if you need a testcase."}
{"project_id": "Electron", "bug_id": "5", "source_type": "github", "llm_input_text": "[Title]: Segmentation fault after calling Screen.getPrimaryDisplay() on Ubuntu 14.04\n[Symptom]:\nOn Ubuntu 14.04 calling `Screen.getPrimaryDisplay()` leads to crash on v0.19.5. Before update on v0.15.9 the same code worked successfully.\n\nExample code:\n\n```\njs\nvar BrowserWindow, Screen, app, mainWindow;\n\napp = require(\"app\");\nScreen = require(\"screen\");\n... [Log Snipped] ...\n  });\n});\n```\n\nWithout the `var  workArea = Screen.getPrimaryDisplay().workArea;` the code works as expected.\n\nConsole:\n\n```\nconsole\nCrash dump id: 0434e4e2-a3f4-4c32-b993-05fbeb80c759\nSegmentation fault (core dumped)\nWarning: Command failed: [31263:1209/190734:ERROR:browser_main_loop.cc(162)] Running without the SUID sandbox! See [URL] for more information on developing with the sandbox on.\nCrash dump id: 0434e4e2-a3f4-4c32-b993-05fbeb80c759\n... [Log Snipped] ...\n\nAborted due to warnings.\n```\n\nVersion 0.19.5\n\n[Context/Logs]:\n- Happens in windows too !\n- Windows 8.1 to be precise."}
{"project_id": "Electron", "bug_id": "6", "source_type": "github", "llm_input_text": "[Title]: 0.30.6 - Crash when closing dev tools\n[Symptom]:\nI was running specs in Atom, and then closed the dev tools. The main process crashed.\n\nFull output: [URL]\n\n```\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\nException Codes:       KERN_INVALID_ADDRESS at  \n\nThread 0 Crashed:: CrBrowserMain  Dispatch queue: com.apple.main-thread\n0   Electron Framework                brightray::InspectableWebContentsImpl::CallClientFunction(std::__1::basic_string , std::__1::allocator  > const&, base::Value const*, base::Value const*, base::Value const*) + 305\n... [Log Snipped] ...\n28  com.github.atom                   main + 58\n29  libdyld.dylib                     start + 1\n```\n"}
{"project_id": "Electron", "bug_id": "7", "source_type": "github", "llm_input_text": "[Title]: Setting long tooltip on Windows causes abrupt crash\n[Symptom]:\nOn `google-music-electron`, we got a report about issues with abrupt crashes when playing certain songs. After some triaging, we discovered it was caused by going over 127 characters on Windows.\n\n[URL]\n\nWe have created a proof of concept gist to reproduce the issue. We are using Windows 7 from `ievms` but the initial report was on Windows 10 so that should work as well.\n\n[URL]\n\nWe aren't sure whether this is something that `electron` can resolve or not. But at the very least, we think it should be documented.\n\nIn the meantime, we will be adding truncation in `google-music-electron` to avoid future issues.\n\n[Context/Logs]:\n- [Link: This StackOverflow question] says [Link: MSDN] specifies that limit:\n\nTesting on OSX 10.10.5 it doesn't crash with long strings, but the tooltip doesn't get shown if `message.length` is larger than 4800.\n\nThe `setToolTip` function should handle those issues in each platform."}
{"project_id": "Electron", "bug_id": "8", "source_type": "github", "llm_input_text": "[Title]: Segmentation fault after closing the last window on OS X\n[Symptom]:\nThis is a dupe of #321, please have a look at it.\nOccurs on OSX, atom-shell version 19.1.\nJust like what @marcbachmann said in #321, sometimes we just get a short notice \"segmentation fault\".\n\n[Context/Logs]:\n- Looks like the problem lies here:\n\nCode Example:\n\nmainWindow.on('closed', function() {\n    app.quit();\n}\n\nAfter we closed this mainWindow, if we call app.quit(), it will emit signals trying to close this mainWindow again. But this window is already closed. \n\nThis issue only occurs on Mac OS.\n\nSo app.quit() is a little bit dangerous.\nSuggest to attach it to only \"window-all-closed\" event.\n\nOr you may be able to update the logic of app.quit() on MAC? @zcbenz"}
{"project_id": "Electron", "bug_id": "9", "source_type": "github", "llm_input_text": "[Title]: Electron 'Permissions Context' potentially causing Renderer Crash\n[Symptom]:\nI'm using the Web MIDI API within an Electron app and trying to send Sysex messages (System Exclusive) in order to send/receive a MIDI device device-specific-messages like ID Requests, etc. The Web MIDI API requires a secure connection when sending Sysex messages and the protocol within an Electron app appears to be 'file:' \nAttempting to send the message crashes the Electron renderer. All other MIDI messages and the Web MIDI API seem to work as expected and sending/receiving Sysex is successful in the Chrome browser (with https).\n\nI've filed a bug with [Link: Chromium] and it's looking like this could be a Electron issue instead. The latest response to that issue is below:\n\n[Context/Logs]:\n- This is a shot in the dark but have you tried playing with the security options? Specifically the 2 registerUrlScheme methods mentioned in [Link: web-frame]. If that doesn't work you can try disabling websecurity completely by setting `web-security` to false in BrowserWindow initialization (see [Link: here]).\n- I did try and use the web-security object in BrowserWindow to no effect. I will try the two web-frame methods, is there more documentation on web-frame and using these two methods? Is there a different way that Electron(libchromiumcontent) handles permissions compared with Chromium?\n\nIt's unclear as to what the issue is. I'm not prompted to allow permission to use sysex, like i am in Chrome, which seems fine, but it does seem that a requirement to sending sysex messages is the secure protocol 'https:'\n- ... [Middle Discussions Snipped for Brevity] ...\n- Sent a pull request to atom/brightray.\n- Thanks for working on this [Link: toyoshim], looking forward to using Web MIDI in Electron."}
{"project_id": "Electron", "bug_id": "10", "source_type": "github", "llm_input_text": "[Title]: Crash on Yosemite\n[Symptom]:\n```\njavascript\nProcess:               Prepros [8704]\nPath:                  /Users/USER/*/Prepros.app/Contents/MacOS/Prepros\nIdentifier:            com.alphapixels.prepros\nVersion:               {{version}}\n... [Log Snipped] ...\nUSB Device: iPhone\nThunderbolt Bus: MacBook Pro, Apple Inc., 17.1\n```\n\n[Context/Logs]:\n- With Yosemite poised to hit the shelves within the next couple of weeks, has there been any update on this?"}
{"project_id": "Electron", "bug_id": "11", "source_type": "github", "llm_input_text": "[Title]: Atom crashes on Electron v0.36.0\n[Symptom]:\nTo repro:\n1. Upgrade Atom on Windows to 0.36.0 of Electron\n2. Open a file\n3. Renderer crash:\n\n```\n# ChildEBP RetAddr  \n00 0018dbf8 777f492e ntdll!NtTerminateProcess+0xc\n01 0018dcd0 74ee7b42 ntdll!RtlExitUserProcess+0x9e\n02 0018dce4 6d173fac KERNEL32!ExitProcessImplementation+0x12\n03 0018dcf0 6d17427d MSVCR120!__crtExitProcess+0x15 [f:\\dd\\vctools\\crt\\crtw32\\startup\\crt0dat.c @ 774]\n... [Log Snipped] ...\n7d 0018fa1c 7780568e ntdll!__RtlUserThreadStart+0x2f\n7e 0018fa2c 00000000 ntdll!_RtlUserThreadStart+0x1b\n```\n\nThis check is failing:\n\n```\nc++\nvoid CallbackInfo::WeakCallback(Isolate* isolate, Local  object) {\n  CHECK(object->IsArrayBuffer());    /******** Kerplowie *********/\n  Local  buf = object.As ();\n  ArrayBuffer::Contents obj_c = buf->GetContents();\n... [Log Snipped] ...\n  delete this;\n}\n```\n\n[Context/Logs]:\n- I think that my problem is related to this issue. Can't run my app on Electron 0.36.0 because the renderer-process crashes instantly after rendering its first frame. Works fine on Electron 0.35.x\n- This is fixed by #3792.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Does this bug [when fixed and validated] alone deserve to cause a new minor version of electron being released?\n- @ducky427 I think so, because of this bug electron completely crashes when it's writing files in my application."}
{"project_id": "Electron", "bug_id": "12", "source_type": "github", "llm_input_text": "[Title]: App Crash in OS X when using showSaveDialog with filter with no extensions\n[Symptom]:\nWhen trying to use `showSaveDialog` or `showOpenDialog` in OS X, if you pass in a filter object to `options` that has an empty `extensions` array, Electron crashes.\n\n```\njs\nvar remote = require('remote');\nvar dialog = remote.require('dialog');\ndialog.showSaveDialog(remote.getCurrentWindow(), {\n    filters: [{\n... [Log Snipped] ...\n    }]\n});\n```\n\nThis is working in Windows and Linux.\n"}
{"project_id": "Electron", "bug_id": "13", "source_type": "github", "llm_input_text": "[Title]: Crash on Windows\n[Symptom]:\n```\nOperating system: Windows NT\n                  10.0.10586 \nCPU: x86\n     GenuineIntel family 6 model 42 stepping 7\n     4 CPUs\n... [Log Snipped] ...\n    eip =     esp =     ebp =  \n    Found by: call frame info with scanning\n```\n"}
{"project_id": "Electron", "bug_id": "14", "source_type": "github", "llm_input_text": "[Title]: Bug: process.exit and app.exit Overflow On Windows\n[Symptom]:\nCurrent versions of atom/apm fail to exit cleanly on Windows when process.exit or app.exit are used (e.g. [URL]\n\n``` coffeescript\nexitWithStatusCode = (status) ->\n  console.log('Exiting With Status Code:' + status)\n  remote.require('app').emit('will-quit')\n  process.exit(status)\n```\n\n```\nC:\\Users\\vagrant\\github\\go-runtime>atom --dev --test c:\\Users\\vagrant\\github\\go-\nruntime\\spec\n\nWindow load time: 711ms\n...................................\n... [Log Snipped] ...\nC:\\Users\\vagrant\\github\\go-runtime>echo %errorlevel%\n-1073740940\n```\n\nUsing app.exit exhibits the same behavior:\n\n``` coffeescript\nexitWithStatusCode = (status) ->\n  console.log('Exiting With Status Code:' + status)\n  app = remote.require('app')\n  app.emit('will-quit')\n  app.exit(status)\n```\n\napp.quit() results in an exit code of 0 **always** for obvious reasons, as it does not accept an exit code. But it does not overflow!\n\n```\nexitWithStatusCode = (status) ->\n  console.log('Exiting With Status Code:' + status)\n  app = remote.require('app')\n  app.emit('will-quit')\n  app.quit()\n```\n\n```\nC:\\Users\\vagrant\\github\\go-runtime>atom --dev --test c:\\Users\\vagrant\\github\\go-\nruntime\\spec\n\nWindow load time: 2270ms\n.......F...........................\n... [Log Snipped] ...\nC:\\Users\\vagrant\\github\\go-runtime>echo %errorlevel%\n0\n```\n\n/cc @nathansobo @zcbenz @50Wliu @thomasjo\n\n[Context/Logs]:\n- Happy to adjust our test window code if any workarounds exist in the meantime."}
{"project_id": "Electron", "bug_id": "15", "source_type": "github", "llm_input_text": "[Title]: Rendering crashes (white screen) when FontAwesome is used (Archlinux)\n[Symptom]:\nWith version 0.36.7 on Archlinux, if the html contains any glyph from FontAwesome, the rendering crashes and gives a white screen.\n\nThis only happens if the glyph is actually rendered, i.e. not hidden by CSS.\n\nThis can be reproduced using this example :\n&lt;!DOCTYPE html&gt;\n\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;title&gt;Font Awesome Crash&lt;/title&gt;\n    &lt;link href=&quot;css/font-awesome.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;i class=&quot;fa fa-trash-o&quot;&gt;&lt;/i&gt;\n    &lt;!-- Remove the line above and the rendering works fine --&gt;\n    Hello World !\n&lt;/body&gt;\n&lt;/html&gt;\n\n[Context/Logs]:\n- I'm unable to reproduce on Ubuntu, probably a distribution specific problem.\n- That's my feeling too.\n- ... [Middle Discussions Snipped for Brevity] ...\n- There's a trace here:\n[URL]\n\nI think I've seen this before and it's similar to [URL] Which harfbuzz version does electron ship?\n- @heftig is it possible for you to rebuild FreeType with debugging symbols on, and then reproduce that stacktrace? (I'll admit I don't know how to do that.) I think that would help lemzwerg track down what's going on.\n\nEdit: Oops my bad :)"}
{"project_id": "Electron", "bug_id": "16", "source_type": "github", "llm_input_text": "[Title]: Fatal error on exit electron app\n[Symptom]:\n```\n[7136:0129/081452:FATAL:scoped_handle.cc(44)] Check failed: false.\nBacktrace:\n        (No symbol) [ ]\n        (No symbol) [ ]\n        (No symbol) [ ]\n... [Log Snipped] ...\n        v8::Locker::IsLocked [ +804588]\n        v8::Locker::IsLocked [ +816029]\n```\n\nSteps to reproduce\n\n```\n$ npm install -g iron-node;\n$ iron-node;\n#press Ctrl+w\n```\n\nJust tried to reproduce but this happens only in distributed version.\n\nWindows 10 . Electron 0.36.5.\n\nref.: [URL]\n\n[Context/Logs]:\n- I also get a renderer crash when quitting my app, on windows 10 with electron 0.36.6 (0.36.5 was working well)\n\n```\n[8320:0129/150532:FATAL:scoped_handle.cc(44)] Check failed: false.\nBacktrace:\n        (No symbol) [ ]\n        (No symbol) [ ]\n        (No symbol) [ ]\n... [Log Snipped] ...\n        v8::Locker::IsLocked [ +1032834]\n        (No symbol) [ ]\n```"}
{"project_id": "Electron", "bug_id": "17", "source_type": "github", "llm_input_text": "[Title]: memory leak in 1.6.7 when using window.open\n[Symptom]:\n* Electron version: 1.6.7\r\n* Operating system: Mac OS X 10.10.5 and Windows 8.1\r\n\r\nI realize 1.6.7 is still in beta but thought I should report a memory leak I am seeing...  in a simple app that does window.open with every new window opened the memory keeps growing and is never released when the sub-windows get closed.\r\n\r\nThe demo repo is committed here: [URL]\r\n\r\nTo repo.\r\n1. git clone [URL]\r\n2. npm i\r\n3. npm run start\r\n4. in the main window click the open window button 5 times.\r\nNotice: the memory goes very high (approx 500 Mbytes) because each sub-window is allocating a big chunk of memory.\r\n5. now close all the open windows.\r\n\r\nResult: the memory of the renderer process stays very high\r\nExpected: memory to go back to original before all sub-windows were opened.\r\n\r\nNote: This does not happen on electron 1.4.16 but only appears to be a problem in electron 1.6.7.  \r\nNote: Also the problem seems to be related to the having preload enabled\n\n[Context/Logs]:\n- Are you not able to reproduce it using 1.6.6?\n- yes also happens in 1.6.6.  believe it has something to do with preload.  removing preload seems to resolve issue but if you look at sample code there is nothing significant in preload.js - only console.log (and debugger)\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think it is related, there's probably some code there that prevents a context from being freed when a window is closed. I will try to bisect the issue to confirm if that commit is indeed what caused the bug.\n- I confirm that  @lneir test case isn't reproducible before @ , but I believe the actual bug is caused by the remote module and wasn't noticed until now because each non-sandbox has a dedicated process which is killed when the window is closed.\r\n\r\nI will continue investigating."}
{"project_id": "Electron", "bug_id": "18", "source_type": "github", "llm_input_text": "[Title]: Calling BrowserWindow.close in page-title-updated handler crashes electron\n[Symptom]:\nTest program:\n\npackage.json:\n\n``` json\n{\n    \"name\": \"CloseHandlingCrash\",\n    \"productName\": \"CloseHandlingCrash\",\n    \"version\": \"0.1.0\",\n    \"main\": \"main.js\"\n}\n```\n\nmain.js:\n\n```\njavascript\nvar BrowserWindow = require(\"browser-window\");\nvar app = require(\"app\");\n\napp.on(\"ready\", function() {\n... [Log Snipped] ...\n    w.loadUrl(\"file://\" + __dirname + \"/main1.html\");\n});\n```\n\nmain1.html:\n\n``` html\n   window.location = \"main2.html\";   \n```\n\nmain2.html:\n\n``` html\n   main2   \n```\n\nCalling the `BrowserWindow.close()` method in the `page-title-updated` handler crashes Electron.  I noticed that both the `close` and the `closed` handlers are called before the `close()` method returns.  e.g. This test program outputs:\n\n```\npage-title-updated: title=main2\nclose\nclosed\npage-title-updated: returning\n```\n\nIf I understand correctly, once `atom::NativeWindow::TitleWasSet()` has called the `page-title-updated` handlers, it then calls `atom::NativeWindowViews::SetTitle()`, but the window has been destroyed already (deallocated too?).\n\nI have a stack trace from a version of electron compiled with debug info:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n  in views::Widget::UpdateWindowTitle() () from /home/rprichard/XXX/electron/out/D/libviews.so\n(gdb) bt\n#0    in views::Widget::UpdateWindowTitle() () from /home/rprichard/XXX/electron/out/D/libviews.so\n#1    in atom::NativeWindowViews::SetTitle (this= , title=...) at ../../atom/browser/native_window_views.cc:475\n... [Log Snipped] ...\n#23   in content::ContentMain(content::ContentMainParams const&) () from /home/rprichard/XXX/electron/out/D/libcontent.so\n#24   in main (argc=2, argv= ) at ../../atom/app/atom_main.cc:179\n```\n\nInterestingly, sometimes `NativeWindow::RequestToClosePage()` decides to close the window immediately and sometimes it decides to defer the decision, based upon the result of `web_contents()->NeedToFireBeforeUnload()`.  I had another test case that assigned to `document.title` instead of changing th\n...[Description Truncated]...\n\n[Context/Logs]:\n- I'm not sure the #3420 fix completely fixed this issue.  I think I can achieve the same effect by also calling `event.preventDefault()` in the `page-title-updated` handler.  Doing that happens to fix my reduced test case, but it does not fix the original application code that I started with.  FWIW, here's the stack trace from my application, after adding `event.preventDefault()`:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n  in content::NavigationControllerImpl::GetEntryAtOffset(int) const () from /home/rprichard/XXX/electron/out/D/libcontent.so\n(gdb) bt\n#0    in content::NavigationControllerImpl::GetEntryAtOffset(int) const () from /home/rprichard/XXX/electron/out/D/libcontent.so\n#1    in content::WebContentsImpl::UpdateTitle(content::RenderFrameHost*, int, std::basic_string  > const&, base::i18n::TextDirection) () from /home/rprichard/XXX/electron/out/D/libcontent.so\n... [Log Snipped] ...\n#16   in content::ContentMain(content::ContentMainParams const&) () from /home/rprichard/XXX/electron/out/D/libcontent.so\n#17   in main (argc=2, argv= ) at ../../atom/app/atom_main.cc:179\n```\n\nI suppose I could try to update my test case...\n- @rprichard i am unable to reproduce the crash after the fix with the test case, it would really help if you could reduce your application scenario to a minimal test case, thanks!\n- I was able to create a new test case demonstrating the crash even with `event.preventDefault` -- [URL]  It uses the `request` npm package, so run `npm install\n...[Text Truncated]...\nfore running electron.\n\nI debugged the original test case, and here's what I learned:\n- When the `page-title-updated` handler closes the window in the original test case, it also immediately deallocates the `content::WebContentsImpl` object, which you can see in the original test case's stack backtrace.\n- In the original stack trace, `WebContentsImpl::UpdateTitle` calls `WebContentsImpl::UpdateTitleForEntry`, which ultimately segfaults.\n- In the new stack trace, `WebContentsImpl::UpdateTitle` calls `NavigationControllerImpl::GetEntryAtOffset`, which ultimately segfaults.\n\nHere's the code for `WebContentsImpl::UpdateTitle`:\n\n```\nc++\n...\n  // TODO(evan): make use of title_direction.\n  // [URL]\n  if (!UpdateTitleForEntry(entry, title))\n... [Log Snipped] ...\n    NotifyNavigationStateChanged(INVALIDATE_TYPE_TITLE);\n}\n```\n\nThe `WebContentsImpl` object (i.e. `this`) has been deallocated, so reading the `this->controller_` field is reading dangling memory.\n\nThe fix needs to keep `WebContentsImpl` from being deallocated until the event handler finishes.\n\n(FWIW: to debug the code, I used gdb and placed breakpoints on places such as `content::WebContentsImpl::~WebContentsImpl`.  On Linux, `this` is `$rdx` on method entry.  I also compiled Electron with debug info (-g) by hacking it into the ninja build scripts.  I wanted to build Chromium with debug info, but my computer took too long, and I think the build also failed for some reason.)\n- @zcbenz @deepak1556 \nCould we reopen this issue?"}
{"project_id": "Electron", "bug_id": "19", "source_type": "github", "llm_input_text": "[Title]: beforeunload event not called on subsequent reloads\n[Symptom]:\n* Electron version: 1.6.3\r\n* Operating system: Linux\r\n\r\n### Expected behavior\r\n\r\nWhen registering a `beforeunload` handler which cancels unloading, I would expect the handler to be called for every `BrowserWindow.reload()`.\r\n\r\n### Actual behavior\r\n\r\nOn 1.6.3, the `beforeunload` handler is called for the first `reload` but not on subsequent calls. Even after removing the event handler, `reload` will not reload the window anymore.\r\n\r\n### How to reproduce\r\n\r\n```\njavascript\r\nconst cancelUnload = e => {\r\n   console.log('cancelUnload called')\r\n   e.returnValue = false\r\n}\r\n... [Log Snipped] ...\n\r\nremote.getCurrentWindow().close()   // [6] -> closes window\n```\r\nI would expect `cancelUnload` to be printed to the console four times and the step at `[5]` to actually reload the window. This is works up to Electron 1.6.2.\r\n\r\nOn Electron 1.6.3 `cancelUnload` is not printed at step `[2]` (nor on any subsequent calls to reload). What's more, event after removing the `beforeunload` handler, `reload` does not work anymore: at step `[5]` the window does not reload (but closing the window at `[6]` works).\n\n[Context/Logs]:\n- I've been running into this problem too in v1.6.6.  \r\n\r\nIt looks this was caused by the changes in #8724.  I don't run into the issue with the v1.6.3 code if I revert the changes from   (or even just comment out one [Link: return statement])."}
{"project_id": "Electron", "bug_id": "20", "source_type": "github", "llm_input_text": "[Title]: Crash in electron 1.6.8 using remote when sandboxed\n[Symptom]:\nCrash in electron remote.\r\n* Electron version: 1.6.8\r\n* Operating system: Mac OSX 10.10.5\r\n\r\nThis is only happening on 1.6.8.  Doesn't happen in 1.6.7.\r\n\r\nRepo:\r\n1. git clone [URL]\r\n2. follow instructions in README\r\n3. crash stack shown below.\r\n\r\nThis demo repo has sandboxing turned on and is using preload script to access remote class.\r\n\r\ncrash stack from renderer console:\r\nUncaught Error: Cannot call constructor on missing remote object 36\r\nError: Cannot call constructor on missing remote object 36\r\n    at throwRPCError (/Users/lneir/IntelliJProjects/tests/electron-remote-issue/node_modules/electron/dist/Electron.app/Contents/Resources/electron.asar/browser/rpc-server.js:143:17)\r\n    at EventEmitter.  (/Users/lneir/IntelliJProjects/tests/electron-remote-issue/node_modules/electron/dist/Electron.app/Contents/Resources/electron.asar/browser/rpc-server.js:303:7)\r\n    at emitThree (events.js:116:13)\r\n    at EventEmitter.emit (events.js:194:7)\r\n    at WebContents.  (/Users/lneir/IntelliJProjects/tests/electron-remote-issue/node_modules/electron/dist/Electron.app/Contents/Resources/electron.asar/browser/api/web-contents.js:256:37)\r\n    at emitTwo (events.js:106:13)\r\n    at WebContents.emit (events.js:191:7)\r\n    at throwRPCError (/Users/lneir/IntelliJProjects/tests/electron-remote-issue/node_modules/electron/dist/Electron.app/Contents/Resources/electron.asar/browser/rpc-server.js:143:17)\r\n    at EventEmitter.  (/Users/lneir/IntelliJProjects/tests/electron-remote-issue/node_modules/electron/dist/Electron.app/Contents/Resources/electron.asar/browser/rpc-server.js:303:7)\r\n    at emitThree (events.js:116:13)\r\n    at EventEmitter.emit (events.js:194:7)\r\n    at WebContents.  (/Users/lneir/IntelliJProjects/tests/electron-remote-issue/node_modules/electron/dist/Electron.app/Contents/Resources/electron.asar/browser/api/web-contents.js:256:37)\r\n    at emitTwo (events.js:106:13)\r\n    at WebContents.emit (events.js:191:7)\r\n    at metaToValue ( :552:13)\r\n    at new remoteFunction ( \n...[Description Truncated]...\n\n[Context/Logs]:\n- Seems like a bug in objects-registry.js\r\n\r\nIt only increases reference count the first time an object is referenced, but this can cause problems with page reload. This sequence of events happened when testing @lneir example:\r\n\r\n- initial load\r\n- hello.js was added to objects-registry and referenced count increased\r\n- reload\r\n- hello.js was added to objects-registry(no reference count increased)\r\n- after a while, garbage collection in renderer process caused the first reference to hello.js to be released\r\n- browser process removes hello.js from object-registry even though it is still being referenced by the second context.\r\n\r\nThis was only noticed in 1.6.8 because of the memory leak fix(previously context were never released)\r\n\r\nPushed #9389 with fix"}
{"project_id": "Electron", "bug_id": "21", "source_type": "github", "llm_input_text": "[Title]: Window submenu causes a crash on OS X\n[Symptom]:\nElectron v0.36.1\nOS X 10.11.2\n\n``` javascript\nconst remote = require('electron').remote;\nconst Menu = remote.Menu;\nconst MenuItem = remote.MenuItem;\n\nvar menu = new Menu();\nmenu.append(new MenuItem({label: 'Window', submenu: new Menu(), type: 'submenu', role: 'window'}));\nMenu.setApplicationMenu(menu);\n```\n\n```\n2015-12-19 23:50:48.555 Electron[8342:713345] *** Assertion failure in -[NSMenu itemAtIndex:], /Library/Caches/com.apple.xbs/Sources/AppKit/AppKit-1404.34/Menus.subproj/NSMenu.m:947\n2015-12-19 23:50:48.558 Electron[8342:713345] An uncaught exception was raised\n2015-12-19 23:50:48.558 Electron[8342:713345] Invalid parameter not satisfying: (index >= 0) && (index   __exceptionPreprocess + 178\n... [Log Snipped] ...\n)\nlibc++abi.dylib: terminating with uncaught exception of type NSException\n```\n"}
{"project_id": "Electron", "bug_id": "22", "source_type": "github", "llm_input_text": "[Title]: app.makeSingleInstance doesn't work under linux, Electron 1.7.x\n[Symptom]:\n* Electron version: 1.7.x\r\n* Operating system: Linux\r\n\r\nWorks in 1.6.11.\r\n\r\n### Expected behavior\r\n\r\n`app.makeSingleInstance` callback is called when opening an associated file from file manager and application is already opened\r\n\r\n### Actual behavior\r\n\r\n`app.makeSingleInstance` callback is delayed with about 30-60 seconds before being called\r\n\r\n### How to reproduce\r\n\r\nYou could reproduce the problem by downloading [Link: Caret 3.0 .deb] and then following the steps described [Link: here].\r\n\r\nThe issue stops reproducing when releasing the same code with 1.6.11.\n\n[Context/Logs]:\n- We're seeing exactly the same issue here [URL]\n- I've just added a super simple example into git demonstrating the bug...\r\n\r\n```\r\ngit clone [URL]\r\ncd electron-quick-start\r\ngit checkout singleinstance-bug\r\nnpm install\r\nnpm start\r\n```\r\nThen in a new terminal....\r\n```\r\nnpm start\r\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- @mattridley we're not seeing it with macOS or Windows only linux. Which version of electron did you see it with? Do you see the problem if you try it with the electron-quick-start above? [URL]\n- I saw it with 1.7.5 (reverting back to 1.6.11 fixes the issue). I also have the problem with the quick start (see [URL]"}
{"project_id": "Electron", "bug_id": "23", "source_type": "github", "llm_input_text": "[Title]: Crash in RenderFrameHostImpl::SetNavigationHandle\n[Symptom]:\n* Electron version: 1.6.3\r\n* Operating system: macOS 10.11.6\r\n\r\nWe have a few reports of crashes when waking from sleep. I went ahead & symbolicated one of them and attached it below, in case anything jumps out as an obvious mistake.\r\n\r\n \r\n\r\n```\nProcess:               Slack [88838]\r\nPath:                  /Applications/Slack.app/Contents/MacOS/Slack\r\nIdentifier:            com.tinyspeck.slackmacgap\r\nVersion:               2.6.0-alpha170330eaa48b0 (4101)\r\nCode Type:             X86-64 (Native)\r\n... [Log Snipped] ...\n33  com.tinyspeck.slackmacgap     \t  main + 38\r\n34  libdyld.dylib                 \t  start + 1\n```\r\n\r\n \r\n\r\n### How to reproduce\r\n\r\nWe don't have a guaranteed repro yet. I will update this bug as we get more information.\n\n[Context/Logs]:\n- We are seeing this exact crash! Even we are not able to pinpoint the exact steps. It is not a sleep/wake scenario though.\n- @snene this issue is still in my todo list, its really hard to track the cause without a test case. For the time being I would suggest avoiding any synchronous `loadURL` calls made inside any of the navigation observers like `webContents.on('did-fail-load', () => { webContents.loadURL() })`, as they would be the main cause for this crash.\n- @deepak1556 I think I ran into the same crash while trying to make the pdf viewer more robust. I can reproduce this with this app:\r\n\r\n```\nconst electron = require('electron')\r\nconst app = electron.app\r\nconst BrowserWindow = electron.BrowserWindow\r\n\r\nlet mainWindow\r\n... [Log Snipped] ...\n  }\r\n})\n```\r\n\r\nAlso, if you use the sandbox option, the crash doesn't happen. This is as far as I got with this, I hope it helps. :)\n- We are seeing this in VS Code as well."}
{"project_id": "Electron", "bug_id": "24", "source_type": "github", "llm_input_text": "[Title]: Copying nativeImage to clipboard after crop is crashing program\n[Symptom]:\n* Electron version: 1.4.7\r\n* Operating system: Windows 10 (x64)\r\n\r\n### Expected behavior\r\n\r\nThe image should copy to the clipboard properly after a crop.\r\n\r\n### Actual behavior\r\n\r\nBefore cropping, the image can be copied to the clipboard without any issues. After a crop, copying the image will crash the program and will not be copied to the clipboard. Same behavior on Main and Render processes.\r\n\r\n### How to reproduce\r\n\r\nI have the following code on a render file, but putting it in the main file will yield similar results.\r\n\r\n```\nnode\r\nconst {nativeImage, clipboard} = require('electron');\r\n\r\n// 4592x3056 image (https://images.unsplash.com/photo-1431512284068-4c4002298068)\r\nlet image = nativeImage.createFromPath('./test.jpg');\r\n... [Log Snipped] ...\n// Doesn't work (crashes)\r\nclipboard.writeImage(image);\n```\n\n[Context/Logs]:\n- Here is the stack trace for this crash:\r\n\r\n```\r\nmemcpy() Line 135\r\nui::ClipboardWin::WriteBitmap(const SkBitmap & bitmap) Line 799\r\nui::Clipboard::DispatchObject(ui::Clipboard::ObjectType type, const std::vector  >,std::allocator  > > > & params) Line 118\r\nui::ClipboardWin::WriteObjects(ui::ClipboardType type, const std::map  >,std::allocator  > > >,std::less ,std::allocator  >,std::allocator  > > > > > > & objects) Line 718\r\nui::ScopedClipboardWriter::~ScopedClipboardWriter() Line 24\r\natom::api::Clipboard::WriteImage(const gfx::Image & image, mate::Arguments * args) Line 151\r\nmate::internal::Invoker ,gfx::Image const & __ptr64,mate::Arguments * __ptr64>::DispatchToCallback(base::Callback  callback) Line 202\r\nmate::internal::Dispatcher ::DispatchToCallback(const v8::FunctionCallbackInfo  & info) Line 236\r\n```"}
{"project_id": "Electron", "bug_id": "25", "source_type": "github", "llm_input_text": "[Title]: Crashes on webview.loadURL()\n[Symptom]:\n* Electron version: 1.6.5\r\n* Operating system: Windows 10 64bit\r\n\r\n### Actual behavior\r\n\r\nCrashes\r\n\r\n### How to reproduce\r\n```\r\ngit clone [URL]\r\nnpm install\r\nnpm start\r\n```\r\n\r\n1. click \"change\" button\r\n1. click \"hide\" button\r\n1. click \"change\" button\r\n\r\n[URL]\n\n[Context/Logs]:\n- It also happens with Electron **1.6.7**\r\nIt doesnt happen when using **1.6.2**\n- The stack for this crash is:\r\n\r\n\r\n```\nelectron.exe!content::WebContentsViewGuest::CreateViewForWidget(class content::RenderWidgetHost *,bool)\tUnknown\r\nelectron.exe!content::WebContentsImpl::CreateRenderWidgetHostViewForRenderManager(class content::RenderViewHost *)\tUnknown\r\nelectron.exe!content::WebContentsImpl::CreateRenderViewForRenderManager(class content::RenderViewHost *,int,int,struct content::FrameReplicationState const &)\tUnknown\r\nelectron.exe!content::RenderFrameHostManager::InitRenderView(class content::RenderViewHostImpl *,class content::RenderFrameProxyHost *)\tUnknown\r\nelectron.exe!content::RenderFrameHostManager::CreateRenderFrame(class content::SiteInstance *,bool,int *)\tUnknown\r\n... [Log Snipped] ...\nelectron.exe!content::NavigationControllerImpl::LoadURLWithParams(struct content::NavigationController::LoadURLParams const &)\tUnknown\r\nelectron.exe!atom::api::WebContents::LoadURL(const GURL & url, const mate::Dictionary & options) Line 1014\tC++\n```\r\n\r\n@deepak1556 anything jump out to you on this one?\n- ... [Middle Discussions Snipped for Brevity] ...\n- I tracked down this crash to [URL]\r\n```\r\nWebContentsImpl* embedder_web_contents() const {\r\n    return attached_ ? owner_web_contents_ : nullptr;\r\n}\r\n```\r\nWhich results in null pointer access on LoadURL when the view is hidden (Because it's detached).\r\nThis is actually not a matter of race condition. As it's simply enough to hide the webview, then issue LoadURL to crash it.\r\n\r\nThis will avoid the crash by simply refusing to navigate when the view is not attached.\n- I got the same. The webview was hidden via css."}
{"project_id": "Electron", "bug_id": "26", "source_type": "github", "llm_input_text": "[Title]: Inconsistent behaviors in sandbox mode with iframe\n[Symptom]:\n* Electron version: 1.6.7\r\n* Operating system: Windows 10\r\n\r\nAccording to the activation of the sandbox, I\u2019m facing inconsistent behaviors with a window containing iframes.\r\n\r\n# 1st. issue\r\n### How to reproduce\r\nHave a preload.js (pretty basic)\r\n```\r\nconst _ipcRenderer = require('electron').ipcRenderer;\r\nwindowLocal.ipcRenderer = _ipcRenderer;\r\nconsole.log(\u2018preload file loaded\u2019);\r\n```\r\nA html page with at least one iframe\r\n\r\n### Actual behavior\r\nWhen loading such page, we have the preload file loaded several times :\r\n-\tone for the top window\r\n-\tone for each iframe\r\nWithout the sandbox the preload file is loaded only once whatever the number of iframes.\r\n\r\n### Expected behavior\r\nIt could make sense to load preload file for each iFrame whatever the mode. We are in position to test in the preload if we are in a iframe (window.frameset) and then adapt our code.\r\n\r\n# 2nd issue \r\n### How to reproduce\r\nIn sandbox mode, from the top window and from each iframe I send a specific message to the master using the ipcRenderer.\r\n\r\nI build a response channel and the message from the window id and frame id\r\n```\r\n    let message = `I'm here from Window '${windowId}'`;\r\n    let responseChannel = `child-response-${windowId}`;\r\n    if (window.frameElement) {\r\n        message += ` Frame '${window.frameElement.id}'`;\r\n        responseChannel += `-${window.frameElement.id}`;\r\n    }\r\n```\r\n\r\nI listen the response on this specific response channel\r\n```\r\n    ipcRenderer.on(responseChannel, (...args) => {\r\n        console.log(\u2026args);\r\n    });\r\n```\r\nI send this specific message to master\r\n`    ipcRenderer.send('child-message', responseChannel, message);\r\n`\r\nThe master looks like\r\n```\r\n        ipcMain.on('child-message', (event: Electron.IpcMainEvent, ...args: any[]) => {\r\n            console.log(...args);\r\n            event.sender.send(args[0], 'I got your message !');\r\n        });\r\n```\r\n\r\n### Actual behavior\r\nMaster receives the expected messages\r\n-\tchild-response-xxx, I'm here from Window 'xx\n...[Description Truncated]...\n\n[Context/Logs]:\n- @tarruda \r\nFor this issue, does it miss a test on the frame in \r\nvoid AtomSandboxedRendererClient::DidCreateScriptContext(\r\n    v8::Handle  context, content::RenderFrame* render_frame) {\r\n++  if (!render_frame->IsMainFrame())\r\n++    return;\r\n\r\n\r\nDo not know if we have to test devTools as well ?\r\n  if (!render_frame->IsMainFrame() && !IsDevToolsExtension(render_frame))\r\n    return;"}
{"project_id": "Electron", "bug_id": "27", "source_type": "github", "llm_input_text": "[Title]: Crash on app quit at atom::AtomCTDelegate::ClearCTExcludedHostsList\n[Symptom]:\n* Electron version: 1.7.1\r\n* Operating system: Windows / Mac\r\n\r\n### Expected behavior\r\nno crash on quit\r\n\r\n### Actual behavior\r\nCrash on app quit\r\n\r\n```\nThread 23 Crashed:: Chrome_IOThread\r\n0   com.github.electron.framework \t  std::__1::__tree , std::__1::allocator  >, std::__1::less , std::__1::allocator  > >, std::__1::allocator , std::__1::allocator  > > >::destroy(std::__1::__tree_node , std::__1::allocator  >, void*>*) + 18 (__tree:1828)\r\n1   com.github.electron.framework \t  std::__1::__tree , std::__1::allocator  >, std::__1::less , std::__1::allocator  > >, std::__1::allocator , std::__1::allocator  > > >::clear() + 23 (__tree:1831)\r\n2   com.github.electron.framework \t  atom::AtomCTDelegate::ClearCTExcludedHostsList() + 13 (atom_ct_delegate.cc:23)\r\n3   com.github.electron.framework \t  atom::AtomCertVerifier::Verify(net::CertVerifier::RequestParams const&, net::CRLSet*, net::CertVerifyResult*, base::Callback  const&, std::__1::unique_ptr  >*, net::NetLogWithSource const&) + 58 (atom_cert_verifier.cc:170)\r\n... [Log Snipped] ...\n21  libsystem_pthread.dylib       \t  _pthread_start + 168\r\n22  libsystem_pthread.dylib       \t  thread_start + 13\n```\r\n\r\n### How to reproduce\r\nNo consistent repro. May be happening after #7651\r\n\r\ncc: @kevinsawicki @deepak1556\n\n[Context/Logs]:\n- This looks identical to #9878 @bpasero fyi\n- Seeing this quite consistently (maybe 5% failure rate?) in our CI jobs"}
{"project_id": "Electron", "bug_id": "28", "source_type": "github", "llm_input_text": "[Title]: TouchBar: Entries of TouchBarScrubber are all cropped\n[Symptom]:\n* Electron version: 1.7.7\r\n* Operating system: macOS\r\n\r\n### Expected behavior\r\n\r\nEntries of `TouchBarScrubber` show entirely\r\n\r\n### Actual behavior\r\n\r\nEach `ScrubberItem` shows with a \"...\"\r\n\r\n### How to reproduce\r\n\r\nJust create a new `TouchBarScrubber` and fill in some `ScrubberItem` and all entries will get a \"...\":\r\n\r\n[Image: image]\n\n[Context/Logs]:\n- This is a tricky one to solve, by default scrubbers use a [Link: NSScrubberProportialLayout] which tells the scrubber to display X items evenly distributed.\r\n\r\nThe only other built-in alternative is [Link: NSScrubberFlowLayout] which requires that we implement a method that returns the expected width of each item.  Not sure if we can return the expected width of an item given arbitrary text or not.\n- @MarshallOfSound is it possible to have buttons show up in a group that can overflow and allows to swipe left or right to scroll? My challenge currently is that I add lots of items to the touch bar and at one point the available space is not enough to show all unless I hide the \"Control Strip\".\r\n\r\nI noticed that for example Word has support to show many buttons in a group that can overflow with scrollbars, so it must be possible via the native APIs. I wonder if `TouchBarScrubber` is the right thing for that, but then I face the challenges as outlined in this bug that my buttons are all cropped.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @MarshallOfSound can you point me to Electron code where we set the width of these items?\n- The scrubber items?  Currently we don't, the default is that proportional layout, if you wanted to play with setting up a flow layout that would be done somewhere around here:\r\n\r\n[URL]"}
{"project_id": "Electron", "bug_id": "29", "source_type": "github", "llm_input_text": "[Title]: Fix \"nativeImage module addRepresentation() ...\" tests\n[Symptom]:\nThey were disabled during the Chromium 61 upgrade. Fix them and enable.\r\n\r\n/cc @alespergl\n\n[Context/Logs]:\n- The tests are fixed, but there is a follow-up task: #11294."}
{"project_id": "Electron", "bug_id": "30", "source_type": "github", "llm_input_text": "[Title]: Downloads are failing with state 'interrupted' from custom protocols in 1.8.2-beta.3\n[Symptom]:\n* Electron version: 1.8.2-beta.3\r\n* Operating system: MacOS 10.12\r\n\r\n### Expected behavior\r\n\r\nFile downloads from custom protocols should complete without issue.\r\n\r\n### Actual behavior\r\n\r\nBefore even triggering the custom protocol handler, the download-item emits 'done' with a state of 'interrupted'. In my demo linked below, I use the new registerStreamProtocol, but I was able to reproduce using registerHttpProtocol as well.\r\n\r\n### How to reproduce\r\n\r\nUse [URL]\n\n[Context/Logs]:\n- Im booting up my linux box to do some debugging on the electron codebase. Will report what I find (hopefully will be able to PR a fix).\n- This is getting logged by chromium:\r\n\r\n```\r\n[19102:0117/142535.172538:WARNING:url_request_job_manager.cc(90)] Failed to map: custom://foo.com/index.html\r\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- The fix has landed in `master` (and `2-0-x`) but not in `1-8-x`.\r\n@ckerr, @jkleinsc Do we want to backport it to `1-8-x`?\n- @alexeykuzmin I'll backport to 1-8-x"}
{"project_id": "Electron", "bug_id": "31", "source_type": "github", "llm_input_text": "[Title]: Fix \"nativeImage module addRepresentation() ...\" tests\n[Symptom]:\nThey were disabled during the Chromium 61 upgrade. Fix them and enable.\r\n\r\n/cc @alespergl\n\n[Context/Logs]:\n- The tests are fixed, but there is a follow-up task: #11294."}
{"project_id": "Electron", "bug_id": "32", "source_type": "github", "llm_input_text": "[Title]: Fix \"  tag found-in-page event emits when a request is made\" test\n[Symptom]:\nIt was disabled during the Chromium 61 upgrade. Fix it and enable.\r\n\r\n/cc @deepak1556\n"}
{"project_id": "Electron", "bug_id": "33", "source_type": "github", "llm_input_text": "[Title]: Preload script executed twice on Electron 2.0.x\n[Symptom]:\n* Electron version: `2.0.0-beta.1`\r\n* Operating system: macOS\r\n\r\n### Expected behavior\r\n\r\nPreload script should execute once\r\n\r\n### Actual behavior\r\n\r\nPreload script (and in fact `node_bootstrap.js`) is executed twice in the same process but in a different context.\r\n\r\n### How to reproduce\r\n\r\nStruggling to isolate this from the application that is experiencing it but I have narrowed it down to this being _kind of_ expected behavior but with a newly introduced bug in `2.0.x`.  Basically when you call `loadURL` a renderer process is initially launched pointing at `about:blank`.  In this process `renderer/init.js` is called and then the window navigates to the URL you requested.\r\n\r\nFor an as yet unknown reason in `2.0.x` the `--preload` argument is present on the renderer process when the `about:blank` page is loaded causing user code to execute twice in the same process.  This is only a problem because native modules can only be loaded once in a given process.\r\n\r\nThe fix for this would be to revert to original behavior where the `--preload` (amongst others) arguments are not sent to the renderer until the users page is loaded.  (Don't send them for `about:blank`).\r\n\r\nI'm currently working on a minimal sample\n\n[Context/Logs]:\n- Did you manage to find a minimal sample? It'd be great to have a test for this."}
{"project_id": "Electron", "bug_id": "34", "source_type": "github", "llm_input_text": "[Title]: After  .clearHistory(),  .canGoBack() reports false after navigating\n[Symptom]:\nindex.html contents:\r\n```\r\n \r\n```\r\n\r\nSteps:\r\n1. Open `BrowserWindow` to `index.html`, which navigates to google\r\n2. Perform a search to generate history\r\n3. In development console: `document.querySelector('webview').canGoBack()` is `true`\r\n4. In development console: `document.querySelector('webview').clearHistory()`\r\n5. In development console: `document.querySelector('webview').canGoBack()` is `false`\r\n6. Click on a search result link to generate history\r\n7. In development console: `document.querySelector('webview').canGoBack()` is `false`\r\n\r\nStep 7, canGoBack() reports false, where it should report true.\r\n\r\nElectron version: 1.8.2\r\nOperating system: OSX High Sierra 10.13.1 (17B1003)\n\n[Context/Logs]:\n- Seems there's some upstream chatter about this: [URL]\n- @codebytere Thanks for looking. Don't know if your link is mobile specific, or even along the same code path.  clearHistory(), navigate, canGoBack() == false seems pretty vanilla.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for your issue!\r\n\r\nWe haven't gotten a response to our questions in our comment above. With only the information that is currently in the issue, we don't have enough information to take action. I'm going to close this but don't hesitate to reach out if you have or find the answers we need, we'll be happy to reopen the issue.\n- FYI for googlers, the issue seems to be not fixed an the moment.\r\n\r\nMy work-arounds is the following:\r\n```\r\nwebContents.clearHistory();\r\nwebContents.executeJavaScript(\"history.pushState({}, '', location.href)\");\r\n```"}
{"project_id": "Electron", "bug_id": "35", "source_type": "github", "llm_input_text": "[Title]: After  .clearHistory(),  .canGoBack() reports false after navigating\n[Symptom]:\nindex.html contents:\r\n```\r\n \r\n```\r\n\r\nSteps:\r\n1. Open `BrowserWindow` to `index.html`, which navigates to google\r\n2. Perform a search to generate history\r\n3. In development console: `document.querySelector('webview').canGoBack()` is `true`\r\n4. In development console: `document.querySelector('webview').clearHistory()`\r\n5. In development console: `document.querySelector('webview').canGoBack()` is `false`\r\n6. Click on a search result link to generate history\r\n7. In development console: `document.querySelector('webview').canGoBack()` is `false`\r\n\r\nStep 7, canGoBack() reports false, where it should report true.\r\n\r\nElectron version: 1.8.2\r\nOperating system: OSX High Sierra 10.13.1 (17B1003)\n\n[Context/Logs]:\n- Seems there's some upstream chatter about this: [URL]\n- @codebytere Thanks for looking. Don't know if your link is mobile specific, or even along the same code path.  clearHistory(), navigate, canGoBack() == false seems pretty vanilla.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for your issue!\r\n\r\nWe haven't gotten a response to our questions in our comment above. With only the information that is currently in the issue, we don't have enough information to take action. I'm going to close this but don't hesitate to reach out if you have or find the answers we need, we'll be happy to reopen the issue.\n- FYI for googlers, the issue seems to be not fixed an the moment.\r\n\r\nMy work-arounds is the following:\r\n```\r\nwebContents.clearHistory();\r\nwebContents.executeJavaScript(\"history.pushState({}, '', location.href)\");\r\n```"}
{"project_id": "Electron", "bug_id": "36", "source_type": "github", "llm_input_text": "[Title]: -webkit-app-region: drag prevents clicks on overlapping browser view\n[Symptom]:\n* Electron version: 1.8.2\r\n* Operating system: macos 10.13.3\r\n\r\nReproducing repo: [URL]\r\n\r\nDemonstrates a bug where `-webkit-app-region: drag` causes a browser view in front of it to miss click events. Oddly - it does not prevent hover events.\r\n\r\nSteps:\r\n1. Clone [URL] `yarn install`, `yarn start`\r\n2. Click \"button1\"\r\n3. Click \"button2\"\r\n\r\nExpected:\r\n\r\nClicking button1 or button2 pops up an alert: \"button clicked!\"\r\n\r\nActual:\r\n\r\nOnly clicking button2 pops up an alert: \"button clicked!\"\n\n[Context/Logs]:\n- I filed this because we have an issue where a browser view will stop responding to click events.\r\nDigging into it further, I think this is because the browser view can `UpdateDraggableRegions` if it's not currently in the window.\r\n\r\nFor example, if\r\n1. the `app-region: drag` div is behind a browser view and has 100px height\r\n2. switch to a second browser view\r\n3. change the `app-region: drag` div to have 10px height\r\n4. switch back to the first browser view\r\n\r\nThan the first browser view will still not respond to click as if the drag region was 100px, even though it is now actually 10px.\n- I did a manual bisect of the issue using @ibash's very helpful repository, and it looks like it's existed as long as `app-region: drag` was supported by `BrowserView`. I was able to reproduce on 1.7.7, but not 1.7.6 (which makes sense, because I don't think `app-region: drag` was supported for browser views before 1.7.7\n- ... [Middle Discussions Snipped for Brevity] ...\n- @ibash Thanks for reporting this! I'll work on a fix.\n- Woo woo!\n\nIslam Sharabash\n217-377-9657\n\nSent via Superhuman iOS ( [URL] )\n\nOn Tue, Mar 20 2018 at 7:41 AM, Conrad Irwin   wrote:"}
{"project_id": "Electron", "bug_id": "37", "source_type": "github", "llm_input_text": "[Title]: saveDialog should list available extensions\n[Symptom]:\n* Electron version: 1.7.5\r\n* Operating system: macOS Sierra 10.12.6\r\n\r\n### Expected behavior\r\n\r\nWhen creating a `saveDialog` with multiple extensions configured in `.filter`, the dialog should allow the user to pick an extension, like here:\r\n\r\n[Image: screen shot 2017-08-23 at 12 07 51]\r\n\r\n### Actual behavior\r\n\r\nThere is no extension picker:\r\n\r\n[Image: screen shot 2017-08-23 at 12 08 13]\r\n\r\n### How to reproduce\r\n\r\n```\njs\r\nconst { dialog } = require('electron').remote\r\n\r\ndialog.showSaveDialog({\r\n  filters: [\r\n... [Log Snipped] ...\n  ]\r\n}, filePath => {})\n```\n"}
{"project_id": "Electron", "bug_id": "38", "source_type": "github", "llm_input_text": "[Title]: Invisible menu on Linux\n[Symptom]:\n* Electron version: 2.0.0-beta.3\r\n* Operating system: Ubuntu 16.04.04 LTS\r\n\r\n### Expected behavior\r\n\r\nApp menu should be visible\r\n\r\n### Actual behavior\r\n\r\nApp menu is invisible\r\n\r\n### How to reproduce\r\n\r\n- Run `electron`\r\n- Observe that the app menu is invisible. It is still possible to open submenus.\r\n\r\n[Image: screenshot from 2018-03-14 17-01-18]\n\n[Context/Logs]:\n- @alespergl I do not see that. Just installed a fresh Ubuntu 16.04 LTS running via Parallels on macOS:\r\n\r\n[Image: image]\n- Interesting! I'm not seeing this in 17.10. I'll see if I can reproduce the behavior in 16.04 LTS.\r\n\r\n[Image: menu-ubuntu-17 10-radiance-theme]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Still observable on Ubuntu 16.04 running electron version \r\nelectron --version = v8.0.1\r\nrun electron or any electron based application. No menus are shown.\n- I am new to Electron, but I can try to debug this on my system if someone has some suggestions on where to look initially."}
{"project_id": "Electron", "bug_id": "39", "source_type": "github", "llm_input_text": "[Title]: Fix \"crashReporter module\" tests\n[Symptom]:\nThey were disabled during the Chromium 61 upgrade. Fix them and enable.\r\n\r\n/cc @codebytere\n"}
{"project_id": "Electron", "bug_id": "40", "source_type": "github", "llm_input_text": "[Title]: executeJavaScript does not work in sandbox mode\n[Symptom]:\n* Electron version: 1.6.4\r\n* Operating system: macOS\r\n\r\n### Expected behavior\r\n\r\nexecuteJavaScript should return the result in callback or resolve/reject the promise\r\nIt works in not-sandbox mode\r\n\r\n### Actual behavior\r\n\r\nThe callback is never called. The returned promise is never resolved\r\n\r\n### How to reproduce\r\n\r\nIn did-finish-load:\r\n```JS\r\nwebContents.executeJavaScript('123', false, res => {\r\n   // never called\r\n})\r\n```\r\nor\r\n```JS\r\nconst res = await webContents.executeJavaScript('123')\r\n// never resolved\r\n```\r\n\r\nSame if the js code is a promise or some other value.\n\n[Context/Logs]:\n- Looks like this is related to [URL]\n- Also seeing this on Linux, version 1.8.2.\n- Is there any update on this? Recently tried with v2.0.0-beta.4 and can confirm `executeJavaScript` still does not work for ` ` with sandbox enabled.\n- Confirmed, this is still happening on 2.0.x. I'll take a look."}
{"project_id": "Electron", "bug_id": "41", "source_type": "github", "llm_input_text": "[Title]: HTML5 Notifications broken in 3.0.0-beta\n[Symptom]:\n* Electron Version: 3.0.0-beta.1 or 3.0.0-beta.2\r\n* Operating System (Platform and Version): macOS 10.13 (High Sierra)\r\n* Last known working Electron version: 2.0.4\r\n\r\n**Expected Behavior**\r\nWhen a html5 notification is triggered from the renderer, a toast alert should appear\r\n\r\n**Actual behavior**\r\nNo toast alert is appearing when a html5 notification is triggered from the renderer\r\n\r\n**To Reproduce**\r\n```sh\r\n$ git clone [URL] -b notifications-3beta\r\n$ npm install\r\n$ npm start || electron .\r\n```\r\nClick on the \"send notification\" button in the renderer.\r\n\r\n**Screenshots**\r\n\r\n***Working (2.0.4)***\r\n[Image: electron 2 0 4 notifications]\r\n\r\n***Not Working (3.0.0-beta.2)***\r\n[Image: electron 3 0 0 beta 2 notifications]\r\n\r\n**Additional Information**\r\nN/A\n\n[Context/Logs]:\n- An update, tried on the main process, works fine.\n- Thanks for fixing this. Let me please follow up with a (probably) related issue: I used to send an HTML5 Notification from the preload script of a `BrowserWindow`. This works fine in version 2.0.5, but no more in 3.0.0-beta.3 with a `ReferenceError: Notification is not defined`.\n- @jakobvogel Better to create a new ticket for that and reference this."}
{"project_id": "Electron", "bug_id": "42", "source_type": "github", "llm_input_text": "[Title]: Web Audio Bug With Removing 'Default' Audio Output on Windows OS\n[Symptom]:\n* Electron version: 1.7.8 - 2.0.0 beta 4\r\n* Operating system: Windows 10\r\n\r\n### Expected behavior\r\n\r\nWhen the 'default output' for the OS is removed, electron should fall back to some other device, and the audio stream for the input device should not be corrupted.\r\n\r\n### Actual behavior\r\n\r\nRemoving the 'default' output device corrupts the audio of the app.\r\n\r\n### How to reproduce\r\n\r\n```bash\r\ngit clone [URL]\r\ncd electron-quick-start/\r\nyarn / npm install\r\nyarn start / npm start\r\n```\r\n\r\nStart with a computer with Windows installed. The bug will be easiest to see with at least 2 devices attached. In your Windows settings, check which audio device is set to 'default' for output. Your default for input does not matter.\r\n\r\nStart up electron like normal. When you talk into your mic, you should see the number 0 on the screen become some higher number corresponding to how loud you are talking. You should also hear yourself from the 'default' audio device. \r\n\r\nNow, remove the device that is set to 'default' for output on your os. You will see that the number reflecting your volume freezes and the audio stops. It becomes impossible to recover the audio connection for the duration of the session.\r\n\r\nThis is not normal. If you open index.html in Chrome, you will see that it will fall back to another device and your stream will continue, uninterrupted.\n\n[Context/Logs]:\n- Bah. I was cleaning my copy/paste buffer and it went off.\n- Thank you for taking the time to report this issue and helping to make Electron better.\r\n\r\nThe version of Electron you reported this on has been superseded by newer releases. \r\n\r\nIf you're still experiencing this issue in Electron v4.2.x or later, please add a comment specifying the version you're testing with and any other new information that a maintainer trying to reproduce the issue should know.\r\n\r\nI'm setting the `blocked/need-info` label for the above reasons. This issue will be closed 7 days from now if there is no response.\r\n\r\nThanks in advance! Your help is appreciated.\n- Thank you for your issue!\r\n\r\nWe haven't gotten a response to our questions in our comment above. With only the information that is currently in the issue, we don't have enough information to take action. I'm going to close this but don't hesitate to reach out if you have or find the answers we need, we'll be happy to reopen the issue."}
{"project_id": "Electron", "bug_id": "43", "source_type": "github", "llm_input_text": "[Title]: Double trayicon menu when session name does not match hardcoded ones\n[Symptom]:\n* Electron version: master branch\r\n* Operating system: Ubuntu 18.04\r\n\r\n### Expected behavior\r\nClick on tray icon shows only one menu from the system\r\n\r\n### Actual behavior\r\nClick on tray icon shows two menus, one from the system and one white\n"}
{"project_id": "Electron", "bug_id": "44", "source_type": "github", "llm_input_text": "[Title]: Crash on Yosemite\n[Symptom]:\n```\njavascript\nProcess:               Prepros [8704]\nPath:                  /Users/USER/*/Prepros.app/Contents/MacOS/Prepros\nIdentifier:            com.alphapixels.prepros\nVersion:               {{version}}\n... [Log Snipped] ...\nUSB Device: iPhone\nThunderbolt Bus: MacBook Pro, Apple Inc., 17.1\n```\n\n[Context/Logs]:\n- With Yosemite poised to hit the shelves within the next couple of weeks, has there been any update on this?"}
{"project_id": "Electron", "bug_id": "45", "source_type": "github", "llm_input_text": "[Title]: Spellcheck-provider never called, spellchecking thus broken\n[Symptom]:\n* Electron Version: 3.0.0-beta.1\r\n* Operating System (Platform and Version): macOS 10.13 (but all others seem affected, too)\r\n* Last known working Electron version: 2.0.x\r\n\r\n**Expected Behavior**\r\nSpellchecking should work: After calling `webFrame.setSpellCheckProvider` with a given provider, that provider's `spellCheck()` method should be called.\r\n\r\n**Actual behavior**\r\nCalling `webFrame.setSpellCheckProvider` seems to have no effect - the provider is simply never called.\r\n\r\n**To Reproduce**\r\nClone the repo below and start the app. The spellcheck provider is configured to log each input word. However, it appears that `spellCheck` is never called.\r\n\r\n```sh\r\ngit clone [URL]\r\ncd electron-3-spellcheck\r\nnpm install\r\nnpm start || electron .\r\n```\n\n[Context/Logs]:\n- 3-0-x branch by trop: [URL]"}
{"project_id": "Electron", "bug_id": "46", "source_type": "github", "llm_input_text": "[Title]: CLI wrapper does not respond to SIGINT or SIGTERM\n[Symptom]:\n### Expected behavior\r\n\r\n`SIGINT` / `SIGTERM` kill signals should exit the `electron` child process\r\n\r\n### Actual behavior\r\n\r\nThey don't \ud83d\ude06 \r\n\r\n### How to reproduce\r\n\r\n```js\r\n// From a node.js script\r\nconst child = childProcess.spawn(process.execPath, ['./node_modules/electron/cli.js']);\r\nsetTimeout(() => {\r\n  child.kill('SIGTERM');\r\n}, 2000);\r\n```\n"}
{"project_id": "Electron", "bug_id": "47", "source_type": "github", "llm_input_text": "[Title]: Error: Cannot get property 'id' on missing remote object\n[Symptom]:\n* Electron version: 2.0.0-beta.4\r\n* Operating system: macOS 10.13.3\r\n\r\n### Expected behavior\r\n\r\nA reload of the window works.\r\n\r\n### Actual behavior\r\n\r\nA reload of the window does not work.\r\n\r\n### How to reproduce\r\n\r\n* run VSCode exploration ([Link: download])\r\n* run \"Reload Window\" command\r\n* sometimes I see the window stay blank after doing so and checking the console I see:\r\n\r\n```\nUncaught (in promise) Error: Cannot get property 'id' on missing remote object 3\r\nError: Cannot get property 'id' on missing remote object 3\r\n    at throwRPCError (/Applications/Visual Studio Code - Exploration.app/Contents/Resources/electron.asar/browser/rpc-server.js:143:17)\r\n    at EventEmitter.  (/Applications/Visual Studio Code - Exploration.app/Contents/Resources/electron.asar/browser/rpc-server.js:384:7)\r\n    at emitThree (events.js:136:13)\r\n... [Log Snipped] ...\n    at new Promise ( )\r\n    at file:///Applications/Visual%20Studio%20Code%20-%20Exploration.app/Contents/Resources/app/out/vs/workbench/electron-browser/bootstrap/index.js:10:838\n```\n\n[Context/Logs]:\n- Some more details: We seem to be doing a very early call to [Link: `remote.getCurrentWindow().id`] from our `index.js` which is loaded from our `index.html` that is loaded into the window. \r\n\r\nI am not able to reproduce from `2.0.0-beta3` so far.\n- Steps:\r\n* setup VSCode to run out of sources (https://github.com/Microsoft/vscode/wiki/How-to-Contribute#build-and-run)\r\n* start it up\r\n* open some editors\r\n* close some editors\r\n* trigger reload (Cmd+R)\r\n\r\n=> window stays blank\r\n\r\n[Image: before]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Early in the day I left this in #12339:\r\n\r\n[URL]\r\n\r\nhope it helps\n- Thanks for the repro @smotaal was super helpful \ud83d\udc4d"}
{"project_id": "Electron", "bug_id": "48", "source_type": "github", "llm_input_text": "[Title]: BrowserWindow.webContents.executeJavaScript does not work in 3.0.0-beta.1\n[Symptom]:\n* Electron Version: 3.0.0-beta.1\r\n* Operating System (Platform and Version): Arch Linux x64\r\n* Last known working Electron version:  2.0.3\r\n\r\non `did-finish-load` the following code is not executed at all:\r\n```javascript\r\nmainWindow.webContents.executeJavaScript(`console.log(\"hello world\");`);\r\n```\r\n\r\nIt was working with version 2.0.x\n\n[Context/Logs]:\n- I ran the following code from the renderer process\r\n\r\n```js\r\nrequire('electron').remote.getCurrentWebContents().executeJavaScript('console.log(\\'foo\\')')\r\n```\r\n\r\nAnd the console log appeared as expected, can you provide a minimal repro, it may be a timing issue in your code introduced by a timing change in the C66 upgrade.\r\n\r\nPlease @ mention me once a repro is provided for follow up \ud83d\udc4d\n- here is a sample code:\r\n```\njavascript\r\nconst { app, BrowserWindow } = require('electron');\r\n\r\nlet mainWindow;\r\n\r\n... [Log Snipped] ...\n        createMainWindow(); // macOS style\r\n});\n```\r\n\r\nExecuting it with electron 3.0.0-beta.1 won't print anything in the console. With electron 2.0.4 you get \"hello\" message in console.\n- ... [Middle Discussions Snipped for Brevity] ...\n- another update: using `dom-ready` instead of `did-finish-load` works even with 3.0.0-beta.2 (javascript code is executed):\r\n\r\n```javascript\r\n    mainWindow.webContents.on(\"dom-ready\", () => {\r\n        console.log(\"finish\");\r\n        mainWindow.webContents.executeJavaScript(`console.log(\"hello\");`); // <--- this does does execute even with electron-3.0.0-beta.x\r\n    });\r\n```\r\nHowever this is not a suitable workaround in my real application because I need to execute my javascript from main process **after**  the `onload` event has been fired on rendering process. And according to documentation, the right one is [Link: did-finish-load]:\r\n\r\n\r\nAnd again this works as expected in version 2.0.x\n- @MarshallOfSound sorry I didn't read your last sentence and forgot to mention you..."}
{"project_id": "Electron", "bug_id": "49", "source_type": "github", "llm_input_text": "[Title]: 3.0.x regression: Object has been destroyed upon quit with multiple windows open\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: 3.0.0-beta.10\r\n* Operating System (Platform and Version): macOS 10.13.6\r\n* Output of `node_modules/.bin/electron --version` on last known working Electron version (if applicable): 2.0.x\r\n\r\n**Expected Behavior**\r\nQuitting should not throw a runtime exception.\r\n\r\n**Actual behavior**\r\nQuit and observe the following exception:\r\n\r\n```\r\nA JavaScript error occurred in the main process\r\n\r\nUncaught Exception:\r\nError: Object has been destroyed\r\n    at App.app.on (/private/var/folders/w_/xgfzkgq14jv_ykk2lm0k_h5c0000gn/T/tmp-62270YFNEZpiSIoql/main.js:39:38)\r\n    at App.emit (events.js:182:13)\r\n    at BrowserWindow.on (/Users/bpasero/Library/Application Support/Electron Fiddle/electron-bin/3.0.0-beta.10/Electron.app/Contents/Resources/electron.asar/browser/api/browser-window.js:103:9)\r\n    at BrowserWindow.emit (events.js:182:13)\r\n```\r\n\r\n**To Reproduce**\r\nFiddle: [URL]\r\n\r\nKey is to open multiple windows and install a `app.on('browser-window-focus')` listener that accesses the `window.id` property. \r\n\r\nMaybe related to [URL] (@nitsakh)\n\n[Context/Logs]:\n- Confirming this issue on Windows 7 x64 as well. \r\n\r\nThis didn't seem to be a problem in 3.0 betas 7 and 8, though it's possible that I just didn't run into it.\n- It looks like everything is under control here, but for good measure:\r\n\r\nAppending my last report, I've been able to recreate this on `3.0.0-beta.7` on Windows 7.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I could have chosen my words better. I've only run into it once. I was surprised by it, but I dug into my `node_modules` and saw that I was indeed on `beta.7.` If I run into this again I'll try to produce a repo.\n- @deepak1556 I've not narrowed it down completely yet, but it seems to only occur if a window besides the first one created is paused in the debugger when you use `app.quit()`. If this is correct, it should hardly be a concern for production. It's possible this comes from my own code somehow."}
{"project_id": "Electron", "bug_id": "50", "source_type": "github", "llm_input_text": "[Title]: Notification (+115 more) APIs aren't defined synchronously in preload scripts\n[Symptom]:\n* Electron Version: 3.0.0-beta.3\r\n* Operating System (Platform and Version): macOS 10.13.6\r\n* Last known working Electron version: 2.0.5\r\n\r\n**Expected Behavior**\r\nWhile launching the app, a notification should be triggered via the preload script of the `BrowserWindow`.\r\n\r\n**Actual behavior**\r\nAn error is reported on the console: `ReferenceError: Notification is not defined`\r\n\r\n**To Reproduce**\r\n```sh\r\n$ git clone [URL] -b preload-notifications-3beta\r\n$ npm install\r\n$ npm start || electron .\r\n```\r\n\r\n**Screenshots**\r\n_Working (2.0.5)_\r\n[Image: screen shot 2018-07-24 at 15 02 37]\r\n\r\n_Not Working (3.0.0-beta.3)_\r\n[Image: screen shot 2018-07-24 at 15 00 56]\r\n\r\n**Additional Information**\r\nGeneral HTML5 Notification support was already discussed in #13620 and fixed.\n\n[Context/Logs]:\n- I noticed this too. The `Notification` API *is* available in preload scripts, but not synchronously like it was previously.\r\n\r\n```\njs\r\n// preload.js\r\n\r\ncheck()\r\nprocess.nextTick(check)\r\n... [Log Snipped] ...\n  console.log(performance.now(), window.Notification)\r\n}\n```\r\n<img width=\"375\" alt=\"screen shot 2018-08-07 at 6 15 20 am\" src=\"[URL]\n- It looks like this applies to far more than the `Notification` API.\r\n```\njs\r\n// preload.js\r\n\r\nfunction getGlobalNames() {\r\n  return Object.getOwnPropertyNames(global).filter(key => typeof global[key] == \"function\").sort()\r\n... [Log Snipped] ...\n  console.log(`async only (${newGlobals.length}): ${newGlobals.join(\", \")}`)\r\n})\n```\r\n\r\n**Electron 3.0.0-beta.5**\r\n<img width=\"797\" alt=\"screen shot 2018-08-15 at 10 11 22 am\" src=\"[URL]\r\n\r\n**Electron 2.0.7**\r\n<img width=\"796\" alt=\"screen shot 2018-08-15 at 10 12 43 am\" src=\"[URL]\n- @javan ... thanks a lot for your work! The `setTimeout` trick does the job, at least for now. \ud83d\udc4d\n- This broke when we bumped dependencies in bcbcb4c64.\r\n\r\nWorked in b4cce8e24:\r\n\r\n\r\nBroken in bcbcb4c64:"}
{"project_id": "Electron", "bug_id": "51", "source_type": "github", "llm_input_text": "[Title]: Windows GN build does not recognize high DPI screens\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: `4.0.0-nightly.20180823`\r\n* Operating System (Platform and Version): Windows\r\n* Output of `node_modules/.bin/electron --version` on last known working Electron version (if applicable): `3.0.0-beta.10`\r\n\r\n**Expected Behavior**\r\nWindow should not be blurry at high DPI\r\n\r\n**Actual behavior**\r\nIt's blurry\r\n\r\n**To Reproduce**\r\nJust launch the default app on a high DPI screen and see how it's blurry, screenshot is attached.\r\n\r\n**Screenshots**\r\n[Image: image]\r\n\r\n\r\n**Additional Information**\r\nThis could be related to the GN build\r\n\r\ncc @nornagon\n\n[Context/Logs]:\n- @MarshallOfSound Have you tried to build Electron from the `master` from the very last commit with gyp build available?\n- @alexeykuzmin No, I just took the latest 3.0 beta, I can try master just before the gyp removal tomorrow.\n- Seems highly likely that this is related to the GN changes. I'll take a look today."}
{"project_id": "Electron", "bug_id": "52", "source_type": "github", "llm_input_text": "[Title]: Nothing is stored in App Data folder [Cause Discoverd]\n[Symptom]:\nVersion: stable   and 4.0 beta3\r\nOS: Windows 7 64bit\r\n\r\n## **Actual behavior**\r\n\r\nWhenever I changed anything about settings of DevTools, or I `localStorage.setItem`-ed anything, they worked only until I restarted my app.\r\nIn other words, all were lost instead of being saved permenantly.\r\n\r\nVery weird. And no hint of errors.\r\n\r\n## **Cause**\r\n\r\nFinally, I've found out why:\r\n\r\nI copied files of an old app folder of mine to start a new one.\r\nI edited \"package.json\", and tried to give the new app a different `\"productName\"`.\r\nHowever, I was distracted before I could make up my mind, and as a result, I mistakenly left the name with **an tailing whitespace**.\r\n\r\n## **To Reproduce**\r\n\r\n1. In \"package.json\", add a tailing whitespace to the value of `\"productName\"`.\r\n    For example, `\"My App \"`.\r\n2. Run Electron for this app.\r\n3. Go to the AppData folder \"C:\\Users\\{Your User Name}\\AppData\\Roaming\" (or, press `Win+R` and enter `%AppData%`)\r\n4. You will see the data folder for this app, but its name doesn't have that whitespace.\r\n    For example, \"My App\".\r\n5. In Electron, do anything with settings of DevTools, or set item of `localStorage`.\r\n6. Restart Electron and you will find all changes above are lost.\r\n7. And the data folder (\"My App\") will always be empty.\r\n\r\n\r\n## **Suggestion**\r\n\r\nAutomatically trim it when the value of `\"productName\"` is read by Electron.\n"}
{"project_id": "Electron", "bug_id": "53", "source_type": "github", "llm_input_text": "[Title]: Alert Box showing broken icon image\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: v2.0.5\r\n* Operating System (Platform and Version): Ubuntu 18.04LTS\r\n\r\n### Expected behavior\r\n\r\nalert box should show the app Icon.\r\n\r\n### Actual behavior\r\n\r\nalert box is showing no icon even though an app icon is set.\r\n[Image: screenshot from 2018-10-22 18-46-46]\r\n\r\n\r\n### How to reproduce\r\n* Open any electron app in debug mode (or run the app directly from the source).\r\n* in the developer console, type `alert('some_string')`\r\n* A dialog box appears with 'some_string' in it and a placeholder for the icon instead of the icon itself.\r\nRefer the image above.\n\n[Context/Logs]:\n- @ckerr , one more thing I would like to clarify is that, in our application,  \"alert()\" is being called by a server side page which does not have access to any of electron's methods.\n- @stagefright5 They both go down the same code both (`alert` and the `dialog` module)\r\n\r\n[URL]"}
{"project_id": "Electron", "bug_id": "54", "source_type": "github", "llm_input_text": "[Title]: speechSynthesis only have native voice\n[Symptom]:\n* Electron version: 1.7.10 & 1.8.2-beta.3\r\n* Operating system: windows 10 (16299.192)\r\n\r\n\r\nI am trying to make a program which will automatic read the lasting comment .\r\nso try to use the speechSynthesisAPI.\r\nI use `speechSynthesis.getVoices()` to get the voices i can use . \r\n\r\n\r\n### Expected behavior\r\n\r\nI expect I will get at least 5 voives just like in chrome\r\n\r\n\r\n[Image: a1]\r\n\r\nthe top five is local service .\r\n\r\n### Actual behavior\r\n\r\nbut when do this in electron , i only get a voices .\r\n\r\n\r\n[Image: a2]\r\n\r\n\r\n### How to reproduce\r\n\r\nrun `speechSynthesis.getVoices()` in the console of the page\n\n[Context/Logs]:\n- @shugen002 Chromium does not provide voices by default. See [URL]\n- @guest271314 Yes\uff0cso in the picture of the behavior of chrome the voice begin with google i don;t urge it appear in the list of voice in electron. But the voice begin with Microsoft should appear in the list . \r\nThese are the speech syntheis engine are installed in my system .\r\nin fact my system have not only 5 engines , it should be 11 .\r\n\r\n[Image: a3]\r\n\r\nbut consider of the system may have some limition , so i just hope it can appear 5 local installed engines.\r\n\r\nI notice that the 5 voices appear in chrome are different language , this problem may cause by chromium .\r\nbut electron just have native voices this one is  surely off normal. \r\n\r\nof course , if can let electron use all the engines installed in my system is better.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can we reopen this issues, since it is not yet fixed in the current electron version, but is actually fixable now (see comments above)?\n- This problem still exists. How can it be resolved?"}
{"project_id": "Electron", "bug_id": "55", "source_type": "github", "llm_input_text": "[Title]: [MAC] Electron rebuild issue on version v3.0.0\n[Symptom]:\n* Electron Version: `v3.0.0`\r\n* Operating System (Platform and Version): `Mac`\r\n* Last known working Electron version: `2.0.7`\r\n\r\n**Expected Behavior**\r\nRun `npm rebuild` should not fail\r\n\r\n**Actual behavior**\r\n```\n$ npm rebuild\r\n\r\n\r\n... [Log Snipped] ...\nnpm ERR! A complete log of this run can be found in:\r\nnpm ERR!     /Users/${user}/.npm/_logs/2018-08-16T11_03_51_217Z-debug.log\n```\r\n**To Reproduce**\r\n```\r\n$ npm install electron@3.0.0-beta.5\r\n$ npm rebuild\r\n```\n"}
{"project_id": "Electron", "bug_id": "56", "source_type": "github", "llm_input_text": "[Title]: enableMixedSandbox blocks devtools extension context\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`:\r\n* Operating System (Platform and Version):\r\n* Output of `node_modules/.bin/electron --version` on last known working Electron version (if applicable): 3.0.4\r\n\r\n**Expected Behavior**\r\ndevtools extension's page (`manifest.json`'s `devtools_page`) have electron's global `chrome.*` extension api context constructed.\r\n\r\n**Actual behavior**\r\n`devtools_page` doesn't have context, any calls to `chrome.*` will fail\r\n\r\n**To Reproduce**\r\n```\nconst {app, BrowserWindow} = require('electron')\r\n\r\n//enable mixed sandbox asap\r\napp.enableMixedSandbox();\r\n\r\n... [Log Snipped] ...\n  }\r\n})\n```\r\n\r\ndevtron is used for simplified repro, but any other devtools (i.e react devtools) will have same symptoms.\r\nlaunch electron, then open devtools will emit console logs like\r\n```\r\n[10800:1104/011325.639:ERROR:CONSOLE(7)] \"Uncaught ReferenceError: chrome is not defined\", source: chrome-extension://devtron/static/devtron.html (7)\r\n```\r\n\r\n**Screenshots**\r\nIf applicable, add screenshots to help explain your problem.\r\n\r\n**Additional Information**\r\nAdd any other context about the problem here.\n\n[Context/Logs]:\n- @kwonoj The specific example of `devtron` is a bit tricky in sandbox mode because there is no way to pass the required `require` method through to that extension (context isolated and sandboxed means it's just not possible).  I managed to make other extensions work correctly in sandbox mode though \ud83d\udc4d PR [URL]\n- @MarshallOfSound I'm totally fine with devtron not working (actually what I'm interested in is `react devtools`), so for me it's feasible fixes. Thanks for taking a quick look."}
{"project_id": "Electron", "bug_id": "57", "source_type": "github", "llm_input_text": "[Title]: Paste shortcut doesn't work in DevTools in 3.0.0\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: 3.0.0\r\n* Operating System (Platform and Version): macOS High Sierra 10.13.6\r\n* Output of `node_modules/.bin/electron --version` on last known working Electron version (if applicable): 2.0.0\r\n\r\n**Expected Behavior**\r\nHitting `Cmd+V` should paste the contents of the clipboard in the DevTools Console tab. \r\n\r\n**Actual behavior**\r\nNothing happens as if I haven't pressed anything.\r\n\r\n**To Reproduce**\r\nYou can run any Electron app running 3.0.0 and the issue will be reproduced. I tried it with our own project and also a boilerplate project that contained nothing but the setup code to run the app.\n\n[Context/Logs]:\n- I can reproduce, it looks like the \"Edit\" menu does not blink up in blue color when hitting Cmd+V and the dev tools are focused. This works fine in 2.0.x.\n- Reopening because the fix got reverted: [URL] (Just want to sure this doesn't get dropped.)\n- The fix wasn't reverted but it hasn't been backported to the 3-0-x branch\n- Confirmed this is fixed in 3.0.4, thanks so much"}
{"project_id": "Electron", "bug_id": "58", "source_type": "github", "llm_input_text": "[Title]: Inconsistencies in webview webpreferences parsing may expose unexpected security attack surface\n[Symptom]:\nI found inconsistencies in webview webpreferences parsing that may expose unexpected attack surface of an electron application. The root of the issue in implementation of [URL]\r\n\r\n1. For example if a webview is declared as:\r\n```html\r\n  \r\n```\r\n\r\nDespite it looks like `nodeIntegration` is disabled for the view, it is not, because a white space symbol before `nodeIntegration`.\r\n\r\nHowever it is silently broken only for the first item in comma separated list. In the example below `nodeIntegration` is disabled no matter how many spaces are between the name:\r\n\r\n```html\r\n  \r\n```\r\n\r\n2. While for Boolean settings possible values are only `1`, `0`, `yes` or `no` there is no [Link: warning] or secure fallback if it fails to parse the value:\r\n\r\n```html\r\n  \r\n```\r\n`nodeIntegration` won't be set neither to `true` nor `false`, but will be silently set to \" no\" and the actual behavior depends on the implementation of the code that reads and compares the value I didn't investigate.\r\n\r\nImpact:\r\nWhile a non-working setting can be easily detected during development if it is meant to enable some feature, a non-working security related setting that was meant to \"sandbox\" the view like `nodeIntegration=no` may slip unnoticed.\n"}
{"project_id": "Electron", "bug_id": "59", "source_type": "github", "llm_input_text": "[Title]: Failed to load browser extensions from directory spam\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: 2.0.x\r\n* Operating System (Platform and Version): macOS\r\n\r\n**Expected Behavior**\r\nNo error is printed to the console.\r\n\r\n**Actual behavior**\r\nAn error is printed to the console when starting Electron:\r\n\r\n```\nFailed to load browser extensions from directory: /Users/bpasero/Library/Application Support/code-oss-dev/DevTools Extensions\r\n{ Error: ENOENT: no such file or directory, open '/Users/bpasero/Library/Application Support/code-oss-dev/DevTools Extensions'\r\n    at Object.fs.openSync (fs.js:577:3)\r\n    at Object.module.(anonymous function) [as openSync] (ELECTRON_ASAR.js:166:20)\r\n    at Object.fs.readFileSync (fs.js:483:33)\r\n... [Log Snipped] ...\n  path:\r\n   '/Users/bpasero/Library/Application Support/code-oss-dev/DevTools Extensions' }\n```\r\n\r\nThe code in `chrome-extension.js:419` is spamming the console when running with logging enabled. That log is not very useful if the folder does not exist in the first place which should always be an expected condition.\n"}
{"project_id": "Electron", "bug_id": "60", "source_type": "github", "llm_input_text": "[Title]: Some ipc messages are not sent when contextIsolation and sandbox are set to true\n[Symptom]:\n* Electron version: 1.8.2\r\n* Operating system: MacOS, Windows10\r\n\r\n### Expected behavior\r\n\r\nipc messages from the main process should be sent to the renderer process when both `sandbox` and `contextIsolation` are set.\r\n\r\n### Actual behavior\r\n\r\nipc messages sent in listeners to webview events are not visible in the renderer process.\r\n\r\n### How to reproduce\r\n\r\n```\r\n$ git clone [URL]\r\n$ cd  /\r\n$ electron main.js \r\n```\r\n\r\nThe devtools will open and the console will log one message.  But the second message on the ipc `ping` channel is not observed.\r\n\r\nToggling either `sandbox` or `contextIsolation` to false allows the `ping` to travel to the renderer process.  In the 1.7.X branch setting both values to true still allows the message to pass through successfully.\n\n[Context/Logs]:\n- Updated issue to reflect this presents on Windows 10 as well.\n- Reproducible in 2.0.x on Ubuntu, as well\n- It looks like the same issue, but when I try to run this code on 1.7.x line, everything performs as expected.  It's only when you move to 1.8 that things stop being sent.\r\n\r\nI created a repo that has similar code to the gist above: [URL]\r\n\r\nCommit 98be5386 uses electron 1.7.15\r\nCommit 70af35f83 uses electron 1.8.2\r\n\r\nIn 1.7 the message is passed through correctly.\r\nIn 1.8 the message is not passed through.  \r\n\r\nWhile the commits reference 1.7.15, I also tried 1.7.3 directly to see if something may have happened in some commits in the 1.7.x line.\n- Thanks to @pcad for providing the context around the last version where it worked and first version where it didn't work."}
{"project_id": "Electron", "bug_id": "61", "source_type": "github", "llm_input_text": "[Title]: contentTracing categoryFilter regression on 2.0.0-beta.6\n[Symptom]:\n* Electron version: 2.0.0-beta.6\r\n* Operating system: confirmed on macOS locally, assume same on other OS\r\n\r\n### Expected behavior\r\n`disabled-by-default-memory-infra` should be collected.\r\n\r\n \r\n\r\n### Actual behavior\r\nIt is not. \r\n\r\n**It does seem some of other categories are also not working correctly, but hard to verify what's working vs. what's not working**\r\n\r\n \r\n\r\n### How to reproduce\r\n\r\nBelow's minimal code to automatically trigger content tracing, with single category filter `disabled-by-default-memory-infra` specified:\r\n\r\nindex.js\r\n```\nconst { app, BrowserView, BrowserWindow, contentTracing } = require('electron')\r\nconst path = require('path')\r\nconst url = require('url')\r\n\r\nlet win\r\n... [Log Snipped] ...\n  }\r\n})\n```\r\n\r\nindex.html\r\n```\n \r\n   \r\n     \r\n       \r\n       Hello World! \r\n... [Log Snipped] ...\n     \r\n   \n```\r\n\r\nOn 1.8.4, it collects memory infra stats correctly: \r\n[Image: image]\r\n\r\nOn 2.0.0, the collected trace is simply empty: \r\n[Image: image]\r\n\r\nthis is full trace metadata on 2.0.0. As you could see below, it doesn't contain any actual trace but only initial metadata when trace kicked off \r\n```\n{\"traceEvents\":[{\"pid\":93553,\"tid\":0,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"num_cpus\",\"args\":{\"number\":8}},\r\n{\"pid\":93553,\"tid\":13827,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"process_sort_index\",\"args\":{\"sort_index\":-1}},\r\n{\"pid\":93553,\"tid\":13827,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"process_name\",\"args\":{\"name\":\"GPU Process\"}},\r\n{\"pid\":93553,\"tid\":13827,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"process_uptime_seconds\",\"args\":{\"uptime\":10}},{\"pid\":93565,\"tid\":0,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"num_cpus\",\"args\":{\"number\":8}},\r\n{\"pid\":93565,\"tid\":21511,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"process_sort_index\",\"args\":{\"sort_index\":-5}},\r\n... [Log Snipped] ...\n{\"pid\":93551,\"tid\":26883,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\"process_name\",\"args\":{\"name\":\"Browser\"}},\r\n{\"pid\":93551,\"tid\":26883,\"ts\":0,\"ph\":\"M\",\"cat\":\"__metadata\",\"name\":\n...[Description Truncated]...\n\n[Context/Logs]:\n- @kwonoj did you verify this to work in `1-8-x`? The api file for `contentTracing` is identical between the `1-8-x` and `2-0-x` release line branches so i'm not sure it's a regression; if `1-8-x` does indeed work than it may be an upstream issue in chromium\n- @codebytere issue body attaches comparison between latest 1.8 and 2.0. With attached code snippet it can be reproduced easily.\n- I have been investigating the memory tracing. I think it is likely memory tracing was broken by this\u00a0chromium change -> [URL]\r\nIf a memory_dump_config is not set in tracing then memory dumps won't occur\u00a0periodically. This would mean no tracing for memory. Electron does not allow memory_dump_config to be specified currently.\r\nMaybe a fix would allow this to be set in tracing config.\n- I have a [Link: PR] for fixing the tracing of memory-infra by passing a full tracing config. Still a WIP but I am interested in feedback."}
{"project_id": "Electron", "bug_id": "62", "source_type": "github", "llm_input_text": "[Title]: getDisplayNearestPoint throws an error with not rounded numbers\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: 2.0.8\r\n* Operating System (Platform and Version): macOS (reproducible on all platforms)\r\n\r\n**Expected Behavior**\r\nWhen using `electron.screen.getDisplayNearestPoint()` with a not rounded value (like 0.5), electron should round it properly, or at least not crash. (or it should be documented, with a clearer error)\r\n\r\n**Actual behavior**\r\n  x_x\r\n  y: 100\r\n});\r\n```\n\n[Context/Logs]:\n- Issue found when debugging [URL]\n- I was about to document this as \"users should round these numbers\", then realized if that's the case for 100% of people we should just do the rounding in the converter \ud83e\udd14 I'll document that this is the new behavior and call it `semver/minor`"}
{"project_id": "Electron", "bug_id": "63", "source_type": "github", "llm_input_text": "[Title]: securityScopedBookmarks do not work properly (showOpenDialog())\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: v4.0.2\r\n* Operating System (Platform and Version): OSX 10.14.1\r\n* Output of `node_modules/.bin/electron --version` on last known working Electron version (if applicable):\r\n\r\n**Expected Behavior**\r\n```\r\ndialog.showOpenDialog({\r\n  ...\r\n  securityScopedBookmarks:   or  \r\n})\r\n```\r\nMAS build\r\n   \r\n      securityScopedBookmarks: false ==> bookmarks === []   \r\n      securityScopedBookmarks: true    \r\n     \r\n       Success:  bookmarks === [\"SLKDJFLKSDJLSJDLFJSLKJFLS..SJLD\"]   \r\n       Error:  bookmarks === ['']  \r\n     \r\n   \r\n \r\n**Actual behavior**  \r\nI get all sorts of unexpected behaviors. Note all of these are THE EXACT SAME CALLS.\r\n* On my development machine\r\n  * If I do a showOpenDialog() via a renderer window\r\n    * At first, it returns `[]`\r\n    * Then I try it via a main process\r\n    * Then I try again, and I get bookmarks back\r\n  * In main window\r\n    * I always get `bookmarks === []`\r\n      * For `securityScopedBookmarks: true` this is wrong! I should get `bookmarks === ['validbookmark']` or `bookmarks === [\"\"]` (ie: empty / error)\r\n  * In renderer, after trying it in main, I get valid bookmarks returned\r\n    * EVEN IF I SET `securityScopedBookmarks: false`\r\n* On a clean virtual machine, I always get `bookmarks === []`\r\n\r\nHere is an example of the output of my test - I am getting a bookmark returned even when securityScopedBookmars is set to false!\r\n```\nShowOpenDialog Results: \r\nsecurityScopedBookmarks setting: false \r\nisMas: true\r\nfilePaths: |/Users|\r\nbookmarks: |Ym9va/wBAAAAAAQQMAAAADhIsl+6AwP9UEecjjev0G5JVbcbiOTvz+X/GU0cUJ3vHAEAAAQAAAADAwAAAAgAKAUAAAABAQAAVXNlcnMAAAAEAAAAAQYAABAAAAAIAAAABAMAACrJCQAAAAAABAAAAAEGAAAsAAAACAAAAAAEAABBvxq0KQAAABgAAAABAgAAAgAAAAAAAAAPAAAAAAAAAAAAAAAAAAAACAAAAAEJAABmaWxlOi8vLwwAAAABAQAATWFjaW50b3NoIEhECAAAAAQDAAAA4AHj6AAAAAgAAAAABAAAQb/byy9eqf0kAAAAAQEAADIwODk1QzIxLUVFRDItNEU3MS1BNzQ2LTBFMUVFMzgwMjFBQhgAAAABAgAAgQAAAAEAAADvEwAAAQAAAAAAAAAAAAAAAQAAAAEBAAAvAAAAAAAAAAEFAACoAAAA/v///wEA\n...[Description Truncated]...\n\n[Context/Logs]:\n- @rr326 Yes, it's ok that file_dialog_mac.mm has two ShowOpenDialog functions - they have different signatures, one is used for when a callback to showOpenDialog was provided (and is the one which should get called in this case), and when no callback was set. Look at the ShowOpenDialog function in atom_api_dialog.cc, there it calls either one of those.\r\n\r\nTo me it seems that here [URL] the security_scoped_bookmarks flag is false and we proceed to call ReadDialogPaths. Looking at that implementation here [URL] it calls ReadDialogPathsWithBookmarks (which we want to call originally) but discards the returned bookmarks. This is in conformance with the observed behaviour of [] being returned in mas builds.\r\nWhy not just get rid of the `if (settings.security_scoped_bookmarks)` branch in OpenDialogCompletion and return the bookmarks in any case (which seem to be returned internally anyhow)?\n- @jfuechsl I'm happy to test that out to see if that works. It still steems strange to me - I seem to be getting behavior that shouldn't happen. Personally I'd put some logging code in to confirm that the parameters I set (settings.security_scoped_bookmarks) are in fact the same as what the function is getting. If not, then something else is amiss. \r\n\r\nBut as  I said this is beyond my ability to debug so if someone wants to do a build I'd be happy to test it on my setup.\n- ... [Middle Discussions Snipped for Brevity] ...\n- @rr326 I think that should be a separate PR.\r\nJust checked the documentation, yes it could be more detailed, would be great if you could do that.\r\n\r\nI will build electron (based on 4.0.5, with the PR applied) with MAS tonight. Once done I can share it with you.\n- @jfuechsl [Link: dialog.md] updated. Sorry - I couldn't figure out how to submit a PR to your repo. I'm new to this. \r\n\r\nJust let me know how else I can help."}
{"project_id": "Electron", "bug_id": "64", "source_type": "github", "llm_input_text": "[Title]: [win] Crash 3221225477 when try to open devtools\n[Symptom]:\n* **Electron Version** (output of `node_modules/.bin/electron --version`):\r\n  * 5.0.0-beta.2\r\n* **Operating System** (Platform and Version):\r\n  * Windows 7 Professional (SP1)\r\n\r\n### Expected Behavior\r\nNot crash\r\n\r\n### Actual behavior\r\nCrash 3221225477\r\n\r\n### To Reproduce\r\n[URL]\r\nbased on electron-quick-start. only updated electron to 5.0.0-beta.2\r\ntry to open devtools from menu - crash\n"}
{"project_id": "Electron", "bug_id": "65", "source_type": "github", "llm_input_text": "[Title]: [5.0.0-beta5] Inspect port argument ignored\n[Symptom]:\n* **Electron Version:**\r\n  * 5.0.0-beta5\r\n* **Operating System:**\r\n  * Windows 10 (1803) x64, Raspberry Pi Debian Stretch\r\n* **Last Known Working Electron version:**:\r\n  * 3.0.3\r\n\r\n### Expected Behavior\r\nStarting electron with --inspect=XXXX or --inspect-brk=XXXX should open the port XXXX for connecting with a debugger that supports the inspect protocol (e.g. VS Code).\r\n\r\n### Actual Behavior\r\nIf --inspect=XXXX or --inspect-brk=XXXX is supplied the opened port is always 9229 regardless of the supplied port XXXX. Depending on --inspect or inspect-brk the application starts or waits. Without supplying either no port is opened\r\n\r\n### To Reproduce\r\nStart electron with the arguments stated above.\n"}
{"project_id": "Electron", "bug_id": "66", "source_type": "github", "llm_input_text": "[Title]: Menu bar text not visible\n[Symptom]:\n* Output of `node_modules/.bin/electron --version`: v2.0.11\r\n* Operating System (Platform and Version): Arch Linux\r\n\r\n**Expected Behavior**\r\nMenu bar text font color should be white for a black/dark background.\r\n\r\n**Actual behavior**\r\nMenu bar text color is gray(close to black) with black background. So the text is unreadable.\r\n\r\n**To Reproduce**\r\nHave had this problem since installation.\r\n\r\n**Screenshots**\r\n[Image: atom]\r\n[Image: code]\r\n\r\n**Additional Information**\r\nI am facing this problem on both Atom and VS Code so I am presuming it to be related to Electron. This is happening on both light and dark themes. In fact there is no change in the menu bar colors for Adapta and Adapta-Nokto themes. I have read abt this issue on another thread here but it was last updated an year ago and mentions the problem being related to electron not having GTK3 support. I presume this has been achieved so I dont know what to do now.\n\n[Context/Logs]:\n- Possible that we didn't notice this until #14813 .. :roll_eyes: :laughing:\n- #14813 seems to have been fixed in v2.0.11 according to release logs. But its not working for me on v2.0.11 or v2.0.12.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Note that this affects a default install of Ubuntu 18.10 but not 18.04 LTS, because 18.04 still uses the old theme.\r\n\r\nSome affected applications on Ubuntu 17.10:\r\n\r\n* vscode\r\n* mattermost 4.2.0\r\n* skype\r\n* atom beta\n- This seems to be happening again. Have seen it in the latest releases of mattermost-desktop, vscode, and atom 1.33.0 on Pop!_OS 18.10 (and from previous references, Ubuntu 18.10)."}
{"project_id": "Electron", "bug_id": "67", "source_type": "github", "llm_input_text": "[Title]: Chromedriver for electron 5.0.0-beta.5 not connecting\n[Symptom]:\n* **Electron Version:**\r\n  * 5.0.0.beta-5\r\n* **Electron Chromedriver-Version:**\r\n  * 5.0.0.beta-5 (\"2.45 ( )\")\r\n* **Operating System:**\r\n  * macOS 10.12.6, same issues on win64 and linux64\r\n\r\n### Expected Behavior\r\nThe electron-app should start and the the chromedriverdriver should connect\r\n\r\n### Actual Behavior\r\nThe electron-app starts and the driver does not connect but fails with the general error \"DevToolsActivePort file doesn't exist\"\r\n\r\n### To Reproduce\r\nUsing Java and current Selenium bindings:\r\n```java\r\nSystem.setProperty(\"webdriver.chrome.driver\",\"/Users/pascal/Downloads/chromedriver-v5.0.0-beta.5-darwin-x64/chromedriver\");\r\n\r\nChromeOptions options = new ChromeOptions();\r\noptions.setBinary(\"/data/common/electron/CarConfig 5.0.0-beta.5.app/Contents/MacOS/CarConfig\");\r\nWebDriver driver = new ChromeDriver(options);\r\nSystem.out.println(\"I'm fine\"); // Never reaches that point\r\ndriver.quit();\r\n```\r\n\r\n### Additional Information\r\nVerbose Chromedriver log:\r\n```\n[1552406650.692][INFO]: [ ] COMMAND InitSession {\r\n   \"capabilities\": {\r\n      \"firstMatch\": [ {\r\n         \"browserName\": \"chrome\",\r\n         \"goog:chromeOptions\": {\r\n... [Log Snipped] ...\n[1552406710.903][DEBUG]: Log type 'driver' lost 0 entries on destruction\r\n[1552406710.903][DEBUG]: Log type 'browser' lost 0 entries on destruction\n```\n\n[Context/Logs]:\n- I had similar issue with electron 4.1.0 when trying to run robot framework tests with chromedriver. In the same setup spectron tests worked fine but with robot and manually started chromedriver it just couldn't connect to my app.\r\n\r\nIt turned out that the `--remote-debugging-port` argument was the issue in my case. When running spectron tests chromedriver started my app with `--remote-debugging-port=12209` and when running robot tests it received `--remote-debugging-port=0`. Manually defining the port argument in my robot test fixed the issue for me. Something might have changed in chromedriver because with older 3.x.x electron chromedriver it defines the port argument correctly.\n- Hey @pbi-qfs can you give this a test on `5.0.0-beta.6` please \ud83d\udc4d\n- ... [Middle Discussions Snipped for Brevity] ...\n- @pbi-qfs Something that would really help us maybe narrow this down is a minimal repro.\r\n\r\nJust `electron-quick-start` and a single command to run that _should_ work but doesn't.\r\n\r\nIf you can make that repo and post it here I can revisit this.\n- @MarshallOfSound \r\n\r\nI prepared the small demo here: [URL]\r\n\r\nRuns a java-based selenium test on mac."}
{"project_id": "Electron", "bug_id": "68", "source_type": "github", "llm_input_text": "[Title]: full support for multiple webkitdirectory\n[Symptom]:\nfile . multiple webkitdirectory in chrome can get sub files.but atom-shell can select directory,sub file set only current directory? is bug?\n\n[Context/Logs]:\n- +1 - only one file in the htmlElement.files and it only brings its basic info...\n- +1 I'm seeing this as well. On chrome localhost it works perfectly but once built for electron it only gets the selected folder name.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I think it would be really helpful if that issue was addressed, especially since the workaround is quite troublesome.\n- +1 on the fix. Labelling this as `wontfix` and making people use beyond hacky workarounds is completely unacceptable."}
{"project_id": "Electron", "bug_id": "69", "source_type": "github", "llm_input_text": "[Title]: How to catch alert is open to close it or disable alert function on iframe?\n[Symptom]:\n**Im using:**\r\nElectron: v1.8.0\r\nOS: Windows 10 Pro\r\n\r\n**My Code:**\r\n\r\n```\njavascript\r\nconst {app, BrowserWindow} = require('electron')\r\nfunction createWindow(){\r\n    mainWindow =  new BrowserWindow({\r\n        width: 800, \r\n... [Log Snipped] ...\n  }\r\n})\n```\r\n**And the result when i click \"Try it\":**\r\n[Image: My capture]\r\n\r\n**And how to catch alert is open to close it or another way to disable alert function in iframe?**\n\n[Context/Logs]:\n- Hey there, this doesn't appear to be an issue so much as a question about how to implement your desired functionality; have you tried asking this question in the slack rooms or other electron forums?\n- It is an issue.\r\nI try to using `preload `to disable function alert in `mainFrame`, it worked\r\nAnd when i try a page with `iframe `have `alert `function, the `preload` not worked.\r\n\r\nSo, is this a issue?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for taking the time to report this issue and helping to make Electron better.\r\n\r\nThe version of Electron you reported this on has been superseded by newer releases. \r\n\r\nIf you're still experiencing this issue in Electron v2.0.x or later, please add a comment specifying the version you're testing with and any other new information that a maintainer trying to reproduce the issue should know.\r\n\r\nI'm setting the `blocked/need-info` label for the above reasons.\r\n\r\nThanks in advance! Your help is appreciated.\n- Thank you for your issue!\r\n\r\nWe haven't gotten a response to our questions in our comment above. With only the information that is currently in the issue, we don't have enough information to take action. I'm going to close this but don't hesitate to reach out if you have or find the answers we need, we'll be happy to reopen the issue."}
{"project_id": "Electron", "bug_id": "70", "source_type": "github", "llm_input_text": "[Title]: window.open does not open anything when called from an iframe\n[Symptom]:\n* Electron version: 1.7.6\r\n\r\n### Actual behavior\r\n\r\n \r\nWhen calling `window.open` from an iframe no popup is open whereas the `new-window` events is fired on the webContents.\r\n\r\n### Expected behavior\r\n\r\n \r\nWould expect `window.open`  to open a popup even in iframe.\r\n\r\nNote that when using with `nativeWindowOpen` it works fine.\r\n\r\n### How to reproduce\r\n\r\nUse this PR: [URL]\r\n\r\n[Image: screenshot 2017-08-30 18 06 40]\n\n[Context/Logs]:\n- As far as I am aware this is expected behavior as preload scripts do not currently run in iframes.  I believe our long term plan is to make `nativeWindowOpen` default to true (when we're happy everything works) and then this will not be an issue \ud83d\udc4d\n- Ok, yes indeed was wandering around and realized as well that `nativeWindowOpen` is actually the future and the solution of this.\r\n\r\nI wished I could use `nativeWindowOpen` but can't because of #8100 \ud83d\ude05 \r\n\r\nHowever, in several cases (`window.alert`..), it looks like we could benefit from having preload running in `iframes`. Isn't that conceivable? (Relates to #1044 I guess.)\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thank you for taking the time to report this issue and helping to make Electron better.\r\n\r\nThe version of Electron you reported this on has been superseded by newer releases. \r\n\r\nIf you're still experiencing this issue in Electron v2.0.x or later, please add a comment specifying the version you're testing with and any other new information that a maintainer trying to reproduce the issue should know.\r\n\r\nI'm setting the `blocked/need-info` label for the above reasons.\r\n\r\nThanks in advance! Your help is appreciated.\n- Thank you for your issue!\r\n\r\nWe haven't gotten a response to our questions in our comment above. With only the information that is currently in the issue, we don't have enough information to take action. I'm going to close this but don't hesitate to reach out if you have or find the answers we need, we'll be happy to reopen the issue."}
{"project_id": "Electron", "bug_id": "71", "source_type": "github", "llm_input_text": "[Title]: WebFrame setSpellCheckProvider not called in an iframe inside of BrowserView\n[Symptom]:\n* Electron version: 1.8.2\r\n* Operating system: 10.13.3\r\n\r\n### Expected behavior\r\n\r\niframes inside of `BrowserViews` should also generate calls to `webFrame.setSpellCheckProvider`\r\n\r\n### Actual behavior\r\n\r\nThe registered spellcheck provider is never called\r\n\r\n### How to reproduce\r\n\r\nDownload attached sample app. Run:\r\n```\r\nyarn install\r\nyarn run dev\r\n```\r\nType into the two text fields in the window. In the console, only one of the text fields logs the spell check log, the other one is inside of the `iframe` and receives no calls.\r\n\r\n[Link: electron-spellcheck-bugs.zip]\n\n[Context/Logs]:\n- @gshahbazian @sofianguy this issue applies to 2.X as well\n- Hi there, just curious how it's going with this bug and if there's something one could help with? We kinda need this functionality."}
{"project_id": "Electron", "bug_id": "72", "source_type": "github", "llm_input_text": "[Title]: Unable to call native addon's async function from iframe\n[Symptom]:\n* Electron Version: 2.0.7\r\n* Operating System (Platform and Version): Windows 10\r\n* Last known working Electron version: \r\n\r\n**Expected Behavior**\r\n\r\nI expect native addon's async functions to work in iframes\r\n\r\n**Actual behavior**\r\nIf to call native addon's async function from iframe DevTools will be disconnected, app will not respond until reload\r\n\r\n**To Reproduce**\r\nI created repository with minimalistic setup [URL] (check readme.md for instructions how to run easily). It basically use example [URL] for simplicity. Please note that if to comment runAsync(); in app.html (iframe) and uncomment the same statement in index.html electron app will be able to print async function's result without any problems. Apart from that any syncronous code could be called from iframe without any issues. \r\n\r\n**Screenshots**\r\nHere is what happening if to call runAsync function from iframe:\r\n[Image: image]\r\n\r\nFrom index.html:\r\n[Image: image]\n\n[Context/Logs]:\n- is there any progress on this item?"}
{"project_id": "Electron", "bug_id": "73", "source_type": "github", "llm_input_text": "[Title]: GPU information page renders garbage\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 6.0.0-beta.4\r\n* **Operating System:**\r\n  * Windows 10 (17763)\r\n* **Last Known Working Electron version:**\r\n  * 5.0.1\r\n\r\n### Expected Behavior\r\nLoading `chrome://gpu` in a `BrowserWindow` shows the page as it does in the [Link: equivalent] Chromium version (76.0.3783.1).\r\n\r\n### Actual Behavior\r\nGarbage text is rendered in the window.\r\n\r\n### To Reproduce\r\n1. Use electron-quick-start\r\n2. Edit the line to `mainWindow.loadURL('chrome://gpu')`\r\n\r\n### Screenshots\r\n[Image: image]\r\n\r\n### Additional Information\r\nI want to use this page to view the GPU log at the bottom to diagnose crashes and canvas elements going blank. Unlike the GPU information, the log doesn't seem to be accessible via any electron API.\n"}
{"project_id": "Electron", "bug_id": "74", "source_type": "github", "llm_input_text": "[Title]: Consistent crash when hardware acceleration is disabled\n[Symptom]:\n### Preflight Checklist\r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 6.0.0-beta.5 (also present in beta.6)\r\n* **Operating System:**\r\n  * macOS 10.14.5\r\n* **Last Known Working Electron version:**\r\n  * 6.0.0-beta.4\r\n\r\n### Expected Behavior\r\nElectron should not crash after calling `app.disableHardwareAcceleration()`\r\n\r\n### Actual Behavior\r\nElectron crashes (main process) when started with hardware acceleration disabled.\r\n\r\n```\r\n[16974:0604/215819.260822:FATAL:gpu_data_manager_impl_private.cc(901)] The display compositor is frequently crashing. Goodbye.\r\n```\r\n\r\n### To Reproduce\r\n\r\nReproducible trivially with electron-quick-start\r\n\r\n```sh\r\n$ git clone [URL] -b macOS-no-gpu-crash\r\n$ npm install\r\n$ npm start\r\n```\n"}
{"project_id": "Electron", "bug_id": "75", "source_type": "github", "llm_input_text": "[Title]: Desktop audio capture does not work on Mac and Linux\n[Symptom]:\n* Electron version: 1.6.2, 1.6.5, 1.7.6, 2.0.2, 3.x, 4.0.5\r\n* Operating system: Mac OS X Sierra, Linux (Debian Jessie)\r\n\r\n### Expected behavior\r\n\r\nGiven the defined [Link: DesktopCapture API] for capturing both audio and video for the entire desktop, we should get a working audio stream on Windows, Linux and Mac.\r\n\r\n### Actual behaviour\r\n\r\nElectron version 4.0.5: On Mac and Linux, the error callback triggers with the respective messages:\r\n\r\n```\r\ngetUserMediaError:  DOMException: Could not start audio source // Mac\r\nFailed to query stereo recording // Linux\r\n```\r\n\r\nElectron Version 1.7.6: On Mac and Linux, the error callback triggers with the error: \r\n\r\n```\r\nNavigatorUserMediaError\r\n    constraintName: \"\"\r\n    message: \"\"\r\n    name: \"TrackStartError\"\r\n```\r\n\r\nElectron Version 1.6.2 and 1.6.5: On Mac and Linux, the video stream is received successfully, albeit, with no audio.\r\n\r\nBelow are the constraints defined as per the DesktopCapture API: \r\n\r\n```\nconst constraints = {\r\n  audio: {\r\n    mandatory: {\r\n      chromeMediaSource: 'desktop'\r\n    }\r\n... [Log Snipped] ...\n  }\r\n}\n```\r\n\r\nPlease note: on Windows, the audio capture works correctly. \r\n\r\n### How to reproduce\r\n\r\n```\r\ngit clone [URL]\r\ncd electron-desktop-capture\r\nnpm install\r\nnpm start\r\n```\n\n[Context/Logs]:\n- @jasonrudolph  Please use GH reactions instead of adding a \"+1\" comment.\n- @MarshallOfSound what is a \"GH Reaction\"? Why is it not mentioned in [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @mhashmi is there other way to fix this bug?\n- Guys, a solution has been posted for this issue in bug report #4776, alongside sample code. I've tested it on OS X, and the user who posted it tested it on Linux, so we at least have a workaround now!"}
{"project_id": "Electron", "bug_id": "76", "source_type": "github", "llm_input_text": "[Title]: New spellcheck API treats contractions as separate words\n[Symptom]:\n#### NOTE: I'm opening a separate issue to #1005 because this is a separate regression - in ^4.0.0, this still worked.\r\n\r\n \r\n\r\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 5.0.2\r\n* **Operating System:**\r\n  * Windows 10 x64 latest\r\n* **Last Known Working Electron version:**\r\n  * 4.2.2\r\n\r\n### Expected Behavior\r\nThe spellchecker is correctly called with contractions (and their parts)\r\n\r\n### Actual Behavior\r\nThe spellchecker is now only called with the parts of the contractions.\r\n\r\n### To Reproduce\r\nJust use the spellcheck API anywhere.\r\n\r\n### Additional Information\r\nIn ^4.0.0, the spellcheck API would call the spellchecker with first the contraction and then its parts (i.e. for `couldn't` it would be called with `couldn't`, `couldn`, `t` in order). The new ^5.0.0 API calls the spellchecker with an array of just the parts (i.e. for `couldn't` it would be called with `['couldn', 't']`. Therefore, it is now completely impossible to correctly handle contractions.\r\n\r\nThank you for looking into this. <3\n\n[Context/Logs]:\n- I have looked into this some more, and found the cause.\r\n\r\n[Link: The old version] would early-out if the word (including contractions) was considered valid by the spellchecker. The new version however simply splits them up and never checks the whole word."}
{"project_id": "Electron", "bug_id": "77", "source_type": "github", "llm_input_text": "[Title]: Preload scripts can run twice in the same process in different node environments\n[Symptom]:\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 3.x, 4.x, 5.x, 6.x\r\n* **Operating System:**\r\n  * All\r\n* **Last Known Working Electron version:**:\r\n  * 2.x\r\n\r\n### Expected Behavior\r\nWhen navigations occur, a new process should be created for the navigation.\r\n\r\n### Actual Behavior\r\nWhen a navigation occurs _during_ a preloads scripts execution the same process is re-used as Chromium does not think the navigation has been committed yet.  This causes a memory leak and all native node modules to break.\r\n\r\n### To Reproduce\r\nFiddle: [URL]\r\n\r\n### Screenshots\r\n[Image: image]\r\n\r\nAs you can see here there are three navigation loads, the second and the third one actually have the same process ID (and are running in the same process)\n\n[Context/Logs]:\n- @MarshallOfSound can you share more details? Why wasn't this an issue in Electron 2?\n- Merging into #18397 as the long term solution to this \ud83d\udc4d"}
{"project_id": "Electron", "bug_id": "78", "source_type": "github", "llm_input_text": "[Title]: MacOS modal focus\n[Symptom]:\nOn MacOS (Windows/Linux work fine) I am opening a modal window. The modal window opens up fine but focus behavior is broken. When I click on the main window (outside of modal) it gains the focus (which should not happen) and then the modal window gains focus (which is correct), but right after that the modal gains blur (which is wrong). Now if I try to focus the modal with mouse it does not do anything as the main window is focused. \r\n\r\nHere I have created a demo which prints out to console which window is focused. \r\n[Link]\r\n\r\n\r\n### Preflight Checklist\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\nTested on Electron 3, 5, 6-beta4\r\n* **Operating System:**\r\nMacOS 10.13 (Windows 10 and Ubuntu 18.04 work fine)\r\n* **Last Known Working Electron version:**\r\nNone\r\n\r\n### Expected Behavior\r\nMain window should never get focused if the modal window is opened\r\n\r\n### Actual Behavior\r\nMain window gains focused event if the modal window is opened.\r\n\r\n### To Reproduce\r\nOpen up the console to see which windows are getting focused and the open the modal with open button.\r\n\r\n[Link]\r\n\r\n### Screenshots\r\n[Image: image]\r\n(ignore the last line, I had to switch to screen-short program)\n"}
{"project_id": "Electron", "bug_id": "79", "source_type": "github", "llm_input_text": "[Title]: Documentation on the crash reporter seems wrong for extra parameter lenght\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  *   4.1.4\r\n* **Operating System:**\r\n  *   macOS and Windows 10\r\n* **Last Known Working Electron version:**:\r\n  *  \r\n\r\n### Expected Behavior\r\n  According to documentation, I was expecting to have extra parameters limited to 63 characters. \r\n\r\n### Actual Behavior\r\n  When adding extra parameters to crash reporter, the corresponding values are limited to 63 characters only on windows and seem to have no limit on MAC\r\n\r\n### To Reproduce\r\n \r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n \r\n\r\nOn Mac extra parameters are stored like this:\r\n\r\n```\r\nextra_history_1:\r\n   '{\"eventType\":\"CRASH_REPORTER\",\"eventData\":\"started\",\"date\":\"2019-04-10T16:45:35.963Z\"}',\r\n  extra_history_2:\r\n   '{\"eventType\":\"WINDOW_WEB_CONTENTS\",\"eventData\":\"unresponsive\",\"date\":\"2019-04-10T16:48:13.267Z\"}'\r\n```\r\n\r\nOn Window they are stored like this:\r\n\r\n```\r\nextra_history_1:\r\n   '{\"eventType\":\"CRASH_REPORTER\",\"eventData\":\"started\",\"date\":\"201',\r\n  extra_history_2:\r\n   '{\"eventType\":\"WINDOW_WEB_CONTENTS\",\"eventData\":\"unresponsive\",\"d'\r\n```\r\n\r\n### Additional Information\n"}
{"project_id": "Electron", "bug_id": "80", "source_type": "github", "llm_input_text": "[Title]: chrome.runtime's port.postMessage incorrectly send UintArray\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:** 5.0.6\r\n  *  \r\n* **Operating System:** mac OS 10.14.5\r\n  *  \r\n* **Last Known Working Electron version:** Unknown\r\n  *  \r\n\r\n### Expected Behavior\r\n \r\n\r\n`port.postMessage` correctly send UintArray\r\n\r\n### Actual Behavior\r\n \r\n\r\n`port.postMessage` incorrectly appends unexpected number of `0` in buffer\r\n\r\n### To Reproduce\r\n \r\n\r\n- clone [URL]\r\n- `npm install && npm start`\r\n- navigate `localhost:8315` on chrome browser, open `chrome-extension://boo/_generated_background_page.html` to observe console message from devtools\r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n**from Electron@5**\r\n[Image: image]\r\n\r\n**from chrome browser**\r\n[Image: image]\r\n\r\n\r\n### Additional Information\r\n[URL] is caused by this, since every `postMessage` to UnitArray appends `0` to its buffer, operations relying on `0` as default value (unsupported) raises exception on devtools. \r\n\r\nAs attached above, this only happens in Electron (4 / 5 both so far tried) but not occurring on Chrome.\n"}
{"project_id": "Electron", "bug_id": "81", "source_type": "github", "llm_input_text": "[Title]: bug: triggeredByAccelerator logic should not be tied to modifier key logic\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * v7.0.0-nightly.20190614\r\n* **Operating System:**\r\n  * macOS 10.14.5\r\n* **Last Known Working Electron version:**\r\n  * none\r\n\r\n### Expected Behavior\r\n* Using an accelerator without a modifier to activate a menu item (e.g. pressing key 'B') should result in `triggeredByAccelerator: true`.\r\n* Clicking on a menu item with a menu item (e.g. Shift+Click) should result in `triggeredByAccelerator:false`.\r\n\r\n### Actual Behavior\r\n* Using an accelerator without a modifier to activate a menu item (e.g. pressing key 'B') results in `triggeredByAccelerator: false`.\r\n* Clicking on a menu item while holding down a modifier key (e.g. Shift+Click) results in `triggeredByAccelerator:true`.\r\n\r\n### To Reproduce\r\nElectron Fiddle gist: [URL]\r\n```\r\n{\r\n    label: \"Blade\",\r\n    id: \"blade\",\r\n    accelerator: \"B\",\r\n    click(a, b, e) {\r\n        console.log(e);\r\n    }\r\n}\r\n```\r\n \r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n[Image: image]\r\n\r\n \r\n\r\n### Additional Information\r\n \r\nThe property is currently derived from some event modifier flags (on Mac: `NSEvent.modifierFlags`). When using an accelerator with a modifier key, these flags are set and the property works as expected.\r\n\r\nSee:\r\n```\ncpp\r\nv8::Local  CreateEventFromFlags(v8::Isolate* isolate, int flags) {\r\n  mate::Dictionary obj = mate::Dictionary::CreateEmpty(isolate);\r\n  obj.Set(\"shiftKey\", static_cast (flags & ui::EF_SHIFT_DOWN));\r\n  obj.Set(\"ctrlKey\", static_cast (flags & ui::EF_CONTROL_DOWN));\r\n... [Log Snipped] ...\n  return obj.GetHandle();\r\n}\n```\r\n[URL] \r\n\r\nHowever, either triggering an accelerator without a modifier key (or clicking an accelerator with a modifier key) will give an invalid result. The `trigger\n...[Description Truncated]...\n\n[Context/Logs]:\n- EDIT: updated the issue with more context\n- Do we know how this behaves on Linux or Win?\n- @DeerMichel For Linux, I'm currently running the CI for the associated PR with the fixed test to validate an accelerator without a modifier key. Let's see if it works...\n- The patch wfm on Linux"}
{"project_id": "Electron", "bug_id": "82", "source_type": "github", "llm_input_text": "[Title]: `app.moveToApplicationsFolder` fails if an homonymous app is already present and active\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:** \r\n  *   5.0.3\r\n* **Operating System:** \r\n  *   macOS 10.14\r\n* **Last Known Working Electron version:** \r\n  *   n/a\r\n\r\n### Expected Behavior\r\n \r\n\r\n`app.moveToApplicationsFolder` should throw when it fails, as the docs say.\r\n\r\n### Actual Behavior\r\n \r\n\r\nIt doesn't throw, in fact it even returns `true`.\r\n\r\n### To Reproduce\r\n\r\n- Have Foo v1 located in `/Applications/Foo.app`\r\n- Open it\r\n- Have Foo v2, still named `Foo.app`, located somewhere else\r\n- Open it\r\n- Use `app.moveToApplicationsFolder`.\r\n- Instead of moving the app the currently open Foo v1 window will be focused, and `app.moveToApplicationsFolder` returns `true` instead of throwing.\n"}
{"project_id": "Electron", "bug_id": "83", "source_type": "github", "llm_input_text": "[Title]: BrowserWindow `show` and `hide` events are inconsistent between platforms\n[Symptom]:\nFor example, with this script:\r\n\r\n```\njs\r\nconst {app, BrowserWindow} = require('electron')\r\n\r\napp.on('ready', () => {\r\n  const win = new BrowserWindow()\r\n... [Log Snipped] ...\n  setTimeout(() => app.quit(), 2500)\r\n})\n```\r\n\r\nOn Linux and Windows, you get:\r\n```\r\nhide\r\nshow\r\nminimize\r\nrestore\r\n```\r\n\r\nOn macOS, you get:\r\n```\r\nshow\r\nhide\r\nshow\r\nminimize\r\nhide\r\nrestore\r\nshow\r\n```\r\n\r\nThis is because we use the window occlusion state to drive `show` and `hide` on macOS, but tie them to `BrowserWindow.show()` and `BrowserWindow.hide()` on other platforms.\r\n\r\nAlso note that `BrowserWindow.isVisible()` does *not* use the occlusion state. So on macOS, this will confusingly print `true` when the window is occluded:\r\n```js\r\nwin.on('hide', () => {\r\n  console.log(win.isVisible())\r\n})\r\n```\r\n\r\nThat is also problematic because we use `isVisible()` to determine `document.hidden` and `document.visibilityState`. In Chrome, they *are* driven by the occlusion state on macOS (see [Link: Chromium issue]) so we don't match Chrome behaviour.\r\n\r\nTo address these issues, I think we should:\r\n\r\n* Change `show`/`hide` events on macOS to behave like they do on Windows/Linux. This could be considered a breaking change.\r\n* Implement `occluded`/`unoccluded` events and `isOccluded()` for macOS. These can be left undocumented if we so wish.\r\n* Change `document.hidden` and `document.visibilityState` to be driven by the new occlusion events/method on macOS.\r\n\r\nI'm happy to write the patch, but any thoughts before I submit the PR?\r\n\r\ncc @kevinsawicki @zcbenz\n\n[Context/Logs]:\n- I mean, IMO the current behavior isn't \"wrong\" in any way, excluding the fact that it is slightly different across platforms.  The events fired make sense and aren't fired at inappropriate places.\r\n\r\nI.e. `restore` does somewhat indicate `show`\r\n\r\nI would rather that we bring windows and linux up to speed with macOS and simply fire show and hide events on minimize and restore.  Semantically it would make sense.\r\n\r\nThoughts?\n- I'm fine with this as well, although I don't think we can make `show` and `hide` fire based on the occlusion state on other platforms.\n- ... [Middle Discussions Snipped for Brevity] ...\n- What is the status of this issue?\r\nI have a browserWindow, with a child modal window in my application.\r\nIn macOS, when the application loses focus (switched to another app) while the modal is visible, the modal window 'hide' event is fired. Is this how it works?\n- The Electron version reported on this issue is no longer supported. See our [Link: supported versions documentation].\r\n\r\nIf this is still reproducible on a supported version, please open a new issue with any other new information that a maintainer should know.\r\n\r\nThank you for taking the time to report this issue and helping to make Electron better! Your help is appreciated."}
{"project_id": "Electron", "bug_id": "84", "source_type": "github", "llm_input_text": "[Title]: command-line scheme switches' values spill over into other switches\n[Symptom]:\n### Preflight Checklist\r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * v8.0.0-nightly.20190821\r\n* **Operating System:**\r\n  * Ubuntu 19.04 x64\r\n* **Last Known Working Electron version:**\r\n  * Unknown. Broken in `4-1-x` upwards.\r\n\r\n### Expected Behavior\r\n\r\nPassing additional schemes on the command line, e.g. `--standard-schemes=foo,bar,mum`, should not affect other schemes, e.g. cors enabled schemes or secure schemes.\r\n\r\n### Actual Behavior\r\n\r\nThe schemes from earlier checks bleed into all the following switches checked.\r\n\r\nThis happens due to the \"splitted\" variable in `shell/app/atom_content_client.cc`'s `AtomContentClient::AddAdditionalSchemes()` being reused for each switch without being cleared first.\r\n\r\n### To Reproduce\r\n\r\nOn the command line, add schemes for one of the argument switches handled in `AtomContentClient::AddAdditionalSchemes()`.\n"}
{"project_id": "Electron", "bug_id": "85", "source_type": "github", "llm_input_text": "[Title]: Remove localstorage limit\n[Symptom]:\n* Electron Version: 2.0.2\r\n* Operating System (Platform and Version): MacOS\r\n* Last known working Electron version: 1.8.1 (never had this issue before in an older version of the app)\r\n\r\nSorry for the extremely vague bug report, but I found a serious bug in our app where localStorage seems to have stopped working without throwing any errors causing using users to lose data.\r\n\r\n```ts\r\nlocalStorage.setItem(\"x\", \"10\")\r\nlocalStorage.getItem(\"x\")\r\n```\r\n\r\nUpon deleting the Application Support files, everything started working again. Is it possible that we are not raising an error in some cases when localStorage doesn't work? Perhaps the data has been corrupted or something?\r\n\r\nI apologize that I don't have reproducible steps, but I think its worth documenting in case others have a similar issue.\n\n[Context/Logs]:\n- Alright, I have a repro!\r\n\r\nWith the Electron 2.0.2 application, from the dev tools:\r\n\r\n```\njs\r\nlocalStorage.length\r\nfor (let i = 0; i < 10000; i++) { localStorage.setItem(i.toString(), Array(1000).fill(1).toString()) }\r\n... [Log Snipped] ...\nlocalStorage.length\r\n```\r\n\r\nI when I try to add more, it doesn't work and there are **no errors**!\r\n\r\nIn Electron 1.8.1 application, from the dev tools:\r\n\r\n```\njs\r\nlocalStorage.length\r\nfor (let i = 0; i < 10000; i++) { localStorage.setItem(i.toString(), Array(1000).fill(1).toString()) }\r\n... [Log Snipped] ...\nlocalStorage.length\r\n```\r\n\r\nNow, I'm not sure why we appear to have lost some entries -- its possible that the application itself removed some stuff -- but for the most part, it worked. It took about 2 minutes to add the 800000 entries, so its definitely working.\r\n\r\nSounds like a bug to me!\n- @ccorcos does it reproduce if you run this early before `app.on(\"ready\")`:\r\n\r\n`app.commandLine.appendSwitch('disable-mojo-local-storage');`\n- ... [Middle Discussions Snipped for Brevity] ...\n- @ccorcos `disable-mojo-local-storage` will not work anymore starting with Electron 3.0.x due to the Chrome version used within.\n- Seems like the localstorage limit is not completely removed, during commit operation the size constraint is still maintained at 5MB."}
{"project_id": "Electron", "bug_id": "86", "source_type": "github", "llm_input_text": "[Title]: No tray icon on Linux (electron@^8)\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:** 8.0.0-beta.4\r\n* **Operating System:** Linux (tested on: Manjaro LXDE, Ubuntu 19.04/19.10 Gnome Shell)\r\n* **Last Known Working Electron version:** 7.1.3\r\n\r\n### Expected Behavior\r\nTray icon created.\r\n\r\n### Actual Behavior\r\nNo tray icon created.\r\n\r\n### To Reproduce\r\n[URL]\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n \r\n\r\n### Additional Information\r\n\r\nThe issue has been partially fixed within [URL]\r\n\r\nCC @codebytere\n\n[Context/Logs]:\n- Looks like it's Linux-specific - i was briefly concerned i missed something obvious in testing but it works fine on macOS when i run your repro. I'll try to look into this more but @zcbenz may also have more answers\n- @codebytere thanks for a fast response.\r\n\r\nPS The issue is also reproducible on Ubuntu 19.04, the original message got adjuted.\n- ... [Middle Discussions Snipped for Brevity] ...\n- As above-referenced [Link: chromimum issue] says `StatusNotifier`/DBus support got added and something got removed. So I looked up things on the internet and got the tray icon well displayed but only on Manjaro XFCE so far (have not tried anything KDE based yet though, might be working well there):\r\n- Manjaro XFCE (possibly any distro that uses XFCE, like Xubuntu): `xfce4-statusnotifier-plugin` needs to be installed and then respective widget added to the panel. So `xfce4-panel`/built-in systray plugin named \"notification area\" is not sufficient anymore. Plugins work well if both activated, no conflicts noticed.\r\n- Ubuntu 19.04 Gnome Shell: [Link: KStatusNotifierItem/AppIndicator Support] extension is supposed to handle the need as it seems to be supporting \"status notifier/dbus\" thing. But it's not welll displayed, there is still that subtle tiny dot instead of a full tray icon. So further digging is needed.\r\n\r\nThe side benefit I noticed is that the left/primary mouse click is being properly handled again after it's being broken starting from the @electron v3, see #14941. So now righ\n...[Text Truncated]...\nLink: ElectronMail]. I will then add a note `make sure you have got the tray icon displayed before enabling this option as you will be using tray icon to show/hide the app window` near to the respective checkbox in the UI. That would not be the best move in terms of UX but it's better than if a user starts the app and doesn't see it started as there is no tray icon and so no way to get the app window displayed, basically no visible signs of the app got started.\n- Since I finally got the tray icon displayed on Linux in one case using @electron version 8 I played around for a while and noticed a few more issues which I'm going to place separately later if I will be able to narrow down the scope and create minimal reproducible projects for them. The following issues (based on preliminary observations):\r\n- It looks like if the async/delayed action is being triggered via the tray menu the app crashes/segfaults. Possibly any kind of actions, not only the async ones, not completely clear yet. If I trigger the same action not via the tray menu then there is no crush.\r\n- The tray menu items don't get updated dynamically as it worked in @electron version lower than 8, at least the `visible` property when I re-create the tray menu calling `tray.setContextMenu(Menu.buildFromTemplate([...updated items...]))`.\r\n\r\nThese issues are off the topic here but wanted to highlight that in general, it's more than just tray icon not being displayed on Linux but the tray menu behavior is also changed."}
{"project_id": "Electron", "bug_id": "87", "source_type": "github", "llm_input_text": "[Title]: desktopCapturer.getSources with 'screen' causes binocular icon on lock screen\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 4.1.3\r\n* **Operating System:**\r\n  * macOS 10.14.4\r\n* **Last Known Working Electron version:**:\r\n  * None.\r\n\r\n### Expected Behavior\r\nA call to `desktopCapturer.getSources( { types: [ 'screen'] })` should not cause the OS to show the binoculars icon when the user locks the screen, this icon should only be shown when the screen is being recorded. \r\n\r\nAs far as I know this icon is used to show that the user is recording a screen. [Link: Here] is explained this icon.\r\n\r\n### Actual Behavior\r\nCalling `desktopCapturer.getSources( { types: [ 'screen'] })` causes the binoculars icon to be shown to the user when he locks the PC, even when the screen is not being recorded in any other way. The icon isn't shown when the PC is unlocked, only when the PC is locked, until the users closes the electron app that made the call.\r\n\r\nThis doesn't happen when `desktopCapturer.getSources({ types: 'window' })` is called. \r\n\r\n### To Reproduce\r\nClone this repository\r\n\r\n```\r\ngit clone [URL]\r\nnpm install\r\nnpm start\r\n```\r\nThen, in the `renderer.js` file, put:\r\n```\r\nconst { desktopCapturer } = require('electron');\r\n\r\ndesktopCapturer.getSources( { types: [ 'screen'] }, (error, sources) => {\r\n    if (error) throw error\r\n    for (let i = 0; i  \r\n<img width=\"1412\" alt=\"Screen Shot 2019-04-23 at 18 01 18\" src=\"[URL]\n\n[Context/Logs]:\n- Can confirm that this regressed between 3.1.11 and 4.0.0-beta.1.\n- Looks like this is also happening in 6.0.0-beta.6\n- It is happening in 6.0.5 as well"}
{"project_id": "Electron", "bug_id": "88", "source_type": "github", "llm_input_text": "[Title]: desktopCapturer.getSources memory leaks\n[Symptom]:\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * v4.0.0\r\n* **Operating System:**\r\n  * Ubuntu 18.04.3 LTS \r\n* **Last Known Working Electron version:**\r\n  * Unknown\r\n\r\n### Expected Behavior\r\nThe Resident set size of the Main process when using desktopCapturer.getSources not growing.\r\n\r\n\r\n### Actual Behavior\r\nMemory leak in the Main process (rss memory growing) when using the desktopCapturer.getSources method in the Rendering process.\r\n\r\n### To Reproduce\r\n\r\n```\njavascript\r\nconst {\r\n    app,\r\n    BrowserWindow\r\n} = require('electron');\r\n... [Log Snipped] ...\nlogMemory();\r\nsetInterval(logMemory, 10000);\n```\r\n\r\n```\nhtml\r\n \r\n \r\n   \r\n     \r\n... [Log Snipped] ...\n      \r\n   \n```\r\n\r\n```\njavascript\r\nconst electron = require('electron');\r\nconst desktopCapturer = electron.desktopCapturer;\r\n\r\nconst getSourcesLoop = () => {\r\n... [Log Snipped] ...\n};\r\ngetSourcesLoop();\n```\r\n\r\n\r\n### Screenshots\r\n \r\n[Image: image]\n\n[Context/Logs]:\n- Can you try with electron 4.2.10 ?\n- ```\r\nElectron v4.2.12 started.\r\nrss=45.309952MB, heapTotal=12.324864MB, heapUsed=6.795056MB, external=0.161429MB\r\nrss=130.891776MB, heapTotal=12.849152MB, heapUsed=6.774888MB, external=2.81488MB\r\nrss=131.09248MB, heapTotal=13.37344MB, heapUsed=7.04888MB, external=2.81488MB\r\nrss=131.096576MB, heapTotal=13.37344MB, heapUsed=7.052816MB, external=2.81488MB\r\nrss=131.436544MB, heapTotal=13.37344MB, heapUsed=7.055904MB, external=2.81488MB\r\nrss=131.473408MB, heapTotal=13.37344MB, heapUsed=7.058992MB, external=2.81488MB\r\nElectron exited with code 0.\r\n```"}
{"project_id": "Electron", "bug_id": "89", "source_type": "github", "llm_input_text": "[Title]: In 7-0-x and master, Electron on Linux gives a gtk_disable_setlocale() warning on startup\n[Symptom]:\nThe warning is \r\n\r\n\r\nLooks like this is caused by gtk_init() being accidentally called twice.\r\n\r\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 7-0-x, v8.0.0-nightly.20190827\r\n* **Operating System:**\r\n  * Linux\r\n* **Last Known Working Electron version:**\r\n  * 6-0-x\n"}
{"project_id": "Electron", "bug_id": "90", "source_type": "github", "llm_input_text": "[Title]: BrowserWindow.isEnabled() return void\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: ] I have read the [Contributing Guidelines] for this project.\r\n* [Link: ] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [ ] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  *   9.0.5\r\n* **Operating System:**\r\n  *   mac os 10.15.5\r\n* **Last Known Working Electron version:**\r\n  *   9.0.5\r\n\r\n### Expected Behavior\r\nin electron.d.ts, why BrowserWindow.isEnabled() return void.\r\n\r\n### Actual Behavior\r\n \r\n\r\n### To Reproduce\r\n \r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n \r\n[Image: image]\n\n[Context/Logs]:\n- Notes:\r\n```\r\nyarn create-api-json\r\n```\r\n\r\nyields this in electron-api.json\r\n\r\n[Image: image]\r\n\r\nWhere we expect something more like this:\r\n\r\n```\r\n\"returns\": {\r\n           \"collection\": false,\r\n          \"type\": \"Boolean\"\r\n        },\r\n```\n- By comparing a working boolean example and a non-working, we can see that we are missing backticks *``* after the returns statement.\r\n\r\n[Image: image]\r\n\r\nBy adjusting the documentation the correct api interface is now generated\r\n[Image: image]\r\n\r\nTracing this back to the docs parser code\r\n[URL] we can see where it is looking for `\\`` characters in the following token.\r\n\r\nThere could be an argument made where additional improvements to the linter could be made to error loudly when this sort of formatting issue is found :)"}
{"project_id": "Electron", "bug_id": "91", "source_type": "github", "llm_input_text": "[Title]: importing powerMonitor from electron before 'ready' event causes crash\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\nSame as #18966, app crashed when launched.\r\n\r\n```\ntypescript\r\nimport electron, { app } from \"electron\";\r\n\r\nlet mainWindow: electron.BrowserWindow;\r\n\r\n... [Log Snipped] ...\n  });\r\n});\n```\r\n\r\nHere is my repro sample.\r\n[URL]\r\n\r\nHere is compiled index.ts\r\n[URL]\r\n\r\n* **Electron Version:**\r\n  * v7.1.8\r\n* **Operating System:**\r\n  * Ubuntu 18.04.3\r\n* **Last Known Working Electron version:**\r\n  * Don't know\r\n\r\n### Expected Behavior\r\n \r\n\r\nOpen an empty window.\r\n\r\n### Actual Behavior\r\n\r\n```\nconsole\r\n$ yarn start\r\nyarn run v1.21.1\r\n$ electron index.js\r\nApp threw an error during load\r\n... [Log Snipped] ...\n    at Object.Module._extensions..js (internal/modules/cjs/loader.js:892:10)\r\n    at Module.load (internal/modules/cjs/loader.js:735:32)\n```\r\n\r\n### To Reproduce\r\n \r\n\r\n```console\r\n$ git clone [URL]\r\n$ cd sample-electron-crash\r\n$ yarn install\r\n$ yarn build\r\n$ yarn start\r\n```\r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n \r\nN/A\r\n\r\n### Additional Information\r\nStacktrace says `__importStar` calls powerMonitor. It happens when tsconfig uses `esModuleInterop: true` (default is true)\r\nIn macOS, app doesn't crash.\n\n[Context/Logs]:\n- Why can't you just use `const electron = require('electron')` instead of `import`? It looks like your code is causing the `powerMonitor` module to be loaded right away, but the docs are [Link: pretty clear]:\r\n\r\n\r\nAlso, does electron support TypeScript natively? If so, please specify URL that discusses this. As much as I like TS, keeping reproduction code as simple as possible is desirable, so I would've preferred it to be written directly in JS.\r\n\r\n\r\nI suspect that to be due to \"luck\". When you use something in a way that is forbidden by the specs you should expect [Link: undefined behavior].\n- Can confirm the issue is reproducible.\r\n\r\nAlthough TypeScript developers normally do (no import-start helper involved in both cases)\r\n```\r\nimport { app, BrowserWindow } from \"electron\";\r\n\r\nlet mainWindow: BrowserWindow;\r\n```\r\nor \r\n```\r\nimport { app } from \"electron\";\r\n\r\nlet mainWindow: Electron.BrowserWindow;\r\n```\r\ninstead of\r\n```\r\nimport electron, { app } from \"electron\";\r\n\r\nlet mainWindow: electron.BrowserWindow;\r\n```\r\n\r\nBesides, in a real-world scenario, you would probably go with Webpack/Rollup/etc bundlers which often have own module loading wrappers that usually do `require` under the hood.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Actually I think Electron could do something like:\r\n```\nif (process.platform === 'linux') {\r\n  require(\"electron\").app.once(\"ready\", () => {\r\n    powerMonitor.on('newListener', (event:string) => {\r\n      if (event === 'shutdown' && powerMonitor.listenerCount('shutdown') === 0) {\r\n        powerMonitor.blockShutdown()\r\n... [Log Snipped] ...\n  })\r\n}\n```\r\n\r\nThough if for the instance `powerMonitor` module gets loded lazily, after `ready` event has already been fired on `app`, the event is not going to be replayed and so subscribing logic won't be triggered. Introducing something like ` app.promises.onReady` would help but would be somewhat messy at the same time.\r\n\r\nInstead of eagerly calling `powerMonitor.on` method in along with module loading (so Electron itself violates the module using rules described in the documentation):\r\n\r\n[URL]\n- Yeah, I agree this is a bug in Electron rather than an issue with ts wildstar.\r\n\r\nFor example, you can remove typescript from the equation altogether and instead try to run the sample code from the top of [Link: `electron/docs/api/power-monitor.md`]:\r\n\r\n```\nThis module cannot be used until the ready event of the app module is emitted.\r\n\r\nFor example:\r\n\r\nconst { app, powerMonitor } = require('electron')\r\n... [Log Snipped] ...\n  })\r\n})\n```\r\n\r\nThat code causes the same failure on `require`.\r\n\r\nIf you don't mind, I'm going to edit the issue topic to reflect that the issue doesn't require TypeScript"}
{"project_id": "Electron", "bug_id": "92", "source_type": "github", "llm_input_text": "[Title]: Filters don't work in webRequest\n[Symptom]:\n* Electron version: 1.7.9\r\n* Operating system: macOS\r\n\r\n### Expected behavior\r\n\r\nThe callback should be used only for URLs matching the filter.\r\n\r\n```\r\nconst filter = { urls: ['*://www.googleapis.com'] };\r\nsession.defaultSession.webRequest.onBeforeRequest(filter, (details, callback) => {\r\n  console.log('onBeforeRequest: ', details);\r\n  callback({ cancel: true });\r\n});\r\n```\r\n\r\n \r\n\r\n### Actual behavior\r\n\r\nThe callback is called for random URLs.\r\n\r\n```\nonBeforeRequest:  { id: 1,\r\n  method: 'GET',\r\n  referrer: '',\r\n  resourceType: 'mainFrame',\r\n  timestamp: 1512654154551.9841,\r\n... [Log Snipped] ...\n  timestamp: 1512654154564.2021,\r\n  url: 'chrome-devtools://devtools/bundled/inspector.html?remoteBase=[URL] }\n```\n\n[Context/Logs]:\n- Same problem in v1.8.3\n- v1.8.8 Same problem on Linux (Ubuntu 18.04) any news on this ?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Seems to happen in 4.1.1 as well.\r\nWhy has there been no progress on this?\n- Still an issue in Electron 5.0.7\r\n\r\nOS: Linux Mint 15.1\r\n\r\nEDIT: It appears filters only don't work for custom URI protocols. If using http or https they work correctly. If this is expected behaviour, it would be worth documenting."}
{"project_id": "Electron", "bug_id": "93", "source_type": "github", "llm_input_text": "[Title]: await Promise with Timer behavior regress from previous version\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 5.0.12 - 7.1.10\r\n* **Operating System:**\r\n  * Windows 10/macOS 10.15\r\n* **Last Known Working Electron version:**\r\n  * 4.2.5\r\n\r\n### Expected Behavior\r\nWe have been using the piece of code to perform asynchronous operations.\r\n```js\r\nawait new Promise((resolve) => { setTimeout(resolve, 1000); }\r\n```\r\nIt would pause the execution of the code path containing it for about 1 second and resume it then. This has been working well for a long time.\r\n\r\n### Actual Behavior\r\nSince we upgrade to Electron 7, in forked node processes, only the first several timer callbacks are called on time, while the rest of them are called extremely late for unknown reason.\r\n\r\nSuppose we call the above piece of code for 10 times in a loop. Only the first two promises are created and resolved correctly. In addition, the process exits for unknown reason. In our production code, since there are other things going on (not computationally intensive) which keeps the process alive, we are seeing the 3rd and the rest of the Timers being created and invoked unreasonably late (around 12s after the 2nd one resolves).\r\n\r\nThe output in the renderer console is\r\n```\r\nSpawned child process  \r\nchild process send a message INIT_ACK\r\nchild process send a message INIT_ACK\r\nchild process exits\r\n```\r\n\r\n### To Reproduce\r\n[URL]\r\n\r\nTo run the repro steps\r\n```sh\r\n$ git clone [URL] -b bug/await-Promise\r\n$ npm install\r\n$ npm start\r\n```\r\n \r\n\r\n### Screenshots\r\n \r\n\r\n### Additional Information\r\nElectron 4.2.5 behaves correctly for exactly the same code in this repo. The behavior doesn't reproduce in renderer process. Also it doesn't seem to be a nodejs problem because I can run the render\n...[Description Truncated]...\n\n[Context/Logs]:\n- If you change the file which is forked (`awaitPromise.js`) to not use `await`, e.g.:\r\n\r\n```\njs\r\nfunction waitMs(ms) {\r\n    return new Promise(c => setTimeout(c, ms))\r\n}\r\nasync function sendAck() {\r\n... [Log Snipped] ...\n\r\nsendAck();\n```\r\n\r\nThe issue still repro's. So I think this is more an issue of `Promise` as opposed to `await`.\r\n\r\nOutput of Electron forking a NodeJS process:\r\n```\r\nSpawned child process 36432\r\nSent ack 0 1576603904998\r\nchild process exits\r\n```\r\n\r\nOutput of a NodeJS process forking a NodeJS process:\r\n```\nSpawned child process 20168\r\nSent ack 0 1576603909254\r\nSent ack 1 1576603910256\r\nSent ack 2 1576603911256\r\nSent ack 3 1576603912257\r\n... [Log Snipped] ...\nSent ack 9 1576603918261\r\nchild process exits\n```\n- It may even be as specific as an issue with Promises in conjunction with timeouts. If I change `awaitPromise.js` to something like this there is no issue:\r\n\r\n```\njs\r\nfunction syncCodeThatTakesALongTime() {\r\n    for (let i = 0; i < 10000000; i++) {\r\n        Math.random() *  Math.random() *  Math.random() *  Math.random();\r\n        Math.random() *  Math.random() *  Math.random() *  Math.random();\r\n... [Log Snipped] ...\n\r\nsendAck();\n```\n- ... [Middle Discussions Snipped for Brevity] ...\n- Agreed! As long as we're using ELECTRON_RUN_AS_NODE, we don't even need child_process.fork().\r\n\r\n```sh\r\n$ ELECTRON_RUN_AS_NODE=1 electron awaitPromise.js\r\n```\r\n\r\nIs enough to trigger the bug, leaving `main.js` out of it entirely.\r\n\r\nAs a baseline,\r\n\r\n```sh\r\n$ node awaitPromise.js\r\n```\r\n\r\nworks correctly.\n- @ckerr Is there a way to disable ELECTRON_RUN_AS_NODE for a child process? I wasn't able to do it, but maybe I was just doing it wrong?"}
{"project_id": "Electron", "bug_id": "94", "source_type": "github", "llm_input_text": "[Title]: Better callback value for webContents.print()\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:** 5.0.5\r\n* **Operating System:** macOS Mojave 10.14.5 / Windows too ?\r\n* **Last Known Working Electron version:** not known\r\n\r\n### Expected Behavior\r\n\r\nWhen using `webContents.print()`, if the user click the **cancel button** on the print dialog (or on the **\"PDF\" button**) this should: return a callback value of \"false\" (error) or \"true\" (success), but with more details that only \"true\" or \"false\". Something like an error/success message that tell that the cancel button has been clicked..\r\n\r\nThis could be:\r\n\r\n- `success` when the document is sent to the printer\r\n- `cancelled` when the cancel button is clicked\r\n- `pdf` / `other-action`? when the PDF button is clicked\r\n- `failed` when an error occurs\r\n\r\n### Actual Behavior\r\n\r\nIn my application, I only want to display a success notification to the user when the print process is successfully launched and an error message when they is an error. For now, false-positive notifications are display when :\r\n\r\n- the cancel button is clicked on the print dialog (return is `false`), we do not know if it is an `error` or a `cancel` event and when an error occurs (return is `false` too), we do not know if it is an `error` or a `cancel` event.\r\n- the \"PDF\" button (only on macOS?) is clicked (return is `true`) and we would know if this is a print `success` or something else to display a \"successfully print\" notification to the user.\r\n\r\nNot tested, but Windows should have the same problem !\r\n\r\n---\r\n\r\nPerhaps linked with #15568 but more specific ?\r\n@codebytere perhaps something that is linked with #17400\n\n[Context/Logs]:\n- @popod what are you testing this with? If I run the original repro you sent in, i see `false` in the console for manual cancellation, like i expect.\r\n\r\nHowever, i think we should potentially be able to callback a string of either `failed`, `success` or `cancelled` depending on the outcome of the print; i'll add that to my backlog.\n- @codebytere I do not provide any repo for this issue.. I think you use the repo for the bug where the callback only return `false` (#17265) which use electron `4.x.x` and this is why you get a `false` value. If you want to use this repo, you should update the electron version to `5.0.5` in its `package.json`.\r\n\r\n\r\nYes, this would be very useful !\n- That's what i was referencing: it correctly prints `success` as `false` in that repro when i cancel it while running master.\n- Aie, sorry my bad ! I've update the issue description with a correct description and I've added your proposition. I think that return \"customs\" callback string values will resolve the issue."}
{"project_id": "Electron", "bug_id": "95", "source_type": "github", "llm_input_text": "[Title]: dark mode titlebar not honored on Linux in Electron 10.0.0-beta.1 and up\n[Symptom]:\n### Preflight Checklist\r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 10.0.0-beta.1\r\n* **Operating System:**\r\n  * Ubuntu 19.10\r\n* **Last Known Working Electron version:**\r\n  * 9.1.1\r\n\r\n### Expected Behavior\r\n\r\nWindow titlebar should honor the desktop theme settings.\r\n\r\n### Actual Behavior\r\n\r\nWindow titlebar does not honor the desktop theme settings.\r\n\r\n### To Reproduce\r\n\r\nReproduces with electron-quick-start.\r\n\r\n### Screenshots\r\n\r\nScreenshot includes electron-quick-start running on 9.1.1, 10.0.0-beta.1, and a non-Electron app for comparison.\r\n\r\nDescription for users not familiar with this desktop: all three titlebars should have the same background color, with the focused one having brighter text color. The 10.0.0-beta.1 window should be black, not grey.\r\n\r\n[Image: 2020-07-27T12:38:34-Screenshot-675x935]\n"}
{"project_id": "Electron", "bug_id": "96", "source_type": "github", "llm_input_text": "[Title]: data in other charset like GBK in Content-disposition cannot be encoded correctly\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * All\r\n  \r\n* **Operating System:**\r\n  * All\r\n  \r\n* **Last Known Working Electron version:**\r\n  * Unknown\r\n\r\n### Expected Behavior\r\nIf the filename encoded other than UTF-8 in http header, the filename in Content-disposition should be returned correctly after webRequest.onHeadersReceived is called.\r\n\r\n### Actual Behavior\r\nIf the filename in content-disposition encoded in GBK, before passing the http header to js, the head is converted in UTF-8 instead of doing converting code by charset. Therefore, when callback return, the filename become chaos.\r\n\r\n### To Reproduce\r\nWhen visiting a url, server responds a http header:\r\n```\n :  4854 5450 2f31 2e31 2032 3030 0041 6363                HTTP/1.1.200.Acc\r\n :  6573 732d 436f 6e74 726f 6c2d 416c 6c6f                ess-Control-Allo\r\n :  772d 4f72 6967 696e 3a20 272a 2700 4163                w-Origin:.'*'.Ac\r\n :  6365 7373 2d43 6f6e 7472 6f6c 2d41 6c6c                cess-Control-All\r\n :  6f77 2d4d 6574 686f 6473 3a20 504f 5354                ow-Methods:.POST\r\n... [Log Snipped] ...\n :  5365 7020 3230 3230 2030 383a 3232 3a31                Sep.2020.08:22:1\r\n :  3720 474d 5400 00                                      7.GMT..\n```\r\n\r\nWhen the onHeadersReceived is regitered, like the following:\r\n```\r\nsession.defaultSession.webRequest.onHeadersReceived((details, callback) => {\r\n                            callback({\r\n                                cancel: false,\r\n                                responseHeaders: details.responseHeaders,\r\n                                statusLine: details.statusLine,\r\n                            });\r\n});\r\n```\r\nThen, the response header has been change to:\r\n```\n \n...[Description Truncated]...\n\n[Context/Logs]:\n- This issue introduced standards incompatibility and must be reverted.\r\n\r\nAccording to documentation `filename*` can only have utf-8 encoded name\r\n\r\n`filename*` must be encoded using the encoding defined in [Link: [RFC5987]] is also used to encode the non-ISO-8859-1 character.\r\ne.g.:\r\n```\r\n    Content-Disposition: attachment;\r\n                     filename=\"EURO rates\";\r\n                     filename*=utf-8''%e2%82%ac%20rates\r\n```\r\n\r\n[URL]\r\n[URL]"}
{"project_id": "Electron", "bug_id": "97", "source_type": "github", "llm_input_text": "[Title]: Crashes in NativeBrowserViewViews::AutoResize function on Move/Resize\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 6.0.7 and 6.1.5  \r\n* **Operating System:**\r\n  * Windows 10 x64  \r\n* **Last Known Working Electron version:**\r\n  *  \r\n\r\n### Expected Behavior\r\nApp not crashing\r\n \r\n\r\n### Actual Behavior\r\nIt crashes \r\n \r\n\r\n### To Reproduce\r\nWas not able to reproduce myself or get reports with steps from user. \r\nOnly information that we have is crash reports with backtraces.  \r\n\r\nThis backtraces have different call traces but all end with crash in \"atom::NativeBrowserViewViews::AutoResize\" file native_browser_view_views.cc line 54. \r\nCrashes of this two types of exceptions EXCEPTION_ACCESS_VIOLATION_READ and EXCEPTION_ACCESS_VIOLATION_EXEC. \r\nCalls to AutoResize leading to a crash originated from two different events Move and Resize. \r\n\r\n \r\n\r\n\r\nCrashing line native_browser_view_views.cc line 54. \r\n[URL]\r\n\r\nCan object reference returned by GetInspectableWebContentsView() be invalid or object destroyed when Move/Resize event comes from the system? \r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n \r\n\r\n### Screenshots\r\n \r\n\r\n### Additional Information\r\nOur crash reporting system receives about 100 crashes a day what involves AutoResize.\n"}
{"project_id": "Electron", "bug_id": "98", "source_type": "github", "llm_input_text": "[Title]: Methods on remote.screen are not defined\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 11.0.2\r\n* **Operating System:**\r\n  * NixOS 21.03 x86_64\r\n* **Last Known Working Electron version:**\r\n  * 10.1.6\r\n\r\n### Expected Behavior\r\n`remote.screen.getPrimaryDisplay()` works.\r\n\r\n### Actual Behavior\r\n`Uncaught TypeError: remote.screen.getPrimaryDisplay is not a function`\r\n\r\n### To Reproduce\r\nElectron Fiddle: [URL]\r\n\r\n### Additional Information\r\nThis broke between 11.0.0-nightly.20200724 and 11.0.0-nightly.20200729, probably in #24677. Cc @nornagon.\r\n\r\nSee also electron-userland/spectron#771, webtorrent/webtorrent-desktop#1896.\n\n[Context/Logs]:\n- Both macOS11 and Windows 10 will have this problem.\n- Also confirmed on Linux as having broken between v10.1.6 and v11.0.2.\r\n\r\nThis is an Electron regression and should get fixed, but just a heads-up that [Link: remote is deprecated] and in the long term you'll want to migrate away from this API."}
{"project_id": "Electron", "bug_id": "99", "source_type": "github", "llm_input_text": "[Title]: AudioWorklet hangs UI when `nodeIntegrationInWorker` is enabled\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 10.0.1\r\n  * 10.0.0-beta.10\r\n  * 9.2.1\r\n* **Operating System:**\r\n  * Windows 10 (2004)\r\n  * macOS 10.15.6\r\n* **Last Known Working Electron version:**\r\n  * 10.0.0-beta.9\r\n  * Issue is seen in 10.0.0-beta.10\r\n\r\n### Expected Behavior\r\nAudioWorklets can be created and destroyed multiple times while `nodeIntegrationInWorker` is enabled.\r\n\r\n### Actual Behavior\r\nAudioWorklet can only be created and destroyed once. Upon creating a second AudioWorklet, the UI hangs indefinitely.\r\n\r\n### To Reproduce\r\nElectron Fiddle: [URL]\r\n\r\n1. Load Audio Worklet examples directory: [URL]\r\n2. Open a demo and click start.\r\n3. Navigate back and return to the demos directory.\r\n4. Open another demo and click start.\r\n\r\nUI should no longer be responsive.\n\n[Context/Logs]:\n- I did a little investigating on this. I don't have it fully sussed out yet, but I'm about 2/3s of the way there.\r\n\r\nFirst off, [Link: the patch] that caused this regression -- which, was approved by a couple of people, including me :sweat_smile:  -- introduces a pretty nasty bug. What happens is the worker thread blocks while listening for events in the select() call in `NodeBindingsMac::PollEvents()`. [URL] contains a semantic change in `NodeBindings::WakeupEmbedThread()` -- previously, its behavior was \"wake up this object's embed thread.\" The new behavior is \"wake up the embed thread unless it's the worker thread. So, when the worker thread's NodeBindings destructor calls `WakeupEmbedThread()`, it's a no-op and the `select()` in `NodeBindingsMac::PollEvents()` never wakes up. This made the `uv_walk()` cash disappear -- *the worker thread never closes*, so the NodeBindings destructor never finishes destructing, and so `uv_walk()` is never reached. :tada: \r\n\r\nSince the threads never finish, we're leaking every resource associated with the NodeBindings object, including the thread, the uv loop, and so on.\r\n\r\nSo the next step is to undo that `NodeBindings::WakeupEmbedThread()` change and figure out where the crash is coming from. I think I have that step figured out and will update the ticket shortly with a PR.\n- I've got a partial fix up in #25332 \r\n\r\nThis PR wraps the `uv_async_t` objects owned by NodeBindings and ElectronBindings inside a new UvHandle wrapper class which ha\n...[Text Truncated]...\ne loop as a dangling pointer.\r\n\r\nThe UvHandle wrapper handles the close-delete twostep, fixing the `uv_walk()` crash seen in #22069 in a way that doesn't cause the #25248 regression and which fixes the threads we've been [Link: leaking]. This is all well and good; unfortunately, this now surfaces a second issue:\r\n\r\n```\n[85352:0904/174418.843359:ERROR:CONSOLE(1995)] \"Connection is closed, can't dispatch pending call\", source: devtools://devtools/bundled/sdk/sdk.js (1995)\r\n[85359:0904/174418.764382:FATAL:devtools_agent.mojom-blink.cc (http://devtools_agent.mojom-blink.cc)(270)] Check failed: !connected. DevToolsAgent::ReportChildWorkersCallback was destroyed without first either being run or its corresponding binding being closed. It is an error to drop response callbacks which still correspond to an open interface pipe.\r\n0   Electron Framework                    base::debug::CollectStackTrace(void**, unsigned long) + 9\r\n1   Electron Framework                    base::debug::StackTrace::StackTrace() + 19\r\n2   Electron Framework                    logging::LogMessage::~LogMessage() + 261\r\n... [Log Snipped] ...\n17  Electron Framework                    mojo::MessageDispatcher::Accept(mojo::Message*) + 251\r\n18  Electron Framework                    mojo::Connector::DispatchMessage(mojo::Message) + 470\n```\r\n\r\nThis error message looks straightfoward enough, but I haven't started to track it down yet.\n- This should be closed by a combination of [URL] and the polling PR i just merged!"}
{"project_id": "Electron", "bug_id": "100", "source_type": "github", "llm_input_text": "[Title]: Crash on web worker close with node integration\n[Symptom]:\n### Preflight Checklist\r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n7.1.2\r\n* **Operating System:**\r\nMac OS 10.15.2\r\n* **Last Known Working Electron version:**\r\nUnknown, bug has existed since at least 4.0\r\n\r\n### Expected Behavior\r\nWeb workers with node integration should not crash on shutdown.\r\n\r\n### Actual Behavior\r\nWeb workers with node integration occasionally crash on shutdown.\r\n\r\n--\r\n\r\n\r\n\r\n\r\n### To Reproduce\r\nI am sorry, I do not have a repro because this is definitely a timing issue and is difficult to track down.\r\n### Additional Information\r\nI would tell you at least what code is involved in the crash, but the library that is the culprit is rather large, we use Monaco Editor, which is a subset of the VScode codebase. When it shuts down webworkers, we occasionally run into this crash.\r\n\r\nIt looks like there was a similar issue opened [URL] but this has been closed and whatever the actual cause of this segfault is still out there, haunting us.\r\n\r\nStack trace, crashes with EXC_BAD_ACCESS / KERN_INVALID_ADDRESS:\r\n```\njson\r\n{\r\n  \"function\": \"uv_close\",\r\n  \"function_offset\": \"0xb7\",\r\n  \"module_offset\": \" \",\r\n... [Log Snipped] ...\n  \"trust\": \"frame_pointer\"\r\n}\n```\n\n[Context/Logs]:\n- I'm getting the same crash. At random times right around when a web worker is terminated in my app, the screen goes white and dev tools gets disconnected. Using electron 8.2.0, macOS 10.15.4\r\nEDIT:  Here is the crash report: [Link: Sentry event]\n- Another similar error report: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @codebytere Thank you for looking at this. I hope to see this when we update Electron next :D.\n- @implausible i just backported it to all supported release lines so it should get to you in the next release \ud83d\ude80"}
{"project_id": "Electron", "bug_id": "101", "source_type": "github", "llm_input_text": "[Title]: Memory leak when passing IPC events over contextBridge\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: X] I have read the [Contributing Guidelines] for this project.\r\n* [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [X] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 11.1.0 and 9.3.5\r\n* **Operating System:**\r\n  * Windows 10 2004\r\n* **Last Known Working Electron version:**\r\n  * NA\r\n\r\n### Expected Behavior\r\nuse of webContents.send + ipcRenderer.on cleans up memory after use\r\n\r\n### Actual Behavior\r\n\r\nIn a real-world case, I have a renderer for the UI and a separate browserWindow for an audio process. The audio process monitors audio devices and reports the current volume of all devices via ipcRenderer.send (through preload contextBridge to the main process). The main process then sends this volume data over to the main UI renderer via webContents.send whereas the UI renderer listens via ipcRenderer.on (via preload contextBridge). This happens about once every 100 milliseconds. Memory use of the electron app, especially the renderer, slowly climbs to theoretical Infinitum. The starting memory is about 350MB. Within about a day, it's up to 1,500MB.\r\n\r\nIt does not matter what kind of content is passed through as arguments, nor its size (garbage collector seems to work on arguments). What matters is how often / frequently webContents.send is called and if there is an ipcRenderer.on listener for it (memory leak still exists even if there is nothing in the listener function so long as the listener exists).\r\n\r\n### To Reproduce\r\n\r\nElectron fiddle with a very simple example calling webContents.send every millisecond (to make the test quick... but the issue exists if you do every 100 milliseconds too but is much slower) and sending a Math.random() random number to the renderer. Memory use will increase over the course of a few minutes. I tested with a 10,000-item map as an argument as well, which made \n...[Description Truncated]...\n\n[Context/Logs]:\n- Hm, I can't reproduce this on macOS. Memory usage is hovering steadily around 130\u2013140mb.\r\n\r\nSlightly modified gist including memory logging: [URL]\n- @nornagon I used the fiddle you have. process.memoryUsage is not catching the leak as it seems to be happening in the renderer process.\r\n\r\n[Image: image]\n- ... [Middle Discussions Snipped for Brevity] ...\n- @Lovinity expose specific methods that your app needs, instead of allowing the app to listen to any IPC message.\n- I've updated the gist at [URL] to simplify it somewhat. It now doesn't need any interaction with IPC or events. This is enough to trigger the leak:\r\n\r\n```\njs\r\n// preload.js\r\nlet g_fn = null\r\n\r\ncontextBridge.exposeInMainWorld(\"test\", {\r\n... [Log Snipped] ...\n// renderer.js\r\nwindow.test.on(() => {});\n```\r\n\r\nJust sending a function back over the bridge results in leaks."}
{"project_id": "Electron", "bug_id": "102", "source_type": "github", "llm_input_text": "[Title]: Microtasks policy incorrect, leading to DCHECK, when calling `window.open` from `setImmediate`\n[Symptom]:\nTo repro, run this fiddle under a debug build: [URL]\r\n\r\n```\n#\r\n# Fatal error in ../../v8/src/api/api-inl.h, line 183\r\n# Debug check failed: microtask_queue->GetMicrotasksScopeDepth() || !microtask_queue->DebugMicrotasksScopeDepthIsZero().\r\n#\r\n#\r\n... [Log Snipped] ...\n35  Electron Helper (Renderer)            main + 439\r\n36  libdyld.dylib                         start + 1\n```\r\n\r\nI believe this is due to the hack in `UvRunOnce` being insufficient to swap between `kExplicit` and `kScoped` microtask policies when a new node environment is created during execution of `UvRunOnce`. i.e. this:\r\n\r\n[URL]\r\n\r\nsets the policy to `kExplicit`, but then `CreateEnvironment` is called during the tick, and subsequently this:\r\n\r\n[URL]\r\n\r\nis called, which sets the policy back to `kScoped`, due to:\r\n\r\n[URL]\r\n\r\nSince the policy is now `kScoped`, the DCHECK in question triggers the next time a JS function is called, which is in the `CheckImmediate` code in Node.\r\n\r\ncc @codebytere\n\n[Context/Logs]:\n- cc @indutny - you may also have thoughts here! This was added in [URL]\n- Thanks for a detailed report @nornagon , and sorry my changes caused it. I'm trying to find a solution that would account for code branches. Will get back to you once I have something...\n- ... [Middle Discussions Snipped for Brevity] ...\n- Here's the stack trace for the `CreateEnvironment` call that causes it:\r\n\r\n```\n* thread #1, name = 'CrRendererMain', queue = 'com.apple.main-thread', stop reason = breakpoint 1.1\r\n  * frame #0:   Electron Framework`::CreateEnvironment() at node_bindings.cc:393:8 [opt]\r\n    frame #1:   Electron Framework`::DidCreateScriptContext() at electron_renderer_client.cc:111:23 [opt]\r\n    frame #2:   Electron Framework`::DidInstallConditionalFeatures() at electron_render_frame_observer.cc:71:23 [opt]\r\n    frame #3:   Electron Framework`::DidInstallConditionalFeatures() at render_frame_impl.cc:4265:14 [opt]\r\n... [Log Snipped] ...\n    frame #28:   Electron Framework`uv_run at core.c:394:5 [opt]\r\n    frame #29:   Electron Framework`::UvRunOnce() at node_bindings.cc:581:11 [opt]\n```\n- Here goes the fix: [URL] ."}
{"project_id": "Electron", "bug_id": "103", "source_type": "github", "llm_input_text": "[Title]: mouseleave event isn't fired when moving the mouse outside the window (Windows)\n[Symptom]:\nI have a simple `div` with a css hover effect changing the background color. When I move the mouse outside of the window area, the `div` keeps its hover style. It should actually go back to its normal style. Presumable the mouseleave event was \"swallowed\".\n\nFor a demonstration video see here: [URL]\n\nIt happens using the frameless view **and** using the windows frame view. Even though the latter is more difficult to reproduce (move the mouse faster).\n\nYou can reproduce it with this sample code:\n\n```\nhtml\n \n \n   \n     mouseleave \n... [Log Snipped] ...\n   \n \n```\n\nMy setup:\nWindows ~~**8.1**~~ **7**\natom-shell **0.15.7**\n\n[Context/Logs]:\n- I just tested on Windows 8.1 and Atom-Shell 0.15.7 and your example seems to work fine for me on both a framed and unframed browser window. I cannot reproduce the behavior I see on your video.\n- The video above was made on Windows **7**. Sorry for the confusion.\n\nBut I just tested it again on another computer (this time Windows 8.1 and atomshell 0.15.9), same behavior.\n@frankhale Did you try the frameless mode? `frame: false`when createing the BrowserWindow? When you keep the frame it's hard to reproduce. You have to _manically_ move the mouse back and forth ;)\n- ... [Middle Discussions Snipped for Brevity] ...\n- When I say the window wouldn't react, I'm actually thinking about my app-region titlebar, which wouldn't reappear because it can't catch mouse moves and needs coordinates calculations instead. But you're probably right, with appropriate modifications on this bar it may work as expected.\n- I have enabled the check for the focused window by default, but you can disable it by setting `regionAppOptimized = true`. Most of the time, app regions will fail to respond if you don't set to true:\r\n\r\n[Image: fix]\r\n\r\nI thought it would be smart to apply a `-webkit-app-region: drag` property on the titlebar **after** it got its opacity back (to let it catch mouseenter events), but that trick doesn't work. The view must have that info in cache and does not obey the CSS change quickly enough."}
{"project_id": "Electron", "bug_id": "104", "source_type": "github", "llm_input_text": "[Title]: Electron desktopCapturer.getSources().then is not resolved\n[Symptom]:\n### Preflight Checklist\r\n \r\n\r\n* [Link: x] I have read the [Contributing Guidelines] for this project.\r\n* [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 10.1.2\r\n* **Operating System:**\r\n  * Ubuntu 18.04.5 LTS\r\n\r\n### Expected Behavior\r\n \r\n`desktopCapturer.getSources().then` should be resolved\r\n\r\n### Actual Behavior\r\n`desktopCapturer.getSources().then` is not resolved after 1 minute\r\n\r\n### To Reproduce\r\n```\njs\r\nconst { app, desktopCapturer, screen } = require('electron');\r\n\r\nconst fs = require('fs')\r\nconst path = require('path')\r\n... [Log Snipped] ...\n}\r\nsetInterval(takeScreenshot, 15000);\n```\r\n\r\n \r\n\r\n \r\n\r\n```sh\r\ngit clone git@bitbucket.org:praveen-knackforge/electron-boilerplate.git -b screenshot\r\nnpm install\r\nnpm start || electron .\r\n```\r\n\r\n### Screenshots\r\n \r\n[Image: image]\r\n\r\n\r\n### Additional Information\r\nI used `desktopCapturer` API from the main process\n\n[Context/Logs]:\n- Hmm - just tested this on `Ubuntu 18.04.5 LTS` with `10.1.2` and experienced no issues:\r\n\r\n<img width=\"671\" alt=\"Screen Shot 2020-09-24 at 1 39 51 PM\" src=\"[URL]\n- I\u2019m experiencing this bug albeit in a different context. On latest production Windows 10 and Electron 11.0.3, first call to `getSources` resolves perfectly. Second or third call will never resolve the promise, along with any subsequent calls. This effectively halts the application, at least in my use case. I\u2019ll update this comment if/when I find a workaround.\r\n\r\nEven though @pravintamil is on Linux, my main process console looks identical. First few resolve, then the promises hang.\r\n\r\nSome good news, though! macOS Catalina/Big Sur both Apple and Intel are not affected as per my testing with Electron 10/11.\n- ... [Middle Discussions Snipped for Brevity] ...\n- It's good to have a fix at the root cause.\r\n\r\nAs there is a cache of pending promises for concurrent calls that have the same parameters, maybe it would worth to also have some kind of timeout (wrapping the main promise in a `Promise.race` with a promise that rejects itself after some seconds). In this case, if something else happens that keeps a stuck pending promise in the cache, the behavior on the caller would be easier to debug.\n- If there are issues that persist after the fix is released, this might be something to consider."}
{"project_id": "Electron", "bug_id": "105", "source_type": "github", "llm_input_text": "[Title]: [Bug]: bad typescript definition for BrowserWindow.hookWindowMessage\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\n\n### Electron Version\n\n12.0.1\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\n10\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\n`BrowserWindow::hookWindowMessage`'s callback parameter should have the lParam and wParam parameters:\r\n`hookWindowMessage(message: number, callback: (lParam: Buffer, wParam: Buffer) => void): void;`\n\n### Actual Behavior\n\ncallback is `() => void`\n\n### Testcase Gist URL\n\n_No response_\n\ncontinuation of [Link: this closed issue]\n"}
{"project_id": "Electron", "bug_id": "106", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Geolocation crashes 13.0.1\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\n\n### Electron Version\n\n13.0.1\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\n11.4\n\n### What arch are you using?\n\narm64 (including Apple Silicon)\n\n### Last Known Working Electron version\n\n12.0.7\n\n### Expected Behavior\n\nElectron shouldn't crash.\n\n### Actual Behavior\n\nElectron crashes.\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nElectron 13.x crashes on any geolocation use. Backtrace attached.\n\n[Context/Logs]:\n- Crash occurs on x86_64 and arm64.\n- Here is a gist with a repro: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Issue still present in 13.1.1\n- @MarshallOfSound I\u2019d love to take a look at this further but I can\u2019t get Electron to build on my M1 MBP.\r\n\r\nI followed the steps in the building docs but I might have missed something.\r\n\r\nIs there somewhere one can go to ask possibly\u2026 simple\u2026 building questions?"}
{"project_id": "Electron", "bug_id": "107", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Auto updater consumes 100% percent CPU when waiting on user password\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\n\n### Electron Version\n\n12.0.6\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\nBig Slur 11.3.1\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\nI have several apps that use electron (Slack, Draw.io, Visual Studio Code, Atom), every time there is an update, a dialog pops asking for admin/sudo password to install. The update dialog should *not* consume 100% CPU. \r\n\n### Actual Behavior\n\nThe app process runs at 100 percent CPU while waiting for user input confirmation. This happens quite frequently as I use many electron app that have frequent updates, and the high CPU happens for extended periods of time as I am not always present at my computer when the auto update pop up happens.\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\nThis appears to be a problem with an underlying dependency on [Link: Squirrel.Mac] that Electron uses however it would appear that library is no longer maintained - See [URL]\r\n\r\nThere is also a related issue in Squirrel, and comment by jspahrsummers (original author I believe), that he has not worked on with the code base in 6+ years and no longer familiar with it - See  [URL] \r\n\r\nAn example of an update popup dialog below:\r\n[Image: Screen Shot 2021-05-12 at 5 35 36 pm]\r\n\r\nBelow a screenshot of `htop` showing Atom running at 100%.\r\n[Image: Screen Shot 2021-05-12 at 5 47 49 pm]\r\n\r\n\r\nBelow is the output from `sample 9096` showing a profile of Atom\r\n[Link: Atom_2021-05-12_174109_EbSY.sample.txt]\r\n\r\nOther related issues:\r\n  - [URL]\n\n[Context/Logs]:\n- Just to confirm that I've seen this for various application on various Macs: Slack, WhatsApp, Epic Games.\r\nAs mentioned in the VS Code issue, a workaround is to `chown` the application but this obviously has security implications!"}
{"project_id": "Electron", "bug_id": "108", "source_type": "github", "llm_input_text": "[Title]: [Bug]: MessageBoxOptions type declaration mistake, string is not allowed in icon.\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n16.0.6\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\n11.6.2\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\nI think it's a type declaration mistake in MessageBox Options.\r\nMessageBoxOptions\u306e\u578b\u5ba3\u8a00\u30df\u30b9\u3060\u3068\u601d\u3044\u307e\u3059\u3002\r\n\r\n  interface MessageBoxOptions {\r\n    icon?: (NativeImage) | (string);\r\n\r\nI think it's a type declaration mistake in MessageBox Options.\r\nWith MessageBoxSyncOptions, icon allows strings, but MessageBoxOptions is only NativeImage.\r\nMessageBoxSyncOptions\u306a\u3089icon\u306fstring\u3082\u8a31\u3059\u306e\u3067\u3059\u304c\u3001MessageBoxOptions\u306fNativeImage\u306e\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\r\n\r\n  interface MessageBoxSyncOptions {\r\n    icon?: (NativeImage) | (string);\r\n\n### Actual Behavior\n\n  interface MessageBoxOptions {\r\n:\r\n    icon?: NativeImage;\r\n:\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n[Context/Logs]:\n- I forgot to write it, and I made a mistake in the manual.\r\n\u66f8\u304d\u5fd8\u308c\u307e\u3057\u305f\u3001\u30de\u30cb\u30e5\u30a2\u30eb\u3082\u30df\u30b9\u3057\u3066\u3044\u307e\u3059\u3002\r\n\r\ndialog | Electron [URL]\n- Hey @famibee, thanks for reporting this issue! You're right, I see the discrepancy between MessageBox and MessageBoxSync:\r\n\r\nMessageBoxOptions.icon?: NativeImage ([Link: docs link])\r\nMessageBoxSyncOptions.icon?: NativeImage | string ([Link: docs link])\r\n\r\nWe'll see if we can sync these types so that icon takes the same options \ud83d\ude47\u200d\u2640\ufe0f  Thanks for spotting this!\n- This goes back to [URL] which added `| string` for the sync variant but not for the async variant. Probably both should have them for the same reasons listed in 19782"}
{"project_id": "Electron", "bug_id": "109", "source_type": "github", "llm_input_text": "[Title]: [Bug]: setBounds calls during will-resize are no longer applied when preventing the default resize\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n17.4, 18, 19\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\nWindows 10 Pro 21H1\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n17.3.1\n\n### Expected Behavior\n\nPrior to version 17.4.0, it was possible to override the bounds received within will-resize event. While this ability is not explicitly documented, we rely on it for window management within our product.\n\n### Actual Behavior\n\nThe window no longer resizes when the will-resize event is prevented and we attempt to control the resize with setBounds. \n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nThis was caused during the changes from:\r\n[Ref: #33288]\r\nI believe the gate on is_resizing_ at the top of setBounds is preventing any ability to overwrite the bounds that come in during a will-resize event.\r\n\r\nOur application currently overrides the native resize and does our own resize after modifying the window bounds. This has caused resize to break in recent electron versions as the intermediate setBounds calls during resize are not being applied. We have several aspects of window management that depend on having this level of control over resize:\r\n\r\n- Groups of windows maintaining proportions when a single window in the group is resized\r\n- Snapping edges of windows to other windows during resize\r\n- Resolving jitter of a window during resize by applying our own calculations\r\n\r\n I've also mentioned this issue in a related issue: #33897. The fix from that issue only had the effect of not applying the final setBounds in the resize action. In our case that causes the window to no longer resize instead of giving no visual indication \n...[Description Truncated]...\n"}
{"project_id": "Electron", "bug_id": "110", "source_type": "github", "llm_input_text": "[Title]: [Bug]: session.getBlobData never resolves with blob sizes > 65536\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n17.0.0\r\n\r\n### What operating system are you using?\r\n\r\nmacOS\r\n\r\n### Operating System Version\r\n\r\nmacOS Monterey 12.3.1 (21E258)\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\nN/A\r\n\r\n### Expected Behavior\r\n\r\nWhen running `session.getBlobData` on a blob UUID from an `onBeforeRequest` handler, I expect the resulting promise to resolve successfully to a buffer when the blob size is   65536, the resulting promise never resolves.\r\n\r\n### Testcase Gist URL\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\nThis issue appears to be a possible duplicate of [URL] though the other issue includes very little additional information, so I have filed a separate issue to be safe.\r\n\r\nI did a bit of digging through the Electron glue source, and I found the following:\r\n\r\n[URL]\r\n[URL]\r\n\r\nI suspect that this is related.\n\n[Context/Logs]:\n- I have also created [URL] for a more interactive example of this bug.\n- Experiencing same issue\n- ... [Middle Discussions Snipped for Brevity] ...\n- I'm not a member of the electron team,\r\nAnd I don't konw how to fix this issue,\r\nI just want help.\r\nI don't konw why @microwugui dislike my answer.\r\n\r\n@quantatic \r\nI can't get the data of the `UploadData` object by `blobUUID` too.\r\nIn my case,I need to read a big file pice by pice\r\nAnd the `File` object doesn't have path property (Print screen and paste into the electron app) \r\nI tried to post the file to the main process, and use `getBlobData` to read the data, I failed.\r\nSo I have to read the data by `slice` and `readAsArrayBuffer` method.\r\nThat's all.\n- We are not talking about your case, so I dislike your helpless comment\r\n\r\nIn my case, I can't get `interceptBufferProtocol` work as I expect because `getBlobData` not returned on large data\r\n\r\nWe need to focus on the issue not any other workaround, thx"}
{"project_id": "Electron", "bug_id": "111", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Wrong TypeScript type of ses.getStoragePath\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n20.0.1\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\nmacOS Monterey 12.5\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\nThe return type of `ses.getStoragePath()` should be `string | null`. This is returned when actually calling the function and is also described in [URL]\n\n### Actual Behavior\n\nThe generated TypeScript type definition says `ses.getStoragePath()` returns `void`, as can also be seen in [URL]\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\n_No response_\n"}
{"project_id": "Electron", "bug_id": "112", "source_type": "github", "llm_input_text": "[Title]: [Bug]: skipTaskbar: true ignored\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n17.1.0-1-x86_64\r\n\r\n### What operating system are you using?\r\n\r\nOther Linux\r\n\r\n### Operating System Version\r\n\r\nKernel: 5.16.11-arch1-1\r\n\r\n### What arch are you using?\r\n\r\nx86_64\r\n\r\n### Last Known Working Electron version\r\n\r\n16.0.8-2-x86_64\r\n\r\n### Expected Behavior\r\n\r\nelectron app not shown in the taskbar\r\n\r\n### Actual Behavior\r\n\r\nelectron app is shown in the taskbar\r\n\r\n### Testcase Gist URL\r\n\r\n_No response_\r\n\r\n### Additional Information\r\n\r\n_No response_\n\n[Context/Logs]:\n- Thanks for reporting this and helping to make Electron better!\r\n\r\nWould it be possible for you to make a standalone testcase with only the code necessary to reproduce the issue? [Link: Electron Fiddle] is a great tool for making small testcases and publishing them as [Link: gists] that Electron maintainers can use.\n- I didn't know what to test. With Vers. 16.0.8-2 \"skipTaskbar\" works, after upgrade to Vers. \n17.1.0-1 \"skipTaskbar\" will be ignored, the app is shown in the taskbar like any other app as \nvivaldi, thunar etc. So I downgrade and all works fine again. In the attachment the important \nfiles for you from my app. I hope it helps.\n\nWalter\n- ... [Middle Discussions Snipped for Brevity] ...\n- This is likely a side-effect of X11 -> Wayland migration. Currently Electron uses `_NET_WM_STATE_SKIP_TASKBAR` to tell the WM to hide an app from the taskbar.\r\n\r\n### GNOME\r\n\r\nAccording to [Link: wayland-bites] the equivalent to `_NET_WM_STATE_SKIP_TASKBAR` on GNOME is with `Window.is_skip_taskbar`, but that \"Since GNOME 41, WaylandClient, Workspace, WorkspaceManager, IdleMonitor and Window Meta APIs are available only to GNOME Extensions or in the unsafe mode.\"\r\n\r\nThe same page says that \"WaylandClient.{hide_from|show_in}_window_list\" might also be an approach, but that \"WaylandClient controls only subprocess surfaces\".\r\n\r\n### KWin\r\n\r\nOn the KWin side, the `KWin::Toplevel::skipTaskbar` is the API to use but \"[the] KWin Scripting API is available only to dedicated registered scripts.\"\r\n\r\n\r\n... in short, there doesn't seem to be an easy way to do this anymore in a Wayland world, and the tradeoffs involved (e.g. running in unsafe mode) are IMO not worth the cost.\r\n\r\nI'd be happy to be proven wrong if someone knows of a better workaround, but if the above is correct IMO we should update the documentation to say that `skipTaskbar` is not supported on Wayland\n- Has anyone requested at the Wayland issue tracker that an API be provided? It seems like that should have been the first port of call."}
{"project_id": "Electron", "bug_id": "113", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Register wrong command for  setAsDefaultProtocolClient\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\n\n### Electron Version\n\n13.1.2\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\nWindows 10 version 1709\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\nWhile registering a default protocol :\r\n```js\r\napp.setAsDefaultProtocolClient('test', process.execPath, [path.resolve(process.argv[1])])\r\n```\r\nIf the `process.execPath` has space in it then it should register correct command.\r\n\r\nExample if a app is located at `D:\\demo space\\electron-demo` :\r\nthen the registered command should be \r\n```bash\r\n\"D:\\demo space\\electron-demo\\node_modules\\electron\\dist\\electron.exe\" \"D:\\demo space\\electron-demo\" \"%1\"\r\n```\r\n\n### Actual Behavior\n\nWhile registering a default protocol :\r\n```js\r\napp.setAsDefaultProtocolClient('test', process.execPath, [path.resolve(process.argv[1])])\r\n```\r\nIf the `process.execPath` has space in it then it registers wrong command.\r\n\r\nExample if a app is located at `D:\\demo space\\electron-demo` :\r\nthen the registered command is \r\n```bash\r\n\"D:\\harmonize-space\\electron-demo\\node_modules\\electron\\dist\\electron.exe\" D:\\demo space\\electron-demo \"%1\"\r\n```\r\n\r\nThus it raises a error `Error : Launching app \\n No app found at D:\\demo` .\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\nWant to work on this issue.\r\nIf possible Assign it to me.\n"}
{"project_id": "Electron", "bug_id": "114", "source_type": "github", "llm_input_text": "[Title]: [Bug]: SIGTRAP when starting electron >= 20.0.0-beta.9\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n20.0.0-beta.9 and 20.0.0-beta.10\n\n### What operating system are you using?\n\nOther Linux\n\n### Operating System Version\n\nFedora 35\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\nAll older versions, including 19 and 20.0.0-beta.8\n\n### Expected Behavior\n\nElectron quickstart app should work, as should ANY other electron app, I have tested a bunch of them, but all gave the same results, after you install a recent 20 beta.\n\n### Actual Behavior\n\nThey don't start if I use version 20.0.0-beta.9 or 20.0.0-beta.10, older versions *do* work. It only happens on *one* of the devices I own, *all* others are fine, but this one does not handle these new versions, while older ones work. This must have been introduced somewhere in [Link: these commits between those releases].\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nRunning electron with `gdb` does not give a lot of info, unless I'm running it incorrectly, please see below and let me know if this should be done differently:\r\n```\ngdb\r\njelmerro ~/electron-quick-start (master)$ gdb --args node node_modules/.bin/electron .\r\nGNU gdb (GDB) Fedora 12.1-1.fc35\r\nCopyright (C) 2022 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later   (LWP 12935) exited]\r\n[Inferior 1 (process 12927) exited with code 01]\n```\n\n[Context/Logs]:\n- Confirmed on Ubuntu 22.04. Reproducing is exactly as described by @Jelmerro: run quick-start, e.g. in fiddle, and `SIGTRAP` appears immediately. The regression appeared between -beta.8 and -beta.9.\n- [URL]\r\n\r\nIt's probably the 104.0.5112.39 bump at   but I'll do some testing to confirm.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Does this need the [URL] label or could this be because of any other protocol?\n- Great question; I should've included that info in my previous comment. I'm seeing this in 22.04 with Xorg."}
{"project_id": "Electron", "bug_id": "115", "source_type": "github", "llm_input_text": "[Title]: [Bug]: `require('electron/lol')` inside an electron process requires the `'electron'` module instead\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n17.0.1\r\n\r\n### What operating system are you using?\r\n\r\nall\r\n\r\n### Operating System Version\r\n\r\nall\r\n\r\n### What arch are you using?\r\n\r\nall\r\n\r\n### Last Known Working Electron version\r\n\r\n9.4.4\r\n\r\n### Expected Behavior\r\n\r\n* Should throw a `MODULE_NOT_FOUND` error OR\r\n* The difference between Electron's and Node.js' `require()` should be documented\r\n\r\n### Actual Behavior\r\n\r\nIt requires the 'electron' module instead.\r\n\r\n### Testcase Gist URL\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\n* This is a continuation of [URL] which was closed because requiring `electron/package.json` is not expected behaviour. This issue however, only focuses on the part where we decide whether we should allow users to require modules with names falling into this regex - `electron/.*` (not `package.json` in particular).\r\n* This is likely happening due to the way [URL] is written. I'm suspecting this change - [URL] so cc @MarshallOfSound and @nornagon.\n\n[Context/Logs]:\n- Still relevant in all versions of Electron > 9.4.4."}
{"project_id": "Electron", "bug_id": "116", "source_type": "github", "llm_input_text": "[Title]: wayland csd on gnome are broke for 25.x and newer.\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n25.1\n\n### What operating system are you using?\n\nOther Linux\n\n### Operating System Version\n\nArch Linux / 6.3.7-zen1-1-zen\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n24.5\n\n### Expected Behavior\n\n`$ electron24 --ozone-platform-hint=auto --enable-features=UseOzonePlatform,WaylandWindowDecorations`\r\n[Image: Zrzut ekranu z 2023-06-14 15-12-55]\r\n\n### Actual Behavior\n\n`$ electron25 --ozone-platform-hint=auto --enable-features=UseOzonePlatform,WaylandWindowDecorations`\r\n[Image: Zrzut ekranu z 2023-06-14 15-14-58]\r\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\nany electron version newer than 24 (25/alpha-26/nightbuild-27) are broken\n\n[Context/Logs]:\n- Hi-DPI support seems to have been lost in 25 as well, which seems related. The windows have scale 1 even when the monitor has scale 2, thus get upscaled by gnome-shell.\r\n\r\nPS: Never mind, the proper scale can be restored with `--disable-features=WaylandFractionalScaleV1` ([Link: chromium issue 1356014]), but this doesn't restore the title bar buttons.\n- Confirming the lack of title bar buttons on Wayland.\r\n\r\nI start my Electron app with `--ozone-platform=wayland --enable-features=WaylandWindowDecorations` and don't get the close, minimize and maximize buttons.\r\n\r\nUsing GNOME 44.2 with Wayland. Rolling back to version 24 (24.6.1 as of this writing) is a workaround for now.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Can confirm that all Electron apps look really blurry and without a titlebar. Adding `--disable-features=WaylandFractionalScaleV1` does *not* fix the blurriness for me.\n- I'm still seeing this issue on a Fedora based Linux distro using wayland"}
{"project_id": "Electron", "bug_id": "117", "source_type": "github", "llm_input_text": "[Title]: [Bug]: WebAuthn Discoverable Credential (Resident Credential)\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n17.1.2\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\nWindows 11 version 22H2\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\nAfter call `navigation.credential.get()` with the appropriate parameters for getting resident credential from security key. Built-in Windows FIDO2 client should popup to guide the user to complete the request.\n\n### Actual Behavior\n\nAn error was thrown: `NotSupportedError: Resident credentials or empty 'allowCredentials' lists are not supported at this time.`\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\n[URL]\n\n[Context/Logs]:\n- Support for discoverable credentials with physical authenticators is disabled by default in chromium. \r\nWhile the Chrome browser enables it, Electron doesn't.\r\nSubmitted this pull request [/pull/35374] to turn it on. \r\nTested with a physical Yubikey on Windows, and works to create and get discoverable credentials.\n- @ks75vl PR [URL] is now merged, so you may want to retest.\r\nDepending on your IdP, you may need to strip out any any custom agents (e.g. \"Electron/xx.xx\" or \"MyAppName/xx.xx\") from the User Agent string. IdP's can suppress security key functionality based on what they see in the User Agent. Azure AD certainly does this. Not sure about others.\n- I'm assuming this feature has been introduced in `electron@22.0.0-alpha.1` according to the release notes but I've tried it using `electron@22.0.0-alpha.7` and it still does not seem to work as expected. In this case, if the `allowCredentials` property is not defined or is an empty list, instead of the error reported by OP, it yields:\r\n\r\n\r\nIf `allowCredentials` contains a valid credentialId, everything works fine. So, I'm guessing there is still something missing."}
{"project_id": "Electron", "bug_id": "118", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Electron crashes with libnotify 0.8.3 in portal environment when closing notification\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n25.0.0, 27.0.3 and 28.0.0-beta.2\r\n\r\n### What operating system are you using?\r\n\r\nOther Linux\r\n\r\n### Operating System Version\r\n\r\n- Arch Linux\r\n- `uname -a`: `Linux hostname 6.5.7-arch1-1 #1 SMP PREEMPT_DYNAMIC Tue, 10 Oct 2023 21:10:21 +0000 x86_64 GNU/Linux`\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\nNot sure\r\n\r\n### Expected Behavior\r\n\r\nElectron does not crash when running `notification.close()`.\r\n\r\n### Actual Behavior\r\n\r\nElectron crashes with `notification.close()` when in portal (flatpak/snap, or `NOTIFY_FORCE_PORTAL=1` is set).\r\n\r\n### Testcase Gist URL\r\n\r\n_No response_\r\n\r\n### Additional Information\r\n\r\nAn MRE modified from electron-quick-start: [URL]\r\n\r\nScreencast:\r\n\r\n[URL]\r\n\r\nMy analysis:\r\n\r\n1. `LibnotifyNotification::Show()` binds \"closed\" glib signal to `LibnotifyNotification::OnNotificationClosed` [URL]\r\n2. When closing (dismissing) notification, `LibnotifyNotification::Dismiss()` is called which runs `libnotify_loader_.notify_notification_close()`: [URL]\r\n3. In `notify_notification_close()`, as libnotify 0.8.x adds supports for portal environment, it will call `remove_portal_notification()` instead of using gdbus call ( RemoveNotification(this)`, and `this` is then `delete`d inside.\r\n5. `Notification::Close()` in electron_api_notification.cc has no idea about `notification_` being deleted, it continues, and crashes:\r\n[URL]\n\n[Context/Logs]:\n- libnotify 0.8.x, **before 0.8.3** is affected by another bug: [URL]\r\n\r\nBut libnotify 0.8.3 has fixed its own bug, as I guess it's time for Electron to fix this unexpected `LibnotifyNotification::OnNotificationClosed()` call inside `LibnotifyNotification::Dismiss()`.\r\n\r\nWorkaround for app dev: Don't use `notification.close()` to avoid crash.\n- I'm sure this bug still exists in electron 28.2.1 and 29.0.0-beta.6.\n- ... [Middle Discussions Snipped for Brevity] ...\n- You can also work around this crash by forcing libnotify to use dbus instead of the portal with the env var `NOTIFY_IGNORE_PORTAL=1`.\r\n\r\nYou need to add this to your flatpak build file:\r\n```yaml\r\nfinish-args:\r\n   - --talk-name=org.freedesktop.Notifications\r\n   - --env=NOTIFY_IGNORE_PORTAL=1\r\n```\r\n\r\nexample from my project: [URL]\n- Hi @taoky \r\nHope you're doing well!\r\n\r\nI'm using electron `v28.2.5` on the production version, and the user said the app crashed once tried to minimize the app, here is our code for `minimize` event (as I see on the app logs the app crashed before accessing the condition that will determine to hide or minimize the app and create the notification):\r\n```\nBrowserWindow.on(\"minimize\", (event) => {\r\n      console.info(\"minimize event fired\");\r\n      BrowserWindow.blur();\r\n      if(// a condition to hide or minimize the app){\r\n      event.preventDefault();\r\n... [Log Snipped] ...\n      }\r\n});\n```\r\n\r\nWhat's strange, I checked the Senry reports and I see the blow stack trace (`std::__Cr::__tree ::__e\n...[Text Truncated]...\n           base::internal::WorkerThread::RunBackgroundSharedWorker (worker_thread.cc:374)\r\n7   electron.exe                            base::`anonymous namespace'::ThreadFunc (platform_thread_win.cc:140)\r\n8   KERNEL32.DLL                           BaseThreadInitThunk\r\n9   ntdll.dll                              RtlUserThreadStart\r\n\r\nThread 16240\r\n0   ntdll.dll                              NtWaitForMultipleObjects\r\n1   KERNELBASE.dll                         WaitForMultipleObjectsEx\r\n2   MsSpellCheckingFacility.dll            Windows::Globalization::Spelling::WatcherThread::EventLoop\r\n3   MsSpellCheckingFacility.dll            Windows::Globalization::Spelling::WatcherThread::WatcherThreadProc\r\n4   KERNEL32.DLL                           BaseThreadInitThunk\r\n5   ntdll.dll                              RtlUserThreadStart\r\n\r\nThread 21040\r\n0   ntdll.dll                              NtWaitForMultipleObjects\r\n1   KERNELBASE.dll                         WaitForMultipleObjectsEx\r\n2   combase.dll                            WaitCoalesced (coalescedwait.cxx:70)\r\n3   combase.dll                            CRpcThread::WorkerLoop (threads.cxx:327)\r\n4   combase.dll                            CRpcThreadCache::RpcWorkerThreadEntry (threads.cxx:73)\r\n5   KERNEL32.DLL                           BaseThreadInitThunk\r\n6   ntdll.dll                              RtlUserThreadStart\r\n  \r\n \r\nIs the above stack trace related to [URL] and upgrading electron to `v28.2.10` will fix the issue?\r\n\r\nThanks in advance!"}
{"project_id": "Electron", "bug_id": "119", "source_type": "github", "llm_input_text": "[Title]: [Bug]: BrowserView.setBounds is not appliead immediately on first calls.\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n28, 27, 26 and older\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\nWindows 10\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\nProbably never\n\n### Expected Behavior\n\nsetBounds applied immediately, BrowserView painted in new position.\n\n### Actual Behavior\n\nsetBounds sets the data but view is still being painted with old bounds even though getBounds returns new bounds.\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nSetting same bounds twice will make BrowserView paint correctly. This is because same calling setBounds with same rect immediately triggers layout call on Views (https://source.chromium.org/chromium/chromium/src/+/ :ui/views/view.cc;l=386), while different bounds will make it schedule InvalidateLayout call, which is propagated to parent and view is marked as needing layout, expecting to receive it from parent on next layout call . The problem is that BrowserView's view is added as child of InspectableWebContentsViews which does not call setBounds (which triggers layout) on all of it's children when doing it's layout, so it skips propagating Layout call to its children BrowserViews views, even though those were marked as needing layout.\n\n[Context/Logs]:\n- This was previously reported in #35149, but unfortunately closed due to inactivity in the meantime..."}
{"project_id": "Electron", "bug_id": "120", "source_type": "github", "llm_input_text": "[Title]: [Bug]: DesktopCapturer doesn't work in Ubuntu 22.04.2 LTS\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n23.1.1\r\n\r\n### What operating system are you using?\r\n\r\nUbuntu\r\n\r\n### Operating System Version\r\n\r\n22.04.2\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\n_No response_\r\n\r\n### Expected Behavior\r\n\r\nGet access to screens for capture recording using desktopCapturer in electron Api\r\n\r\n### Actual Behavior\r\n\r\nThere are difficulties to report the problem because no specific error is received in the terminal, only the message below\r\n\r\n```bash\r\ntiago@tghpereira:~/\u00c1rea de Trabalho/electron/test$ yarn start\r\nyarn run v1.22.19\r\n$ electron .\r\n/home/tiago/\u00c1rea de Trabalho/electron/test/node_modules/electron/dist/electron exited with signal SIGSEGV\r\nerror Command failed with exit code 1.\r\n```\r\n\r\nI followed the official Electronjs documentation step by step and tried several approaches mentioned in forums to find ways to solve the problem, but without success.\r\nPlease help us with this issue which is greatly affecting many packages.\r\n\r\n### Testcase Gist URL\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\n_No response_\n\n[Context/Logs]:\n- @tghpereira I have the same problem.  try installing a previous version of electron.\n- hello @vlkalashnikov, thanks for the suggestion but I tried all the possibilities none worked, I left a test code created through Electron Fiddle, when running the project it just returned the message \"Electron exited with signal SIGSEGV.\" and then the process shuts down.\r\n\r\n@VerteDinde follow the gist link as requested\r\n\r\n[URL]\n- @tghpereira Thanks for the gist, very appreciated! \r\n\r\nI think I have a lead on the issue - if you switch to Xorg, does the crash still occur? I can reproduce this on Ubuntu 20.04 when using Wayland, 20.04 using Xorg works as expected, so I suspect the issue is Wayland-specific. Will try to find a fix.\r\n\r\nBisecting, it looks like this issue started in 23.0.0-nightly20221118 (23.0.0-nightly20221117 works as expected). I'm guessing this Chrome roll caused the regression: [URL]\n- @VerteDinde  We in the community thank you for the attention of the Electron team.\r\n\r\nI made 2 attempts as suggested, one in which I just deactivated Wayland and the other using Xorg, both still persist with the error with the same characteristics mentioned above"}
{"project_id": "Electron", "bug_id": "121", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Disabling `backgroundThrottling` not working with hide() on Windows\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a feature request that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n14.0.0\r\n\r\n### What operating system are you using?\r\n\r\nWindows\r\n\r\n### Operating System Version\r\n\r\nWindows 10 build 19041.1165\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\n_No response_\r\n\r\n### Expected Behavior\r\n\r\nOn Windows, setting `backgroundThrottling: false` on a BrowserWindow should cause throttling of things like `requestAnimationFrame` to not happen when the window is occluded, minimized, or hidden.\r\n\r\n### Actual Behavior\r\n\r\nOn Windows, setting `backgroundThrottling: false` on a BrowserWindow causes throttling of things like `requestAnimationFrame` to not happen when the window is occluded or minimized but not hidden. On MacOS (v11.5.2 Intel x64) disabling `backgroundThrottling` causes `requestAnimatingFrames` to continue to work for all 3 cases -- occluded, minmized, and hidden. This is the reason I think this might be a bug on Windows.\r\n\r\n### Testcase Gist URL\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\nSteps for repro on gist:\r\n1. Start gist in electron (fiddle), open dev console and pop it out -> observe the `tick` being logged twice per second as callbacks to `requestAnimationFrame` calls\r\n2. Occlude the window, minimize the window, or click `Hide for 5s` -> observe the `tick` stops being logged in all 3 cases\r\n3. Click `Toggle background throttling` button\r\n4. Occlude or minimize the window -> observe the `tick` does not stop being logged\r\n5. Click `Hide for 5s` -> On Windows, observe the `tick` stops being logged during the 5s the window is hidden, indicating the `requestAnimationFrame` callbacks are being blocked. On Mac, observe the `tick` continue to be logged indicating they are not.\n\n[Context/Logs]:\n- the root cause likely is the same as issue #30666\n- Noticed this on v15.3.5 and v16.0.7 too\n- ... [Middle Discussions Snipped for Brevity] ...\n- I can repro this on Windows in Electron 21\n- I'm running into this with v23 as well.  Has anyone looked at this or found a workaround?"}
{"project_id": "Electron", "bug_id": "122", "source_type": "github", "llm_input_text": "[Title]: [Bug]: BrowserView do not auto resize correctly\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n30\r\n\r\n### What operating system(s) are you using?\r\n\r\nWindows, macOS\r\n\r\n### Operating System Version\r\n\r\nWin10, MacOS13\r\n\r\n### What arch are you using?\r\n\r\nia32\r\n\r\n### Last Known Working Electron version\r\n\r\n29\r\n\r\n### Expected Behavior\r\n\r\nI used the API \"setAutoResize\" of BrowserView. \r\nWhen BrowserWindow is resized, BrowserView should correctly auto-resize.\r\n```\nfunction createWindow() {\r\n  const mainWindow = new BrowserWindow({\r\n    width: 800,\r\n    height: 600,\r\n    webPreferences: {}\r\n... [Log Snipped] ...\n  view.webContents.loadURL('[URL]\r\n}\n```\r\n\r\n### Actual Behavior\r\n\r\nThe size of the BrowserView changes unexpectedly, causing it to no longer fit the BrowserWindow, and it is almost impossible to restore by resizing the window.\r\n[Image: browserview_bug]\r\n\r\n\r\n### Testcase Gist URL\r\n\r\n_No response_\r\n\r\n### Additional Information\r\n\r\n_No response_\n"}
{"project_id": "Electron", "bug_id": "123", "source_type": "github", "llm_input_text": "[Title]: [Bug]: SIGSEGV crash when maximizing window\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n30.0.0-alpha7\r\n\r\n### What operating system are you using?\r\n\r\nUbuntu\r\n\r\n### Operating System Version\r\n\r\n20.04, running on x11\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\n30.0.0-alpha6\r\n\r\n### Expected Behavior\r\n\r\nMaximizing/fullscreening the app does not sigfault.\r\n\r\n### Actual Behavior\r\n\r\nMaximizing/fullscreening the window crashes the app.\r\n\r\n### Testcase Gist URL\r\n\r\nThis is visible in the default Fiddle template that opens with the app\r\n\r\n### Additional Information\r\n\r\nThere is no `render-process-gone` or `child-process-gone` event called when it crashes.\n\n[Context/Logs]:\n- I'm not able to repro this on either `v30.0.0-alpha.7` or `v30.0.0-beta.7`\r\n\r\nTested on Ubuntu 23.10 w/`XDG_SESSION_TYPE=x11`:\r\n\r\n- checked out electron-quick-start\r\n- changed the electron version in package.json\r\n- ran npm install\r\n- confirmed from the command line that `./node_modules/electron/dist/electron --version` yielded the expected version\r\n-  ran npm start\r\n- and hit F11 a few times to toggle back & forth between fullscreen.\r\n\r\nNo crash\r\n\r\n@Kilian I am wondering if I'm testing this wrong since your description sounds straightforward. Any idea what I should change from the above so that I can trigger the crash?\n- quick follow-up to previous comment: @Kilian in the video you made for @VerteDinde, it looks like you are clicking the titlebar instead of pressing f11, so I tried again with that to see if it made any difference. FWIW I still am not seeing a crash\n- ... [Middle Discussions Snipped for Brevity] ...\n- Same issue in our application; we have reverted to version 29 in [URL]\n- I could not reproduce this only by maximizing/setting Electron to fullscreen. But could reliably produce a crash by creating at least 3 browser windows and then attempting to maximize any of them.\r\n\r\nHere's a gist: [URL]\r\n\r\nElectron terminated with SIGSEGV on both of my Manjaro and Kubuntu Linux VMs (X11)."}
{"project_id": "Electron", "bug_id": "124", "source_type": "github", "llm_input_text": "[Title]: [Bug]: protocol.handle unexpected behavior when request.body is a ReadableStream\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n26.1.0\r\n\r\n### What operating system are you using?\r\n\r\nWindows\r\n\r\n### Operating System Version\r\n\r\nWindows 11 22H2\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\n_No response_\r\n\r\n### Expected Behavior\r\n\r\nIterating on a `ReadableStream` inside `protocol.handle` should not output anything except what is fed into the stream.\r\n\r\n### Actual Behavior\r\n\r\nCurrently, doing this outputs a bunch of `undefined` entries when it shouldn't\r\n\r\n```ts\r\nprotocol.handle(SCHEME, async (request) => {\r\n  console.log(\"starting stream\");\r\n  for await (const p of request.body) {\r\n    console.log(p);\r\n  }\r\n  console.log(\"ending stream\");\r\n});\r\n```\r\nFor some reason, the first few logs are correct outputting `Uint8Array` as expected but it eventually starts outputting `undefined`:\r\n\r\n```\nstarting stream\r\nUint8Array(5) [ 84, 104, 105, 115, 32 ]\r\nUint8Array(3) [ 105, 115, 32 ]\r\nUint8Array(2) [ 97, 32 ]\r\nUint8Array(5) [ 115, 108, 111, 119, 32 ]\r\n... [Log Snipped] ...\nundefined\r\nending stream\n```\r\n\r\nThe main problem is that such a `ReadableStream` is not accepted by `net.fetch` or `fetch` and they crash with the following error:\r\n\r\n```\nnode:52760) UnhandledPromiseRejectionWarning: TypeError [ERR_INVALID_ARG_TYPE]: The \"chunk\" argument must be of type string or an instance of Buffer or Uint8Array. Received undefined\r\n    at new NodeError (node:internal/errors:399:5)\r\n    at _write (node:internal/streams/writable:315:13)\r\n    at ClientRequest.write (node:internal/streams/writable:337:10)\r\n    at Object.write (node:internal/webstreams/adapters:179:63)\r\n... [Log Snipped] ...\n(Use `Notesnook --trace-warnings ...` to show where the warning was cr\n...[Description Truncated]...\n"}
{"project_id": "Electron", "bug_id": "125", "source_type": "github", "llm_input_text": "[Title]: [Bug]: `net.fetch()` fails to forward html form submissions intercepted with `protocol.handle()`\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n`25.9.8`, `26.6.2`, `28.0.0`, `29.0.0-alpha.3`\r\n\r\n### What operating system are you using?\r\n\r\nWindows\r\n\r\n### Operating System Version\r\n\r\nWindows 11 Enterprise 22H2 22621.2715\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\nNone--it doesn't work with any electron version shipping `protocol.handle()`. \r\n\r\n### Expected Behavior\r\n\r\nIt is [Link: documented] that if one intercepts a protocol (e.g. given `s: Electron.Session` `s.protocol.handle('http', ...)`) one can forward a request to the built-in handler by passing `bypassCustomProtocolHandlers: true` in the `RequestInit` parameter. \r\n\r\n### Actual Behavior\r\n\r\nHowever, if the request originates from a plain html ` ` submission, the built-in handler fails with\r\n```\r\nError: net::ERR_FAILED\r\nat SimpleURLLoaderWrapper.  (node:electron/js2c/browser_init:2:49030)\r\nat SimpleURLLoaderWrapper.emit (node:events:517:28)\r\n(node:9824) electron: Failed to load URL: [URL] with error: ERR_UNEXPECTED\r\n```\r\nI observed that the form submission request contains an `origin: null` header and that removing said header from the request allows the request to succeed. The request also succeeds if no custom protocol handler is installed.\r\n\r\n### Testcase Gist URL\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\nThe Testcase contains an html form which can be submitted to the included koa webserver.\n"}
{"project_id": "Electron", "bug_id": "126", "source_type": "github", "llm_input_text": "[Title]: [Bug]: protocol.handle `file` issue when dealing with FormData\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n27.1.3\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\nmacOS Sonoma 14.2.1\n\n### What arch are you using?\n\narm64 (including Apple Silicon)\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\n1. Intercept `file` protocol using `protocol.handle`\r\n2. Sending FormData in the renderer\r\n3. Request intercepted in the function registered in 1\r\n4. The File's blob size in the form should have correct content and size\n\n### Actual Behavior\n\nIn step 4, the File's size is 0\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nPlease see the console output. The printed File is something like this:\r\n```\r\nFormData { [Symbol(state)]: [ { name: 'file', value: [File] } ] } File {\r\n  size: 0,\r\n  type: 'application/octet-stream',\r\n  name: 'test.txt',\r\n  lastModified: 1703500799473\r\n}\r\n```\n\n[Context/Logs]:\n- Note that this is unrelated to the `file://` protocol as `protocol.handle()` currently swallows any `Blob` part of an intercepted request."}
{"project_id": "Electron", "bug_id": "127", "source_type": "github", "llm_input_text": "[Title]: [Bug]: addBrowserView unnecessarily removes and re-adds the same browserView\n[Symptom]:\n### Preflight Checklist\n\n- [Link: x] I have read the [Contributing Guidelines] for this project.\n- [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: x] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n36.4.0\n\n### What operating system(s) are you using?\n\nWindows\n\n### Operating System Version\n\nwindows 11\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n29.4.6\n\n### Does the issue also appear in Chromium / Google Chrome?\n\nNo\n\n### Expected Behavior\n\nWhen the same browserView is added to a browserWindow multiple times, the visibility of the pages in the browserView does not change.\n\n### Actual Behavior\n\nWhen the same browserView is added to a browserWindow multiple times, the visibility of the pages in the browserView quickly changes from visible to hidden and then to visible.\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nAfter the BrowserView module was refactored in Electron 30, the behavior of the addBrowserView API changed. When the same browserView is added multiple times to a browserWindow, the browserView will first be removed and then re-added.\nSpecifically, this causes a jump in the page's visibility inside the browserView, and the visibilitychange event is triggered unexpectedly.\n\nThe impl of  'addBrowserView'  in different versions:\nelectron 29: [URL]\nelectron 30: [URL]\n\n_No response_\n"}
{"project_id": "Electron", "bug_id": "128", "source_type": "github", "llm_input_text": "[Title]: Fix logical bug in checksums environment variable handling in npm/install.js\n[Symptom]:\n### Preflight Checklist\n\n- [Link: x] I have read the [Contributing Guidelines] for this project.\n- [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: x] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n36.0.0 and above \n\n### What operating system(s) are you using?\n\nUbuntu\n\n### Operating System Version\n\nUbuntu 25.04\n\n### What arch are you using?\n\nx86_64 \n\n### Last Known Working Electron version\n\n_No response_\n\n### Does the issue also appear in Chromium / Google Chrome?\n\nI don't know how to test\n\n### Expected Behavior\n\nThis makes the intent clearer:  \n   if either environment variable is truthy, skip local checksums\n\n``` checksums: (process.env.electron_use_remote_checksums || process.env.npm_config_electron_use_remote_checksums) ? undefined : require('./checksums.json'), ```\n\n### Actual Behavior\n\nThere is a logical bug in   _install.js_   line 47  where the environment variable check for _electron_use_remotechecksums_     doesn't work correctly due to operator precedence \n\nThe ternary operator (?:) has lower precedence than the nullish coalescing operator (??), so the code is evaluated as:\n\n``` checksums: (process.env.electron_use_remote_checksums ?? process.env.npm_config_electron_use_remote_checksums) ? undefined : require('./checksums.json') ```\n\n- If either variable is set to a truthy value, it uses remote checksums \n- But the logic is confusing and not what was likely intended\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\n_No response_\n\n[Context/Logs]:\n- Can you please include the steps to regenerate the problem in my local environment.\n- Thanks for reporting!\n\nJust for context, this is a permalink to the line of code this refers to:\n\n[URL]\n- @KinshukSS2 thanks for reporting this!\n\nI agree with the change you're suggesting. It seems to correctly implement the behavior\ndescribed in [Link: this feature's documentation]:\n\n```diff\n If your mirror serves artifacts with different checksums to the official\n-Electron release you may have to set `electron_use_remote_checksums=1` to\n-force Electron to use the remote `SHASUMS256.txt` file to verify the checksum\n-instead of the embedded checksums.\n+Electron release you may have to set `electron_use_remote_checksums=1` directly,\n+or configure it in a `.npmrc` file, to force Electron to use the remote `SHASUMS256.txt`\n+file to verify the checksum instead of the embedded checksums.\n```"}
{"project_id": "Electron", "bug_id": "129", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Fullscreen window does not show dropdown list of select element  on macOS 31-x-y\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n31.2.1\n\n### What operating system(s) are you using?\n\nmacOS\n\n### Operating System Version\n\nSonoma 14.5\n\n### What arch are you using?\n\narm64 (including Apple Silicon)\n\n### Last Known Working Electron version\n\n30.3.0\n\n### Expected Behavior\n\nWhen fullscreen mode on macOS, when a ` ` element within a `BrowserWindow` is clicked, the dropdown list should be displayed properly, just as it does in non-fullscreen mode.\n\n### Actual Behavior\n\nWhen a ` ` element is clicked in a fullscreen `BrowserWindow` on macOS, the dropdown list does **not** show.\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nI have tested the same functionality in version 30.3.0, and it worked well without any issues.\r\nOn an Ubuntu PC (Ubuntu 22.04.3 LTS), the functionality also works as expected.\n\n[Context/Logs]:\n- Tracked to [URL]\r\n\r\nit also looks like this is only true if the app _opens_ in fullscreen - if it starts non-fs and transitions to fullscreen it works as expected"}
{"project_id": "Electron", "bug_id": "130", "source_type": "github", "llm_input_text": "[Title]: [Bug]: REGRESSION, on MacOS starting 31 when you open devtool the text in the window become unselectable\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n31.2.1\r\n\r\n### What operating system(s) are you using?\r\n\r\nmacOS\r\n\r\n### Operating System Version\r\n\r\nMacOS Sonoma 14.5\r\n\r\n### What arch are you using?\r\n\r\narm64 (including Apple Silicon)\r\n\r\n### Last Known Working Electron version\r\n\r\n30.3.0\r\n\r\n### Expected Behavior\r\n\r\nText to be selectable\r\n\r\n### Actual Behavior\r\n\r\nText is not selectable\r\n\r\n### Testcase Gist URL\r\n\r\n[Link: Electron fiddle Gist]\r\n\r\n### Additional Information\r\n\r\nYou just need to change the version in the Electron Feedle.\r\nIn 30.3.0 everything is good.\r\nstarting version 31.0.0-alpha1 and more recent, the text is no more selectable.\r\nIf you comment line 30 from main.js (that just open the devtools) the text is selectable.\n"}
{"project_id": "Electron", "bug_id": "131", "source_type": "github", "llm_input_text": "[Title]: [Bug]: Setting vibrancy on macOS breaks click events on WebContentsView in Electron 31\n[Symptom]:\n### Preflight Checklist\n\n- [Link: X] I have read the [Contributing Guidelines] for this project.\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n31.0.0-beta.7\n\n### What operating system are you using?\n\nmacOS\n\n### Operating System Version\n\nmacOS Sonoma 14.4.1\n\n### What arch are you using?\n\narm64 (including Apple Silicon)\n\n### Last Known Working Electron version\n\n29 (with BrowserViews), vibrancy is currently broken with a separate bug in 30\n\n### Expected Behavior\n\nClick events on a WebContentsView should be detected when the BrowserWindow has vibrancy set on macOS. Depending on the version of Electron used for the attached gist, click events are either swallowed or cause the app to crash.\n\n### Actual Behavior\n\nClick events on the WebContentsView are not registered (or potentially cause the app to crash). If I remove the vibrancy setting from the BrowserWindow then click events start working again.\r\n\r\nIn the attached gist you can see this by trying to click the red square, which should display an alert due to an `onclick` handler (and does display the alert when vibrancy is disabled).\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\nLike [URL] this issue also appears to trace back to this PR: [URL] The bug in the attached gist is first seen in v31.0.0-nightly.20240305, and is not seen in v31.0.0-nightly.20240304 (and the only PR in between is [URL]\r\n\r\nHowever this is a bit more complicated because vibrancy still has [Link: this bug] in v31.0.0-nightly.20240304 so the attached gist isn't functional, just for a different reason. I can confirm that if [Link: this potential fix] for the vibrancy bug in Electron 30 is applied without [URL] then the click swallows/crashes in this issue are resolved.\r\n\r\nWhen using a debug build I see that click events crash the app on [Link: this DCHECK] with \n...[Description Truncated]...\n"}
{"project_id": "Electron", "bug_id": "132", "source_type": "github", "llm_input_text": "[Title]: [Bug]: EXCEPTION_ACCESS_VIOLATION crash on `BrowserWindow.destroy()`\n[Symptom]:\n### Preflight Checklist\r\n\r\n- [Link: X] I have read the [Contributing Guidelines] for this project.\r\n- [Link: X] I agree to follow the [Code of Conduct] that this project adheres to.\r\n- [Link: X] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\r\n\r\n### Electron Version\r\n\r\n \\>=v31.0.0 (tested v31.0.0, v31.2.1, v32.0.0-aplha.10)\r\n\r\n### What operating system(s) are you using?\r\n\r\nWindows\r\n\r\n### Operating System Version\r\n\r\nWindows 10 22H2\r\n\r\n### What arch are you using?\r\n\r\nx64\r\n\r\n### Last Known Working Electron version\r\n\r\nv30.3.0 (and everything below it)\r\n\r\n### Expected Behavior\r\n\r\n```js\r\nchildWindow.once('close', () => {\r\n    // do some cleanup etc\r\n    childWindow.destroy();;\r\n});\r\n```\r\n\r\nshouldn't crash Electron\r\n\r\n\r\n### Actual Behavior\r\n\r\n```js\r\nfunction cleanup() {\r\n\t// do some cleanup etc\r\n    childWindow.destroy();;\r\n}\r\nipcMain.once(`done`, cleanup);\r\nchildWindow.once('close', cleanup);\r\n```\r\nif `done` ipc event is not called and the window is manually closed, the window is destroyed and a few moments later The main Electron process crash with the following trace:\r\n\r\n  Stacktrace Windows \r\n \r\n\r\n```\nReceived fatal exception EXCEPTION_ACCESS_VIOLATION\r\nv8::internal::compiler::CompilationDependencies::FieldTypeDependencyOffTheRecord [ +3764424]\r\nv8::HeapStatistics::external_memory [ +8338]\r\ncppgc::internal::SameThreadEnabledCheckingPolicyBase::SameThreadEnabledCheckingPolicyBase [ +28834]\r\nuv_req_get_data [ +4269966]\r\n... [Log Snipped] ...\n\r\nElectron exited with code 3221226525.\n```\r\n\r\n \r\n  \r\n\r\n### Testcase Gist URL\r\n\r\n\r\nNo dependencies:\r\n\r\n[URL]\r\n\r\nOriginal issue:\r\n\r\n[URL]\r\n\r\n### Additional Information\r\n\r\n* test repo: [URL]\r\n* related issue: [URL]\n\n[Context/Logs]:\n- Stacktrace on macOS \r\n \r\n\r\n```\n[80356:0722/110229.619327:FATAL:lock_impl_posix.cc(46)] Check failed: rv == 0 || rv == EBUSY. . Invalid argument. Hint: This is often related to a use-after-free.\r\n0   Electron Framework                    base::debug::CollectStackTrace(void const**, unsigned long) + 28\r\n1   Electron Framework                    base::debug::StackTrace::StackTrace() + 80\r\n2   Electron Framework                    logging::LogMessage::Flush() + 152\r\n3   Electron Framework                    logging::LogMessage::~LogMessage() + 36\r\n... [Log Snipped] ...\n\r\nElectron exited with signal SIGTRAP.\n```\r\n\r\n \r\n  \r\n\r\nTracked to [URL]\n- It says the PR is for MacOS but this issue was reported on Windows?"}
{"project_id": "Electron", "bug_id": "133", "source_type": "github", "llm_input_text": "[Title]: App freezes with custom spell-checker on Electron 31.7.1\n[Symptom]:\n### Preflight Checklist\n\n- [Link: x] I have read the [Contributing Guidelines] for this project.\n- [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: x] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n31.7.1\n\n### What operating system(s) are you using?\n\nOther Linux\n\n### Operating System Version\n\nLinux speedforce 6.11.4-arch1-1 #1 SMP PREEMPT_DYNAMIC Thu, 17 Oct 2024 20:53:41 +0000 x86_64 GNU/Linux\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n31.6\n\n### Expected Behavior\n\nThe app should not hit 100% CPU usage when using a custom spell checker and the UI should not freeze.\n\n### Actual Behavior\n\nWhen using a custom spell checker, the app hits 100% CPU usage and the UI freezes when typing a lot of text or pasting in text.\n\nEverything was working on older versions of electron.\n\n### Testcase Gist URL\n\n_No response_\n\n### Additional Information\n\nUse [URL] with v31.7.1 in the `package.json` and the problem occurs. I'll see if I can make a better repro when I have time.\n\nAfter updating electron:\n1. `yarn start`\n2. Exit the whats new modal if it pops up\n3. hit the 'N' key\n4. Hit the 'N' key again\n5. Start typing\n\nI haven't tried v32 or v33 because MicroPad Electron does not work at all with them.\n\n[Context/Logs]:\n- We have the same issue. The UI completely freezes and the user is forced to close down the application. We use the `webFrame.setSpellCheckProvider`-api. If we disable this call, the application does not freeze anymore. In our case the freeze only seems to happen (or at least much more frequently) when you enter numbers into an input-field instead of text. You do not have to paste or enter lots of numbers/text.\n\n### Electron Version ###\n31.7.1 also tested with 33.0.0\n\n### Last Known Working Electron version ###\n31.7.0\n\n### Operating system ###\nWindows 10 Enterprise 10.0.19045\n\n### What arch are you using? ###\nx64\n- Thanks for reporting this and helping to make Electron better!\n\nBecause of time constraints, triaging code with third-party dependencies is usually not feasible for a small team like Electron's.\n\nWould it be possible for you to make a standalone testcase with only the code necessary to reproduce the issue? For example, [Link: Electron Fiddle] is a great tool for making small test cases and makes it easy to publish your test case to a [Link: gist] that Electron maintainers can use.\n\nStand-alone test cases make fixing issues go more smoothly: it ensure everyone's looking at the same issue, it removes all unnecessary variables from the equation, and it can also provide the basis for automated regression tests.\n\nI'm adding the `blocked/need-info` label for this reason. After you make a test case, please link to it in a follow-up comment.\n\nThanks in advance! Your help is appreciated.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Note sure if this is of assistance. But since this seems to have been introduced in 31.7.1 my guess is that it's this commit that's caused this issue. [URL]\n- We're also experiencing this issue (Windows, Linux) and also in v32 (will later confirm if it's still happening in v33, but it's very likely)"}
{"project_id": "Electron", "bug_id": "134", "source_type": "github", "llm_input_text": "[Title]: showInactive() broken on Electron 35\n[Symptom]:\n### Preflight Checklist\n\n- [Link: x] I have read the [Contributing Guidelines] for this project.\n- [Link: x] I agree to follow the [Code of Conduct] that this project adheres to.\n- [Link: x] I have searched the [issue tracker] for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n35.0.0-alpha.5\n\n### What operating system(s) are you using?\n\nmacOS\n\n### Operating System Version\n\n15.2\n\n### What arch are you using?\n\narm64 (including Apple Silicon)\n\n### Last Known Working Electron version\n\n_No response_\n\n### Expected Behavior\n\nshowInactive() should work\n\n### Actual Behavior\n\nshowInactive() only shows a blank white page\n\n[Image: Image]\n\n- Issue started on 35.0.0-alpha.3, it works on - Issue started on 35.0.0-alpha.2\n\n### Testcase Gist URL\n\n[URL]\n\n### Additional Information\n\n_No response_\n\n[Context/Logs]:\n- My guess is   - cc @michal-pichlinski-openfin"}
{"project_id": "Redis", "bug_id": "1", "source_type": "github", "llm_input_text": "[Title]: Redis Cluster: implement the ASKING command\n[Symptom]:\n(Please see [URL] for full details, here I'm just summarizing the problem with some cut&paste from that thread).\n\nIf you are familiar with the design you know that the key space is split into 4096 parts. \nEvery part is called an \"hash slot\", and every node has a routing table to map every hash slot with a cluster node. \nThis way if a client sends a query to a node that is not responsible for the keys mentioned in the query, it gets a -MOVED message redirecting it to the right node. However we also have the ability to reconfigure the cluster while it \nis running. So for instance I've hash slot 100 that is assigned to node A. And I want to move it to node B. \n\nThis is accomplished (and redis-trib is already able to do it for you automatically) with the following steps. \n\n1) Node A hash slot 100 is marked as \"Migrating to B\" (using the CLUSTER SETSLOT   MIGRATING   command). \n2) Node B hash slot 100 is marked as \"Importing from A\" (using the \nCLUSTER SETSLOT   IMPORTING   command). \n3) An external client, usually redis-trib, starts using the commands \nCLUSTER GETKEYSINSLOT and the MIGRATE command to atomically move keys from A to B.\n\nWhat is interesting is that while the hash slot is set as \"Migrating  to B\", node A will reply to all the requests about this hash slot of keys that are _still_ present in the hash slot, but if a request is about a key that is in hash slot 100 but is not \nfound inside the key space, it generates a \"-ASK\" error, that is like \"-MOVED\" but means: please only ask this exact query to the specified node, but don't update your table about it. Ask new queries about hash \nslot 100 to me again. \n\nThis way all the new keys about hash slot 100 are created directly in B, but A handles all the queries about keys that are still in A. At the same time redis-trib moves keys from A to B. Eventually all the keys are moved and the hash slot configuration is consolidated to the new one, using other CLUSTER SETSLOT subcommands. \nSo far this is pretty cool. But \n...[Description Truncated]...\n\n[Context/Logs]:\n- This was implemented but implementation still to verify. Taking the issue open for now.\n- Implemented a long time ago but issue was not closed, closing."}
{"project_id": "Redis", "bug_id": "2", "source_type": "github", "llm_input_text": "[Title]: Redis should abort when can't load the RDB file\n[Symptom]:\nWhen Redis can't load an RDB file since the RDB version is wrong or when the file signature does not match a log is emitted and the server starts without loading data, with an empty key space. It should instead abort after logging the error.\nThis was not intentional, and is an error introduced later, but never found since it is not common to have mismatching RDB versions or file signature.\n\n[Context/Logs]:\n- Fixed in 2.4 and unstable. Closing."}
{"project_id": "Redis", "bug_id": "3", "source_type": "github", "llm_input_text": "[Title]: Server crash on failed master/slave sync (refused connection)\n[Symptom]:\nThree of my instances (on server 1 and 2) just crashed when I restarted server 3. Instance A was a master to an instance on server 3. Instances B and C were slaves of two instances on server 3.\n\nI'm sorry that I have to be so vague about this. I just found these stackdumps in my logfiles a few minutes after it happened. I believe, instances A,B,C were trying to do some kind of syncing with server 3, which was being restarted at the time. I assume server 3 refused the connections when the instances were in a state where these exceptions weren't handled.\n\nI'm using the fresh 2.4.1 from this morning on Ubuntu Oneiric. Let me know if you need more input.\n\ninstance 1:\n\n```\n[2710] 17 Oct 16:56:25 * MASTER MODE enabled (user request)\n[2710] 17 Oct 16:56:25 * Slave ask for synchronization\n[2710] 17 Oct 16:56:25 * Starting BGSAVE for SYNC\n[2710] 17 Oct 16:56:25 * Background saving started by pid 4019\n[2710] 17 Oct 16:56:27 - DB 0: 91 keys (0 volatile) in 128 slots HT.\n... [Log Snipped] ...\n[2710] 17 Oct 16:56:30 # /usr/local/bin/redis-server() [ ]\n[4019] 17 Oct 16:56:32 * DB saved on disk\n```\n\ninstance 2:\n\n```\n[2698] 17 Oct 16:56:30 * Non blocking connect for SYNC fired the event.\n[2698] 17 Oct 16:56:30 # I/O error writing to MASTER: Connection refused\n[2698] 17 Oct 16:56:30 * Connecting to MASTER...\n[2698] 17 Oct 16:56:30 # ======= Ooops! Redis 2.4.1 got signal: -11- =======\n[2698] 17 Oct 16:56:30 # redis_version:2.4.1\n... [Log Snipped] ...\n[2698] 17 Oct 16:56:30 # /lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [ ]\n[2698] 17 Oct 16:56:30 # /usr/local/bin/redis-server() [ ]\n```\n\ninstance 3:\n\n```\n[2684] 17 Oct 16:56:31 * Non blocking connect for SYNC fired the event.\n[2684] 17 Oct 16:56:31 # I/O error writing to MASTER: Connection refused\n[2684] 17 Oct 16:56:31 * Connecting to MASTER...\n[2684] 17 Oct 16:56:31 # ======= Ooops! Redis 2.4.1 got signal: -11- =======\n[2684] 17 Oct 16:56:31 # redis_version:2.4.1\n... [Log Snipped] ...\n[2684] 17 Oct 16:56:31 # /lib/x86_64-li\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello Jan,\n\nthanks for reporting, this is an \"interesting\" bug I'll try to get fixed within 24 hours. From the stack trace I believe there is some kind of HA daemon issuing \"SLAVE OF NONE\" to your slave instances when the master is unavailable, is it possible?\nI see this from this line:\n\n[2710] 17 Oct 16:56:25 \\* MASTER MODE enabled (user request)\n\nAt the same time however this instance got a request for another slave to use it as master (however this is unrelated to the bug perhaps, need to check this better).\n\nSo there is a bug for sure, but it is not on slave reconnection. Apparently the bug happens once the slave is elected to master. It still tries to reconnect via non blocking connect.\n\nThis is a big bug I'm glad you found it. More news ASAP.\n- for Jan: please if you can send me more output than this, that is, a few lines more on the top part of the three instances. Thanks!\n- ... [Middle Discussions Snipped for Brevity] ...\n- I ran my test again, and everything runs smoothly. The old slave becomes the new master, and the new slave properly connects and syncs all data.\n\nGreat. Thank you, Salvatore!\n- We won! :) Thanks, closing for now in the hope everything will go smooth even in the next days ;) Otherwise I'm here."}
{"project_id": "Redis", "bug_id": "4", "source_type": "github", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "5", "source_type": "github", "llm_input_text": "[Title]: maxmemory + evicting policy + slaves = death\n[Symptom]:\nPieter Noordhuis discovered this interesting bug, with the help of an user experiencing strange things in a Redis instance with multiple slaves and maxmemory configured at the same time: when maxmemory was reached the DB on the master was completely erased (thanks to Pieter, Dane and Jemie for the investigation).\n\nThe issue happens for the following reason:\n- Redis reached the configured limit, so it tries to expire keys.\n- Evicting keys turns into explicit DELs sent to slaves, since masters control the eviction of slaves for well known reasons.\n- But this way if there are enough slaves, emitting the protocol in the output buffers will actually take more memory than the amount freed removing keys...\n- So the key eviction process starts to enter into an infinite loop.\n\nUp to a given point the fact that there is a static buffer part in the output queue of every client (including slaves) mitigate this in certain conditions, but once Redis can't use the output buffer but must use the queue of objects the infinite loop is triggered.\n\nI'm working to fix this problem, there are different ways to do this and I'm doing experiments to find the best solution. Among the possible solutions there is to ignore output buffer of slaves when computing max memory, or to call the function that flushes data to the slave while we are inside the eviction loop if we detect that the memory is raising after every deletion instead of decreasing, or to even tolerate the fact that the memory increases inside the loop but up to a certain limit, and break the loop when a few keys are evicted (enough to go under the maxmemory limit, if we subtract the size taken by the slave output buffers).\n\nI'm experimenting with the above solutions, but also improving the memory used generating the protocol by using more shared objects for common parts of the protocol, that helps to make this issue (and the code path resolving it, that should be considered an exception) less likely to be triggered.\n\n**Edit:** U\n...[Description Truncated]...\n\n[Context/Logs]:\n- Note: also when AOF is enabled the same happens with the AOF buffer.\n- Before merging I'm writing here the list of commits I did in this branch, in the chance I'll backport this into 2.4 later:\n- 8b7c345 freeMemoryIfNeeded() minor refactoring\n- c1ef6ff Also remove size of AOF buffers from used memory when doing the math for freeMemoryIfNeeded()\n- f6b32c1 This fixes issue #327, is a very complex fix (unfortunately), details:\n- 355f859 Use less memory when emitting the protocol, by using more shared objects for commonly emitted parts of the protocol.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Fix merged into unstable, there is a 2.4-issue327 branch on github with the fix backported into 2.4, this will be merged before 2.4.8 release.\n- patch merged into 2.4. closing. Thank you."}
{"project_id": "Redis", "bug_id": "6", "source_type": "github", "llm_input_text": "[Title]: Redis silently continues working when RDB persistence fails\n[Symptom]:\nIf you have RDB persistence configured to write your data, for instance, into a directory that is not writable by Redis, the background saving will not work but Redis will continue working as expected. This way the user may think everything is ok but actually no persistence at all is performed by the server: when the server goes down no data wil be available at all.\n\nEither Redis should abort when this happens or should return an error to every client trying to write against the server if Redis was not able to persist the latest time it tried. The error will no longer be reported once a successful BGSAVE/SAVE is performed. Or something like that...\n\n[Context/Logs]:\n- I don't think aborting in this case is the right call.  People should be hooking monitoring and metrics in to the running servers and can easily know whether or not it has been too long since the last successful save.  It should be a warning on startup that the dir isn't writeable or whatever, and then messages to the client/logs after that.  I personally wouldn't feel comfortable knowing that the server will crash if this happens, as I prefer to think of Redis as a stable, long-running, easily monitorable server.\n- I definitely want Redis to refuse to start if it cannot persist and its configuration file says it should. If it ceases being able to persist while running, though, I am not sure what the best thing to do is.\n\nThe options are:\n- Your users see nothing and keep adding data. If the server crashes they lose data.\n- Your users see the service crash and you will be warned ASAP.\n\nI think I prefer the second case but I am not really comfortable with any of those...\n- ... [Middle Discussions Snipped for Brevity] ...\n- Issue fixed, for now I'm not testing if the directory is writable at startup, since there are many other conditions that will lead to inability to save... but at the first BGSAVE the user will know for sure ;)\n\nClosing. It is not clear if this also closes issue #163, I'll check later today. Feedbacks welcomed.\n- It's a good start, but [Link: as I've said a year ago] a database _should not start_ if it cannot take good care of your data in its current configuration. This is going to hurt people one day and I'm sure we have all seen what kind of shitstorm a blog post by a guy that lost some data can create for a database. Please reconsider.\n\nIMO when it starts, if it's configured with a RDB and there RDB isn't there, it should issue a SAVE itself to make sure saving is possible, and create an empty RDB. If it's not working fail hard please."}
{"project_id": "Redis", "bug_id": "7", "source_type": "github", "llm_input_text": "[Title]: redis 2.4.10 and 2.4.9 may crashed,but redis 2.4.6 looks up working normally\n[Symptom]:\n[4389] 12 Apr 23:24:27 \\* Server started, Redis version 2.4.10\n[4389] 12 Apr 23:24:27 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n[4389] 12 Apr 23:24:27 \\* The server is now ready to accept connections on port 6379\n[4389] 12 Apr 23:25:57 # User requested shutdown...\n[4389] 12 Apr 23:25:57 \\* Saving the final RDB snapshot before exiting.\n[4389] 12 Apr 23:25:57 \\* DB saved on disk\n[4389] 12 Apr 23:25:57 \\* Removing the pid file.\n[4389] 12 Apr 23:25:57 # Redis is now ready to exit, bye bye...\n[4414] 12 Apr 23:25:57 \\* Server started, Redis version 2.4.10\n[4414] 12 Apr 23:25:57 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n[4414] 12 Apr 23:25:57 \\* DB loaded from disk: 0 seconds\n[4414] 12 Apr 23:25:57 \\* The server is now ready to accept connections on port 6379\n[4414] 13 Apr 01:19:26 \\* Slave ask for synchronization\n[4414] 13 Apr 01:19:26 \\* Starting BGSAVE for SYNC\n[4414] 13 Apr 01:19:26 \\* Background saving started by pid 4859\n[4859] 13 Apr 01:19:26 \\* DB saved on disk\n[4414] 13 Apr 01:19:26 \\* Background saving terminated with success\n[4414] 13 Apr 01:19:26 \\* Synchronization with slave succeeded\n[4414] 13 Apr 02:01:41 # User requested shutdown...\n[4414] 13 Apr 02:01:41 \\* Saving the final RDB snapshot before exiting.\n[4414] 13 Apr 02:01:41 \\* DB saved on disk\n[4414] 13 Apr 02:01:41 \\* Removing the pid file.\n[4414] 13 Apr 02:01:41 # Redis is now ready to exit, bye bye...\n[5141] 13 Apr 02:10:07 \\* Server started, Redis version 2.4.10\n[5141] 13 Apr 02:10:07 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hi, thanks for reporting, definitely a real bug... I think what it is, and I think it was actually also present in previous versions of Redis (but now 100% sure). More info soon...\n- Hey, this is what happens:\n\nSORT lookup keys for the \"GET\" option using a stack allocated _robj_ structure, however this object in the current 2.4.x implementation is no longer a \"read only\" object, to propagate the expire to the slave we use it to compose the protocol that we send to the slave. But this object can't be shared, as will be destroyed after the function returns. Hence everything crashes apart ;)\n\nWriting a fix. Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- uptime_in_seconds:607630\nuptime_in_days:7\n- It normal to run more than seven days"}
{"project_id": "Redis", "bug_id": "8", "source_type": "github", "llm_input_text": "[Title]: zinterstore fails when mixing sets and sorted sets\n[Symptom]:\nI have two sets and a single sorted set and I'm trying to use zinterstore to get the scored intersection of all three.  The operation is failing with my production data but succeeding if I substitute a test sorted set it works in some cases but not all and I'm stumped about why.\n\nTo setup the test, add three entries to set \"one\", four entries to set \"two\" - including a signle entry that exists in set \"one\", and four entries in the sorted set - including that same single entry from set \"one\"\n\n```\nsadd one 100 101 102 103 \nsadd two 100 200 201 202\nzadd three 1 500 1 501 1 502 1 503 1 100\n```\n\nNow if you run\n\n```\nzinterstore to_here 3 one two three WEIGHTS 0 0 1\n```\n\nNothing is found to intersect.\n\nCreate a new sort set \"four\":\n\n```\nzadd four 1 600 1 100 \n\nzinterstore to_here 3 one two four WEIGHTS 0 0 1\n```\n\nThere is an intersection on the entry 100!\n\nMy production data isn't so simple but I'm seeing the same result, some intersections appear to work, at least in part, but others fail completely.\n\nThis happens on redis versions 2.4.13 and the latest 2.6 RC.\n\nJosiah Carlson kindly tested this and found that it behaves correctly in earlier versions of redis:\n\n[Context/Logs]:\n- Fixed in 2.4.14, already available for download. Thanks."}
{"project_id": "Redis", "bug_id": "9", "source_type": "github", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "10", "source_type": "github", "llm_input_text": "[Title]: \"BITOP command 10x speed improvement\" commit causes crash\n[Symptom]:\nBitop-code is exactly what I need, so I've started testing with it. \n\nCurrently that 10x speed up has some special cases that throws \nexception for me again and again. Before that commit \neverything seem to work correctly.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[4700] 31 May 16:52:37.235 #     Redis 2.5.9 crashed by signal: 11\n[4700] 31 May 16:52:37.235 #     Failed assertion:   ( :0)\n[4700] 31 May 16:52:37.235 # --- STACK TRACE\n/usr/local/bin/redis-server(logStackTrace+0x75)[ ]\n/usr/local/bin/redis-server(bitopCommand+0x654)[ ]\n/lib64/libpthread.so.0(+ )[ ]\n/usr/local/bin/redis-server(bitopCommand+0x654)[ ]\n/usr/local/bin/redis-server(call+0x5d)[ ]\n/usr/local/bin/redis-server(processCommand+0x375)[ ]\n/usr/local/bin/redis-server(processInputBuffer+0x4f)[ ]\n/usr/local/bin/redis-server(readQueryFromClient+0xa0)[ ]\n/usr/local/bin/redis-server(aeProcessEvents+0x124)[ ]\n/usr/local/bin/redis-server(aeMain+0x2b)[ ]\n/usr/local/bin/redis-server(main+0x2a2)[ ]\n/lib64/libc.so.6(__libc_start_main+0xfd)[ ]\n/usr/local/bin/redis-server[ ]\n[4700] 31 May 16:52:37.236 # --- INFO OUTPUT\n[4700] 31 May 16:52:37.236 # # Server\nredis_version:2.5.9\nredis_git_sha1:473f3090\nredis_git_dirty:1\nos:Linux 2.6.32-220.7.1.el6.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.4.6\nprocess_id:4700\nrun_id: \ntcp_port:6379\nuptime_in_seconds:1367\nuptime_in_days:0\nlru_clock:1726659\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:882120\nused_memory_human:861.45K\nused_memory_rss:7729152\nused_memory_peak:1134552\nused_memory_peak_human:1.08M\nused_memory_lua:30720\nmem_fragmentation_ratio:8.76\nmem_allocator:jemalloc-3.0.0\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:383\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1338472083\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:0\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_ti\n...[Description Truncated]...\n\n[Context/Logs]:\n- Thanks, looking into it ASAP. Do you have perhaps a way to simply replicate it? Thanks.\n- flushdb\nset a \"\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"\nbitop or x a b\n- Awesome, I can reproduce it, so it will be trivial to fix ASAP. Thanks.\n- Fixed, thanks!"}
{"project_id": "Redis", "bug_id": "11", "source_type": "github", "llm_input_text": "[Title]: Crash in Redis 2.6 RC4 converting an hash value.\n[Symptom]:\nAs received from Marty Weiner from Pinterest.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[10845] 09 Jun 04:42:08.251 # === ASSERTION FAILED ===\n[10845] 09 Jun 04:42:08.251 # ==> t_hash.c:406 'ret == DICT_OK' is not true\n[10845] 09 Jun 04:42:08.251 # (forcing SIGSEGV to print the bug report.)\n[10845] 09 Jun 04:42:08.251 #     Redis 2.5.10 crashed by signal: 11\n[10845] 09 Jun 04:42:08.251 #     Failed assertion: ret == DICT_OK (t_hash.c:406)\n[10845] 09 Jun 04:42:08.252 # --- STACK TRACE\n/usr/bin/redis-server(logStackTrace+0x52)[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/usr/bin/redis-server(hashTypeConvertZiplist+0xe0)[ ]\n/usr/bin/redis-server(hsetCommand+0x34)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(luaRedisGenericCommand+0x25a)[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server(lua_pcall+0x4f)[ ]\n/usr/bin/redis-server(evalGenericCommand+0x1fc)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(processCommand+0x375)[ ]\n/usr/bin/redis-server(processInputBuffer+0x4f)[ ]\n/usr/bin/redis-server(readQueryFromClient+0xa0)[ ]\n/usr/bin/redis-server(aeProcessEvents+0x136)[ ]\n/usr/bin/redis-server(aeMain+0x2b)[ ]\n/usr/bin/redis-server(main+0x2a3)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xff)[ ]\n/usr/bin/redis-server[ ]\n[10845] 09 Jun 04:42:08.253 # --- INFO OUTPUT\n[10845] 09 Jun 04:42:08.256 # # Server\nredis_version:2.5.10\nredis_git_sha1:1a3e9d95\nredis_git_dirty:0\nos:Linux 2.6.38-14-virtual x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.5.2\nprocess_id:10845\nrun_id: \ntcp_port:6381\nuptime_in_seconds:14583\nuptime_in_days:0\nlru_clock:1801116\n# Clients\n\nconnected_clients:2255\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:1632648896\nused_memory_human:1.52G\nused_memory_rss\n...[Description Truncated]...\n\n[Context/Logs]:\n- As a first step I added a new test in commit c0de459 to stress test the ziplist -> hash conversion. So far the test is passing without problems. I'm going to further analyze the bug today.\n\nSince the original posters of this bug saw it multiple times probably it's a good idea to distribute a modified version of Redis that can provide more information when this assert fails.\n- I walked the dictAdd code and haven't found any holes, even around encoding + rehashing occurring concurrently.  \n\nI'm now wondering if the ziplist version of my hashtable has duplicates in it.  RDB load has no protection, nor does save, so if one creeps in I dont think I'd notice until an expansion.  I'm thinking of adding a verification pass that can be switched on during load to watch for duplicates.\n- ... [Middle Discussions Snipped for Brevity] ...\n- redis  :6379[2]> hgetall 17661039738895\n  1) \"947\"\n  2) \", , ,\"\n  3) \"867\"\n  4) \", , ,\"\n  5) \"588\"\n  6) \", , ,\"\n  7) \"52\"\n  8) \", , ,\"\n  9) \"53\"\n 10) \", ,\"\n 11) \"110\"\n 12) \", ,\"\n 13) \"310\"\n 14) \", , , , , , , , , , ,\"\n 15) \"311\"\n 16) \", ,\"\n 17) \"151\"\n 18) \", ,\"\n 19) \"314\"\n 20) \", , , ,\"\n 21) \"9\"\n 22) \", ,\"\n 23) \"435\"\n 24) \", , , , , , , , , , , , , , , ,\"\n 25) \"912\"\n 26) \", ,\"\n 27) \"193\"\n 28) \", ,\"\n 29) \"436\"\n 30) \", , , , , , , , , ,\"\n 31) \"473\"\n 32) \", ,\"\n 33) \"439\"\n 34) \", , ,\"\n 35) \"196\"\n 36) \", , , ,\"\n 37) \"277\"\n 38) \", ,\"\n 39) \"639\"\n 40) \", , ,\"\n 41) \"396\"\n 42) \", , , , ,\"\n 43) \"837\"\n 44) \", , ,\"\n 45) \"397\"\n 46) \", , , , , , ,\"\n 47) \"991\"\n 48) \", \n...[Text Truncated]...\n\", ,\"\n191) \"701\"\n192) \", , ,\"\n193) \"143\"\n194) \", ,\"\n195) \"306\"\n196) \", ,\"\n197) \"621\"\n198) \", , , , , ,\"\n199) \"145\"\n200) \", ,\"\n201) \"146\"\n202) \", ,\"\n203) \"382\"\n204) \", ,\"\n205) \"708\"\n206) \", ,\"\n207) \"862\"\n208) \", ,\"\n209) \"549\"\n210) \", ,\"\n211) \"710\"\n212) \", ,\"\n213) \"967\"\n214) \", , , , , ,\"\n215) \"496\"\n216) \", ,\"\n217) \"497\"\n218) \", ,\"\n219) \"978\"\n220) \", ,\"\n221) \"83\"\n222) \", ,\"\n223) \"85\"\n224) \", ,\"\n225) \"87\"\n226) \", ,\"\n227) \"88\"\n228) \", ,\"\n229) \"421\"\n230) \", ,\"\n231) \"422\"\n232) \", ,\"\n233) \"900\"\n234) \", ,\"\n235) \"109\"\n236) \", ,\"\n237) \"505\"\n238) \", ,\"\n239) \"424\"\n240) \", , ,\"\n241) \"507\"\n242) \", ,\"\n243) \"903\"\n244) \", ,\"\n245) \"426\"\n246) \", ,\"\n247) \"427\"\n248) \", , ,\"\n249) \"823\"\n250) \", ,\"\n251) \"508\"\n252) \", ,\"\n253) \"904\"\n254) \", , ,\"\n255) \"583\"\n256) \", , , , , , ,\"\n257) \"909\"\n258) \", ,\"\n259) \"585\"\n260) \", , , ,\"\n261) \"1011\"\n262) \", , ,\"\n- @martaaay the core is big news! Thanks. No macros to walk the ziplist unfortunately, you may use RESTORE (but you have to fake the CRC64 checksum) in order to re-create the value into a live instance, btw if you can send me an hex-dump of the ziplist I'll happily check the format.\n\nAnother option is to take the hexdump, write a small C program to inject it inside an array of bytes, and then directly use the ziplist API to walk values.\n\nBtw this is a big step forward! Only problem I think we'll have is that we'll need to understand after we get what value is duplicated how it ended there, but should be simple to reproduce once we have the duplicated value."}
{"project_id": "Redis", "bug_id": "12", "source_type": "github", "llm_input_text": "[Title]: Crash in Redis 2.6 RC4 converting an hash value.\n[Symptom]:\nAs received from Marty Weiner from Pinterest.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[10845] 09 Jun 04:42:08.251 # === ASSERTION FAILED ===\n[10845] 09 Jun 04:42:08.251 # ==> t_hash.c:406 'ret == DICT_OK' is not true\n[10845] 09 Jun 04:42:08.251 # (forcing SIGSEGV to print the bug report.)\n[10845] 09 Jun 04:42:08.251 #     Redis 2.5.10 crashed by signal: 11\n[10845] 09 Jun 04:42:08.251 #     Failed assertion: ret == DICT_OK (t_hash.c:406)\n[10845] 09 Jun 04:42:08.252 # --- STACK TRACE\n/usr/bin/redis-server(logStackTrace+0x52)[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/usr/bin/redis-server(hashTypeConvertZiplist+0xe0)[ ]\n/usr/bin/redis-server(hsetCommand+0x34)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(luaRedisGenericCommand+0x25a)[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server(lua_pcall+0x4f)[ ]\n/usr/bin/redis-server(evalGenericCommand+0x1fc)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(processCommand+0x375)[ ]\n/usr/bin/redis-server(processInputBuffer+0x4f)[ ]\n/usr/bin/redis-server(readQueryFromClient+0xa0)[ ]\n/usr/bin/redis-server(aeProcessEvents+0x136)[ ]\n/usr/bin/redis-server(aeMain+0x2b)[ ]\n/usr/bin/redis-server(main+0x2a3)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xff)[ ]\n/usr/bin/redis-server[ ]\n[10845] 09 Jun 04:42:08.253 # --- INFO OUTPUT\n[10845] 09 Jun 04:42:08.256 # # Server\nredis_version:2.5.10\nredis_git_sha1:1a3e9d95\nredis_git_dirty:0\nos:Linux 2.6.38-14-virtual x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.5.2\nprocess_id:10845\nrun_id: \ntcp_port:6381\nuptime_in_seconds:14583\nuptime_in_days:0\nlru_clock:1801116\n# Clients\n\nconnected_clients:2255\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:1632648896\nused_memory_human:1.52G\nused_memory_rss\n...[Description Truncated]...\n\n[Context/Logs]:\n- As a first step I added a new test in commit c0de459 to stress test the ziplist -> hash conversion. So far the test is passing without problems. I'm going to further analyze the bug today.\n\nSince the original posters of this bug saw it multiple times probably it's a good idea to distribute a modified version of Redis that can provide more information when this assert fails.\n- I walked the dictAdd code and haven't found any holes, even around encoding + rehashing occurring concurrently.  \n\nI'm now wondering if the ziplist version of my hashtable has duplicates in it.  RDB load has no protection, nor does save, so if one creeps in I dont think I'd notice until an expansion.  I'm thinking of adding a verification pass that can be switched on during load to watch for duplicates.\n- ... [Middle Discussions Snipped for Brevity] ...\n- redis  :6379[2]> hgetall 17661039738895\n  1) \"947\"\n  2) \", , ,\"\n  3) \"867\"\n  4) \", , ,\"\n  5) \"588\"\n  6) \", , ,\"\n  7) \"52\"\n  8) \", , ,\"\n  9) \"53\"\n 10) \", ,\"\n 11) \"110\"\n 12) \", ,\"\n 13) \"310\"\n 14) \", , , , , , , , , , ,\"\n 15) \"311\"\n 16) \", ,\"\n 17) \"151\"\n 18) \", ,\"\n 19) \"314\"\n 20) \", , , ,\"\n 21) \"9\"\n 22) \", ,\"\n 23) \"435\"\n 24) \", , , , , , , , , , , , , , , ,\"\n 25) \"912\"\n 26) \", ,\"\n 27) \"193\"\n 28) \", ,\"\n 29) \"436\"\n 30) \", , , , , , , , , ,\"\n 31) \"473\"\n 32) \", ,\"\n 33) \"439\"\n 34) \", , ,\"\n 35) \"196\"\n 36) \", , , ,\"\n 37) \"277\"\n 38) \", ,\"\n 39) \"639\"\n 40) \", , ,\"\n 41) \"396\"\n 42) \", , , , ,\"\n 43) \"837\"\n 44) \", , ,\"\n 45) \"397\"\n 46) \", , , , , , ,\"\n 47) \"991\"\n 48) \", \n...[Text Truncated]...\n\", ,\"\n191) \"701\"\n192) \", , ,\"\n193) \"143\"\n194) \", ,\"\n195) \"306\"\n196) \", ,\"\n197) \"621\"\n198) \", , , , , ,\"\n199) \"145\"\n200) \", ,\"\n201) \"146\"\n202) \", ,\"\n203) \"382\"\n204) \", ,\"\n205) \"708\"\n206) \", ,\"\n207) \"862\"\n208) \", ,\"\n209) \"549\"\n210) \", ,\"\n211) \"710\"\n212) \", ,\"\n213) \"967\"\n214) \", , , , , ,\"\n215) \"496\"\n216) \", ,\"\n217) \"497\"\n218) \", ,\"\n219) \"978\"\n220) \", ,\"\n221) \"83\"\n222) \", ,\"\n223) \"85\"\n224) \", ,\"\n225) \"87\"\n226) \", ,\"\n227) \"88\"\n228) \", ,\"\n229) \"421\"\n230) \", ,\"\n231) \"422\"\n232) \", ,\"\n233) \"900\"\n234) \", ,\"\n235) \"109\"\n236) \", ,\"\n237) \"505\"\n238) \", ,\"\n239) \"424\"\n240) \", , ,\"\n241) \"507\"\n242) \", ,\"\n243) \"903\"\n244) \", ,\"\n245) \"426\"\n246) \", ,\"\n247) \"427\"\n248) \", , ,\"\n249) \"823\"\n250) \", ,\"\n251) \"508\"\n252) \", ,\"\n253) \"904\"\n254) \", , ,\"\n255) \"583\"\n256) \", , , , , , ,\"\n257) \"909\"\n258) \", ,\"\n259) \"585\"\n260) \", , , ,\"\n261) \"1011\"\n262) \", , ,\"\n- @martaaay the core is big news! Thanks. No macros to walk the ziplist unfortunately, you may use RESTORE (but you have to fake the CRC64 checksum) in order to re-create the value into a live instance, btw if you can send me an hex-dump of the ziplist I'll happily check the format.\n\nAnother option is to take the hexdump, write a small C program to inject it inside an array of bytes, and then directly use the ziplist API to walk values.\n\nBtw this is a big step forward! Only problem I think we'll have is that we'll need to understand after we get what value is duplicated how it ended there, but should be simple to reproduce once we have the duplicated value."}
{"project_id": "Redis", "bug_id": "13", "source_type": "github", "llm_input_text": "[Title]: Bug report, slowlog - EVAL\n[Symptom]:\nBug report output: [URL]\nTo reproduce: use latest github version, run with default options, system is 32 bit\n\nRun: eval \"local a; for b = 1,100000 do redis.call('sadd','set1',b) end return a\" 0\nRun: eval \"local a; for b = 50000,100000 do redis.call('sadd','set2',b) end return a\" 0\n\nSecond command always triggers a crash.\n\nUpdate 1: Changed title from \"Bug report, EVAL\" to include slowlog. It appears it happens during a slow logging of a command. Since above operations are slow, they will hit this code path pretty much every single time. I took the time to compile redis with jemalloc and lib c malloc and it happens just the same. Here is output of  a gdb session:\n\n```\nsudo gdb ./bin/redis-server 9683\nGNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08\nCopyright (C) 2011 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later   in ?? ()\n```\n\nUpdate 2: I've seen it crash with this gdb output as well\n\n```\nsudo gdb ../bin/bin-libc/bin/redis-server 10689\nGNU gdb (Ubuntu/Linaro 7.3-0ubuntu2) 7.3-2011.08\nCopyright (C) 2011 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <[URL]\nThis is free software: you are free to change and redistribute it.\n... [Log Snipped] ...\nfs             0x0  0\ngs             0x33 51\n```\n\n[Context/Logs]:\n- Thank you for reporting. Investigating. Sorry for the missing stack trace during the crash, this is due to two previous commit that broken the stack trace feature, now fixed into unstable (soon into 2.6 as well).\n- Hello again, I tried to reproduce this on different systems without success :(\nAre you able to reproduce this issue easily? Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Issue fixed, what I was really needing was 8 hours of sleep and not a core ;) From the stack trace it is quite clear what's happening. Please can you confirm that with latest commit everything is fine? Thanks.\n- With commit [URL] , it seems that everything is fine. So far, after several hundred calls to the same test script, server does not exhibit any problems."}
{"project_id": "Redis", "bug_id": "14", "source_type": "github", "llm_input_text": "[Title]: Crash while attempting zinterstore\n[Symptom]:\nThe crash said to report, so I'm reporting. Looks to be related to specifying too high of a value for \"numkeys\". I guess I should have entered 2.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[632] 11 Nov 13:25:20.272 # ------------------------------------------------\n[632] 11 Nov 13:25:20.272 # !!! Software Failure. Press left mouse button to continue\n[632] 11 Nov 13:25:20.272 # Guru Meditation: \"OOM\" #redis.c:2452\n[632] 11 Nov 13:25:20.272 # (forcing SIGSEGV in order to print the stack trace)\n[632] 11 Nov 13:25:20.272 # ------------------------------------------------\n[632] 11 Nov 13:25:20.272 #     Redis 2.5.13 crashed by signal: 11\n[632] 11 Nov 13:25:20.272 #     Failed assertion:   ( :0)\n[632] 11 Nov 13:25:20.272 # --- STACK TRACE\n0   redis-server                          logStackTrace + 96\n1   redis-server                          _redisPanic + 174\n2   libsystem_c.dylib                     _sigtramp + 26\n3   ???                                   0x0 +  \n4   redis-server                          redisOutOfMemoryHandler + 53\n5   redis-server                          zcalloc + 40\n6   redis-server                          zunionInterGenericCommand + 150\n7   redis-server                          call + 145\n8   redis-server                          processCommand + 820\n9   redis-server                          processInputBuffer + 31\n10  redis-server                          readQueryFromClient + 380\n11  redis-server                          aeProcessEvents + 616\n12  redis-server                          aeMain + 43\n13  redis-server                          main + 978\n14  libdyld.dylib                         start + 0\n15  ???                                   0x0 + 1\n[632] 11 Nov 13:25:20.275 # --- INFO OUTPUT\n[632] 11 Nov 13:25:20.275 # # Server\nredis_version:2.5.13\nredis_git_sha1:00000000\nredis_git_dirty:0\nos:Darwin 12.2.0 x86_64\narch_bits:64\nmultiplexing_api:kqueue\ngcc_version:4.2.1\nprocess_id:632\nrun_id: \ntcp_port:6379\nuptime_in_seconds:12142\n\n...[Description Truncated]...\n\n[Context/Logs]:\n- Thanks for reporting, yes that's easy to fix but it's good to have this fixed ASAP indeed! (and yes it's just the big number instead of \"2\").\n- Thank you, fixed into unstable and 2.6 branch. The fix will be available in Redis 2.6.5 that will be released today. Issue closed."}
{"project_id": "Redis", "bug_id": "15", "source_type": "github", "llm_input_text": "[Title]: AOF ignores FLUSHALL\n[Symptom]:\nI fill up my Redis instance, issue a FLUSHALL and shortly after that restart the machine (through upstart with SIGTERM). After the reboot, Redis will start and load the AOF. But it will not replay the FLUSHALL command, and therefore report to duty with all the data loaded again.\n\nThe docs say \"When you restart Redis it will re-play the AOF to rebuild the state.\" Therefore I thought it would honor the FLUSHALL command, too, and end up with an empty DB. I have limited memory and just throw away my whole database regularly via FLUSHALL. If it crashes after a while, I'm unable to recover the append-only file because it just contains way too much data. Note, that AOF rewrites don't compact anything here, either.\n\nI am using 2.4.0. All save points are deactivated, I only use appendfsync on everysec. If I deactivate AOF, everything is fine, and the dump.rdb files are empty after I call FLUSHALL, then SAVE, and then restart.\n\nHere's the logfile. Notice how memory usage goes from 87896904 to 717616 because of the FLUSHALL, but then goes back to 87896824:\n\n```\n[977] 16 Oct 23:12:32 - 0 clients connected (0 slaves), 87896904 bytes in use\n[977] 16 Oct 23:12:32 - Accepted  :36209\n[977] 16 Oct 23:12:32 * DB saved on disk\n[977] 16 Oct 23:12:33 - Client closed connection\n[977] 16 Oct 23:12:37 - 0 clients connected (0 slaves), 717616 bytes in use\n... [Log Snipped] ...\n[985] 16 Oct 23:13:37 - DB 0: 820 keys (0 volatile) in 1024 slots HT.\n[985] 16 Oct 23:13:37 - 0 clients connected (0 slaves), 87896824 bytes in use\n```\n\n[Context/Logs]:\n- Confirmed. Very bad... fixing ASAP.\n- Fixed now on git (2.4 and unstable branches). I'll release Redis 2.4.1 ASAP. Thanks for reporting.\n- Thanks for fixing this so fast. Amazing!"}
{"project_id": "Redis", "bug_id": "16", "source_type": "github", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "17", "source_type": "github", "llm_input_text": "[Title]: Crash in Redis 2.6 RC4 converting an hash value.\n[Symptom]:\nAs received from Marty Weiner from Pinterest.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[10845] 09 Jun 04:42:08.251 # === ASSERTION FAILED ===\n[10845] 09 Jun 04:42:08.251 # ==> t_hash.c:406 'ret == DICT_OK' is not true\n[10845] 09 Jun 04:42:08.251 # (forcing SIGSEGV to print the bug report.)\n[10845] 09 Jun 04:42:08.251 #     Redis 2.5.10 crashed by signal: 11\n[10845] 09 Jun 04:42:08.251 #     Failed assertion: ret == DICT_OK (t_hash.c:406)\n[10845] 09 Jun 04:42:08.252 # --- STACK TRACE\n/usr/bin/redis-server(logStackTrace+0x52)[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\n/usr/bin/redis-server(_redisAssert+0x6f)[ ]\n/usr/bin/redis-server(hashTypeConvertZiplist+0xe0)[ ]\n/usr/bin/redis-server(hsetCommand+0x34)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(luaRedisGenericCommand+0x25a)[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server[ ]\n/usr/bin/redis-server(lua_pcall+0x4f)[ ]\n/usr/bin/redis-server(evalGenericCommand+0x1fc)[ ]\n/usr/bin/redis-server(call+0x5d)[ ]\n/usr/bin/redis-server(processCommand+0x375)[ ]\n/usr/bin/redis-server(processInputBuffer+0x4f)[ ]\n/usr/bin/redis-server(readQueryFromClient+0xa0)[ ]\n/usr/bin/redis-server(aeProcessEvents+0x136)[ ]\n/usr/bin/redis-server(aeMain+0x2b)[ ]\n/usr/bin/redis-server(main+0x2a3)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xff)[ ]\n/usr/bin/redis-server[ ]\n[10845] 09 Jun 04:42:08.253 # --- INFO OUTPUT\n[10845] 09 Jun 04:42:08.256 # # Server\nredis_version:2.5.10\nredis_git_sha1:1a3e9d95\nredis_git_dirty:0\nos:Linux 2.6.38-14-virtual x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.5.2\nprocess_id:10845\nrun_id: \ntcp_port:6381\nuptime_in_seconds:14583\nuptime_in_days:0\nlru_clock:1801116\n# Clients\n\nconnected_clients:2255\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:1632648896\nused_memory_human:1.52G\nused_memory_rss\n...[Description Truncated]...\n\n[Context/Logs]:\n- As a first step I added a new test in commit c0de459 to stress test the ziplist -> hash conversion. So far the test is passing without problems. I'm going to further analyze the bug today.\n\nSince the original posters of this bug saw it multiple times probably it's a good idea to distribute a modified version of Redis that can provide more information when this assert fails.\n- I walked the dictAdd code and haven't found any holes, even around encoding + rehashing occurring concurrently.  \n\nI'm now wondering if the ziplist version of my hashtable has duplicates in it.  RDB load has no protection, nor does save, so if one creeps in I dont think I'd notice until an expansion.  I'm thinking of adding a verification pass that can be switched on during load to watch for duplicates.\n- ... [Middle Discussions Snipped for Brevity] ...\n- redis  :6379[2]> hgetall 17661039738895\n  1) \"947\"\n  2) \", , ,\"\n  3) \"867\"\n  4) \", , ,\"\n  5) \"588\"\n  6) \", , ,\"\n  7) \"52\"\n  8) \", , ,\"\n  9) \"53\"\n 10) \", ,\"\n 11) \"110\"\n 12) \", ,\"\n 13) \"310\"\n 14) \", , , , , , , , , , ,\"\n 15) \"311\"\n 16) \", ,\"\n 17) \"151\"\n 18) \", ,\"\n 19) \"314\"\n 20) \", , , ,\"\n 21) \"9\"\n 22) \", ,\"\n 23) \"435\"\n 24) \", , , , , , , , , , , , , , , ,\"\n 25) \"912\"\n 26) \", ,\"\n 27) \"193\"\n 28) \", ,\"\n 29) \"436\"\n 30) \", , , , , , , , , ,\"\n 31) \"473\"\n 32) \", ,\"\n 33) \"439\"\n 34) \", , ,\"\n 35) \"196\"\n 36) \", , , ,\"\n 37) \"277\"\n 38) \", ,\"\n 39) \"639\"\n 40) \", , ,\"\n 41) \"396\"\n 42) \", , , , ,\"\n 43) \"837\"\n 44) \", , ,\"\n 45) \"397\"\n 46) \", , , , , , ,\"\n 47) \"991\"\n 48) \", \n...[Text Truncated]...\n\", ,\"\n191) \"701\"\n192) \", , ,\"\n193) \"143\"\n194) \", ,\"\n195) \"306\"\n196) \", ,\"\n197) \"621\"\n198) \", , , , , ,\"\n199) \"145\"\n200) \", ,\"\n201) \"146\"\n202) \", ,\"\n203) \"382\"\n204) \", ,\"\n205) \"708\"\n206) \", ,\"\n207) \"862\"\n208) \", ,\"\n209) \"549\"\n210) \", ,\"\n211) \"710\"\n212) \", ,\"\n213) \"967\"\n214) \", , , , , ,\"\n215) \"496\"\n216) \", ,\"\n217) \"497\"\n218) \", ,\"\n219) \"978\"\n220) \", ,\"\n221) \"83\"\n222) \", ,\"\n223) \"85\"\n224) \", ,\"\n225) \"87\"\n226) \", ,\"\n227) \"88\"\n228) \", ,\"\n229) \"421\"\n230) \", ,\"\n231) \"422\"\n232) \", ,\"\n233) \"900\"\n234) \", ,\"\n235) \"109\"\n236) \", ,\"\n237) \"505\"\n238) \", ,\"\n239) \"424\"\n240) \", , ,\"\n241) \"507\"\n242) \", ,\"\n243) \"903\"\n244) \", ,\"\n245) \"426\"\n246) \", ,\"\n247) \"427\"\n248) \", , ,\"\n249) \"823\"\n250) \", ,\"\n251) \"508\"\n252) \", ,\"\n253) \"904\"\n254) \", , ,\"\n255) \"583\"\n256) \", , , , , , ,\"\n257) \"909\"\n258) \", ,\"\n259) \"585\"\n260) \", , , ,\"\n261) \"1011\"\n262) \", , ,\"\n- @martaaay the core is big news! Thanks. No macros to walk the ziplist unfortunately, you may use RESTORE (but you have to fake the CRC64 checksum) in order to re-create the value into a live instance, btw if you can send me an hex-dump of the ziplist I'll happily check the format.\n\nAnother option is to take the hexdump, write a small C program to inject it inside an array of bytes, and then directly use the ziplist API to walk values.\n\nBtw this is a big step forward! Only problem I think we'll have is that we'll need to understand after we get what value is duplicated how it ended there, but should be simple to reproduce once we have the duplicated value."}
{"project_id": "Redis", "bug_id": "18", "source_type": "github", "llm_input_text": "[Title]: lua struct.unpack redis segfault\n[Symptom]:\nThis lua script causes redis (atleast 2.6.9) to segfault:\n\nlocal t={}; for i=1,288 do t[i]=0 end\nredis.call(\"SET\", KEYS[1], struct.pack((\"H\"):rep(288), unpack(t))) \nt = struct.unpack((\"H\"):rep(288), redis.call(\"GET\", KEYS[1]))\n\n[Context/Logs]:\n- Program received signal SIGSEGV, Segmentation fault.\n  in _int_malloc (av= , bytes=129)\n    at malloc.c:4496\n4496    malloc.c: No such file or directory.\n    in malloc.c\n(gdb) bt\n#0    in _int_malloc (av= , bytes=129)\n    at malloc.c:4496\n#1    in _int_realloc (av= , \n    oldp= , oldsize=80, nb=144) at malloc.c:5274\n#2    in *__GI___libc_realloc (oldmem= , \n    bytes=128) at malloc.c:3822\n#3    in luaM_realloc_ ()\n#4    in setarrayvector ()\n#5    in resize ()\n#6    in newkey ()\n#7    in luaV_settable ()\n#8    in luaV_execute ()\n#9    in luaD_call ()\n#10   in luaD_rawrunprotected ()\n#11   in luaD_pcall ()\n#12   in lua_pcall ()\n#13   in evalGenericCommand (c= , \n    evalsha=0) at scripting.c:872\n#14   in call (c= , flags=7)\n    at redis.c:1502\n#15   in processCommand (c= )\n    at redis.c:1677\n#16   in processInputBuffer (c= )\n    at networking.c:1011\n#17   in readQueryFromClient (\n    el= , fd=7, privdata= , \n    mask= ) at networking.c:1074\n#18   in aeProcessEvents (eventLoop= , \n    flags= ) at ae.c:382\n#19   in aeMain (eventLoop= ) at ae.c:425\n#20   in main (argc=1, argv= )\n    at redis.c:2622\n- Thank you for reporting, fixing ASAP.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello, confirmed, there is a bug here, fixing ASAP, thank you for reporting.\n- It Was Not My Code (TM)\n\nThe Lua struct library was to blame, I updated the code to latest version of the lib and it seems to be fixed.\n\nClosing the issue but I'll appreciate a feedback after the upgrade (however I tested it manually and via valgrind on two systems).\n\nThanks again for reporting!"}
{"project_id": "Redis", "bug_id": "19", "source_type": "github", "llm_input_text": "[Title]: [2.9.102] Assertion failed: cluster.c:4641 'n != NULL' is not true\n[Symptom]:\nThis happened upon issuing a manual CLUSTER FAILOVER to the slave. It was the former master where the error occured, the slave is fine and the cluster check reports okay, so hooray for that :)\n\nThis was during a test setup with a client molesting the cluster with a number of SET/MGET. Before the manual failover the cluster looked like this:\n\n```\nConnecting to node  :7001: OK\nConnecting to node  :7003: OK\nConnecting to node  :7002: OK\nConnecting to node  :7004: OK\n... [Log Snipped] ...\n[OK] All 16384 slots covered.\n```\n\nAnd after the manual failover (and crash of node  ) it looked like this:\n\n```\nConnecting to node  :7002: OK\nConnecting to node  :7001: OK\nConnecting to node  :7004: OK\nM:    :7002\n... [Log Snipped] ...\n[OK] All 16384 slots covered.\n```\n\nCrash report:\n\n```\n21402:M 15 Jan 10:23:36.048 # Manual failover requested by slave  .\n21402:M 15 Jan 10:23:36.203 # Failover auth granted to   for epoch 9\n21402:M 15 Jan 10:23:36.204 # Configuration change detected. Reconfiguring myself as a replica of  \n21402:S 15 Jan 10:23:36.204 # Connection with slave  :7004 lost.\n21402:S 15 Jan 10:23:36.204 # \n... [Log Snipped] ...\n21402:S 15 Jan 10:23:36.404 # \n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n```\n\nThe test script was very simple:\n\n```\nfrom rediscluster.client import RedisCluster\nfrom time import time\n\nstartup_nodes = [\n    {'host': ' ', 'port': '7002'},\n... [Log Snipped] ...\n    duration = time() - t\n    print len(l), \"%f ms\" % (duration * 1000.0)\n```\n\n[Context/Logs]:\n- Hello, thank you for reporting. Checking the code, it makes sense it crashes like that in certain edge conditions. The code pretends that we never dispatch commands if the cluster is logically down (one or more slots uncovered), but this is not the case. The fix will be the same anyway (since handling this in getNodeByQuery() will prevent the next bug similar to that), however I also want to check the exact conditions that trigger it in order to also trap it before, but I've an idea about what the state is. Fixing tomorrow morning CEST giving priority over the doc writing effort, and releasing a new RC. However this is not very critical (it is in the effects, but not conceptually), so the stable release will not be delayed.\n- @ingmar checking the issue I see this happened with Redis 3.0.0-rc2, please note that rc3 fixed several critical bugs so you are likely to run into strange consistency issues in the CLUSTER NODES output and other crashes. This issue itself may be due to the same set of bugs, however whatever this is the case or not, the issue posted contains an hit about an implementation fragility that should be fixed :-)\n- Problem fixed, a few notes:\n1. It's not 100% clear to me, in this exact setup, how the hash slots were unbound. As a result of the configuration update received from the (old) slave I expected the master to have all the hash slots still covered. Maybe it's due to the many RC2 serious memory bugs, fixed by RC3.\n2. Anyway the getNodeByQuery() implementation was fragile. It's not a good idea to assert for `node != NULL`, and in general, to the fact that the cluster state is atomically updated.\n3. And... indeed the cluster state is _not_ atomically updated, so there was a bug here regardless of what exactly caused this instance of the bug. The cluster state is updated in `clusterBeforeSleep()` in a lazy way.\n4. Moreover the `clusterBeforeSleep()` call was misplaced at the end of the chain of the `beforeSleep()` call in `redis.c`. It should be at the top, before processing un blocking clients. This is exactly the reason in the specific instance of the bug as reported, why the state was not updated in time before clients served.\n\nReleasing RC5 in a second. Thank you for reporting!"}
{"project_id": "Redis", "bug_id": "20", "source_type": "github", "llm_input_text": "[Title]: Replication inconsistent issue\n[Symptom]:\nRedis version 2.8 and 3.0.3\n1. Initially, there are individual A and B(Master)->C(Slave)-D(Slave)\n2. In A execute \"set a 1\", in B execute \"set a 2\". Now there is key a with value 2 in B, C and D.\n3. In D execute \"multi\", \"client kill  : \", \"debug sleep 60\", \"exec\" to make D try psync after step 4.\n4. Make B slave of A with slaveof cmd.\n5. Wait D reconnect with C.\n\nExpect Result: value of a is 1 in D\nActual Result: value of a is 2 in D\n\n[Context/Logs]:\n- I think in step 2 C should reset backlog, then D can only full sync with C.\n- Thanks for submitting, I think I found the cause for this issue. Working on a fix right now.\n- Probably it will never be useful again, but given that I wrote it, we can use it to better document the bug for the future: here is the script to reproduce it easily:\n\n```\nsh\n#!/bin/bash\nmkdir -p /tmp/a; rm -rf /tmp/a/*\nmkdir -p /tmp/b; rm -rf /tmp/b/*\nmkdir -p /tmp/c; rm -rf /tmp/c/*\n... [Log Snipped] ...\nredis-cli -p $C SHUTDOWN NOSAVE\nredis-cli -p $D SHUTDOWN NOSAVE\n```\n- I wrote a first patch, than realized that this bug is just a manifestation of a deeper problem. Redis replication code used to do two things:\n1. When a slave lost connection with its master, disconnected the chained slaves ASAP. Which is not needed since after a successful PSYNC with the master, the slaves can continue and don't need to resync in turn.\n2. However after a failed PSYNC the replication backlog was not reset, so a slave was able to PSYNC successfully even if the instance did a full sync with its master, containing now an entirely different data set.\n\nSo I'm writing a different fix that only forces a full SYNC of the connected slaves once the slave has to full SYNC with its master."}
{"project_id": "Redis", "bug_id": "21", "source_type": "github", "llm_input_text": "[Title]: GEORADIUS returns the same key twice on Redis 3.1.999\n[Symptom]:\n# The bug\n\nA `GEORADIUS` query returns the same key twice. Since `GEORADIUS` [Link: is defined as]:\n\nI assume that having a duplicate in the set is an erroneous behaviour. \n# Steps to reproduce on `redis-cli`\n\n```\n :6379[1]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 1\n :6379[1]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 0\n :6379[1]> GEORADIUS users 0 0 50000 km WITHCOORD\n... [Log Snipped] ...\n   2) 1) \"-47.271613776683807\"\n      2) \"-54.534504198047678\"\n```\n# Notes\n## Adding the key multiple times\n\nAdding the same key more than twice seems to add the key only twice:\n\n```\n :6379[2]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 1\n :6379[2]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n(integer) 0\n :6379[2]> GEOADD users -47.271613776683807 -54.534504198047678 user_000000\n... [Log Snipped] ...\n   2) 1) \"-47.271613776683807\"\n      2) \"-54.534504198047678\"\n```\n## Other coordinates\n\nThe bug was not reproduced with other coordinates, e.g.:\n\n```\n :6379[2]> GEOADD users 10 10 'x'\n(integer) 1\n :6379[2]> GEORADIUS users 10 10 500 km WITHCOORD\n1) 1) \"x\"\n   2) 1) \"10.000002086162567\"\n... [Log Snipped] ...\n   2) 1) \"10.000002086162567\"\n      2) \"10.00000092823273\"\n```\n# INFO\n\n```\n :6379[2]> INFO\n# Server\nredis_version:3.1.999\nredis_git_sha1:00000000\nredis_git_dirty:0\n... [Log Snipped] ...\ndb1:keys=1,expires=0,avg_ttl=0\ndb2:keys=1,expires=0,avg_ttl=0\n```\n\n[Context/Logs]:\n- Thanks for reporting, actually you can use a single `GEOADD` command and yet the item will be reported twice. It is a bug with the GEORADIUS implementation and not with the underlying sorted set data structure. I'll fix this tomorrow hopefully.\n- In this specific case the problem is due to the fact that the neighbors squares calculated for north_west and south_west are the same, due probably to the huge radius used. It's a corner case which should be pretty easy to fix AFAIK.\n- Fixed, thanks for reporting."}
{"project_id": "Redis", "bug_id": "22", "source_type": "github", "llm_input_text": "[Title]: Redis 3.0.0 crashed by signal: 11\n[Symptom]:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n1718:M 12 Jan 11:20:08.924 #     Redis 3.0.0 crashed by signal: 11\n1718:M 12 Jan 11:20:08.924 #     Failed assertion:   ( :0)\n1718:M 12 Jan 11:20:08.924 # --- STACK TRACE\n/opt/redis/bin/redis-server *:7380 [cluster] - logStackTrace+0x43 [ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - clusterNodeRemoveSlave+0x17 [ ]\n/lib64/libpthread.so.0[ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - clusterNodeRemoveSlave+0x17  [ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - clusterProcessPacket+0x6c3 [ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - clusterReadHandler+0x135 [ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - aeProcessEvents+0x13c [ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - aeMain+0x2b [ ]\n/opt/redis/bin/redis-server *:7380 [cluster] - main+0x2cd - [ ]\n/lib64/libc.so.6 - __libc_start_main+0xfd [ ]\n/opt/redis/bin/redis-server *:7380 [cluster][ ]\n1718:M 12 Jan 11:20:08.963 # --- INFO OUTPUT\n1718:M 12 Jan 11:20:08.963 # # Server\n\nredis_version:3.0.0\n\nredis_git_sha1:00000000\n\nredis_git_dirty:0\n\nredis_build_id: \n\nredis_mode:cluster\n\nos:Linux 2.6.32-220.el6.x86_64 x86_64\n\narch_bits:64\n\nmultiplexing_api:epoll\n\ngcc_version:4.4.6\n\nprocess_id:1718\n\nrun_id: \n\ntcp_port:7380\n\nuptime_in_seconds:12764535\n\nuptime_in_days:147\n\nhz:10\n\nlru_clock:9728232\n\nconfig_file:/opt/bluewhale/ /7380/data/redis.conf\n# Clients\n\nconnected_clients:441\n\nclient_longest_output_list:0\n\nclient_biggest_input_buf:2920\n\nblocked_clients:0\n# Memory\n\nused_memory:5638983200\n\nused_memory_human:5.25G\n\nused_memory_rss:7016611840\n\nused_memory_peak:6767090192\n\nused_memory_peak_human:6.30G\n\nused_memory_lua:46080\n\nmem_fragmentation_ratio:1.24\n\nmem_allocator:jemalloc-3.6.0\n# Persistence\n\nloading:0\n\nrdb_changes_since_last_save:1111973973\n\nrdb_bgsave_in_progress:0\n\nrdb_last_save_time:1443207413\n\nrdb_last_bgsave_status:ok\n\nrdb_last_bgsave_time_sec:51\n\nrdb_current_bgsave_time_sec:-1\n\naof_enabled:0\n\naof_rewrite_in_progress:0\n\naof_rewrite_schedule\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, please could you send me the `redis-server` executable that generated this issue? Thanks.\n- Update: tried to fuzz-testing clusterNodeRemoveSlave() and clusterNodeAddSlave() without success, they work as expected apparently for different set of operations, the memmove() looks fine and so forth. Must be something else. The binary and disassembling can definitely provide more hints.\n- ... [Middle Discussions Snipped for Brevity] ...\n- ok, thanks very much for your work, we will pull the code and test it.\n- Thanks, I'm still testing stuff and doing code auditing around this patch and the general mechanism to take n->slaveof and n->slaves synchronized, it's not totally impossible that I'll change the code a bit more, but testing of this patch as provided is very appreciated, thank you."}
{"project_id": "Redis", "bug_id": "23", "source_type": "github", "llm_input_text": "[Title]: Bugs introduced in variadic MIGRATE on errors\n[Symptom]:\nIn looking through the latest commits to the MIGRATE command to make it variadic, I\u2019ve noticed some problems and am not clear about the expected behavior in error scenarios.\n\n[URL]\n\nFirst, the new lists allocated on 4603 and 4604 are not freed under all error scenarios, for example on lines 4639, 4645, 4647, 4674, leading to memory leaks. Similarly for newargv allocated on 4748 \u2013 it is not freed in the socket_err case.\n\nMore concerning, however, is the undefined behavior of migrating multiple keys where they are not all acknowledged by the receiver. In the loop on 4750, we will retry the entire command in some cases on socket errors. This is after we have potentially already queued a reply to the client with an error and potentially already deleted some of the keys from the source. If we retry (or even if we fail out) we never translate the command to a DEL to propagate what has been deleted to the replication/AOF stream. When we retry, if we\u2019ve already deleted the item from the database, we're referencing invalid values, as well as doubly refcounting keys, etc.\n\nFor example, if I issue a MIGRATE dst port \u201c\u201d db timeout REPLACE KEY1 KEY2 KEY3 KEY4, we will send a RESTORE command for each of the four keys. Assume we process KEY1 and KEY2 appropriately, and delete them from the database. Let\u2019s say we have trouble reading the response for KEY3 from the socket. We\u2019ll possibly retry the command (going to try_again mark). We will again try to RESTORE all four keys to the destination. Meanwhile, the values corresponding to KEY1 and KEY2 have been freed.  If we\u2019re able to get successful responses, we\u2019ll try to delete the keys again (L4764). L4770 will increase the refcount of KEY1 and KEY2 a second time, which will result in the key being incorrectly refcounted twice and never freed.\n\nCould you take a look at the error handling here and clarify the expected behavior?\n\n[Context/Logs]:\n- Hello, thank you, this is very helpful. I'll write a complete report as a first thing I do after the weekend (during the weekend if I'll find some time).\n- My comments:\n1. There is no leak on line 4639, just because when KEYS is given, no other arguments are parsed, all the rest is considered to be key names. However that's not the case for the other points where there is an actual leak. All instances of the leak fixed.\n2. The `newargv` leaks should be only on socket errors apparently (as you noted in your comment), since it's otherwise freed by passing the pointer to `replaceClientCommandVector` that takes ownership, or it gets freed. Fixed as well. Now the variable is declared at the top of the function and immediately initialized to NULL so that freeing it if not allocated is not an issue anyway.\n3. About the command retry, it was a totally mess, one of the worse pieces of code I ever wrote... Redesigning it with more obvious semantics, almost finished,  news ASAP in this issue.\n\nThanks for your help!\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello again, I did an auditing of the new function, I can't find other errors, but modified the code a bit more in order to handle the cleanup of `newargv` in a single place.\n\nIt looks like a trivial way to simplify the function a lot more is to write it as a non retrying version, and wrap it into another function that will retry depending on the returned error. Probably not worth it right now since this is going to be back ported in all the production versions of Redis, and new code is always dangerous... :-)\n- It looks good to me now.  Thanks for the quick resolution!  Feel free to resolve this issue."}
{"project_id": "Redis", "bug_id": "24", "source_type": "github", "llm_input_text": "[Title]: Bugs introduced in variadic MIGRATE on errors\n[Symptom]:\nIn looking through the latest commits to the MIGRATE command to make it variadic, I\u2019ve noticed some problems and am not clear about the expected behavior in error scenarios.\n\n[URL]\n\nFirst, the new lists allocated on 4603 and 4604 are not freed under all error scenarios, for example on lines 4639, 4645, 4647, 4674, leading to memory leaks. Similarly for newargv allocated on 4748 \u2013 it is not freed in the socket_err case.\n\nMore concerning, however, is the undefined behavior of migrating multiple keys where they are not all acknowledged by the receiver. In the loop on 4750, we will retry the entire command in some cases on socket errors. This is after we have potentially already queued a reply to the client with an error and potentially already deleted some of the keys from the source. If we retry (or even if we fail out) we never translate the command to a DEL to propagate what has been deleted to the replication/AOF stream. When we retry, if we\u2019ve already deleted the item from the database, we're referencing invalid values, as well as doubly refcounting keys, etc.\n\nFor example, if I issue a MIGRATE dst port \u201c\u201d db timeout REPLACE KEY1 KEY2 KEY3 KEY4, we will send a RESTORE command for each of the four keys. Assume we process KEY1 and KEY2 appropriately, and delete them from the database. Let\u2019s say we have trouble reading the response for KEY3 from the socket. We\u2019ll possibly retry the command (going to try_again mark). We will again try to RESTORE all four keys to the destination. Meanwhile, the values corresponding to KEY1 and KEY2 have been freed.  If we\u2019re able to get successful responses, we\u2019ll try to delete the keys again (L4764). L4770 will increase the refcount of KEY1 and KEY2 a second time, which will result in the key being incorrectly refcounted twice and never freed.\n\nCould you take a look at the error handling here and clarify the expected behavior?\n\n[Context/Logs]:\n- Hello, thank you, this is very helpful. I'll write a complete report as a first thing I do after the weekend (during the weekend if I'll find some time).\n- My comments:\n1. There is no leak on line 4639, just because when KEYS is given, no other arguments are parsed, all the rest is considered to be key names. However that's not the case for the other points where there is an actual leak. All instances of the leak fixed.\n2. The `newargv` leaks should be only on socket errors apparently (as you noted in your comment), since it's otherwise freed by passing the pointer to `replaceClientCommandVector` that takes ownership, or it gets freed. Fixed as well. Now the variable is declared at the top of the function and immediately initialized to NULL so that freeing it if not allocated is not an issue anyway.\n3. About the command retry, it was a totally mess, one of the worse pieces of code I ever wrote... Redesigning it with more obvious semantics, almost finished,  news ASAP in this issue.\n\nThanks for your help!\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hello again, I did an auditing of the new function, I can't find other errors, but modified the code a bit more in order to handle the cleanup of `newargv` in a single place.\n\nIt looks like a trivial way to simplify the function a lot more is to write it as a non retrying version, and wrap it into another function that will retry depending on the returned error. Probably not worth it right now since this is going to be back ported in all the production versions of Redis, and new code is always dangerous... :-)\n- It looks good to me now.  Thanks for the quick resolution!  Feel free to resolve this issue."}
{"project_id": "Redis", "bug_id": "25", "source_type": "github", "llm_input_text": "[Title]: Redis-sentinel 3.2rc1 crashed after master was shutdown using \"poweroff\"\n[Symptom]:\nRedis-sentinel on one of the slaves crashed after master was shut down using the \"poweroff\" system command.\n\n```\nJan 26 15:52:06 redis-sentinel[652]: 652:X 26 Jan 15:52:06.315 # +sdown master redis-data-development   6379\nJan 26 15:52:06 redis-sentinel[652]: 652:X 26 Jan 15:52:06.315 # +sdown sentinel  :26379   26379 @ redis-data-development   6379\nJan 26 15:52:07 redis-sentinel[652]: 652:X 26 Jan 15:52:07.180 # +new-epoch 22\nJan 26 15:52:07 redis-sentinel[652]: 652:X 26 Jan 15:52:07.188 # +vote-for-leader   22\nJan 26 15:52:07 redis-sentinel[652]: 652:X 26 Jan 15:52:07.440 # +odown master redis-data-development   6379 #quorum 2/2\n... [Log Snipped] ...\nJan 26 15:52:08 systemd[1]: redis-sentinel.service: main process exited, code=killed, status=11/SEGV\nJan 26 15:52:08 systemd[1]: Unit redis-sentinel.service entered failed state.\n```\n\n[Context/Logs]:\n- Thanks, I was pretty sure there were left crashes on edge cases in Sentinel of Redis 3.2, connection sharing changed too many internals... I hope I can fix this before RC2 which is due for tomorrow.\n- Thank you for a quick reply. I just noticed that the bug persists on this server event after restarting redis-sentinel.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Thanks @pako-pl, your help was really appreciated! RC2 will be released within the next 24h.\n- p.s. It will be just the last commit of the 3.2 branch tagged as \"RC2\" so if you want to use it, you can just grab it right now."}
{"project_id": "Redis", "bug_id": "26", "source_type": "github", "llm_input_text": "[Title]: Node of redis-cluster dies with certain sequences of commands\n[Symptom]:\nHi,\n\nWhile playing with redis-cluster today I noticed that certain sequences of commands can make a node of the cluster die. The OS is a Linux 32bit VM (full details are in the dump at the end of this ticket) and the cluster is composed of three nodes configured as follow:\n\n```\n./redis-trib.rb create  :6379  :6380  :6381\n```\n\nThis is the sequence of commands that always make the node fail (the key `foobar` is in the slot covered by node ` :6379`):\n\n```\nredis  :6379> SET foobar test\nOK\nredis  :6379> MGET foo foobar\n(error) ERR Multi keys request invalid in cluster\nredis  :6379> GETRANGE foobar 0 1\n... [Log Snipped] ...\nredis  :6379> GETRANGE foobar 0 1\nCould not connect to Redis at  :6379: Connection refused\n```\n\nThe thing I noticed is that the node starts acting strange only after issuing `MGET` with multiple keys, which returns a `-ERR` as one would expect, but only certain commands make the node fail after that one: for example it crashes with `GETRANGE` or `SETRANGE`, but `GET` or `EXISTS` seem to work normally returning the expected results. In the majority of cases the node crashed at the third `GETRANGE` request, but there were times when the node crashed instantly.\n\nThis is the dump generated by the failing node when issuing `GETRANGE` three times:\n\n```\n[12830] 29 Jul 10:17:04.321 #     Redis 2.9.7 crashed by signal: 11\n[12830] 29 Jul 10:17:04.321 #     Failed assertion:   ( :0)\n[12830] 29 Jul 10:17:04.321 # --- STACK TRACE\n./redis-server(logStackTrace+0x71)[ ]\n/lib/i386-linux-gnu/libc.so.6(+ )[ ]\n... [Log Snipped] ...\n[12830] 29 Jul 10:17:04.325 # (bfea2498) -> b684e218\n[12830] 29 Jul 10:17:04.325 #\n```\n\nAnd this is the dump generated when just the first `GETRANGE` made the node crash (note that the stack trace is different and the generated dump is incomplete):\n\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[21541] 29 Jul 10:52:23.419 #     Redis 2.9.7 crashed by signal: 11\n[21541] 29 Jul 10:52:23.419 #     Failed assertion:   ( :0)\n[21\n...[Description Truncated]...\n\n[Context/Logs]:\n- I was able to reproduce this. Fixing today, thanks.\n- Fixed, thanks."}
{"project_id": "Redis", "bug_id": "27", "source_type": "github", "llm_input_text": "[Title]: Redis crashed after a week of uptime. Ran memtest for a few minutes on vm.\n[Symptom]:\n[18952] 14 Dec 16:20:46.191 #     Redis 2.8.22 crashed by signal: 11\n[18952] 14 Dec 16:20:46.191 #     Failed assertion:   ( :0)\n[18952] 14 Dec 16:20:46.191 # --- STACK TRACE\nredis-server *:6379(logStackTrace+0x3e)[ ]\nredis-server *:6379(processCommand+0x1a9)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\nredis-server *:6379(processCommand+0x1a9)[ ]\nredis-server *:6379(processInputBuffer+0x51)[ ]\nredis-server *:6379(readQueryFromClient+0xbd)[ ]\nredis-server *:6379(aeProcessEvents+0x230)[ ]\nredis-server *:6379(aeMain+0x2b)[ ]\nredis-server *:6379(main+0x31e)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[ ]\nredis-server *:6379[ ]\n[18952] 14 Dec 16:20:46.191 # --- INFO OUTPUT\n[18952] 14 Dec 16:20:46.191 # # Server\nredis_version:2.8.22\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:standalone\nos:Linux 3.2.0-4-amd64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.7.2\nprocess_id:18952\nrun_id: \ntcp_port:6379\nuptime_in_seconds:1465093\nuptime_in_days:16\nhz:10\nlru_clock:7249656\nconfig_file:/etc/fk-3p-redis/redis-server.conf\n# Clients\n\nconnected_clients:78\nclient_longest_output_list:17815\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:4999941976\nused_memory_human:4.66G\nused_memory_rss:3472392192\nused_memory_peak:5077248952\nused_memory_peak_human:4.73G\nused_memory_lua:36864\nmem_fragmentation_ratio:0.69\nmem_allocator:jemalloc-3.6.0\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:3991\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1450090023\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:2\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\naof_last_write_status:ok\n# Stats\n\ntotal_connections_received:1200\ntotal_commands_processed:1266751737\ninstantaneous_ops_per_sec:74\ntotal_net_input_bytes:219451461936\ntotal_net_output_bytes:39608808420918\ninstantaneous_input_kbps:11.58\ninstanta\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, there are no known bugs that may lead to that AFAIK, so may be an HW failure or a new unknown Redis bug. There are no hints in the stack trace unfortunately. Please could you check if it happens again and post other crash reports? If they all happen at random locations it could be lack of stability of the hardware. Please also could you check with your VM provider if they are using error corrected memory or not?\n- Also could be useful to have the original redis server binary. You may send it to antirez at g-mail citing the issue number in the subject. Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- yeah, this is most likely fixed now (unless there's another bug we didn't spot there).\nI don't think there's any way to avoid this bug, but on the other hand, it seems VERY rare so i doubt you'll see it again.\non the other hand, you'll benefit a lot by upgrading to a more recent version due to other bug fixes.\n- +1 to Oran reasoning. Very rare, if you see it again in a short timeframe maybe is a different bug. However I'm releasing 2.8 and 3.0 new patchlevels in a matter of days, with this fix. I can't do it today because there are pending things in order to release 3.0.6.\n\nYou can either use the latest commit of the `2.8` branch if you want to be sure this bug is fixed in your environment, or also just apply commit e0b7388 in your current tree.\n\nOr wait a few days and install the new 2.8 or 3.0 releases."}
{"project_id": "Redis", "bug_id": "28", "source_type": "github", "llm_input_text": "[Title]: Lua script multi-element LPUSH / BRPOPLPUSH replication bug\n[Symptom]:\nI noticed a replication bug while attempting to use Redis as a reliable queue with a Lua script pushing multiple elements onto the queue. It appears the wrong number of RPOP operations are sent to the slave instance, resulting in the queue on the slave growing unbounded, out of sync with master.\n\nI created an example repo to demonstrate this behavior:\n\n[URL]\n\nThis affects Redis 2.5.12 (and 2.5.11, likely early versions as well).\n\n[Context/Logs]:\n- Thank you for reporting, I'll fix it in the next days and report back.\n- @antirez any updates?\n- Hello, this issue is finally fixed in the unstable and 2.6 branch. An almost complete reimplementation of blocking operations was required in order to fix this issue, the details are documented in the commit message. Thanks for reporting! Closing."}
{"project_id": "Redis", "bug_id": "29", "source_type": "github", "llm_input_text": "[Title]: Redis crashed after a week of uptime. Ran memtest for a few minutes on vm.\n[Symptom]:\n[18952] 14 Dec 16:20:46.191 #     Redis 2.8.22 crashed by signal: 11\n[18952] 14 Dec 16:20:46.191 #     Failed assertion:   ( :0)\n[18952] 14 Dec 16:20:46.191 # --- STACK TRACE\nredis-server *:6379(logStackTrace+0x3e)[ ]\nredis-server *:6379(processCommand+0x1a9)[ ]\n/lib/x86_64-linux-gnu/libpthread.so.0(+ )[ ]\nredis-server *:6379(processCommand+0x1a9)[ ]\nredis-server *:6379(processInputBuffer+0x51)[ ]\nredis-server *:6379(readQueryFromClient+0xbd)[ ]\nredis-server *:6379(aeProcessEvents+0x230)[ ]\nredis-server *:6379(aeMain+0x2b)[ ]\nredis-server *:6379(main+0x31e)[ ]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xfd)[ ]\nredis-server *:6379[ ]\n[18952] 14 Dec 16:20:46.191 # --- INFO OUTPUT\n[18952] 14 Dec 16:20:46.191 # # Server\nredis_version:2.8.22\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:standalone\nos:Linux 3.2.0-4-amd64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.7.2\nprocess_id:18952\nrun_id: \ntcp_port:6379\nuptime_in_seconds:1465093\nuptime_in_days:16\nhz:10\nlru_clock:7249656\nconfig_file:/etc/fk-3p-redis/redis-server.conf\n# Clients\n\nconnected_clients:78\nclient_longest_output_list:17815\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:4999941976\nused_memory_human:4.66G\nused_memory_rss:3472392192\nused_memory_peak:5077248952\nused_memory_peak_human:4.73G\nused_memory_lua:36864\nmem_fragmentation_ratio:0.69\nmem_allocator:jemalloc-3.6.0\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:3991\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1450090023\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:2\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\naof_last_write_status:ok\n# Stats\n\ntotal_connections_received:1200\ntotal_commands_processed:1266751737\ninstantaneous_ops_per_sec:74\ntotal_net_input_bytes:219451461936\ntotal_net_output_bytes:39608808420918\ninstantaneous_input_kbps:11.58\ninstanta\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, there are no known bugs that may lead to that AFAIK, so may be an HW failure or a new unknown Redis bug. There are no hints in the stack trace unfortunately. Please could you check if it happens again and post other crash reports? If they all happen at random locations it could be lack of stability of the hardware. Please also could you check with your VM provider if they are using error corrected memory or not?\n- Also could be useful to have the original redis server binary. You may send it to antirez at g-mail citing the issue number in the subject. Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- yeah, this is most likely fixed now (unless there's another bug we didn't spot there).\nI don't think there's any way to avoid this bug, but on the other hand, it seems VERY rare so i doubt you'll see it again.\non the other hand, you'll benefit a lot by upgrading to a more recent version due to other bug fixes.\n- +1 to Oran reasoning. Very rare, if you see it again in a short timeframe maybe is a different bug. However I'm releasing 2.8 and 3.0 new patchlevels in a matter of days, with this fix. I can't do it today because there are pending things in order to release 3.0.6.\n\nYou can either use the latest commit of the `2.8` branch if you want to be sure this bug is fixed in your environment, or also just apply commit e0b7388 in your current tree.\n\nOr wait a few days and install the new 2.8 or 3.0 releases."}
{"project_id": "Redis", "bug_id": "30", "source_type": "github", "llm_input_text": "[Title]: Redis 3.2.3 crashed by signal: 11\n[Symptom]:\nWe have a big redis node in a cluster, and we're resharding it to other nodes. While doing that, we encountered many times the error reported below, which forced us to manually kill the instance using kill -9 and reload it.\r\n\r\nIn normal operation the node has been working for months without any problems. The only special thing about it is that there are some very big keys to migrate; for those usually we expected a timeout in the migration, but previously we didn't have this error which forces us to restart the node.\r\n\r\nresharding log:\r\nMoving slot 7929 from  :  to  : : .................$\r\nMoving slot 7930 from  :  to  : : .................$\r\nMoving slot 7931 from  :  to  : : .................$\r\nMoving slot 7932 from  :  to  : : .................$\r\n[ERR] Calling MIGRATE: Connection timed out\r\n\r\nredis log:\r\n\r\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n29395:M 31 Jan 22:16:03.248 # Redis 3.2.3 crashed by signal: 11\r\n29395:M 31 Jan 22:16:03.248 # Crashed running the instuction at:  \r\n29395:M 31 Jan 22:16:03.248 # Accessing address: (nil)\r\n29395:M 31 Jan 22:16:03.248 # Failed assertion:   ( :0)\r\n... [Log Snipped] ...\n*** Preparing to test memory region 7ffec3a02000 (8192 bytes)\r\n*** Preparing to test memory region 7ffec3a06000 (4096 bytes)\n```\n\n[Context/Logs]:\n- Hello, are you still able to reproduce the problem in your environment? That would be very useful. Thanks!\n- Hi Salvatore\r\n\r\nWe stopped resharding the data because this happened quite a few times, but we didn't change anything since then so I'm pretty sure it would happen again if we tried. Did you publish anything new in the meantime? We could restart the sharding, but as it takes a few hours to reload this too big instance when it crashes, I'd rather not do it just to see if it will crash again...\r\n\r\nLet me know if you want any additional details.\n- ... [Middle Discussions Snipped for Brevity] ...\n- UPDATE: disassembling the `redis-server` executable it is quite clear that the problem is that the `port` parameter of the function is NULL. Should be easy to understand why, so I'm going to figure out when this happens.\n- Hello again @danmaz74 and @damaru00. I just tracked the bug cause and I'm preparing a fix. It looks like that regardless of the bug, that crashed the server, the migration is not going to work anyway because of a connection error happening while the big key is being migrated, but we can investigate this later as a second step after you upgrade the instance to a version that no longer crashes :-)"}
{"project_id": "Redis", "bug_id": "31", "source_type": "github", "llm_input_text": "[Title]: MEMORY USAGE   crashes\n[Symptom]:\nmemory usage on custom type crashes redis.\r\n\r\nredis crash output: \r\n\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n9197:M 25 Nov 15:44:22.529 # ------------------------------------------------\r\n9197:M 25 Nov 15:44:22.529 # !!! Software Failure. Press left mouse button to continue\r\n9197:M 25 Nov 15:44:22.529 # Guru Meditation: \"Unknown object type\" #object.c:790\r\n9197:M 25 Nov 15:44:22.529 # (forcing SIGSEGV in order to print the stack trace)\r\n9197:M 25 Nov 15:44:22.529 # ------------------------------------------------\r\n9197:M 25 Nov 15:44:22.529 # Redis 999.999.999 crashed by signal: 11\r\n9197:M 25 Nov 15:44:22.529 # Crashed running the instuction at:  \r\n9197:M 25 Nov 15:44:22.529 # Accessing address:  \r\n9197:M 25 Nov 15:44:22.529 # Failed assertion:   ( :0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(_serverPanic+0x7a)[ ]\r\n\r\nBacktrace:\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(logStackTrace+0x29)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(sigsegvHandler+0xac)[ ]\r\n/lib64/libpthread.so.0(+ )[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(_serverPanic+0x7a)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(objectComputeSize+0x663)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(memoryCommand+0x3f9)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(call+0x9e)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(processCommand+0x367)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(processInputBuffer+0x105)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(aeProcessEvents+0x218)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(aeMain+0x2b)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379(main+0x41d)[ ]\r\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\r\n/mnt/disk/training/redis/redis.my/src/redis-server *:6379[ ]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_ver\n...[Description Truncated]...\n"}
{"project_id": "Redis", "bug_id": "32", "source_type": "github", "llm_input_text": "[Title]: crash report on hyperloglog\n[Symptom]:\nHello,\r\n\r\nWe encountered a crash on the official 3.2.6 version when doing a massive pressure testing,\r\nThe case is that we are operating random keys with different types, for example, using a list set with a string get, which is very unpredictable.\r\n\r\n3.2.6 crashes quickly when using a pfadd that operating on a string key,\r\nin `isHLLObjectOrReply`, it crashed on line `if (hdr->magic[0] != 'H' || hdr->magic[1] != 'Y'`, by decoding the assembly, the hdr is  ,\r\n\r\n```\n   :\tcallq     \r\n      :\tcmp    $0xf,%rax\r\n      :\tjbe       \r\n      :\tmov    0x8(%rbx),%rax\r\n      :\tcmpb   $0x48,(%rax)     // testing H\r\n... [Log Snipped] ...\n      :\tjne       \r\n      :\tcmpb   $0x4c,0x2(%rax)\n```\r\n\r\nStack report is listed below(IPs are replaced as xxx due to publish policy)\r\n\r\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n69277:M 19 Jan 20:13:32.284 # Redis 3.2.6 crashed by signal: 11\r\n69277:M 19 Jan 20:13:32.284 # Crashed running the instuction at:  \r\n69277:M 19 Jan 20:13:32.284 # Accessing address: (nil)\r\n69277:M 19 Jan 20:13:32.284 # Failed assertion:   ( :0)\r\n... [Log Snipped] ...\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n```\r\n\r\nIn our test, it could be triggered 100% percent when running test in a couple of minutes, I think this issue could be serious because it could trigger the DoS by crashing services, feel free to hide it if possible until rc found.\r\n\r\nThanks,\r\nBaron\n\n[Context/Logs]:\n- Hello, thank you. I too think it's the case to fix it by making sure HyperLogLog commands can be called against untrusted input without issues. Thanks for reporting.\n- I saw 3.2.7 was released, is it fixed by upgrading?\n- Hello @wangruowr, bug fixed. The fix will be released in the next 3.2 patch level release and in 4.0.0 which is due 14th of July. Thanks.\n- Thank for the notice!"}
{"project_id": "Redis", "bug_id": "33", "source_type": "github", "llm_input_text": "[Title]: Redis 4.x lazyfree: memory leak may happen when free slowlog entry\n[Symptom]:\nHi,\r\n\r\nLazyfree is an amazing feature, redis can delete keys in background without blocking, but I just find a problem which can lead to memory leak.\r\n\r\nWe just use `sds` instead of `robj` to store fields for `OBJ_HASH`, `OBJ_SET`, `OBJ_ZSET`, `OBJ_LIST`. But for `OBJ_STRING` the value is still `robj`, it may be shared with others, e.t. slowlog entry:\r\n```\nslowlog.c\r\nslowlogEntry *slowlogCreateEntry(client *c, robj **argv, int argc, long long duration) {\r\n    ...\r\n            /* Trim too long strings as well... */\r\n            if (argv[j]->type == OBJ_STRING &&\r\n... [Log Snipped] ...\n    ...\r\n}\n```\r\nOops, if `sdslen` is smaller than SLOWLOG_ENTRY_MAX_STRING, an `slowlogEntry` just point to the same object and incr the refcount.\r\n\r\nI just did an experiment:\r\n```\r\n :6379> config set slowlog-log-slower-than 1\r\nOK\r\n :6379> set foo bar\r\nOK\r\n :6379> object refcount foo\r\n(integer) 2\r\n```\r\nThe refcount is 2 now, that is dangerous! Memory leak may happen, let me explain step by step:\r\n\r\n1. Do `FLUSHALL ASYNC` or `UNLINK` \r\n\r\n\r\n    Now, the bio `lazyfree` thread holds the value `bar`, but we don't know when it really call `decrRefCount()`.\r\n\r\n2. Do `SLOWLOG reset`\r\n\r\n    Now the `slowlogEntry` which point to the value `bar` will be freed by `decrRefCount()`, if `lazyfree` thread call `decrRefCount()` at the same time, memory leak appears:\r\n\r\n    ```\nvoid decrRefCount(robj *o) {\r\n        if (o->refcount == 1) {\r\n            switch(o->type) {\r\n            case OBJ_STRING: freeStringObject(o); break;\r\n            case OBJ_LIST: freeListObject(o); break;\r\n... [Log Snipped] ...\n        }\r\n    }\n```\r\n\r\n\r\nI just do a little change to fix it, see #4324, do you think it is ok? Or make a big change for all STRING commands is necessary?\n\n[Context/Logs]:\n- That's a very interesting finding @soloestoy! I never thought that string objects could be reclaimed in the background, because normally UNLINK will never do that since for non-aggregate objects, the deletion actually happens synchronously (because of the deallcation effort being 1). However as you noted FLUSHALL ASYNC changes the game here... Your fix seems sensible to me, but now what I'm worried about, is if there are other places where the object can end being shared. The client `argv` vector should be safe since, as soon as the command is executed and the object shared, the client argument vectors gets reset before any other client could call FLUSHALL. Did you tried to analyze other scenarios where this could happen? Thanks.\n- I have checked scenarios about `multi.c` and `script.c`, I think they are safe and will do my best to analyze other scenarios.\n- Thanks @soloestoy, maybe we can later identify some place where an assert() could be added to verify that refcount == 1.\n- Fix merged, comment clarified. Good work \ud83d\udc4d"}
{"project_id": "Redis", "bug_id": "34", "source_type": "github", "llm_input_text": "[Title]: Crash on XREAD (streams branch)\n[Symptom]:\nCompiled on vanilla ubuntu 16.04, using commit 2970181ff236f5.\r\n\r\n```\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n29240:M 08 Nov 17:45:41.889 # Redis 999.999.999 crashed by signal: 11\r\n29240:M 08 Nov 17:45:41.889 # Crashed running the instuction at:  \r\n29240:M 08 Nov 17:45:41.889 # Accessing address:  \r\n29240:M 08 Nov 17:45:41.889 # Failed assertion:   ( :0)\r\n... [Log Snipped] ...\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n```\n\n[Context/Logs]:\n- Thank you @nicois, do you know exactly what keys existed among the three mentioned in the command execution when you ran it? Thanks.\n- I don't fully understand the RDB binary structure, but I'm 90% sure it only had the notes_1 stream defined.\r\n\r\n\r\n$ grep schedule_1 /var/redis/6400/dump.rdb.crashing \r\n$ grep notes_1 /var/redis/6400/dump.rdb.crashing \r\nBinary file /var/redis/6400/dump.rdb.crashing matches\r\n$ grep patient_1 /var/redis/6400/dump.rdb.crashing\n- ... [Middle Discussions Snipped for Brevity] ...\n- Ok there is a problem in listpack.c with strings with the 32 bit length encoding. Unfortunately even fixing the bug the fuzz tester is still reporting failures, so I've to investigate better what is happening. The listpack fuzz tester was yet not finished and it was not able to stress certain encoding types. I'll fix upstream in antirez/listpack directly and back port the fix here. Please note: **the data structure itself generated by XADD** is broken, so fixing this bug will not fix the data, that will have to be re-created from scratch. I can already say this because of the bug I already found, regardless of the next one (fund by the fuzzer) that is still pending.\n- Problem fixed, thank you @nicois @forkfork"}
{"project_id": "Redis", "bug_id": "35", "source_type": "github", "llm_input_text": "[Title]: Master is not configured as Slave after failure and reboot\n[Symptom]:\nI had thought that Sentinel would (after a master crashed), wait for the old master to come back online, when it detects it, it would configure it to be the slave of the newly promoted master.\n\nI see this on the main documentation for Sentinel:\n\"Moreover, after a failover, the failed over master is virtually added as a slave of the new master, this way it will be reconfigured to replicate with the new master as soon as it will be available again.\"\n\nWe're using version \"3.2.0-1.el6.remi\".   We carried out this test as a way to smoke test our installation\\configuration was correct, but are left a bit puzzled as the slave is promoted to master, but when we restart the redis server on the old master, it never gets its configuration updated (to configure it as a slave).  It seems like Sentinel has stopped monitoring it.\n\nCould I get a comment from the Redis team, is this a bug?\n\n[Context/Logs]:\n- Apparently this was not a problem in redis sentinel version 3.0.7\n- Same issue here, reported in /r/redis: [URL]\n- ... [Middle Discussions Snipped for Brevity] ...\n- On top of that note that, actually, it is not possible to reset `pending_commands` in `instanceLinkConnectionError()`, since this gets called only in the context of an error reported by hiredis. If we reset the count there, the hiredis callback, after returning, will process the pending requests that will contain `pending_commands--` in order to report back the count to 0, so we'll get negative pending commands count.\n\nApparently the best strategy appears to do that on reconnection instead:\n\n```\ndiff\ndiff --git a/src/sentinel.c b/src/sentinel.c\nindex 6c48f3e..f8ebd0c 100644\n--- a/src/sentinel.c\n+++ b/src/sentinel.c\n... [Log Snipped] ...\n             link->cc->data = link;\n             redisAeAttach(server.el,link->cc);\n```\n- Thanks antirez and sskorgal.\n\nI have tested it out and can confirm that its fixed in 3.2.1, thanks again."}
{"project_id": "Redis", "bug_id": "36", "source_type": "github", "llm_input_text": "[Title]: 3.2.1 crash when as slave node sync with master\n[Symptom]:\nlog as below:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n27648:S 24 Jun 12:16:32.265 # Redis 3.2.1 crashed by signal: 11\n27648:S 24 Jun 12:16:32.265 # Crashed running the instuction at:  \n27648:S 24 Jun 12:16:32.265 # Accessing address:  \n27648:S 24 Jun 12:16:32.265 # Failed assertion:   ( :0)\n\n------ STACK TRACE ------\nEIP:\n./redis-server *:6400 [cluster][ ]\n\nBacktrace:\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libpthread.so.0(+ )[ ]\n./redis-server *:6400 [cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\n./redis-server *:6400 [cluster][ ]\n\n------ INFO OUTPUT ------\n# Server\n\nredis_version:3.2.1\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:cluster\nos:Linux 3.10.0-123.el7.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.8.3\nprocess_id:27648\nrun_id: \ntcp_port:6400\nuptime_in_seconds:329\nuptime_in_days:0\nhz:10\nlru_clock:7124000\nexecutable:/home/redis/redis-3.2.1/src/./redis-server\nconfig_file:/home/redis/redis-3.2.1/redis.conf\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:14962\nblocked_clients:0\n# Memory\n\nused_memory:2989199160\nused_memory_human:2.78G\nused_memory_rss:3073859584\nused_memory_rss_human:2.86G\nused_memory_peak:2989199160\nused_memory_peak_human:2.78G\ntotal_system_memory:16609554432\ntotal_system_memory_human:15.47G\nused_memory_lua:37888\nused_memory_lua_human:37.00K\nmaxmemory:0\nmaxmemory_human:0B\nmaxmemory_policy:noeviction\nmem_fragmentation_ratio:1.03\nmem_allocator:jemalloc-4.0.3\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:14\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1466741463\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, unfortunately the binary is stripped so there are no symbols to understand exactly where this happened. Please could you send the Redis binary you are using? Thanks.\n\nThis bug could actually be in different places:\n1. Cluster\n2. Replication\n3. List data type implementation, that with quicklists, changed recently (in 3.2)\n\nThe binary can give us some clue.\n- [Image: redis-server]\n@antirez ,give this binary file and I have to modify file name to *.jpg for upload to git.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I put my money on `ziplistMerge()`. Will check carefully monday.\n- @luweijie007 please could you tell me all the list commands you use in the master in order to populate the list? Thanks."}
{"project_id": "Redis", "bug_id": "37", "source_type": "github", "llm_input_text": "[Title]: Redis 5.9.101 crashed by signal: 8\n[Symptom]:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n29427:M 01 Jan 2020 15:21:12.961 # Redis 5.9.101 crashed by signal: 8\r\n29427:M 01 Jan 2020 15:21:12.961 # Crashed running the instruction at:  \r\n29427:M 01 Jan 2020 15:21:12.961 # Failed assertion:   ( :0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/usr/bin/redis-server  :6379(activeExpireCycle+0x309)[ ]\r\n\r\nBacktrace:\r\n/usr/bin/redis-server  :6379(logStackTrace+0x40)[ ]\r\n/usr/bin/redis-server  :6379(sigsegvHandler+0xb1)[ ]\r\n/lib64/libpthread.so.0(+ )[ ]\r\n/usr/bin/redis-server  :6379(activeExpireCycle+0x309)[ ]\r\n/usr/bin/redis-server  :6379(databasesCron+0xef)[ ]\r\n/usr/bin/redis-server  :6379(serverCron+0x242)[ ]\r\n/usr/bin/redis-server  :6379(aeProcessEvents+0x49a)[ ]\r\n/usr/bin/redis-server  :6379(aeMain+0x2b)[ ]\r\n/usr/bin/redis-server  :6379(main+0x3fa)[ ]\r\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\r\n/usr/bin/redis-server  :6379(+ )[ ]\r\n\r\n------ INFO OUTPUT ------\r\n# Server\r\nredis_version:5.9.101\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id: \r\nredis_mode:standalone\r\nos:Linux 3.10.0-1062.9.1.el7.x86_64 x86_64\r\narch_bits:64\r\nmultiplexing_api:epoll\r\natomicvar_api:atomic-builtin\r\ngcc_version:8.3.1\r\nprocess_id:29427\r\nrun_id: \r\ntcp_port:6379\r\nuptime_in_seconds:235433\r\nuptime_in_days:2\r\nhz:10\r\nconfigured_hz:10\r\nlru_clock:808568\r\nexecutable:/usr/bin/redis-server\r\nconfig_file:/etc/redis.conf\r\n\r\n# Clients\r\nconnected_clients:0\r\nclient_recent_max_input_buffer:2\r\nclient_recent_max_output_buffer:131096\r\nblocked_clients:0\r\ntracking_clients:0\r\n\r\n# Memory\r\nused_memory:55228952\r\nused_memory_human:52.67M\r\nused_memory_rss:142626816\r\nused_memory_rss_human:136.02M\r\nused_memory_peak:121579712\r\nused_memory_peak_human:115.95M\r\nused_memory_peak_perc:45.43%\r\nused_memory_overhead:7919312\r\nused_memory_startup:802472\r\nused_memory_dataset:47309640\r\nused_memory_dataset_perc:86.92%\r\nallocator_allocated:55368336\r\nallocator_active:56979456\r\nallocator_resident:64991232\r\ntotal_system_memory:3973365760\r\ntotal_system_memory_human:3.\n...[Description Truncated]...\n\n[Context/Logs]:\n- Looks trivial to fix, thank you. Related to the new expires code.\n- Hopefully fixed in 0af467d1."}
{"project_id": "Redis", "bug_id": "38", "source_type": "github", "llm_input_text": "[Title]: redis-server crash w/strack trace...\n[Symptom]:\nI haven't quite updated to 2.4.0 yet but was running 2.3.10 in production and lost one earlier.\n\n[17466] 15 Oct 07:05:25 # ======= Ooops! Redis 2.3.10 got signal: -11- =======\n[17466] 15 Oct 07:05:25 # redis_version:2.3.10^M\nredis_git_sha1:00000000^M\nredis_git_dirty:0^M\narch_bits:64^M\nmultiplexing_api:epoll^M\nprocess_id:17466^M\nuptime_in_seconds:1353855^M\nuptime_in_days:15^M\nlru_clock:1845328^M\nused_cpu_sys:8926.23^M\nused_cpu_user:12859.53^M\nused_cpu_sys_children:70.14^M\nused_cpu_user_children:22.71^M\nconnected_clients:1^M\nconnected_slaves:1^M\nclient_longest_output_list:0^M\nclient_biggest_input_buf: ^M\nblocked_clients:0^M\nused_memory:8472278192^M\nused_memory_human:7.89G^M\nused_memory_rss:6308675584^M\nused_memory_peak:8472286720^M\nused_memory_peak_human:7.89G^M\nmem_fragmentation_ratio:0.74^M\nmem_allocator:jemalloc-2.2.1^M\nloading:0^M\naof_enabled:0^M\nchanges_since_last_save:210^M\nbgsave_in_progress:0^M\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\n\nlast_save_time:1318611938^M\nbgrewriteaof_in_progress:0^M\ntotal_connections_received:91901^M\ntotal_commands_processed:284065681^M\nexpired_keys:0^M\nevicted_keys:0^M\nkeyspace_hits:97704116^M\nkeyspace_misses:28609668^M\nhash_max_zipmap_entries:512^M\nhash_max_zipmap_value:512^M\npubsub_channels:0^M\npubsub_patterns:0^M\nlatest_fork_usec:242\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(memcpy+0xe1) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(sdscatlen+0x54) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(readQueryFromClient+0x33) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeProcessEvents+0x16e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(aeMain+0x2e) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server(main+0xf9) [ ]\n[17466] 15 Oct 07:05:25 # /lib64/libc.so.6(__libc_start_main+0xe6) [ ]\n[17466] 15 Oct 07:05:25 # /usr/bin/redis-server [ ]\n\n[Context/Logs]:\n- Thank you Jeremy,\n\nplease if it is easy for you to obtain it could you send the exact git commit that you were using, and if possible even the redis-server executable itself? Thanks!\n- Argh.  I can get the binary, yes.  But apparently there's a step in the build process I've been using (only when building from the git repo) that removes the git info along the way.  That's fixed now but I can say exactly which 2.3.10 this was.\n\n[URL]\n\nThat's the binary that was running.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Hi Antirez and Jeremy!\n\nToday we faced the same problem on one slave of our prod environment only few minutes after it start:\n\n \n[14532] 21 Nov 11:49:40 # ======= Ooops! Redis 2.4.2 got signal: -11- =======\n[14532] 21 Nov 11:49:40 # redis_version:2.4.2\nredis_git_sha1:00000000\nredis_git_dirty:0\narch_bits:64\nmultiplexing_api:epoll\nprocess_id:14532\nuptime_in_seconds:2385\nuptime_in_days:0\nlru_clock:67042\nused_cpu_sys:127.59\nused_cpu_user:44.75\nused_cpu_sys_children:4.84\nused_cpu_user_children:1.77\nconnected_clients:20\nconnected_slaves:0\nclient_longest_output_list:0\nclient_biggest_input_buf: \nblocked_clients:0\nused_memory:31861605448\nused_memory_human:29.67G\nused_memory_rss:30233288704\nused_memory_peak:31861605448\nused_memory_peak_human:29.67G\nmem_fragmentation_ratio:0.95\nmem_allocator:jemalloc-2.2.1\nloading:0\naof_enabled:0\nchanges_since_last_save:60\nbgsave_in_progress:0\nlast_save_time:1321873795\nbgrewriteaof_in_progress:0\ntotal_connections_received:119\ntotal_comm\n...[Text Truncated]...\n# /lib/libc.so.6(memcpy+0xe1) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(sdscatlen+0x54) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(readQueryFromClient+0x33) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeProcessEvents+0x16e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(aeMain+0x2e) [ ]\n[14532] 21 Nov 11:49:40 # redis-server(main+0xf9) [ ]\n[14532] 21 Nov 11:49:40 # /lib/libc.so.6(__libc_start_main+0xe6) [ ]\n[14532] 21 Nov 11:49:40 # redis-server [ ]\n \n\nAs the crash log shows:\n- We are using Redis 2.4.2.\n- This instance was only a slave (it might have recieved some \"SET\" command from some clients).\n- The input buffer seems to be huge too ^^\n\nI don't know if it can help you, but unlike Jeremy, we are not using ZSet, and we didn't have any monitoring tools on that slave.\nDo not hesitate to ask me if you have any questions about our redis setup.\n\nRegards,\n\nBaptiste.\n- Thanks this is definitely the same bug, but the fact that it is just a slave makes things a bit different.\nAlso it does not help that Redis truncates INFO outputs in stack traces... (fixing that as well, already fixed into unstable).\n\nBtw the changes I'm doing should provide a lot more background when the input or output buffer overflows... doing the changes right now. I'll update this issue soon.\n\nBtw in my reasoning early in this thread I completely missed that even in the Jeremy case the overflow is happening in the INPUT buffer of the client and not in the output buffer, this changes a few things...\n\nMore news soon."}
{"project_id": "Redis", "bug_id": "39", "source_type": "github", "llm_input_text": "[Title]: 3.2.1 crash when as slave node sync with master\n[Symptom]:\nlog as below:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n27648:S 24 Jun 12:16:32.265 # Redis 3.2.1 crashed by signal: 11\n27648:S 24 Jun 12:16:32.265 # Crashed running the instuction at:  \n27648:S 24 Jun 12:16:32.265 # Accessing address:  \n27648:S 24 Jun 12:16:32.265 # Failed assertion:   ( :0)\n\n------ STACK TRACE ------\nEIP:\n./redis-server *:6400 [cluster][ ]\n\nBacktrace:\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libpthread.so.0(+ )[ ]\n./redis-server *:6400 [cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\n./redis-server *:6400 [cluster][ ]\n\n------ INFO OUTPUT ------\n# Server\n\nredis_version:3.2.1\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:cluster\nos:Linux 3.10.0-123.el7.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.8.3\nprocess_id:27648\nrun_id: \ntcp_port:6400\nuptime_in_seconds:329\nuptime_in_days:0\nhz:10\nlru_clock:7124000\nexecutable:/home/redis/redis-3.2.1/src/./redis-server\nconfig_file:/home/redis/redis-3.2.1/redis.conf\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:14962\nblocked_clients:0\n# Memory\n\nused_memory:2989199160\nused_memory_human:2.78G\nused_memory_rss:3073859584\nused_memory_rss_human:2.86G\nused_memory_peak:2989199160\nused_memory_peak_human:2.78G\ntotal_system_memory:16609554432\ntotal_system_memory_human:15.47G\nused_memory_lua:37888\nused_memory_lua_human:37.00K\nmaxmemory:0\nmaxmemory_human:0B\nmaxmemory_policy:noeviction\nmem_fragmentation_ratio:1.03\nmem_allocator:jemalloc-4.0.3\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:14\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1466741463\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, unfortunately the binary is stripped so there are no symbols to understand exactly where this happened. Please could you send the Redis binary you are using? Thanks.\n\nThis bug could actually be in different places:\n1. Cluster\n2. Replication\n3. List data type implementation, that with quicklists, changed recently (in 3.2)\n\nThe binary can give us some clue.\n- [Image: redis-server]\n@antirez ,give this binary file and I have to modify file name to *.jpg for upload to git.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I put my money on `ziplistMerge()`. Will check carefully monday.\n- @luweijie007 please could you tell me all the list commands you use in the master in order to populate the list? Thanks."}
{"project_id": "Redis", "bug_id": "40", "source_type": "github", "llm_input_text": "[Title]: Potential Buffer Overflow from user-controllable Array Index value\n[Symptom]:\nThe _clusterLoadConfig_ function within _/redis/src/cluster.c_ seems to allow for a Buffer Overflow vulnerability leading from an array index being set from user-controllable input. The vulnerable code is:\r\n\r\n```\ndirection = p[1]; /* Either '>' or ' importing_slots_from[slot] = cn;\r\n}\n```\r\n\r\nAs we can see, the _slot_ variable is receiving the output of atoi being run here: `slot = atoi(argv[j]+1);`\r\n\r\nNow, _argv[j]_ is basically the arguments of each line (stored in _line[]_) being put into the array using _sdssplitargs_ for further processing.\r\n\r\nThe slot value, after being extracted is then used in the _if-else_ block which controls the slot migration, i.e. `server.cluster->migrating_slots_to[slot] = cn;` and `server.cluster->importing_slots_from[slot] = cn;`.\r\n\r\nIt is safe to assume that a user won't try to put in invalid slot numbers in the cluster configuration file. However, an attacker with limited access to the machine would be able to trigger memory corruption issues or even potentially execute code by forcing an Array Index out of Bounds exception from happening due to invalid values of _slot_. There should be some validation on the value of _slot_ and the maximum length of the _migrating_slots_to_ and _migrating_slots_from_ arrays.\n\n[Context/Logs]:\n- Was this confirmed as a bug that needs to be fixed?\n- This issue has been assigned [Link: CVE-2017-15047]\n- ... [Middle Discussions Snipped for Brevity] ...\n- Note that there is another similar bug here as well:\r\n\r\n```\r\n                start = atoi(argv[j]);\r\n                stop = atoi(p+1);\r\n            } else {\r\n                start = stop = atoi(argv[j]);\r\n            }\r\n            while(start <= stop) clusterAddSlot(n, start++);\r\n```\n- Bug fixed in all the branches. I think the bug is exploitable, because you can basically write the address of a Cluster node structure everywhere in the process memory. So the attacker may:\r\n\r\n1. Modify the nodes.conf so that a node is loaded with the ID containing actually a sequence which is executable.\r\n2. Being the node ID almost the first field of the structure (the second actually), we could set the address in a place (like a function pointer) so that the execution of the program will jump there.\r\n\r\nThe problem with this approach is that there is the `ctime` field as the first member of the structure, so there are 8 initial bytes the user cannot completely control, however probably there is some way to still exploit the bug, for instance by also using the other `clusterAddSlot()` call to selectively alter the last byte bits of the return address or alike. Did not investigate very carefully but in general it looks exploitable with efforts."}
{"project_id": "Redis", "bug_id": "41", "source_type": "github", "llm_input_text": "[Title]: 3.2.1 crash when as slave node sync with master\n[Symptom]:\nlog as below:\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n27648:S 24 Jun 12:16:32.265 # Redis 3.2.1 crashed by signal: 11\n27648:S 24 Jun 12:16:32.265 # Crashed running the instuction at:  \n27648:S 24 Jun 12:16:32.265 # Accessing address:  \n27648:S 24 Jun 12:16:32.265 # Failed assertion:   ( :0)\n\n------ STACK TRACE ------\nEIP:\n./redis-server *:6400 [cluster][ ]\n\nBacktrace:\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libpthread.so.0(+ )[ ]\n./redis-server *:6400 [cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n./redis-server *:6400 [Link: cluster][ ]\n/lib64/libc.so.6(__libc_start_main+0xf5)[ ]\n./redis-server *:6400 [cluster][ ]\n\n------ INFO OUTPUT ------\n# Server\n\nredis_version:3.2.1\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id: \nredis_mode:cluster\nos:Linux 3.10.0-123.el7.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.8.3\nprocess_id:27648\nrun_id: \ntcp_port:6400\nuptime_in_seconds:329\nuptime_in_days:0\nhz:10\nlru_clock:7124000\nexecutable:/home/redis/redis-3.2.1/src/./redis-server\nconfig_file:/home/redis/redis-3.2.1/redis.conf\n# Clients\n\nconnected_clients:2\nclient_longest_output_list:0\nclient_biggest_input_buf:14962\nblocked_clients:0\n# Memory\n\nused_memory:2989199160\nused_memory_human:2.78G\nused_memory_rss:3073859584\nused_memory_rss_human:2.86G\nused_memory_peak:2989199160\nused_memory_peak_human:2.78G\ntotal_system_memory:16609554432\ntotal_system_memory_human:15.47G\nused_memory_lua:37888\nused_memory_lua_human:37.00K\nmaxmemory:0\nmaxmemory_human:0B\nmaxmemory_policy:noeviction\nmem_fragmentation_ratio:1.03\nmem_allocator:jemalloc-4.0.3\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:14\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1466741463\n...[Description Truncated]...\n\n[Context/Logs]:\n- Hello, unfortunately the binary is stripped so there are no symbols to understand exactly where this happened. Please could you send the Redis binary you are using? Thanks.\n\nThis bug could actually be in different places:\n1. Cluster\n2. Replication\n3. List data type implementation, that with quicklists, changed recently (in 3.2)\n\nThe binary can give us some clue.\n- [Image: redis-server]\n@antirez ,give this binary file and I have to modify file name to *.jpg for upload to git.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I put my money on `ziplistMerge()`. Will check carefully monday.\n- @luweijie007 please could you tell me all the list commands you use in the master in order to populate the list? Thanks."}
{"project_id": "Redis", "bug_id": "42", "source_type": "github", "llm_input_text": "[Title]: [CRASH] SIGSEGV in addReplySubcommandSyntaxError at networking.c:966\n[Symptom]:\n**Crash report**\r\n```\n13664:C 07 Jan 2022 21:21:36.403 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n13664:C 07 Jan 2022 21:21:36.404 # Redis version=255.255.255, bits=64, commit=00000000, modified=0, pid=13664, just started\r\n13664:C 07 Jan 2022 21:21:36.404 # Warning: no config file specified, using the default config. In order to specify a config file use ./redis-server /path/to/redis.conf\r\n13664:M 07 Jan 2022 21:21:36.405 * Increased maximum number of open files to 10032 (it was originally set to 1024).\r\n13664:M 07 Jan 2022 21:21:36.406 * monotonic clock: POSIX clock_gettime\r\n... [Log Snipped] ...\n      _.-``    `.  `_.  ''-._           Redis 255.255.255 (00000000/0) 64 bit\r\n  .-`` .-\n```.  ```\n\\/    _.,_ ''-._\r\n (    '      ,       .-`  | `,    )     Running in standalone mode\r\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\r\n |    `-._   `._    /     _.-'    |     PID: 13664\r\n  `-._    `-._  `-./  _.-'    _.-'\r\n... [Log Snipped] ...\n*** Preparing to test memory region 7ff92cc90000 (8192 bytes)\r\n.Segmentation fault (core dumped)\n```\r\n\r\n**Additional information**\r\n\r\n1. OS distribution and version\r\n   unstable branch,  commit #5460c10  (2022-1-3)\r\n2. Steps to reproduce (if any)\r\n\r\n(a) Download the latest code and compile\r\n(b) Run  ./redis-server in one console\r\n(c) Download the input file:\r\n[URL]\r\n(d) Open another console and run  nc with the input file like:\r\nnc   6379 < \"./crash_addReplySubcommandSyntaxError\"\r\n(e) The server crashes.\r\n\r\n3. GDB output if we use gdb ./redis-server \r\n```\ngdb ./redis-server\r\nGNU gdb (Ubuntu 8.1-0ubuntu3.1) 8.1.0.20180409-git\r\nCopyright (C) 2018 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <[URL]\r\nThis is free software: you are free to change and redistribute it.\r\n... [Log Snipped] ...\n      _.-``    `.  `_.  ''-._           Redis 255.255.255 (00000000/0) 64 bit\r\n  .-`` .-\n```.  ```\n\\/    _.,_ ''-._\r\n (    '      ,       .-`  | `,    )     Running in standalone mode\r\n |`-._`-...-` __...-.``-._|'` _\n...[Description Truncated]...\n\n[Context/Logs]:\n- It looks like every command ending with `|` (or contains it, split(\"|\"), then length == 2) will crash (unstable branch)\r\n```\r\n :6379> scard|\r\nError: Server closed the connection\r\n :6379> set|\r\nError: Server closed the connection\r\n :6379> get|\r\nError: Server closed the connection\r\nnot connected> get|set\r\nError: Server closed the connection\r\n```\r\n\r\nin normal way, we need to return ASAP with `(error) ERR unknown command` error, like\r\n```\r\n :6379> getaaa\r\n(error) ERR unknown command 'getaaa', with args beginning with:\r\n :6379> get|anything|aaa\r\n(error) ERR unknown command 'get|anything|aaa', with args beginning with:\r\n```\r\n\r\nit pass `(error) ERR unknown command` check, and finally crash in here, `c->argv[1]` is NULL\r\n```\r\naddReplySubcommandSyntaxError\r\n    addReplyErrorFormat(c,\r\n        \"Unknown subcommand or wrong number of arguments for '%s'. Try %s HELP.\",\r\n        (char*)c->argv[1]->ptr,cmd);\r\n```\r\n\r\nintroduced in #9504 \r\n`get|` or `get|anythings` sdssplitlen make argv[0] became a valid command name, and then need to checks the subscommand\r\n```\nstruct redisCommand *lookupCommandBySdsLogic(dict *commands, sds s) {\r\n    int argc, j;\r\n    sds *strings = sdssplitlen(s,sdslen(s),\"|\",1,&argc);           ->>>>>>>>>>> here\r\n    if (strings == NULL)\r\n        return NULL;\r\n... [Log Snipped] ...\n    return cmd;\r\n}\n```\r\n\r\nSo i think a easy(quick) way to fix it is:\r\n```\n :6379> get|set\r\n(error) ERR unknown command 'get|set'.\r\n\r\ndiff:\r\n void addReplySubcommandSyntaxError(client *c) {\r\n... [Log Snipped] ...\n     sdsfree(cmd);\r\n }\n```\r\n\r\nneeded @oranagra @guybe7 check it again.\n- @zyingp for reporting.\r\n@enjoy-binbin your fix seems ok, maybe i would also limit the length of the reply, in case argv[1] is too long.\r\nhowever, i also wonder why at all we need to reach that function in this case.\r\n```\nc\r\n    c->cmd = c->lastcmd = lookupCommand(c->argv,c->argc);\r\n    if (!c->cmd) {\r\n        if (lookupCommandBySds(c->argv[0]->ptr)) {\r\n            /* If we can't find the command but argv[0] by itself is a command\r\n... [Log Snipped] ...\n            return C_OK;\r\n        }\n```\r\n1. i don't think in this case we need to split the string with `|`, but rather just look in the commands dict to find if `argv[0]` is a container command (not `lookupCommandBySds`).\r\n2. i think we may prefer to error using `rejectCommand` (important in case we're inside a transaction)\r\n\r\nplease make a PR."}
{"project_id": "Redis", "bug_id": "43", "source_type": "github", "llm_input_text": "[Title]: EVAL replicated + conditionals about key existence = replication bug.\n[Symptom]:\nLua scripts may contain conditionals in order to run or not commands depending on the existence or not of keys. For example let's examine the following Lua script:\n\n```\nif redis.call(\"exists\",KEYS[1]) == 1\nthen\n    redis.call(\"incr\",\"mycounter\")\nend\n\n... [Log Snipped] ...\n    return redis.call(\"incr\",\"mycounter\")\nend\n```\n\nThe script executes two times the same _if key exists then increment counter_ logic. However the two executions will work differently in the master and the slaves.\n\nIn the master the first time the key may still exist, while the second time the key may no longer exist. This will result in the key incremented just one time. However as a side effect the master will generate a synthetic `DEL` command in the replication channel in order to force the slaves to expire the key (given that key expiration is master-driven).\n\nWhen the same script will run in the slave, the key will no longer be there, so the script will not increment the key.\n\nI reproduced the bug using the above Lua script and the following bash script:\n\n```\n#!/bin/bash\nwhile [ 1 ]\ndo\n    redis-cli set x foo px 100 > /dev/null\n    sleep 0.092\n... [Log Snipped] ...\n    redis-cli -p 6380 get mycounter\ndone\n```\n\nAfter a few iterations the two counters will desynchronized.\n## Proposed fix\n\nMy guess is that the best way to fix this issue is:\n- Don't expire keys when the client performing the lookup is flagged as being a Lua script.\n- However before the script execution, run the expireIfNeeded() function against all the elements in the KEYS[] array (that is, the keys passed to the script).\n\nNote that the second step is not required to guarantee consistency, but is required to guarantee a behavior that makes sense, that is, to expire keys ASAP when possible as the rest of the Redis semantics does.\n\nAn alternative way to address the problem is to replicate raw commands as proposed multiple times. Let's say that I don't believe this alone is sufficient to bias me towards this extreme solution (extre\n...[Description Truncated]...\n\n[Context/Logs]:\n- If your first solution will be used, please make sure this is properly documented. Right now most users come and ask whether KEYS / ARGV seperation is neccessary in their script or not. For simple scripts right now it makes no difference but with this fix it can affect behaviour\n- On second read I'm not even sure your proposed solution works for this case.\nIf I understand correctly when this script is executed on the master, the key is expired between the two if-conditions (resulting in just one `INCR` executed) whereas your proposed solution may remove the key BEFORE the script is executed (and thus `INCR` is never executed in the slave). Am I right here or did I not understand the problem in full?\n- ... [Middle Discussions Snipped for Brevity] ...\n- Two more things:\n- This issue also apply to AOF: reloading the AOF is not able to provide the same identical dataset if stuff expire in the middle of scripts execution.\n- After applying the following patch I verified that I can't trigger the issue again, at least in the specific example I provided above for reproduction:\n\n```\ndiff\ndiff --git a/src/db.c b/src/db.c\nindex b625fea..906acd4 100644\n--- a/src/db.c\n+++ b/src/db.c\n... [Log Snipped] ...\n\n     /* Don't expire anything while loading. It will be done later. */\n```\n- This should be fixed now (for a long time) but the issue remained open. Actually there is even explicit mention of the issue in the source code, but nobody closed this:\r\n\r\n```\r\n   /* If we are in the context of a Lua script, we claim that time is\r\n     * blocked to when the Lua script started. This way a key can expire\r\n     * only the first time it is accessed and not in the middle of the\r\n     * script execution, making propagation to slaves / AOF consistent.\r\n     * See issue #1525 on Github for more information. */\r\n    now = server.lua_caller ? server.lua_time_start : mstime();\r\n```"}
{"project_id": "Redis", "bug_id": "44", "source_type": "github", "llm_input_text": "[Title]: redis rewriting AOF failed and crash\n[Symptom]:\n```\n...\n[9561] 09 Jan 17:10:08.374 * Starting automatic rewriting of AOF on 100% growth\n[9561] 09 Jan 17:10:08.552 * Background append only file rewriting started by pid 29812\n[9561] 09 Jan 17:10:31.007 * Asynchronous AOF fsync is taking too long (disk is busy?). Writing the AOF buffer without waiting for fsync to complete, this ma\ny slow down Redis.\n... [Log Snipped] ...\n[29812] 09 Jan 17:10:47.812 # ( ) ->  \n[29812] 09 Jan 17:10:47.812 #\n```\n\n[Context/Logs]:\n- From the bug report, it is either an issue with the hardware (like a memory error), or a subtle bug in the ziplist implementation.\n\nA few things:\n- Please could you test the system memory and report back?\n- In general the system appears to work well? It is the first time you get a crash?\n\nIf system is ok it's worth investigating the dump of registers and the stack to see if there is some clue about the values that triggered this issue.\n\nThanks for reporting\n- Sorry another question.\n\nFrom your bug report it seems like only the child crashed, so is the instance actually still running?\n\nIn that case, does BGSAVE successfully produce an RDB file, or the child crashes again? Thanks.\n- ... [Middle Discussions Snipped for Brevity] ...\n- Please could you report if this happened again after the first time? Thanks.\n- Can't act for lack of info, closing. Thanks for reporting, please reopen if it happens with a recent Redis 2.6.x release."}
{"project_id": "Redis", "bug_id": "45", "source_type": "github", "llm_input_text": "[Title]: [BUG] Unexpected behavior of XREAD STREAMS stream +\n[Symptom]:\n**Describe the bug**\r\n\r\nAfter last element of stream was removed, `XREAD STREAMS stream +` returns `nil`, but stream is not empty.\r\n\r\n**To reproduce**\r\n\r\n```\n :6379> XADD stream * f 1\r\n\"1730271076300-0\"\r\n :6379> XADD stream * f 2\r\n\"1730271126476-0\"\r\n :6379> XREAD STREAMS stream +\r\n... [Log Snipped] ...\n(nil)\r\n :6379>\n```\r\n\r\n**Expected behavior**\r\n\r\nThe same as for `XREVRANGE stream + - COUNT 1`\r\n\r\n**Additional information**\r\n\r\nRedis server info:\r\n\r\n```\nredis_version:7.4.1\r\nredis_git_sha1:00000000\r\nredis_git_dirty:0\r\nredis_build_id: \r\nredis_mode:standalone\r\n... [Log Snipped] ...\natomicvar_api:c11-builtin\r\ngcc_version:10.2.1\n```\r\n\r\napt version: `6:7.4.1-1rl1~bullseye1` installed from `[URL]\n\n[Context/Logs]:\n- @edkalina thanks, the reason is that `XDEL` forgot to update the `last_id` when the deleted entries is the last one.\r\ndo you wanna make a PR to fix it?"}
{"project_id": "Redis", "bug_id": "46", "source_type": "github", "llm_input_text": "[Title]: [BUG] HINCRBYFLOAT on HFE field removes field expiration on replica\n[Symptom]:\n**Describe the bug**\n\nWhen executing `HINCRBYFLOAT` on a field of HFE, the expiration time of that field is removed on the replica, even though the master retains it. This leads to an inconsistency between master and replica.\n\n**To reproduce**\n\n- master\n```\n :6379> hset hash f1 1\n(integer) 1\n :6379> hexpire hash 200 fields 1 f1\n1) (integer) 1\n :6379> hincrbyfloat hash f1 1\n\"2\"\n :6379> HTTL hash fields 1 f1\n1) (integer) 187\n```\n\n- replica\n```\n :6380> httl hash fields 1 f1   :6380> httl hash fields 1 f1 <== after hincrbyfloat\n1) (integer) -1\n```\n\n**Expected behavior**\n\nField expiration metadata should be preserved on the replica after HINCRBYFLOAT\n\n**Additional information**\n\nthe root cause is that we rewrite `HINCRBYFLOAT` to `HSET` after executing `HINCRBYFLOAT`\n\n[URL]\n\nmaybe we can use `HSETEX ... KEEPTTL`, but `HSETEX` is introduced from 8.0, the bug should be introduced from 7.4\n\n[Context/Logs]:\n- could you please have a look @moticless\n- ```\n    /* Always replicate HINCRBYFLOAT as an HSET command with the final value\n     * in order to make sure that differences in float precision or formatting\n     * will not create differences in replicas or after an AOF restart. */\n```\nMaybe for 8.0 we can use `HSETEX ... KEEPTTL` \nAnd for 7.4 we can hack it with if no expiration time then keep behaviour. Otherwise, use `HINCRBYFLOAT` for replica and prioritize having TTL over float precision in that case. @oranagra WDYT?\n- ... [Middle Discussions Snipped for Brevity] ...\n- i think what matters here is not how many lines the change has, but it's implications.\ni.e if we have conditions, and as long as the field doesn't have expiration, we keep propagating as in 7.0, that means that the change is smaller.\n- sure, we should do that\n\nas you said, if a field has expiration, there are two methods to resolve this issue\n- hset + hexpireat\n- replicate hincrbyfloat without changing command\n\ni am worried that replicating `hincrbyfloat` directly may cause a break change, so i want to try to `hset + hexpireat`\n\nbefore @tezc  reminding, i think it is not easy to keep the order `hset + hexpireat`, we can not call alsoPropagate(hexpireat) at the end of `hincrbyfloatCommand` directly."}
{"project_id": "Redis", "bug_id": "47", "source_type": "github", "llm_input_text": "[Title]: [BUG] Redis Streams XINFO Lag field\n[Symptom]:\n**Describe the bug**\r\n\r\nXINFO Lag field is reported wrong in some cases. \r\n\r\n**To reproduce and expected behavior**\r\n\r\nTested against Redis 7.2.4 (d2c8a4b9/0) 64 bit with redis-cli 7.2.4 (git:d2c8a4b9)\r\n\r\nI will report two different cases \r\n\r\n1) CASE 1 \r\n\r\n```\n :6379> XGROUP CREATE planets processing $ MKSTREAM\r\nOK\r\n :6379> XADD planets 0-1 name Mercury\r\n\"0-1\"\r\n :6379> XADD planets 0-2 name Venus\r\n... [Log Snipped] ...\n   11) \"lag\"\r\n   12) (integer) 2       :6379> XREADGROUP GROUP processing alice STREAMS planets >\r\n1) 1) \"planets\"\r\n   2) 1) 1) \"0-4\"\r\n         2) 1) \"name\"\r\n            2) \"Jupiter\"\r\n... [Log Snipped] ...\n   11) \"lag\"\r\n   12) (integer) 1          :6379> XGROUP CREATE planets processing $ MKSTREAM\r\nOK\r\n :6379> XADD planets 0-1 name Mercury\r\n\"0-1\"\r\n :6379> XADD planets 0-2 name Venus\r\n... [Log Snipped] ...\n   11) \"lag\"\r\n   12) (integer) 1       <=== SHOULD BE 0\n```\r\n\r\nThat is all of course, if I understand the document correctly.\n\n[Context/Logs]:\n- @sancar thanks, this will be fixed in #13338, do you want a try?\n- Sure @sundb , I will try.\n- ... [Middle Discussions Snipped for Brevity] ...\n- I understand this issue, but should Redis ensure consistency between entries read and lag. When the lag is invalid, entries read is displayed as valid. This is very confusing.\r\nIn Xinfo, the result of entries read depends on the execution order of xread, while lag does not.\n- @artikell thanks, i've been thinking about this too.\r\nthere is actually a way to ensure that `entries_read` always valid, it always reply on xreadgroup command.\r\ni'm busy elsewhere now, need some time.\r\nperhaps you'd like to fix it based on my PR: [URL]"}
