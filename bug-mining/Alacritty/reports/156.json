{"url":"https://api.github.com/repos/alacritty/alacritty/issues/3534","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/3534/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/3534/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/3534/events","html_url":"https://github.com/alacritty/alacritty/issues/3534","id":590070878,"node_id":"MDU6SXNzdWU1OTAwNzA4Nzg=","number":3534,"title":"hintfull setting is not respected","user":{"login":"mahkoh","id":1882250,"node_id":"MDQ6VXNlcjE4ODIyNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1882250?v=4","gravatar_id":"","url":"https://api.github.com/users/mahkoh","html_url":"https://github.com/mahkoh","followers_url":"https://api.github.com/users/mahkoh/followers","following_url":"https://api.github.com/users/mahkoh/following{/other_user}","gists_url":"https://api.github.com/users/mahkoh/gists{/gist_id}","starred_url":"https://api.github.com/users/mahkoh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mahkoh/subscriptions","organizations_url":"https://api.github.com/users/mahkoh/orgs","repos_url":"https://api.github.com/users/mahkoh/repos","events_url":"https://api.github.com/users/mahkoh/events{/privacy}","received_events_url":"https://api.github.com/users/mahkoh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960155,"node_id":"MDU6TGFiZWwzMjc5NjAxNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20bug","name":"B - bug","color":"c6071e","default":false,"description":""},{"id":502685388,"node_id":"MDU6TGFiZWw1MDI2ODUzODg=","url":"https://api.github.com/repos/alacritty/alacritty/labels/S%20-%20font","name":"S - font","color":"5319e7","default":false,"description":null},{"id":638279490,"node_id":"MDU6TGFiZWw2MzgyNzk0OTA=","url":"https://api.github.com/repos/alacritty/alacritty/labels/H%20-%20linux","name":"H - linux","color":"000000","default":false,"description":null},{"id":1301010183,"node_id":"MDU6TGFiZWwxMzAxMDEwMTgz","url":"https://api.github.com/repos/alacritty/alacritty/labels/H%20-%20bsd","name":"H - bsd","color":"000000","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/alacritty/alacritty/milestones/14","html_url":"https://github.com/alacritty/alacritty/milestone/14","labels_url":"https://api.github.com/repos/alacritty/alacritty/milestones/14/labels","id":5201892,"node_id":"MDk6TWlsZXN0b25lNTIwMTg5Mg==","number":14,"title":"Version 0.6.0","description":"","creator":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":19,"state":"closed","created_at":"2020-03-14T15:59:40Z","updated_at":"2020-11-25T00:20:26Z","due_on":null,"closed_at":"2020-11-25T00:20:26Z"},"comments":17,"created_at":"2020-03-30T07:51:38Z","updated_at":"2020-07-10T18:54:36Z","closed_at":"2020-07-10T18:54:36Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I've configured hintfull in fontconfig:\r\n\r\n```\r\n<?xml version='1.0'?>\r\n<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>\r\n<fontconfig>\r\n <match target=\"font\">\r\n  <edit mode=\"assign\" name=\"hintstyle\">\r\n   <const>hintfull</const>\r\n  </edit>\r\n </match>\r\n</fontconfig>\r\n ```\r\n\r\nThis is recognized by alacritty. I've not disabled antialiasing for any font. Therefore alacritty uses the following code path:\r\n\r\nhttps://github.com/alacritty/alacritty/blob/fde2424b398dadd2310686b365041189decd1d63/font/src/ft/mod.rs#L491\r\n\r\nhintfull is not applied in this case.\r\n\r\nDisabling antialiasing via fontconfig makes the font ragged in alacritty and other programs and is therefore not an option.\r\n\r\nThis problem is specific to alacritty. Hinting works as expected in all other programs I'm using.\r\n\r\nThe following patch fixes the problem:\r\n\r\n```\r\ndiff --git a/font/src/ft/mod.rs b/font/src/ft/mod.rs\r\nindex d393b63..76b0dc7 100644\r\n--- a/font/src/ft/mod.rs\r\n+++ b/font/src/ft/mod.rs\r\n@@ -453,7 +453,7 @@ impl FreeTypeRasterizer {\r\n     }\r\n \r\n     fn ft_load_flags(pattern: &PatternRef) -> freetype::face::LoadFlag {\r\n-        let antialias = pattern.antialias().next().unwrap_or(true);\r\n+        let antialias = pattern.antialias().next().unwrap_or(false);\r\n         let hinting = pattern.hintstyle().next().unwrap_or(fc::HintStyle::Slight);\r\n         let rgba = pattern.rgba().next().unwrap_or(fc::Rgba::Unknown);\r\n         let embedded_bitmaps = pattern.embeddedbitmap().next().unwrap_or(true);\r\n```\r\n\r\nCurrent master with antialiasing enabled:\r\n![2020-03-30-094447_412x159_scrot](https://user-images.githubusercontent.com/1882250/77887817-87955780-726b-11ea-82f6-ce6df9e3588d.png)\r\nCurrent master with the patch applied and antialiasing enabled:\r\n![2020-03-30-094529_371x156_scrot](https://user-images.githubusercontent.com/1882250/77887820-882dee00-726b-11ea-8380-a058be7c5f36.png)\r\nCurrent master with antialiasing disabled:\r\n![2020-03-30-094617_345x151_scrot](https://user-images.githubusercontent.com/1882250/77887821-882dee00-726b-11ea-9113-ccf5c1733ce2.png)\r\n","closed_by":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/3534/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/3534/timeline","performed_via_github_app":null,"state_reason":"completed"}