{"url":"https://api.github.com/repos/alacritty/alacritty/issues/3726","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/3726/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/3726/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/3726/events","html_url":"https://github.com/alacritty/alacritty/issues/3726","id":618600023,"node_id":"MDU6SXNzdWU2MTg2MDAwMjM=","number":3726,"title":"Properly overwrite wide chars","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960155,"node_id":"MDU6TGFiZWwzMjc5NjAxNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20bug","name":"B - bug","color":"c6071e","default":false,"description":""},{"id":638280858,"node_id":"MDU6TGFiZWw2MzgyODA4NTg=","url":"https://api.github.com/repos/alacritty/alacritty/labels/S%20-%20unicode","name":"S - unicode","color":"5319e7","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/alacritty/alacritty/milestones/17","html_url":"https://github.com/alacritty/alacritty/milestone/17","labels_url":"https://api.github.com/repos/alacritty/alacritty/milestones/17/labels","id":6221440,"node_id":"MDk6TWlsZXN0b25lNjIyMTQ0MA==","number":17,"title":"Version 0.8.0","description":"","creator":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":30,"state":"closed","created_at":"2020-12-17T03:40:49Z","updated_at":"2021-05-21T08:06:35Z","due_on":null,"closed_at":"2021-05-21T08:06:35Z"},"comments":0,"created_at":"2020-05-14T23:41:40Z","updated_at":"2021-04-29T17:06:45Z","closed_at":"2021-04-29T17:06:45Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently when the cursor is positioned above a wide char, or a wide char spacer, the underlying cell is simply overwritten without considering the previous fullwidth character content.\r\n\r\nThis can be reproduced with the following two escapes:\r\n```\r\necho \" ðŸ¥±ðŸ¥±\\b\\b\\ba\"\r\n```\r\nThis writes a character in the spacer of the first full width character, leading to overlapping glyphs.\r\n\r\n```\r\necho \" ðŸ¥±ðŸ¥±\\b\\b\\b\\ba\"\r\n```\r\nThis overwrites the first full width character, which first seems to render correctly, however selecting the leftover wide char spacer will lead to the selection expanding across the other full width character incorrectly.\r\n\r\nI'm not sure if this is ever a problem in practice, since usually content is cleared before it is rewritten to ensure correct behavior, but Alacritty's current behavior is probably the farthest away from correct in any of the terminal emulators I've tested.\r\n\r\nThe proper solution would likely to overwrite the entire fullwidth glyph when a character is written in either of its two cells, but there is one terminal that behaves differently (Kitty), which just doesn't write the character to the grid at all if it is written to the location of the spacer.\r\n\r\nA proper resolution would likely not be very complicated, however certainly have some negative performance impact since I'd expect it to require two additional conditionals in the `input` function whenever any character is written. If there's a solution that can circumvent these in the hot path that would probably be ideal.","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/3726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/3726/timeline","performed_via_github_app":null,"state_reason":"completed"}