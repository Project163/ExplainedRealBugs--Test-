{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5942","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/5942/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/5942/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/5942/events","html_url":"https://github.com/alacritty/alacritty/issues/5942","id":1165126909,"node_id":"I_kwDOAxkop85Fcmz9","number":5942,"title":"Crash and assert triggered during search.","user":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":513181155,"node_id":"MDU6TGFiZWw1MTMxODExNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/P%20-%20high","name":"P - high","color":"f9d0c4","default":false,"description":null},{"id":638297569,"node_id":"MDU6TGFiZWw2MzgyOTc1Njk=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20crash","name":"B - crash","color":"c6071e","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-10T11:54:59Z","updated_at":"2022-03-10T19:45:21Z","closed_at":"2022-03-10T19:45:21Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"While triggering Vi mode or sometimes starting search I've got the following crashes.\r\n```gdb\r\nthread 'main' panicked at 'assertion failed: positive < self.len', alacritty_terminal/src/grid/storage.rs:222:9\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n   1: core::panicking::panic_fmt\r\n   2: core::panicking::panic\r\n   3: alacritty_terminal::grid::storage::Storage<T>::compute_index\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty_terminal/src/grid/storage.rs:222:9\r\n   4: <alacritty_terminal::grid::storage::Storage<T> as core::ops::index::Index<alacritty_terminal::index::Line>>::index\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty_terminal/src/grid/storage.rs:254:21\r\n   5: <alacritty_terminal::grid::Grid<T> as core::ops::index::Index<alacritty_terminal::index::Line>>::index\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty_terminal/src/grid/mod.rs:448:10\r\n   6: alacritty_terminal::term::search::<impl alacritty_terminal::term::Term<T>>::line_search_right\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty_terminal/src/term/search.rs:428:16\r\n   7: alacritty::display::hint::highlighted_at::{{closure}}::{{closure}}\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/display/hint.rs:265:27\r\n   8: alacritty::config::ui_config::LazyRegex::with_compiled\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/config/ui_config.rs:382:9\r\n   9: alacritty::display::hint::highlighted_at::{{closure}}\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/display/hint.rs:261:9\r\n  10: <core::slice::iter::Iter<T> as core::iter::traits::iterator::Iterator>::find_map\r\n             at /rustc/1.59.0/library/core/src/slice/iter/macros.rs:276:38\r\n  11: alacritty::display::hint::highlighted_at\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/display/hint.rs:250:5\r\n  12: alacritty::display::Display::update_highlighted_hints\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/display/mod.rs:747:13\r\n  13: alacritty::window_context::WindowContext::handle_event\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/window_context.rs:311:27\r\n  14: alacritty::event::Processor::run::{{closure}}\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/event.rs:1301:25\r\n  15: winit::platform_impl::platform::sticky_exit_callback\r\n             at /home/kchibisov/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.26.1/src/platform_impl/linux/mod.rs:753:5\r\n  16: winit::platform_impl::platform::wayland::event_loop::EventLoop<T>::run_return\r\n             at /home/kchibisov/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.26.1/src/platform_impl/linux/wayland/event_loop/mod.rs:406:13\r\n  17: winit::platform_impl::platform::EventLoop<T>::run_return\r\n             at /home/kchibisov/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.26.1/src/platform_impl/linux/mod.rs:662:56\r\n  18: <winit::event_loop::EventLoop<T> as winit::platform::run_return::EventLoopExtRunReturn>::run_return\r\n             at /home/kchibisov/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.26.1/src/platform/run_return.rs:56:9\r\n  19: alacritty::event::Processor::run\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/event.rs:1249:9\r\n  20: alacritty::alacritty\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/main.rs:201:5\r\n  21: alacritty::main\r\n             at /home/kchibisov/src/rust/alacritty-workspace/fork/alacritty/src/main.rs:81:17\r\n  22: core::ops::function::FnOnce::call_once\r\n             at /rustc/1.59.0/library/core/src/ops/function.rs:227:5\r\n\r\n```\r\n\r\nTo trigger assert you don't need to resize, I got it just from entering Vi mode.\r\n\r\nThe following is following stacktrace is why I've started investigating in the first place.\r\n\r\n```gdb\r\n0  __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:49\r\n1  0x00007f192cffc546 in __GI_abort () at abort.c:79\r\n2  0x0000564dbb652e57 in panic_abort::__rust_start_panic::abort ()\r\n3  0x0000564dbb652e46 in __rust_start_panic ()\r\n4  0x0000564dbb71a8f6 in rust_panic ()\r\n5  0x0000564dbb7230f8 in std::panicking::rust_panic_with_hook ()\r\n6  0x0000564dbb722a58 in std::panicking::begin_panic_handler::{{closure}} ()\r\n7  0x0000564dbb7229f6 in std::sys_common::backtrace::__rust_end_short_backtrace ()\r\n8  0x0000564dbb7229b2 in rust_begin_unwind ()\r\n9  0x0000564dbb4928b0 in core::panicking::panic_fmt ()\r\n10 0x0000564dbb492a0c in core::panicking::panic ()\r\n11 0x0000564dbb535d7b in core::option::Option::unwrap<alacritty_terminal::index::Point<usize, alacritty_terminal::index::Column>> () at /rustc/1.59.0/library/core/src/option.rs:729\r\n12 alacritty::display::content::RenderableContent::new<alacritty::event::EventProxy> () at alacritty/src/display/content.rs:66\r\n13 0x0000564dbb5b3075 in alacritty::display::Display::draw<alacritty::event::EventProxy> () at alacritty/src/display/mod.rs:544\r\n14 0x0000564dbb57dafd in alacritty::window_context::WindowContext::handle_event () at alacritty/src/window_context.rs:335\r\n15 0x0000564dbb588244 in alacritty::event::{impl#10}::run::{closure#0} () at alacritty/src/event.rs:1301\r\n16 0x0000564dbb58518a in winit::platform_impl::platform::sticky_exit_callback<alacritty::event::Event, alacritty::event::{impl#10}::run::{closure#0}> () at /home/kchibisov/.cargo/git/checkouts/winit-4b1f5e8d108a5ef0/3c0e397/src/platform_impl/linux/mod.rs:788\r\n17 winit::platform_impl::platform::wayland::event_loop::EventLoop::run_return<alacritty::event::Event, alacritty::event::{impl#10}::run::{closure#0}> () at /home/kchibisov/.cargo/git/checkouts/winit-4b1f5e8d108a5ef0/3c0e397/src/platform_impl/linux/wayland/event_loop/mod.rs:421\r\n18 winit::platform_impl::platform::EventLoop::run_return<alacritty::event::Event, alacritty::event::{impl#10}::run::{closure#0}> () at /home/kchibisov/.cargo/git/checkouts/winit-4b1f5e8d108a5ef0/3c0e397/src/platform_impl/linux/mod.rs:701\r\n19 0x0000564dbb4faf40 in winit::platform::run_return::{impl#0}::run_return<alacritty::event::Event, alacritty::event::{impl#10}::run::{closure#0}> () at /home/kchibisov/.cargo/git/checkouts/winit-4b1f5e8d108a5ef0/3c0e397/src/platform/run_return.rs:61\r\n20 alacritty::event::Processor::run () at alacritty/src/event.rs:1249\r\n21 alacritty::alacritty () at alacritty/src/main.rs:201\r\n22 alacritty::main () at alacritty/src/main.rs:81\r\n\r\n```","closed_by":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/5942/timeline","performed_via_github_app":null,"state_reason":"completed"}