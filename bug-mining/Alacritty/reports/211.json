{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5170","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/5170/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/5170/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/5170/events","html_url":"https://github.com/alacritty/alacritty/issues/5170","id":899617204,"node_id":"MDU6SXNzdWU4OTk2MTcyMDQ=","number":5170,"title":"Cause crash when display multi byte character in tmux and resize window or change font size.","user":{"login":"kuuote","id":36663503,"node_id":"MDQ6VXNlcjM2NjYzNTAz","avatar_url":"https://avatars.githubusercontent.com/u/36663503?v=4","gravatar_id":"","url":"https://api.github.com/users/kuuote","html_url":"https://github.com/kuuote","followers_url":"https://api.github.com/users/kuuote/followers","following_url":"https://api.github.com/users/kuuote/following{/other_user}","gists_url":"https://api.github.com/users/kuuote/gists{/gist_id}","starred_url":"https://api.github.com/users/kuuote/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kuuote/subscriptions","organizations_url":"https://api.github.com/users/kuuote/orgs","repos_url":"https://api.github.com/users/kuuote/repos","events_url":"https://api.github.com/users/kuuote/events{/privacy}","received_events_url":"https://api.github.com/users/kuuote/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":638297569,"node_id":"MDU6TGFiZWw2MzgyOTc1Njk=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20crash","name":"B - crash","color":"c6071e","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/alacritty/alacritty/milestones/19","html_url":"https://github.com/alacritty/alacritty/milestone/19","labels_url":"https://api.github.com/repos/alacritty/alacritty/milestones/19/labels","id":6381659,"node_id":"MDk6TWlsZXN0b25lNjM4MTY1OQ==","number":19,"title":"Version 0.9.0","description":"","creator":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":15,"state":"closed","created_at":"2021-02-02T09:38:02Z","updated_at":"2021-08-04T22:34:00Z","due_on":null,"closed_at":"2021-08-04T22:34:00Z"},"comments":1,"created_at":"2021-05-24T12:31:16Z","updated_at":"2021-05-28T11:00:38Z","closed_at":"2021-05-28T11:00:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I always use alacritty, thanks.\r\n\r\n### Repro step\r\n0. Run tmux session\r\n0. Execute `for i in $(seq 1000); do echo '\\u3042'; done` in shell\r\n0. Resize window or change font size many times\r\n\r\n### System\r\n\r\nOS: Linux\r\nVersion: alacritty 0.9.0-dev (3c61e07)\r\nX11, i3wm\r\ntmux 3.2\r\n\r\n### Logs\r\n\r\nCrashes: STDERR, STDOUT\r\n```\r\nthread 'PTY reader' panicked at 'index out of bounds: the len is 85 but the index is 85', /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/term/mod.rs:778:17\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /build/rust/src/rustc-1.52.1-src/library/std/src/panicking.rs:493:5\r\n   1: core::panicking::panic_fmt\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/panicking.rs:92:14\r\n   2: core::panicking::panic_bounds_check\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/panicking.rs:69:5\r\n   3: <usize as core::slice::index::SliceIndex<[T]>>::index_mut\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/slice/index.rs:188:14\r\n   4: core::slice::index::<impl core::ops::index::IndexMut<I> for [T]>::index_mut\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/slice/index.rs:26:9\r\n   5: <alloc::vec::Vec<T,A> as core::ops::index::IndexMut<I>>::index_mut\r\n             at /build/rust/src/rustc-1.52.1-src/library/alloc/src/vec/mod.rs:2393:9\r\n   6: <alacritty_terminal::grid::row::Row<T> as core::ops::index::IndexMut<alacritty_terminal::index::Column>>::index_mut\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/grid/row.rs:200:14\r\n   7: alacritty_terminal::term::Term<T>::write_at_cursor\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/term/mod.rs:778:17\r\n   8: <alacritty_terminal::term::Term<T> as alacritty_terminal::ansi::Handler>::input\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/term/mod.rs:864:13\r\n   9: <alacritty_terminal::ansi::Performer<H> as vte::Perform>::print\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/ansi.rs:883:9\r\n  10: vte::Parser::perform_action\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/vte-0.10.1/src/lib.rs:219:30\r\n  11: vte::Parser::perform_state_change\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/vte-0.10.1/src/lib.rs:162:17\r\n  12: vte::Parser::advance\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/vte-0.10.1/src/lib.rs:130:9\r\n  13: alacritty_terminal::ansi::Processor::advance\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/ansi.rs:162:13\r\n  14: alacritty_terminal::event_loop::EventLoop<T,U>::pty_read\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/event_loop.rs:243:25\r\n  15: alacritty_terminal::event_loop::EventLoop<T,U>::spawn::{{closure}}\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/event_loop.rs:376:51\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nthread 'main' panicked at 'expected send event loop msg: Disconnected', alacritty_terminal/src/event_loop.rs:81:41\r\nstack backtrace:\r\n   0: rust_begin_unwind\r\n             at /build/rust/src/rustc-1.52.1-src/library/std/src/panicking.rs:493:5\r\n   1: core::panicking::panic_fmt\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/panicking.rs:92:14\r\n   2: core::option::expect_none_failed\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/option.rs:1329:5\r\n   3: core::result::Result<T,E>::expect\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/result.rs:997:23\r\n   4: <alacritty_terminal::event_loop::Notifier as alacritty_terminal::event::OnResize>::on_resize\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty_terminal/src/event_loop.rs:81:9\r\n   5: alacritty::display::Display::handle_update\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty/src/display/mod.rs:460:9\r\n   6: alacritty::event::Processor<N>::submit_display_update\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty/src/event.rs:1432:9\r\n   7: alacritty::event::Processor<N>::run::{{closure}}\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty/src/event.rs:1107:17\r\n   8: winit::platform_impl::platform::sticky_exit_callback\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.24.0/src/platform_impl/linux/mod.rs:736:5\r\n   9: winit::platform_impl::platform::x11::EventLoop<T>::run_return\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.24.0/src/platform_impl/linux/x11/mod.rs:330:17\r\n  10: winit::platform_impl::platform::EventLoop<T>::run_return\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.24.0/src/platform_impl/linux/mod.rs:645:56\r\n  11: <winit::event_loop::EventLoop<T> as winit::platform::run_return::EventLoopExtRunReturn>::run_return\r\n             at /home/arch/.cargo/registry/src/github.com-1ecc6299db9ec823/winit-0.24.0/src/platform/run_return.rs:56:9\r\n  12: alacritty::event::Processor<N>::run\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty/src/event.rs:1029:9\r\n  13: alacritty::run\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty/src/main.rs:204:5\r\n  14: alacritty::main\r\n             at /hd/ghq/github.com/alacritty/alacritty/alacritty/src/main.rs:102:23\r\n  15: core::ops::function::FnOnce::call_once\r\n             at /build/rust/src/rustc-1.52.1-src/library/core/src/ops/function.rs:227:5\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\n```\r\nFont/Terminal size: `alacritty -vv`\r\n```\r\n[2021-05-24 20:31:54.415692674] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-05-24 20:31:54.415913866] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/home/arch/.config/alacritty/alacritty.yml\"\r\n[2021-05-24 20:31:54.431093138] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-05-24 20:31:54.433603753] [DEBUG] [alacritty] Estimated DPR: 1\r\n[2021-05-24 20:31:54.433759743] [DEBUG] [alacritty] Estimated window size: None\r\n[2021-05-24 20:31:54.433880666] [DEBUG] [alacritty] Estimated cell size: 6 x 18\r\n[2021-05-24 20:31:54.470319285] [INFO ] [alacritty] Device pixel ratio: 1\r\n[2021-05-24 20:31:54.478948167] [INFO ] [alacritty] Initializing glyph cache...\r\n[2021-05-24 20:31:54.484091149] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-05-24 20:31:54.490144440] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-05-24 20:31:54.497148441] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-05-24 20:31:54.503694221] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-05-24 20:31:54.518687503] [INFO ] [alacritty] ... finished initializing glyph cache in 0.039492442s\r\n[2021-05-24 20:31:54.519142659] [INFO ] [alacritty] Cell size: 6 x 18\r\n[2021-05-24 20:31:54.519225033] [INFO ] [alacritty] Padding: 0 x 0\r\n[2021-05-24 20:31:54.519307853] [INFO ] [alacritty] Width: 800, Height: 600\r\n[2021-05-24 20:31:54.536759471] [INFO ] [alacritty] PTY dimensions: 33 x 133\r\n[2021-05-24 20:31:54.542902725] [INFO ] [alacritty] Initialisation complete\r\n[2021-05-24 20:31:54.558952698] [DEBUG] [alacritty_terminal] New num_cols is 156 and num_lines is 57\r\n[2021-05-24 20:31:54.579677710] [INFO ] [alacritty] Padding: 0 x 0\r\n[2021-05-24 20:31:54.579859767] [INFO ] [alacritty] Width: 941, Height: 1035\r\n```","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/5170/timeline","performed_via_github_app":null,"state_reason":"completed"}