{"url":"https://api.github.com/repos/alacritty/alacritty/issues/7224","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/7224/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/7224/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/7224/events","html_url":"https://github.com/alacritty/alacritty/issues/7224","id":1901193425,"node_id":"I_kwDOAxkop85xUejR","number":7224,"title":"Messages are not updated on sway if the dialog has the same size as the previous one","user":{"login":"flash-freezing-lava","id":113235496,"node_id":"U_kgDOBr_WKA","avatar_url":"https://avatars.githubusercontent.com/u/113235496?v=4","gravatar_id":"","url":"https://api.github.com/users/flash-freezing-lava","html_url":"https://github.com/flash-freezing-lava","followers_url":"https://api.github.com/users/flash-freezing-lava/followers","following_url":"https://api.github.com/users/flash-freezing-lava/following{/other_user}","gists_url":"https://api.github.com/users/flash-freezing-lava/gists{/gist_id}","starred_url":"https://api.github.com/users/flash-freezing-lava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flash-freezing-lava/subscriptions","organizations_url":"https://api.github.com/users/flash-freezing-lava/orgs","repos_url":"https://api.github.com/users/flash-freezing-lava/repos","events_url":"https://api.github.com/users/flash-freezing-lava/events{/privacy}","received_events_url":"https://api.github.com/users/flash-freezing-lava/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960155,"node_id":"MDU6TGFiZWwzMjc5NjAxNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20bug","name":"B - bug","color":"c6071e","default":false,"description":""},{"id":677589047,"node_id":"MDU6TGFiZWw2Nzc1ODkwNDc=","url":"https://api.github.com/repos/alacritty/alacritty/labels/DS%20-%20Wayland","name":"DS - Wayland","color":"63789b","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/alacritty/alacritty/milestones/25","html_url":"https://github.com/alacritty/alacritty/milestone/25","labels_url":"https://api.github.com/repos/alacritty/alacritty/milestones/25/labels","id":8988484,"node_id":"MI_kwDOAxkop84AiSdE","number":25,"title":"Version 0.13.0","description":"","creator":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":37,"state":"closed","created_at":"2023-01-31T21:00:09Z","updated_at":"2023-12-28T09:21:40Z","due_on":null,"closed_at":"2023-12-28T09:21:40Z"},"comments":8,"created_at":"2023-09-18T15:26:43Z","updated_at":"2023-11-13T13:31:12Z","closed_at":"2023-11-13T13:31:12Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### System\r\nOS: ArchLinux\r\nVersion: 0.12.2, but also happens in the current master branch, and at least since 0.10.0 \r\nDE: Sway\r\n\r\n### Steps to reproduce\r\n\r\n1. Edit the alacritty config, such that two messages with same length are emitted on startup:\r\n   On the current master branch this can be done, by adding attributes x and y to window section top generate 2 warnings.\r\n   On version 0.12.2, the window padding x and y value can be set to `a` to generate 2 errors.\r\n2. Click on the cross to close the first message.\r\n\r\n### Expected result\r\nThe second message is now shown.\r\nClicking again on the cross, closes the dialog.\r\n\r\n### Actual result\r\nThe first message is still shown.\r\nClicking again on the cross, closes the dialog, so the first click was processed.\r\n\r\n### First analysis\r\nIf messages result in dialog boxes of different size, the size and the text is updated. Only if the dialog box size is unchanged, the text isn't changed either. I couldn't reproduce the error on GNOME/Wayland or KDE/X11. If more the 2 messages with same dialog size are shown, the text of the first messages stays until the dialog gets closed the correct number of times. Some other actions trigger a text update (f.e. focusing another window, pressing enter) while others don't (f.e. pressing a non-enter key). If the first message is a warning and the second message an error, the color isn't updated either.\r\n\r\n### Debugging results\r\nClicks correctly result in a call to `Display::draw`, which sees the new message. However, there seems to be no damage rect for the dialog box, which might be the reason, why the box text and color isn't updated. If `Display::swap_buffers` uses  `surface.swap_buffers` instead of `surface.swap_buffers_with_damage`, the error does not occur. However, I am a bit confused, whether this is really the underlying cause, because there isn't a damage rect on GNOME or KDE either, and the error doesn't occur there.\r\n","closed_by":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/7224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/7224/timeline","performed_via_github_app":null,"state_reason":"completed"}