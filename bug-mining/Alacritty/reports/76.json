{"url":"https://api.github.com/repos/alacritty/alacritty/issues/2171","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/2171/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/2171/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/2171/events","html_url":"https://github.com/alacritty/alacritty/issues/2171","id":419848320,"node_id":"MDU6SXNzdWU0MTk4NDgzMjA=","number":2171,"title":"Interpretation of \"private\" CSI diverges from other terminals.","user":{"login":"textshell","id":6579711,"node_id":"MDQ6VXNlcjY1Nzk3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/6579711?v=4","gravatar_id":"","url":"https://api.github.com/users/textshell","html_url":"https://github.com/textshell","followers_url":"https://api.github.com/users/textshell/followers","following_url":"https://api.github.com/users/textshell/following{/other_user}","gists_url":"https://api.github.com/users/textshell/gists{/gist_id}","starred_url":"https://api.github.com/users/textshell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/textshell/subscriptions","organizations_url":"https://api.github.com/users/textshell/orgs","repos_url":"https://api.github.com/users/textshell/repos","events_url":"https://api.github.com/users/textshell/events{/privacy}","received_events_url":"https://api.github.com/users/textshell/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960155,"node_id":"MDU6TGFiZWwzMjc5NjAxNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20bug","name":"B - bug","color":"c6071e","default":false,"description":""},{"id":502429524,"node_id":"MDU6TGFiZWw1MDI0Mjk1MjQ=","url":"https://api.github.com/repos/alacritty/alacritty/labels/S%20-%20parser","name":"S - parser","color":"5319e7","default":false,"description":null},{"id":513181155,"node_id":"MDU6TGFiZWw1MTMxODExNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/P%20-%20high","name":"P - high","color":"f9d0c4","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2019-03-12T08:00:52Z","updated_at":"2019-08-06T22:59:17Z","closed_at":"2019-08-06T22:59:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Please don't threat CSI sequences with \"private use\" (<, = , >, ?) chars the same as sequences without with the same final character.\r\n\r\nThese are code space extensions and often have quite different functions. Interpreting them the same as the sequence without will create glitches and confuse applications. The same applies to the intermediates (` !\\\"#$%&'()*+,-./`).\r\n\r\nProperly ignoring unknown sequences is essential for the ongoing terminal ecosystem evolution as new sequences are allocated.\r\n\r\nThe current code in ansi.rs: `csi_dispatch` seems to get both these sequence parts in `intermediates` but mostly ignores them, except for select cases.\r\n\r\nThe following is based on information of the sequences interpreted by xterm, vte/gnome-terminal, konsole and rxvt-unicode. Also see my ongoing [documentation project](https://terminalguide.netlify.com/seq/) for further details.\r\n\r\nI think for the currently implemented sequences the only ones that should trigger with an non empty `intermediates` are:\r\n* `J` and `K` for `intermediates` exactly `?`. Strictly this is for protected cells, but it's commonly implemented on terminals that don't actually implement protected cells (if protected cells are not supported it behaves like the non `?` version)\r\n* And of course `h` and `l` for `intermediates` exactly `?`. Similar to what alacritty currently does.\r\n* possibly `n` for `intermediates` exactly `?`. The expected behavior here is different from the not `?` versions and alacritty should either ignore them or properly implement this different behavior. alacritty currently only supports 5 and 6 so a proper implementation can just add a additional `?` in the output for the dec private variants.\r\n* `q` should set cursor style only when `intermediates` is exactly ` ` (space). Without it's a different sequence understood by xterm (and DEC compatible terminals; DECLL).\r\n\r\nCurrently i think the following claimed sequences are misinterpreted:\r\n```\r\nESC [ Ⓝ ␣ @  \tScroll Left\r\nESC [ Ⓝ ␣ A  \tScroll Right\r\nESC [ > Ⓝ T  \tUnset Title Mode\r\nESC [ > Ⓝ c  \tSecondary Device Attributes\r\nESC [ = Ⓝ c  \tTertiary Device Attributes \r\nESC [ Ⓝ ␣ d  \tUnset Tab Stop\r\nESC [ > Ⓝ ; Ⓝ m  \txterm keyboard mode configuration\r\nESC [ ? Ⓝ n  \tprivate Device Status Report (different expected response)\r\nESC [ Ⓝ q  \tLoad LEDs (DECLL)\r\nESC [ Ⓝ * q  \tDEC secure reset\r\nESC [ Ⓝ \" q  \tSelect Character Protection Attribute (DECSCA)\r\nESC [ ? Ⓝ s  \tSave Mode\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ $ r  \tChange attributes in rectangular area \r\nESC [ Ⓝ ␣ u  \tSet Margin Bell Volume\r\n```\r\nBut in the future there are a lot more that have different meanings with non empty `intermediates`\r\n```\r\nESC [ ? W  \tSet Tab At Every 8 Columns\r\nESC [ Ⓝ $ p  \tRequest Mode\r\nESC [ Ⓝ + p     DEC secure reset\r\nESC [ ? Ⓝ $ p  \tRequest Private Mode\r\nESC [ > Ⓝ p  \tChange Mouse Pointer Auto Hide\r\nESC [ ! p  \tSoft Reset\r\nESC [ ? Ⓝ r  \tRestore Mode\r\nESC [ ? Ⓝ t  \tToggle Mode\r\nESC [ > Ⓝ t  \tSet Title Mode\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ $ t  \tReverse Attributes in Rectangular Area\r\nESC [ Ⓝ ␣ t  \tSet Warning Bell Volume\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ $ v  \tCopy rectangular area\r\nESC [ Ⓝ $ w  \tRequest Presentation State Report\r\nESC [ 1 $ w  \tRequest Cursor Information Report\r\nESC [ 2 $ w  \tRequest Tab Stop Report\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ' w  \tDEC Locator\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ $ x  \tFill Rectangular Area\r\nESC [ Ⓝ * x  \tSelect Attribute Change Extent\r\nESC [ Ⓝ # y  \tSetup checksum parameters\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ * y  \tRequest Checksum of Rectangular Area\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ $ z  \tErase Rectangular Area\r\nESC [ Ⓝ ; Ⓝ ' z  \tDEC Locator\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ $ {  \tSelective erase rectangular area\r\nESC [ Ⓝ # {  \tSGR Push\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ ' {  \tDEC Locator\r\nESC [ Ⓝ $ |  \tDECSCPP\r\nESC [ Ⓝ ; Ⓝ ; Ⓝ ; Ⓝ # |  \tReport SGR Rectangle\r\nESC [ Ⓝ * |  \tDECSNLS\r\nESC [ Ⓝ ' |  \tDEC Locator\r\nESC [ # }  \tSGR Pop State\r\nESC [ Ⓝ ' }  \tInsert Column\r\nESC [ Ⓝ ' ~  \tDelete Column\r\n```","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/2171/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/2171/timeline","performed_via_github_app":null,"state_reason":"completed"}