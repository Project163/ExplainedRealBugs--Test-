{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5544","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/5544/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/5544/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/5544/events","html_url":"https://github.com/alacritty/alacritty/issues/5544","id":1026960539,"node_id":"I_kwDOAxkop849Niyb","number":5544,"title":"Alacritty crashes when in vi mode and terminal clears","user":{"login":"alexdavid","id":751581,"node_id":"MDQ6VXNlcjc1MTU4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/751581?v=4","gravatar_id":"","url":"https://api.github.com/users/alexdavid","html_url":"https://github.com/alexdavid","followers_url":"https://api.github.com/users/alexdavid/followers","following_url":"https://api.github.com/users/alexdavid/following{/other_user}","gists_url":"https://api.github.com/users/alexdavid/gists{/gist_id}","starred_url":"https://api.github.com/users/alexdavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexdavid/subscriptions","organizations_url":"https://api.github.com/users/alexdavid/orgs","repos_url":"https://api.github.com/users/alexdavid/repos","events_url":"https://api.github.com/users/alexdavid/events{/privacy}","received_events_url":"https://api.github.com/users/alexdavid/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960155,"node_id":"MDU6TGFiZWwzMjc5NjAxNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20bug","name":"B - bug","color":"c6071e","default":false,"description":""},{"id":638297569,"node_id":"MDU6TGFiZWw2MzgyOTc1Njk=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20crash","name":"B - crash","color":"c6071e","default":false,"description":""},{"id":2763824867,"node_id":"MDU6TGFiZWwyNzYzODI0ODY3","url":"https://api.github.com/repos/alacritty/alacritty/labels/S%20-%20vi%20mode","name":"S - vi mode","color":"5319e7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/alacritty/alacritty/milestones/20","html_url":"https://github.com/alacritty/alacritty/milestone/20","labels_url":"https://api.github.com/repos/alacritty/alacritty/milestones/20/labels","id":6780343,"node_id":"MDk6TWlsZXN0b25lNjc4MDM0Mw==","number":20,"title":"Version 0.10.0","description":"","creator":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2021-05-21T08:06:48Z","updated_at":"2022-01-28T23:26:09Z","due_on":null,"closed_at":"2022-01-28T23:26:09Z"},"comments":0,"created_at":"2021-10-15T00:56:28Z","updated_at":"2021-12-03T07:45:05Z","closed_at":"2021-12-03T07:45:05Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Alacritty panics when receiving any clear ansi escape code (tested with `^[[2J` and `^[c`) when in vi mode near the top of a long buffer with the following message:\r\n```\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', alacritty/src/display/content.rs:66:85\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```\r\n\r\n### Steps to reproduce\r\n```shell\r\n$ yes # output a few thousand lines of output (seems to only happen with large scrollback buffer)\r\n$ sleep 5; clear # Delay clearing long enough to enter vi mode and jump to top of scrollback\r\n# ctrl+space, g\r\n# wait for clear to execute\r\n```\r\n\r\n### System\r\n\r\nOS: Linux 5.14.11-arch1-1\r\nVersion: alacritty 0.9.0 (fed349aa), alacritty 0.10.0-dev (f90dd12e)\r\nLinux/BSD: Swaywm\r\n\r\n### Logs\r\n\r\n```\r\n[2021-10-14 17:39:13.785011895] [INFO ] [alacritty] Welcome to Alacritty\r\n[2021-10-14 17:39:13.785059625] [INFO ] [alacritty] Configuration files loaded from:\r\n                                                      \"/home/alex/.config/alacritty/alacritty.yml\"\r\n[2021-10-14 17:39:13.790835891] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Book, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:13.791264364] [DEBUG] [alacritty] Estimated DPR: 1\r\n[2021-10-14 17:39:13.791274062] [DEBUG] [alacritty] Estimated window size: None\r\n[2021-10-14 17:39:13.791277589] [DEBUG] [alacritty] Estimated cell size: 9 x 18\r\n[2021-10-14 17:39:13.811619986] [INFO ] [alacritty] Device pixel ratio: 1\r\n[2021-10-14 17:39:13.814423501] [INFO ] [alacritty] Initializing glyph cache...\r\n[2021-10-14 17:39:13.814771643] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Book, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:13.815199295] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:13.815601028] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Oblique, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:13.816009643] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold Oblique, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:13.819742710] [INFO ] [alacritty] ... finished initializing glyph cache in 0.005309871s\r\n[2021-10-14 17:39:13.819753019] [INFO ] [alacritty] Cell size: 9 x 18\r\n[2021-10-14 17:39:13.819757918] [INFO ] [alacritty] Padding: 0 x 0\r\n[2021-10-14 17:39:13.819762146] [INFO ] [alacritty] Width: 800, Height: 600\r\n[2021-10-14 17:39:13.819959466] [INFO ] [alacritty] PTY dimensions: 33 x 88\r\n[2021-10-14 17:39:13.821683588] [INFO ] [alacritty] Initialisation complete\r\n[2021-10-14 17:39:13.831748993] [DEBUG] [alacritty_terminal] New num_cols is 210 and num_lines is 28\r\n[2021-10-14 17:39:13.831882413] [INFO ] [alacritty] Padding: 0 x 0\r\n[2021-10-14 17:39:13.831894346] [INFO ] [alacritty] Width: 1897, Height: 511\r\n[2021-10-14 17:39:13.851039870] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[2021-10-14 17:39:25.154252793] [DEBUG] [alacritty_terminal] Term::resize dimensions unchanged\r\n[2021-10-14 17:39:25.154300102] [INFO ] [alacritty] Padding: 0 x 0\r\n[2021-10-14 17:39:25.154312765] [INFO ] [alacritty] Width: 1897, Height: 511\r\nthread 'main' panicked at 'index out of bounds: the len is 28 but the index is 9999', /build/alacritty/src/alacritty/alacritty_terminal/src/term/search.rs:422:16\r\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\r\n```","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5544/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/5544/timeline","performed_via_github_app":null,"state_reason":"completed"}