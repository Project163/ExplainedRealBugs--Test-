{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5337","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/5337/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/5337/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/5337/events","html_url":"https://github.com/alacritty/alacritty/issues/5337","id":946628881,"node_id":"MDU6SXNzdWU5NDY2Mjg4ODE=","number":5337,"title":"Panic in 'PTY reader' thread when printing large binary file to stdout","user":{"login":"Dar13","id":1120797,"node_id":"MDQ6VXNlcjExMjA3OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1120797?v=4","gravatar_id":"","url":"https://api.github.com/users/Dar13","html_url":"https://github.com/Dar13","followers_url":"https://api.github.com/users/Dar13/followers","following_url":"https://api.github.com/users/Dar13/following{/other_user}","gists_url":"https://api.github.com/users/Dar13/gists{/gist_id}","starred_url":"https://api.github.com/users/Dar13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dar13/subscriptions","organizations_url":"https://api.github.com/users/Dar13/orgs","repos_url":"https://api.github.com/users/Dar13/repos","events_url":"https://api.github.com/users/Dar13/events{/privacy}","received_events_url":"https://api.github.com/users/Dar13/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960155,"node_id":"MDU6TGFiZWwzMjc5NjAxNTU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20bug","name":"B - bug","color":"c6071e","default":false,"description":""},{"id":638297569,"node_id":"MDU6TGFiZWw2MzgyOTc1Njk=","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20crash","name":"B - crash","color":"c6071e","default":false,"description":""},{"id":1217212231,"node_id":"MDU6TGFiZWwxMjE3MjEyMjMx","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20regression","name":"B - regression","color":"c6071e","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/alacritty/alacritty/milestones/19","html_url":"https://github.com/alacritty/alacritty/milestone/19","labels_url":"https://api.github.com/repos/alacritty/alacritty/milestones/19/labels","id":6381659,"node_id":"MDk6TWlsZXN0b25lNjM4MTY1OQ==","number":19,"title":"Version 0.9.0","description":"","creator":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":15,"state":"closed","created_at":"2021-02-02T09:38:02Z","updated_at":"2021-08-04T22:34:00Z","due_on":null,"closed_at":"2021-08-04T22:34:00Z"},"comments":14,"created_at":"2021-07-16T22:20:09Z","updated_at":"2021-07-22T22:11:12Z","closed_at":"2021-07-22T22:11:12Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"After following the `refterm` saga, I generated a large binary file via `dd` from `/dev/urandom` and tried `cat`ing it to stdout to see how fast Alacritty got through it. Instead Alacritty unexpectedly panicked in the pty reader thread.\r\n\r\nI tried narrowing down the file to the bare minimum, but couldn't shrink it past this point and still reproduce the issue.\r\n\r\nI'll try doing a build with debug symbols in the upcoming couple of days to get a more useful stack dump.\r\n\r\n### System\r\n\r\nOS: Linux (Arch Linux)\r\nVersion: alacritty 0.8.0 (a1b13e68)\r\nDE: Gnome 40.3\r\n\r\n### Logs\r\nThis zip contains the smallest file that still reproduces the issue in my install: [bad.zip](https://github.com/alacritty/alacritty/files/6833589/bad.zip)\r\n```\r\n$ env RUST_BACKTRACE=full alacritty\r\n$ cat bad.bin\r\nthread 'PTY reader' panicked at 'index out of bounds: the len is 120 but the index is 18446744073709551615', /build/alacritty/src/alacritty/alacritty_terminal/src/term/mod.rs:780:17\r\nstack backtrace:\r\n   0:     0x5611b6112e80 - <unknown>\r\n   1:     0x5611b5fe047c - <unknown>\r\n   2:     0x5611b61126e1 - <unknown>\r\n   3:     0x5611b6112045 - <unknown>\r\n   4:     0x5611b611145c - <unknown>\r\n   5:     0x5611b6130728 - <unknown>\r\n   6:     0x5611b613069c - <unknown>\r\n   7:     0x5611b613064d - <unknown>\r\n   8:     0x5611b5fddd00 - <unknown>\r\n   9:     0x5611b5fddb91 - <unknown>\r\n  10:     0x5611b5f4f910 - <unknown>\r\n  11:     0x5611b5f143ce - <unknown>\r\n  12:     0x5611b5e19de6 - <unknown>\r\n  13:     0x5611b5e1c76e - <unknown>\r\n  14:     0x5611b5ed4ddc - <unknown>\r\n  15:     0x5611b614379a - <unknown>\r\n  16:     0x7f63b4158259 - start_thread\r\n  17:     0x7f63b3f3d5e3 - __GI___clone\r\n  18:                0x0 - <unknown>\r\nthread 'main' panicked at 'send event loop msg: Disconnected', /build/alacritty/src/alacritty/alacritty_terminal/src/event_loop.rs:75:40\r\nstack backtrace:\r\n   0:     0x5611b6112e80 - <unknown>\r\n   1:     0x5611b5fe047c - <unknown>\r\n   2:     0x5611b61126e1 - <unknown>\r\n   3:     0x5611b6112045 - <unknown>\r\n   4:     0x5611b611145c - <unknown>\r\n   5:     0x5611b6130728 - <unknown>\r\n   6:     0x5611b613069c - <unknown>\r\n   7:     0x5611b613064d - <unknown>\r\n   8:     0x5611b5fddd00 - <unknown>\r\n   9:     0x5611b5fe4b12 - <unknown>\r\n  10:     0x5611b5e5bf43 - <unknown>\r\n  11:     0x5611b5eb38b4 - <unknown>\r\n  12:     0x5611b5f2515f - <unknown>\r\n  13:     0x5611b5f22999 - <unknown>\r\n  14:     0x5611b5eaaf54 - <unknown>\r\n  15:     0x5611b5f5e655 - <unknown>\r\n  16:     0x5611b5e21403 - <unknown>\r\n  17:     0x5611b5f595f6 - <unknown>\r\n  18:     0x7f63b3e66b25 - __libc_start_main\r\n  19:     0x5611b5e0806e - <unknown>\r\n  20:                0x0 - <unknown>\r\n```\r\n\r\n","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/5337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/5337/timeline","performed_via_github_app":null,"state_reason":"completed"}