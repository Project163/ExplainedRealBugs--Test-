[{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543627902","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-543627902","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":543627902,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzYyNzkwMg==","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T09:26:44Z","updated_at":"2019-10-18T09:26:44Z","body":"Can you reproduce this with something like `sleep 10; exit`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543627902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2724178338,"node_id":"MDEyOkxhYmVsZWRFdmVudDI3MjQxNzgzMzg=","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2724178338","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-10-18T09:26:53Z","label":{"name":"H - windows","color":"000000"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543652759","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-543652759","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":543652759,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzY1Mjc1OQ==","user":{"login":"chris-morgan","id":392868,"node_id":"MDQ6VXNlcjM5Mjg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/392868?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-morgan","html_url":"https://github.com/chris-morgan","followers_url":"https://api.github.com/users/chris-morgan/followers","following_url":"https://api.github.com/users/chris-morgan/following{/other_user}","gists_url":"https://api.github.com/users/chris-morgan/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-morgan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-morgan/subscriptions","organizations_url":"https://api.github.com/users/chris-morgan/orgs","repos_url":"https://api.github.com/users/chris-morgan/repos","events_url":"https://api.github.com/users/chris-morgan/events{/privacy}","received_events_url":"https://api.github.com/users/chris-morgan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T10:13:48Z","updated_at":"2019-10-18T10:13:48Z","body":"Yes.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543652759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chris-morgan","id":392868,"node_id":"MDQ6VXNlcjM5Mjg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/392868?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-morgan","html_url":"https://github.com/chris-morgan","followers_url":"https://api.github.com/users/chris-morgan/followers","following_url":"https://api.github.com/users/chris-morgan/following{/other_user}","gists_url":"https://api.github.com/users/chris-morgan/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-morgan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-morgan/subscriptions","organizations_url":"https://api.github.com/users/chris-morgan/orgs","repos_url":"https://api.github.com/users/chris-morgan/repos","events_url":"https://api.github.com/users/chris-morgan/events{/privacy}","received_events_url":"https://api.github.com/users/chris-morgan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543673128","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-543673128","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":543673128,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzY3MzEyOA==","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T10:57:42Z","updated_at":"2019-10-18T10:57:42Z","body":"Interesting, so that would indicate that it's a problem with quitting in general.\r\n\r\nOn Windows the PTY handling is significantly different, so that means our Signal handling might not be accurate, but if I understand you correctly you're using WSL 2, right?\r\n\r\nIIRC, WSL 2 is just Linux VMs, which would mean that you installed our Linux version and create a Linux PTY? So if you start up with `alacritty -v` there will be no mention of ConPTY or WinPTY, correct?\r\n\r\nMaybe there's a problem with signal handling through WSL 2 then?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543673128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2724454597,"node_id":"MDEyOkxhYmVsZWRFdmVudDI3MjQ0NTQ1OTc=","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2724454597","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-10-18T10:57:52Z","label":{"name":"A - needs repro","color":"fef2c0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543694407","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-543694407","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":543694407,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzY5NDQwNw==","user":{"login":"chris-morgan","id":392868,"node_id":"MDQ6VXNlcjM5Mjg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/392868?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-morgan","html_url":"https://github.com/chris-morgan","followers_url":"https://api.github.com/users/chris-morgan/followers","following_url":"https://api.github.com/users/chris-morgan/following{/other_user}","gists_url":"https://api.github.com/users/chris-morgan/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-morgan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-morgan/subscriptions","organizations_url":"https://api.github.com/users/chris-morgan/orgs","repos_url":"https://api.github.com/users/chris-morgan/repos","events_url":"https://api.github.com/users/chris-morgan/events{/privacy}","received_events_url":"https://api.github.com/users/chris-morgan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T11:45:08Z","updated_at":"2019-10-18T11:45:08Z","body":"This is all Windows Alacritty, not Linux Alacritty. (I am running no X server or similar, and don’t intend to.)\r\n\r\nWith alacritty running `cmd.exe` instead of `wsl.exe -d arch -u me`, `sleep 1 && exit` behaves just as it did in WSL, not closing the window until the next input event (meanwhile, `sleep 0 && exit` does close the window immediately, in both cmd and wsl).\r\n\r\nI therefore conclude that WSL is not a contributing factor.\r\n\r\nThis has all been using ConPTY. When I switch to WinPTY, quitting the shell *at all* makes Alacritty hang, with infinite `[YYYY-MM-DD HH:MM] [INFO] wait_object_0` log lines when run with `-v`. Judging by the thread stacks and the cycle counts for the two key threads (main one and event loop proxy), I suspect that something in the event loop handler is posting a new message to the event loop, so that it ends up with some kind of busy waiting deadlock. I believe that to be a completely different bug, and one that’s probably a deal more severe, because you can’t even force close the window once it’s in this state, due to where in the event loop it’s hung—got to kill the process manually. Workaround to avoid this bug: never quit the shell, instead use the window close button.\r\n\r\nI’m on Windows 10 build 19002 (the current Windows Insider Preview build at the time of writing). I don’t believe this window closing bug is related to that (I only switched over to WIP this week, and I’ve definitely experienced the bug before), though I believe the other bug with WinPTY only affects WIP.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543694407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chris-morgan","id":392868,"node_id":"MDQ6VXNlcjM5Mjg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/392868?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-morgan","html_url":"https://github.com/chris-morgan","followers_url":"https://api.github.com/users/chris-morgan/followers","following_url":"https://api.github.com/users/chris-morgan/following{/other_user}","gists_url":"https://api.github.com/users/chris-morgan/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-morgan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-morgan/subscriptions","organizations_url":"https://api.github.com/users/chris-morgan/orgs","repos_url":"https://api.github.com/users/chris-morgan/repos","events_url":"https://api.github.com/users/chris-morgan/events{/privacy}","received_events_url":"https://api.github.com/users/chris-morgan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543696903","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-543696903","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":543696903,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzY5NjkwMw==","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T11:50:33Z","updated_at":"2019-10-18T11:50:33Z","body":"> I therefore conclude that WSL is not a contributing factor.\r\n\r\nThat's great to know, thanks.\r\n\r\n> Alacritty hang, with infinite [YYYY-MM-DD HH:MM] [INFO] wait_object_0 log lines when run with -v. Judging by the thread stacks and the cycle counts for the two key threads (main one and event loop proxy), I suspect that something in the event loop handler is posting a new message to the event loop, so that it ends up with some kind of busy waiting deadlock\r\n\r\n`wait_object_0` is not related to any cross-platform Alacritty code. I suspect this is Windows PTY related. As such, it is completely unrelated to the event loop (proxy).\r\n\r\n> I believe that to be a completely different bug, and one that’s probably a deal more severe, because you can’t even force close the window once it’s in this state\r\n\r\nThat's quite interesting though, since it would be a regression. I wonder if that's due to the Windows version you're running or because of an Alacritty change.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543696903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543715893","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-543715893","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":543715893,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MzcxNTg5Mw==","user":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-18T12:29:44Z","updated_at":"2019-10-18T12:32:30Z","body":"@chris-morgan I can't repro your issue(wsl + `sleep 10; exit`), would you mind to try `v0.3.3` (or bisecting)?\r\n\r\nI've tried both WinPTY and ConPTY","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/543715893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2724701432,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjcyNDcwMTQzMg==","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2724701432","actor":{"login":"chris-morgan","id":392868,"node_id":"MDQ6VXNlcjM5Mjg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/392868?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-morgan","html_url":"https://github.com/chris-morgan","followers_url":"https://api.github.com/users/chris-morgan/followers","following_url":"https://api.github.com/users/chris-morgan/following{/other_user}","gists_url":"https://api.github.com/users/chris-morgan/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-morgan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-morgan/subscriptions","organizations_url":"https://api.github.com/users/chris-morgan/orgs","repos_url":"https://api.github.com/users/chris-morgan/repos","events_url":"https://api.github.com/users/chris-morgan/events{/privacy}","received_events_url":"https://api.github.com/users/chris-morgan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-18T12:29:44Z","performed_via_github_app":null},{"id":2724701434,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3MjQ3MDE0MzQ=","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2724701434","actor":{"login":"chris-morgan","id":392868,"node_id":"MDQ6VXNlcjM5Mjg2OA==","avatar_url":"https://avatars.githubusercontent.com/u/392868?v=4","gravatar_id":"","url":"https://api.github.com/users/chris-morgan","html_url":"https://github.com/chris-morgan","followers_url":"https://api.github.com/users/chris-morgan/followers","following_url":"https://api.github.com/users/chris-morgan/following{/other_user}","gists_url":"https://api.github.com/users/chris-morgan/gists{/gist_id}","starred_url":"https://api.github.com/users/chris-morgan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chris-morgan/subscriptions","organizations_url":"https://api.github.com/users/chris-morgan/orgs","repos_url":"https://api.github.com/users/chris-morgan/repos","events_url":"https://api.github.com/users/chris-morgan/events{/privacy}","received_events_url":"https://api.github.com/users/chris-morgan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-18T12:29:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545171037","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545171037","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545171037,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTE3MTAzNw==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-22T21:49:16Z","updated_at":"2019-10-22T21:58:41Z","body":"Hi, not the OP but I did manage to reproduce it on `v0.3.3`. The trick is not to have the alacritty in fullscreen and keep the mouse pointer away from the window.\r\n\r\nThe window sticks around for as long as the mouse doesn't move\r\n\r\n![alacritty-sticking-cropped](https://user-images.githubusercontent.com/377311/67336939-17e1aa80-f51e-11e9-81f6-0a8530eade17.gif)\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545171037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545303267","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545303267","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545303267,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTMwMzI2Nw==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T07:10:53Z","updated_at":"2019-10-23T07:10:53Z","body":"Might be something connected to log file handling. Doesn't reproduce for me with `persistent-logging` enabled or when running with increased verbosity.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545303267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545583159","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545583159","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545583159,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTU4MzE1OQ==","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T18:45:37Z","updated_at":"2019-10-23T18:45:37Z","body":"That might also cause some racing condition to not happen though, so I would be a bit careful following down this path.\r\n\r\nVery interesting observation though, wondering if the issue on latest master can also be resolved with these changes?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545583159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545599506","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545599506","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545599506,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTU5OTUwNg==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T19:28:00Z","updated_at":"2019-10-23T19:30:04Z","body":"@chrisduerr: Just tested the same thing on 9e0b9d5de1b8fe2d9d8ed80f73b4ad0fda171f22 debug build with both\r\n- `nightly-x86_64-pc-windows-msvc unchanged - rustc 1.40.0-nightly (7979016af 2019-10-20)`\r\n- `stable-x86_64-pc-windows-msvc unchanged - rustc 1.38.0 (625451e37 2019-09-23)`\r\n\r\nApp seems to be going into a live-lock where it consumes just below 2 CPU cores and never exits also stops reacting to Windows events and redrawing. Persistent logging or increasing verbosity have no effect on that. I guess that's a separate issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545599506/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2738290653,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjczODI5MDY1Mw==","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2738290653","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-23T19:28:00Z","performed_via_github_app":null},{"id":2738290654,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3MzgyOTA2NTQ=","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2738290654","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-23T19:28:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545636610","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545636610","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545636610,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTYzNjYxMA==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T21:06:41Z","updated_at":"2019-10-23T21:35:24Z","body":"Ok, I reproduced the problem on `v0.3.3` tag (cc3e4d3d5cb2f658d6faef02e4216b9342451efc) with profiler attached. Here's the hot path where alacritty seems to be spending most of it's time while it's window is sticking around\r\n\r\n![image](https://user-images.githubusercontent.com/377311/67434300-d0245700-f5e1-11e9-8b2f-61a0de05204c.png)\r\n\r\n```\r\nFunction Name\tTotal CPU [unit, %]\tSelf CPU [unit, %]\tModule\r\n + alacritty.exe (PID: 3944)\t11962 (100.00%)\t0 (0.00%)\tMultiple modules\r\n| + [External Code]\t11960 (99.98%)\t92 (0.77%)\tMultiple modules\r\n|| + std::sys::windows::thread::{{impl}}::new::thread_start\t11868 (99.21%)\t0 (0.00%)\talacritty.exe\r\n||| + alloc::boxed::{{impl}}::call_once<(),FnOnce<()>>\t11868 (99.21%)\t0 (0.00%)\talacritty.exe\r\n|||| + core::ops::function::FnOnce::call_once<closure-0,()>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n||||| + std::thread::{{impl}}::spawn_unchecked::{{closure}}<closure-0,(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State)>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n|||||| + std::panic::catch_unwind<std::panic::AssertUnwindSafe<closure-0>,(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State)>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n||||||| + std::panicking::try<(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State),std::panic::AssertUnwindSafe<closure-0>>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n|||||||| + panic_unwind::__rust_maybe_catch_panic\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n||||||||| + std::panicking::try::do_call<std::panic::AssertUnwindSafe<closure-0>,(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State)>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n|||||||||| + std::panic::{{impl}}::call_once<(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State),closure-0>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n||||||||||| + std::thread::{{impl}}::spawn_unchecked::{{closure}}::{{closure}}<closure-0,(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State)>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n|||||||||||| + std::sys_common::backtrace::__rust_begin_short_backtrace<closure-0,(alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>, alacritty_terminal::event_loop::State)>\t11865 (99.19%)\t0 (0.00%)\talacritty.exe\r\n||||||||||||| + alacritty_terminal::event_loop::{{impl}}::spawn::{{closure}}<alacritty_terminal::tty::windows::Pty>\t11865 (99.19%)\t71 (0.59%)\talacritty.exe\r\n|||||||||||||| - alacritty_terminal::event_loop::EventLoop<alacritty_terminal::tty::windows::Pty>::pty_read<alacritty_terminal::tty::windows::Pty,std::fs::File>\t4402 (36.80%)\t41 (0.34%)\talacritty.exe\r\n|||||||||||||| - mio::poll::Poll::poll\t4257 (35.59%)\t4 (0.03%)\talacritty.exe\r\n|||||||||||||| + alacritty_terminal::tty::windows::{{impl}}::reregister\t2721 (22.75%)\t35 (0.29%)\talacritty.exe\r\n||||||||||||||| - mio::poll::Poll::reregister<alacritty_terminal::tty::windows::EventedReadablePipe>\t1436 (12.00%)\t23 (0.19%)\talacritty.exe\r\n||||||||||||||| + mio::poll::Poll::reregister<alacritty_terminal::tty::windows::EventedWritablePipe>\t1145 (9.57%)\t27 (0.23%)\talacritty.exe\r\n|||||||||||||||| - alacritty_terminal::tty::windows::{{impl}}::reregister\t1065 (8.90%)\t18 (0.15%)\talacritty.exe\r\n```\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545636610/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545646040","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545646040","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545646040,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTY0NjA0MA==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-23T21:33:45Z","updated_at":"2019-10-23T21:33:45Z","body":"And it's similar on master (9e0b9d5) but with 50% of time stuck in the above unwinding and the other 50% of the time in this stack\r\n\r\n![image](https://user-images.githubusercontent.com/377311/67435698-99037500-f5e4-11e9-84d4-069ed72bd0ae.png)\r\n \r\n```\r\nFunction Name\tTotal CPU [unit, %]\tSelf CPU [unit, %]\tModule\r\n|| + __scrt_common_main_seh\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n||| + main\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n|||| + std::rt::lang_start<()>\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n||||| + std::rt::lang_start_internal\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n|||||| + panic_unwind::__rust_maybe_catch_panic\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n||||||| + std::panicking::try::do_call<closure-0,i32>\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n|||||||| + std::rt::lang_start::{{closure}}<()>\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n||||||||| + alacritty::main\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n|||||||||| + alacritty::run\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n||||||||||| + alacritty::event::Processor<alacritty_terminal::event_loop::Notifier>::run<alacritty_terminal::event_loop::Notifier,alacritty::event::EventProxy>\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n|||||||||||| + winit::platform::desktop::{{impl}}::run_return<alacritty_terminal::event::Event,closure-0>\t13210 (42.35%)\t0 (0.00%)\talacritty.exe\r\n||||||||||||| + winit::platform_impl::platform::event_loop::EventLoop<alacritty_terminal::event::Event>::run_return<alacritty_terminal::event::Event,closure-0>\t13210 (42.35%)\t47 (0.15%)\talacritty.exe\r\n|||||||||||||| + [External Code]\t13150 (42.16%)\t10069 (32.28%)\tMultiple modules\r\n||||||||||||||| + winit::platform_impl::platform::event_loop::thread_event_target_callback<alacritty_terminal::event::Event>\t3081 (9.88%)\t88 (0.28%)\talacritty.exe\r\n|||||||||||||||| + [System Call] ntoskrnl.exe\t1 (0.00%)\t1 (0.00%)\tntoskrnl.exe\r\n|||||||||||||||| - std::sync::mpsc::Receiver<alacritty_terminal::event::Event>::recv<alacritty_terminal::event::Event>\t1168 (3.74%)\t66 (0.21%)\talacritty.exe\r\n|||||||||||||||| - winit::platform_impl::platform::event_loop::ThreadMsgTargetSubclassInput<alacritty_terminal::event::Event>::send_event<alacritty_terminal::event::Event>\t1720 (5.51%)\t24 (0.08%)\talacritty.exe\r\n|||||||||||||||| - winit::platform_impl::platform::event_loop::{{impl}}::deref\t104 (0.33%)\t7 (0.02%)\talacritty.exe\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545646040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2739204900,"node_id":"MDEyOkxhYmVsZWRFdmVudDI3MzkyMDQ5MDA=","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2739204900","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-10-24T03:18:17Z","label":{"name":"B - bug","color":"c6071e"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545788350","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545788350","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545788350,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTc4ODM1MA==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T07:38:07Z","updated_at":"2019-10-24T08:11:09Z","body":"After debugging with different config settings this seems to be 2 issues on top of each other:\r\n\r\n1. When shell exits on its own or crashes, Alacritty window does not close itself until next Windows event is received. It's also [busy-looping here](https://github.com/jwilm/alacritty/blob/master/alacritty_terminal/src/event_loop.rs#L315) in `pty reader` thread. This happens with both ConPTY and WinPTY.\r\n\r\n2. With WinPTY only, in the same scenario, main thread is busy looping in [`winit main loop`](https://github.com/rust-windowing/winit/blob/master/src/platform_impl/windows/event_loop.rs#L249). There `winuser::PeekMessageW` doesn't block and returns the same event on every iteration. No new events seem to be received by the Window and it has to be terminated from task manager. This only happens on the current master but I could reproduce it on `v0.3.3` tag.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545788350/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545811222","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-545811222","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":545811222,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NTgxMTIyMg==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T08:38:51Z","updated_at":"2019-10-24T08:38:51Z","body":"Second issue was introduced in 729eef0c933831bccfeac6a355bdb410787fbe5f","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/545811222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546129230","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-546129230","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":546129230,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjEyOTIzMA==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T22:32:50Z","updated_at":"2019-10-24T22:35:57Z","body":"@chrisduerr: Ok, I think I found the reason for the livelock. It seems to be a mix of how now there's separate IO loop and UI loop and how the winit EventLoop 2.0 seems to be working on Windows.\r\n\r\nSo, when internal process exits, the IO thread keeps spamming window with `User::Wakeup` messages from [`pty_read`](https://github.com/jwilm/alacritty/blob/master/alacritty_terminal/src/event_loop.rs#L254) since it's part of [`event_loop`](https://github.com/jwilm/alacritty/blob/master/alacritty_terminal/src/event_loop.rs#L354).\r\n\r\nThis seems to be a lot faster then the [main `winint` loop](https://github.com/rust-windowing/winit/blob/master/src/platform_impl/windows/event_loop.rs#L241), at least with WinPTY. The current implementation of the loop doesn't exit unless the windows events queue is empty indicated by call to [`winuser::PeekMessageW`](https://github.com/rust-windowing/winit/blob/master/src/platform_impl/windows/event_loop.rs#L249) returning 0, but it never is, because of `User::Wakeup` events stacking up there.\r\n\r\nThis seem like a bug in `winint` itself, because it seems that setting [`*control_flow = ControlFlow::Exit`](https://github.com/jwilm/alacritty/blob/master/alacritty/src/event.rs#L354) in handler is not enough to terminate the loop on Windows, there's an assumption that all the events will be handled as well.\r\n\r\nIve throttled `User::Wakeup` sending with `thread::sleep(time::Duration::from_millis(1))` and it seems to have resolved the issue. The right solution would be to either fix the `winit` handling of `ControlFlow::Exit` on Windows or get Alacritty to stop the `event_loop` when it sets `ControlFlow::Exit`.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546129230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2742415427,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Mjc0MjQxNTQyNw==","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2742415427","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-10-24T22:32:50Z","performed_via_github_app":null},{"id":2742415429,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI3NDI0MTU0Mjk=","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2742415429","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-10-24T22:32:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546139781","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-546139781","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":546139781,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjEzOTc4MQ==","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T23:20:58Z","updated_at":"2019-10-24T23:20:58Z","body":"> The current implementation of the loop doesn't exit unless the windows events queue is empty\r\n\r\nDo you mean on winit's side or on our event loop processing side? Because we definitely quit our loop even if it is not empty.\r\n\r\n> This seem like a bug in winint itself, because it seems that setting *control_flow = ControlFlow::Exit in handler is not enough to terminate the loop on Windows, there's an assumption that all the events will be handled as well.\r\n\r\nThas makes it sound like you mean that regardless of us setting the control flow to `Exit`, a new iteration of our event loop is triggered? Do I understand that correctly? That would definitely be a winit bug. We need to verify that we actually do set `Exit` though.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546139781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546141635","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-546141635","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":546141635,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjE0MTYzNQ==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T23:30:28Z","updated_at":"2019-10-24T23:30:28Z","body":"I think the main problem is on `winit` side. Alacritty seems to be setting `ControlFlow::Exit` correctly but this doesn't ever get checked by winit because of long queue of `User::Wakeup` events that Alacritty is sending from `pty reader` thread.\r\n\r\nCurrently, the only issue on Alacritty side is, it expects glutin/winit loop to exit before terminating `pty reader` loop. But the latter keeps spamming event loop with events that prevent winit main loop from terminating.\r\n\r\nI'll see if I can make a small winit only app that reproduces the bug and report it with them.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546141635/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2742518202,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50Mjc0MjUxODIwMg==","url":"https://api.github.com/repos/alacritty/alacritty/issues/events/2742518202","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2019-10-24T23:36:41Z","label":{"name":"A - needs repro","color":"fef2c0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546143214","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-546143214","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":546143214,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjE0MzIxNA==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T23:39:27Z","updated_at":"2019-10-24T23:39:27Z","body":"It also might be related to the [caveats](https://docs.rs/winit/0.20.0-alpha4/winit/platform/desktop/trait.EventLoopExtDesktop.html#caveats) or `run_return` method that you're using.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546143214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546144883","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-546144883","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":546144883,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjE0NDg4Mw==","user":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T23:48:42Z","updated_at":"2019-10-24T23:48:42Z","body":"Yeah the lacking winit API certainly doesn't help with this. But maybe we can work around it by changing our behavior too.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546144883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546145995","html_url":"https://github.com/alacritty/alacritty/issues/2889#issuecomment-546145995","issue_url":"https://api.github.com/repos/alacritty/alacritty/issues/2889","id":546145995,"node_id":"MDEyOklzc3VlQ29tbWVudDU0NjE0NTk5NQ==","user":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-24T23:54:50Z","updated_at":"2019-10-24T23:54:50Z","body":"Definitely the issue on `winit` side, isolated it here https://github.com/cfiet/winit-windows-events-bug/blob/master/src/main.rs","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/comments/546145995/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"maciej-makowski","id":377311,"node_id":"MDQ6VXNlcjM3NzMxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/377311?v=4","gravatar_id":"","url":"https://api.github.com/users/maciej-makowski","html_url":"https://github.com/maciej-makowski","followers_url":"https://api.github.com/users/maciej-makowski/followers","following_url":"https://api.github.com/users/maciej-makowski/following{/other_user}","gists_url":"https://api.github.com/users/maciej-makowski/gists{/gist_id}","starred_url":"https://api.github.com/users/maciej-makowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maciej-makowski/subscriptions","organizations_url":"https://api.github.com/users/maciej-makowski/orgs","repos_url":"https://api.github.com/users/maciej-makowski/repos","events_url":"https://api.github.com/users/maciej-makowski/events{/privacy}","received_events_url":"https://api.github.com/users/maciej-makowski/received_events","type":"User","user_view_type":"public","site_admin":false}}]