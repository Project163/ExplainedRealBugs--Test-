{"url":"https://api.github.com/repos/redis/redis/issues/3285","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/3285/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/3285/comments","events_url":"https://api.github.com/repos/redis/redis/issues/3285/events","html_url":"https://github.com/redis/redis/issues/3285","id":157658722,"node_id":"MDU6SXNzdWUxNTc2NTg3MjI=","number":3285,"title":"Master is not configured as Slave after failure and reboot","user":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":155760,"node_id":"MDU6TGFiZWwxNTU3NjA=","url":"https://api.github.com/repos/redis/redis/labels/critical%20bug","name":"critical bug","color":"e10c02","default":false,"description":null},{"id":158983674,"node_id":"MDU6TGFiZWwxNTg5ODM2NzQ=","url":"https://api.github.com/repos/redis/redis/labels/sentinel","name":"sentinel","color":"207de5","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2016-05-31T12:24:37Z","updated_at":"2016-06-21T10:23:17Z","closed_at":"2016-06-16T17:28:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I had thought that Sentinel would (after a master crashed), wait for the old master to come back online, when it detects it, it would configure it to be the slave of the newly promoted master.\n\nI see this on the main documentation for Sentinel:\n\"Moreover, after a failover, the failed over master is virtually added as a slave of the new master, this way it will be reconfigured to replicate with the new master as soon as it will be available again.\"\n\nWe're using version \"3.2.0-1.el6.remi\".   We carried out this test as a way to smoke test our installation\\configuration was correct, but are left a bit puzzled as the slave is promoted to master, but when we restart the redis server on the old master, it never gets its configuration updated (to configure it as a slave).  It seems like Sentinel has stopped monitoring it.\n\nCould I get a comment from the Redis team, is this a bug?\n","closed_by":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/redis/redis/issues/3285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/3285/timeline","performed_via_github_app":null,"state_reason":"completed"}