[{"url":"https://api.github.com/repos/redis/redis/issues/comments/222911983","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-222911983","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":222911983,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMjkxMTk4Mw==","user":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-01T07:14:14Z","updated_at":"2016-06-01T07:14:14Z","body":"Apparently this was not a problem in redis sentinel version 3.0.7\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/222911983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/223012634","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-223012634","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":223012634,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzAxMjYzNA==","user":{"login":"jessee9","id":4036846,"node_id":"MDQ6VXNlcjQwMzY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/4036846?v=4","gravatar_id":"","url":"https://api.github.com/users/jessee9","html_url":"https://github.com/jessee9","followers_url":"https://api.github.com/users/jessee9/followers","following_url":"https://api.github.com/users/jessee9/following{/other_user}","gists_url":"https://api.github.com/users/jessee9/gists{/gist_id}","starred_url":"https://api.github.com/users/jessee9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jessee9/subscriptions","organizations_url":"https://api.github.com/users/jessee9/orgs","repos_url":"https://api.github.com/users/jessee9/repos","events_url":"https://api.github.com/users/jessee9/events{/privacy}","received_events_url":"https://api.github.com/users/jessee9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-01T14:36:44Z","updated_at":"2016-06-01T14:36:44Z","body":"+1\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/223012634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jessee9","id":4036846,"node_id":"MDQ6VXNlcjQwMzY4NDY=","avatar_url":"https://avatars.githubusercontent.com/u/4036846?v=4","gravatar_id":"","url":"https://api.github.com/users/jessee9","html_url":"https://github.com/jessee9","followers_url":"https://api.github.com/users/jessee9/followers","following_url":"https://api.github.com/users/jessee9/following{/other_user}","gists_url":"https://api.github.com/users/jessee9/gists{/gist_id}","starred_url":"https://api.github.com/users/jessee9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jessee9/subscriptions","organizations_url":"https://api.github.com/users/jessee9/orgs","repos_url":"https://api.github.com/users/jessee9/repos","events_url":"https://api.github.com/users/jessee9/events{/privacy}","received_events_url":"https://api.github.com/users/jessee9/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/223028489","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-223028489","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":223028489,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzAyODQ4OQ==","user":{"login":"rolette","id":19616074,"node_id":"MDQ6VXNlcjE5NjE2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/19616074?v=4","gravatar_id":"","url":"https://api.github.com/users/rolette","html_url":"https://github.com/rolette","followers_url":"https://api.github.com/users/rolette/followers","following_url":"https://api.github.com/users/rolette/following{/other_user}","gists_url":"https://api.github.com/users/rolette/gists{/gist_id}","starred_url":"https://api.github.com/users/rolette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rolette/subscriptions","organizations_url":"https://api.github.com/users/rolette/orgs","repos_url":"https://api.github.com/users/rolette/repos","events_url":"https://api.github.com/users/rolette/events{/privacy}","received_events_url":"https://api.github.com/users/rolette/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-01T15:24:28Z","updated_at":"2016-06-01T15:24:28Z","body":"Same issue here, reported in /r/redis: https://www.reddit.com/r/redis/comments/4jzm91/getting_a_handle_on_sentinel/\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/223028489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rolette","id":19616074,"node_id":"MDQ6VXNlcjE5NjE2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/19616074?v=4","gravatar_id":"","url":"https://api.github.com/users/rolette","html_url":"https://github.com/rolette","followers_url":"https://api.github.com/users/rolette/followers","following_url":"https://api.github.com/users/rolette/following{/other_user}","gists_url":"https://api.github.com/users/rolette/gists{/gist_id}","starred_url":"https://api.github.com/users/rolette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rolette/subscriptions","organizations_url":"https://api.github.com/users/rolette/orgs","repos_url":"https://api.github.com/users/rolette/repos","events_url":"https://api.github.com/users/rolette/events{/privacy}","received_events_url":"https://api.github.com/users/rolette/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/223081167","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-223081167","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":223081167,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzA4MTE2Nw==","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-01T18:22:16Z","updated_at":"2016-06-01T18:22:16Z","body":"Thanks, on my radar, will check and fix in the next days, hopefully tomorrow...\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/223081167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":678818966,"node_id":"MDEyOkxhYmVsZWRFdmVudDY3ODgxODk2Ng==","url":"https://api.github.com/repos/redis/redis/issues/events/678818966","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-06-01T18:22:26Z","label":{"name":"critical bug","color":"e10c02"},"performed_via_github_app":null},{"id":678818967,"node_id":"MDEyOkxhYmVsZWRFdmVudDY3ODgxODk2Nw==","url":"https://api.github.com/repos/redis/redis/issues/events/678818967","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-06-01T18:22:26Z","label":{"name":"sentinel","color":"207de5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/223814717","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-223814717","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":223814717,"node_id":"MDEyOklzc3VlQ29tbWVudDIyMzgxNDcxNw==","user":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-05T14:02:10Z","updated_at":"2016-06-05T14:02:10Z","body":"thanks antirez\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/223814717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/224259437","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-224259437","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":224259437,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDI1OTQzNw==","user":{"login":"mayuraviraj","id":4223352,"node_id":"MDQ6VXNlcjQyMjMzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/4223352?v=4","gravatar_id":"","url":"https://api.github.com/users/mayuraviraj","html_url":"https://github.com/mayuraviraj","followers_url":"https://api.github.com/users/mayuraviraj/followers","following_url":"https://api.github.com/users/mayuraviraj/following{/other_user}","gists_url":"https://api.github.com/users/mayuraviraj/gists{/gist_id}","starred_url":"https://api.github.com/users/mayuraviraj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayuraviraj/subscriptions","organizations_url":"https://api.github.com/users/mayuraviraj/orgs","repos_url":"https://api.github.com/users/mayuraviraj/repos","events_url":"https://api.github.com/users/mayuraviraj/events{/privacy}","received_events_url":"https://api.github.com/users/mayuraviraj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-07T12:01:15Z","updated_at":"2016-06-07T12:01:15Z","body":"I faced this issue on Redis 3.0.7 version also even-though here it is said that issue is not there in 3.0.7 \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/224259437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mayuraviraj","id":4223352,"node_id":"MDQ6VXNlcjQyMjMzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/4223352?v=4","gravatar_id":"","url":"https://api.github.com/users/mayuraviraj","html_url":"https://github.com/mayuraviraj","followers_url":"https://api.github.com/users/mayuraviraj/followers","following_url":"https://api.github.com/users/mayuraviraj/following{/other_user}","gists_url":"https://api.github.com/users/mayuraviraj/gists{/gist_id}","starred_url":"https://api.github.com/users/mayuraviraj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayuraviraj/subscriptions","organizations_url":"https://api.github.com/users/mayuraviraj/orgs","repos_url":"https://api.github.com/users/mayuraviraj/repos","events_url":"https://api.github.com/users/mayuraviraj/events{/privacy}","received_events_url":"https://api.github.com/users/mayuraviraj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/224326637","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-224326637","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":224326637,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDMyNjYzNw==","user":{"login":"cankaya07","id":573040,"node_id":"MDQ6VXNlcjU3MzA0MA==","avatar_url":"https://avatars.githubusercontent.com/u/573040?v=4","gravatar_id":"","url":"https://api.github.com/users/cankaya07","html_url":"https://github.com/cankaya07","followers_url":"https://api.github.com/users/cankaya07/followers","following_url":"https://api.github.com/users/cankaya07/following{/other_user}","gists_url":"https://api.github.com/users/cankaya07/gists{/gist_id}","starred_url":"https://api.github.com/users/cankaya07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cankaya07/subscriptions","organizations_url":"https://api.github.com/users/cankaya07/orgs","repos_url":"https://api.github.com/users/cankaya07/repos","events_url":"https://api.github.com/users/cankaya07/events{/privacy}","received_events_url":"https://api.github.com/users/cankaya07/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-07T15:57:09Z","updated_at":"2016-06-07T15:57:09Z","body":"i faced similar issue on 3.0.7 and 3.2.0 i think main problem sentinel couldn't change old master.'s configuration preoperly. i checked the old master's configuration files modified date. It is changing all the tme  [i explained here](http://stackoverflow.com/questions/37394453/redis-failover-cluster-convert-to-slave) @antirez is it same problem?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/224326637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cankaya07","id":573040,"node_id":"MDQ6VXNlcjU3MzA0MA==","avatar_url":"https://avatars.githubusercontent.com/u/573040?v=4","gravatar_id":"","url":"https://api.github.com/users/cankaya07","html_url":"https://github.com/cankaya07","followers_url":"https://api.github.com/users/cankaya07/followers","following_url":"https://api.github.com/users/cankaya07/following{/other_user}","gists_url":"https://api.github.com/users/cankaya07/gists{/gist_id}","starred_url":"https://api.github.com/users/cankaya07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cankaya07/subscriptions","organizations_url":"https://api.github.com/users/cankaya07/orgs","repos_url":"https://api.github.com/users/cankaya07/repos","events_url":"https://api.github.com/users/cankaya07/events{/privacy}","received_events_url":"https://api.github.com/users/cankaya07/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":684580052,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Njg0NTgwMDUy","url":"https://api.github.com/repos/redis/redis/issues/events/684580052","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-07T15:57:09Z","performed_via_github_app":null},{"id":684580053,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDY4NDU4MDA1Mw==","url":"https://api.github.com/repos/redis/redis/issues/events/684580053","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-07T15:57:09Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/225166431","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-225166431","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":225166431,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTE2NjQzMQ==","user":{"login":"rolette","id":19616074,"node_id":"MDQ6VXNlcjE5NjE2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/19616074?v=4","gravatar_id":"","url":"https://api.github.com/users/rolette","html_url":"https://github.com/rolette","followers_url":"https://api.github.com/users/rolette/followers","following_url":"https://api.github.com/users/rolette/following{/other_user}","gists_url":"https://api.github.com/users/rolette/gists{/gist_id}","starred_url":"https://api.github.com/users/rolette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rolette/subscriptions","organizations_url":"https://api.github.com/users/rolette/orgs","repos_url":"https://api.github.com/users/rolette/repos","events_url":"https://api.github.com/users/rolette/events{/privacy}","received_events_url":"https://api.github.com/users/rolette/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-10T12:14:40Z","updated_at":"2016-06-10T12:14:40Z","body":"@cankaya07: not the same problem... Sentinel can update the config file just fine\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/225166431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rolette","id":19616074,"node_id":"MDQ6VXNlcjE5NjE2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/19616074?v=4","gravatar_id":"","url":"https://api.github.com/users/rolette","html_url":"https://github.com/rolette","followers_url":"https://api.github.com/users/rolette/followers","following_url":"https://api.github.com/users/rolette/following{/other_user}","gists_url":"https://api.github.com/users/rolette/gists{/gist_id}","starred_url":"https://api.github.com/users/rolette/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rolette/subscriptions","organizations_url":"https://api.github.com/users/rolette/orgs","repos_url":"https://api.github.com/users/rolette/repos","events_url":"https://api.github.com/users/rolette/events{/privacy}","received_events_url":"https://api.github.com/users/rolette/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":688490072,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Njg4NDkwMDcy","url":"https://api.github.com/repos/redis/redis/issues/events/688490072","actor":{"login":"cankaya07","id":573040,"node_id":"MDQ6VXNlcjU3MzA0MA==","avatar_url":"https://avatars.githubusercontent.com/u/573040?v=4","gravatar_id":"","url":"https://api.github.com/users/cankaya07","html_url":"https://github.com/cankaya07","followers_url":"https://api.github.com/users/cankaya07/followers","following_url":"https://api.github.com/users/cankaya07/following{/other_user}","gists_url":"https://api.github.com/users/cankaya07/gists{/gist_id}","starred_url":"https://api.github.com/users/cankaya07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cankaya07/subscriptions","organizations_url":"https://api.github.com/users/cankaya07/orgs","repos_url":"https://api.github.com/users/cankaya07/repos","events_url":"https://api.github.com/users/cankaya07/events{/privacy}","received_events_url":"https://api.github.com/users/cankaya07/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-10T12:14:40Z","performed_via_github_app":null},{"id":688490073,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDY4ODQ5MDA3Mw==","url":"https://api.github.com/repos/redis/redis/issues/events/688490073","actor":{"login":"cankaya07","id":573040,"node_id":"MDQ6VXNlcjU3MzA0MA==","avatar_url":"https://avatars.githubusercontent.com/u/573040?v=4","gravatar_id":"","url":"https://api.github.com/users/cankaya07","html_url":"https://github.com/cankaya07","followers_url":"https://api.github.com/users/cankaya07/followers","following_url":"https://api.github.com/users/cankaya07/following{/other_user}","gists_url":"https://api.github.com/users/cankaya07/gists{/gist_id}","starred_url":"https://api.github.com/users/cankaya07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cankaya07/subscriptions","organizations_url":"https://api.github.com/users/cankaya07/orgs","repos_url":"https://api.github.com/users/cankaya07/repos","events_url":"https://api.github.com/users/cankaya07/events{/privacy}","received_events_url":"https://api.github.com/users/cankaya07/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-10T12:14:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/225464268","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-225464268","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":225464268,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNTQ2NDI2OA==","user":{"login":"prachetasp","id":3642289,"node_id":"MDQ6VXNlcjM2NDIyODk=","avatar_url":"https://avatars.githubusercontent.com/u/3642289?v=4","gravatar_id":"","url":"https://api.github.com/users/prachetasp","html_url":"https://github.com/prachetasp","followers_url":"https://api.github.com/users/prachetasp/followers","following_url":"https://api.github.com/users/prachetasp/following{/other_user}","gists_url":"https://api.github.com/users/prachetasp/gists{/gist_id}","starred_url":"https://api.github.com/users/prachetasp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prachetasp/subscriptions","organizations_url":"https://api.github.com/users/prachetasp/orgs","repos_url":"https://api.github.com/users/prachetasp/repos","events_url":"https://api.github.com/users/prachetasp/events{/privacy}","received_events_url":"https://api.github.com/users/prachetasp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-12T22:26:31Z","updated_at":"2016-06-12T22:26:31Z","body":"+1\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/225464268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"prachetasp","id":3642289,"node_id":"MDQ6VXNlcjM2NDIyODk=","avatar_url":"https://avatars.githubusercontent.com/u/3642289?v=4","gravatar_id":"","url":"https://api.github.com/users/prachetasp","html_url":"https://github.com/prachetasp","followers_url":"https://api.github.com/users/prachetasp/followers","following_url":"https://api.github.com/users/prachetasp/following{/other_user}","gists_url":"https://api.github.com/users/prachetasp/gists{/gist_id}","starred_url":"https://api.github.com/users/prachetasp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prachetasp/subscriptions","organizations_url":"https://api.github.com/users/prachetasp/orgs","repos_url":"https://api.github.com/users/prachetasp/repos","events_url":"https://api.github.com/users/prachetasp/events{/privacy}","received_events_url":"https://api.github.com/users/prachetasp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/226491352","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-226491352","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":226491352,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjQ5MTM1Mg==","user":{"login":"sskorgal","id":19685108,"node_id":"MDQ6VXNlcjE5Njg1MTA4","avatar_url":"https://avatars.githubusercontent.com/u/19685108?v=4","gravatar_id":"","url":"https://api.github.com/users/sskorgal","html_url":"https://github.com/sskorgal","followers_url":"https://api.github.com/users/sskorgal/followers","following_url":"https://api.github.com/users/sskorgal/following{/other_user}","gists_url":"https://api.github.com/users/sskorgal/gists{/gist_id}","starred_url":"https://api.github.com/users/sskorgal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sskorgal/subscriptions","organizations_url":"https://api.github.com/users/sskorgal/orgs","repos_url":"https://api.github.com/users/sskorgal/repos","events_url":"https://api.github.com/users/sskorgal/events{/privacy}","received_events_url":"https://api.github.com/users/sskorgal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-16T13:53:04Z","updated_at":"2016-06-16T13:53:04Z","body":"Every time sentinel tries to create commands connection for old master sentinel redis instance (which is down), it sends ping and increment link->pending_commands, but since link establish fails, we reset command connection and set link status to disconnect, but pending_commands is not reset. So, pending_commands keeps growing beyond SENTINEL_MAX_PENDING_COMMANDS (as there is no boundary check before sending ping command).\n\nOnce old master comes up, sentinel will not send sentinelSendPeriodicCommands, as there is a limit on link->pending_commands, which has been exceeded. So, INFO command is not sent to old master and there by sentinel does not get to know the actual role of old master. \n\nFix: to reset pending_commands while handling link connection error in instanceLinkConnectionError \n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/226491352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sskorgal","id":19685108,"node_id":"MDQ6VXNlcjE5Njg1MTA4","avatar_url":"https://avatars.githubusercontent.com/u/19685108?v=4","gravatar_id":"","url":"https://api.github.com/users/sskorgal","html_url":"https://github.com/sskorgal","followers_url":"https://api.github.com/users/sskorgal/followers","following_url":"https://api.github.com/users/sskorgal/following{/other_user}","gists_url":"https://api.github.com/users/sskorgal/gists{/gist_id}","starred_url":"https://api.github.com/users/sskorgal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sskorgal/subscriptions","organizations_url":"https://api.github.com/users/sskorgal/orgs","repos_url":"https://api.github.com/users/sskorgal/repos","events_url":"https://api.github.com/users/sskorgal/events{/privacy}","received_events_url":"https://api.github.com/users/sskorgal/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/226493896","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-226493896","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":226493896,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjQ5Mzg5Ng==","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-16T14:01:25Z","updated_at":"2016-06-16T14:01:25Z","body":"Since this is a regression, I believe it has something to do with the huge connection management refactoring that happened in 3.2, so the @sskorgal explanation looks interesting. I'm trying to verify what happens today in order to try fixing it ASAP for 3.2.1. Thanks for the reports.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/226493896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":694669890,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Njk0NjY5ODkw","url":"https://api.github.com/repos/redis/redis/issues/events/694669890","actor":{"login":"sskorgal","id":19685108,"node_id":"MDQ6VXNlcjE5Njg1MTA4","avatar_url":"https://avatars.githubusercontent.com/u/19685108?v=4","gravatar_id":"","url":"https://api.github.com/users/sskorgal","html_url":"https://github.com/sskorgal","followers_url":"https://api.github.com/users/sskorgal/followers","following_url":"https://api.github.com/users/sskorgal/following{/other_user}","gists_url":"https://api.github.com/users/sskorgal/gists{/gist_id}","starred_url":"https://api.github.com/users/sskorgal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sskorgal/subscriptions","organizations_url":"https://api.github.com/users/sskorgal/orgs","repos_url":"https://api.github.com/users/sskorgal/repos","events_url":"https://api.github.com/users/sskorgal/events{/privacy}","received_events_url":"https://api.github.com/users/sskorgal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-16T14:01:25Z","performed_via_github_app":null},{"id":694669894,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDY5NDY2OTg5NA==","url":"https://api.github.com/repos/redis/redis/issues/events/694669894","actor":{"login":"sskorgal","id":19685108,"node_id":"MDQ6VXNlcjE5Njg1MTA4","avatar_url":"https://avatars.githubusercontent.com/u/19685108?v=4","gravatar_id":"","url":"https://api.github.com/users/sskorgal","html_url":"https://github.com/sskorgal","followers_url":"https://api.github.com/users/sskorgal/followers","following_url":"https://api.github.com/users/sskorgal/following{/other_user}","gists_url":"https://api.github.com/users/sskorgal/gists{/gist_id}","starred_url":"https://api.github.com/users/sskorgal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sskorgal/subscriptions","organizations_url":"https://api.github.com/users/sskorgal/orgs","repos_url":"https://api.github.com/users/sskorgal/repos","events_url":"https://api.github.com/users/sskorgal/events{/privacy}","received_events_url":"https://api.github.com/users/sskorgal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-16T14:01:25Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/226548850","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-226548850","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":226548850,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjU0ODg1MA==","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-16T17:03:56Z","updated_at":"2016-06-16T17:03:56Z","body":"Hello, just to say that I investigated the issue for quite some time, and I believe @sskorgal is correct.\n\nThe reason the problem is not always trivial to verify, is that sometimes connect fails immediately when the instance is down so:\n1. `SentinelReconnectInstance` calls `redisAsyncConnectBind`.\n2. We get lucky and `link->cc->err` is true.\n3. If so, `instanceLinkCloseConnection()` gets called and resets the pending count.\n\nGiven that it looks like that's the root cause, the fix should be straightforward, as @sskorgal suggested, that is, just to reset the count when we reset the link in `instanceLinkConnectionError`.\n\nChecking if the fix works as expected.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/226548850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":694925067,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50Njk0OTI1MDY3","url":"https://api.github.com/repos/redis/redis/issues/events/694925067","actor":{"login":"sskorgal","id":19685108,"node_id":"MDQ6VXNlcjE5Njg1MTA4","avatar_url":"https://avatars.githubusercontent.com/u/19685108?v=4","gravatar_id":"","url":"https://api.github.com/users/sskorgal","html_url":"https://github.com/sskorgal","followers_url":"https://api.github.com/users/sskorgal/followers","following_url":"https://api.github.com/users/sskorgal/following{/other_user}","gists_url":"https://api.github.com/users/sskorgal/gists{/gist_id}","starred_url":"https://api.github.com/users/sskorgal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sskorgal/subscriptions","organizations_url":"https://api.github.com/users/sskorgal/orgs","repos_url":"https://api.github.com/users/sskorgal/repos","events_url":"https://api.github.com/users/sskorgal/events{/privacy}","received_events_url":"https://api.github.com/users/sskorgal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-06-16T17:03:56Z","performed_via_github_app":null},{"id":694925068,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDY5NDkyNTA2OA==","url":"https://api.github.com/repos/redis/redis/issues/events/694925068","actor":{"login":"sskorgal","id":19685108,"node_id":"MDQ6VXNlcjE5Njg1MTA4","avatar_url":"https://avatars.githubusercontent.com/u/19685108?v=4","gravatar_id":"","url":"https://api.github.com/users/sskorgal","html_url":"https://github.com/sskorgal","followers_url":"https://api.github.com/users/sskorgal/followers","following_url":"https://api.github.com/users/sskorgal/following{/other_user}","gists_url":"https://api.github.com/users/sskorgal/gists{/gist_id}","starred_url":"https://api.github.com/users/sskorgal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sskorgal/subscriptions","organizations_url":"https://api.github.com/users/sskorgal/orgs","repos_url":"https://api.github.com/users/sskorgal/repos","events_url":"https://api.github.com/users/sskorgal/events{/privacy}","received_events_url":"https://api.github.com/users/sskorgal/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-06-16T17:03:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/226549303","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-226549303","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":226549303,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjU0OTMwMw==","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-16T17:05:42Z","updated_at":"2016-06-16T17:05:42Z","body":"Btw handling this like that is **fragile** like hell. The root cause of this design is that the hiredis library is not capable of providing the number of pending callbacks, otherwise we may avoid keeping any count at all, and just check from time to time and kill the link completely if it looks like our queue is too big. We could implement killing after a given limit is reached even right now taking the count ourselves, but there is always the fear of mis-counting because of the complexity of the callbacks and links that can get reset in the meantime.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/226549303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/226551199","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-226551199","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":226551199,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNjU1MTE5OQ==","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-16T17:12:46Z","updated_at":"2016-06-16T17:13:00Z","body":"On top of that note that, actually, it is not possible to reset `pending_commands` in `instanceLinkConnectionError()`, since this gets called only in the context of an error reported by hiredis. If we reset the count there, the hiredis callback, after returning, will process the pending requests that will contain `pending_commands--` in order to report back the count to 0, so we'll get negative pending commands count.\n\nApparently the best strategy appears to do that on reconnection instead:\n\n``` diff\ndiff --git a/src/sentinel.c b/src/sentinel.c\nindex 6c48f3e..f8ebd0c 100644\n--- a/src/sentinel.c\n+++ b/src/sentinel.c\n@@ -1910,6 +1910,7 @@ void sentinelReconnectInstance(sentinelRedisInstance *ri) {\n                 link->cc->errstr);\n             instanceLinkCloseConnection(link,link->cc);\n         } else {\n+            link->pending_commands = 0;\n             link->cc_conn_time = mstime();\n             link->cc->data = link;\n             redisAeAttach(server.el,link->cc);\n```\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/226551199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":694955045,"node_id":"MDExOkNsb3NlZEV2ZW50Njk0OTU1MDQ1","url":"https://api.github.com/repos/redis/redis/issues/events/694955045","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f7351f4c07f5e0b1c9bdb6949f45f84576ffd75f","commit_url":"https://api.github.com/repos/redis/redis/commits/f7351f4c07f5e0b1c9bdb6949f45f84576ffd75f","created_at":"2016-06-16T17:28:01Z","state_reason":null,"performed_via_github_app":null},{"id":694955066,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDY5NDk1NTA2Ng==","url":"https://api.github.com/repos/redis/redis/issues/events/694955066","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6ad0371c9b4206a7a6692d50c9a301457baf9b6d","commit_url":"https://api.github.com/repos/redis/redis/commits/6ad0371c9b4206a7a6692d50c9a301457baf9b6d","created_at":"2016-06-16T17:28:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/227355914","html_url":"https://github.com/redis/redis/issues/3285#issuecomment-227355914","issue_url":"https://api.github.com/repos/redis/redis/issues/3285","id":227355914,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNzM1NTkxNA==","user":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-21T06:55:41Z","updated_at":"2016-06-21T10:23:17Z","body":"Thanks antirez and sskorgal.\n\nI have tested it out and can confirm that its fixed in 3.2.1, thanks again.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/227355914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"md-gh","id":1709533,"node_id":"MDQ6VXNlcjE3MDk1MzM=","avatar_url":"https://avatars.githubusercontent.com/u/1709533?v=4","gravatar_id":"","url":"https://api.github.com/users/md-gh","html_url":"https://github.com/md-gh","followers_url":"https://api.github.com/users/md-gh/followers","following_url":"https://api.github.com/users/md-gh/following{/other_user}","gists_url":"https://api.github.com/users/md-gh/gists{/gist_id}","starred_url":"https://api.github.com/users/md-gh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/md-gh/subscriptions","organizations_url":"https://api.github.com/users/md-gh/orgs","repos_url":"https://api.github.com/users/md-gh/repos","events_url":"https://api.github.com/users/md-gh/events{/privacy}","received_events_url":"https://api.github.com/users/md-gh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":770173253,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDc3MDE3MzI1Mw==","url":"https://api.github.com/repos/redis/redis/issues/events/770173253","actor":{"login":"JackieXie168","id":8347113,"node_id":"MDQ6VXNlcjgzNDcxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/8347113?v=4","gravatar_id":"","url":"https://api.github.com/users/JackieXie168","html_url":"https://github.com/JackieXie168","followers_url":"https://api.github.com/users/JackieXie168/followers","following_url":"https://api.github.com/users/JackieXie168/following{/other_user}","gists_url":"https://api.github.com/users/JackieXie168/gists{/gist_id}","starred_url":"https://api.github.com/users/JackieXie168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JackieXie168/subscriptions","organizations_url":"https://api.github.com/users/JackieXie168/orgs","repos_url":"https://api.github.com/users/JackieXie168/repos","events_url":"https://api.github.com/users/JackieXie168/events{/privacy}","received_events_url":"https://api.github.com/users/JackieXie168/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2ba860f8c00aaddf0886157769eca6fe9fed3269","commit_url":"https://api.github.com/repos/JackieXie168/redis/commits/2ba860f8c00aaddf0886157769eca6fe9fed3269","created_at":"2016-08-29T02:51:40Z","performed_via_github_app":null},{"id":1422936336,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE0MjI5MzYzMzY=","url":"https://api.github.com/repos/redis/redis/issues/events/1422936336","actor":{"login":"JackieXie168","id":8347113,"node_id":"MDQ6VXNlcjgzNDcxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/8347113?v=4","gravatar_id":"","url":"https://api.github.com/users/JackieXie168","html_url":"https://github.com/JackieXie168","followers_url":"https://api.github.com/users/JackieXie168/followers","following_url":"https://api.github.com/users/JackieXie168/following{/other_user}","gists_url":"https://api.github.com/users/JackieXie168/gists{/gist_id}","starred_url":"https://api.github.com/users/JackieXie168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JackieXie168/subscriptions","organizations_url":"https://api.github.com/users/JackieXie168/orgs","repos_url":"https://api.github.com/users/JackieXie168/repos","events_url":"https://api.github.com/users/JackieXie168/events{/privacy}","received_events_url":"https://api.github.com/users/JackieXie168/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8f3bd06a5adfa9124fee01e868f7d9198c2ae804","commit_url":"https://api.github.com/repos/JackieXie168/redis/commits/8f3bd06a5adfa9124fee01e868f7d9198c2ae804","created_at":"2018-01-13T11:22:26Z","performed_via_github_app":null},{"id":9665455100,"node_id":"REFE_lADOAAJhcs4JZa5izwAAAAJAGyP8","url":"https://api.github.com/repos/redis/redis/issues/events/9665455100","actor":{"login":"pulllock","id":5352960,"node_id":"MDQ6VXNlcjUzNTI5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/5352960?v=4","gravatar_id":"","url":"https://api.github.com/users/pulllock","html_url":"https://github.com/pulllock","followers_url":"https://api.github.com/users/pulllock/followers","following_url":"https://api.github.com/users/pulllock/following{/other_user}","gists_url":"https://api.github.com/users/pulllock/gists{/gist_id}","starred_url":"https://api.github.com/users/pulllock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pulllock/subscriptions","organizations_url":"https://api.github.com/users/pulllock/orgs","repos_url":"https://api.github.com/users/pulllock/repos","events_url":"https://api.github.com/users/pulllock/events{/privacy}","received_events_url":"https://api.github.com/users/pulllock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9d450c4e7c6e17af6d5281a19263493ffe815553","commit_url":"https://api.github.com/repos/pulllock/redis/commits/9d450c4e7c6e17af6d5281a19263493ffe815553","created_at":"2023-06-28T14:23:44Z","performed_via_github_app":null}]