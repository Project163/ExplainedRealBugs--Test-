{"url":"https://api.github.com/repos/redis/redis/issues/3766","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/3766/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/3766/comments","events_url":"https://api.github.com/repos/redis/redis/issues/3766/events","html_url":"https://github.com/redis/redis/issues/3766","id":202356311,"node_id":"MDU6SXNzdWUyMDIzNTYzMTE=","number":3766,"title":"crash report on hyperloglog","user":{"login":"wangruowr","id":19812589,"node_id":"MDQ6VXNlcjE5ODEyNTg5","avatar_url":"https://avatars.githubusercontent.com/u/19812589?v=4","gravatar_id":"","url":"https://api.github.com/users/wangruowr","html_url":"https://github.com/wangruowr","followers_url":"https://api.github.com/users/wangruowr/followers","following_url":"https://api.github.com/users/wangruowr/following{/other_user}","gists_url":"https://api.github.com/users/wangruowr/gists{/gist_id}","starred_url":"https://api.github.com/users/wangruowr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangruowr/subscriptions","organizations_url":"https://api.github.com/users/wangruowr/orgs","repos_url":"https://api.github.com/users/wangruowr/repos","events_url":"https://api.github.com/users/wangruowr/events{/privacy}","received_events_url":"https://api.github.com/users/wangruowr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1198954,"node_id":"MDU6TGFiZWwxMTk4OTU0","url":"https://api.github.com/repos/redis/redis/labels/crash%20report","name":"crash report","color":"e10c02","default":false,"description":null},{"id":504143853,"node_id":"MDU6TGFiZWw1MDQxNDM4NTM=","url":"https://api.github.com/repos/redis/redis/labels/security","name":"security","color":"000000","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/redis/redis/milestones/8","html_url":"https://github.com/redis/redis/milestone/8","labels_url":"https://api.github.com/repos/redis/redis/milestones/8/labels","id":2193461,"node_id":"MDk6TWlsZXN0b25lMjE5MzQ2MQ==","number":8,"title":"Urgent","description":"Things that should be addressed ASAP","creator":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":6,"closed_issues":21,"state":"open","created_at":"2016-12-13T08:23:12Z","updated_at":"2021-12-24T12:29:51Z","due_on":null,"closed_at":null},"comments":4,"created_at":"2017-01-22T03:09:43Z","updated_at":"2017-07-11T10:59:15Z","closed_at":"2017-07-11T10:46:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello,\r\n\r\nWe encountered a crash on the official 3.2.6 version when doing a massive pressure testing,\r\nThe case is that we are operating random keys with different types, for example, using a list set with a string get, which is very unpredictable.\r\n\r\n3.2.6 crashes quickly when using a pfadd that operating on a string key,\r\nin `isHLLObjectOrReply`, it crashed on line `if (hdr->magic[0] != 'H' || hdr->magic[1] != 'Y'`, by decoding the assembly, the hdr is 0x7fffffffffffffff,\r\n\r\n```\r\n   0x000000000047b5fb <+43>:\tcallq  0x4383c0 <stringObjectLen>\r\n   0x000000000047b600 <+48>:\tcmp    $0xf,%rax\r\n   0x000000000047b604 <+52>:\tjbe    0x47b650 <isHLLObjectOrReply+128>\r\n   0x000000000047b606 <+54>:\tmov    0x8(%rbx),%rax\r\n   0x000000000047b60a <+58>:\tcmpb   $0x48,(%rax)     // testing H\r\n   0x000000000047b60d <+61>:\tjne    0x47b650 <isHLLObjectOrReply+128>\r\n   0x000000000047b60f <+63>:\tcmpb   $0x59,0x1(%rax)\r\n   0x000000000047b613 <+67>:\tjne    0x47b650 <isHLLObjectOrReply+128>\r\n   0x000000000047b615 <+69>:\tcmpb   $0x4c,0x2(%rax)\r\n```\r\n\r\nStack report is listed below(IPs are replaced as xxx due to publish policy)\r\n\r\n```\r\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\r\n69277:M 19 Jan 20:13:32.284 # Redis 3.2.6 crashed by signal: 11\r\n69277:M 19 Jan 20:13:32.284 # Crashed running the instuction at: 0x47b60a\r\n69277:M 19 Jan 20:13:32.284 # Accessing address: (nil)\r\n69277:M 19 Jan 20:13:32.284 # Failed assertion: <no assertion failed> (<no file>:0)\r\n\r\n------ STACK TRACE ------\r\nEIP:\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(isHLLObjectOrReply+0x3a)[0x47b60a]\r\n\r\nBacktrace:\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(logStackTrace+0x3c)[0x45bfcc]\r\n/opt/csr/redis-3.2.6/bin/redis-serverxxx.xxx.xxx.xxx:15777(sigsegvHandler+0xa3)[0x45ceb3]\r\n/lib64/libpthread.so.0(+0xf7e0)[0x7f40250987e0]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(isHLLObjectOrReply+0x3a)[0x47b60a]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(pfaddCommand+0x48)[0x47cbf8]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(call+0x72)[0x424202]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(processCommand+0x365)[0x428e95]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(processInputBuffer+0x109)[0x4351a9]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(aeProcessEvents+0x13d)[0x41f8cd]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx:15777(aeMain+0x2b)[0x41fbcb]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx::15777(main+0x370)[0x427340]\r\n/lib64/libc.so.6(__libc_start_main+0xfd)[0x7f4024d13d5d]\r\n/opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.xxx::15777[0x41d099]\r\n\r\n------ INFO OUTPUT ------\r\n# Server^M\r\nredis_version:3.2.6^M\r\nredis_git_sha1:ff7c7d69^M\r\nredis_git_dirty:1^M\r\nredis_build_id:27cf2f0dc4e4a342^M\r\nredis_mode:standalone^M\r\nos:Linux 2.6.32-220.23.2.ali878.el6.x86_64 x86_64^M\r\narch_bits:64^M\r\nmultiplexing_api:epoll^M\r\ngcc_version:4.4.6^M\r\nprocess_id:69277^M\r\nrun_id:2d7d1424dca265d8fde6a6ddc93ceafffbe05296^M\r\ntcp_port:15777^M\r\nuptime_in_seconds:524^M\r\nuptime_in_days:0^M\r\nhz:10^M\r\nlru_clock:8433004^M\r\nexecutable:/opt/csr/redis-3.2.6/bin/redis-server^M\r\nconfig_file:/home/admin/redis/777/redis.conf^M\r\n^M\r\n# Clients^M\r\nconnected_clients:22^M\r\nclient_longest_output_list:0\r\nclient_biggest_input_buf:0^M\r\nblocked_clients:0^M\r\n^M\r\n# Memory^M\r\nused_memory:2223832^M\r\nused_memory_human:2.12M^M\r\nused_memory_rss:3870720^M\r\nused_memory_rss_human:3.69M^M\r\nused_memory_peak:2435880^M\r\nused_memory_peak_human:2.32M^M\r\ntotal_system_memory:101543587840^M\r\ntotal_system_memory_human:94.57G^M\r\nused_memory_lua:37888^M\r\nused_memory_lua_human:37.00K^M\r\nmaxmemory:0^M\r\nmaxmemory_human:0B^M\r\nmaxmemory_policy:noeviction^M\r\nmem_fragmentation_ratio:1.74^M\r\nmem_allocator:jemalloc-4.0.3^M\r\n^M\r\n# Persistence^M\r\nloading:0^M\r\nrdb_changes_since_last_save:502304^M\r\nrdb_bgsave_in_progress:0^M\r\nrdb_last_save_time:1484827488^M\r\nrdb_last_bgsave_status:ok^M\r\nrdb_last_bgsave_time_sec:-1^M\r\nrdb_current_bgsave_time_sec:-1^M\r\naof_enabled:0^M\r\naof_rewrite_in_progress:0^M\r\naof_rewrite_scheduled:0^M\r\naof_last_rewrite_time_sec:-1^M\r\naof_current_rewrite_time_sec:-1^M\r\naof_last_bgrewrite_status:ok^M\r\naof_last_write_status:ok^M\r\n^M\r\n# Stats^M\r\ntotal_connections_received:3706^M\r\ntotal_commands_processed:857173^M\r\ninstantaneous_ops_per_sec:9265^M\r\ntotal_net_input_bytes:102186662^M\r\ntotal_net_output_bytes:17500011^M\r\ninstantaneous_input_kbps:817.89^M\r\ninstantaneous_output_kbps:186.16^M\r\nrejected_connections:0^M\r\nsync_full:0^M\r\nsync_partial_ok:0^M\r\nsync_partial_err:0^M\r\nexpired_keys:0^M\r\nevicted_keys:0^M\r\nkeyspace_hits:156121^M\r\nkeyspace_misses:11453^M\r\npubsub_channels:0^M\r\npubsub_patterns:0^M\r\nlatest_fork_usec:0^M\r\nmigrate_cached_sockets:0^M\r\n^M\r\n# Replication^M\r\nrole:master^M\r\nconnected_slaves:0^M\r\nmaster_repl_offset:0^M\r\nrepl_backlog_active:0^M\r\nrepl_backlog_size:1048576^M\r\nrepl_backlog_first_byte_offset:0^M\r\nrepl_backlog_histlen:0^M\r\n^M\r\n# CPU^M\r\nused_cpu_sys:8.01^M\r\nused_cpu_user:7.03^M\r\nused_cpu_sys_children:0.00^M\r\nused_cpu_user_children:0.00^M\r\n^M\r\n# Commandstats^M\r\ncmdstat_get:calls=15320,usec=23904,usec_per_call=1.56^M\r\ncmdstat_set:calls=19223,usec=41642,usec_per_call=2.17^M\r\ncmdstat_setnx:calls=3209,usec=5332,usec_per_call=1.66^M\r\ncmdstat_setex:calls=1597,usec=4256,usec_per_call=2.66^M\r\ncmdstat_psetex:calls=834,usec=2168,usec_per_call=2.60^M\r\ncmdstat_append:calls=3230,usec=7947,usec_per_call=2.46^M\r\ncmdstat_strlen:calls=822,usec=1127,usec_per_call=1.37^M\r\ncmdstat_del:calls=300922,usec=362744,usec_per_call=1.21^M\r\ncmdstat_substr:calls=3246,usec=6131,usec_per_call=1.89^M\r\ncmdstat_incr:calls=6580,usec=12118,usec_per_call=1.84^M\r\ncmdstat_decr:calls=4814,usec=8022,usec_per_call=1.67^M\r\ncmdstat_rpush:calls=20804,usec=57474,usec_per_call=2.76^M\r\ncmdstat_lpush:calls=39011,usec=114246,usec_per_call=2.93^M\r\ncmdstat_rpushx:calls=3171,usec=5740,usec_per_call=1.81^M\r\ncmdstat_lpushx:calls=3199,usec=6124,usec_per_call=1.91^M\r\ncmdstat_linsert:calls=4793,usec=11768,usec_per_call=2.46^M\r\ncmdstat_rpop:calls=6454,usec=14773,usec_per_call=2.29^M\r\ncmdstat_lpop:calls=6401,usec=14935,usec_per_call=2.33^M\r\ncmdstat_llen:calls=6264,usec=7302,usec_per_call=1.17^M\r\ncmdstat_lindex:calls=3216,usec=5056,usec_per_call=1.57^M\r\ncmdstat_lset:calls=1631,usec=4661,usec_per_call=2.86^M\r\ncmdstat_lrange:calls=18895,usec=48472,usec_per_call=2.57^M\r\ncmdstat_ltrim:calls=1519,usec=3690,usec_per_call=2.43^M\r\ncmdstat_lrem:calls=1459,usec=5330,usec_per_call=3.65^M\r\ncmdstat_sadd:calls=4631,usec=11450,usec_per_call=2.47^M\r\ncmdstat_zadd:calls=148868,usec=779170,usec_per_call=5.23^M\r\ncmdstat_zincrby:calls=1611,usec=13396,usec_per_call=8.32^M\r\ncmdstat_zrem:calls=7928,usec=20007,usec_per_call=2.52^M\r\ncmdstat_zremrangebyscore:calls=1577,usec=9250,usec_per_call=5.87^M\r\ncmdstat_zremrangebyrank:calls=1547,usec=3967,usec_per_call=2.56^M\r\ncmdstat_zremrangebylex:calls=1645,usec=8439,usec_per_call=5.13^M\r\ncmdstat_zrange:calls=14395,usec=53082,usec_per_call=3.69^M\r\ncmdstat_zrangebyscore:calls=11281,usec=118681,usec_per_call=10.52^M\r\ncmdstat_zrevrangebyscore:calls=12894,usec=130218,usec_per_call=10.10^M\r\ncmdstat_zrangebylex:calls=4811,usec=42503,usec_per_call=8.83^M\r\ncmdstat_zrevrangebylex:calls=3216,usec=28238,usec_per_call=8.78^M\r\ncmdstat_zcount:calls=3266,usec=16043,usec_per_call=4.91^M\r\ncmdstat_zlexcount:calls=4771,usec=17395,usec_per_call=3.65^M\r\ncmdstat_zrevrange:calls=6356,usec=33800,usec_per_call=5.32^M\r\ncmdstat_zcard:calls=1587,usec=2032,usec_per_call=1.28^M\r\ncmdstat_zscore:calls=4632,usec=20999,usec_per_call=4.53^M\r\ncmdstat_zrank:calls=3282,usec=4994,usec_per_call=1.52^M\r\ncmdstat_zrevrank:calls=3238,usec=4810,usec_per_call=1.49^M\r\ncmdstat_zscan:calls=4792,usec=26694,usec_per_call=5.57^M\r\ncmdstat_hset:calls=24584,usec=66887,usec_per_call=2.72^M\r\ncmdstat_hsetnx:calls=5179,usec=12769,usec_per_call=2.47^M\r\ncmdstat_hget:calls=16116,usec=28312,usec_per_call=1.76^M\r\ncmdstat_hmset:calls=14382,usec=53050,usec_per_call=3.69^M\r\ncmdstat_hmget:calls=1637,usec=4890,usec_per_call=2.99^M\r\ncmdstat_hincrby:calls=4707,usec=17158,usec_per_call=3.65^M\r\ncmdstat_hincrbyfloat:calls=4809,usec=45613,usec_per_call=9.48^M\r\ncmdstat_hdel:calls=8173,usec=15424,usec_per_call=1.89^M\r\ncmdstat_hlen:calls=3231,usec=3768,usec_per_call=1.17^M\r\ncmdstat_hkeys:calls=1630,usec=4785,usec_per_call=2.94^M\r\ncmdstat_hvals:calls=1615,usec=4659,usec_per_call=2.88^M\r\ncmdstat_hgetall:calls=1661,usec=5722,usec_per_call=3.44^M\r\ncmdstat_hexists:calls=4805,usec=6648,usec_per_call=1.38^M\r\ncmdstat_hscan:calls=4863,usec=32547,usec_per_call=6.69^M\r\ncmdstat_incrby:calls=5824,usec=11708,usec_per_call=2.01^M\r\ncmdstat_decrby:calls=4898,usec=8719,usec_per_call=1.78^M\r\ncmdstat_incrbyfloat:calls=2306,usec=14516,usec_per_call=6.29^M\r\ncmdstat_getset:calls=1679,usec=3678,usec_per_call=2.19^M\r\ncmdstat_ping:calls=3,usec=0,usec_per_call=0.00^M\r\ncmdstat_ttl:calls=4053,usec=8416,usec_per_call=2.08^M\r\ncmdstat_pfadd:calls=13922,usec=38733,usec_per_call=2.78^M\r\ncmdstat_pfcount:calls=4154,usec=10120,usec_per_call=2.44^M\r\n^M\r\n# Cluster^M\r\ncluster_enabled:0^M\r\n^M\r\n# Keyspace^M\r\ndb0:keys=837,expires=0,avg_ttl=0^M\r\nhash_init_value: 1485831819\r\n\r\n------ CLIENT LIST OUTPUT ------\r\nid=3426 addr=xxx.xxx.xxx.129:43636 fd=6 name= age=12 idle=2 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=lrange\r\nid=3694 addr=xxx.xxx.xxx.136:55293 fd=9 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=set\r\nid=3690 addr=xxx.xxx.xxx.136:54877 fd=23 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zscan\r\nid=3693 addr=xxx.xxx.xxx.136:54959 fd=24 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=set\r\nid=3427 addr=xxx.xxx.xxx.129:43640 fd=7 name= age=12 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3428 addr=xxx.xxx.xxx.129:43641 fd=15 name= age=12 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3429 addr=xxx.xxx.xxx.129:43642 fd=18 name= age=12 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3112 addr=xxx.xxx.xxx.129:42556 fd=17 name= age=16 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zadd\r\nid=3419 addr=xxx.xxx.xxx.xxx:43457 fd=5 name= age=12 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3682 addr=xxx.xxx.xxx.136:51015 fd=22 name= age=2 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3677 addr=xxx.xxx.xxx..136:50166 fd=25 name= age=2 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=decrby\r\nid=3111 addr=xxx.xxx.xxx..129:42545 fd=11 name= age=16 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3355 addr=xxx.xxx.xxx.129:42729 fd=30 name= age=14 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3370 addr=xxx.xxx.xxx..129:42735 fd=28 name= age=14 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=pfadd\r\nid=3422 addr=xxx.xxx.xxx..129:43503 fd=21 name= age=12 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3699 addr=xxx.xxx.xxx..136:56007 fd=19 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zrange\r\nid=3701 addr=xxx.xxx.xxx..136:56009 fd=27 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zscan\r\nid=3702 addr=xxx.xxx.xxx.136:56008 fd=29 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=del\r\nid=3703 addr=xxx.xxx.xxx.136:56011 fd=31 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=hlen\r\nid=3705 addr=xxx.xxx.xxx.136:56224 fd=10 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=get\r\nid=3706 addr=xxx.xxx.xxx.136:56227 fd=13 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zscan\r\nid=3707 addr=xxx.xxx.xxx.136:56346 fd=8 name= age=0 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zadd\r\n\r\n------ CURRENT CLIENT INFO ------\r\nid=3370 addr=xxx.xxx.xxx.129:42735 fd=28 name= age=14 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=pfadd\r\nargv[0]: 'PFADD'\r\nargv[1]: 'foopool-2-thread-4114848280122831'\r\nargv[2]: 'a'\r\n69277:M 19 Jan 20:13:32.285 # key 'foopool-2-thread-4114848280122831' found in DB containing the following object:\r\n69277:M 19 Jan 20:13:32.285 # Object type: 0\r\n69277:M 19 Jan 20:13:32.285 # Object encoding: 1\r\n69277:M 19 Jan 20:13:32.285 # Object refcount: 1\r\n\r\n------ REGISTERS ------\r\n69277:M 19 Jan 20:13:32.285 #\r\nRAX:7fffffffffffffff RBX:00007f401d0be020\r\nRCX:0000000000000013 RDX:00000000008cbccc\r\nRDI:00000000008cbccc RSI:00007f401d0be020\r\nRBP:00007f401d0c0180 RSP:00007fff5dde2350\r\nR8 :0000000000000001 R9 :00007f401e87cea3\r\nR10:00000000ffffffe4 R11:0000000000000007\r\nR12:0000000000000000 R13:0000000000000000\r\nR14:000000000007aa20 R15:0005467176398a31\r\nRIP:000000000047b60a EFL:0000000000010212\r\nCSGSFS:0000000000000033\r\n69277:M 19 Jan 20:13:32.285 # (00007fff5dde235f) -> 0000000000000001\r\n69277:M 19 Jan 20:13:32.285 # (00007fff5dde235e) -> 0000000000000000\r\n69277:M 19 Jan 20:13:32.285 # (00007fff5dde235d) -> 0000000000000000\r\n69277:M 19 Jan 20:13:32.285 # (00007fff5dde235c) -> 0000000000000000\r\n69277:M 19 Jan 20:13:32.285 # (00007fff5dde235b) -> 00007f401d0c0180\r\n69277:M 19 Jan 20:13:32.285 # (00007fff5dde235a) -> 00007f401e81b433\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2359) -> 0000000000424202\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2358) -> 000000000007aa20\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2357) -> 0000000000000000\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2356) -> 0000000000000000\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2355) -> 000000000000000f\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2354) -> 00007f401d0c0180\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2353) -> 000000000047cbf8\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2352) -> 00007f401d0be020\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2351) -> 00007f401d0c0180\r\n69277:M 19 Jan 20:13:32.286 # (00007fff5dde2350) -> 0005467176398a31\r\n\r\n------ FAST MEMORY TEST ------\r\n69277:M 19 Jan 20:13:32.286 # Bio thread for job type #0 terminated\r\n69277:M 19 Jan 20:13:32.286 # Bio thread for job type #1 terminated\r\n*** Preparing to test memory region 721000 (94208 bytes)\r\n*** Preparing to test memory region 216e000 (135168 bytes)\r\n*** Preparing to test memory region 7f401d000000 (2097152 bytes)\r\n*** Preparing to test memory region 7f401d3ff000 (10485760 bytes)\r\n*** Preparing to test memory region 7f401de00000 (10485760 bytes)\r\n*** Preparing to test memory region 7f401e800000 (2097152 bytes)\r\n*** Preparing to test memory region 7f4024a00000 (2097152 bytes)\r\n*** Preparing to test memory region 7f4025084000 (20480 bytes)\r\n*** Preparing to test memory region 7f40252a2000 (16384 bytes)\r\n*** Preparing to test memory region 7f4025f3e000 (12288 bytes)\r\n*** Preparing to test memory region 7f4025f50000 (4096 bytes)\r\n*** Preparing to test memory region 7f4025f51000 (8192 bytes)\r\n*** Preparing to test memory region 7f4025f53000 (4096 bytes)\r\n*** Preparing to test memory region 7f4025f56000 (4096 bytes)\r\n.O.O.O.O.O.O.O.O.O.O.O.O.O.O\r\nFast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\r\n------ DUMPING CODE AROUND EIP ------\r\nSymbol: isHLLObjectOrReply (base: 0x47b5d0)\r\nModule: /opt/csr/redis-3.2.6/bin/redis-server xxx.xxx.xxx.41:15777 (base 0x400000)\r\n$ xxd -r -p /tmp/dump.hex /tmp/dump.bin\r\n$ objdump --adjust-vma=0x47b5d0 -D -b binary -m i386:x86-64 /tmp/dump.bin\r\n------\r\n69277:M 19 Jan 20:13:32.418 # dump of function (hexdump of 186 bytes):\r\n5531d24889fd534889f34883ec08e86dbbfbff89c2b8ffffffff85d2740a4883c4085b5dc30f1f004889dfe8c0cdfbff4883f80f764a488b4308803848754180780159753b8078024c75358078034c752f0fb640043c01772784c074134883c40831c05b5dc3662e0f1f8400000000004889dfe878cdfbff483d1030000074ddbf30004f00e8c6f4faff4889ef4889c6e8bb86fbff4883c408b8ffffffff5b5dc36666666666662e0f1f8400000000004883ec08be1200000031\r\n\r\n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\r\n```\r\n\r\nIn our test, it could be triggered 100% percent when running test in a couple of minutes, I think this issue could be serious because it could trigger the DoS by crashing services, feel free to hide it if possible until rc found.\r\n\r\nThanks,\r\nBaron","closed_by":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/redis/redis/issues/3766/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/3766/timeline","performed_via_github_app":null,"state_reason":"completed"}