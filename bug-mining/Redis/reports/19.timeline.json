[{"id":221226064,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyMTIyNjA2NA==","url":"https://api.github.com/repos/redis/redis/issues/events/221226064","actor":{"login":"mattsta","id":15594,"node_id":"MDQ6VXNlcjE1NTk0","avatar_url":"https://avatars.githubusercontent.com/u/15594?v=4","gravatar_id":"","url":"https://api.github.com/users/mattsta","html_url":"https://github.com/mattsta","followers_url":"https://api.github.com/users/mattsta/followers","following_url":"https://api.github.com/users/mattsta/following{/other_user}","gists_url":"https://api.github.com/users/mattsta/gists{/gist_id}","starred_url":"https://api.github.com/users/mattsta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattsta/subscriptions","organizations_url":"https://api.github.com/users/mattsta/orgs","repos_url":"https://api.github.com/users/mattsta/repos","events_url":"https://api.github.com/users/mattsta/events{/privacy}","received_events_url":"https://api.github.com/users/mattsta/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-01-19T20:49:39Z","label":{"name":"cluster","color":"fbca04"},"performed_via_github_app":null},{"id":221226071,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyMTIyNjA3MQ==","url":"https://api.github.com/repos/redis/redis/issues/events/221226071","actor":{"login":"mattsta","id":15594,"node_id":"MDQ6VXNlcjE1NTk0","avatar_url":"https://avatars.githubusercontent.com/u/15594?v=4","gravatar_id":"","url":"https://api.github.com/users/mattsta","html_url":"https://github.com/mattsta","followers_url":"https://api.github.com/users/mattsta/followers","following_url":"https://api.github.com/users/mattsta/following{/other_user}","gists_url":"https://api.github.com/users/mattsta/gists{/gist_id}","starred_url":"https://api.github.com/users/mattsta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattsta/subscriptions","organizations_url":"https://api.github.com/users/mattsta/orgs","repos_url":"https://api.github.com/users/mattsta/repos","events_url":"https://api.github.com/users/mattsta/events{/privacy}","received_events_url":"https://api.github.com/users/mattsta/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-01-19T20:49:40Z","label":{"name":"crash report","color":"e10c02"},"performed_via_github_app":null},{"id":221226078,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyMTIyNjA3OA==","url":"https://api.github.com/repos/redis/redis/issues/events/221226078","actor":{"login":"mattsta","id":15594,"node_id":"MDQ6VXNlcjE1NTk0","avatar_url":"https://avatars.githubusercontent.com/u/15594?v=4","gravatar_id":"","url":"https://api.github.com/users/mattsta","html_url":"https://github.com/mattsta","followers_url":"https://api.github.com/users/mattsta/followers","following_url":"https://api.github.com/users/mattsta/following{/other_user}","gists_url":"https://api.github.com/users/mattsta/gists{/gist_id}","starred_url":"https://api.github.com/users/mattsta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattsta/subscriptions","organizations_url":"https://api.github.com/users/mattsta/orgs","repos_url":"https://api.github.com/users/mattsta/repos","events_url":"https://api.github.com/users/mattsta/events{/privacy}","received_events_url":"https://api.github.com/users/mattsta/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-01-19T20:49:41Z","label":{"name":"critical bug","color":"e10c02"},"performed_via_github_app":null},{"id":221226130,"node_id":"MDEyOkxhYmVsZWRFdmVudDIyMTIyNjEzMA==","url":"https://api.github.com/repos/redis/redis/issues/events/221226130","actor":{"login":"mattsta","id":15594,"node_id":"MDQ6VXNlcjE1NTk0","avatar_url":"https://avatars.githubusercontent.com/u/15594?v=4","gravatar_id":"","url":"https://api.github.com/users/mattsta","html_url":"https://github.com/mattsta","followers_url":"https://api.github.com/users/mattsta/followers","following_url":"https://api.github.com/users/mattsta/following{/other_user}","gists_url":"https://api.github.com/users/mattsta/gists{/gist_id}","starred_url":"https://api.github.com/users/mattsta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattsta/subscriptions","organizations_url":"https://api.github.com/users/mattsta/orgs","repos_url":"https://api.github.com/users/mattsta/repos","events_url":"https://api.github.com/users/mattsta/events{/privacy}","received_events_url":"https://api.github.com/users/mattsta/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-01-19T20:49:46Z","label":{"name":"need-to-reply","color":"e10c02"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/83769257","html_url":"https://github.com/redis/redis/issues/2288#issuecomment-83769257","issue_url":"https://api.github.com/repos/redis/redis/issues/2288","id":83769257,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNzY5MjU3","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-03-19T21:38:25Z","updated_at":"2015-03-19T21:38:25Z","body":"Hello, thank you for reporting. Checking the code, it makes sense it crashes like that in certain edge conditions. The code pretends that we never dispatch commands if the cluster is logically down (one or more slots uncovered), but this is not the case. The fix will be the same anyway (since handling this in getNodeByQuery() will prevent the next bug similar to that), however I also want to check the exact conditions that trigger it in order to also trap it before, but I've an idea about what the state is. Fixing tomorrow morning CEST giving priority over the doc writing effort, and releasing a new RC. However this is not very critical (it is in the effects, but not conceptually), so the stable release will not be delayed.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/83769257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/83956911","html_url":"https://github.com/redis/redis/issues/2288#issuecomment-83956911","issue_url":"https://api.github.com/repos/redis/redis/issues/2288","id":83956911,"node_id":"MDEyOklzc3VlQ29tbWVudDgzOTU2OTEx","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-03-20T08:36:55Z","updated_at":"2015-03-20T08:36:55Z","body":"@ingmar checking the issue I see this happened with Redis 3.0.0-rc2, please note that rc3 fixed several critical bugs so you are likely to run into strange consistency issues in the CLUSTER NODES output and other crashes. This issue itself may be due to the same set of bugs, however whatever this is the case or not, the issue posted contains an hit about an implementation fragility that should be fixed :-)\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/83956911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":260254119,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjYwMjU0MTE5","url":"https://api.github.com/repos/redis/redis/issues/events/260254119","actor":{"login":"ingmar","id":11961,"node_id":"MDQ6VXNlcjExOTYx","avatar_url":"https://avatars.githubusercontent.com/u/11961?v=4","gravatar_id":"","url":"https://api.github.com/users/ingmar","html_url":"https://github.com/ingmar","followers_url":"https://api.github.com/users/ingmar/followers","following_url":"https://api.github.com/users/ingmar/following{/other_user}","gists_url":"https://api.github.com/users/ingmar/gists{/gist_id}","starred_url":"https://api.github.com/users/ingmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ingmar/subscriptions","organizations_url":"https://api.github.com/users/ingmar/orgs","repos_url":"https://api.github.com/users/ingmar/repos","events_url":"https://api.github.com/users/ingmar/events{/privacy}","received_events_url":"https://api.github.com/users/ingmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-03-20T08:36:55Z","performed_via_github_app":null},{"id":260254120,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI2MDI1NDEyMA==","url":"https://api.github.com/repos/redis/redis/issues/events/260254120","actor":{"login":"ingmar","id":11961,"node_id":"MDQ6VXNlcjExOTYx","avatar_url":"https://avatars.githubusercontent.com/u/11961?v=4","gravatar_id":"","url":"https://api.github.com/users/ingmar","html_url":"https://github.com/ingmar","followers_url":"https://api.github.com/users/ingmar/followers","following_url":"https://api.github.com/users/ingmar/following{/other_user}","gists_url":"https://api.github.com/users/ingmar/gists{/gist_id}","starred_url":"https://api.github.com/users/ingmar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ingmar/subscriptions","organizations_url":"https://api.github.com/users/ingmar/orgs","repos_url":"https://api.github.com/users/ingmar/repos","events_url":"https://api.github.com/users/ingmar/events{/privacy}","received_events_url":"https://api.github.com/users/ingmar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-03-20T08:36:55Z","performed_via_github_app":null},{"id":260267009,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDI2NzAwOQ==","url":"https://api.github.com/repos/redis/redis/issues/events/260267009","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"585f68ac351f5d55675870fe4127a72923e6d145","commit_url":"https://api.github.com/repos/redis/redis/commits/585f68ac351f5d55675870fe4127a72923e6d145","created_at":"2015-03-20T09:06:28Z","performed_via_github_app":null},{"id":260267011,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDI2NzAxMQ==","url":"https://api.github.com/repos/redis/redis/issues/events/260267011","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"62893f5b9ff0465bc6073c5e448d88f8ae352dab","commit_url":"https://api.github.com/repos/redis/redis/commits/62893f5b9ff0465bc6073c5e448d88f8ae352dab","created_at":"2015-03-20T09:06:28Z","performed_via_github_app":null},{"id":260267120,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDI2NzEyMA==","url":"https://api.github.com/repos/redis/redis/issues/events/260267120","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2ecb5edf3454e3752a428e50b6ee068e357c7fae","commit_url":"https://api.github.com/repos/redis/redis/commits/2ecb5edf3454e3752a428e50b6ee068e357c7fae","created_at":"2015-03-20T09:06:45Z","performed_via_github_app":null},{"id":260267121,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDI2NzEyMQ==","url":"https://api.github.com/repos/redis/redis/issues/events/260267121","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"25c0f5ac63320e85f81750bd0f999fc6f5eba5c1","commit_url":"https://api.github.com/repos/redis/redis/commits/25c0f5ac63320e85f81750bd0f999fc6f5eba5c1","created_at":"2015-03-20T09:06:45Z","performed_via_github_app":null},{"id":260267125,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDI2NzEyNQ==","url":"https://api.github.com/repos/redis/redis/issues/events/260267125","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6fd0b43fea13b4ee9c7798bb7e773477f0b90848","commit_url":"https://api.github.com/repos/redis/redis/commits/6fd0b43fea13b4ee9c7798bb7e773477f0b90848","created_at":"2015-03-20T09:06:46Z","performed_via_github_app":null},{"id":260267126,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MDI2NzEyNg==","url":"https://api.github.com/repos/redis/redis/issues/events/260267126","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2019b46c5a528f8a1540e4ef13cd8d919b716729","commit_url":"https://api.github.com/repos/redis/redis/commits/2019b46c5a528f8a1540e4ef13cd8d919b716729","created_at":"2015-03-20T09:06:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/83962701","html_url":"https://github.com/redis/redis/issues/2288#issuecomment-83962701","issue_url":"https://api.github.com/repos/redis/redis/issues/2288","id":83962701,"node_id":"MDEyOklzc3VlQ29tbWVudDgzOTYyNzAx","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-03-20T09:20:11Z","updated_at":"2015-03-20T09:20:11Z","body":"Problem fixed, a few notes:\n1. It's not 100% clear to me, in this exact setup, how the hash slots were unbound. As a result of the configuration update received from the (old) slave I expected the master to have all the hash slots still covered. Maybe it's due to the many RC2 serious memory bugs, fixed by RC3.\n2. Anyway the getNodeByQuery() implementation was fragile. It's not a good idea to assert for `node != NULL`, and in general, to the fact that the cluster state is atomically updated.\n3. And... indeed the cluster state is _not_ atomically updated, so there was a bug here regardless of what exactly caused this instance of the bug. The cluster state is updated in `clusterBeforeSleep()` in a lazy way.\n4. Moreover the `clusterBeforeSleep()` call was misplaced at the end of the chain of the `beforeSleep()` call in `redis.c`. It should be at the top, before processing un blocking clients. This is exactly the reason in the specific instance of the bug as reported, why the state was not updated in time before clients served.\n\nReleasing RC5 in a second. Thank you for reporting!\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/83962701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":260288812,"node_id":"MDExOkNsb3NlZEV2ZW50MjYwMjg4ODEy","url":"https://api.github.com/repos/redis/redis/issues/events/260288812","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-03-20T09:36:59Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"jvinoth18","id":2185696,"node_id":"MDQ6VXNlcjIxODU2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2185696?v=4","gravatar_id":"","url":"https://api.github.com/users/jvinoth18","html_url":"https://github.com/jvinoth18","followers_url":"https://api.github.com/users/jvinoth18/followers","following_url":"https://api.github.com/users/jvinoth18/following{/other_user}","gists_url":"https://api.github.com/users/jvinoth18/gists{/gist_id}","starred_url":"https://api.github.com/users/jvinoth18/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvinoth18/subscriptions","organizations_url":"https://api.github.com/users/jvinoth18/orgs","repos_url":"https://api.github.com/users/jvinoth18/repos","events_url":"https://api.github.com/users/jvinoth18/events{/privacy}","received_events_url":"https://api.github.com/users/jvinoth18/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-03-21T00:24:54Z","updated_at":"2015-03-21T00:24:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/redis/redis/issues/2467","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/2467/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/2467/comments","events_url":"https://api.github.com/repos/redis/redis/issues/2467/events","html_url":"https://github.com/redis/redis/issues/2467","id":63337017,"node_id":"MDU6SXNzdWU2MzMzNzAxNw==","number":2467,"title":"RC5 - seg fault after manual failover","user":{"login":"jvinoth18","id":2185696,"node_id":"MDQ6VXNlcjIxODU2OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2185696?v=4","gravatar_id":"","url":"https://api.github.com/users/jvinoth18","html_url":"https://github.com/jvinoth18","followers_url":"https://api.github.com/users/jvinoth18/followers","following_url":"https://api.github.com/users/jvinoth18/following{/other_user}","gists_url":"https://api.github.com/users/jvinoth18/gists{/gist_id}","starred_url":"https://api.github.com/users/jvinoth18/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvinoth18/subscriptions","organizations_url":"https://api.github.com/users/jvinoth18/orgs","repos_url":"https://api.github.com/users/jvinoth18/repos","events_url":"https://api.github.com/users/jvinoth18/events{/privacy}","received_events_url":"https://api.github.com/users/jvinoth18/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-03-21T00:24:53Z","updated_at":"2015-03-21T08:07:29Z","closed_at":"2015-03-21T08:07:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":156018,"node_id":"MDEwOlJlcG9zaXRvcnkxNTYwMTg=","name":"redis","full_name":"redis/redis","private":false,"owner":{"login":"redis","id":1529926,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1529926?v=4","gravatar_id":"","url":"https://api.github.com/users/redis","html_url":"https://github.com/redis","followers_url":"https://api.github.com/users/redis/followers","following_url":"https://api.github.com/users/redis/following{/other_user}","gists_url":"https://api.github.com/users/redis/gists{/gist_id}","starred_url":"https://api.github.com/users/redis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redis/subscriptions","organizations_url":"https://api.github.com/users/redis/orgs","repos_url":"https://api.github.com/users/redis/repos","events_url":"https://api.github.com/users/redis/events{/privacy}","received_events_url":"https://api.github.com/users/redis/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/redis/redis","description":"For developers, who are building real-time data-driven applications, Redis is the preferred, fastest, and most feature-rich cache, data structure server, and document and vector query engine.","fork":false,"url":"https://api.github.com/repos/redis/redis","forks_url":"https://api.github.com/repos/redis/redis/forks","keys_url":"https://api.github.com/repos/redis/redis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/redis/redis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/redis/redis/teams","hooks_url":"https://api.github.com/repos/redis/redis/hooks","issue_events_url":"https://api.github.com/repos/redis/redis/issues/events{/number}","events_url":"https://api.github.com/repos/redis/redis/events","assignees_url":"https://api.github.com/repos/redis/redis/assignees{/user}","branches_url":"https://api.github.com/repos/redis/redis/branches{/branch}","tags_url":"https://api.github.com/repos/redis/redis/tags","blobs_url":"https://api.github.com/repos/redis/redis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/redis/redis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/redis/redis/git/refs{/sha}","trees_url":"https://api.github.com/repos/redis/redis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/redis/redis/statuses/{sha}","languages_url":"https://api.github.com/repos/redis/redis/languages","stargazers_url":"https://api.github.com/repos/redis/redis/stargazers","contributors_url":"https://api.github.com/repos/redis/redis/contributors","subscribers_url":"https://api.github.com/repos/redis/redis/subscribers","subscription_url":"https://api.github.com/repos/redis/redis/subscription","commits_url":"https://api.github.com/repos/redis/redis/commits{/sha}","git_commits_url":"https://api.github.com/repos/redis/redis/git/commits{/sha}","comments_url":"https://api.github.com/repos/redis/redis/comments{/number}","issue_comment_url":"https://api.github.com/repos/redis/redis/issues/comments{/number}","contents_url":"https://api.github.com/repos/redis/redis/contents/{+path}","compare_url":"https://api.github.com/repos/redis/redis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/redis/redis/merges","archive_url":"https://api.github.com/repos/redis/redis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/redis/redis/downloads","issues_url":"https://api.github.com/repos/redis/redis/issues{/number}","pulls_url":"https://api.github.com/repos/redis/redis/pulls{/number}","milestones_url":"https://api.github.com/repos/redis/redis/milestones{/number}","notifications_url":"https://api.github.com/repos/redis/redis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/redis/redis/labels{/name}","releases_url":"https://api.github.com/repos/redis/redis/releases{/id}","deployments_url":"https://api.github.com/repos/redis/redis/deployments","created_at":"2009-03-21T22:32:25Z","updated_at":"2025-12-13T04:51:44Z","pushed_at":"2025-12-11T09:07:47Z","git_url":"git://github.com/redis/redis.git","ssh_url":"git@github.com:redis/redis.git","clone_url":"https://github.com/redis/redis.git","svn_url":"https://github.com/redis/redis","homepage":"http://redis.io","size":205841,"stargazers_count":72116,"watchers_count":72116,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":24380,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2735,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cache","caching","database","distributed-systems","in-memory","in-memory-database","json","key-value","key-value-store","message-broker","message-queue","no-sql","nosql","open-source","real-time","realtime","redis","time-series","vector-databases","vector-search"],"visibility":"public","forks":24380,"open_issues":2735,"watchers":72116,"default_branch":"unstable","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Similar issue (https://github.com/antirez/redis/issues/2288) was reported in one of the earlier RC's and RC5 addressed it. But crash is still happening in rc5 after manual failover - it doesn't happen immediately now, but crash happens after a while. \n\nBug report below. \n\n2509:M 20 Mar 22:55:39.028 # Manual failover requested by slave 293b66944b09a45d14830714b11e5fdfcb187ab8.\n2509:M 20 Mar 22:55:39.311 # Failover auth granted to 293b66944b09a45d14830714b11e5fdfcb187ab8 for epoch 26\n2509:M 20 Mar 22:55:39.313 # Connection with slave 10.180.46.165:6379 lost.\n2509:M 20 Mar 22:55:39.341 # Configuration change detected. Reconfiguring myself as a replica of 293b66944b09a45d14830714b11e5fdfcb187ab8\n2509:S 20 Mar 22:55:39.516 \\* Connecting to MASTER 10.180.46.165:6379\n2509:S 20 Mar 22:55:39.517 \\* MASTER <-> SLAVE sync started\n2509:S 20 Mar 22:55:39.518 \\* Non blocking connect for SYNC fired the event.\n2509:S 20 Mar 22:55:39.519 \\* Master replied to PING, replication can continue...\n2509:S 20 Mar 22:55:39.520 \\* Partial resynchronization not possible (no cached master)\n2509:S 20 Mar 22:55:39.522 \\* Full resync from master: cef077bc89f7ca4a2897b683318d9628ab1ec559:30\n2509:S 20 Mar 22:55:39.601 \\* MASTER <-> SLAVE sync: receiving 18 bytes from master\n2509:S 20 Mar 22:55:39.602 \\* MASTER <-> SLAVE sync: Flushing old data\n2509:S 20 Mar 22:55:39.602 \\* MASTER <-> SLAVE sync: Loading DB in memory\n2509:S 20 Mar 22:55:39.602 \\* MASTER <-> SLAVE sync: Finished with success\n2509:S 20 Mar 23:00:44.803 # \n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n2509:S 20 Mar 23:00:44.804 # ------------------------------------------------\n2509:S 20 Mar 23:00:44.804 # !!! Software Failure. Press left mouse button to continue\n2509:S 20 Mar 23:00:44.804 # Guru Meditation: \"Unknown btype in replyToBlockedClientTimedOut().\" #blocked.c:155\n2509:S 20 Mar 23:00:44.805 # (forcing SIGSEGV in order to print the stack trace)\n2509:S 20 Mar 23:00:44.805 # ------------------------------------------------\n2509:S 20 Mar 23:00:44.805 #     Redis 2.9.105 crashed by signal: 11\n2509:S 20 Mar 23:00:44.805 #     Failed assertion: <no assertion failed> (<no file>:0)\n2509:S 20 Mar 23:00:44.805 # --- STACK TRACE\n/usr/bin/redis-server *:6379 [cluster](logStackTrace+0x45)[0x453ca5]\n/usr/bin/redis-server *:6379 [cluster](_redisPanic+0x89)[0x4529d9]\n/lib64/libpthread.so.0(+0xf5b0)[0x7f73eebdc5b0]\n/usr/bin/redis-server *:6379 [cluster](_redisPanic+0x89)[0x4529d9]\n/usr/bin/redis-server *:6379 [cluster](replyToBlockedClientTimedOut+0x59)[0x46b9f9]\n/usr/bin/redis-server *:6379 [cluster](clientsCronHandleTimeout+0xae)[0x41f3ae]\n/usr/bin/redis-server *:6379 [cluster](clientsCron+0x72)[0x41f4d2]\n/usr/bin/redis-server *:6379 [cluster](serverCron+0x186)[0x4213a6]\n/usr/bin/redis-server *:6379 [cluster](aeProcessEvents+0x20b)[0x41b60b]\n/usr/bin/redis-server *:6379 [cluster](aeMain+0x2b)[0x41b81b]\n/usr/bin/redis-server *:6379 [cluster](main+0x2b7)[0x41a4c7]\n/lib64/libc.so.6(__libc_start_main+0xf5)[0x7f73ee8497d5]\n/usr/bin/redis-server *:6379 [cluster][0x41a72d]\n2509:S 20 Mar 23:00:44.807 # --- INFO OUTPUT\n2509:S 20 Mar 23:00:44.808 # # Server\nredis_version:2.9.105\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id:2a1bf739b1d21cad\nredis_mode:cluster\nos:Linux 3.4.82-69.112.amzn1.x86_64 x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:4.6.3\nprocess_id:2509\nrun_id:a70e29171fad7847daefc3a6492608ef97546e40\ntcp_port:6379\nuptime_in_seconds:16301\nuptime_in_days:0\nhz:10\nlru_clock:829084\nconfig_file:/etc/redis.conf\n# Clients\n\nconnected_clients:4\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:1\n# Memory\n\nused_memory:1338192\nused_memory_human:1.28M\nused_memory_rss:2871296\nused_memory_peak:2454552\nused_memory_peak_human:2.34M\nused_memory_lua:35840\nmem_fragmentation_ratio:2.15\nmem_allocator:jemalloc-3.6.0\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:0\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1426892118\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:0\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\naof_last_write_status:ok\n# Stats\n\ntotal_connections_received:850\ntotal_commands_processed:2235\ninstantaneous_ops_per_sec:0\ntotal_net_input_bytes:38212\ntotal_net_output_bytes:1166129\ninstantaneous_input_kbps:0.00\ninstantaneous_output_kbps:0.04\nrejected_connections:0\nsync_full:1\nsync_partial_ok:0\nsync_partial_err:0\nexpired_keys:0\nevicted_keys:0\nkeyspace_hits:0\nkeyspace_misses:0\npubsub_channels:0\npubsub_patterns:0\nlatest_fork_usec:765\nmigrate_cached_sockets:0\n# Replication\n\nrole:slave\nmaster_host:10.180.46.165\nmaster_port:6379\nmaster_link_status:up\nmaster_last_io_seconds_ago:2\nmaster_sync_in_progress:0\nslave_repl_offset:464\nslave_priority:100\nslave_read_only:1\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:2\nrepl_backlog_histlen:28\n# CPU\n\nused_cpu_sys:17.31\nused_cpu_user:7.58\nused_cpu_sys_children:0.00\nused_cpu_user_children:0.00\n# Commandstats\n\ncmdstat_brpop:calls=2,usec=27,usec_per_call=13.50\ncmdstat_keys:calls=271,usec=1742,usec_per_call=6.43\ncmdstat_ping:calls=1613,usec=2561,usec_per_call=1.59\ncmdstat_psync:calls=1,usec=2057,usec_per_call=2057.00\ncmdstat_replconf:calls=21,usec=54,usec_per_call=2.57\ncmdstat_info:calls=271,usec=11515,usec_per_call=42.49\ncmdstat_cluster:calls=56,usec=17504,usec_per_call=312.57\n# Cluster\n\ncluster_enabled:1\n# Keyspace\n\nhash_init_value: 1426182489\n\n2509:S 20 Mar 23:00:44.810 # --- CLIENT LIST OUTPUT\n2509:S 20 Mar 23:00:44.810 # id=777 addr=10.63.153.188:33256 fd=11 name= age=1206 idle=900 flags=b db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=brpop\nid=836 addr=10.180.46.165:6379 fd=22 name= age=305 idle=2 flags=M db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=ping\nid=841 addr=127.0.0.1:52852 fd=23 name= age=261 idle=177 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=cluster\nid=3 addr=127.0.0.1:50107 fd=24 name= age=16289 idle=14765 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=cluster\n\n2509:S 20 Mar 23:00:44.811 # --- REGISTERS\n2509:S 20 Mar 23:00:44.811 # \nRAX:0000000000000000 RBX:00000000004c9bb8\nRCX:0000000000000000 RDX:00007f73eebc7648\nRDI:00007f73eebc7620 RSI:00000000ffffffff\nRBP:00000000004c9bff RSP:00007fff6cb00290\nR8 :0000000000000000 R9 :0000000000000000\nR10:0000000000004000 R11:0000000000000000\nR12:000000000000009b R13:0000000000000001\nR14:0000000000000001 R15:0000000000000000\nRIP:00000000004529d9 EFL:0000000000010202\nCSGSFS:000000000000e033\n2509:S 20 Mar 23:00:44.819 # (00007fff6cb0029f) -> 00000000000c442b\n2509:S 20 Mar 23:00:44.819 # (00007fff6cb0029e) -> 00000000550ca69c\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb0029d) -> 00000000004213a6\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb0029c) -> 0000000000000000\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb0029b) -> 00007f73e7814440\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb0029a) -> 00000000006f5b40\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb00299) -> 000000000041f4d2\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb00298) -> 00000000006f5b40\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb00297) -> 0000000000000002\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb00296) -> 00000000550ca69c\n2509:S 20 Mar 23:00:44.820 # (00007fff6cb00295) -> 000000000041f3ae\n2509:S 20 Mar 23:00:44.821 # (00007fff6cb00294) -> 00007f73e7a0c000\n2509:S 20 Mar 23:00:44.821 # (00007fff6cb00293) -> 000000000046b9f9\n2509:S 20 Mar 23:00:44.821 # (00007fff6cb00292) -> 00007f73e7a0c000\n2509:S 20 Mar 23:00:44.821 # (00007fff6cb00291) -> 0000000000000000\n2509:S 20 Mar 23:00:44.821 # (00007fff6cb00290) -> 00007f73e7a0c000\n2509:S 20 Mar 23:00:44.821 # --- FAST MEMORY TEST\n2509:S 20 Mar 23:00:44.821 # Bio thread for job type #0 terminated\n2509:S 20 Mar 23:00:44.822 # Bio thread for job type #1 terminated\n2509:S 20 Mar 23:00:45.323 # Fast memory test PASSED, however your memory can still be broken. Please run a memory test for several hours if possible.\n2509:S 20 Mar 23:00:45.324 # \n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/2467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/2467/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":9629147890,"node_id":"REFE_lADOAAJhcs4DP2iWzwAAAAI98SLy","url":"https://api.github.com/repos/redis/redis/issues/events/9629147890","actor":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b70832093d519dd55f235543ec319fe50e195b43","commit_url":"https://api.github.com/repos/enjoy-binbin/redis/commits/b70832093d519dd55f235543ec319fe50e195b43","created_at":"2023-06-25T08:51:54Z","performed_via_github_app":null},{"actor":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-25T08:52:43Z","updated_at":"2023-06-25T08:52:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/redis/redis/issues/12343","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/12343/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/12343/comments","events_url":"https://api.github.com/repos/redis/redis/issues/12343/events","html_url":"https://github.com/redis/redis/pull/12343","id":1773153446,"node_id":"PR_kwDOAAJhcs5T1lru","number":12343,"title":"Move clusterBeforeSleep before blockedBeforeSleep","user":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-06-25T08:52:43Z","updated_at":"2023-06-25T11:53:50Z","closed_at":"2023-06-25T11:21:04Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":156018,"node_id":"MDEwOlJlcG9zaXRvcnkxNTYwMTg=","name":"redis","full_name":"redis/redis","private":false,"owner":{"login":"redis","id":1529926,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1529926?v=4","gravatar_id":"","url":"https://api.github.com/users/redis","html_url":"https://github.com/redis","followers_url":"https://api.github.com/users/redis/followers","following_url":"https://api.github.com/users/redis/following{/other_user}","gists_url":"https://api.github.com/users/redis/gists{/gist_id}","starred_url":"https://api.github.com/users/redis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redis/subscriptions","organizations_url":"https://api.github.com/users/redis/orgs","repos_url":"https://api.github.com/users/redis/repos","events_url":"https://api.github.com/users/redis/events{/privacy}","received_events_url":"https://api.github.com/users/redis/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/redis/redis","description":"For developers, who are building real-time data-driven applications, Redis is the preferred, fastest, and most feature-rich cache, data structure server, and document and vector query engine.","fork":false,"url":"https://api.github.com/repos/redis/redis","forks_url":"https://api.github.com/repos/redis/redis/forks","keys_url":"https://api.github.com/repos/redis/redis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/redis/redis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/redis/redis/teams","hooks_url":"https://api.github.com/repos/redis/redis/hooks","issue_events_url":"https://api.github.com/repos/redis/redis/issues/events{/number}","events_url":"https://api.github.com/repos/redis/redis/events","assignees_url":"https://api.github.com/repos/redis/redis/assignees{/user}","branches_url":"https://api.github.com/repos/redis/redis/branches{/branch}","tags_url":"https://api.github.com/repos/redis/redis/tags","blobs_url":"https://api.github.com/repos/redis/redis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/redis/redis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/redis/redis/git/refs{/sha}","trees_url":"https://api.github.com/repos/redis/redis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/redis/redis/statuses/{sha}","languages_url":"https://api.github.com/repos/redis/redis/languages","stargazers_url":"https://api.github.com/repos/redis/redis/stargazers","contributors_url":"https://api.github.com/repos/redis/redis/contributors","subscribers_url":"https://api.github.com/repos/redis/redis/subscribers","subscription_url":"https://api.github.com/repos/redis/redis/subscription","commits_url":"https://api.github.com/repos/redis/redis/commits{/sha}","git_commits_url":"https://api.github.com/repos/redis/redis/git/commits{/sha}","comments_url":"https://api.github.com/repos/redis/redis/comments{/number}","issue_comment_url":"https://api.github.com/repos/redis/redis/issues/comments{/number}","contents_url":"https://api.github.com/repos/redis/redis/contents/{+path}","compare_url":"https://api.github.com/repos/redis/redis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/redis/redis/merges","archive_url":"https://api.github.com/repos/redis/redis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/redis/redis/downloads","issues_url":"https://api.github.com/repos/redis/redis/issues{/number}","pulls_url":"https://api.github.com/repos/redis/redis/pulls{/number}","milestones_url":"https://api.github.com/repos/redis/redis/milestones{/number}","notifications_url":"https://api.github.com/repos/redis/redis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/redis/redis/labels{/name}","releases_url":"https://api.github.com/repos/redis/redis/releases{/id}","deployments_url":"https://api.github.com/repos/redis/redis/deployments","created_at":"2009-03-21T22:32:25Z","updated_at":"2025-12-13T04:51:44Z","pushed_at":"2025-12-11T09:07:47Z","git_url":"git://github.com/redis/redis.git","ssh_url":"git@github.com:redis/redis.git","clone_url":"https://github.com/redis/redis.git","svn_url":"https://github.com/redis/redis","homepage":"http://redis.io","size":205841,"stargazers_count":72116,"watchers_count":72116,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":24380,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2735,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cache","caching","database","distributed-systems","in-memory","in-memory-database","json","key-value","key-value-store","message-broker","message-queue","no-sql","nosql","open-source","real-time","realtime","redis","time-series","vector-databases","vector-search"],"visibility":"public","forks":24380,"open_issues":2735,"watchers":72116,"default_branch":"unstable","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/redis/redis/pulls/12343","html_url":"https://github.com/redis/redis/pull/12343","diff_url":"https://github.com/redis/redis/pull/12343.diff","patch_url":"https://github.com/redis/redis/pull/12343.patch","merged_at":"2023-06-25T11:21:04Z"},"body":"The new blockedBeforeSleep was added in #12337, it breaks the order in 2ecb5ed.\r\n\r\nThis may be related to #2288, quoted from comment in #2288:\r\n```\r\nMoreover the clusterBeforeSleep() call was misplaced at the end of the chain of the\r\nbeforeSleep() call in redis.c. It should be at the top, before processing un blocking\r\nclients. This is exactly the reason in the specific instance of the bug as reported,\r\nwhy the state was not updated in time before clients served.\r\n```","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/12343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/12343/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9629504139,"node_id":"REFE_lADOAAJhcs4DP2iWzwAAAAI99pKL","url":"https://api.github.com/repos/redis/redis/issues/events/9629504139","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9600553ef2273411beb6168d44af70328f971eb8","commit_url":"https://api.github.com/repos/redis/redis/commits/9600553ef2273411beb6168d44af70328f971eb8","created_at":"2023-06-25T11:21:08Z","performed_via_github_app":null}]