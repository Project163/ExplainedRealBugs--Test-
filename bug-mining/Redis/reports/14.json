{"url":"https://api.github.com/repos/redis/redis/issues/761","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/761/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/761/comments","events_url":"https://api.github.com/repos/redis/redis/issues/761/events","html_url":"https://github.com/redis/redis/issues/761","id":8274251,"node_id":"MDU6SXNzdWU4Mjc0MjUx","number":761,"title":"Crash while attempting zinterstore","user":{"login":"athieme","id":871659,"node_id":"MDQ6VXNlcjg3MTY1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/871659?v=4","gravatar_id":"","url":"https://api.github.com/users/athieme","html_url":"https://github.com/athieme","followers_url":"https://api.github.com/users/athieme/followers","following_url":"https://api.github.com/users/athieme/following{/other_user}","gists_url":"https://api.github.com/users/athieme/gists{/gist_id}","starred_url":"https://api.github.com/users/athieme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athieme/subscriptions","organizations_url":"https://api.github.com/users/athieme/orgs","repos_url":"https://api.github.com/users/athieme/repos","events_url":"https://api.github.com/users/athieme/events{/privacy}","received_events_url":"https://api.github.com/users/athieme/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1198954,"node_id":"MDU6TGFiZWwxMTk4OTU0","url":"https://api.github.com/repos/redis/redis/labels/crash%20report","name":"crash report","color":"e10c02","default":false,"description":null},{"id":13971553,"node_id":"MDU6TGFiZWwxMzk3MTU1Mw==","url":"https://api.github.com/repos/redis/redis/labels/state-op-waiting-for-reply","name":"state-op-waiting-for-reply","color":"e10c02","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2012-11-11T18:32:25Z","updated_at":"2012-11-22T14:28:55Z","closed_at":"2012-11-22T14:28:55Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The crash said to report, so I'm reporting. Looks to be related to specifying too high of a value for \"numkeys\". I guess I should have entered 2.\n\n=== REDIS BUG REPORT START: Cut & paste starting from here ===\n[632] 11 Nov 13:25:20.272 # ------------------------------------------------\n[632] 11 Nov 13:25:20.272 # !!! Software Failure. Press left mouse button to continue\n[632] 11 Nov 13:25:20.272 # Guru Meditation: \"OOM\" #redis.c:2452\n[632] 11 Nov 13:25:20.272 # (forcing SIGSEGV in order to print the stack trace)\n[632] 11 Nov 13:25:20.272 # ------------------------------------------------\n[632] 11 Nov 13:25:20.272 #     Redis 2.5.13 crashed by signal: 11\n[632] 11 Nov 13:25:20.272 #     Failed assertion: <no assertion failed> (<no file>:0)\n[632] 11 Nov 13:25:20.272 # --- STACK TRACE\n0   redis-server                        0x000000010a3a7920 logStackTrace + 96\n1   redis-server                        0x000000010a3a6dae _redisPanic + 174\n2   libsystem_c.dylib                   0x00007fff8f1e58ea _sigtramp + 26\n3   ???                                 0x2e30323a35323a33 0x0 + 3328215350208772659\n4   redis-server                        0x000000010a3814b5 redisOutOfMemoryHandler + 53\n5   redis-server                        0x000000010a382f78 zcalloc + 40\n6   redis-server                        0x000000010a39afd6 zunionInterGenericCommand + 150\n7   redis-server                        0x000000010a37f6f1 call + 145\n8   redis-server                        0x000000010a37fc74 processCommand + 820\n9   redis-server                        0x000000010a38a28f processInputBuffer + 31\n10  redis-server                        0x000000010a387e9c readQueryFromClient + 380\n11  redis-server                        0x000000010a37ab78 aeProcessEvents + 616\n12  redis-server                        0x000000010a37ae2b aeMain + 43\n13  redis-server                        0x000000010a381892 main + 978\n14  libdyld.dylib                       0x00007fff914847e1 start + 0\n15  ???                                 0x0000000000000001 0x0 + 1\n[632] 11 Nov 13:25:20.275 # --- INFO OUTPUT\n[632] 11 Nov 13:25:20.275 # # Server\nredis_version:2.5.13\nredis_git_sha1:00000000\nredis_git_dirty:0\nos:Darwin 12.2.0 x86_64\narch_bits:64\nmultiplexing_api:kqueue\ngcc_version:4.2.1\nprocess_id:632\nrun_id:3f3f00014687d6dc9a913b85effa9fc0d29c3848\ntcp_port:6379\nuptime_in_seconds:12142\nuptime_in_days:0\nlru_clock:1048104\n# Clients\n\nconnected_clients:1\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n# Memory\n\nused_memory:1685840\nused_memory_human:1.61M\nused_memory_rss:4988928\nused_memory_peak:2080640\nused_memory_peak_human:1.98M\nused_memory_lua:30720\nmem_fragmentation_ratio:2.96\nmem_allocator:libc\n# Persistence\n\nloading:0\nrdb_changes_since_last_save:68\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1352657527\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:0\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\n# Stats\n\ntotal_connections_received:137\ntotal_commands_processed:127967\ninstantaneous_ops_per_sec:0\nrejected_connections:0\nexpired_keys:0\nevicted_keys:0\nkeyspace_hits:42260\nkeyspace_misses:1710\npubsub_channels:0\npubsub_patterns:0\nlatest_fork_usec:662\n# Replication\n\nrole:master\nconnected_slaves:0\n# CPU\n\nused_cpu_sys:28.67\nused_cpu_user:22.01\nused_cpu_sys_children:0.02\nused_cpu_user_children:0.06\n# Commandstats\n\ncmdstat_get:calls=183,usec=591,usec_per_call=3.23\ncmdstat_set:calls=1742,usec=8906,usec_per_call=5.11\ncmdstat_sinter:calls=1,usec=6,usec_per_call=6.00\ncmdstat_zadd:calls=31528,usec=222520,usec_per_call=7.06\ncmdstat_zinterstore:calls=2,usec=12,usec_per_call=6.00\ncmdstat_zrange:calls=14252,usec=65349,usec_per_call=4.59\ncmdstat_zrank:calls=185,usec=711,usec_per_call=3.84\ncmdstat_hset:calls=50580,usec=246507,usec_per_call=4.87\ncmdstat_hget:calls=29338,usec=71383,usec_per_call=2.43\ncmdstat_hgetall:calls=11,usec=87,usec_per_call=7.91\ncmdstat_keys:calls=13,usec=37267,usec_per_call=2866.69\ncmdstat_ping:calls=128,usec=445,usec_per_call=3.48\ncmdstat_flushall:calls=4,usec=15344,usec_per_call=3836.00\n# Keyspace\n\ndb0:keys=3346,expires=0\nhash_init_value: 1351986936\n\n[632] 11 Nov 13:25:20.275 # --- CLIENT LIST OUTPUT\n[632] 11 Nov 13:25:20.275 # addr=127.0.0.1:49647 fd=5 age=12137 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zinterstore\n\n[632] 11 Nov 13:25:20.275 # --- CURRENT CLIENT INFO\n[632] 11 Nov 13:25:20.275 # client: addr=127.0.0.1:49647 fd=5 age=12137 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=0 qbuf-free=32768 obl=0 oll=0 omem=0 events=r cmd=zinterstore\n[632] 11 Nov 13:25:20.275 # argv[0]: 'zinterstore'\n[632] 11 Nov 13:25:20.275 # argv[1]: 'baz'\n[632] 11 Nov 13:25:20.275 # argv[2]: '9223372036854775807'\n[632] 11 Nov 13:25:20.275 # argv[3]: 'graph:node:child'\n[632] 11 Nov 13:25:20.275 # argv[4]: 'graph:node'\n[632] 11 Nov 13:25:20.275 # --- REGISTERS\n[632] 11 Nov 13:25:20.275 # \nRAX:5b97e3e406a09f36 RBX:0000000000000994\nRCX:00007fff558861f0 RDX:00007fff7af7f8f8\nRDI:00006b0000006c03 RSI:00006c0000006c00\nRBP:00007fff558867f0 RSP:00007fff558867d0\nR8 :0000000000002060 R9 :00007fff558861f0\nR10:0000000000000889 R11:0000000000000246\nR12:000000010a3d4633 R13:00007fc7eb80a000\nR14:000000010a3cf43f R15:000000010a3d0ca4\nRIP:000000010a3a6dae EFL:0000000000010202\nCS :000000000000002b FS:0000000000000000  GS:0000000000000000\n[632] 11 Nov 13:25:20.275 # (00007fff55886848) -> 0000000000000001\n[632] 11 Nov 13:25:20.275 # (00007fff55886840) -> 000000010a42d604\n[632] 11 Nov 13:25:20.275 # (00007fff55886838) -> 00007fc7e9d13c40\n[632] 11 Nov 13:25:20.275 # (00007fff55886830) -> 000000010a4270f0\n[632] 11 Nov 13:25:20.275 # (00007fff55886828) -> 000000010a39afd6\n[632] 11 Nov 13:25:20.275 # (00007fff55886820) -> 00007fff55886910\n[632] 11 Nov 13:25:20.275 # (00007fff55886818) -> 0000000000000007\n[632] 11 Nov 13:25:20.275 # (00007fff55886810) -> 00007fc7e9d13c40\n[632] 11 Nov 13:25:20.275 # (00007fff55886808) -> 000000010a382f78\n[632] 11 Nov 13:25:20.275 # (00007fff55886800) -> 00007fff55886820\n[632] 11 Nov 13:25:20.275 # (00007fff558867f8) -> 000000010a3814b5\n[632] 11 Nov 13:25:20.275 # (00007fff558867f0) -> 00007fff55886800\n[632] 11 Nov 13:25:20.275 # (00007fff558867e8) -> 0000000000042866\n[632] 11 Nov 13:25:20.275 # (00007fff558867e0) -> 0000000000000000\n[632] 11 Nov 13:25:20.275 # (00007fff558867d8) -> 00007fc7eb80a000\n[632] 11 Nov 13:25:20.275 # (00007fff558867d0) -> ffffffffffffffd0\n[632] 11 Nov 13:25:20.275 # \n=== REDIS BUG REPORT END. Make sure to include from START to END. ===\n","closed_by":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/redis/redis/issues/761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/761/timeline","performed_via_github_app":null,"state_reason":"completed"}