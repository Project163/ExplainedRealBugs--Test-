{"url":"https://api.github.com/repos/electron/electron/issues/21666","repository_url":"https://api.github.com/repos/electron/electron","labels_url":"https://api.github.com/repos/electron/electron/issues/21666/labels{/name}","comments_url":"https://api.github.com/repos/electron/electron/issues/21666/comments","events_url":"https://api.github.com/repos/electron/electron/issues/21666/events","html_url":"https://github.com/electron/electron/issues/21666","id":544747638,"node_id":"MDU6SXNzdWU1NDQ3NDc2Mzg=","number":21666,"title":"Crashes in NativeBrowserViewViews::AutoResize function on Move/Resize","user":{"login":"summeroff","id":5798434,"node_id":"MDQ6VXNlcjU3OTg0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5798434?v=4","gravatar_id":"","url":"https://api.github.com/users/summeroff","html_url":"https://github.com/summeroff","followers_url":"https://api.github.com/users/summeroff/followers","following_url":"https://api.github.com/users/summeroff/following{/other_user}","gists_url":"https://api.github.com/users/summeroff/gists{/gist_id}","starred_url":"https://api.github.com/users/summeroff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/summeroff/subscriptions","organizations_url":"https://api.github.com/users/summeroff/orgs","repos_url":"https://api.github.com/users/summeroff/repos","events_url":"https://api.github.com/users/summeroff/events{/privacy}","received_events_url":"https://api.github.com/users/summeroff/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":97403549,"node_id":"MDU6TGFiZWw5NzQwMzU0OQ==","url":"https://api.github.com/repos/electron/electron/labels/platform/windows","name":"platform/windows","color":"c7def8","default":false,"description":null},{"id":97403642,"node_id":"MDU6TGFiZWw5NzQwMzY0Mg==","url":"https://api.github.com/repos/electron/electron/labels/platform/linux","name":"platform/linux","color":"c7def8","default":false,"description":null},{"id":520323169,"node_id":"MDU6TGFiZWw1MjAzMjMxNjk=","url":"https://api.github.com/repos/electron/electron/labels/bug%20:beetle:","name":"bug :beetle:","color":"fbca04","default":false,"description":""},{"id":654032628,"node_id":"MDU6TGFiZWw2NTQwMzI2Mjg=","url":"https://api.github.com/repos/electron/electron/labels/component/BrowserView","name":"component/BrowserView","color":"f9d0c4","default":false,"description":""},{"id":1630185126,"node_id":"MDU6TGFiZWwxNjMwMTg1MTI2","url":"https://api.github.com/repos/electron/electron/labels/6-1-x","name":"6-1-x","color":"ededed","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"groundwater","id":538488,"node_id":"MDQ6VXNlcjUzODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/538488?v=4","gravatar_id":"","url":"https://api.github.com/users/groundwater","html_url":"https://github.com/groundwater","followers_url":"https://api.github.com/users/groundwater/followers","following_url":"https://api.github.com/users/groundwater/following{/other_user}","gists_url":"https://api.github.com/users/groundwater/gists{/gist_id}","starred_url":"https://api.github.com/users/groundwater/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/groundwater/subscriptions","organizations_url":"https://api.github.com/users/groundwater/orgs","repos_url":"https://api.github.com/users/groundwater/repos","events_url":"https://api.github.com/users/groundwater/events{/privacy}","received_events_url":"https://api.github.com/users/groundwater/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"groundwater","id":538488,"node_id":"MDQ6VXNlcjUzODQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/538488?v=4","gravatar_id":"","url":"https://api.github.com/users/groundwater","html_url":"https://github.com/groundwater","followers_url":"https://api.github.com/users/groundwater/followers","following_url":"https://api.github.com/users/groundwater/following{/other_user}","gists_url":"https://api.github.com/users/groundwater/gists{/gist_id}","starred_url":"https://api.github.com/users/groundwater/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/groundwater/subscriptions","organizations_url":"https://api.github.com/users/groundwater/orgs","repos_url":"https://api.github.com/users/groundwater/repos","events_url":"https://api.github.com/users/groundwater/events{/privacy}","received_events_url":"https://api.github.com/users/groundwater/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2020-01-02T21:08:51Z","updated_at":"2020-09-17T00:10:50Z","closed_at":"2020-09-17T00:10:50Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--  As an open source project with a dedicated but small maintainer team, it can sometimes take a long time for issues to be addressed so please be patient and we will get back to you as soon as we can.\r\n-->\r\n\r\n### Preflight Checklist\r\n<!-- Please ensure you've completed the following steps by replacing [ ] with [x]-->\r\n\r\n* [x] I have read the [Contributing Guidelines](https://github.com/electron/electron/blob/master/CONTRIBUTING.md) for this project.\r\n* [x] I agree to follow the [Code of Conduct](https://github.com/electron/electron/blob/master/CODE_OF_CONDUCT.md) that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 6.0.7 and 6.1.5 <!-- (output of `node_modules/.bin/electron --version`) e.g. 4.0.3 -->\r\n* **Operating System:**\r\n  * Windows 10 x64 <!-- (Platform and Version) e.g. macOS 10.13.6 / Windows 10 (1803) / Ubuntu 18.04 x64 -->\r\n* **Last Known Working Electron version:**\r\n  * <!-- (if applicable) e.g. 3.1.0 -->\r\n\r\n### Expected Behavior\r\nApp not crashing\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\n### Actual Behavior\r\nIt crashes \r\n<!-- A clear and concise description of what actually happened. -->\r\n\r\n### To Reproduce\r\nWas not able to reproduce myself or get reports with steps from user. \r\nOnly information that we have is crash reports with backtraces.  \r\n\r\nThis backtraces have different call traces but all end with crash in \"atom::NativeBrowserViewViews::AutoResize\" file native_browser_view_views.cc line 54. \r\nCrashes of this two types of exceptions EXCEPTION_ACCESS_VIOLATION_READ and EXCEPTION_ACCESS_VIOLATION_EXEC. \r\nCalls to AutoResize leading to a crash originated from two different events Move and Resize. \r\n\r\n> atom::NativeBrowserViewViews::AutoResize native_browser_view_views.cc:54\r\n> std::list<T>::list list:800\r\n> atom::NativeWindowViews::GetBounds native_window_views.cc:588\r\n> atom::NativeWindowViews::OnWidgetBoundsChanged native_window_views.cc:1222\r\n> base::ObserverList<T>::Iter::EnsureValidIndex observer_list.h:211\r\n> views::Widget::OnNativeWidgetMove widget.cc:1180\r\n> display::win::ScreenWin::GetDisplayNearestPoint screen_win.cc:640\r\n> views::DesktopWindowTreeHostWin::HandleMove desktop_window_tree_host_win.cc:836\r\n> atom::NativeWindow::GetContentMaximumSize native_window.cc:287\r\n> views::HWNDMessageHandler::_ProcessWindowMessage hwnd_message_handler.h:423\r\n \r\n\r\n> atom::NativeBrowserViewViews::AutoResize native_browser_view_views.cc:54\r\n> std::list<T>::list list:800\r\n> atom::NativeWindowViews::OnWidgetBoundsChanged native_window_views.cc:1222\r\n> base::ObserverList<T>::Iter::EnsureValidIndex observer_list.h:211\r\n> views::Widget::OnNativeWidgetSizeChanged widget.cc:1192\r\n> aura::Window::SetBoundsInternal window.cc:862\r\n> aura::Window::SetBounds window.cc:355\r\n> views::DesktopNativeWidgetAura::OnHostResized desktop_native_widget_aura.cc:1223\r\n> aura::Window::UpdateLocalSurfaceId window.cc:1493\r\n> base::ObserverList<T>::Iter::Iter observer_list.h:135\r\n> aura::WindowTreeHost::OnHostResizedInPixels window_tree_host.cc:457\r\n> atom::api::TopLevelWindow::OnWindowMessage atom_api_top_level_window.cc:292\r\n> base::ObserverList<T>::Iter::EnsureValidIndex observer_list.h:211\r\n> views::HWNDMessageHandler::ClientAreaSizeChanged hwnd_message_handler.cc:1360\r\n> views::HWNDMessageHandler::OnNCPaint hwnd_message_handler.cc:2254\r\n> CThemeWnd::NcHitTest nctheme.cpp:6619\r\n> views::HWNDMessageHandler::OnWindowPosChanged hwnd_message_handler.cc:2763\r\n> views::HWNDMessageHandler::_ProcessWindowMessage hwnd_message_handler.h:440\r\n\r\nCrashing line native_browser_view_views.cc line 54. \r\nhttps://github.com/electron/electron/blob/47ee65c66ce0a1fcd476ac4cefcdc2b3b96cede9/atom/browser/native_browser_view_views.cc#L54\r\n\r\nCan object reference returned by GetInspectableWebContentsView() be invalid or object destroyed when Move/Resize event comes from the system? \r\n\r\n<!--\r\nYour best chance of getting this bug looked at quickly is to provide an example.\r\n-->\r\n\r\n<!--\r\nFor bugs that can be encapsulated in a small experiment, you can use Electron Fiddle (https://github.com/electron/fiddle) to publish your example to a GitHub Gist and link it your bug report.\r\n-->\r\n\r\n<!--\r\nIf Fiddle is insufficient to produce an example, please provide an example REPOSITORY that can be cloned and run. You can fork electron-quick-start (https://github.com/electron/electron-quick-start) and include a link to the branch with your changes.\r\n-->\r\n\r\n<!--\r\nIf you provide a URL, please list the commands required to clone/setup/run your repo e.g.\r\n```sh\r\n$ git clone $YOUR_URL -b $BRANCH\r\n$ npm install\r\n$ npm start || electron .\r\n```\r\n-->\r\n\r\n### Screenshots\r\n<!-- If applicable, add screenshots to help explain your problem. -->\r\n\r\n### Additional Information\r\nOur crash reporting system receives about 100 crashes a day what involves AutoResize. \r\n\r\n<!-- Add any other context about the problem here. -->\r\n","closed_by":{"login":"codebytere","id":2036040,"node_id":"MDQ6VXNlcjIwMzYwNDA=","avatar_url":"https://avatars.githubusercontent.com/u/2036040?v=4","gravatar_id":"","url":"https://api.github.com/users/codebytere","html_url":"https://github.com/codebytere","followers_url":"https://api.github.com/users/codebytere/followers","following_url":"https://api.github.com/users/codebytere/following{/other_user}","gists_url":"https://api.github.com/users/codebytere/gists{/gist_id}","starred_url":"https://api.github.com/users/codebytere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codebytere/subscriptions","organizations_url":"https://api.github.com/users/codebytere/orgs","repos_url":"https://api.github.com/users/codebytere/repos","events_url":"https://api.github.com/users/codebytere/events{/privacy}","received_events_url":"https://api.github.com/users/codebytere/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/electron/electron/issues/21666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/electron/electron/issues/21666/timeline","performed_via_github_app":null,"state_reason":"completed"}