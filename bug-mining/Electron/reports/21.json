{"url":"https://api.github.com/repos/electron/electron/issues/3873","repository_url":"https://api.github.com/repos/electron/electron","labels_url":"https://api.github.com/repos/electron/electron/issues/3873/labels{/name}","comments_url":"https://api.github.com/repos/electron/electron/issues/3873/comments","events_url":"https://api.github.com/repos/electron/electron/issues/3873/events","html_url":"https://github.com/electron/electron/issues/3873","id":123090209,"node_id":"MDU6SXNzdWUxMjMwOTAyMDk=","number":3873,"title":"Window submenu causes a crash on OS X","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":97403606,"node_id":"MDU6TGFiZWw5NzQwMzYwNg==","url":"https://api.github.com/repos/electron/electron/labels/platform/macOS","name":"platform/macOS","color":"c7def8","default":false,"description":null},{"id":144752898,"node_id":"MDU6TGFiZWwxNDQ3NTI4OTg=","url":"https://api.github.com/repos/electron/electron/labels/crash%20:boom:","name":"crash :boom:","color":"A88EB9","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-12-19T14:57:45Z","updated_at":"2015-12-31T10:51:45Z","closed_at":"2015-12-31T10:51:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Electron v0.36.1\nOS X 10.11.2\n\n``` javascript\nconst remote = require('electron').remote;\nconst Menu = remote.Menu;\nconst MenuItem = remote.MenuItem;\n\nvar menu = new Menu();\nmenu.append(new MenuItem({label: 'Window', submenu: new Menu(), type: 'submenu', role: 'window'}));\nMenu.setApplicationMenu(menu);\n```\n\n```\n2015-12-19 23:50:48.555 Electron[8342:713345] *** Assertion failure in -[NSMenu itemAtIndex:], /Library/Caches/com.apple.xbs/Sources/AppKit/AppKit-1404.34/Menus.subproj/NSMenu.m:947\n2015-12-19 23:50:48.558 Electron[8342:713345] An uncaught exception was raised\n2015-12-19 23:50:48.558 Electron[8342:713345] Invalid parameter not satisfying: (index >= 0) && (index < [_itemArray count])\n2015-12-19 23:50:48.559 Electron[8342:713345] (\n    0   CoreFoundation                      0x00007fff9ebd5ae2 __exceptionPreprocess + 178\n    1   libobjc.A.dylib                     0x00007fff9dd5df7e objc_exception_throw + 48\n    2   CoreFoundation                      0x00007fff9ebd58ba +[NSException raise:format:arguments:] + 106\n    3   Foundation                          0x00007fff8eace88c -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 198\n    4   AppKit                              0x00007fff937af0b4 -[NSMenu itemAtIndex:] + 178\n    5   AppKit                              0x00007fff937a2fe5 -[NSApplication(NSWindowsMenu) setWindowsMenu:] + 212\n    6   Electron Framework                  0x000000010a403fb5 _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 1525\n    7   Electron Framework                  0x000000010a403bca _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 522\n    8   Electron Framework                  0x000000010a4046f3 _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 3379\n    9   Electron Framework                  0x000000010a403a70 _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 176\n    10  Electron Framework                  0x000000010a3958d6 _ZN4atom3api4Menu18SetApplicationMenuEPS1_ + 70\n    11  Electron Framework                  0x000000010a36d1f6 _ZN4base8internal15RunnableAdapterIPFvPN4atom3api4MenuEEE3RunERKS5_ + 22\n    12  Electron Framework                  0x000000010a36d1d0 _ZN4base8internal12InvokeHelperILb0EvNS0_15RunnableAdapterIPFvPN4atom3api4MenuEEEENS0_8TypeListIJRKS6_EEEE8MakeItSoES9_SC_ + 32\n    13  Electron Framework                  0x000000010a36d19d _ZN4base8internal7InvokerINS_13IndexSequenceIJEEENS0_9BindStateINS0_15RunnableAdapterIPFvPN4atom3api4MenuEEEESA_NS0_8TypeListIJEEEEESE_NS0_12InvokeHelperILb0EvSC_NSD_IJRKS9_EEEEEFvSI_EE3RunEPNS0_13BindStateBaseESI_ + 29\n    14  Electron Framework                  0x000000010a36d09a _ZNK4base8CallbackIFvPN4atom3api4MenuEEE3RunERKS4_ + 42\n    15  Electron Framework                  0x000000010a36ceb2 _ZN4mate8internal7InvokerINS0_13IndicesHolderIJLm0EEEEJPN4atom3api4MenuEEE18DispatchToCallbackEN4base8CallbackIFvS7_EEE + 18\n    16  Electron Framework                  0x000000010a36cd85 _ZN4mate8internal10DispatcherIFvPN4atom3api4MenuEEE18DispatchToCallbackERKN2v820FunctionCallbackInfoINS8_5ValueEEE + 181\n    17  libnode.dylib                       0x000000010e863b63 _ZN2v88internal25FunctionCallbackArguments4CallEPFvRKNS_20FunctionCallbackInfoINS_5ValueEEEE + 163\n    18  libnode.dylib                       0x000000010e88cfec _ZN2v88internal8Builtins17InvokeApiFunctionENS0_6HandleINS0_10JSFunctionEEENS2_INS0_6ObjectEEEiPS6_ + 1644\n    19  libnode.dylib                       0x000000010e8910b1 _ZN2v88internal8BuiltinsD1Ev + 16177\n    20  ???                                 0x00001f9126408b3b 0x0 + 34708272483131\n)\n2015-12-19 23:50:48.559 Electron[8342:713345] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: (index >= 0) && (index < [_itemArray count])'\n*** First throw call stack:\n(\n    0   CoreFoundation                      0x00007fff9ebd5ae2 __exceptionPreprocess + 178\n    1   libobjc.A.dylib                     0x00007fff9dd5df7e objc_exception_throw + 48\n    2   CoreFoundation                      0x00007fff9ebd58ba +[NSException raise:format:arguments:] + 106\n    3   Foundation                          0x00007fff8eace88c -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 198\n    4   AppKit                              0x00007fff937af0b4 -[NSMenu itemAtIndex:] + 178\n    5   AppKit                              0x00007fff937a2fe5 -[NSApplication(NSWindowsMenu) setWindowsMenu:] + 212\n    6   Electron Framework                  0x000000010a403fb5 _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 1525\n    7   Electron Framework                  0x000000010a403bca _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 522\n    8   Electron Framework                  0x000000010a4046f3 _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 3379\n    9   Electron Framework                  0x000000010a403a70 _ZN4base7WeakPtrINS_16ObserverListBaseIN4atom13AtomMenuModel8ObserverEEEED2Ev + 176\n    10  Electron Framework                  0x000000010a3958d6 _ZN4atom3api4Menu18SetApplicationMenuEPS1_ + 70\n    11  Electron Framework                  0x000000010a36d1f6 _ZN4base8internal15RunnableAdapterIPFvPN4atom3api4MenuEEE3RunERKS5_ + 22\n    12  Electron Framework                  0x000000010a36d1d0 _ZN4base8internal12InvokeHelperILb0EvNS0_15RunnableAdapterIPFvPN4atom3api4MenuEEEENS0_8TypeListIJRKS6_EEEE8MakeItSoES9_SC_ + 32\n    13  Electron Framework                  0x000000010a36d19d _ZN4base8internal7InvokerINS_13IndexSequenceIJEEENS0_9BindStateINS0_15RunnableAdapterIPFvPN4atom3api4MenuEEEESA_NS0_8TypeListIJEEEEESE_NS0_12InvokeHelperILb0EvSC_NSD_IJRKS9_EEEEEFvSI_EE3RunEPNS0_13BindStateBaseESI_ + 29\n    14  Electron Framework                  0x000000010a36d09a _ZNK4base8CallbackIFvPN4atom3api4MenuEEE3RunERKS4_ + 42\n    15  Electron Framework                  0x000000010a36ceb2 _ZN4mate8internal7InvokerINS0_13IndicesHolderIJLm0EEEEJPN4atom3api4MenuEEE18DispatchToCallbackEN4base8CallbackIFvS7_EEE + 18\n    16  Electron Framework                  0x000000010a36cd85 _ZN4mate8internal10DispatcherIFvPN4atom3api4MenuEEE18DispatchToCallbackERKN2v820FunctionCallbackInfoINS8_5ValueEEE + 181\n    17  libnode.dylib                       0x000000010e863b63 _ZN2v88internal25FunctionCallbackArguments4CallEPFvRKNS_20FunctionCallbackInfoINS_5ValueEEEE + 163\n    18  libnode.dylib                       0x000000010e88cfec _ZN2v88internal8Builtins17InvokeApiFunctionENS0_6HandleINS0_10JSFunctionEEENS2_INS0_6ObjectEEEiPS6_ + 1644\n    19  libnode.dylib                       0x000000010e8910b1 _ZN2v88internal8BuiltinsD1Ev + 16177\n    20  ???                                 0x00001f9126408b3b 0x0 + 34708272483131\n)\nlibc++abi.dylib: terminating with uncaught exception of type NSException\n```\n","closed_by":{"login":"zcbenz","id":639601,"node_id":"MDQ6VXNlcjYzOTYwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/639601?v=4","gravatar_id":"","url":"https://api.github.com/users/zcbenz","html_url":"https://github.com/zcbenz","followers_url":"https://api.github.com/users/zcbenz/followers","following_url":"https://api.github.com/users/zcbenz/following{/other_user}","gists_url":"https://api.github.com/users/zcbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/zcbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcbenz/subscriptions","organizations_url":"https://api.github.com/users/zcbenz/orgs","repos_url":"https://api.github.com/users/zcbenz/repos","events_url":"https://api.github.com/users/zcbenz/events{/privacy}","received_events_url":"https://api.github.com/users/zcbenz/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/electron/electron/issues/3873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/electron/electron/issues/3873/timeline","performed_via_github_app":null,"state_reason":"completed"}