{"url":"https://api.github.com/repos/electron/electron/issues/39993","repository_url":"https://api.github.com/repos/electron/electron","labels_url":"https://api.github.com/repos/electron/electron/issues/39993/labels{/name}","comments_url":"https://api.github.com/repos/electron/electron/issues/39993/comments","events_url":"https://api.github.com/repos/electron/electron/issues/39993/events","html_url":"https://github.com/electron/electron/issues/39993","id":1915471648,"node_id":"I_kwDOAI8xS85yK8cg","number":39993,"title":"[Bug]: BrowserView.setBounds is not appliead immediately on first calls.","user":{"login":"marekharanczyk","id":48673767,"node_id":"MDQ6VXNlcjQ4NjczNzY3","avatar_url":"https://avatars.githubusercontent.com/u/48673767?v=4","gravatar_id":"","url":"https://api.github.com/users/marekharanczyk","html_url":"https://github.com/marekharanczyk","followers_url":"https://api.github.com/users/marekharanczyk/followers","following_url":"https://api.github.com/users/marekharanczyk/following{/other_user}","gists_url":"https://api.github.com/users/marekharanczyk/gists{/gist_id}","starred_url":"https://api.github.com/users/marekharanczyk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marekharanczyk/subscriptions","organizations_url":"https://api.github.com/users/marekharanczyk/orgs","repos_url":"https://api.github.com/users/marekharanczyk/repos","events_url":"https://api.github.com/users/marekharanczyk/events{/privacy}","received_events_url":"https://api.github.com/users/marekharanczyk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":520323169,"node_id":"MDU6TGFiZWw1MjAzMjMxNjk=","url":"https://api.github.com/repos/electron/electron/labels/bug%20:beetle:","name":"bug :beetle:","color":"fbca04","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-09-27T12:30:31Z","updated_at":"2023-10-05T16:31:48Z","closed_at":"2023-09-28T15:17:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Preflight Checklist\n\n- [X] I have read the [Contributing Guidelines](https://github.com/electron/electron/blob/main/CONTRIBUTING.md) for this project.\n- [X] I agree to follow the [Code of Conduct](https://github.com/electron/electron/blob/main/CODE_OF_CONDUCT.md) that this project adheres to.\n- [X] I have searched the [issue tracker](https://www.github.com/electron/electron/issues) for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n28, 27, 26 and older\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\nWindows 10\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\nProbably never\n\n### Expected Behavior\n\nsetBounds applied immediately, BrowserView painted in new position.\n\n### Actual Behavior\n\nsetBounds sets the data but view is still being painted with old bounds even though getBounds returns new bounds.\n\n### Testcase Gist URL\n\nhttps://gist.github.com/2e8b6adb97bf44893828212a79b06b22\n\n### Additional Information\n\nSetting same bounds twice will make BrowserView paint correctly. This is because same calling setBounds with same rect immediately triggers layout call on Views (https://source.chromium.org/chromium/chromium/src/+/ba15ffd71335c75897f4bd8501b3c8ed00a284da:ui/views/view.cc;l=386), while different bounds will make it schedule InvalidateLayout call, which is propagated to parent and view is marked as needing layout, expecting to receive it from parent on next layout call . The problem is that BrowserView's view is added as child of InspectableWebContentsViews which does not call setBounds (which triggers layout) on all of it's children when doing it's layout, so it skips propagating Layout call to its children BrowserViews views, even though those were marked as needing layout.","closed_by":{"login":"jkleinsc","id":609052,"node_id":"MDQ6VXNlcjYwOTA1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/609052?v=4","gravatar_id":"","url":"https://api.github.com/users/jkleinsc","html_url":"https://github.com/jkleinsc","followers_url":"https://api.github.com/users/jkleinsc/followers","following_url":"https://api.github.com/users/jkleinsc/following{/other_user}","gists_url":"https://api.github.com/users/jkleinsc/gists{/gist_id}","starred_url":"https://api.github.com/users/jkleinsc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkleinsc/subscriptions","organizations_url":"https://api.github.com/users/jkleinsc/orgs","repos_url":"https://api.github.com/users/jkleinsc/repos","events_url":"https://api.github.com/users/jkleinsc/events{/privacy}","received_events_url":"https://api.github.com/users/jkleinsc/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/electron/electron/issues/39993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/electron/electron/issues/39993/timeline","performed_via_github_app":null,"state_reason":"completed"}