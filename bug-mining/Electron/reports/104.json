{"url":"https://api.github.com/repos/electron/electron/issues/25595","repository_url":"https://api.github.com/repos/electron/electron","labels_url":"https://api.github.com/repos/electron/electron/issues/25595/labels{/name}","comments_url":"https://api.github.com/repos/electron/electron/issues/25595/comments","events_url":"https://api.github.com/repos/electron/electron/issues/25595/events","html_url":"https://github.com/electron/electron/issues/25595","id":707435591,"node_id":"MDU6SXNzdWU3MDc0MzU1OTE=","number":25595,"title":"Electron desktopCapturer.getSources().then is not resolved","user":{"login":"pravintamil","id":14850417,"node_id":"MDQ6VXNlcjE0ODUwNDE3","avatar_url":"https://avatars.githubusercontent.com/u/14850417?v=4","gravatar_id":"","url":"https://api.github.com/users/pravintamil","html_url":"https://github.com/pravintamil","followers_url":"https://api.github.com/users/pravintamil/followers","following_url":"https://api.github.com/users/pravintamil/following{/other_user}","gists_url":"https://api.github.com/users/pravintamil/gists{/gist_id}","starred_url":"https://api.github.com/users/pravintamil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pravintamil/subscriptions","organizations_url":"https://api.github.com/users/pravintamil/orgs","repos_url":"https://api.github.com/users/pravintamil/repos","events_url":"https://api.github.com/users/pravintamil/events{/privacy}","received_events_url":"https://api.github.com/users/pravintamil/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":97403549,"node_id":"MDU6TGFiZWw5NzQwMzU0OQ==","url":"https://api.github.com/repos/electron/electron/labels/platform/windows","name":"platform/windows","color":"c7def8","default":false,"description":null},{"id":97403642,"node_id":"MDU6TGFiZWw5NzQwMzY0Mg==","url":"https://api.github.com/repos/electron/electron/labels/platform/linux","name":"platform/linux","color":"c7def8","default":false,"description":null},{"id":520323169,"node_id":"MDU6TGFiZWw1MjAzMjMxNjk=","url":"https://api.github.com/repos/electron/electron/labels/bug%20:beetle:","name":"bug :beetle:","color":"fbca04","default":false,"description":""},{"id":1858180153,"node_id":"MDU6TGFiZWwxODU4MTgwMTUz","url":"https://api.github.com/repos/electron/electron/labels/10-x-y","name":"10-x-y","color":"ededed","default":false,"description":""},{"id":2285277606,"node_id":"MDU6TGFiZWwyMjg1Mjc3NjA2","url":"https://api.github.com/repos/electron/electron/labels/has-repro-gist","name":"has-repro-gist","color":"c2e0c6","default":false,"description":"Issue can be reproduced with code at https://gist.github.com/"},{"id":2303357178,"node_id":"MDU6TGFiZWwyMzAzMzU3MTc4","url":"https://api.github.com/repos/electron/electron/labels/11-x-y","name":"11-x-y","color":"ededed","default":false,"description":""},{"id":2468884269,"node_id":"MDU6TGFiZWwyNDY4ODg0MjY5","url":"https://api.github.com/repos/electron/electron/labels/12-x-y","name":"12-x-y","color":"ededed","default":false,"description":""},{"id":2787676949,"node_id":"MDU6TGFiZWwyNzg3Njc2OTQ5","url":"https://api.github.com/repos/electron/electron/labels/13-x-y","name":"13-x-y","color":"ededed","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"samuelmaddock","id":1656324,"node_id":"MDQ6VXNlcjE2NTYzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1656324?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelmaddock","html_url":"https://github.com/samuelmaddock","followers_url":"https://api.github.com/users/samuelmaddock/followers","following_url":"https://api.github.com/users/samuelmaddock/following{/other_user}","gists_url":"https://api.github.com/users/samuelmaddock/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelmaddock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelmaddock/subscriptions","organizations_url":"https://api.github.com/users/samuelmaddock/orgs","repos_url":"https://api.github.com/users/samuelmaddock/repos","events_url":"https://api.github.com/users/samuelmaddock/events{/privacy}","received_events_url":"https://api.github.com/users/samuelmaddock/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"samuelmaddock","id":1656324,"node_id":"MDQ6VXNlcjE2NTYzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1656324?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelmaddock","html_url":"https://github.com/samuelmaddock","followers_url":"https://api.github.com/users/samuelmaddock/followers","following_url":"https://api.github.com/users/samuelmaddock/following{/other_user}","gists_url":"https://api.github.com/users/samuelmaddock/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelmaddock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelmaddock/subscriptions","organizations_url":"https://api.github.com/users/samuelmaddock/orgs","repos_url":"https://api.github.com/users/samuelmaddock/repos","events_url":"https://api.github.com/users/samuelmaddock/events{/privacy}","received_events_url":"https://api.github.com/users/samuelmaddock/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":11,"created_at":"2020-09-23T14:50:26Z","updated_at":"2025-01-13T11:40:46Z","closed_at":"2021-03-18T20:43:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--  As an open source project with a dedicated but small maintainer team, it can sometimes take a long time for issues to be addressed so please be patient and we will get back to you as soon as we can.\r\n-->\r\n\r\n### Preflight Checklist\r\n<!-- Please ensure you've completed the following steps by replacing [ ] with [x]-->\r\n\r\n* [x] I have read the [Contributing Guidelines](https://github.com/electron/electron/blob/master/CONTRIBUTING.md) for this project.\r\n* [x] I agree to follow the [Code of Conduct](https://github.com/electron/electron/blob/master/CODE_OF_CONDUCT.md) that this project adheres to.\r\n* [x] I have searched the issue tracker for an issue that matches the one I want to file, without success.\r\n\r\n### Issue Details\r\n\r\n* **Electron Version:**\r\n  * 10.1.2\r\n* **Operating System:**\r\n  * Ubuntu 18.04.5 LTS\r\n\r\n### Expected Behavior\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n`desktopCapturer.getSources().then` should be resolved\r\n\r\n### Actual Behavior\r\n`desktopCapturer.getSources().then` is not resolved after 1 minute\r\n\r\n### To Reproduce\r\n```js\r\nconst { app, desktopCapturer, screen } = require('electron');\r\n\r\nconst fs = require('fs')\r\nconst path = require('path')\r\n\r\n\r\nfunction takeScreenshot() {\r\n\tconsole.log('Gathering screens...')\r\n\tconst thumbSize = determineScreenShotSize()\r\n\tconst options = { types: ['screen'], thumbnailSize: thumbSize }\r\n\r\n\tdesktopCapturer.getSources(options).then((sources) => {\r\n\t\tconsole.log('Sources received:'+sources.length);\r\n\t\tsources.forEach(function (source) {\r\n\t\t\tconst sourceName = source.name.toLowerCase();\r\n\t\t\tconsole.log(sourceName);\r\n\t\t\tif ( ['entire screen', 'screen 1'].includes(sourceName)) {\r\n\t\t\t\tconst screenshotPath = path.join(app.getPath('pictures'), 'screenshot-' + new Date().toJSON() + '.png')\r\n\t\t\t\tfs.writeFile(screenshotPath, source.thumbnail.toPNG(), function (error) {\r\n\t\t\t\t\tif (error) return console.log(error)\r\n\t\t\t\t\tconsole.log('Saved screenshot to: ' + screenshotPath);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}).catch(console.error);\r\n}\r\n\r\nfunction determineScreenShotSize() {\r\n\tvar screenSize = screen.getPrimaryDisplay().workAreaSize\r\n\treturn {\r\n\t\twidth: screenSize.width,\r\n\t\theight: screenSize.height\r\n\t}\r\n}\r\nsetInterval(takeScreenshot, 15000);\r\n```\r\n\r\n<!--\r\nFor bugs that can be encapsulated in a small experiment, you can use Electron Fiddle (https://github.com/electron/fiddle) to publish your example to a GitHub Gist and link it your bug report.\r\n-->\r\n\r\n<!--\r\nIf Fiddle is insufficient to produce an example, please provide an example REPOSITORY that can be cloned and run. You can fork electron-quick-start (https://github.com/electron/electron-quick-start) and include a link to the branch with your changes.\r\n-->\r\n\r\n```sh\r\ngit clone git@bitbucket.org:praveen-knackforge/electron-boilerplate.git -b screenshot\r\nnpm install\r\nnpm start || electron .\r\n```\r\n\r\n### Screenshots\r\n<!-- If applicable, add screenshots to help explain your problem. -->\r\n![image](https://user-images.githubusercontent.com/14850417/94028581-93587580-fdd9-11ea-9adb-52d6ab5e92f8.png)\r\n\r\n\r\n### Additional Information\r\nI used `desktopCapturer` API from the main process","closed_by":{"login":"MarshallOfSound","id":6634592,"node_id":"MDQ6VXNlcjY2MzQ1OTI=","avatar_url":"https://avatars.githubusercontent.com/u/6634592?v=4","gravatar_id":"","url":"https://api.github.com/users/MarshallOfSound","html_url":"https://github.com/MarshallOfSound","followers_url":"https://api.github.com/users/MarshallOfSound/followers","following_url":"https://api.github.com/users/MarshallOfSound/following{/other_user}","gists_url":"https://api.github.com/users/MarshallOfSound/gists{/gist_id}","starred_url":"https://api.github.com/users/MarshallOfSound/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarshallOfSound/subscriptions","organizations_url":"https://api.github.com/users/MarshallOfSound/orgs","repos_url":"https://api.github.com/users/MarshallOfSound/repos","events_url":"https://api.github.com/users/MarshallOfSound/events{/privacy}","received_events_url":"https://api.github.com/users/MarshallOfSound/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/electron/electron/issues/25595/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/electron/electron/issues/25595/timeline","performed_via_github_app":null,"state_reason":"completed"}