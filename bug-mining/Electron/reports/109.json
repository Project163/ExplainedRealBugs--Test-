{"url":"https://api.github.com/repos/electron/electron/issues/34599","repository_url":"https://api.github.com/repos/electron/electron","labels_url":"https://api.github.com/repos/electron/electron/issues/34599/labels{/name}","comments_url":"https://api.github.com/repos/electron/electron/issues/34599/comments","events_url":"https://api.github.com/repos/electron/electron/issues/34599/events","html_url":"https://github.com/electron/electron/issues/34599","id":1273886346,"node_id":"I_kwDOAI8xS85L7faK","number":34599,"title":"[Bug]: setBounds calls during will-resize are no longer applied when preventing the default resize","user":{"login":"meredith-ciq","id":46169395,"node_id":"MDQ6VXNlcjQ2MTY5Mzk1","avatar_url":"https://avatars.githubusercontent.com/u/46169395?v=4","gravatar_id":"","url":"https://api.github.com/users/meredith-ciq","html_url":"https://github.com/meredith-ciq","followers_url":"https://api.github.com/users/meredith-ciq/followers","following_url":"https://api.github.com/users/meredith-ciq/following{/other_user}","gists_url":"https://api.github.com/users/meredith-ciq/gists{/gist_id}","starred_url":"https://api.github.com/users/meredith-ciq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meredith-ciq/subscriptions","organizations_url":"https://api.github.com/users/meredith-ciq/orgs","repos_url":"https://api.github.com/users/meredith-ciq/repos","events_url":"https://api.github.com/users/meredith-ciq/events{/privacy}","received_events_url":"https://api.github.com/users/meredith-ciq/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":97403549,"node_id":"MDU6TGFiZWw5NzQwMzU0OQ==","url":"https://api.github.com/repos/electron/electron/labels/platform/windows","name":"platform/windows","color":"c7def8","default":false,"description":null},{"id":520323169,"node_id":"MDU6TGFiZWw1MjAzMjMxNjk=","url":"https://api.github.com/repos/electron/electron/labels/bug%20:beetle:","name":"bug :beetle:","color":"fbca04","default":false,"description":""},{"id":538879644,"node_id":"MDU6TGFiZWw1Mzg4Nzk2NDQ=","url":"https://api.github.com/repos/electron/electron/labels/bug/regression%20:leftwards_arrow_with_hook:","name":"bug/regression :leftwards_arrow_with_hook:","color":"fbca04","default":false,"description":"A new version of Electron broke something"},{"id":2285277606,"node_id":"MDU6TGFiZWwyMjg1Mjc3NjA2","url":"https://api.github.com/repos/electron/electron/labels/has-repro-gist","name":"has-repro-gist","color":"c2e0c6","default":false,"description":"Issue can be reproduced with code at https://gist.github.com/"},{"id":3516216028,"node_id":"LA_kwDOAI8xS87RlTLc","url":"https://api.github.com/repos/electron/electron/labels/17-x-y","name":"17-x-y","color":"ededed","default":false,"description":""},{"id":3791330743,"node_id":"LA_kwDOAI8xS87h-x23","url":"https://api.github.com/repos/electron/electron/labels/18-x-y","name":"18-x-y","color":"ededed","default":false,"description":""},{"id":3983650219,"node_id":"LA_kwDOAI8xS87tca2r","url":"https://api.github.com/repos/electron/electron/labels/19-x-y","name":"19-x-y","color":"ededed","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-06-16T17:39:52Z","updated_at":"2022-07-27T00:02:08Z","closed_at":"2022-07-27T00:02:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Preflight Checklist\n\n- [X] I have read the [Contributing Guidelines](https://github.com/electron/electron/blob/main/CONTRIBUTING.md) for this project.\n- [X] I agree to follow the [Code of Conduct](https://github.com/electron/electron/blob/main/CODE_OF_CONDUCT.md) that this project adheres to.\n- [X] I have searched the [issue tracker](https://www.github.com/electron/electron/issues) for a bug report that matches the one I want to file, without success.\n\n### Electron Version\n\n17.4, 18, 19\n\n### What operating system are you using?\n\nWindows\n\n### Operating System Version\n\nWindows 10 Pro 21H1\n\n### What arch are you using?\n\nx64\n\n### Last Known Working Electron version\n\n17.3.1\n\n### Expected Behavior\n\nPrior to version 17.4.0, it was possible to override the bounds received within will-resize event. While this ability is not explicitly documented, we rely on it for window management within our product.\n\n### Actual Behavior\n\nThe window no longer resizes when the will-resize event is prevented and we attempt to control the resize with setBounds. \n\n### Testcase Gist URL\n\nhttps://gist.github.com/meredith-ciq/a7ad120e84bd028a3fbd26b8f61aa45c\n\n### Additional Information\n\nThis was caused during the changes from:\r\n[#33288](https://github.com/electron/electron/pull/33288)\r\nI believe the gate on is_resizing_ at the top of setBounds is preventing any ability to overwrite the bounds that come in during a will-resize event.\r\n\r\nOur application currently overrides the native resize and does our own resize after modifying the window bounds. This has caused resize to break in recent electron versions as the intermediate setBounds calls during resize are not being applied. We have several aspects of window management that depend on having this level of control over resize:\r\n\r\n- Groups of windows maintaining proportions when a single window in the group is resized\r\n- Snapping edges of windows to other windows during resize\r\n- Resolving jitter of a window during resize by applying our own calculations\r\n\r\n I've also mentioned this issue in a related issue: #33897. The fix from that issue only had the effect of not applying the final setBounds in the resize action. In our case that causes the window to no longer resize instead of giving no visual indication that a resize was occurring until the corner or edge of the window was dropped. I did some testing with the gist in that issue on the latest electron and it appears the behavior only works when some of the native resize events are allowed through.","closed_by":{"login":"zcbenz","id":639601,"node_id":"MDQ6VXNlcjYzOTYwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/639601?v=4","gravatar_id":"","url":"https://api.github.com/users/zcbenz","html_url":"https://github.com/zcbenz","followers_url":"https://api.github.com/users/zcbenz/followers","following_url":"https://api.github.com/users/zcbenz/following{/other_user}","gists_url":"https://api.github.com/users/zcbenz/gists{/gist_id}","starred_url":"https://api.github.com/users/zcbenz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcbenz/subscriptions","organizations_url":"https://api.github.com/users/zcbenz/orgs","repos_url":"https://api.github.com/users/zcbenz/repos","events_url":"https://api.github.com/users/zcbenz/events{/privacy}","received_events_url":"https://api.github.com/users/zcbenz/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/electron/electron/issues/34599/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/electron/electron/issues/34599/timeline","performed_via_github_app":null,"state_reason":"completed"}