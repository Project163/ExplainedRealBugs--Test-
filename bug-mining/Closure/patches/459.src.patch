diff --git a/src/com/google/javascript/jscomp/deps/JsFileParser.java b/src/com/google/javascript/jscomp/deps/JsFileParser.java
index c4ee9e022..e570c8ed5 100644
--- a/src/com/google/javascript/jscomp/deps/JsFileParser.java
+++ b/src/com/google/javascript/jscomp/deps/JsFileParser.java
@@ -228,7 +228,11 @@ public final class JsFileParser extends JsFileLineParser {
     return dependencyInfo;
   }
 
-  private void setModuleType(ModuleType type) {
+  /**
+   * @return {@code true} if the moduleType is successfully set and {@code false} otherwise (e.g.
+   *     goog.provide, goog.module conflict).
+   */
+  private boolean setModuleType(ModuleType type) {
     boolean provide = type == ModuleType.GOOG_PROVIDE || moduleType == ModuleType.GOOG_PROVIDE;
     boolean es6Module = type == ModuleType.ES6_MODULE || moduleType == ModuleType.ES6_MODULE;
     boolean googModule = type == ModuleType.GOOG_MODULE || moduleType == ModuleType.GOOG_MODULE;
@@ -237,7 +241,7 @@ public final class JsFileParser extends JsFileLineParser {
       // We have to assume this is a top level goog.provide and a wrapped goog.loadModule. We can't
       // correctly validate this with just regular expressions.
       moduleType = ModuleType.GOOG_PROVIDE;
-      return;
+      return true;
     }
 
     boolean provideGoogModuleConflict = googModule && provide && !seenLoadModule;
@@ -249,9 +253,11 @@ public final class JsFileParser extends JsFileLineParser {
       // TODO(sdh): should this be an error?
       errorManager.report(
           CheckLevel.WARNING, JSError.make(ModuleLoader.MODULE_CONFLICT, file.toString()));
+      return false;
     }
 
     moduleType = type;
+    return true;
   }
 
   @Override
@@ -308,11 +314,11 @@ public final class JsFileParser extends JsFileLineParser {
         boolean isRequire = firstChar == 'r';
 
         if (isModule && !seenLoadModule) {
-          setModuleType(ModuleType.GOOG_MODULE);
+          providesNamespace = setModuleType(ModuleType.GOOG_MODULE);
         }
 
         if (isProvide) {
-          setModuleType(ModuleType.GOOG_PROVIDE);
+          providesNamespace = setModuleType(ModuleType.GOOG_PROVIDE);
         }
 
         if (providesNamespace || isRequire) {
diff --git a/test/com/google/javascript/jscomp/IntegrationTest.java b/test/com/google/javascript/jscomp/IntegrationTest.java
index 73f4c8907..d2cdf1c0a 100644
--- a/test/com/google/javascript/jscomp/IntegrationTest.java
+++ b/test/com/google/javascript/jscomp/IntegrationTest.java
@@ -459,7 +459,6 @@ public final class IntegrationTest extends IntegrationTestCase {
             "A$z();"));
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testBug1949424() {
     CompilerOptions options = createCompilerOptions();
@@ -469,7 +468,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         CLOSURE_COMPILED + "var FOO$bar = 3;");
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testBug1949424_v2() {
     CompilerOptions options = createCompilerOptions();
@@ -486,7 +484,6 @@ public final class IntegrationTest extends IntegrationTestCase {
             "var FOO$BAR = 3;"));
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testUnresolvedDefine() {
     CompilerOptions options = new CompilerOptions();
@@ -1369,7 +1366,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         TypeValidator.TYPE_MISMATCH_WARNING);
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testTypedefBeforeOwner1() {
     CompilerOptions options = createCompilerOptions();
@@ -1387,7 +1383,6 @@ public final class IntegrationTest extends IntegrationTestCase {
             "foo.Bar = function() {};"));
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testTypedefBeforeOwner2() {
     CompilerOptions options = createCompilerOptions();
@@ -1405,7 +1400,6 @@ public final class IntegrationTest extends IntegrationTestCase {
             "var foo$Bar = function() {};"));
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testTypedefProvides() {
     CompilerOptions options = createCompilerOptions();
@@ -1502,7 +1496,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         + "goog.exportSymbol('testFoo', testFoo);");
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testExportTestFunctionsOn2() {
     CompilerOptions options = createCompilerOptions();
@@ -1662,7 +1655,6 @@ public final class IntegrationTest extends IntegrationTestCase {
     test(options, "x = 3; var x = 5;", VariableReferenceCheck.EARLY_REFERENCE);
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testInferTypes() {
     CompilerOptions options = createCompilerOptions();
@@ -2254,7 +2246,6 @@ public final class IntegrationTest extends IntegrationTestCase {
     test(options, code, CLOSURE_COMPILED + " var FLAG = false;");
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testGoogDefine2() {
     String code = CLOSURE_BOILERPLATE +
@@ -2550,7 +2541,6 @@ public final class IntegrationTest extends IntegrationTestCase {
     test(options, originalText, expectedText);
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testClosurePassPreservesJsDoc() {
     CompilerOptions options = createCompilerOptions();
@@ -2575,7 +2565,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         "var COMPILED=true;var goog={};goog.exportSymbol=function(){};var Foo={a:3}");
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testProvidedNamespaceIsConst() {
     CompilerOptions options = createCompilerOptions();
@@ -2594,7 +2583,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         ConstCheck.CONST_REASSIGNED_VALUE_ERROR);
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testProvidedNamespaceIsConst3() {
     CompilerOptions options = createCompilerOptions();
@@ -2611,7 +2599,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         + "var foo$bar$baz = function(){};");
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testProvidedNamespaceIsConst4() {
     CompilerOptions options = createCompilerOptions();
@@ -2625,7 +2612,6 @@ public final class IntegrationTest extends IntegrationTestCase {
         "var foo = {}; foo = {}; foo.Bar = {};");
   }
 
-  @GwtIncompatible // b/63595345
   @Test
   public void testProvidedNamespaceIsConst5() {
     CompilerOptions options = createCompilerOptions();
diff --git a/test/com/google/javascript/jscomp/deps/JsFileParserTest.java b/test/com/google/javascript/jscomp/deps/JsFileParserTest.java
index 6e9114d5f..2eeddca3d 100644
--- a/test/com/google/javascript/jscomp/deps/JsFileParserTest.java
+++ b/test/com/google/javascript/jscomp/deps/JsFileParserTest.java
@@ -325,8 +325,7 @@ public final class JsFileParserTest {
 
     DependencyInfo expected =
         SimpleDependencyInfo.builder("../bar/baz.js", "/foo/js/bar/baz.js")
-            .setProvides(ImmutableList.of("my.namespace", "module$js$bar$baz"))
-            .setLoadFlags(ImmutableMap.of("module", "es6"))
+            .setProvides(ImmutableList.of("my.namespace"))
             .build();
 
     DependencyInfo result =
