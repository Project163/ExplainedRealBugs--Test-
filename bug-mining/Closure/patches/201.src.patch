diff --git a/CONTRIBUTORS b/CONTRIBUTORS
index 428c76a58..a93475a5a 100644
--- a/CONTRIBUTORS
+++ b/CONTRIBUTORS
@@ -46,6 +46,7 @@ kosmo.zb [gmail.com]
 leeight [gmail.com]
 meacer [gmail.com] (Mustafa E. Acer)
 mbolin [gmail.com] (Michael Bolin)
+neaket [gmail.com]
 piaohai [gmail.com] (piaohaiyao)
 pimmhogeling [gmail.com]
 price.c [gmail.com] (Chris Price)
diff --git a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
index 31404fb0b..7ff56956a 100644
--- a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
+++ b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java
@@ -23,6 +23,7 @@ import com.google.javascript.rhino.Node;
 import java.io.File;
 import java.net.URI;
 import java.net.URISyntaxException;
+import java.util.regex.Pattern;
 
 /**
  * Rewrites a Common JS module http://wiki.commonjs.org/wiki/Modules/1.1.1
@@ -37,6 +38,7 @@ public class ProcessCommonJSModules implements CompilerPass {
 
   public static final String DEFAULT_FILENAME_PREFIX = "." + File.separator;
 
+  private static final String MODULE_NAME_SEPARATOR = "\\$";
   private static final String MODULE_NAME_PREFIX = "module$";
 
   private final AbstractCompiler compiler;
@@ -81,8 +83,8 @@ public class ProcessCommonJSModules implements CompilerPass {
    */
   public static String toModuleName(String filename) {
     return MODULE_NAME_PREFIX +
-        filename.replaceAll("^\\." + File.separator, "")
-            .replaceAll(File.separator, "\\$")
+        filename.replaceAll("^\\." + Pattern.quote(File.separator), "")
+            .replaceAll(Pattern.quote(File.separator), MODULE_NAME_SEPARATOR)
             .replaceAll("\\.js$", "").replaceAll("-", "_");
   }
 
