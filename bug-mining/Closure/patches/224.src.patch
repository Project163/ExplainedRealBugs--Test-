diff --git a/src/com/google/javascript/jscomp/TypeInference.java b/src/com/google/javascript/jscomp/TypeInference.java
index abf301023..80a9510f3 100644
--- a/src/com/google/javascript/jscomp/TypeInference.java
+++ b/src/com/google/javascript/jscomp/TypeInference.java
@@ -1172,11 +1172,7 @@ class TypeInference
       return;
     }
 
-    ObjectType constraintObj =
-        ObjectType.cast(constraint.restrictByNotNullOrUndefined());
-    if (constraintObj != null) {
-      type.matchConstraint(constraintObj);
-    }
+    type.matchConstraint(constraint);
   }
 
   /**
diff --git a/src/com/google/javascript/rhino/jstype/JSType.java b/src/com/google/javascript/rhino/jstype/JSType.java
index 2b19bccee..8c6a19d8a 100644
--- a/src/com/google/javascript/rhino/jstype/JSType.java
+++ b/src/com/google/javascript/rhino/jstype/JSType.java
@@ -1240,5 +1240,5 @@ public abstract class JSType implements Serializable {
    * infer that an object literal matches its constraint (much like
    * how the java compiler does reverse-inference to figure out generics).
    */
-  public void matchConstraint(ObjectType constraint) {}
+  public void matchConstraint(JSType constraint) {}
 }
diff --git a/src/com/google/javascript/rhino/jstype/PrototypeObjectType.java b/src/com/google/javascript/rhino/jstype/PrototypeObjectType.java
index c75d45376..41cddd55d 100644
--- a/src/com/google/javascript/rhino/jstype/PrototypeObjectType.java
+++ b/src/com/google/javascript/rhino/jstype/PrototypeObjectType.java
@@ -553,7 +553,7 @@ class PrototypeObjectType extends ObjectType {
   }
 
   @Override
-  public void matchConstraint(ObjectType constraintObj) {
+  public void matchConstraint(JSType constraint) {
     // We only want to match constraints on anonymous types.
     if (hasReferenceName()) {
       return;
@@ -561,25 +561,36 @@ class PrototypeObjectType extends ObjectType {
 
     // Handle the case where the constraint object is a record type.
     //
-    // param constraintObj {{prop: (number|undefined)}}
-    // function f(constraintObj) {}
+    // param constraint {{prop: (number|undefined)}}
+    // function f(constraint) {}
     // f({});
     //
     // We want to modify the object literal to match the constraint, by
     // taking any each property on the record and trying to match
     // properties on this object.
-    if (constraintObj.isRecordType()) {
-      for (String prop : constraintObj.getOwnPropertyNames()) {
-        JSType propType = constraintObj.getPropertyType(prop);
-        if (!isPropertyTypeDeclared(prop)) {
-          JSType typeToInfer = propType;
-          if (!hasProperty(prop)) {
-            typeToInfer = getNativeType(JSTypeNative.VOID_TYPE)
-                .getLeastSupertype(propType);
-          }
-          defineInferredProperty(prop, typeToInfer, null);
+    if (constraint.isRecordType()) {
+      matchRecordTypeConstraint(constraint.toObjectType());
+    } else if (constraint.isUnionType()) {
+      for (JSType alt : constraint.toMaybeUnionType().getAlternates()) {
+        if (alt.isRecordType()) {
+          matchRecordTypeConstraint(alt.toObjectType());
         }
       }
     }
   }
+
+  public void matchRecordTypeConstraint(ObjectType constraintObj) {
+    for (String prop : constraintObj.getOwnPropertyNames()) {
+      JSType propType = constraintObj.getPropertyType(prop);
+      if (!isPropertyTypeDeclared(prop)) {
+        JSType typeToInfer = propType;
+        if (!hasProperty(prop)) {
+          typeToInfer = getNativeType(JSTypeNative.VOID_TYPE)
+              .getLeastSupertype(propType);
+        }
+        defineInferredProperty(prop, typeToInfer, null);
+      }
+    }
+  }
+
 }
diff --git a/src/com/google/javascript/rhino/jstype/ProxyObjectType.java b/src/com/google/javascript/rhino/jstype/ProxyObjectType.java
index cc5b75b9a..b7416b36e 100644
--- a/src/com/google/javascript/rhino/jstype/ProxyObjectType.java
+++ b/src/com/google/javascript/rhino/jstype/ProxyObjectType.java
@@ -421,7 +421,7 @@ class ProxyObjectType extends ObjectType {
   }
 
   @Override
-  public void matchConstraint(ObjectType constraint) {
+  public void matchConstraint(JSType constraint) {
     referencedType.matchConstraint(constraint);
   }
 
diff --git a/src/com/google/javascript/rhino/jstype/UnionType.java b/src/com/google/javascript/rhino/jstype/UnionType.java
index f9aacdf42..581954643 100644
--- a/src/com/google/javascript/rhino/jstype/UnionType.java
+++ b/src/com/google/javascript/rhino/jstype/UnionType.java
@@ -588,9 +588,9 @@ public class UnionType extends JSType {
   }
 
   @Override
-  public void matchConstraint(ObjectType constraintObj) {
+  public void matchConstraint(JSType constraint) {
     for (JSType alternate : alternates) {
-      alternate.matchConstraint(constraintObj);
+      alternate.matchConstraint(constraint);
     }
   }
 
diff --git a/test/com/google/javascript/jscomp/TypeInferenceTest.java b/test/com/google/javascript/jscomp/TypeInferenceTest.java
index 9269bff3b..af38cfae4 100644
--- a/test/com/google/javascript/jscomp/TypeInferenceTest.java
+++ b/test/com/google/javascript/jscomp/TypeInferenceTest.java
@@ -1003,4 +1003,22 @@ public class TypeInferenceTest extends TestCase {
     inFunction("var out = 3; if (goog.isNull(this)) out = this;");
     verify("out", createUnionType(OBJECT_TYPE, NUMBER_TYPE));
   }
+
+  public void testRecordInference() {
+    inFunction(
+        "/** @param {{a: (boolean|undefined)}|{b: (string|undefined)}} x */" +
+        "function f(x) {}" +
+        "var out = {};" +
+        "f(out);");
+    assertEquals("{a: (boolean|undefined), b: (string|undefined)}",
+        getType("out").toString());
+  }
+
+  public void testIssue785() {
+    inFunction("/** @param {string|{prop: (string|undefined)}} x */" +
+               "function f(x) {}" +
+               "var out = {};" +
+               "f(out);");
+    assertEquals("{prop: (string|undefined)}", getType("out").toString());
+  }
 }
