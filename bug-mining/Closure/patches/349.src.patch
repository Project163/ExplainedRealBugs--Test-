diff --git a/src/com/google/javascript/jscomp/CompilerOptions.java b/src/com/google/javascript/jscomp/CompilerOptions.java
index b67243175..caba65dc9 100644
--- a/src/com/google/javascript/jscomp/CompilerOptions.java
+++ b/src/com/google/javascript/jscomp/CompilerOptions.java
@@ -586,6 +586,9 @@ public class CompilerOptions implements Serializable, Cloneable {
   /** Whether to gather property names from types in externs. */
   boolean gatherExternsFromTypes;
 
+  /** Whether to declare globals declared in externs as properties on window */
+  boolean declaredGlobalExternsOnWindow;
+
   //--------------------------------
   // Special-purpose alterations
   //--------------------------------
@@ -1001,6 +1004,7 @@ public class CompilerOptions implements Serializable, Cloneable {
     anonymousFunctionNaming = AnonymousFunctionNamingPolicy.OFF;
     exportTestFunctions = false;
     gatherExternsFromTypes = false;
+    declaredGlobalExternsOnWindow = false;
 
     // Alterations
     runtimeTypeCheck = false;
diff --git a/src/com/google/javascript/jscomp/DeclaredGlobalExternsOnWindow.java b/src/com/google/javascript/jscomp/DeclaredGlobalExternsOnWindow.java
new file mode 100644
index 000000000..203a2fef7
--- /dev/null
+++ b/src/com/google/javascript/jscomp/DeclaredGlobalExternsOnWindow.java
@@ -0,0 +1,80 @@
+/*
+ * Copyright 2014 The Closure Compiler Authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package com.google.javascript.jscomp;
+
+import com.google.javascript.rhino.IR;
+import com.google.javascript.rhino.Node;
+
+import java.util.LinkedHashSet;
+import java.util.Set;
+
+/**
+ * A compiler pass to normalize externs by declaring global names on
+ * the "window" object.
+ */
+class DeclaredGlobalExternsOnWindow
+    extends NodeTraversal.AbstractShallowStatementCallback
+    implements CompilerPass {
+
+  private final AbstractCompiler compiler;
+  private final Set<String> names = new LinkedHashSet<>();
+
+  public DeclaredGlobalExternsOnWindow(AbstractCompiler compiler) {
+    this.compiler = compiler;
+  }
+
+  @Override
+  public void process(Node externs, Node root) {
+    NodeTraversal.traverse(compiler, externs, this);
+
+    addWindowProperties();
+  }
+
+  private void addWindowProperties() {
+    if (names.size() > 0) {
+      Node declRoot = getSynthesizedExternsRoot();
+      for (String prop : names) {
+        addExtern(declRoot, prop);
+      }
+      compiler.reportCodeChange();
+    }
+  }
+
+  private void addExtern(Node declRoot, String export) {
+    // TODO(johnlenz): add type declarations.
+    Node propstmt = IR.exprResult(
+        IR.getprop(IR.name("window"), IR.string(export)));
+    declRoot.addChildToBack(propstmt);
+  }
+
+  /** Lazily create a "new" externs root for undeclared variables. */
+  private Node getSynthesizedExternsRoot() {
+    return  compiler.getSynthesizedExternsInput().getAstRoot(compiler);
+  }
+
+  @Override
+  public void visit(NodeTraversal t, Node n, Node parent) {
+    if (n.isFunction()) {
+      names.add(n.getFirstChild().getString());
+    } else if (n.isVar()) {
+      for (Node c : n.children()) {
+        names.add(c.getString());
+      }
+    }
+  }
+
+}
diff --git a/src/com/google/javascript/jscomp/DefaultPassConfig.java b/src/com/google/javascript/jscomp/DefaultPassConfig.java
index ff1969e1d..d1af0ba10 100644
--- a/src/com/google/javascript/jscomp/DefaultPassConfig.java
+++ b/src/com/google/javascript/jscomp/DefaultPassConfig.java
@@ -206,6 +206,10 @@ public class DefaultPassConfig extends PassConfig {
 
     checks.add(createEmptyPass("beforeStandardChecks"));
 
+    if (options.declaredGlobalExternsOnWindow) {
+      checks.add(declaredGlobalExternsOnWindow);
+    }
+
     if (options.closurePass) {
       checks.add(closureGoogScopeAliases);
       checks.add(closureRewriteGoogClass);
@@ -1056,6 +1060,16 @@ public class DefaultPassConfig extends PassConfig {
     }
   };
 
+
+  /** Applies aliases and inlines goog.scope. */
+  final PassFactory declaredGlobalExternsOnWindow =
+      new PassFactory("declaredGlobalExternsOnWindow", true) {
+    @Override
+    protected CompilerPass create(AbstractCompiler compiler) {
+      return new DeclaredGlobalExternsOnWindow(compiler);
+    }
+  };
+
   /** Rewrites goog.class */
   final HotSwapPassFactory closureRewriteGoogClass =
       new HotSwapPassFactory("closureRewriteGoogClass", true) {
diff --git a/test/com/google/javascript/jscomp/DeclaredGlobalExternsOnWindowTest.java b/test/com/google/javascript/jscomp/DeclaredGlobalExternsOnWindowTest.java
new file mode 100644
index 000000000..c90f37272
--- /dev/null
+++ b/test/com/google/javascript/jscomp/DeclaredGlobalExternsOnWindowTest.java
@@ -0,0 +1,50 @@
+/*
+ * Copyright 2014 The Closure Compiler Authors.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package com.google.javascript.jscomp;
+
+public class DeclaredGlobalExternsOnWindowTest extends CompilerTestCase {
+
+  @Override
+  protected CompilerPass getProcessor(Compiler compiler) {
+    return new DeclaredGlobalExternsOnWindow(compiler);
+  }
+
+  public void testWindowProperty1() {
+    allowExternsChanges(true);
+    testExternChanges("var a", "", "window.a;var a");
+  }
+
+  public void testWindowProperty2() {
+    allowExternsChanges(true);
+    testExternChanges("", "var a", "");
+  }
+
+  public void testWindowProperty3() {
+    allowExternsChanges(true);
+    testExternChanges("function f() {}", "var b", "window.f;function f(){}");
+  }
+
+  public void testWindowProperty4() {
+    allowExternsChanges(true);
+    testExternChanges("", "function f() {}", "");
+  }
+
+  public void testWindowProperty5() {
+    allowExternsChanges(true);
+    testExternChanges("var x = function f() {}", "var b", "window.x;var x=function f(){}");
+  }
+}
