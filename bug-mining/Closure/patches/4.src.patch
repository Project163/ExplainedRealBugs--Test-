diff --git a/externs/gecko_dom.js b/externs/gecko_dom.js
index aede617b7..979435518 100644
--- a/externs/gecko_dom.js
+++ b/externs/gecko_dom.js
@@ -778,14 +778,22 @@ Selection.prototype.selectionLanguageChange;
 /** @type {NamedNodeMap} */ Element.prototype.attributes;
 Element.prototype.baseURIObject;
 /** @type {!NodeList} */ Element.prototype.childNodes;
-/** @type {string} */ Element.prototype.className;
+/**
+ * @type {string}
+ * @implicitCast
+ */
+Element.prototype.className;
 /** @type {number} */ Element.prototype.clientHeight;
 /** @type {number} */ Element.prototype.clientLeft;
 /** @type {number} */ Element.prototype.clientTop;
 /** @type {number} */ Element.prototype.clientWidth;
 /** @type {string} */ Element.prototype.dir;
 /** @type {Node} */ Element.prototype.firstChild;
-/** @type {string} */ Element.prototype.id;
+/**
+ * @type {string}
+ * @implicitCast
+ */
+Element.prototype.id;
 /**
  * @type {string}
  * @implicitCast
diff --git a/externs/w3c_dom2.js b/externs/w3c_dom2.js
index 10dbc3d37..d9eda4d70 100644
--- a/externs/w3c_dom2.js
+++ b/externs/w3c_dom2.js
@@ -178,6 +178,7 @@ HTMLDocument.prototype.getElementsByName = function(elementName) {};
 function HTMLElement() {}
 
 /**
+ * @implicitCast
  * @type {string}
  * @see http://www.w3.org/TR/2000/CR-DOM-Level-2-20000510/html.html#ID-63534901
  */
@@ -202,6 +203,7 @@ HTMLElement.prototype.lang;
 HTMLElement.prototype.dir;
 
 /**
+ * @implicitCast
  * @type {string}
  * @see http://www.w3.org/TR/2000/CR-DOM-Level-2-20000510/html.html#ID-95362176
  */
diff --git a/javadoc/com/google/javascript/jscomp/ClosureCodingConvention.html b/javadoc/com/google/javascript/jscomp/ClosureCodingConvention.html
index 842fe8bbc..8af67c886 100644
--- a/javadoc/com/google/javascript/jscomp/ClosureCodingConvention.html
+++ b/javadoc/com/google/javascript/jscomp/ClosureCodingConvention.html
@@ -277,6 +277,24 @@ This describes the Closure-specific JavaScript coding conventions.
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>&nbsp;boolean</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></B>(<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>&nbsp;parameter)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This checks whether a given parameter name should be treated as an
+ optional parameter as far as type checking or function call arg count
+ checking is concerned.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;boolean</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;name)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks whether a name should be considered private.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;boolean</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isPropertyTestFunction(com.google.javascript.rhino.Node)">isPropertyTestFunction</A></B>(<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>&nbsp;call)</CODE>
 
 <BR>
@@ -290,6 +308,15 @@ This describes the Closure-specific JavaScript coding conventions.
 <BR>
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if passed a string referring to the superclass.</TD>
 </TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;boolean</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></B>(<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>&nbsp;parameter)</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This checks whether a given parameter should be treated as a marker
+ for a variable argument list function.</TD>
+</TR>
 </TABLE>
 &nbsp;<A NAME="methods_inherited_from_class_com.google.javascript.jscomp.DefaultCodingConvention"><!-- --></A>
 <TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
@@ -297,7 +324,7 @@ This describes the Closure-specific JavaScript coding conventions.
 <TH ALIGN="left"><B>Methods inherited from class com.google.javascript.jscomp.<A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></B></TH>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
-<TD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#applyDelegateRelationship(com.google.javascript.rhino.jstype.ObjectType, com.google.javascript.rhino.jstype.ObjectType, com.google.javascript.rhino.jstype.ObjectType, com.google.javascript.rhino.jstype.FunctionType, com.google.javascript.rhino.jstype.FunctionType)">applyDelegateRelationship</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#defineDelegateProxyProperties(com.google.javascript.rhino.jstype.JSTypeRegistry, com.google.javascript.jscomp.Scope, java.util.Map)">defineDelegateProxyProperties</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#getDelegateRelationship(com.google.javascript.rhino.Node)">getDelegateRelationship</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#getDelegateSuperclassName()">getDelegateSuperclassName</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isConstant(java.lang.String)">isConstant</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isExported(java.lang.String)">isExported</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isExported(java.lang.String, boolean)">isExported</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isPrivate(java.lang.String)">isPrivate</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isValidEnumKey(java.lang.String)">isValidEnumKey</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE></TD>
+<TD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#applyDelegateRelationship(com.google.javascript.rhino.jstype.ObjectType, com.google.javascript.rhino.jstype.ObjectType, com.google.javascript.rhino.jstype.ObjectType, com.google.javascript.rhino.jstype.FunctionType, com.google.javascript.rhino.jstype.FunctionType)">applyDelegateRelationship</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#defineDelegateProxyProperties(com.google.javascript.rhino.jstype.JSTypeRegistry, com.google.javascript.jscomp.Scope, java.util.Map)">defineDelegateProxyProperties</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#getDelegateRelationship(com.google.javascript.rhino.Node)">getDelegateRelationship</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#getDelegateSuperclassName()">getDelegateSuperclassName</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isConstant(java.lang.String)">isConstant</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isExported(java.lang.String)">isExported</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isExported(java.lang.String, boolean)">isExported</A>, <A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isValidEnumKey(java.lang.String)">isValidEnumKey</A></CODE></TD>
 </TR>
 </TABLE>
 &nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
@@ -616,6 +643,69 @@ public <A HREF="../../../../com/google/javascript/jscomp/CodingConvention.Object
 <DT><B>Parameters:</B><DD><CODE>t</CODE> - The node traversal.<DD><CODE>callNode</CODE> - A CALL node.</DL>
 </DD>
 </DL>
+<HR>
+
+<A NAME="isOptionalParameter(com.google.javascript.rhino.Node)"><!-- --></A><H3>
+isOptionalParameter</H3>
+<PRE>
+public boolean <B>isOptionalParameter</B>(<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>&nbsp;parameter)</PRE>
+<DL>
+<DD>This checks whether a given parameter name should be treated as an
+ optional parameter as far as type checking or function call arg count
+ checking is concerned. Note that an optional function parameter may be
+ declared as a simple type and is automatically converted to a union of the
+ declared type and Undefined.
+<P>
+<DD><DL>
+<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></CODE></DL>
+</DD>
+<DD><DL>
+<DT><B>Parameters:</B><DD><CODE>parameter</CODE> - The parameter's node.
+<DT><B>Returns:</B><DD><code>true</code> if the parameter should be treated as an optional
+ parameter.</DL>
+</DD>
+</DL>
+<HR>
+
+<A NAME="isVarArgsParameter(com.google.javascript.rhino.Node)"><!-- --></A><H3>
+isVarArgsParameter</H3>
+<PRE>
+public boolean <B>isVarArgsParameter</B>(<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>&nbsp;parameter)</PRE>
+<DL>
+<DD>This checks whether a given parameter should be treated as a marker
+ for a variable argument list function. A VarArgs parameter must be the
+ last parameter in a function declaration.
+<P>
+<DD><DL>
+<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></CODE></DL>
+</DD>
+<DD><DL>
+<DT><B>Parameters:</B><DD><CODE>parameter</CODE> - The parameter's node.
+<DT><B>Returns:</B><DD><code>true</code> if the parameter should be treated as a variable
+ length parameter.</DL>
+</DD>
+</DL>
+<HR>
+
+<A NAME="isPrivate(java.lang.String)"><!-- --></A><H3>
+isPrivate</H3>
+<PRE>
+public boolean <B>isPrivate</B>(<A HREF="http://java.sun.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</A>&nbsp;name)</PRE>
+<DL>
+<DD>Checks whether a name should be considered private. Private global
+ variables and functions can only be referenced within the source file in
+ which they are declared. Private properties and methods should only be
+ accessed by the class that defines them.
+<P>
+<DD><DL>
+<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></CODE></DL>
+</DD>
+<DD><DL>
+<DT><B>Parameters:</B><DD><CODE>name</CODE> - The name of a global variable or function, or a method or
+     property.
+<DT><B>Returns:</B><DD><code>true</code> if the name should be considered private.</DL>
+</DD>
+</DL>
 <!-- ========= END OF CLASS DATA ========= -->
 <HR>
 
diff --git a/javadoc/com/google/javascript/jscomp/CompilerOptions.html b/javadoc/com/google/javascript/jscomp/CompilerOptions.html
index 3ed022865..187970258 100644
--- a/javadoc/com/google/javascript/jscomp/CompilerOptions.html
+++ b/javadoc/com/google/javascript/jscomp/CompilerOptions.html
@@ -947,6 +947,14 @@ Compiler options
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>&nbsp;boolean</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/CompilerOptions.html#reserveRawExports">reserveRawExports</A></B></CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reserve property names on the global this object.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;boolean</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../com/google/javascript/jscomp/CompilerOptions.html#rewriteFunctionExpressions">rewriteFunctionExpressions</A></B></CODE>
 
 <BR>
@@ -2127,6 +2135,18 @@ public boolean <B>labelRenaming</B></PRE>
 </DL>
 <HR>
 
+<A NAME="reserveRawExports"><!-- --></A><H3>
+reserveRawExports</H3>
+<PRE>
+public boolean <B>reserveRawExports</B></PRE>
+<DL>
+<DD>Reserve property names on the global this object.
+<P>
+<DL>
+</DL>
+</DL>
+<HR>
+
 <A NAME="generatePseudoNames"><!-- --></A><H3>
 generatePseudoNames</H3>
 <PRE>
diff --git a/javadoc/com/google/javascript/jscomp/GoogleCodingConvention.html b/javadoc/com/google/javascript/jscomp/GoogleCodingConvention.html
index 95710909d..da168f87d 100644
--- a/javadoc/com/google/javascript/jscomp/GoogleCodingConvention.html
+++ b/javadoc/com/google/javascript/jscomp/GoogleCodingConvention.html
@@ -343,7 +343,7 @@ public boolean <B>isOptionalParameter</B>(<A HREF="../../../../com/google/javasc
  treated as optional arguments.
 <P>
 <DD><DL>
-<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></CODE></DL>
+<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)">isOptionalParameter</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html" title="class in com.google.javascript.jscomp">ClosureCodingConvention</A></CODE></DL>
 </DD>
 <DD><DL>
 <DT><B>Parameters:</B><DD><CODE>parameter</CODE> - The parameter's node.
@@ -358,13 +358,13 @@ isVarArgsParameter</H3>
 <PRE>
 public boolean <B>isVarArgsParameter</B>(<A HREF="../../../../com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>&nbsp;parameter)</PRE>
 <DL>
-<DD><B>Description copied from interface: <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">CodingConvention</A></CODE></B></DD>
+<DD><B>Description copied from class: <CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">ClosureCodingConvention</A></CODE></B></DD>
 <DD>This checks whether a given parameter should be treated as a marker
  for a variable argument list function. A VarArgs parameter must be the
  last parameter in a function declaration.
 <P>
 <DD><DL>
-<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></CODE></DL>
+<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)">isVarArgsParameter</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html" title="class in com.google.javascript.jscomp">ClosureCodingConvention</A></CODE></DL>
 </DD>
 <DD><DL>
 <DT><B>Parameters:</B><DD><CODE>parameter</CODE> - The parameter's node.
@@ -410,7 +410,7 @@ public boolean <B>isPrivate</B>(<A HREF="http://java.sun.com/javase/6/docs/api/j
  names are never considered private (see <A HREF="../../../../com/google/javascript/jscomp/GoogleCodingConvention.html#isExported(java.lang.String, boolean)"><CODE>isExported(java.lang.String, boolean)</CODE></A>).
 <P>
 <DD><DL>
-<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/DefaultCodingConvention.html" title="class in com.google.javascript.jscomp">DefaultCodingConvention</A></CODE></DL>
+<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></CODE> in interface <CODE><A HREF="../../../../com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A></CODE><DT><B>Overrides:</B><DD><CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html#isPrivate(java.lang.String)">isPrivate</A></CODE> in class <CODE><A HREF="../../../../com/google/javascript/jscomp/ClosureCodingConvention.html" title="class in com.google.javascript.jscomp">ClosureCodingConvention</A></CODE></DL>
 </DD>
 <DD><DL>
 <DT><B>Parameters:</B><DD><CODE>name</CODE> - The name of a global variable or function, or a method or
diff --git a/javadoc/com/google/javascript/rhino/jstype/AllType.html b/javadoc/com/google/javascript/rhino/jstype/AllType.html
index b00d8473d..6d018b2af 100644
--- a/javadoc/com/google/javascript/rhino/jstype/AllType.html
+++ b/javadoc/com/google/javascript/rhino/jstype/AllType.html
@@ -192,6 +192,15 @@ All type, representing all values.
 <TR BGCOLOR="white" CLASS="TableRowColor">
 <TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
 <CODE>&nbsp;boolean</CODE></FONT></TD>
+<TD><CODE><B><A HREF="../../../../../com/google/javascript/rhino/jstype/AllType.html#matchesObjectContext()">matchesObjectContext</A></B>()</CODE>
+
+<BR>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This predicate is used to test whether a given type can appear in an
+ <code>Object</code> context, such as the expression in a with statement.</TD>
+</TR>
+<TR BGCOLOR="white" CLASS="TableRowColor">
+<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
+<CODE>&nbsp;boolean</CODE></FONT></TD>
 <TD><CODE><B><A HREF="../../../../../com/google/javascript/rhino/jstype/AllType.html#matchesStringContext()">matchesStringContext</A></B>()</CODE>
 
 <BR>
@@ -236,7 +245,7 @@ All type, representing all values.
 <TH ALIGN="left"><B>Methods inherited from class com.google.javascript.rhino.jstype.<A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html" title="class in com.google.javascript.rhino.jstype">JSType</A></B></TH>
 </TR>
 <TR BGCOLOR="white" CLASS="TableRowColor">
-<TD><CODE><A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#autoboxesTo()">autoboxesTo</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#canAssignTo(com.google.javascript.rhino.jstype.JSType)">canAssignTo</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#canTestForEqualityWith(com.google.javascript.rhino.jstype.JSType)">canTestForEqualityWith</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#canTestForShallowEqualityWith(com.google.javascript.rhino.jstype.JSType)">canTestForShallowEqualityWith</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#dereference()">dereference</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#differsFrom(com.google.javascript.rhino.jstype.JSType)">differsFrom</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#equals(java.lang.Object)">equals</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#findPropertyType(java.lang.String)">findPropertyType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#forgiveUnknownNames()">forgiveUnknownNames</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getJSDocInfo()">getJSDocInfo</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getRestrictedTypeGivenToBooleanOutcome(boolean)">getRestrictedTypeGivenToBooleanOutcome</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderEquality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderEquality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderInequality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderInequality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderShallowEquality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderShallowEquality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderShallowInequality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderShallowInequality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#hashCode()">hashCode</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isArrayType()">isArrayType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isBooleanObjectType()">isBooleanObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isBooleanValueType()">isBooleanValueType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isCheckedUnknownType()">isCheckedUnknownType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isConstructor()">isConstructor</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isDateType()">isDateType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isEmptyType()">isEmptyType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isEnumElementType()">isEnumElementType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isEnumType()">isEnumType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isFunctionPrototypeType()">isFunctionPrototypeType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isFunctionType()">isFunctionType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isInstanceType()">isInstanceType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isInterface()">isInterface</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNamedType()">isNamedType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNominalType()">isNominalType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNoObjectType()">isNoObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNoType()">isNoType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNullable()">isNullable</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNullType()">isNullType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNumber()">isNumber</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNumberObjectType()">isNumberObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNumberValueType()">isNumberValueType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isObject()">isObject</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isOrdinaryFunction()">isOrdinaryFunction</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isRecordType()">isRecordType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isRegexpType()">isRegexpType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isString()">isString</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isStringObjectType()">isStringObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isStringValueType()">isStringValueType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isTemplateType()">isTemplateType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isUnionType()">isUnionType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isUnknownType()">isUnknownType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isVoidType()">isVoidType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesInt32Context()">matchesInt32Context</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesNumberContext()">matchesNumberContext</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesObjectContext()">matchesObjectContext</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesUint32Context()">matchesUint32Context</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#restrictByNotNullOrUndefined()">restrictByNotNullOrUndefined</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#unboxesTo()">unboxesTo</A></CODE></TD>
+<TD><CODE><A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#autoboxesTo()">autoboxesTo</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#canAssignTo(com.google.javascript.rhino.jstype.JSType)">canAssignTo</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#canTestForEqualityWith(com.google.javascript.rhino.jstype.JSType)">canTestForEqualityWith</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#canTestForShallowEqualityWith(com.google.javascript.rhino.jstype.JSType)">canTestForShallowEqualityWith</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#dereference()">dereference</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#differsFrom(com.google.javascript.rhino.jstype.JSType)">differsFrom</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#equals(java.lang.Object)">equals</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#findPropertyType(java.lang.String)">findPropertyType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#forgiveUnknownNames()">forgiveUnknownNames</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getJSDocInfo()">getJSDocInfo</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getRestrictedTypeGivenToBooleanOutcome(boolean)">getRestrictedTypeGivenToBooleanOutcome</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderEquality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderEquality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderInequality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderInequality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderShallowEquality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderShallowEquality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#getTypesUnderShallowInequality(com.google.javascript.rhino.jstype.JSType)">getTypesUnderShallowInequality</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#hashCode()">hashCode</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isArrayType()">isArrayType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isBooleanObjectType()">isBooleanObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isBooleanValueType()">isBooleanValueType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isCheckedUnknownType()">isCheckedUnknownType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isConstructor()">isConstructor</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isDateType()">isDateType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isEmptyType()">isEmptyType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isEnumElementType()">isEnumElementType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isEnumType()">isEnumType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isFunctionPrototypeType()">isFunctionPrototypeType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isFunctionType()">isFunctionType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isInstanceType()">isInstanceType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isInterface()">isInterface</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNamedType()">isNamedType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNominalType()">isNominalType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNoObjectType()">isNoObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNoType()">isNoType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNullable()">isNullable</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNullType()">isNullType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNumber()">isNumber</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNumberObjectType()">isNumberObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isNumberValueType()">isNumberValueType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isObject()">isObject</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isOrdinaryFunction()">isOrdinaryFunction</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isRecordType()">isRecordType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isRegexpType()">isRegexpType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isString()">isString</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isStringObjectType()">isStringObjectType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isStringValueType()">isStringValueType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isTemplateType()">isTemplateType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isUnionType()">isUnionType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isUnknownType()">isUnknownType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#isVoidType()">isVoidType</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesInt32Context()">matchesInt32Context</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesNumberContext()">matchesNumberContext</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesUint32Context()">matchesUint32Context</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#restrictByNotNullOrUndefined()">restrictByNotNullOrUndefined</A>, <A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#unboxesTo()">unboxesTo</A></CODE></TD>
 </TR>
 </TABLE>
 &nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
@@ -315,6 +324,28 @@ public boolean <B>matchesStringContext</B>()</PRE>
 </DL>
 <HR>
 
+<A NAME="matchesObjectContext()"><!-- --></A><H3>
+matchesObjectContext</H3>
+<PRE>
+public boolean <B>matchesObjectContext</B>()</PRE>
+<DL>
+<DD><B>Description copied from class: <CODE><A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesObjectContext()">JSType</A></CODE></B></DD>
+<DD>This predicate is used to test whether a given type can appear in an
+ <code>Object</code> context, such as the expression in a with statement.
+
+ Most types we will encounter, except notably <code>null</code>, have at least
+ the potential for converting to <code>Object</code>.  Host defined objects can
+ get peculiar.
+<P>
+<DD><DL>
+<DT><B>Overrides:</B><DD><CODE><A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html#matchesObjectContext()">matchesObjectContext</A></CODE> in class <CODE><A HREF="../../../../../com/google/javascript/rhino/jstype/JSType.html" title="class in com.google.javascript.rhino.jstype">JSType</A></CODE></DL>
+</DD>
+<DD><DL>
+</DL>
+</DD>
+</DL>
+<HR>
+
 <A NAME="canBeCalled()"><!-- --></A><H3>
 canBeCalled</H3>
 <PRE>
diff --git a/javadoc/index-all.html b/javadoc/index-all.html
index b1f087849..c4d450347 100644
--- a/javadoc/index-all.html
+++ b/javadoc/index-all.html
@@ -4138,6 +4138,11 @@ Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhi
 <DT><A HREF="./com/google/javascript/rhino/Node.html#isOptionalArg()"><B>isOptionalArg()</B></A> - 
 Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
 <DD>Returns whether this node is an optional argument node.
+<DT><A HREF="./com/google/javascript/jscomp/ClosureCodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)"><B>isOptionalParameter(Node)</B></A> - 
+Method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/ClosureCodingConvention.html" title="class in com.google.javascript.jscomp">ClosureCodingConvention</A>
+<DD>This checks whether a given parameter name should be treated as an
+ optional parameter as far as type checking or function call arg count
+ checking is concerned.
 <DT><A HREF="./com/google/javascript/jscomp/CodingConvention.html#isOptionalParameter(com.google.javascript.rhino.Node)"><B>isOptionalParameter(Node)</B></A> - 
 Method in interface com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A>
 <DD>This checks whether a given parameter name should be treated as an
@@ -4171,6 +4176,9 @@ Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhi
 <DD>Returns whether this builder is populated with information that can be
  used to <A HREF="./com/google/javascript/rhino/JSDocInfoBuilder.html#build(java.lang.String)"><CODE>JSDocInfoBuilder.build(java.lang.String)</CODE></A> a <A HREF="./com/google/javascript/rhino/JSDocInfo.html" title="class in com.google.javascript.rhino"><CODE>JSDocInfo</CODE></A> object that has a
  fileoverview tag.
+<DT><A HREF="./com/google/javascript/jscomp/ClosureCodingConvention.html#isPrivate(java.lang.String)"><B>isPrivate(String)</B></A> - 
+Method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/ClosureCodingConvention.html" title="class in com.google.javascript.jscomp">ClosureCodingConvention</A>
+<DD>Checks whether a name should be considered private.
 <DT><A HREF="./com/google/javascript/jscomp/CodingConvention.html#isPrivate(java.lang.String)"><B>isPrivate(String)</B></A> - 
 Method in interface com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A>
 <DD>Checks whether a name should be considered private.
@@ -4380,6 +4388,10 @@ Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhi
 <DT><A HREF="./com/google/javascript/rhino/Node.html#isVarArgs()"><B>isVarArgs()</B></A> - 
 Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Node.html" title="class in com.google.javascript.rhino">Node</A>
 <DD>Returns whether this node is a variable length argument node.
+<DT><A HREF="./com/google/javascript/jscomp/ClosureCodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)"><B>isVarArgsParameter(Node)</B></A> - 
+Method in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/ClosureCodingConvention.html" title="class in com.google.javascript.jscomp">ClosureCodingConvention</A>
+<DD>This checks whether a given parameter should be treated as a marker
+ for a variable argument list function.
 <DT><A HREF="./com/google/javascript/jscomp/CodingConvention.html#isVarArgsParameter(com.google.javascript.rhino.Node)"><B>isVarArgsParameter(Node)</B></A> - 
 Method in interface com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/CodingConvention.html" title="interface in com.google.javascript.jscomp">CodingConvention</A>
 <DD>This checks whether a given parameter should be treated as a marker
@@ -4724,6 +4736,9 @@ Method in class com.google.javascript.rhino.jstype.<A HREF="./com/google/javascr
 <DT><A HREF="./com/google/javascript/rhino/jstype/VoidType.html#matchesNumberContext()"><B>matchesNumberContext()</B></A> - 
 Method in class com.google.javascript.rhino.jstype.<A HREF="./com/google/javascript/rhino/jstype/VoidType.html" title="class in com.google.javascript.rhino.jstype">VoidType</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/rhino/jstype/AllType.html#matchesObjectContext()"><B>matchesObjectContext()</B></A> - 
+Method in class com.google.javascript.rhino.jstype.<A HREF="./com/google/javascript/rhino/jstype/AllType.html" title="class in com.google.javascript.rhino.jstype">AllType</A>
+<DD>&nbsp;
 <DT><A HREF="./com/google/javascript/rhino/jstype/BooleanType.html#matchesObjectContext()"><B>matchesObjectContext()</B></A> - 
 Method in class com.google.javascript.rhino.jstype.<A HREF="./com/google/javascript/rhino/jstype/BooleanType.html" title="class in com.google.javascript.rhino.jstype">BooleanType</A>
 <DD>&nbsp;
@@ -5673,6 +5688,9 @@ Method in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhi
 <DT><A HREF="./com/google/javascript/rhino/Token.html#RESERVED"><B>RESERVED</B></A> - 
 Static variable in class com.google.javascript.rhino.<A HREF="./com/google/javascript/rhino/Token.html" title="class in com.google.javascript.rhino">Token</A>
 <DD>&nbsp;
+<DT><A HREF="./com/google/javascript/jscomp/CompilerOptions.html#reserveRawExports"><B>reserveRawExports</B></A> - 
+Variable in class com.google.javascript.jscomp.<A HREF="./com/google/javascript/jscomp/CompilerOptions.html" title="class in com.google.javascript.jscomp">CompilerOptions</A>
+<DD>Reserve property names on the global this object.
 <DT><A HREF="./com/google/javascript/rhino/jstype/JSTypeRegistry.html#resetForTypeCheck()"><B>resetForTypeCheck()</B></A> - 
 Method in class com.google.javascript.rhino.jstype.<A HREF="./com/google/javascript/rhino/jstype/JSTypeRegistry.html" title="class in com.google.javascript.rhino.jstype">JSTypeRegistry</A>
 <DD>Reset to run the TypeCheck pass.
diff --git a/javadoc/serialized-form.html b/javadoc/serialized-form.html
index f1a0ff97c..e72b44f6d 100644
--- a/javadoc/serialized-form.html
+++ b/javadoc/serialized-form.html
@@ -1120,6 +1120,17 @@ boolean <B>labelRenaming</B></PRE>
 </DL>
 <HR>
 <H3>
+reserveRawExports</H3>
+<PRE>
+boolean <B>reserveRawExports</B></PRE>
+<DL>
+<DD>Reserve property names on the global this object.
+<P>
+<DL>
+</DL>
+</DL>
+<HR>
+<H3>
 generatePseudoNames</H3>
 <PRE>
 boolean <B>generatePseudoNames</B></PRE>
diff --git a/lib/google_common_deploy.jar b/lib/google_common_deploy.jar
index 40de46eb1..5e4487180 100755
Binary files a/lib/google_common_deploy.jar and b/lib/google_common_deploy.jar differ
diff --git a/lib/google_compiled_protos_deploy.jar b/lib/google_compiled_protos_deploy.jar
index 9d55710d5..19de9a557 100755
Binary files a/lib/google_compiled_protos_deploy.jar and b/lib/google_compiled_protos_deploy.jar differ
diff --git a/src/com/google/javascript/jscomp/ClosureCodingConvention.java b/src/com/google/javascript/jscomp/ClosureCodingConvention.java
index dd15476ec..b57775268 100644
--- a/src/com/google/javascript/jscomp/ClosureCodingConvention.java
+++ b/src/com/google/javascript/jscomp/ClosureCodingConvention.java
@@ -316,4 +316,28 @@ public class ClosureCodingConvention extends DefaultCodingConvention {
     return new ObjectLiteralCast(typeNode.getQualifiedName(),
                                  typeNode.getNext());
   }
+
+  /**
+   * {@inheritDoc}
+   */
+  @Override
+  public boolean isOptionalParameter(Node parameter) {
+    return false;
+  }
+
+  /**
+   * {@inheritDoc}
+   */
+  @Override
+  public boolean isVarArgsParameter(Node parameter) {
+    return false;
+  }
+
+  /**
+   * {@inheritDoc}
+   */
+  @Override
+  public boolean isPrivate(String name) {
+    return false;
+  }
 }
diff --git a/src/com/google/javascript/jscomp/CodeGenerator.java b/src/com/google/javascript/jscomp/CodeGenerator.java
index 3c97fc499..38a757fc5 100644
--- a/src/com/google/javascript/jscomp/CodeGenerator.java
+++ b/src/com/google/javascript/jscomp/CodeGenerator.java
@@ -39,7 +39,14 @@ class CodeGenerator {
 
   private final CharsetEncoder outputCharsetEncoder;
 
-  CodeGenerator(CodeConsumer consumer, Charset outputCharset) {
+  /** Whether to perform basic checks for obviously incorrect AST structure. */
+  // NOTE: This exists to support a few extern legacy parsers that don't 
+  // properly normalize the AST (JsMinimizer).
+  private final boolean validation;
+
+  CodeGenerator(
+      CodeConsumer consumer, Charset outputCharset, boolean validation) {
+    this.validation = validation;
     cc = consumer;
     if (outputCharset == null || outputCharset == Charsets.US_ASCII) {
       // If we want our default (pretending to be UTF-8, but escaping anything
@@ -52,8 +59,12 @@ class CodeGenerator {
     }
   }
 
+  CodeGenerator(CodeConsumer consumer, Charset outputCharset) {
+    this(consumer, outputCharset, true);
+  }
+
   CodeGenerator(CodeConsumer consumer) {
-    this(consumer, null);
+    this(consumer, null, false);
   }
 
   void add(String str) {
@@ -481,10 +492,10 @@ class CodeGenerator {
         break;
 
       case Token.EXPR_VOID:
-        // TODO(johnlenz): Enable this exception once the external users of
-        //     CodePrinter have been corrected.
-        // throw new Error("EXPR_VOID should not be used in this codebase.");
       case Token.EXPR_RESULT:
+        if (type == Token.EXPR_VOID && validation) {
+          throw new Error("Unexpected EXPR_VOID. Should be EXPR_RESULT.");
+        }
         Preconditions.checkState(childCount == 1);
         add(first, Context.START_OF_EXPR);
         cc.endStatement();
@@ -610,8 +621,9 @@ class CodeGenerator {
     Node nodeToProcess = n;
 
     if (!allowNonBlockChild && n.getType() != Token.BLOCK) {
-      // TODO(johnlenz) : Enable this when the JsMinifier is corrected.
-      // throw new Error("Missing BLOCK child.");
+      if (validation) {
+        throw new Error("Missing BLOCK child.");
+      }
     }
 
     // Strip unneeded blocks, that is blocks with <2 children.
diff --git a/src/com/google/javascript/jscomp/CodePrinter.java b/src/com/google/javascript/jscomp/CodePrinter.java
index 5e4211a2b..e60d097dc 100644
--- a/src/com/google/javascript/jscomp/CodePrinter.java
+++ b/src/com/google/javascript/jscomp/CodePrinter.java
@@ -485,6 +485,7 @@ class CodePrinter {
     // Specify a charset to use when outputting source code.  If null,
     // then just output ASCII.
     private Charset outputCharset = null;
+    private boolean validation = true;
 
     /**
      * Sets the root node from which to generate the source code.
@@ -543,11 +544,23 @@ class CodePrinter {
       return this;
     }
 
+    /**
+     * Set the charset to use when determining what characters need to be
+     * escaped in the output.
+     */
     Builder setOutputCharset(Charset outCharset) {
       this.outputCharset = outCharset;
       return this;
     }
 
+    /**
+     * Whether the input AST guaranteed to be properly formed, fail if it isn't.
+     */
+    Builder setValidation(boolean validation) {
+      this.validation = validation;
+      return this;
+    }
+
     /**
      * Generates the source code and returns it.
      */
@@ -564,7 +577,7 @@ class CodePrinter {
               : Format.COMPACT;
 
       return toSource(root, outputFormat, lineBreak, lineLengthThreshold,
-          sourceMap, outputCharset);
+          sourceMap, outputCharset, validation);
     }
   }
 
@@ -580,7 +593,8 @@ class CodePrinter {
   private static String toSource(Node root, Format outputFormat,
                                  boolean lineBreak,  int lineLengthThreshold,
                                  SourceMap sourceMap,
-                                 Charset outputCharset) {
+                                 Charset outputCharset,
+                                 boolean validation) {
     boolean createSourceMap = (sourceMap != null);
     CodeConsumer cp =
         outputFormat == Format.COMPACT
@@ -590,7 +604,7 @@ class CodePrinter {
     CodeGenerator cg =
         outputFormat == Format.TYPED
         ? new TypedCodeGenerator(cp, outputCharset)
-        : new CodeGenerator(cp, outputCharset);
+        : new CodeGenerator(cp, outputCharset, validation);
     cg.add(root);
 
     String code = ((HasGetCode) cp).getCode();
diff --git a/src/com/google/javascript/jscomp/Compiler.java b/src/com/google/javascript/jscomp/Compiler.java
index db515871c..54ce60fbb 100644
--- a/src/com/google/javascript/jscomp/Compiler.java
+++ b/src/com/google/javascript/jscomp/Compiler.java
@@ -1328,10 +1328,8 @@ public class Compiler extends AbstractCompiler {
   void normalizeNodeTypes(Node root) {
     Tracer tracer = newTracer("normalizeNodeTypes");
 
-    // TODO(johnlenz): Move the Node type normalizer into the general
-    // Normalization pass once we force everybody to turn it on. It's
-    // confusing to have a mandatory normalization pass and an optional
-    // one.
+    // TODO(johnlenz): Merge the NodeTypeNormalizer into the AST creator
+    // it doesn't need to be done separately.
     CompilerPass pass = new NodeTypeNormalizer();
     pass.process(null, root);
 
diff --git a/src/com/google/javascript/jscomp/CompilerOptions.java b/src/com/google/javascript/jscomp/CompilerOptions.java
index f834bf221..dee0f7ae3 100644
--- a/src/com/google/javascript/jscomp/CompilerOptions.java
+++ b/src/com/google/javascript/jscomp/CompilerOptions.java
@@ -338,6 +338,9 @@ public class CompilerOptions implements Serializable, Cloneable {
   /** Controls label renaming. */
   public boolean labelRenaming;
 
+  /** Reserve property names on the global this object. */
+  public boolean reserveRawExports;
+
   /**
    * Generate pseudo names for variables and properties for debugging purposes.
    */
diff --git a/src/com/google/javascript/jscomp/CompilerRunner.java b/src/com/google/javascript/jscomp/CompilerRunner.java
index ffe7deb22..b7efd1d8c 100644
--- a/src/com/google/javascript/jscomp/CompilerRunner.java
+++ b/src/com/google/javascript/jscomp/CompilerRunner.java
@@ -109,6 +109,7 @@ public class CompilerRunner extends
   @Override
   protected CompilerOptions createOptions() {
     CompilerOptions options = new CompilerOptions();
+    options.setCodingConvention(new ClosureCodingConvention());
     CompilationLevel level = FLAG_compilation_level.get();
     level.setOptionsForCompilationLevel(options);
     WarningLevel wLevel = FLAG_warning_level.get();
diff --git a/src/com/google/javascript/jscomp/DefaultPassConfig.java b/src/com/google/javascript/jscomp/DefaultPassConfig.java
index ac82dcd93..8b42fb0da 100644
--- a/src/com/google/javascript/jscomp/DefaultPassConfig.java
+++ b/src/com/google/javascript/jscomp/DefaultPassConfig.java
@@ -443,6 +443,11 @@ public class DefaultPassConfig extends PassConfig {
       passes.add(renameProperties);
     }
 
+    // Reserve global names added to the "windows" object.
+    if (options.reserveRawExports) {
+      passes.add(gatherRawExports);
+    }
+
     // This comes after property renaming because quoted property names must
     // not be renamed.
     if (options.convertToDottedProperties) {
@@ -671,6 +676,27 @@ public class DefaultPassConfig extends PassConfig {
     }
   };
 
+  /** Raw exports processing pass. */
+  final PassFactory gatherRawExports =
+      new PassFactory("gatherRawExports", false) {
+    @Override
+    protected CompilerPass createInternal(AbstractCompiler compiler) {
+      final GatherRawExports pass = new GatherRawExports(
+          compiler);
+
+      return new CompilerPass() {
+        @Override
+        public void process(Node externs, Node root) {
+          pass.process(externs, root);
+          if (exportedNames == null) {
+            exportedNames = Sets.newHashSet();
+          }
+          exportedNames.addAll(pass.getExportedVariableNames());
+        }
+      };
+    }
+  };
+
   /** Closure pre-processing pass. */
   @SuppressWarnings("deprecation")
   final PassFactory closurePrimitives =
diff --git a/src/com/google/javascript/jscomp/GatherRawExports.java b/src/com/google/javascript/jscomp/GatherRawExports.java
new file mode 100644
index 000000000..1aa37fb5b
--- /dev/null
+++ b/src/com/google/javascript/jscomp/GatherRawExports.java
@@ -0,0 +1,81 @@
+/*
+ * Copyright 2009 Google Inc.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package com.google.javascript.jscomp;
+
+import com.google.common.base.Preconditions;
+import com.google.common.collect.Sets;
+import com.google.javascript.jscomp.NodeTraversal.AbstractPostOrderCallback;
+import com.google.javascript.rhino.Node;
+import com.google.javascript.rhino.Token;
+
+import java.util.Set;
+
+/**
+ * External references of the form: "window['xx']" indicate names that must
+ * be reserved when variable renaming to avoid conflicts.
+ *
+*
+ */
+class GatherRawExports extends AbstractPostOrderCallback
+    implements CompilerPass {
+
+  private final AbstractCompiler compiler;
+
+  private static final String GLOBAL_THIS_NAME = "window";
+
+  private final Set<String> exportedVariables = Sets.newHashSet();
+
+  GatherRawExports(AbstractCompiler compiler) {
+    this.compiler = compiler;
+  }
+
+  @Override
+  public void process(Node externs, Node root) {
+    Preconditions.checkState(compiler.isNormalized());
+    NodeTraversal.traverse(compiler, root, this);
+  }
+
+  @Override
+  public void visit(NodeTraversal t, Node n, Node parent) {
+    Node sibling = n.getNext();
+    if (sibling != null
+        && sibling.getType() == Token.STRING
+        && NodeUtil.isGet(parent)) {
+      // TODO(johnlenz): Should we warn if we see a property name that
+      // hasn't been exported?
+      if (isGlobalThisObject(t, n)) {
+        exportedVariables.add(sibling.getString());
+      }
+    }
+  }
+
+  private boolean isGlobalThisObject(NodeTraversal t, Node n) {
+    if (n.getType() == Token.THIS) {
+      return t.inGlobalScope();
+    } else if (n.getType() == Token.NAME && !NodeUtil.isLabelName(n)) {
+      String varName = n.getString();
+      if (varName.equals(GLOBAL_THIS_NAME)) {
+        return true;
+      }
+    }
+    return false;
+  }
+
+  public Set<String> getExportedVariableNames() {
+    return exportedVariables;
+  }
+}
diff --git a/src/com/google/javascript/jscomp/JsAst.java b/src/com/google/javascript/jscomp/JsAst.java
index 28f4c34f9..29b69424c 100644
--- a/src/com/google/javascript/jscomp/JsAst.java
+++ b/src/com/google/javascript/jscomp/JsAst.java
@@ -94,7 +94,7 @@ public class JsAst implements SourceAst {
       compiler.report(JSError.make(AbstractCompiler.READ_ERROR, sourceName));
     }
 
-    if (root == null) {
+    if (root == null || compiler.hasHaltingErrors()) {
       // There was a parse error or IOException, so use a dummy block.
       root = new Node(Token.BLOCK);
     } else {
diff --git a/src/com/google/javascript/jscomp/Normalize.java b/src/com/google/javascript/jscomp/Normalize.java
index 70dde67ed..cc08e0487 100644
--- a/src/com/google/javascript/jscomp/Normalize.java
+++ b/src/com/google/javascript/jscomp/Normalize.java
@@ -90,7 +90,8 @@ class Normalize implements CompilerPass, Callback {
     NodeTraversal.traverse(compiler, root, this);
     if (MAKE_LOCAL_NAMES_UNIQUE) {
       MakeDeclaredNamesUnique renamer = new MakeDeclaredNamesUnique();
-      NodeTraversal.traverse(compiler, root, renamer);
+      NodeTraversal t = new NodeTraversal(compiler, renamer);
+      t.traverseRoots(externs, root);
     }
     removeDuplicateDeclarations(root);
   }
@@ -275,13 +276,13 @@ class Normalize implements CompilerPass, Callback {
   // TODO(johnlenz): Move this to NodeTypeNormalizer once the unit tests are
   // fixed.
   /**
-   * Limit the number of special cases where LABELs need to be handled. Only 
-   * BLOCK and loops are allowed to be labeled.  Loop labels must remain in 
+   * Limit the number of special cases where LABELs need to be handled. Only
+   * BLOCK and loops are allowed to be labeled.  Loop labels must remain in
    * place as the named continues are not allowed for labeled blocks.
    */
   private void normalizeLabels(Node n) {
     Preconditions.checkArgument(n.getType() == Token.LABEL);
-    
+
     Node last = n.getLastChild();
     switch (last.getType()) {
       case Token.LABEL:
diff --git a/src/com/google/javascript/jscomp/TypedCodeGenerator.java b/src/com/google/javascript/jscomp/TypedCodeGenerator.java
index 3342fd9f6..e81de3ecf 100644
--- a/src/com/google/javascript/jscomp/TypedCodeGenerator.java
+++ b/src/com/google/javascript/jscomp/TypedCodeGenerator.java
@@ -32,7 +32,7 @@ import java.nio.charset.Charset;
  */
 class TypedCodeGenerator extends CodeGenerator {
   TypedCodeGenerator(CodeConsumer consumer, Charset outputCharset) {
-    super(consumer, outputCharset);
+    super(consumer, outputCharset, true);
   }
 
   @Override
diff --git a/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java b/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java
index 6217997d4..7d599c0e2 100644
--- a/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java
+++ b/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java
@@ -1429,6 +1429,10 @@ public final class JsDocInfoParser {
     token = next();
     if (token == JsDocToken.ELLIPSIS) {
       token = next();
+      if (token == JsDocToken.RC) {
+        // EMPTY represents the UNKNOWN type in the Type AST.
+        return wrapNode(Token.ELLIPSIS, new Node(Token.EMPTY));
+      }
       restArg = true;
     }
 
diff --git a/src/com/google/javascript/rhino/jstype/AllType.java b/src/com/google/javascript/rhino/jstype/AllType.java
index 3988a719b..5f2a85402 100644
--- a/src/com/google/javascript/rhino/jstype/AllType.java
+++ b/src/com/google/javascript/rhino/jstype/AllType.java
@@ -71,8 +71,13 @@ public final class AllType extends JSType {
 
   @Override
   public boolean matchesStringContext() {
-    // TODO(user): Change this to false once UnionType's implementation is
-    // correct instead of generous.
+    // Be lenient.
+    return true;
+  }
+
+  @Override
+  public boolean matchesObjectContext() {
+    // Be lenient.
     return true;
   }
 
diff --git a/test/com/google/javascript/jscomp/ClosureCodingConventionTest.java b/test/com/google/javascript/jscomp/ClosureCodingConventionTest.java
index 87202a926..42c0124d9 100644
--- a/test/com/google/javascript/jscomp/ClosureCodingConventionTest.java
+++ b/test/com/google/javascript/jscomp/ClosureCodingConventionTest.java
@@ -37,13 +37,13 @@ public class ClosureCodingConventionTest extends TestCase {
         Node.newString(Token.NAME, "opt_b"));
 
     assertFalse(conv.isVarArgsParameter(args.getFirstChild()));
-    assertTrue(conv.isVarArgsParameter(args.getLastChild()));
+    assertFalse(conv.isVarArgsParameter(args.getLastChild()));
     assertFalse(conv.isVarArgsParameter(optArgs.getFirstChild()));
-    assertTrue(conv.isVarArgsParameter(optArgs.getLastChild()));
+    assertFalse(conv.isVarArgsParameter(optArgs.getLastChild()));
 
-    assertTrue(conv.isOptionalParameter(args.getFirstChild()));
+    assertFalse(conv.isOptionalParameter(args.getFirstChild()));
     assertFalse(conv.isOptionalParameter(args.getLastChild()));
-    assertTrue(conv.isOptionalParameter(optArgs.getFirstChild()));
+    assertFalse(conv.isOptionalParameter(optArgs.getFirstChild()));
     assertFalse(conv.isOptionalParameter(optArgs.getLastChild()));
   }
 
diff --git a/test/com/google/javascript/jscomp/CompilerRunnerTest.java b/test/com/google/javascript/jscomp/CompilerRunnerTest.java
index 24fee54fc..0d2648712 100644
--- a/test/com/google/javascript/jscomp/CompilerRunnerTest.java
+++ b/test/com/google/javascript/jscomp/CompilerRunnerTest.java
@@ -116,6 +116,13 @@ public class CompilerRunnerTest extends TestCase {
          CheckSideEffects.USELESS_CODE_ERROR);
   }
 
+  //////////////////////////////////////////////////////////////////////////////
+  // Integration tests
+
+  public void testIssue70() {
+    test("function foo({}) {}", RhinoErrorReporter.PARSE_ERROR);
+  }
+
   /* Helper functions */
 
   private void testSame(String original) {
diff --git a/test/com/google/javascript/jscomp/CompilerTestCase.java b/test/com/google/javascript/jscomp/CompilerTestCase.java
index ff85610fd..23d744df8 100644
--- a/test/com/google/javascript/jscomp/CompilerTestCase.java
+++ b/test/com/google/javascript/jscomp/CompilerTestCase.java
@@ -614,7 +614,11 @@ public abstract class CompilerTestCase extends TestCase  {
 
     Node externsRoot = root.getFirstChild();
     Node mainRoot = root.getLastChild();
-    Node mainRootClone = mainRoot.cloneTree();
+
+    // Save the tree for later comparison.
+    Node rootClone = root.cloneTree();
+    Node externsRootClone = rootClone.getFirstChild();
+    Node mainRootClone = rootClone.getLastChild();
 
     int numRepetitions = getNumRepetitions();
     ErrorManager[] errorManagers = new ErrorManager[numRepetitions];
@@ -719,7 +723,7 @@ public abstract class CompilerTestCase extends TestCase  {
 
       if (normalizeEnabled) {
         Normalize normalize = new Normalize(compiler, false);
-        normalize.process(externsRoot, mainRootClone);
+        normalize.process(externsRootClone, mainRootClone);
       }
 
       if (mainRootClone.checkTreeEqualsSilent(mainRoot)) {
diff --git a/test/com/google/javascript/jscomp/DefaultCodingConventionTest.java b/test/com/google/javascript/jscomp/DefaultCodingConventionTest.java
new file mode 100644
index 000000000..0784e5553
--- /dev/null
+++ b/test/com/google/javascript/jscomp/DefaultCodingConventionTest.java
@@ -0,0 +1,144 @@
+/*
+ * Copyright 2009 Google Inc.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package com.google.javascript.jscomp;
+
+import com.google.javascript.rhino.Node;
+import com.google.javascript.rhino.Token;
+
+import junit.framework.TestCase;
+
+/**
+ * Test class for {@link DefaultCodingConvention}.
+ */
+public class DefaultCodingConventionTest extends TestCase {
+  private DefaultCodingConvention conv = new DefaultCodingConvention();
+
+  public void testVarAndOptionalParams() {
+    Node args = new Node(Token.LP,
+        Node.newString(Token.NAME, "a"),
+        Node.newString(Token.NAME, "b"));
+    Node optArgs = new Node(Token.LP,
+        Node.newString(Token.NAME, "opt_a"),
+        Node.newString(Token.NAME, "opt_b"));
+
+    assertFalse(conv.isVarArgsParameter(args.getFirstChild()));
+    assertTrue(conv.isVarArgsParameter(args.getLastChild()));
+    assertFalse(conv.isVarArgsParameter(optArgs.getFirstChild()));
+    assertTrue(conv.isVarArgsParameter(optArgs.getLastChild()));
+
+    assertTrue(conv.isOptionalParameter(args.getFirstChild()));
+    assertFalse(conv.isOptionalParameter(args.getLastChild()));
+    assertTrue(conv.isOptionalParameter(optArgs.getFirstChild()));
+    assertFalse(conv.isOptionalParameter(optArgs.getLastChild()));
+  }
+
+  public void testInlineName() {
+    assertFalse(conv.isConstant("a"));
+    assertFalse(conv.isConstant("XYZ123_"));
+    assertFalse(conv.isConstant("ABC"));
+    assertFalse(conv.isConstant("ABCdef"));
+    assertFalse(conv.isConstant("aBC"));
+    assertFalse(conv.isConstant("A"));
+    assertFalse(conv.isConstant("_XYZ123"));
+    assertFalse(conv.isConstant("a$b$XYZ123_"));
+    assertFalse(conv.isConstant("a$b$ABC_DEF"));
+    assertFalse(conv.isConstant("a$b$A"));
+    assertFalse(conv.isConstant("a$b$a"));
+    assertFalse(conv.isConstant("a$b$ABCdef"));
+    assertFalse(conv.isConstant("a$b$aBC"));
+    assertFalse(conv.isConstant("a$b$"));
+    assertFalse(conv.isConstant("$"));
+  }
+
+  public void testExportedName() {
+    assertFalse(conv.isExported("_a"));
+    assertFalse(conv.isExported("_a_"));
+    assertFalse(conv.isExported("a"));
+  }
+
+  public void testPrivateName() {
+    assertFalse(conv.isPrivate("a_"));
+    assertFalse(conv.isPrivate("a"));
+    assertFalse(conv.isPrivate("_a_"));
+  }
+
+  public void testEnumKey() {
+    assertTrue(conv.isValidEnumKey("A"));
+    assertTrue(conv.isValidEnumKey("123"));
+    assertTrue(conv.isValidEnumKey("FOO_BAR"));
+
+    assertTrue(conv.isValidEnumKey("a"));
+    assertTrue(conv.isValidEnumKey("someKeyInCamelCase"));
+    assertTrue(conv.isValidEnumKey("_FOO_BAR"));
+  }
+
+  public void testInheritanceDetection1() {
+    assertNotClassDefining("goog.foo(A, B);");
+  }
+
+  public void testInheritanceDetection2() {
+    assertNotClassDefining("goog.inherits(A, B);");
+  }
+
+  public void testInheritanceDetection3() {
+    assertNotClassDefining("A.inherits(B);");
+  }
+
+  public void testInheritanceDetection4() {
+    assertNotClassDefining("goog.inherits(goog.A, goog.B);");
+  }
+
+  public void testInheritanceDetection5() {
+    assertNotClassDefining("goog.A.inherits(goog.B);");
+  }
+
+  public void testInheritanceDetection6() {
+    assertNotClassDefining("A.inherits(this.B);");
+  }
+
+  public void testInheritanceDetection7() {
+    assertNotClassDefining("this.A.inherits(B);");
+  }
+
+  public void testInheritanceDetection8() {
+    assertNotClassDefining("goog.inherits(A, B, C);");
+  }
+
+  public void testInheritanceDetection9() {
+    assertNotClassDefining("A.mixin(B.prototype);");
+  }
+
+  public void testInheritanceDetection10() {
+    assertNotClassDefining("goog.mixin(A.prototype, B.prototype);");
+  }
+
+  public void testInheritanceDetectionPostCollapseProperties() {
+    assertNotClassDefining("goog$inherits(A, B);");
+    assertNotClassDefining("goog$inherits(A);");
+  }
+
+  private void assertNotClassDefining(String code) {
+    Node n = parseTestCode(code);
+    assertNull(conv.getClassesDefinedByCall(n.getFirstChild()));
+  }
+
+  private Node parseTestCode(String code) {
+    Compiler compiler = new Compiler();
+    return compiler.parseTestCode(code).getFirstChild();
+  }
+}
+
diff --git a/test/com/google/javascript/jscomp/GatherRawExportsTest.java b/test/com/google/javascript/jscomp/GatherRawExportsTest.java
new file mode 100644
index 000000000..353021c73
--- /dev/null
+++ b/test/com/google/javascript/jscomp/GatherRawExportsTest.java
@@ -0,0 +1,115 @@
+/*
+ * Copyright 2009 Google Inc.
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package com.google.javascript.jscomp;
+
+import com.google.common.collect.Sets;
+
+import java.util.Set;
+
+/**
+ * Tests for {@link GatherRawExports}.
+ *
+*
+ */
+public class GatherRawExportsTest extends CompilerTestCase {
+
+  private static final String EXTERNS = "var window;";
+  private GatherRawExports last;
+
+  public GatherRawExportsTest() {
+    super(EXTERNS);
+    super.enableNormalize();
+  }
+
+  @Override
+  protected CompilerPass getProcessor(Compiler compiler) {
+    last = new GatherRawExports(compiler);
+    return last;
+  }
+
+  public void testExportsFound1() {
+    assertExported("var a");
+  }
+
+  public void testExportsFound2() {
+    assertExported("window['a']", "a");
+  }
+
+  public void testExportsFound3() {
+    assertExported("window.a", "a");
+  }
+
+  public void testExportsFound4() {
+    assertExported("this['a']", "a");
+  }
+
+  public void testExportsFound5() {
+    assertExported("this.a", "a");
+  }
+
+  public void testExportsFound6() {
+    assertExported("function f() { this['a'] }");
+  }
+
+  public void testExportsFound7() {
+    assertExported("function f() { this.a }");
+  }
+
+  public void testExportsFound8() {
+    assertExported("window['foo']", "foo");
+  }
+
+  public void testExportsFound9() {
+    assertExported("window['a'] = 1;", "a");
+  }
+
+  public void testExportsFound10() {
+    assertExported("window['a']['b']['c'] = 1;", "a");
+  }
+
+  public void testExportsFound11() {
+    assertExported("if (window['a'] = 1) alert(x);", "a");
+  }
+
+  public void testExportsFound12() {
+    assertExported("function foo() { window['a'] = 1; }", "a");
+  }
+
+  public void testExportsFound13() {
+    assertExported("function foo() {var window; window['a'] = 1; }");
+  }
+
+  public void testExportsFound14() {
+    assertExported("var a={window:{}}; a.window['b']");
+  }
+
+  public void testExportsFound15() {
+    assertExported("window.window['b']", "window");
+  }
+
+  public void testExportsFound16() {
+    // It would be nice to handle this case, hopefully inlining will take care
+    // of it for us.
+    assertExported("var a = window; a['b']");
+  }
+
+  private void assertExported(String js, String ... names) {
+    Set<String> setNames = Sets.newHashSet(names);
+    testSame(js);
+    assertTrue(last.getExportedVariableNames().equals(setNames));
+  }
+}
diff --git a/test/com/google/javascript/jscomp/NormalizeTest.java b/test/com/google/javascript/jscomp/NormalizeTest.java
index fe26d8cba..d4582836f 100644
--- a/test/com/google/javascript/jscomp/NormalizeTest.java
+++ b/test/com/google/javascript/jscomp/NormalizeTest.java
@@ -23,6 +23,13 @@ import com.google.javascript.rhino.Node;
  *
  */
 public class NormalizeTest extends CompilerTestCase {
+
+  private static final String EXTERNS = "var window;";
+
+  public NormalizeTest() {
+    super(EXTERNS);
+  }
+
   @Override
   public CompilerPass getProcessor(final Compiler compiler) {
     return new Normalize(compiler, false);
@@ -169,6 +176,13 @@ public class NormalizeTest extends CompilerTestCase {
          "try { } catch(e) {e;}; try { } catch(e$$1) {e$$1;}");
     test("try { } catch(e) {e; try { } catch(e) {e;}};",
          "try { } catch(e) {e; try { } catch(e$$1) {e$$1;} }; ");
+
+    // Verify global redefinition of extern definition is left alone.
+    testSame("var window");
+
+    // Verify local masking extern made unique.
+    test("function f() {var window}",
+         "function f() {var window$$1}");
   }
 
   public void testRemoveDuplicateVarDeclarations() {
diff --git a/test/com/google/javascript/jscomp/parsing/JsDocInfoParserTest.java b/test/com/google/javascript/jscomp/parsing/JsDocInfoParserTest.java
index 9c37fc441..a1065b030 100644
--- a/test/com/google/javascript/jscomp/parsing/JsDocInfoParserTest.java
+++ b/test/com/google/javascript/jscomp/parsing/JsDocInfoParserTest.java
@@ -772,6 +772,15 @@ public class JsDocInfoParserTest extends BaseJSTypeTestCase {
         info.getParameterType("index"));
   }
 
+  public void testParseParam19() throws Exception {
+    JSDocInfo info = parse("@param {...} [index] */");
+    assertEquals(1, info.getParameterCount());
+    assertTypeEquals(
+        registry.createOptionalType(UNKNOWN_TYPE),
+        info.getParameterType("index"));
+    assertTrue(info.getParameterType("index").isVarArgs());
+  }
+
   public void testParseThrows1() throws Exception {
     JSDocInfo info = parse("@throws {number} Some number */");
     assertEquals(1, info.getThrownTypes().size());
diff --git a/test/com/google/javascript/rhino/jstype/JSTypeTest.java b/test/com/google/javascript/rhino/jstype/JSTypeTest.java
index 42a0b7508..6c97da764 100644
--- a/test/com/google/javascript/rhino/jstype/JSTypeTest.java
+++ b/test/com/google/javascript/rhino/jstype/JSTypeTest.java
@@ -988,7 +988,7 @@ public class JSTypeTest extends BaseJSTypeTestCase {
     // matchesXxx
     assertFalse(ALL_TYPE.matchesInt32Context());
     assertFalse(ALL_TYPE.matchesNumberContext());
-    assertFalse(ALL_TYPE.matchesObjectContext());
+    assertTrue(ALL_TYPE.matchesObjectContext());
     assertTrue(ALL_TYPE.matchesStringContext());
     assertFalse(ALL_TYPE.matchesUint32Context());
 
diff --git a/tools/FlagProcessorFactory_deploy.jar b/tools/FlagProcessorFactory_deploy.jar
index a0cb43bf2..6a4a8724c 100755
Binary files a/tools/FlagProcessorFactory_deploy.jar and b/tools/FlagProcessorFactory_deploy.jar differ
