diff --git a/src/com/google/javascript/jscomp/ScopedAliases.java b/src/com/google/javascript/jscomp/ScopedAliases.java
index b2a169002..6dfa23531 100644
--- a/src/com/google/javascript/jscomp/ScopedAliases.java
+++ b/src/com/google/javascript/jscomp/ScopedAliases.java
@@ -379,6 +379,9 @@ class ScopedAliases implements HotSwapCompilerPass {
               null;
           Node varNode = null;
 
+          // Grab the docinfo before we do any AST manipulation.
+          JSDocInfo varDocInfo = v.getJSDocInfo();
+
           String name = n.getString();
           int nameCount = scopedAliasNames.count(name);
           scopedAliasNames.add(name);
@@ -416,12 +419,12 @@ class ScopedAliases implements HotSwapCompilerPass {
 
           // Add $jscomp.scope.name = EXPR;
           // Make sure we copy over all the jsdoc and debug info.
-          if (value != null || v.getJSDocInfo() != null) {
+          if (value != null || varDocInfo != null) {
             Node newDecl = NodeUtil.newQualifiedNameNodeDeclaration(
                 compiler.getCodingConvention(),
                 globalName,
                 value,
-                v.getJSDocInfo())
+                varDocInfo)
                 .useSourceInfoIfMissingFromForTree(n);
             NodeUtil.setDebugInformation(
                 newDecl.getFirstChild().getFirstChild(), n, name);
diff --git a/test/com/google/javascript/jscomp/IntegrationTest.java b/test/com/google/javascript/jscomp/IntegrationTest.java
index a2d34c766..f4b62cc2b 100644
--- a/test/com/google/javascript/jscomp/IntegrationTest.java
+++ b/test/com/google/javascript/jscomp/IntegrationTest.java
@@ -2231,6 +2231,20 @@ public class IntegrationTest extends IntegrationTestCase {
         "a.b.c.myFunc = function(x) {};");
   }
 
+  public void testIssue1204() {
+    CompilerOptions options = createCompilerOptions();
+    CompilationLevel.ADVANCED_OPTIMIZATIONS
+        .setOptionsForCompilationLevel(options);
+    WarningLevel.VERBOSE
+        .setOptionsForWarningLevel(options);
+    test(options,
+         "goog.scope(function () {" +
+         "  /** @constructor */ function F(x) { this.x = x; }" +
+         "  alert(new F(1));" +
+         "});",
+         "alert(new function(){}(1));");
+  }
+
   public void testCodingConvention() {
     Compiler compiler = new Compiler();
     compiler.initOptions(new CompilerOptions());
diff --git a/test/com/google/javascript/jscomp/ScopedAliasesTest.java b/test/com/google/javascript/jscomp/ScopedAliasesTest.java
index 45ab1b048..04b6db03e 100644
--- a/test/com/google/javascript/jscomp/ScopedAliasesTest.java
+++ b/test/com/google/javascript/jscomp/ScopedAliasesTest.java
@@ -51,6 +51,12 @@ public class ScopedAliasesTest extends CompilerTestCase {
     super(EXTERNS);
   }
 
+  @Override
+  public void tearDown() throws Exception {
+    super.tearDown();
+    disableTypeCheck();
+  }
+
   private void testScoped(String code, String expected) {
     test(GOOG_SCOPE_START_BLOCK + code + GOOG_SCOPE_END_BLOCK, expected);
   }
@@ -582,6 +588,20 @@ public class ScopedAliasesTest extends CompilerTestCase {
          "$jscomp.scope.x = null;");
   }
 
+  public void testTypeCheck() {
+    enableTypeCheck(CheckLevel.WARNING);
+    runTypeCheckAfterProcessing = true;
+    test("goog.scope(function () {" +
+         "  /** @constructor */ function F() {}" +
+         "  /** @return {F} */ function createFoo() { return 1; }" +
+         "});",
+         SCOPE_NAMESPACE +
+         "$jscomp.scope.createFoo = function() { return 1; };" +
+         "$jscomp.scope.F = function() { };",
+         null,
+         TypeValidator.TYPE_MISMATCH_WARNING);
+  }
+
   // Alias Recording Tests
   // TODO(tylerg) : update these to EasyMock style tests once available
   public void testNoGoogScope() {
@@ -710,6 +730,11 @@ public class ScopedAliasesTest extends CompilerTestCase {
     return new ScopedAliases(compiler, null, transformationHandler);
   }
 
+  @Override
+  public int getNumRepetitions() {
+    return 1;
+  }
+
   private static class TransformationHandlerSpy
       implements AliasTransformationHandler {
 
