diff --git a/src/com/google/javascript/jscomp/ConformanceRules.java b/src/com/google/javascript/jscomp/ConformanceRules.java
index b9ad58dfd..00a20fafd 100644
--- a/src/com/google/javascript/jscomp/ConformanceRules.java
+++ b/src/com/google/javascript/jscomp/ConformanceRules.java
@@ -1444,7 +1444,9 @@ public final class ConformanceRules {
           && !n.getBooleanProp(Node.IS_NAMESPACE)
           && !isWhitelisted(n)) {
         Node enclosingScript = NodeUtil.getEnclosingScript(n);
-        if (enclosingScript != null && enclosingScript.getBooleanProp(Node.GOOG_MODULE)) {
+        if (enclosingScript != null
+            && (enclosingScript.getBooleanProp(Node.GOOG_MODULE)
+                || enclosingScript.getBooleanProp(Node.ES6_MODULE))) {
           return ConformanceResult.CONFORMANCE;
         }
         return ConformanceResult.VIOLATION;
diff --git a/src/com/google/javascript/jscomp/parsing/IRFactory.java b/src/com/google/javascript/jscomp/parsing/IRFactory.java
index 530d4b0dd..594d428b9 100644
--- a/src/com/google/javascript/jscomp/parsing/IRFactory.java
+++ b/src/com/google/javascript/jscomp/parsing/IRFactory.java
@@ -1081,6 +1081,8 @@ class IRFactory {
         scriptNode.addChildToBack(moduleNode);
         if (isGoogModule) {
           scriptNode.putBooleanProp(Node.GOOG_MODULE, true);
+        } else {
+          scriptNode.putBooleanProp(Node.ES6_MODULE, true);
         }
       }
       return scriptNode;
diff --git a/src/com/google/javascript/rhino/Node.java b/src/com/google/javascript/rhino/Node.java
index 75fe50ae3..6953879f3 100644
--- a/src/com/google/javascript/rhino/Node.java
+++ b/src/com/google/javascript/rhino/Node.java
@@ -164,7 +164,9 @@ public class Node implements Serializable {
       // RemovedUnusedVars to OptimizeParameters.
       MODULE_EXPORT = 97, // Mark a property as a module export so that collase properties
       // can act on it.
-      IS_SHORTHAND_PROPERTY = 98; // Indicates that a property {x:x} was originally parsed as {x}.
+      IS_SHORTHAND_PROPERTY = 98, // Indicates that a property {x:x} was originally parsed as {x}.
+      ES6_MODULE = 99; // Indicates that a SCRIPT node is or was an ES6 module. Remains set
+      // after the module is rewritten.
 
   private static final String propToString(byte propType) {
       switch (propType) {
@@ -230,8 +232,10 @@ public class Node implements Serializable {
         case MODULE_EXPORT:
           return "module_export";
         case IS_SHORTHAND_PROPERTY:
-          return "is_shorthand_property";
-        default:
+        return "is_shorthand_property";
+      case ES6_MODULE:
+        return "es6_module";
+      default:
           throw new IllegalStateException("unexpected prop id " + propType);
       }
   }
diff --git a/test/com/google/javascript/jscomp/CheckConformanceTest.java b/test/com/google/javascript/jscomp/CheckConformanceTest.java
index 8b04f4f7e..ef297f389 100644
--- a/test/com/google/javascript/jscomp/CheckConformanceTest.java
+++ b/test/com/google/javascript/jscomp/CheckConformanceTest.java
@@ -80,7 +80,6 @@ public final class CheckConformanceTest extends CompilerTestCase {
     enableClosurePassForExpected();
     enableRewriteClosureCode();
     setLanguage(LanguageMode.ECMASCRIPT_2015, LanguageMode.ECMASCRIPT5_STRICT);
-    enableClosurePass();
     configuration = DEFAULT_CONFORMANCE;
     ignoreWarnings(DiagnosticGroups.MISSING_PROPERTIES);
   }
@@ -1512,6 +1511,22 @@ public final class CheckConformanceTest extends CompilerTestCase {
         "var foo = function() {};");
   }
 
+  public void testBanGlobalVarsInEs6Module() {
+    // ES6 modules cannot be type checked yet
+    disableTypeCheck();
+    configuration =
+        lines(
+            "requirement: {",
+            "  type: CUSTOM",
+            "  java_class: 'com.google.javascript.jscomp.ConformanceRules$BanGlobalVars'",
+            "  error_message: 'BanGlobalVars Message'",
+            "}");
+
+    testNoWarning("export function foo() {}");
+    testNoWarning("var s; export {x}");
+    testNoWarning("export var s;");
+  }
+
   public void testCustomBanUnresolvedType() {
     configuration =
         "requirement: {\n"
