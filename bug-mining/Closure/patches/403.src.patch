diff --git a/src/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclaration.java b/src/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclaration.java
index 8e2256c88..4875e953b 100644
--- a/src/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclaration.java
+++ b/src/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclaration.java
@@ -369,10 +369,10 @@ public final class Es6RewriteBlockScopedDeclaration extends AbstractPostOrderCal
                       declaration);
                 }
 
+                declaration = reference.getParent(); // Might have changed after normalization.
                 // Change declaration to assignment, or just drop it if there's
                 // no initial value.
                 if (reference.hasChildren()) {
-                  declaration = reference.getParent(); // Might have changed now
                   JSDocInfo existingInfo = declaration.getJSDocInfo();
                   if (existingInfo == null) {
                     existingInfo = reference.getJSDocInfo();
diff --git a/test/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclarationTest.java b/test/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclarationTest.java
index 713fdfff5..63d7124c4 100644
--- a/test/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclarationTest.java
+++ b/test/com/google/javascript/jscomp/Es6RewriteBlockScopedDeclarationTest.java
@@ -860,7 +860,7 @@ public final class Es6RewriteBlockScopedDeclarationTest extends CompilerTestCase
   }
 
   // https://github.com/google/closure-compiler/issues/1124
-  public void testGithubIssue1124() {
+  public void testFunctionsInLoop() {
     test(
         LINE_JOINER.join(
             "while (true) {",
@@ -922,6 +922,51 @@ public final class Es6RewriteBlockScopedDeclarationTest extends CompilerTestCase
             "}"));
   }
 
+  // https://github.com/google/closure-compiler/issues/1557
+  public void testNormalizeDeclarations() {
+    test(LINE_JOINER.join(
+        "while(true) {",
+        "  let x, y;",
+        "  function f() {",
+        "    x = 1;",
+        "    y = 2;",
+        "  }",
+        "}"),
+        LINE_JOINER.join(
+        "var $jscomp$loop$0 = {};",
+        "while(true) {",
+        "  $jscomp$loop$0.x = undefined;",
+        "  var f = function($jscomp$loop$0) {",
+        "    return function f() {",
+        "      $jscomp$loop$0.x = 1;",
+        "      $jscomp$loop$0.y = 2;",
+        "    }",
+        "  }($jscomp$loop$0);",
+        "  $jscomp$loop$0 = {x: $jscomp$loop$0.x, y: $jscomp$loop$0.y};",
+        "}"));
+
+    test(LINE_JOINER.join(
+        "while(true) {",
+        "  let x, y;",
+        "  function f() {",
+        "    y = 2;",
+        "    x = 1;",
+        "  }",
+        "}"),
+        LINE_JOINER.join(
+        "var $jscomp$loop$0 = {};",
+        "while(true) {",
+        "  $jscomp$loop$0.x = undefined;",
+        "  var f = function($jscomp$loop$0) {",
+        "    return function f() {",
+        "      $jscomp$loop$0.y = 2;",
+        "      $jscomp$loop$0.x = 1;",
+        "    }",
+        "  }($jscomp$loop$0);",
+        "  $jscomp$loop$0 = {y: $jscomp$loop$0.y, x: $jscomp$loop$0.x};",
+        "}"));
+  }
+
   public void testTypeAnnotationsOnLetConst() {
     enableTypeCheck();
 
