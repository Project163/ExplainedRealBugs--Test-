diff --git a/src/com/google/javascript/jscomp/InlineObjectLiterals.java b/src/com/google/javascript/jscomp/InlineObjectLiterals.java
index b99d1ca70..5b77c5a91 100644
--- a/src/com/google/javascript/jscomp/InlineObjectLiterals.java
+++ b/src/com/google/javascript/jscomp/InlineObjectLiterals.java
@@ -61,7 +61,7 @@ class InlineObjectLiterals implements CompilerPass {
   @Override
   public void process(Node externs, Node root) {
     ReferenceCollectingCallback callback = new ReferenceCollectingCallback(
-        compiler, new InliningBehavior(), SyntacticScopeCreator.makeUntyped(compiler));
+        compiler, new InliningBehavior(), new Es6SyntacticScopeCreator(compiler));
     callback.process(externs, root);
   }
 
@@ -406,10 +406,10 @@ class InlineObjectLiterals implements CompilerPass {
         vnode = init.getParent();
         fillInitialValues(init, initvals);
       } else {
-        // TODO(user): More test / rewrite this part.
-        // Find the beginning of the function / script.
-        vnode = v.getScope().getClosestHoistScope().getRootNode().getLastChild().getFirstChild();
+        // Find the beginning of the function body / script.
+        vnode = v.getScope().getClosestHoistScope().getRootNode().getFirstChild();
       }
+      checkState(NodeUtil.isStatement(vnode), vnode);
 
       for (Map.Entry<String, String> entry : varmap.entrySet()) {
         Node val = initvals.get(entry.getKey());
diff --git a/test/com/google/javascript/jscomp/InlineObjectLiteralsTest.java b/test/com/google/javascript/jscomp/InlineObjectLiteralsTest.java
index 81acb6b7c..ea58934e3 100644
--- a/test/com/google/javascript/jscomp/InlineObjectLiteralsTest.java
+++ b/test/com/google/javascript/jscomp/InlineObjectLiteralsTest.java
@@ -16,6 +16,8 @@
 
 package com.google.javascript.jscomp;
 
+import static com.google.javascript.jscomp.CompilerOptions.LanguageMode.ECMASCRIPT_NEXT;
+
 /**
  * Verifies that valid candidates for object literals are inlined as
  * expected, and invalid candidates are not touched.
@@ -25,6 +27,7 @@ public final class InlineObjectLiteralsTest extends CompilerTestCase {
 
   public InlineObjectLiteralsTest() {
     enableNormalize();
+    setAcceptedLanguage(ECMASCRIPT_NEXT);
   }
 
   @Override
