{"id":900,"status":"Duplicate","summary":"Cannot make a nullable object typedef non-nullable","labels":["Type-Defect","Priority-Medium","Restrict-AddIssueComment-Nobody"],"stars":0,"commentCount":7,"comments":[{"id":0,"commenterId":-4348131804040925259,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n\r\nI\u0027d like to use nullable object @typedefs, so that they match default nullability behavior of the @constructor type names.\r\n\r\nSo, I define a type like this:\r\n\r\n/** @typedef {{foo:number}|null} */\r\nTypes.MyClass;\r\n\r\nBut this way, it can be no longer made non-null (unlike @constructor types). i.e.\r\n\r\n/**\r\n * @param {!Types.MyClass} a\r\n */\r\nfunction dontWantNulls(a) {\r\n}\r\ndontWantNulls(null); // No compiler warnings!\r\n\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\n\r\nThe /** @type {!Types.MyClass} */ should describe a non-null Object.\r\n\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\nBuild at r2388. Linux OS.\r\n","timestamp":1358773224,"attachments":[]},{"id":1,"commenterId":-4578023134422583184,"content":"Try this:\r\n\r\n/** @typedef {?{foo:number}} */\r\nTypes.MyClass;\r\n","timestamp":1359085221,"attachments":[]},{"id":2,"commenterId":-4348131804040925259,"content":"It is the same thing. And I do expect this to be the same.","timestamp":1359107694,"attachments":[]},{"id":3,"commenterId":-5060162230523776870,"content":"This is interesting.  It works for variable declarations:\r\n\r\n/** @const */\r\nvar Types \u003d {};\r\n/** @typedef {{foo:number}|null} */\r\nTypes.MyClass;\r\n\r\n/** @type {!Types.MyClass} */\r\nvar x \u003d null;   // warning\r\n\r\n/** @type {Types.MyClass} */\r\nvar y \u003d null;   // no warning\r\n\r\n/**\r\n * @param {!Types.MyClass} a\r\n */\r\nfunction dontWantNulls(a) {}\r\ndontWantNulls(null); // no warning","timestamp":1359134646,"attachments":[]},{"id":4,"commenterId":-4348131804040925259,"content":"Any news?","timestamp":1372346850,"attachments":[]},{"id":5,"commenterId":-8769171937076622550,"content":"Issue tracking has been migrated to github. Please make any further comments on this issue through https://github.com/google/closure-compiler/issues","timestamp":1398969110,"attachments":[]},{"id":6,"commenterId":-8769171937076622550,"content":"","timestamp":1398969252,"attachments":[]}]}