{"id":1219,"status":"Fixed","summary":"Const extern not respected","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":5,"comments":[{"id":0,"commenterId":-7533111327965083011,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. Compile with the following extern:\r\n/** @const */ var FOO;\r\nand the following code:\r\nFOO \u003d 1;\r\nFOO \u003d 2;\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\nWarning about assignment to const (x2)\r\nInstead get no warnings at all.\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\njscomp-debug\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\nIf the const definition is moved from the externs to the code, get warning on second asssignment (as expected).\r\n","timestamp":1391101804,"attachments":[]},{"id":1,"commenterId":1711074370877082584,"content":"","timestamp":1392519940,"attachments":[]},{"id":2,"commenterId":1711074370877082584,"content":"Question: If we have \"/** @const */ var FOO;\" in the externs, should that mean:\r\n\r\n1. FOO is not only declared externally, but also given a value, or\r\n2. FOO is declared externally, but may not have a value yet, so it\u0027s okay to assign to it in the non-externs code.\r\n?\r\n\r\nIf we choose option 1, then just writing \"FOO \u003d 1;\" would be an error. If we choose option 2, then \"FOO \u003d 1;\" on its own would be okay, but \"FOO \u003d 1; FOO \u003d 2;\" would be an error. I would lean toward option 1.","timestamp":1392750712,"attachments":[]},{"id":3,"commenterId":-8769171937076622550,"content":"I would also lean toward option 1. Some constants are not known at compile time, but are still known to never change.","timestamp":1392751921,"attachments":[]},{"id":4,"commenterId":-8769171937076622550,"content":"This issue was closed by revision 8f5bc28d124b.","timestamp":1393009019,"attachments":[]}]}