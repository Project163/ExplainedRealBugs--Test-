{"id":160,"status":"Invalid","summary":"do ramifying","labels":["Type-Defect","Priority-Medium"],"stars":1,"commentCount":3,"comments":[{"id":0,"commenterId":7821006595088913276,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. http://closure-compiler.appspot.com/home\r\n2. enter sample:\r\n// \u003d\u003dClosureCompiler\u003d\u003d\r\n// @compilation_level ADVANCED_OPTIMIZATIONS\r\n// @formatting pretty_print\r\n// \u003d\u003d/ClosureCompiler\u003d\u003d\r\nvar test \u003d document.documentElement.uniqueID ? function(a) {\r\n\tvar b \u003d {\r\n\t\t\u0027X\u0027 : 1,\r\n\t\t\u0027Y\u0027 : 2,\r\n\t\taaaa : 3,\r\n\t\tbbbb : 4\r\n\t};\r\n\tb.cccc \u003d 5;\r\n\ta(b)\r\n} : function(a) {\r\n\ta({\r\n\t\t\t\t\u0027X\u0027 : -1,\r\n\t\t\t\t\u0027Y\u0027 : -2,\r\n\t\t\t\taaaa : -3,\r\n\t\t\t\tbbbb : -4,\r\n\t\t\t\tcccc : -5\r\n\t\t\t})\r\n};\r\ntest(function(a) {\r\n\t\t\talert(\u0026quot;o.X:\u0026quot; + a.X + \u0026quot;\\no.Y:\u0026quot; + a.Y + \u0026quot;\\no.aaaa:\u0026quot; + a.aaaa\r\n\t\t\t\t\t+ \u0026quot;\\no.bbbb:\u0026quot; + a.bbbb + \u0026quot;\\no.cccc:\u0026quot; + a.cccc)\r\n\t\t});\r\n3. recive:\r\n(document.documentElement.uniqueID ? function(a) {\r\n\tvar b \u003d {\r\n\t\tX : 1,\r\n\t\tY : 2,\r\n\t\ta : 3,\r\n\t\tb : 4\r\n\t};\r\n\tb.c \u003d 5;\r\n\ta(b)\r\n} : function(a) {\r\n\ta({\r\n\t\t\t\td : -1,\r\n\t\t\t\te : -2,\r\n\t\t\t\ta : -3,\r\n\t\t\t\tb : -4,\r\n\t\t\t\tc : -5\r\n\t\t\t})\r\n})(function(a) {\r\n\t\t\talert(\u0026quot;o.X:\u0026quot; + a.d + \u0026quot;\\no.Y:\u0026quot; + a.e + \u0026quot;\\no.aaaa:\u0026quot; + a.a\r\n\t\t\t\t\t+ \u0026quot;\\no.bbbb:\u0026quot; + a.b + \u0026quot;\\no.cccc:\u0026quot; + a.c)\r\n\t\t});\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\n\r\nalert(\u0026quot;o.X:\u0026quot; + a.d ...\r\nmust be: alert(\u0026quot;o.X:\u0026quot; + a.X ...\r\n\r\nP.S. sorry i bad in englidh.\r\nbad solution add parametrs:\r\n// @js_externs this.X,this.Y","timestamp":1273594302,"attachments":[]},{"id":1,"commenterId":7821006595088913276,"content":"function offset(node){\r\n    var doc \u003d node.ownerDocument,\r\n    rootNode \u003d doc.documentElement,\r\n    box \u003d node.getBoundingClientRect(),\r\n    result\u003d{\u0027Left\u0027:box.left,\u0027Top\u0027:box.top},\r\n    k, t;\r\n    for (k in result){\r\n      t\u003d\u0027scroll\u0027+k;\r\n      result[k] \u003d parseInt(\r\n        result[k] + Math.max( rootNode[t], doc.body[t] ) - rootNode[\u0027client\u0027+k],\r\n        10\r\n      )\r\n    }\r\n    return {\r\n      \u0027top\u0027: result.Top,\r\n      \u0027left\u0027: result.Left\r\n    }\r\n  }\r\nalert(offset(dociment.body).left);\r\n\r\nresult:\r\nfunction f(a) { var d \u003d a.ownerDocument, e \u003d d.documentElement; a \u003d\r\na.getBoundingClientRect(); a \u003d {Left:a.left, Top:a.top}; var b, c; for(b in a) { c \u003d\r\n\"scroll\" + b; a[b] \u003d parseInt(a[b] + Math.max(e[c], d.body[c]) - e[\"client\" + b], 10) }\r\nreturn{top:a.b /* \u003c- wrong, must be a.Top */ , left:a.a /* \u003c- wrong, must be a.Left*/}\r\n} alert(f(dociment.body).left); ","timestamp":1273596685,"attachments":[]},{"id":2,"commenterId":-7699928860083865744,"content":"This behavior is expected with ADVANCED mode. please read:\r\nhttp://code.google.com/closure/compiler/docs/api-tutorial3.html#propnames","timestamp":1273597663,"attachments":[]}]}