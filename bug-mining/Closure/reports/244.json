{"id":857,"status":"Fixed","summary":"comparison with NaN","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":8,"comments":[{"id":0,"commenterId":-8565359677229908361,"content":"I recently stumbled upon code like this:\r\n-----------------\r\nvar x \u003d parseInt(str, 10);\r\nif (x \u003d\u003d NaN) {\r\n   alert(\u0027invalid input\u0027);\r\n}\r\n-------------\r\nThe programmer had obviously mistaken isNaN check for a comparison with NaN. Any comparison with NaN (even NaN \u003d\u003d NaN) will result in false.\r\n\r\nThough this might not be a very common mistake I still think the compiler could issue a warning in this case.\r\nYou already have the \u0026quot;WARNING - condition always evaluates to false\u0026quot; message for example.\r\n\r\nSecondly, the compiler could optimize here, not even in advanced mode the code is short-circuited:\r\n------\r\nNaN\u003d\u003dparseInt(\u0026quot;asdf\u0026quot;,10)\u0026amp;\u0026amp;alert(\u0026quot;error\u0026quot;);\r\n------\r\n\r\nRegards\r\n/ Fredrik","timestamp":1352457352,"attachments":[]},{"id":1,"commenterId":-5060162230523776870,"content":"I know \u003d\u003d\u003dNaN is always false but is this true of \u003d\u003dNaN as well?","timestamp":1352507653,"attachments":[]},{"id":2,"commenterId":-8565359677229908361,"content":"yes, by design. ","timestamp":1352516842,"attachments":[]},{"id":3,"commenterId":-5060162230523776870,"content":"a nifty little visual reference:\r\nhttps://janosch.woschitz.org/javascript-equality-comparison/\r\n\r\nYes, we should warn about this.","timestamp":1352580316,"attachments":[]},{"id":4,"commenterId":1328304962299559429,"content":"This issue was closed by revision r2340.","timestamp":1353449306,"attachments":[]},{"id":5,"commenterId":-7699928860083865744,"content":"This issue was closed by revision r2341.","timestamp":1353449359,"attachments":[]},{"id":6,"commenterId":-7699928860083865744,"content":"This issue was closed by revision r2344.","timestamp":1353537360,"attachments":[]},{"id":7,"commenterId":-8565359677229908361,"content":"Although the warning is now added as suggested, the compiler still doesn\u0027t short-circuit optimize.\r\nI.e even in advanced mode the above example outputs: NaN\u003d\u003dparseInt(str,10)\u0026\u0026alert(\"invalid input\");\r\n\r\n/Fredrik Blomqvist","timestamp":1394705140,"attachments":[]}]}