{"id":1243,"status":"Fixed","summary":"\"@const @private\" works, but \"@private @const\" does not","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":7,"comments":[{"id":0,"commenterId":7697149108329846540,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\nCompile e.g:\r\ngoog.provide(\u0027foo.MyClass\u0027);\r\n\r\n/** @constructor */\r\nfoo.MyClass \u003d function() {\r\n  /** @private @const {number} */\r\n  this.foo_ \u003d 42;\r\n\r\n  this.foo_ \u003d 36;\r\n};\r\n\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\nExpected: Warning about constant foo_ being assigned a value twice.\r\nActual: No warning.\r\n\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\njscomp-debug\r\n\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\nIt does work when the order of the two annotations is switched (i.e. \u0026quot;@const @private {number}\u0026quot;).\r\n","timestamp":1392628975,"attachments":[]},{"id":1,"commenterId":1711074370877082584,"content":"Looking into this a little bit, after the parser consumes the \u0027@private\u0027 it calls recordDescription, so the entire string \"@const {number}\" is being parsed as a description for the \"@private\" annotation, rather than as a @const annotation with a type. The logic in extractMultilineTextualBlock knows to stop when it sees an annotation (like @const) but it consumes an entire line before that logic kicks in: https://code.google.com/p/closure-compiler/source/browse/src/com/google/javascript/jscomp/parsing/JsDocInfoParser.java#1544\r\n\r\nI guess that\u0027s left over from when annotations were not stackable (each one had to be on its own line)?","timestamp":1392748293,"attachments":[]},{"id":2,"commenterId":1711074370877082584,"content":"","timestamp":1392860420,"attachments":[]},{"id":3,"commenterId":1711074370877082584,"content":"","timestamp":1392950040,"attachments":[]},{"id":4,"commenterId":-8769171937076622550,"content":"This issue was closed by revision a5b01a8a8df6.","timestamp":1393375939,"attachments":[]},{"id":5,"commenterId":-8769171937076622550,"content":"This issue was closed by revision 1c59a0dfc63e.","timestamp":1393375939,"attachments":[]},{"id":6,"commenterId":-8769171937076622550,"content":"This issue was closed by revision b850cd12281f.","timestamp":1393375940,"attachments":[]}]}