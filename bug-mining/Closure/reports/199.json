{"id":709,"status":"Fixed","summary":"--flagfile option does not treat quoted strings as single tokens","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":3,"comments":[{"id":0,"commenterId":6341690016393196316,"content":"Flag file entries such as: --js\u003d\u0027/usr/my project/app.js\u0027 are split on whitespace such that \u0026quot;/usr/my\u0026quot; and \u0026quot;project/app.js\u0026quot; are treated as separate tokens.\r\n\r\nThe attached patch corrects this issue using a custom tokenizer method tokenizeKeepingQuotedStrings(). The following JUnit test was used in a separate project to test this method:\r\n\r\n@Test public void tokenizeKeepingQuotedStrings() {\r\n  String data \u003d \u0026quot;t1 \\\u0026quot;t2\\\u0026quot; t3\u003d\u0027quoted string\u0027 --t4\u003d\\\u0026quot;/my project/app.js\\\u0026quot; \u0026quot;\r\n      + String.format(\u0026quot;%n\u0026quot;) + \u0026quot;\u0027adjacent content\u0027t5 t6\u003d\u0027single\u0027\u0026quot;;\r\n  List\u0026lt;String\u0026gt; tokens \u003d StringUtil.tokenizeKeepingQuotedStrings(data);\r\n  List\u0026lt;String\u0026gt; expected \u003d ImmutableList.of(\u0026quot;t1\u0026quot;, \u0026quot;\\\u0026quot;t2\\\u0026quot;\u0026quot;, \u0026quot;t3\u003d\u0027quoted string\u0027\u0026quot;,\r\n      \u0026quot;--t4\u003d\\\u0026quot;/my project/app.js\\\u0026quot;\u0026quot;, \u0026quot;\u0027adjacent content\u0027t5\u0026quot;, \u0026quot;t6\u003d\u0027single\u0027\u0026quot;);\r\n  assertEquals(expected, tokens);\r\n}\r\n\r\nThe patch has been tested on a small project using a flag file. In addition, \u0026quot;ant test\u0026quot; ran successfully.\r\n","timestamp":1334467231,"attachments":[{"id":7090000000,"fileName":"FLAGFILE.patch","fileSize":2319}]},{"id":1,"commenterId":-7699928860083865744,"content":"thanks for the report!","timestamp":1334681586,"attachments":[]},{"id":2,"commenterId":1328304962299559429,"content":"This issue was closed by revision r1905.","timestamp":1334767923,"attachments":[]}]}