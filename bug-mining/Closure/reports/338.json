{"id":1244,"status":"Fixed","summary":"cross-module extends doesn\u0027t work","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":11,"comments":[{"id":0,"commenterId":-7699928860083865744,"content":"// Module 1\r\n/** @constructor */ function Foo() {}\r\nmodule.exports \u003d Foo\r\n\r\n// Module 2\r\n/** @const */\r\nvar Foo \u003d require(\u0027./foo\u0027)\r\nvar util \u003d require(\u0027util\u0027)\r\n\r\n/**\r\n * @constructor\r\n * @extends {Foo}\r\n */\r\nvar SubFoo \u003d function () {}\r\nutil.inherits(SubFoo, Foo)\r\n\r\nEmits a warning like:\r\n    [junit] JSC_TYPE_MISMATCH. mismatch in declaration of superclass type\r\n    [junit] found   : Foo$$module$foo\r\n    [junit] required: Foo$$module$subfoo\r\n\r\nThe @const requirement is also a bit weird, but for this bug i\u0027m focusing on the mismatch. There\u0027s a problem where it doesn\u0027t recognize that the alias is equivalent to the original type.\r\n","timestamp":1392766235,"attachments":[]},{"id":1,"commenterId":-7699928860083865744,"content":"(or perhaps more precisely, it resolves the Foo symbol in the type annotation differently than the Foo symbol in the inherits expression, and doesn\u0027t treat the 2 symbols equal. We could either fix this by fixing the equality relation, or fixing the symbol resolution.","timestamp":1392766318,"attachments":[]},{"id":2,"commenterId":-7699928860083865744,"content":"posted a fix here:\r\nhttps://codereview.appspot.com/65670044/","timestamp":1392767832,"attachments":[]},{"id":3,"commenterId":-7699928860083865744,"content":"This issue was closed by revision e4645f22b2dc.","timestamp":1393093405,"attachments":[]},{"id":4,"commenterId":-8769171937076622550,"content":"This issue was closed by revision 153e769806db.","timestamp":1393375940,"attachments":[]},{"id":5,"commenterId":-8769171937076622550,"content":"This issue was closed by revision 16e432c9d1d2.","timestamp":1393375940,"attachments":[]},{"id":6,"commenterId":-8769171937076622550,"content":"This fix didn\u0027t stick, unfortunately. I\u0027ll take a look at why.","timestamp":1393376638,"attachments":[]},{"id":7,"commenterId":-7699928860083865744,"content":"out of curiosity, what was the symptom?","timestamp":1393432797,"attachments":[]},{"id":8,"commenterId":-8769171937076622550,"content":"It seemed to introduce a new JSC_TYPE_MISMATCH during a goog.inherits","timestamp":1393433696,"attachments":[]},{"id":9,"commenterId":-8769171937076622550,"content":"This issue was closed by revision 4ee706b87bdc.","timestamp":1393952805,"attachments":[]},{"id":10,"commenterId":-7699928860083865744,"content":"thanks!","timestamp":1393958897,"attachments":[]}]}