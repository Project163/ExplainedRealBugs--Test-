{"id":625,"status":"Invalid","summary":"--jscomp_off\u003dexternsValidation turns off externsValidation not completely","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":2,"comments":[{"id":0,"commenterId":-718753753958446133,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n\r\njava -jar compiler-r1592.jar \\\r\n  --compilation_level ADVANCED_OPTIMIZATIONS \\\r\n  --warning_level VERBOSE \\\r\n  --js sample.js \\\r\n  --js_output_file sample.min.js \\\r\n  --externs ymaps.js \\\r\n  --jscomp_off externsValidation\r\n\r\n(ymaps.js and sample.js are attached)\r\n\r\n\r\nWhat is the expected output?\r\n\r\nNo validation of extern ymaps.js, just parsing of its classes.\r\n\r\n\r\nWhat do you see instead?\r\n\r\n6 error(s), 0 warning(s)\r\nERROR - variable _$ is undeclared\r\nand so on.\r\n\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\n\r\nClosure Compiler r1592. Mac OS X 10.7.2\r\n\r\n\r\nComment.\r\n--warning_level VERBOSE obviously makes --jscomp_error\u003dcheckVars (http://code.google.com/p/closure-compiler/wiki/Warnings) and it influences on extern validation.\r\n\r\nexternsValidation have to have highest precedence and no other directives can affect this.\r\n\r\nThis is a real problem for huge externs (like my ymaps.js - Yandex Maps russian service) that don\u0027t have any public extern files.\r\n","timestamp":1323864788,"attachments":[{"id":6250000000,"fileName":"ymaps.js","fileSize":400552},{"id":6250000001,"fileName":"sample.js","fileSize":17}]},{"id":1,"commenterId":-7699928860083865744,"content":"externsValidation is just for warnings--\"code smells\" that probably indicate you\u0027re doing something wrong, but that are perfectly syntactically valid.\r\n\r\nTurning off externsValidation *doesn\u0027t* mean you can just throw any random JS file in the externs and Closure Compiler will be able to magically figure out what you\u0027re trying to do. In particular, JS implementation code will almost never work as an externs file.\r\n\r\nI think it would be more productive if you sent an email to the mailing list\r\nhttp://groups.google.com/group/closure-compiler-discuss?pli\u003d1\r\nand explained what you\u0027re trying to do. I think you\u0027ve got some core misunderstandings that would be easier to hash out on the mailing list.","timestamp":1323888099,"attachments":[]}]}