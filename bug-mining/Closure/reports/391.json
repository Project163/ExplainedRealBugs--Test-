{"id":1115,"status":"Invalid","summary":"var obj2 \u003d /** @dict */ { x: 321 }; displaying warninging in ADVANCED_OPTIMIZATION mode","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":6,"comments":[{"id":0,"commenterId":3159343532483393877,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. Create a file with the following content\r\n\r\n/** @expose */\r\nvar obj2 \u003d /** @dict */ { x: 321 };\r\nalert(obj2[x]);\r\n\r\n2. Compile the file with the flag \u0026quot;--compilation_level ADVANCED_OPTIMIZATIONS\u0026quot;\r\n3. The compiler will compile the file and output an incorrect warning message\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\nI expected zero warnings. Instead I saw one warning, \u0026quot;ERROR - Illegal key, the object literal is a dict\u0026quot;.  Based on the document for @dict this should be working without any warnings: https://developers.google.com/closure/compiler/docs/js-for-compiler\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\nOS: Ubuntu 10\r\nClosure Compiler: Version: v20130823 Built on: 2013/08/26 10:59\r\n\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e","timestamp":1381722028,"attachments":[]},{"id":1,"commenterId":4865484112040790759,"content":"The warning is correct, the object-literal key should be quoted, { \u0027x\u0027: 321 }.\r\n\r\nThe doc is out of date, sorry about that.\r\n","timestamp":1381723154,"attachments":[]},{"id":2,"commenterId":4865484112040790759,"content":"I updated the doc.\r\nhttps://developers.google.com/closure/compiler/docs/js-for-compiler#tag-dict","timestamp":1381774276,"attachments":[]},{"id":3,"commenterId":3159343532483393877,"content":"One thing I did notice is that if I switch it to\r\n/**\r\n * @expose\r\n * @dict\r\n */\r\nvar obj2 \u003d { };\r\n/**\r\n * @type {number}\r\n */\r\nobj2[x] \u003d 321\r\nalert(obj2[x]);\r\n\r\nWhich is correct for the object type, the closure compiler will generate a larger file in advance mode, even though both output files have the same functionality.  Should I log this as a different bug?","timestamp":1381938887,"attachments":[]},{"id":4,"commenterId":4865484112040790759,"content":"what are the two different outputs?","timestamp":1381940138,"attachments":[]},{"id":5,"commenterId":8173196008570380122,"content":"@expose is only valid on a property (we should probably warn when it is used elsewhere).\r\n\r\nYour second example still doesn\u0027t have the array index quoted. The corrected sample would be:\r\n\r\n/**\r\n * @expose\r\n * @dict\r\n */\r\nvar obj2 \u003d { };\r\n/**\r\n * @type {number}\r\n */\r\nobj2[\u0027x\u0027] \u003d 321;\r\nalert(obj2[\u0027x\u0027]);\r\n\r\nWhen corrected, both examples produce the same output of:\r\n\r\nalert(321);","timestamp":1381941233,"attachments":[]}]}