{"id":372,"status":"Fixed","summary":"Install using ant","labels":["Type-Defect","Priority-Medium"],"stars":1,"commentCount":5,"comments":[{"id":0,"commenterId":-5676458314302757003,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. svn checkout\r\n2. apt jar\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\n# ant jar\r\nBuildfile: build.xml\r\n\r\nsvnversion:\r\n\r\ncompile:\r\n    [mkdir] Created dir: /home/httpd/tmp/closure-compiler/closure-compiler-read-only/build/classes\r\n    [javac] Compiling 4 source files to /home/httpd/tmp/closure-compiler/closure-compiler-read-only/build/classes\r\n    [javac] ----------\r\n    [javac] 1. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/jscomp/FunctionInfo.java (at line 52)\r\n    [javac]     getDescriptor().getMessageTypes().get(0);\r\n    [javac]     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] Type mismatch: cannot convert from Object to Descriptors.Descriptor\r\n    [javac] ----------\r\n    [javac] 2. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInfo.java (at line 60)\r\n    [javac]     internal_static_jscomp_FunctionInformationMap_descriptor.getNestedTypes().get(0);\r\n    [javac]     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] Type mismatch: cannot convert from Object to Descriptors.Descriptor\r\n    [javac] ----------\r\n    [javac] 3. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInfo.java (at line 68)\r\n    [javac]     internal_static_jscomp_FunctionInformationMap_descriptor.getNestedTypes().get(1);\r\n    [javac]     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] Type mismatch: cannot convert from Object to Descriptors.Descriptor\r\n    [javac] ----------\r\n    [javac] ----------\r\n    [javac] 4. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInformationMap.java (at line 18)\r\n    [javac]     public FunctionInformationMap getDefaultInstanceForType() {\r\n    [javac]                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] The return type is incompatible with Message.getDefaultInstanceForType()\r\n    [javac] ----------\r\n\r\n    [javac] 5. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/jscomp/FunctionInformationMap.java (at line 45)\r\n    [javac]     public Entry getDefaultInstanceForType() {\r\n    [javac]                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    [javac] The return type is incompatible with Message.getDefaultInstanceForType()\r\n    [javac] ----------\r\n    [javac] 6. ERROR in /home/httpd/tmp/closure-compiler/closure-compiler-read-only/gen/com/google/javascript/js\r\n    [javac] comp/FunctionInformationMap.java (at line 190)\r\n    [javac]     return newBuilder().mergeFrom(data).buildParsed();\r\n    [javac]                         ^^^^^^^^^\r\n    [javac] The method mergeFrom(Message) in the type FunctionInformationMap.Entry.Builder is not applicable for\r\n    [javac]  the arguments (ByteString)\r\n    [javac] ----------\r\n\r\nError output is quite large, i included only the first 6 errors\r\n\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\n# svn info\r\nPath: .\r\nURL: http://closure-compiler.googlecode.com/svn/trunk\r\nRepository Root: http://closure-compiler.googlecode.com/svn\r\nRepository UUID: b0f006be-c8cd-11de-a2e8-8d36a3108c74\r\nRevision: 850\r\nNode Kind: directory\r\nSchedule: normal\r\nLast Changed Author: johnlenz@google.com\r\nLast Changed Rev: 850\r\nLast Changed Date: 2011-03-04 20:03:47 +0200 (Fri, 04 Mar 2011)\r\n\r\n\r\n# java -version\r\njava version \u0026quot;1.6.0_24\u0026quot;\r\nJava(TM) SE Runtime Environment (build 1.6.0_24-b07)\r\nJava HotSpot(TM) Server VM (build 19.1-b02, mixed mode)\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\nI was trying to compile closure using ant, following the steps from README file, section 2 (Building The Closure Compiler)\r\n","timestamp":1299487855,"attachments":[]},{"id":1,"commenterId":-7699928860083865744,"content":"compiles fine for me. can you also check \"ant -version\" and \"javac -version\"?","timestamp":1299513436,"attachments":[]},{"id":2,"commenterId":-5676458314302757003,"content":"ant -version\r\nApache Ant version 1.6.5 compiled on January 6 2007\r\n\r\njavac -version\r\nEclipse Java Compiler v_677_R32x, 3.2.1 release, Copyright IBM Corp 2000, 2006. All rights reserved.\r\n\r\nSorry if it is a false bug report, my java knowledge is minimum, I installed the latest tools my linux distribution provided (Centos 5.4) and this is the result.\r\n\r\nAs a sugestion, could you please include in the download section a \"nightly build\"?","timestamp":1299514003,"attachments":[]},{"id":3,"commenterId":-7699928860083865744,"content":"This issue was closed by revision r874.","timestamp":1299866053,"attachments":[]},{"id":4,"commenterId":-7699928860083865744,"content":"so i finally tried that compiler, and it appears that it defaults to java 1.4, which is very old and isn\u0027t going to work.\r\n\r\nI added some stuff to the Ant file to force java 1.6, but it won\u0027t work on ant 1.6.5.\r\n\r\n(The short answer is that java is versioned very poorly, and rather than tell you that you\u0027re using the wrong version it just barfs up cryptic error messages).\r\n\r\nif someone wants to set up a nightly build server, i certainly won\u0027t stop them, but it\u0027s low on our priority list.","timestamp":1299871242,"attachments":[]}]}