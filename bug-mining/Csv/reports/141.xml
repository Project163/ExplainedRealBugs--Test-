<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:44:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CSV-257] Updating from 1.6 to 1.7 breaks a header line with a missing header name</title>
                <link>https://issues.apache.org/jira/browse/CSV-257</link>
                <project id="12313222" key="CSV">Commons CSV</project>
                    <description>&lt;p&gt;When I try to upgrade commons csv from 1.6 to the latest version 1.7. The following code breaks.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Demo {

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void TestCSV(){
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
		InputStream testInput = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;.getBytes(StandardCharsets.UTF_8));
		Reader reader = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; InputStreamReader(testInput);
		&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; character = &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;.charAt(0);
        CSVFormat format = CSVFormat.RFC4180.withDelimiter(character).withFirstRecordAsHeader().withIgnoreSurroundingSpaces();
        CSVParser parser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CSVParser(reader, format);

		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
			&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;!!!!!!!&quot;&lt;/span&gt;);
			assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.IllegalArgumentException: The header contains a duplicate name: \&quot;&lt;/span&gt;\&lt;span class=&quot;code-quote&quot;&gt;&quot; in [, ]&quot;&lt;/span&gt;, e.toString());
		}
	}

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The test should pass, but it failed with error:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.junit.ComparisonFailure: expected:&amp;lt;...lArgumentException: [The header contains a duplicate name: &quot;&quot;] in [, ]&amp;gt; but was:&amp;lt;...lArgumentException: [A header name is missing] in [, ]&amp;gt;
	at org.junit.Assert.assertEquals(Assert.java:115)
	at org.junit.Assert.assertEquals(Assert.java:144)
	at Demo.TestCSV(Demo.java:31)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13281571">CSV-257</key>
            <summary>Updating from 1.6 to 1.7 breaks a header line with a missing header name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lingchao">xia0c</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Jan 2020 03:59:24 +0000</created>
                <updated>Sun, 22 Jun 2025 19:08:03 +0000</updated>
                                            <version>1.7</version>
                                                    <component>Parser</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17023941" author="garydgregory" created="Sun, 26 Jan 2020 21:52:13 +0000"  >&lt;p&gt;This example is obtuse to me; why do you write:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;.charAt(0);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&apos;c&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;?&lt;br/&gt;
 Same for the obfuscation of building the reader. Are we to conclude that the whole input for your data file is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;,
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Which is seems meaningless are a header record.&lt;/p&gt;

&lt;p&gt;What am I missing?&lt;/p&gt;</comment>
                            <comment id="17053102" author="guoping1" created="Fri, 6 Mar 2020 07:34:43 +0000"  >&lt;p&gt;I don&apos;t think that is a problem, after tracing the code in CSVParser.java linenum 498 as below .The Parser does not think emptystring is a&#160;meaningful header&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;//&#20195;&#30721;&#21344;&#20301;&#31526;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; emptyHeader = header == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || header.trim().isEmpty();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (emptyHeader &amp;amp;&amp;amp; !&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.format.getAllowMissingColumnNames()) {
    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(
        &lt;span class=&quot;code-quote&quot;&gt;&quot;A header name is missing in &quot;&lt;/span&gt; + Arrays.toString(headerRecord));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17103139" author="guoping1" created="Sat, 9 May 2020 06:57:38 +0000"  >&lt;p&gt;Hi, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lingchao&quot; class=&quot;user-hover&quot; rel=&quot;lingchao&quot;&gt;lingchao&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And this is just a problem where the error message has been modified because&#160;&lt;a href=&quot;https://issues.apache.org/jira/projects/CSV/issues/CSV-247?filter=allissues&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;BUG247&lt;/a&gt;. You only change error message string to make it pass.&lt;/p&gt;</comment>
                            <comment id="17150558" author="holgerbrandl" created="Thu, 2 Jul 2020 20:11:56 +0000"  >&lt;p&gt;I think that the commons-csv should not be opinionated concerning the question if an empty header makes sense or not. It should parse it (if the structure is legit csv) and leave this decision to the user.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It&apos;s a common pattern to have an empty header for the first column containing the row number/index. E.g. see official examples such as&#160;&lt;a href=&quot;https://jetbrains.bintray.com/lets-plot/mpg.csv&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jetbrains.bintray.com/lets-plot/mpg.csv&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17985182" author="garydgregory" created="Sun, 22 Jun 2025 19:08:03 +0000"  >&lt;p&gt;After a second look at this issue, I think there should probably be a way to configure a CSVFormat such that this example at least doesn&apos;t throw an exception.&lt;/p&gt;

&lt;p&gt;But, if you have two columns with the same name, or two column names missing, that would cause undefined results for &lt;tt&gt;CSVRecord.get(String)&lt;/tt&gt;, which is bad IMO, and &lt;tt&gt;CSVRecord.get(int)&lt;/tt&gt; would still be OK.&lt;/p&gt;

&lt;p&gt;Perhaps throwing an exception could be changed from the current fail-fast to delegating it to&#160;&lt;tt&gt;CSVRecord.get(String)&lt;/tt&gt;. I don&apos;t think we want to allow for undefined results.&lt;/p&gt;

&lt;p&gt;ATM, I do not think we should add an option to make fail-fast vs. not vs. &lt;tt&gt;CSVRecord.get(String)&lt;/tt&gt; throws vs. &lt;tt&gt;CSVRecord.get(String)&lt;/tt&gt; doesn&apos;t throw.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0av4o:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>