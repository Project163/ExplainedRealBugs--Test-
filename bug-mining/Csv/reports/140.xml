<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:44:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CSV-254] POSTGRESQL_CSV cannot parse correctly (null vs zero-length string)</title>
                <link>https://issues.apache.org/jira/browse/CSV-254</link>
                <project id="12313222" key="CSV">Commons CSV</project>
                    <description>&lt;p&gt;&#160;&lt;br/&gt;
 PostgresSQL by default creates CSV files which uses absent value for database NULL values. Consider the following test in PostgresSQL:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; mytab (
	col1   &lt;span class=&quot;code-keyword&quot;&gt;varchar&lt;/span&gt;(10),
	col2   &lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;,
	col3   &lt;span class=&quot;code-keyword&quot;&gt;varchar&lt;/span&gt;(10)
);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; mytab &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;AA&apos;&lt;/span&gt;, 33, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; mytab &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;AA&apos;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &apos;&apos;);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; mytab &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 33, &lt;span class=&quot;code-quote&quot;&gt;&apos;CC&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and then exporting it to CSV:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
\&lt;span class=&quot;code-keyword&quot;&gt;copy&lt;/span&gt; mytab &lt;span class=&quot;code-keyword&quot;&gt;TO&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;STDOUT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;WITH&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;csv&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;will produce CSV output as follows:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;AA,33,
AA,,&quot;&quot;
,33,CC
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which the library currently will parse as follows using the current &lt;tt&gt;POSTGRESQL_CSV&lt;/tt&gt; format:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;AA&quot;,&quot;33&quot;,null
&quot;AA&quot;,null,null
null,&quot;33&quot;,&quot;CC&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Row no 2 is incorrect when comparing to the actual database table contents.&lt;/p&gt;
&lt;h2&gt;&lt;a name=&quot;Thefix&quot;&gt;&lt;/a&gt;The fix&lt;/h2&gt;

&lt;p&gt;Therefore the declaration of &lt;tt&gt;POSTGRESQL_CSV&lt;/tt&gt; must be changed to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CSVFormat POSTGRESQL_CSV = DEFAULT
            .withDelimiter(COMMA)
            .withEscape(DOUBLE_QUOTE_CHAR)
            .withIgnoreEmptyLines(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
            .withQuote(DOUBLE_QUOTE_CHAR)
            .withRecordSeparator(LF)
            .withAbsentMeansNull(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)   &lt;span class=&quot;code-comment&quot;&gt;// added
&lt;/span&gt;            .withNullString(EMPTY)
            .withQuoteMode(QuoteMode.ALL_NON_NULL);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(this depends on &lt;a href=&quot;https://github.com/apache/commons-csv/pull/51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR51&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&#160;With the above the parser will give the following result instead:&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;AA&quot;,&quot;33&quot;,null
&quot;AA&quot;,null,&quot;&quot;
null,&quot;33&quot;,&quot;CC&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is the expected result.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13265372">CSV-254</key>
            <summary>POSTGRESQL_CSV cannot parse correctly (null vs zero-length string)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="lbruun">Lars Bruun-Hansen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Oct 2019 19:25:51 +0000</created>
                <updated>Sat, 21 Jun 2025 19:58:27 +0000</updated>
                            <resolved>Sat, 21 Jun 2025 19:58:27 +0000</resolved>
                                                    <fixVersion>1.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16963478" author="garydgregory" created="Wed, 30 Oct 2019 22:22:21 +0000"  >&lt;p&gt;Not quite, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CSV-253&lt;/a&gt;&lt;br/&gt;
An empty string is not the same as a &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16964633" author="lbruun" created="Fri, 1 Nov 2019 06:17:27 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Not quite, see &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CSV-253&lt;/a&gt;&lt;br/&gt;
 An empty string is not the same as a &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Exactly! And this is essentially what this ticket is about. Not sure I understand the comment. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;POSTGRESQL_CSV&lt;/tt&gt; format cannot properly distinguish between empty string and null while parsing. So it gets it wrong. The reason why &lt;tt&gt;POSTGRESQL_CSV&lt;/tt&gt; format can&apos;t is not due as much to the format itself, but to an underlying deficiency in the Parser which is proposed fixed in &lt;a href=&quot;https://github.com/apache/commons-csv/pull/51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR51&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-253&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;CSV-253&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Please suggest how to proceed. I&apos;ll be happy to do more work if required or change stuff in PR51or whatever.&lt;/p&gt;

&lt;p&gt;Thx.&lt;/p&gt;
</comment>
                            <comment id="17618165" author="garydgregory" created="Sat, 15 Oct 2022 19:58:04 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lbruun&quot; class=&quot;user-hover&quot; rel=&quot;lbruun&quot;&gt;lbruun&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please test git master or &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;, this area has recently changed for &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-290&quot; title=&quot;Produced CSV using PostgreSQL format cannot be read&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CSV-290&quot;&gt;&lt;del&gt;CSV-290&lt;/del&gt;&lt;/a&gt; with &lt;a href=&quot;https://github.com/apache/commons-csv/pull/265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-csv/pull/265&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13264910">CSV-253</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z083wg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>