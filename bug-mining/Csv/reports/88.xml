<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:43:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CSV-247] A single empty header is allowed when not allowing empty column headers.</title>
                <link>https://issues.apache.org/jira/browse/CSV-247</link>
                <project id="12313222" key="CSV">Commons CSV</project>
                    <description>&lt;p&gt;If the settings are not allowing empty columns headers you can currently use a single empty header. This is because column headers are only checked for empty when they are duplicates. So it is the second empty header (the first duplicate) that raises an error. This test should pass but does not:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test(expected = IllegalArgumentException.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testHeadersMissingOneColumnException() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
 &#160;&#160;&#160;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Reader in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&quot;a,,c,d\n1,2,3,4\nx,y,z,zz&quot;&lt;/span&gt;); &#160;&#160;&#160;CSVFormat.DEFAULT.withHeader().parse(in).iterator(); 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13242934">CSV-247</key>
            <summary>A single empty header is allowed when not allowing empty column headers.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="aherbert">Alex Herbert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Jul 2019 07:59:25 +0000</created>
                <updated>Mon, 7 Oct 2019 19:03:04 +0000</updated>
                            <resolved>Sun, 6 Oct 2019 21:39:47 +0000</resolved>
                                    <version>1.7</version>
                                    <fixVersion>1.8</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16945473" author="garydgregory" created="Sun, 6 Oct 2019 21:39:47 +0000"  >&lt;p&gt;I think this works as designed in git master, please see &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-247&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CSV-247&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that using &lt;tt&gt;&lt;a href=&quot;https://static.javadoc.io/org.apache.commons/commons-csv/1.7/org/apache/commons/csv/CSVFormat.html#withHeader-java.lang.String...-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;withHeaders()&lt;/a&gt;&lt;/tt&gt; without any arguments uses the first line as the header line.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16945858" author="alexherbert" created="Mon, 7 Oct 2019 12:50:57 +0000"  >&lt;p&gt;I still think there is an inconsistency.&lt;/p&gt;

&lt;p&gt;My original test case in the ticket header expects an exception when there is a single missing header and the parser is configured to not allow missing column names.&lt;/p&gt;

&lt;p&gt;This is how the code works. This runs fine against current master:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testHeadersMissing() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CSVFormat format = CSVFormat.DEFAULT.withHeader();

    &lt;span class=&quot;code-comment&quot;&gt;// The &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; does not allow missing column names but allows
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// duplicate headers
&lt;/span&gt;    Assertions.assertFalse(format.getAllowMissingColumnNames(),
        &lt;span class=&quot;code-quote&quot;&gt;&quot;By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; we should not allow missing column names&quot;&lt;/span&gt;);
    Assertions.assertTrue(format.getAllowDuplicateHeaderNames(),
        &lt;span class=&quot;code-quote&quot;&gt;&quot;By &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; we should allow duplicate column names&quot;&lt;/span&gt;);

    Assertions.assertDoesNotThrow(() -&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Reader in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&quot;a,,c,d,e\n1,2,3,4,5\nv,w,x,y,z&quot;&lt;/span&gt;);
        format.parse(in).iterator();
    }, &lt;span class=&quot;code-quote&quot;&gt;&quot;1 missing column header is OK&quot;&lt;/span&gt;);

    Assertions.assertThrows(IllegalArgumentException.class, () -&amp;gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Reader in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringReader(&lt;span class=&quot;code-quote&quot;&gt;&quot;a,,c,d,\n1,2,3,4,5\nv,w,x,y,z&quot;&lt;/span&gt;);
        format.parse(in).iterator();
    }, &lt;span class=&quot;code-quote&quot;&gt;&quot;2+ missing column headers is not allowed!&quot;&lt;/span&gt;);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So 1 missing header is fine but not 2 or more. This is the bug.&lt;/p&gt;

&lt;p&gt;My PR to fix this is old. Do you want a rebased version with tests showing what I expect?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16945967" author="garydgregory" created="Mon, 7 Oct 2019 15:33:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aherbert&quot; class=&quot;user-hover&quot; rel=&quot;aherbert&quot;&gt;aherbert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Yes, please and thank you for your patience.&#160;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16945989" author="alexherbert" created="Mon, 7 Oct 2019 16:08:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve updated the PR with a quick rebase. The code logic in CSVParser was unchanged. The recent switch from JUnit 4 to 5 was preventing an auto-merge by git but the change was trivial.&lt;/p&gt;

&lt;p&gt;I also added a variant of the above test to the issues test: JiraCsv247Test.&lt;/p&gt;</comment>
                            <comment id="16946120" author="garydgregory" created="Mon, 7 Oct 2019 18:34:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aherbert&quot; class=&quot;user-hover&quot; rel=&quot;aherbert&quot;&gt;aherbert&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I merged the PR to git master. Please verify and close this ticket.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16946148" author="alexherbert" created="Mon, 7 Oct 2019 19:03:04 +0000"  >&lt;p&gt;Verified in master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 5 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04byg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>