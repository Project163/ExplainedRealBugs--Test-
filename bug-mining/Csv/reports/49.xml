<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:43:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CSV-168] CsvFormat.nullString should not be escaped</title>
                <link>https://issues.apache.org/jira/browse/CSV-168</link>
                <project id="12313222" key="CSV">Commons CSV</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Use case: I&apos;m generating MySQL dump files (text format) - for more details check this - &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.7/en/select-into.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dev.mysql.com/doc/refman/5.7/en/select-into.html&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;Issue: The value null is represented as &quot;\N&quot;. Also by default the escape char is &apos;\N&apos;. The CsvPrinter.printAndEscape method will convert this value into &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;\\N&quot;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I suggest to modify the CsvPrinter in order to not escape the nullString value  - it should be written as it is. I can create a pull request if you want.&lt;/p&gt;

&lt;p&gt;I consider it a minor issue because it can be mitigated by making sure that the escape character is not a part of the nullString - however in my case it means that the LOAD commands should be modified accordingly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12931782">CSV-168</key>
            <summary>CsvFormat.nullString should not be escaped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="cornelcreanga">cornel creanga</reporter>
                        <labels>
                    </labels>
                <created>Sun, 17 Jan 2016 13:57:16 +0000</created>
                <updated>Tue, 19 Jan 2016 09:57:10 +0000</updated>
                            <resolved>Tue, 19 Jan 2016 02:38:42 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                    <component>Parser</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15103888" author="garydgregory" created="Sun, 17 Jan 2016 19:40:01 +0000"  >&lt;p&gt;I&apos;m not sure about changing the behavior. What if you do want it escaped? I&apos;m not sure there is a case for that... What about adding a escapeNull boolean setting?&lt;/p&gt;</comment>
                            <comment id="15103906" author="garydgregory" created="Sun, 17 Jan 2016 20:26:33 +0000"  >&lt;p&gt;Is the literal string &lt;tt&gt;&quot;\N&quot;&lt;/tt&gt; the default for MySQL exports? If not &lt;tt&gt;&quot;null&quot;&lt;/tt&gt;, what should the default null String value be for &lt;tt&gt;CSVFormat.MYSQL&lt;/tt&gt;?&lt;/p&gt;</comment>
                            <comment id="15105438" author="cornelcreanga" created="Mon, 18 Jan 2016 15:33:16 +0000"  >&lt;p&gt;There are more rules, I&apos;ll copy paste below some sentences  from the MYSQL manual.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&quot;Handling of NULL values varies according to the FIELDS and LINES options in use:&lt;br/&gt;
For the default FIELDS and LINES values, NULL is written as a field value of \N for output, and a field value of \N is read as NULL for input (assuming that the ESCAPED BY character is &#8220;\&#8221;).&lt;br/&gt;
If FIELDS ENCLOSED BY is not empty, a field containing the literal word NULL as its value is read as a NULL value. This differs from the word NULL enclosed within FIELDS ENCLOSED BY characters, which is read as the string &apos;NULL&apos;.&lt;br/&gt;
If FIELDS ESCAPED BY is empty, NULL is written as the word NULL.&lt;br/&gt;
With fixed-row format (which is used when FIELDS TERMINATED BY and FIELDS ENCLOSED BY are both empty), NULL is written as an empty string. This causes both NULL values and empty strings in the table to be indistinguishable when written to the file because both are written as empty strings. If you need to be able to tell the two apart when reading the file back in, you should not use fixed-row format.&quot; - &lt;a href=&quot;http://dev.mysql.com/doc/refman/5.7/en/load-data.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dev.mysql.com/doc/refman/5.7/en/load-data.html&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Briefly:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;if you configure a value for FIELDS ENCLOSED BY you can use the word NULL if you want. If  MYSQL will find the actual &quot;NULL&quot; string it will enclose it in order to distinguish it from the NULL value&lt;/li&gt;
	&lt;li&gt;if you do not configure a value for FIELDS ENCLOSED BY (default behaviour) the null value will be written as &amp;lt;separator&amp;gt;N (and the default separator is &quot;\&quot;). If MYSQL will  find the actual &quot;&amp;lt;separator&amp;gt;N&quot; string it will escape it to &quot;&amp;lt;separator&amp;gt;&amp;lt;separator&amp;gt;N&quot;:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Regarding your concern: at the first glance  I do not know if somebody would like to have it escaped - in this case how to distinguish during a read operation between the actual text &apos;\N&apos; and the null value? - however I might be wrong and miss some use cases. Adding an escapeNull flag could work too. &lt;/p&gt;

&lt;p&gt;Note that right now even if you want to pursue the other choice (quote the values and use NULL for representing the values) you would run into issues because the CSVParser will quote the NULL too (eg try a test with CSVFormat format = CSVFormat.MYSQL.withQuote(&apos;&quot;&apos;).withNullString(&quot;NULL&quot;).withQuoteMode(QuoteMode.NON_NUMERIC) .&lt;/p&gt;

&lt;p&gt;I&apos;ve attached some code too:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{&lt;span class=&quot;code-quote&quot;&gt;&quot;NULL&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;};
        CSVFormat format = CSVFormat.MYSQL.withQuote(&lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-quote&quot;&gt;&quot;&apos;&lt;/span&gt;).withNullString(&quot;&lt;/span&gt;NULL&quot;).withQuoteMode(QuoteMode.NON_NUMERIC);
        StringWriter writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        CSVPrinter printer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CSVPrinter(writer, format);
        printer.print(s[0]);printer.print(s[1]);printer.close();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(writer.toString());

        s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{&lt;span class=&quot;code-quote&quot;&gt;&quot;\\N&quot;&lt;/span&gt;,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;};
        format = CSVFormat.MYSQL.withNullString(&lt;span class=&quot;code-quote&quot;&gt;&quot;\\N&quot;&lt;/span&gt;);
        writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        printer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CSVPrinter(writer, format);
        printer.print(s[0]);printer.print(s[1]);printer.close();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(writer.toString());

        s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]{&quot;&quot;,&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;};
        format = CSVFormat.MYSQL;
        writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        printer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CSVPrinter(writer, format);
        printer.print(s[0]);printer.print(s[1]);printer.close();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(writer.toString());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;








</comment>
                            <comment id="15105833" author="garydgregory" created="Mon, 18 Jan 2016 21:05:01 +0000"  >&lt;p&gt;Let&apos;s start with the basics: Should the default for &lt;tt&gt;nullString&lt;/tt&gt; in &lt;tt&gt;CSVFormat.MYSQL&lt;/tt&gt; be &lt;tt&gt;&quot;\N&quot;&lt;/tt&gt;? (which is&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;\\N&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in Java source)&lt;/p&gt;</comment>
                            <comment id="15105882" author="cornelcreanga" created="Mon, 18 Jan 2016 22:12:57 +0000"  >&lt;p&gt;For the sake of simplicity yes - the default value for nullString in CSVFormat.MYSQL should be &quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;N&quot; (in java source) &lt;/p&gt;</comment>
                            <comment id="15105883" author="garydgregory" created="Mon, 18 Jan 2016 22:14:25 +0000"  >&lt;p&gt;Try this patch, and check the new unit test. Please see if you can figure out why the test &lt;tt&gt;org.apache.commons.csv.CSVPrinterTest.testRandomMySql()&lt;/tt&gt; fails randomly. Make sure you pick up the &lt;b&gt;latest&lt;/b&gt; from &lt;b&gt;trunk&lt;/b&gt; &lt;b&gt;before&lt;/b&gt; you apply the patch.&lt;/p&gt;

&lt;p&gt;I&apos;m not happy with a random test failing which is why I have not applied the patch.&lt;/p&gt;

&lt;p&gt;Thank you for your help!&lt;/p&gt;</comment>
                            <comment id="15106142" author="garydgregory" created="Tue, 19 Jan 2016 02:38:42 +0000"  >&lt;p&gt;In SVN trunk now. Please verify and close this issue.&lt;/p&gt;

&lt;p&gt;You can also try a SNAPSHOT for the Apache SNAPSHOT repository here: &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15106525" author="cornelcreanga" created="Tue, 19 Jan 2016 09:56:53 +0000"  >&lt;p&gt;It works for 1.3-SNAPSHOT - thanks. I&apos;ve missed your previous comment, I&apos;m in EET timezone.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12932244">CSV-169</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12932288">CSV-170</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12782946" name="codec-168-gg.diff" size="6537" author="ggregory" created="Mon, 18 Jan 2016 22:14:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2rkt3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>