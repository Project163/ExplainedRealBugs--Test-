<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:44:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CSV-314] Missing OSGi Import-Package versions in Manifest can make commons-csv unusable in OSGi environments</title>
                <link>https://issues.apache.org/jira/browse/CSV-314</link>
                <project id="12313222" key="CSV">Commons CSV</project>
                    <description>&lt;p&gt;Since commons-csv 1.11.0, this library depends on &lt;b&gt;commons-codec&lt;/b&gt; and on &lt;b&gt;commons-io&lt;/b&gt;. Up to version 1.10.0, there were no (compile) dependencies.&lt;/p&gt;

&lt;p&gt;Since 1.11.0, the MANIFEST.MF contains &lt;b&gt;OSGi Import-Package headers&lt;/b&gt; in the MANIFEST.MF, to import the required packages when running in an OSGi environment.&lt;/p&gt;

&lt;p&gt;However, those Import-Package headers don&apos;t define a (minimal) version of those commons-codec or commons-io packages.&lt;br/&gt;
As a consequence, depending on the exact OSGi environment and bundle loading order, someone may be unlucky and commons-csv may happily resolve against an &lt;em&gt;older&lt;/em&gt; commons-codec or commons-io, even though some of its code requires more recent commons-codec or commons-io API. This will result in runtime errors, later at runtime, whenever commons-csv tries to call such &quot;recent&quot; commons-io or commons-codec code.&lt;/p&gt;

&lt;p&gt;This is similar to this commons-text issue: &lt;a href=&quot;https://issues.apache.org/jira/browse/TEXT-233&quot; title=&quot;Missing OSGi import-package commons-lang3 version can make commons-text unusable in OSGi&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEXT-233&quot;&gt;&lt;del&gt;TEXT-233&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The Apache maven-bundle-plugin calculates and generates the following Import-Package headers (commons-csv 1.12.0) :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Import-Package: org.apache.commons.codec.binary,org.apache.commons.io,or
&#160;g.apache.commons.io.function,org.apache.commons.io.input,org.apache.com
&#160;mons.io.output &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Unfortunately, the maven-bundle-plugin currently doesn&apos;t add an explicit (minimal) version number directive to these header. So while loading commons-csv, OSGi may resolve this against older commons-codec or commons-io jars (if it sees those older versions first, for whatever reason).&lt;/p&gt;

&lt;p&gt;However, on a few places, commons-csv relies on code that only exists since specific versions of those dependencies. E.g. the CSVParser ctor refers UnsynchronizedBufferedReader, which only exists since commons-io 2.17.0.&lt;/p&gt;

&lt;p&gt;We had a case where in the OSGi environment commons-csv was resolved against an older commons-io (2.15.1 or 2.11.0 or so), which then resulted in an exception the 1st time commons-csv tried to parse a csv :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.lang.NoClassDefFoundError: org/apache/commons/io/input/UnsynchronizedBufferedReader
&#160; &#160; at org.apache.commons.csv.CSVParser.&amp;lt;init&amp;gt;(CSVParser.java:444) ~[?:?]
&#160; &#160; at org.apache.commons.csv.CSVParser.&amp;lt;init&amp;gt;(CSVParser.java:412) ~[?:?]
&#160; &#160; at org.apache.commons.csv.CSVParser.parse(CSVParser.java:311) ~[?:?] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Similar issues may pop up elsewhere where commons-io or commons-codec gets called.&lt;/p&gt;

&lt;p&gt;I suppose that the solution would be similar to the solution of the commons-text issue:&lt;/p&gt;

&lt;p&gt;i.e. in the pom.xml :&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;define properties for the commons-codec and commons-io version&lt;/li&gt;
	&lt;li&gt;define a property &lt;em&gt;commons.osgi.import&lt;/em&gt;,&lt;br/&gt;
where all the required import-packages need to be specified explicitly, with the required version directive.&lt;br/&gt;
(This property is then picked up by the maven-bundle-plugin in the commons-parent pom)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13599151">CSV-314</key>
            <summary>Missing OSGi Import-Package versions in Manifest can make commons-csv unusable in OSGi environments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="belpk">K P</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Nov 2024 16:14:37 +0000</created>
                <updated>Mon, 18 Nov 2024 17:17:17 +0000</updated>
                            <resolved>Mon, 18 Nov 2024 17:17:17 +0000</resolved>
                                    <version>1.11.0</version>
                                    <fixVersion>1.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17899193" author="garydgregory" created="Mon, 18 Nov 2024 16:47:39 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Adhip&quot; class=&quot;user-hover&quot; rel=&quot;Adhip&quot;&gt;Adhip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Feel free to create a PR and I&apos;ll be happy to review it.&lt;/p&gt;
</comment>
                            <comment id="17899199" author="garydgregory" created="Mon, 18 Nov 2024 17:17:17 +0000"  >&lt;p&gt;TY &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belpk&quot; class=&quot;user-hover&quot; rel=&quot;belpk&quot;&gt;belpk&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1smg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>