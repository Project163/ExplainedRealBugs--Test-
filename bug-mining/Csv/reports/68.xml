<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:43:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CSV-208] Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.</title>
                <link>https://issues.apache.org/jira/browse/CSV-208</link>
                <project id="12313222" key="CSV">Commons CSV</project>
                    <description>&lt;p&gt;Cannot parse PostgreSQL CSV and Text formats.&lt;/p&gt;

&lt;p&gt;We cannot seem to parse the stock PostgreSQL Text format, see &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;org.apache.commons.csv.CSVPrinterTest.testRandomPostgreSqlCsv()&lt;/li&gt;
	&lt;li&gt;org.apache.commons.csv.CSVPrinterTest.testRandomPostgreSqlText()&lt;/li&gt;
	&lt;li&gt;org.apache.commons.csv.CSVPrinterTest.testPostgreSqlCsvNullOutput()&lt;/li&gt;
	&lt;li&gt;org.apache.commons.csv.CSVPrinterTest.testPostgreSqlCsvTextOutput()&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I am guessing that the issue is that in PostgreSQL, the escape character is the same as the quote character:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;QUOTE&lt;br/&gt;
Specifies the quoting character to be used when a data value is quoted. The default is double-quote. This must be a single one-byte character. This option is allowed only when using CSV format.&lt;/p&gt;

&lt;p&gt;ESCAPE&lt;br/&gt;
Specifies the character that should appear before a data character that matches the QUOTE value. The default is the same as the QUOTE value (so that the quoting character is doubled if it appears in the data). This must be a single one-byte character. This option is allowed only when using CSV format.&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="13059514">CSV-208</key>
            <summary>Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Mar 2017 20:01:17 +0000</created>
                <updated>Tue, 6 Jul 2021 11:43:15 +0000</updated>
                            <resolved>Sat, 20 Oct 2018 15:51:25 +0000</resolved>
                                                    <fixVersion>1.7</fixVersion>
                                    <component>Parser</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16307804" author="dway17" created="Tue, 2 Jan 2018 09:44:58 +0000"  >&lt;p&gt;The test &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12904185/12904185_CSVFormatTest.java&quot; title=&quot;CSVFormatTest.java attached to CSV-208&quot;&gt;CSVFormatTest.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; causes&lt;br/&gt;
{{&lt;br/&gt;
java.io.IOException: (startline 1) EOF reached before encapsulated token finished&lt;br/&gt;
	at org.apache.commons.csv.Lexer.parseEncapsulatedToken(Lexer.java:288)&lt;br/&gt;
	at org.apache.commons.csv.Lexer.nextToken(Lexer.java:158)&lt;br/&gt;
	at org.apache.commons.csv.CSVParser.nextRecord(CSVParser.java:586)&lt;br/&gt;
	at org.apache.commons.csv.CSVParser.getRecords(CSVParser.java:448)&lt;br/&gt;
}}&lt;/p&gt;</comment>
                            <comment id="16641162" author="jurrieovergoor" created="Sun, 7 Oct 2018 18:10:38 +0000"  >&lt;p&gt;I&apos;m running into the same issue.&lt;br/&gt;
I&apos;m now using the the following format:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CSVFormat.POSTGRESQL_CSV.withEscape(&lt;span class=&quot;code-quote&quot;&gt;&apos;\\&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It seems to work ok.&lt;/p&gt;

&lt;p&gt;So the bug is in the defautl formatters. I &lt;a href=&quot;https://github.com/apache/commons-csv/pull/32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;submitted a simple PR&lt;/a&gt;, but integration tests seem to fail for reasons unclear to me.&lt;/p&gt;

&lt;p&gt;But it exposes another issue: you can assign the quote and the escape character the same character. This is not supported. So either you should get an IllegalArgumentException, or it should be supported by commons-csv I feel.&lt;/p&gt;</comment>
                            <comment id="16657892" author="garydgregory" created="Sat, 20 Oct 2018 15:51:25 +0000"  >&lt;p&gt;In git master; please verify and close.&lt;/p&gt;</comment>
                            <comment id="16658407" author="garydgregory" created="Sun, 21 Oct 2018 21:47:35 +0000"  >&lt;p&gt;The fix:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Updates the Javadoc for &lt;tt&gt;org.apache.commons.csv.CSVFormat.POSTGRESQL_CSV&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Updates the escape character for &lt;tt&gt;org.apache.commons.csv.CSVFormat.POSTGRESQL_CSV&lt;/tt&gt; to a back slash.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16658661" author="jurrieovergoor" created="Mon, 22 Oct 2018 06:49:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;You asked me to verify what was in master. When I confirmed that all was ok, I meant that the changes in &lt;a href=&quot;https://github.com/apache/commons-csv/pull/32&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR#32&lt;/a&gt; were correctly copied to master. I did not mean that this issue is fixed now.&lt;/p&gt;

&lt;p&gt;The issue that my PR addresses is the inconsistencies between Commons-csv&apos;s POSTGRESQL_TEXT and POSTGRESQL_CSV formats and PostgreSQL itself. Those inconstencies are now fixed.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-208&quot; title=&quot;Fix escape character for POSTGRESQL_TEXT and POSTGRESQL_CSV formats.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CSV-208&quot;&gt;&lt;del&gt;CSV-208&lt;/del&gt;&lt;/a&gt; issue is on having the QUOTE and the ESCAPE character the same. Commons-csv can not parse such CSV files; it spits out a stacktrace &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-208?focusedCommentId=16307804&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16307804&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;as posted above&lt;/a&gt;. So this issue should remain open.&lt;/p&gt;</comment>
                            <comment id="16659091" author="garydgregory" created="Mon, 22 Oct 2018 15:31:42 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jurrieovergoor&quot; class=&quot;user-hover&quot; rel=&quot;jurrieovergoor&quot;&gt;jurrieovergoor&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;I&apos;d like to narrow this issue to fixing the Javadoc and the escape character for PostgreSQL. The general issue with parsing, the quote, and escape character is already covered in &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-200&quot; title=&quot;CSVFormat cannot read its own output if input contain escape character followed by quote character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CSV-200&quot;&gt;CSV-200&lt;/a&gt; which is now linked to this issue. If you have a general solution to this problem, please comment or provide a PR in &lt;a href=&quot;https://issues.apache.org/jira/browse/CSV-200&quot; title=&quot;CSVFormat cannot read its own output if input contain escape character followed by quote character&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CSV-200&quot;&gt;CSV-200&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13014712">CSV-200</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13059493">CSV-207</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12904185" name="CSVFormatTest.java" size="893" author="DWay17" created="Tue, 2 Jan 2018 09:39:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cuu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>