{"project_id": "Alacritty", "bug_id": "1", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Scrolling vim in tmux while a separate pane is printing causes corruption\n\nDescription:\nGiven this setup ![image](https://cloud.githubusercontent.com/assets/4285147/18794329/df0f1182-8173-11e6-9908-0847d7ae9a6d.png) Scrolling a vim split **while the middle left pane is printing** will cause vim to become corrupt as shown in this screenshot: ![image](https://cloud.githubusercontent.com/assets/4285147/18794367/117e31c0-8174-11e6-83a7-4051d52dd870.png) I have a theory that this is because writing to the _pty_ is not synchronized at all. The input thread simply writes to the file descriptor when it has data to write. The only way to test if this is true would be implementing an actual event loop for I/O. The easiest way to do that is dropping mio into the pty thread and sending all writes from the input handling over the mio channel.\n\nDiscussion:\nI actually managed to reproduce it with a slightly simpler tmux arrangement. It did not seem to be an issue when there was not a vertical split on the bottom. This may suggest that it's not concurrent read + write that's an issue but instead something to do with printing data while not in a scrolling region. ![image](https://cloud.githubusercontent.com/assets/4285147/18794470/841b0fc8-8174-11e6-9fc3-6b46ec86b45b.png)"}
{"project_id": "Alacritty", "bug_id": "2", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Resizing doesn't work properly on macOS\n\nDescription:\nThe out-of-band resize events on macOS don't trigger a refresh. Need to make it possible to kick the event loop from that resize handler.\n\n"}
{"project_id": "Alacritty", "bug_id": "3", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Doesn't shutdown properly from EOF on macOS\n\nDescription:\nJust open Alacritty and hit ` ` to repro\n\n"}
{"project_id": "Alacritty", "bug_id": "4", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Sometimes reading from pty doesn't trigger a draw\n\nDescription:\nSeems to have happened since the last major refactor.\n\nDiscussion:\nResolved in a91a3f2"}
{"project_id": "Alacritty", "bug_id": "5", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Use XDG_CONFIG_PATH value\n\nDescription:\nCurrently hardcoded to `$HOME/.config`, but that's not necessarily correct. https://whitequark.github.io/rust-xdg/xdg/struct.BaseDirectories.html#method.find_config_file\n\n"}
{"project_id": "Alacritty", "bug_id": "6", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: UK keyboard layout: '#' and '~' key not working on Linux with x11\n\nDescription:\nI've just quickly followed the dependencies for keyboard input. It looks like alacritty depends on [glutin](https://github.com/tomaka/glutin/) which for linux depends on [winit](https://github.com/tomaka/winit) and I found the following lines are commented out in the most recent version [src/api/x11/events.rs#L177](https://github.com/tomaka/winit/blob/master/src/api/x11/events.rs#L177) and [src/api/x11/events.rs#L270](https://github.com/tomaka/winit/blob/master/src/api/x11/events.rs#L270). This seems to be relevant to my issue but I am unsure why it has been commented out. If this is the reason then the layout of my keyboard is irrelevant and most likely other linux users would have the same problem. Having encountered the issue while using alacritty I'm submitting an issue here but should I also post an issue on winit? Or is there another reason for this issue?\n\nDiscussion:\nThis problem would need to be fixed upstream in `winit` as you've suggested. Alacritty is actually on an older for of `glutin` from before the split, and so there would still be some work here to get an upstream patch.\n---\nI'll see if I can fix it tomorrow. Any particular reason you are using an older version of `glutin`? Is it changing too often?\n---\nThere was a couple of features needed for this project that I was having trouble getting feedback on. Specifically, keyboard modifiers needed to be parsed out of the underlying windowing system event and passed with `glutin::Event::KeyboardInput`. I also needed the received `char`(s) to be passed with the event. The latter feature was necessary for either running a key binding or printing the character. For example, you wouldn't want `Command-C` to also print a `c` when trying to copy the selection.\n---\nIn any case, it's on my list to try and upstream the patches and get back on the main glutin tree.\n---\nI found a fix for this issue! Here are the diffs that I am applying on top of https://github.com/jwilm/glutin/commit/af7fe340bd4a2af53ea521defcb4f377cdc588cf which is the version of glutin alacritty currently depends on: This is obviously just a temporary solution waiting for proper patches upstream so I don't know if you'd want to make these changes in your version of glutin. This works for me so I just wanted to share! ðŸ˜ƒ It's possible other useful keys are not yet enabled but I haven't encountered them yet. Great work with alacritty! I see it's becoming very popular, definitely deserved!\n---\nShould be fixed by https://github.com/rust-windowing/winit/pull/1266.\n---\nCan we confirm this is fixed ? If so, the issue can be closed\n---\nif you can see the mentioned PR isn't yet landed."}
{"project_id": "Alacritty", "bug_id": "7", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: PgUp and PgDown don't work\n\nDescription:\nN/A\n\n"}
{"project_id": "Alacritty", "bug_id": "8", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: `alt` key don't work\n\nDescription:\nexample:\n\nDiscussion:\nI had no idea this was a thing. I've looked into this a bit, and ALT seems to be quite a special case for terminal emulators. When there's a key pressed with alt, the terminal emulator should send the escape character (`27` or `\\033` or `\\x1b`) followed by the character that was pressed.\n---\nShould be fixed :smile:\n---\nAlso, thanks a lot for the curses script; it was very helpful!"}
{"project_id": "Alacritty", "bug_id": "9", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Scrolling should not write to the pty when one of the mouse modes isn't active\n\nDescription:\nN/A\n\n"}
{"project_id": "Alacritty", "bug_id": "10", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Improve error handling for font loading\n\nDescription:\nCurrently there's a failing assertion that the user sees as a backtrace. cc #21\n\nDiscussion:\nRefactored fontconfig usage to not panic. Still need to have some better error handling when fonts are not found."}
{"project_id": "Alacritty", "bug_id": "11", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: alacritty does not draw background color for (some) invisible characters\n\nDescription:\nFor example in htop. ![alacritty_bg_example](https://cloud.githubusercontent.com/assets/3718129/21730333/8a3f97ce-d44f-11e6-98e5-e4ac73e3a115.png) Easily visible in this command: because it is entirely invisible in alacritty, but visible in other terminal emulators\n\nDiscussion:\nThanks for the report! This should be relatively easy to fix as soon as I can make some time.\n---\n@jwilm Duplicate issue #123 logged. Hopefully this will provide some extra testing scenarios. Would it be possible to point to the general direction where this sort of thing is handled in the alacritty codebase? Maybe as a beginner task that is easy to fix?\n---\nThe logic for when to skip a cell [is in term.rs](https://github.com/jwilm/alacritty/blob/master/src/term/mod.rs#L135-L136). It uses [`Cell::is_empty()`](https://github.com/jwilm/alacritty/blob/master/src/term/cell.rs#L90-L94) for checking if the cell should normally be displayed. The `is_empty()` logic should be updated for other non-printable characters. Edit: perhaps using https://doc.rust-lang.org/std/primitive.char.html#method.is_whitespace\n---\nThe problem seems to be elsewhere. I completely commented out the skipping code in term.rs but the output still looks exactly the same, so this issue is either not related to blank characters, or it's located elsewhere in the code.\n---\nI can confirm what @d3rrial has described. I tried to comment out the is_empty code and the issue still persists. I think if you have a theme like gruvbox in vim that isn't rendering properly the problem becomes a little bit more interactive / visible. It seems that you just simply can't \"reach\" these characters that aren't being rendered. I'll try and record a gif or a video to demonstrate or maybe try to print out the on the screen what characters are in the empty space.\n---\nHere is a gif of me moving around in vim a little bit and adding some text. Hopefully this helps to visualise the issue a little more. ![gif of issue](http://g.recordit.co/CsISsSMi0j.gif) I'm not too sure what invisible character (if any) vim tries to render when there is no text in a region, but maybe it might differentiate from the example given in the issue description?\n---\n@jwilm I noticed in the test folder a [json dump of the grid](https://github.com/jwilm/alacritty/blob/master/tests/ref/vim_simple_edit/grid.json) whilst in vim. Is there any easy way to produce this whilst in alacritty? I'm thinking this might serve as a useful debugging tool for figuring out what characters background colours aren't being rendered.\n---\nThe easiest way to find out what isn't drawn is probably to look what ncurses uses to fill those line endings with. Maybe it's not invisible characters, maybe it's calculating a line length that's too short? What would happen if, for every line, an invisible (`' '`) character would be appended to the last column?\n---\nThat would make sense. It seems that alacritty is rendering the background colour only for places that have text. The rest of the area appears to be the default alacritty background colour. I imagine a JSON dump of the grid would still help to confirm this though - right? A total guess from knowing nothing about the architecture of this project (or rust) - I would guess that a cell with truly nothing in it would be populated with null, therefore the majority of an empty vim document would be a grid of cells where `c` (as seen in the struct below) is null. Although I'm not sure if a `char` in rust can be null? EDIT: I should've read further down in the code. It would seem (if I'm reading this correctly) that a cell in alacritty defaults to an empty string with (what I can only imagine is) the default fg and bg colour. I guess this would be consistent with what we are seeing?\n---\nAn empty cell is actually populated with `' '` and the default colour: So the problem I guess is that white space characters ('\\n', '\\t', ...)don't update the relevant cells with a colour update\n---\n@basile-henry I guess that seems like the issue then. I guess the first place to start would be to find out where these cells are created in alacritty and what is done with these white space characters?\n---\n@CarwynNelson I think the modification would need to be where the white space characters are handled. First let's start with '\\n' in `src/term/mod.rs`: This should update the current line and add colour data to the cells that need it. I'll see if I can implement that\n---\nJust looking at where `linefeed` is used in `Impl ansi::Handler for Term` and it seems that it should only be called when scrolling past the end of the scroll region? Of course looking at the debug log shows `linefeed` being called when I simply move the (vim) cursor down one line. I'm guessing I'm not understanding this correctly. Could somebody explain to me what is actually going on in this part of the code? EDIT: Here i'm assuming the `scroll_region.end` is the end of everything that should be visible on screen. In other words I was guessing that this code is to do with shifting the view up so that the line out of view can be rendered. If that makes any sort of sense.\n---\nOh right I guess maybe this is for movement rather that input, I'll keep looking for where white space characters are actually handled as input\n---\nActually the gif I posted above explains this quite nicely. You can see the `linefeed` debug being printed out even though nothing new is really being rendered. Could this bit of code be to do with moving at all - rather than just rendering \"new\" things on screen? EDIT: I think it may be easier to see this and find the code responsible with a step through debugger. I'm heading off for a little bit now - but maybe by the time I get back somebody would've beat me to the bug fix :P EDIT EDIT: I'm going to throw a guess out there and say that the easiest place to fix this would be the renderer? Although it would be more desirable to fix it further up the chain where it is easier to unit test. Commenting out loud here :)\n---\n@CarwynNelson ~~I think I've managed to fix it here: https://github.com/basile-henry/alacritty/commit/537471dfd3324162c98d9837da258f9ffa2875f8~~ Would you mind trying this commit before I make a PR? ðŸ˜ƒ At the moment I'm only fixing '\\t' and '\\n' any other white space chars I should fix? EDIT: sorry, some issue with normal linefeed"}
{"project_id": "Alacritty", "bug_id": "12", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Scrolling breaks in vim with ttymouse=sgr on Linux\n\nDescription:\nScrolling always goes down regardless of which way the mouse wheel moves.\n\n"}
{"project_id": "Alacritty", "bug_id": "13", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: [Ranger] Bright colors do not get transferred correctly to bg color\n\nDescription:\n![ranger](https://user-images.githubusercontent.com/312503/27095152-fdadcb06-506c-11e7-9460-d11924b360f2.png) Urxvt top, alacritty bottom. When using ranger with alacritty I noticed that the colors do not match with the ones I get with urxvt. It seems like ranger uses the current color of the file type to draw the background. However in alacritty it doesn't seem to take into account that the bold text changed the color and instead uses the non bright color to draw the bg strip.\n\nDiscussion:\nThere's a config option to draw bold text with bright colors. Please make sure you've got that enabled and that your bright colors are configured differently than normal colors.\n---\nIf you mean `draw_bold_text_with_bright_colors: true` then I have that activated, yes. As you can see in the screenshot, the bold text has a different color than the bg color with alacritty. Here is my color settings:\n---\nOh, sorry. I misunderstood. Sounds like a bug.\n---\n@jwilm It seems like the problem is the \"invert\" color terminal code: Paste that into your terminal and you will see that the inverted bold is not correctly handled. I did take a look at where the bright color computation happens and I think that it happens too late in the pipeline to be able to handle this. Because as it is now, the fg and bg colors are split of long before the bright check happens. So it is impossible to know if the bg color should be bright or not."}
{"project_id": "Alacritty", "bug_id": "14", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: If a job is running in the background, the terminal won't exit\n\nDescription:\nIf I do, for example, this: xclock & disown and then exit, the terminal gets unresponsive and won't exit; and I have to use my WM's \"destroy\" utility to get rid of it.\n\nDiscussion:\nSounds like a bug; thanks for the report!\n---\nIn this case, `io_thread.join()` in `main.rs` never actually joins. After `join()` is called, we receive one more event of kind `is_hup()` which (as far as I can see) we should respond to by shutting down the event loop. We currently just loop again, which in turn causes the event loop to wait forever and never allow it to join to the main thread. Hilarity ensues.\n---\n@lukaslueg I'm not seeing the same thing you are This breaks the outermost loop, and the thread function returns.\n---\nYes. My goggles, they do nothing. But `join()` never returns..."}
{"project_id": "Alacritty", "bug_id": "15", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: thread 'main' panicked at 'index 50 out of range for slice of length 48', /checkout/src/libcore/slice.rs:578\n\nDescription:\nArch Linux, `alacritty-git`, happens with both rust stable and nightly from rustup.\n\nDiscussion:\nI am running into the same problem, it seems to crash in glyph loading : I tried to do a `git bisect` on this, and I found that 4b4a187fbd0cd47cdf6be5614ccfa473f356dac0 is responsible. But this commit does not build :\n---\n@gutigen, you still can use 28700ed for the moment but I don't know how to tell it to AUR.\n---\n@stammw use `source=($pkgname::git+https://github.com/jwilm/alacritty.git#commit=28700ed)` in PKGBUILD\n---\nFor me this happens if the `x`/`y` offsets (`font.offset.{x,y}` in `alacritty.yml`) are so big that the glyph size becomes negative. (I'm not sure if I'm using those words correctly; I know very little about font rendering.)\n---\nI just checked out master, and the problem seems to have disapeared.\n---\nWas testing out Alacritty earlier today and ran into this. Built from master (using Rust 1.16.0), running on Arch Linux, and it only happens when I set the font size to something smaller than `10.0` (though the \"breaking point\" appears to be at `9.5` but I initially wanted to set it to `9.0`).\n---\nYou've got what may be a duplicate bug here: #185 I'll cross-post some digging I did (seems to have to do with pitch and width calculations, and perhaps width being larger than pitch?): I've run into this issue as well (specifically the 'index 68 out of range for slice of length 64' version of the panic). Here is some gdb info at the point where the panic occurs in font/src/mod.rs: Note that pitch = 4, while the difference between start and end (i.e. bitmap.width()) is 8. On our last iteration, we end up here (some variables omitted): Not sure how best to fix it. My stopgap is to replace line 216 in mod.rs with: ...but I'm sure there's a better way. Let me know if there is any other info from the trace you need."}
{"project_id": "Alacritty", "bug_id": "16", "source_type": "github", "label": "Other", "llm_input_text": "Title: Vim theme background colours not rendered properly\n\nDescription:\nI have the [gruvbox](https://github.com/morhetz/gruvbox) theme setup for vim but the background colour does not seem to be rendering properly. Alacritty on the left vs iterm2 on the right\n\nDiscussion:\nThis should be a duplicate of #85\n---\nI also have colour issues with vim. I use the solarized dark theme in alacritty and vim. Works in st and gnome-terminal. ![vimissue](https://cloud.githubusercontent.com/assets/492753/21737361/2bb3c832-d478-11e6-96ed-a880de6523a2.png)\n---\nThanks @d3rrial I will close this issue and link to it in #85.\n---\n@NickeZ Your issue is probably a separate one: alacritty re-defines terminal colors in its config file. By default, white is 0x424242 for example, which is absolutely ludicrous. I'd recommend you try defining those colors by hand again within the .alacritty.yml config file, in accordance with your solarized dark theme. Maybe also open a new issue. I'm interested to see what comes of this.\n---\nShould this be closed? #85 is closed but with the current build In `vim` I can see background colors not rendering correctly when I page up/down: ![apr-18-2017 21-02-00](https://cloud.githubusercontent.com/assets/2729079/25162895/f3d5093c-247a-11e7-8670-8fc6aa2356da.gif)\n---\nCan confirm, I have the same bug with current master. My repo does include the supposed fix commit a66d19f6337e1dfc756680b8fcb960f84453e783. I've configured Vim to use 24bit colours, and can verify with `vim | cat -v` that it's sending the 24bit escape codes (`^[[38;...m` and `^[[48;...m`).\n---\nAlso witnessing the issue on master today.\n---\n@lwouis I thought we had an issue tracking this specifically, but I can't seem to find it right now.\n---\nWould someone experiencing this issue mind taking #720 for a spin? I believe it should fix this issue.\n---\n@jwilm Can confirm #720 fixes vim background issue for me\n---\nSame here. #720 fixes it.\n---\n#720 fixes it for me too. Thank you! It also fixed the basic background color which was not taking into account outside of Vim. Amazing! On the left is before #720. On the right is with #720. ![selection_010](https://user-images.githubusercontent.com/106195/29208550-c98fedc6-7e8a-11e7-9a84-fa1072f3895a.png) Opening a file in Vim without scrolling ![selection_011](https://user-images.githubusercontent.com/106195/29208549-c98e996c-7e8a-11e7-964d-fbda8adea047.png) Opening a file in Vim, then scrolling down ![selection_012](https://user-images.githubusercontent.com/106195/29208548-c98bf568-7e8a-11e7-8435-fd4f13512860.png)"}
{"project_id": "Alacritty", "bug_id": "17", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: \"out of bounds\" crash - access beyond last row?\n\nDescription:\nRunning the irssi irc client continuously in tmux on a remote machine causes alacritty to always crash after irregular amounts of time. The window has 81 rows, so it seems something is trying to access rows that don't exist. Alacritty version is 9f79d72109b5745c32a8c0bdd4d17799f827fbba from github. Run as: Full backtrace: The durations after which crashes have occurred: Running on OSX 10.11.6.\n\nDiscussion:\nAdded to see what's going on, and this is the result: so the cursor appears at column 0 one line beyond the screen. Hope it helps in tracking the error down. The error is triggered when my network connection has issues and my ssh session - running irssi in tmux - goes down. I'll figure out how to set `cursor.line` to `grid.num_lines() - 1` for now to see what happens.\n---\nAn instance with the solution in 559cfabbe198dbbf21804c201dca46d070eb6cf6 has been running for over a week now without any crashes. Before applying the fix, alacritty would crash several times per day. It can be tested with: which sets the scroll region to 10 - 20, positions the cursor on line 25, and emits linefeeds, or - simpler - I also noticed that a test for newline_with_cursor_beyond_scroll_region was added in 87468b5c00858684ab0a17f9e1821aa374f74924 but not activated. Maybe it can be done with:\n---\nThis was resolved."}
{"project_id": "Alacritty", "bug_id": "18", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Problem loading fonts\n\nDescription:\nHello, I am trying to use this font: [ypn envypn](https://ywstd.fr/p/pj/#envypn) My configuration looks like this: But i get the following error: Did i miss something? I tried to adjust the size and the offset to see if there would be any difference but it's the same, is this a bug?\n\nDiscussion:\nHmm, would you mind running this again with `RUST_BACKTRACE=1 alacritty`? Hard to say what the problem is with the short error.\n---\nI think that this might be fixed with #590. At least for me, I got the same error when I tried to use bitmap fonts before that was merged. But now it seems to be working nicely :)\n---\nSorry for the delay.. Ok, i recompiled alacritty and now works if i set the font size to 10.0. But the font which alacritty displays is the version with the pixelsize set to 13, I tried to put the pixelsize to 15, but i don't know how. I tried with a lot of numbers from 10 to 20 and i can't display the correct terminal font size. Thank you for the response.\n---\nYeah, I also had that problem. It took a while for me to figure out which size the font wanted. @jwilm In most other programs I used, it either auto adjusts the size to the nearest correct one, or it prints out the available font sizes. Perhaps alacritty could do something like this? I would be really happy if it for example printed out this instead:\n---\nWith [bitmap] `xos4 Terminus` font the only working `size` in range 1.0-50.0 is `9.0` and alacritty says: and it only works if dpi is default 96x96. If I set dpi to 48x48 or 192x192, for example, or change size to any other value, alacritty says So I assume the issue is not really about uninformative error message, but about really strange font matching (or https://github.com/jwilm/alacritty/issues/619 should be reopened, if it's a separate issue). There are multiple font sizes installed here: so I don't really understand why size 12 is always used, why it can be used with `size=9.0` (not 12.0) and why dpi setting affects this at all.\n---\nI'm also experiencing this issue with Terminus, but no sizes seem to work for me.\n---\nI can confirm that `xos4 Terminus` is working for me with `size: 9.0`.\n---\nStill having the same issue with `ypn envypn` font.\n---\nRunning with the environment variable `FC_DEBUG=16777215` prints a lot of info from `fontconfig`. BTW, tried freetype2's FT2_DEBUG (i.e. FT2_DEBUG=\"any:10\") but it did not yield anything. I think that the first issue is that `FcFontMatch` in fontconfig does not pick the right PCF file. When configuring alacritty for the Terminus font with size 32.0, `/usr/share/fonts/terminus/ter-112n.pcf.gz` gets picked (size 12). This, regardless of the font size that is passed to the match. I have lots of other `ter*.pcf.gz` files for other sizes, of course, and fontconfig prints _something_ about them. The second issue is the font size disagreement inside freetype2 or around alacritty's use of it - I am not sure, have not delved into these pieces of code too much.\n---\n[Tamzen](https://github.com/sunaku/tamzen-font) used with `Tamzen for Powerline` works with `size: 9.0` but nothing else\n---\nI've managed to fix this problem in pull request #776, more testers are welcomed."}
{"project_id": "Alacritty", "bug_id": "19", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Prevent decreasing font size beyond the minimal value\n\nDescription:\nLinux, X11. Extracted from https://github.com/jwilm/alacritty/pull/949#issuecomment-353494090 ----- I played with holding Ctrl +/- and found a silly issue, posting just in case you can immediately think of a simple fix, otherwise I guess it's not worth looking into: - Hold Ctrl + . The value reaches its maximum value (274 in my case) and stays there, pressing Ctrl + further has no effect. Pressing Ctrl - once reduces font size to 272. - Now hold Ctrl - . The value reaches its minimum value (2 in my case), but further presses of Ctrl - change the value to 2, again and again. If I press Ctrl - 10 times after I already reached the minimal value of 2, then pressing Ctrl + once will have no effect - the font size will stay at 2. I have to press Ctrl + 10 times to compensate for my earlier actions, before further presses of Ctrl + begin to actually increase the font.\n\nDiscussion:\nI can confirm this too.\n---\nI don't believe that #949 fixed the issue described in https://github.com/jwilm/alacritty/issues/842#issuecomment-344752082 The issue is with this call to Atlas#insert. If the font size is increased until it is too big to fit into a single atlas, Atlas#insert will always return an Err. This leads to load_glyph recursing infinitely, since inserting the glyph into an Atlas will never succeed.\n---\nThanks @Aaron1011. I reopened the other issue.\n---\n@Aaron1011 It does actually fix the issue tho. The issue was never that the glyph was too big for a single atlas. Have you tested it out yourself? With #949 the crash doesn't happen anymore when increasing font size. The problem was that the atlas never changed, so there was never a new atlas that was created. In theory you could run into problems with glyphs being too big for a single atlas, but I don't think that's even possible to happen because of gpu restrictions. I've played around with it a bit myself and the max font size goes up to a limit and then just stops. The worst thing I was able to reconstruct was that a few glyphs didn't show up anymore because my gpu driver was spouting errors about textures being too big. I don't think fitting a single glyph into an empty atlas has ever been the actual issue. Or can you still reproduce the issue after #949. I did initially play with changing the recursion strategy, but it turned out for me that after I fixed the obvious problem, all the other issues were resolved too."}
{"project_id": "Alacritty", "bug_id": "20", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Invoking Paste/PasteSelection commands in editor (vim, nano) mangles pasted text with existing text\n\nDescription:\nA screencast comparing gnome-terminal (left) to alacritty (right) will do better than words: ![alacritty-paste-in-editor-inserts](https://user-images.githubusercontent.com/522085/29365327-90b114c0-8264-11e7-9948-abfe3bc64387.gif) The key_binding I invoked is visible on the screencast, it is: ... and I tried `PasteSelection`, with the same results. Am I doing something wrong or is it a bug? This is alacritty master @ 4e9b1c590e8b0990f5f43fa9d7c53a31a92840a8 vs. gnome-terminal 3.18.3, no tmux, under Ubuntu 16.04.3 LTS.\n\nDiscussion:\nInteresting bug, I wondered why I haven't seen it before, apparently I can reproduce it in `nano`, but not in `vi`, `vim` or `nvim`. Curious why...\n---\nI did some testing and if you have `\\n` you get smashed lines, `\\r\\n` you get doubled lines, `\\r` you get correct lines. Demonstration [![thumbnail](https://i9.ytimg.com/vi/b7vCdwta0Zo/default.jpg?sqp=CKDr5c8F&rs=AOn4CLASaFp_WmXuGwTk6VAL7SIbP9daRw)](https://youtu.be/b7vCdwta0Zo) Not sure whether this info helps though.\n---\nSame goes for other curses editors like _joe_. It also results linefeeds to be eaten, so multiple lines become One (like a coherent group of superheroes ;-)).\n---\nOn a brief observation what I see is that alacritty inserts **\\n** within the paste buffer while xterm inserts **\\r** there. I have the feeling that CR and LF is mixed up on pasting (both reading and writing side, possibly).\n---\nWhen pasting a single `\\n`, `nano` behaves as if `^J` or `F4` (justify paragraph) had been pressed: Before pasting: After pasting: Pasting `before\\nafter` seems to give the same results as typing `before after`:\n---\nIn case it matters (probably not, but it may spare duplication of efforts): I verified (on macOS) that `nano` does *not* set alacaritty in bracketed paste mode (`nvim` does). Altering `input.rs` to always force bracketed paste does alter the behaviour in `nano`, but unfortunately the new behaviour, too, is incorrect. Use `echo -e '\\e[?2004h'` if you are curious to test it yourself: no need to alter `input.rs` and recompile (see https://en.wikipedia.org/wiki/ANSI_escape_code#Bracketed_paste_mode).\n---\nApparently, non-bracketed pasting *is* the issue here. When the \"enter\" key is hit, a `CR` (`^M`) is generated (see http://invisible-island.net/xterm/ctlseqs/ctlseqs.html). In non-bracketed mode, `LF`s (`^J`) in pasted data have to be replaced with `CR`s in order to simulate keypresses. In non-bracketed mode, applications have no way of distinguishing if data comes from the keyboard or the clipboard, so it seems sensible that a terminal must simulate keypresses. To me it is not 100% clear to what extent a terminal is supposed to do that (ie: whether octets corresponding to other control characters or maybe to bytes with the high bit set should be processed). Maybe data bytes should be interleaved with `^V`s? Or maybe bracketed mode is how pasting is supposed to work and applications that don't use it are at fault? Anyhow, replacing `\\r` with `\\n` seems an improvement and it is what [jediterm](https://github.com/JetBrains/jediterm) does."}
{"project_id": "Alacritty", "bug_id": "21", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Alacritty's `-v` flag does not work\n\nDescription:\nAlacritty's `-v` flag is used to help with debugging issues and print what is currently going on in the application. This should provide similar output to `RUST_LOG=... alacritty`. However with recent versions of alacritty, the output of `-v` is completely empty. This should be fixed so that `-v` outputs debug information again. The different levels of this flag (`-v`, `-vv`, `-vvv`) are all broken and should be fixed to recover the original functionality. So `-v` should print minimal debug information and `-vvv` should print everything we have.\n\n"}
{"project_id": "Alacritty", "bug_id": "22", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Scrolling region regression\n\nDescription:\nScrolling regions are broken when there's a fixed bar at top _and_ bottom. This is best demonstrated by `htop`.\n\nDiscussion:\nThis is most easily reproduced by opening two buffers in vim using the tabbed layout which should cause a fixed line to appear at top and bottom of screen. Next, hit control up/down in one of the open buffers (assuming it's got lots of lines), and half the screen should remain empty.\n---\nResolved."}
{"project_id": "Alacritty", "bug_id": "23", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Cursor disappears on first column in vim\n\nDescription:\nMoving the cursor down in vim while on the first column causes the cursor to disappear until moved to the second column of a non-empty line. This is on macOS or Linux, vim or neovim, on the scrollback branch at 14a76ec5c78fde8d4fbf1d78e0108ded13a7edc2. Reproduce: `vim <(echo 'one\\ntwo\\n\\nthree')` and scroll down.\n\nDiscussion:\nThanks for filing the issue! I also noticed a problem of the cursor disappearing when using vim-fugitive and `:Gblame`.\n---\nThanks, @jwilm.\n---\nThis was fixed."}
{"project_id": "Alacritty", "bug_id": "24", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Scrollback: `reset` Still Allows Scrollback\n\nDescription:\nSystem: X11 on Arch Linux Using the latest scrollback branch, `reset` still allows me to scroll up afterwards, assuming you initially activate the scrollback ability by entering enough text vertically. On a related note, `clear` may also need to be looked at, but I'm unsure if there's a spec for it, as both `xterm` and `urxvt` handle it differently. On `urxvt`, I'm able to scroll back up assuming I've filled the vertical space enough to allow scrolling, while `xterm` seems to never allow me to scroll back, regardless of the amount of text entered.\n\nDiscussion:\nThanks for the report!"}
{"project_id": "Alacritty", "bug_id": "25", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Scrollback: `reset` Still Allows Scrollback\n\nDescription:\nSystem: X11 on Arch Linux Using the latest scrollback branch, `reset` still allows me to scroll up afterwards, assuming you initially activate the scrollback ability by entering enough text vertically. On a related note, `clear` may also need to be looked at, but I'm unsure if there's a spec for it, as both `xterm` and `urxvt` handle it differently. On `urxvt`, I'm able to scroll back up assuming I've filled the vertical space enough to allow scrolling, while `xterm` seems to never allow me to scroll back, regardless of the amount of text entered.\n\nDiscussion:\nThanks for the report!"}
{"project_id": "Alacritty", "bug_id": "26", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: scrollback: thread 'pty reader' panicked at 'attempt to subtract with overflow', src/index.rs:168:28\n\nDescription:\nalacritty @ scrollback , 8e8ecdd, debug build ` in the new debug alacritty window: `\n\nDiscussion:\nThis probably only happens in alacritty verbose mode.\n---\nI can reproduce it both with and without verbose output. However it only happens in debug mode for me, not in release mode. I'll be looking into it, thanks for the report.\n---\nThis bug's origin is [here](https://github.com/jwilm/alacritty/blob/scrollback/src/ansi.rs#L982) and can be reproduced by running `printf '\\e[1000L'`. I'll look into writing up a quick fix."}
{"project_id": "Alacritty", "bug_id": "27", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Invert escape sequence incorrect\n\nDescription:\nThe command `echo -e \"Normal \\e[101;91mTest \\e[7mInverted\"` will print `Inverted` with the default foreground color as background and the default background color as foreground. The correct behavior would be to print it the same as `Test`. This bug is due to the following code: https://github.com/jwilm/alacritty/blob/master/src/term/mod.rs#L385-L389\n\nDiscussion:\nThe current behavior _should_ match urxvt. Is this a case we didn't cover?\n---\nThis [script](https://github.com/jwilm/alacritty/blob/master/scripts/fg-bg.sh) should check every combination Edit: inlined\n---\nIt does match `urxvt`, however I think that's simply because `urxvt` is doing this incorrectly. ![](https://u.teknik.io/VjFKF.png) (Top to bottom: Alacritty, urxvt, xterm, termite) I'd personally trust the behavior of XTerm and VTE more than urxvt. It seems to me like Alacritty is following a bad example here. **EDIT**: Also, just to list another advantage: It seems like currently we're trying to match urxvt, but this requires adding an additional special case to our codebase. If we'd stick with XTerm's behavior the code would actually be simpler from what I can tell.\n---\nOkay, I've compared `urxvt`, `XTerm` and `Alacritty`, I've excluded `Termite` because it does not invert the cell color for selection. I'd say `urxvt` has some edge-cases where things are weird and it does not handle the `Hidden` attribute at all (neither does `Alacritty` at the moment). In contrast `XTerm` is very consistent and supports the `Hidden` attribute. In `XTerm` no matter which circumstances are present, the foreground color and background color are always inversed upon selection, even if the cell is `Hidden`, the foreground color which would be present is still used for the inverse. Rendering text with the same foreground and background color on top of each other also doesn't exhibit any special behavior, it is rendered as \"invisible\" (see Screenshot in previous comment) and when inversed with selection, the cells simply do not change at all (it inverses from red on red to red on red). I think this makes the most sense, it should be easy to implement and come without any surprises for the user. I'll send a PR which implements this behavior if anyone is interested in giving it a shot.\n---\nbtw, did you test with transparency? Some of our logic is specifically around handling that properly.\n---\nI did not, but that's a great point, I'll throw that in too."}
{"project_id": "Alacritty", "bug_id": "28", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: [Regression] broken `htop` display\n\nDescription:\ncurrently affected master: 715d4f8 working revision: 82c9235 ![spectacle qq8577](https://cloud.githubusercontent.com/assets/3148759/24270236/4009e116-100c-11e7-9a1a-c3ce0ffb343c.png) Steps to reproduce: 1. `htop` 2. wait a few seconds bisect: 96a1503040787006a45a69dc55916d983d96421e is the first bad commit\n\nDiscussion:\n@zetok, I can't reproduce this on the latest master. Can you retest? If it's still occurring, are you running this under Linux or Mac? (Could be render system dependent.)\n---\n> Can you retest? I did test against latest master. > If it's still occurring, are you running this under Linux or Mac? (Could be render system dependent.) Linux.\n---\nperhaps relevant, my `alacritty.yml`:\n---\nSomething in between 715d4f8...7bc1691 improved situation, most likely a66d19f6337e1dfc756680b8fcb960f84453e783. There are still missing characters on 7bc1691: ![spectacle tj7267](https://cloud.githubusercontent.com/assets/3148759/25053461/4c0c8366-214f-11e7-9165-6a9b1595f7dd.png) NB: on #494 there are no missing characters.\n---\nActually, nvm, situation didn't improve, now it just takes a lot longer (a few minutes) for `htop` to be completely broken.\n---\nIs there any other info you can provide? I cannot reproduce this on latest master. * Are you resizing the window at all? * Approx window dimensions * OS * htop version * TERM value Not sure what else to ask for right now. I've been running htop for a while now with no issue.\n---\nI can reproduce this on d372f2e. It only happens for me when using tmux. (It doesn't occur when using tmux in roxterm.) > - Are you resizing the window at all? No. Resizing seems to force a refresh and gets rid of the corruption temporarily. Forcing a refresh in tmux (C-b r) does the same thing. > - Approx window dimensions It seems to happen at any window size, but more frequently when there are fewer columns. 40 (rows) x 119 (columns) is one size I tested that seems to corrupt quickly, for example. > - OS Arch Linux > - htop version 2.0.2 > - TERM value screen-256color\n---\nI see similar artifacts on macOS when using a TERM of xterm-256color or screen-256color. For the latest version of tmux you have to use tmux-256color. When I use that terminfo definition everything renders perfectly as expected. See the following describing this on Arch Linux: https://wiki.archlinux.org/index.php/tmux#Setting_the_correct_term\n---\nI still see the problem when I set that to tmux-256color.\n---\nHas anyone had this happen _outside_ of tmux?\n---\nYes, i have these bugs without tmux.\n---\n>Has anyone had this happen outside of tmux? Yes, never used tmux/screen, just bare alacritty. - Are you resizing the window at all? No. - Approx window dimensions 66% and 50% of screen width under ~default i3 on 1920x1080 display - OS: Gentoo - htop version: 2.0.2 - TERM value: xterm-256color - default value from alacritty's config >Not sure what else to ask for right now. I've been running htop for a while now with no issue. I think that issue might have something to do with htop showing one or more cores being utilized at 100%.\n---\nOut of curiosity, of those who can still reproduce this bug, with or without tmux, could you try to see if you can also reproduce #540? I've just tried on latest `master` https://github.com/jwilm/alacritty/commit/32248471667dbdea33fca5e12fa0cb8a43482106, I can also confirm weird rendering of `htop`, but it happens (much more often / only) inside tmux. The #540 is however reproducible both with and without tmux, and I'm still wondering if this is the same bug. Look at the missing rows and at the `USER` column, `tmux` is on the left. ![alacritty](https://cloud.githubusercontent.com/assets/1177900/26034837/1bb7b92a-38c3-11e7-9f42-0fdb9b174df2.gif)\n---\n@maximbaz what's your terminfo file for tmux-256color look like? Seems like it might be declaring a feature that tmux doesn't support.\n---\nHm, is this the file `/usr/share/terminfo/t/tmux-256color`? It consists of a bunch of escape sequences, I'm certain I haven't modified it ðŸ™‚ I've just tried tmux with the default config (where $TERM is `screen`) and the default config with just one override (`set -g default-terminal xterm-256color`, which makes $TERM `xterm-256color`), in both cases I see that same refreshing issue in htop."}
{"project_id": "Alacritty", "bug_id": "29", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Terminal alternate mode is toggled, not set.\n\nDescription:\nTry running `tput smcup` or `tput rmcup`. Both do the same thing. **Toggle** alternate mode. `smcup` is supposed to activate, and `rmcup` disable.\n\n"}
{"project_id": "Alacritty", "bug_id": "30", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Touchpad scrolling is janky\n\nDescription:\nI don't know exactly what's going on, but when I scroll with the touchpad it requires me to scroll a lot before it will even register, and then it scrolls a ton at once.\n\nDiscussion:\nAccording to hwinfo it's a \"ETPS/2 Elantech Touchpad\", if that helps at all\n---\nCould you run alacritty with `alacritty --print-events`, try scrolling, and pastebin the log? My initial guess is that we are getting funny data out of winit.\n---\nHuh, I experience that too, although I always blamed tmux for this - but no, in sakura terminal the scrolling is smooth. The log: https://gist.github.com/maximbaz/7cc8521f033e04a53924416f26332164 What happens in the log: - Alacritty starts, I type \"tmux\", then \"tree\", then cancel with with Ctrl+C after a bit. - Scroll up with touchpad with my usual speed of scrolling (nothing is being scrolled in tmux) - Scroll up much faster (tmux begins to scroll up) - Scroll up with usual speed again (nothing is being scrolled in tmux) - Scroll up much faster (tmux scrolls up) - Close tmux and then terminal with Ctrl+D.\n---\nThanks @maximbaz. Here's the interesting part. All of these events have fractional line deltas. Alacritty [assumes that they will be integer values], and the floats are truncated accordingly. This is obviously wrong. We'll need to track a bit more state to get this right. [assumes that they will be integer values]: https://github.com/jwilm/alacritty/blob/492d1bd3d56af94d4d1d05e17fb8a6acf354a170/src/input.rs#L354-L364\n---\nHeh I can certainly see why it is made like that ðŸ™‚ This is a one stop of a scroll with an external mouse: And this is one stop of a scroll with touchpad: I wonder if you have a general idea how to normalize values coming from touchpad? ---- It is also surprising that scrolling with mouse produces way more WindowEvents than scrolling with a touchpad. Mouse, full list of events for one scroll stop: Touchpad:\n---\n@Ralith is this behavior normal for trackpads on x11? (**TLDR:** external mouse wheel gives integer line deltas, trackpad gives fractional line deltas). I'm trying to figure out if this should be resolved in winit or Alacritty. The trackpad events almost seem like they should be generating a pixel delta instead of line delta.\n---\nThis is the intended behavior. Alacritty should not be truncating scroll values; if they were guaranteed to be integers, then winit wouldn't use floats there in the first place. The meaning of a fractional line delta is literally a fraction of a line (or more generally, a scroll unit). Smooth scrolling devices are not in general directly related to pixels, after all.\n---\n@Ralith thank you for the clarification! For some reason I had it in my head that smooth scrolling would always use pixels as a reference.\n---\nIs this a new issue? I just started using alacritty and it just so happens that I encountered this issue just now.\n---\n8a65870 fixes this. I'm unfamiliar both with Rust and with alacritty's structure, so this is indubitably the wrong way to do it (the state is getting passed all over the place, I used terrible names, and it's largely just a result of changing stuff until the compiler was happy without really knowing what I was doing). A review of how I should have done this would be very welcome :)\n---\n@lheckemann not a new issue, but I don't think a lot of people were likely to encounter it. It requires running x11 on a laptop with a trackpad that generates fractional line deltas in an application that supports scrolling with someone who uses the mouse in terminal. Probably why is hasn't been reported until recently. Love that you've put together a patch for it! I would be happy to provide feedback. Would you mind putting up a PR so we can use the GitHub review tool on it?"}
{"project_id": "Alacritty", "bug_id": "31", "source_type": "github", "label": "Algorithm :: Resource/Memory Leak (CWE-400)", "llm_input_text": "Title: Excessive memory usage/leak during selection with less\n\nDescription:\n> Which operating system does the issue occur on? Linux X11 On Alacritty 0.2, when working with large text files (in the order of millions of lines) I am using as I don't want the terminal itself to deal with such large numbers of lines. Nonetheless, is set to 100000 lines. When I select lots of text in less using the mouse cursor, and exceed the upper or lower screen edge with the selection, Alacritty freezes and starts continuously consuming more and more memory. I managed to SIGSTOP it at 25.5GB, and it would've killed my system had I not managed to do that. It seems something related to selections triggers a severe memory leak or unbound loop. I will try to provide better repro steps when I have the time.\n\nDiscussion:\nOk, managed to repro. - Open with a text file that contains a few screens worth of lines at least. - Scroll down a few screens - Select everything with the mouse, from bottom to top - Keep mouse selection button pressed - Scroll up using the mousewheel, **fast**, (mwheel events needs to be passed through to less) - When less reaches the top, release mouse selection button, while still scrolling up - Alacritty freezes and starts consuming memory\n---\nWow, sounds bad. Thanks for the report. Prioritizing as high.\n---\nI was trying to reproduce this earlier. I'm not sure if it's related but there also seems to be a behavior issue with the selection if you scroll down at least one line in something like `less`, then select at least two lines including the status line at the bottom, then scroll back up.\n---\nFurther info: Tested on 0.2.0 with commit 1887722ef5b6ac1 (not tested without) and 0.2.1, both are affected. I've also added that you have to release the selection button to the repro steps.\n---\nVideo of reproduction on my system http://cl.ly/3142fd7366ed.\n---\nI have same issue, happened during text selection, but I'm not sure whether I was in less at the time. Anyways, I never had time to stop it, so it brought down the whole system.\n---\nWith the commit applied, I can't reproduce the bug anymore. Thanks!"}
{"project_id": "Alacritty", "bug_id": "32", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Inverted Selection when Faux Scrolling\n\nDescription:\nRather than attempt to describe the problem in detail, here are the steps to reproduce. 1. Run `man man` 2. Scroll down at least one line 3. Select the some text from both the status line and the line above it 4. Scroll up You should see the selection become inverted.\n\n"}
{"project_id": "Alacritty", "bug_id": "33", "source_type": "github", "label": "Assignment :: Initialization (CWE-665)", "llm_input_text": "Title: Alacritty won't start if window.dimensions.columns and lines is 0\n\nDescription:\nI have following in my config: This seems to be breaking alacritty now with: I think it's broken by change: https://github.com/jwilm/alacritty/commit/d05d16f023b27fc4707478668db73d6860918956#diff-f3f442280fb5120848272b348120ec52L156 Although [comment in the default config](https://github.com/jwilm/alacritty/blob/master/alacritty.yml#L19) says the `0` is valid:\n\nDiscussion:\nI was not aware that specifying 0 was allowed here. I would have expected optional values to use `Option` instead. I'll fix this asap to make it work again, but in the future there might be a better stylistic approach to optional values.\n---\nWould you mind testing if https://github.com/jwilm/alacritty/pull/1782 works?"}
{"project_id": "Alacritty", "bug_id": "34", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Selecting large amounts of text makes highlight disappear\n\nDescription:\n> Which operating system does the issue occur on? Linux X11 When selecting text and scrolling at the same time using the new scrolling->history feature, there is a visual bug concering the selected text. When more text is selected than fits on the viewport, and the viewport is scrolled so that **only** selected text is visible, the selection marker (inverted colors) disappears. If the viewport is scrolled so that only parts of its contents are selected, the selection marker shows up fine.\n\nDiscussion:\nThanks for the report! I believe that nobody actually ever tested selection while scrolling, since it's a bit awkward to do with a mouse. Currently it seems like the selection only updates during mouse movement, not when scrolling. But since scrolling changes the text under the cursor, it should also update the selection. I believe implementing this should work around the issue of selection disappearing and it should provide the added benefit that selection during scroll feels more responsive.\n---\nOkay, so it turns out my original comment on this issue was a bit misguided. The selection not updating when scrolling and the issue reported here are entirely separate. **Edit:** See #1598 for the other issue I've mentioned in here and #1597 for a solution to this issue.\n---\nConfirmed fixed. Thank you!"}
{"project_id": "Alacritty", "bug_id": "35", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Cursor not hollow when window starts unfocused\n\nDescription:\nPlatform: Linux X11 (i3 specifically) When launching a new instance of alacritty, the cursor is a solid block despite the window being out of focus (I have `no_focus [tiling]` set in my i3 config). Focusing the window, then un-focusing it behaves correctly. For reference, the related settings are the defaults of `cursor_style: Block` and `unfocused_hollow_cursor: true`.\n\nDiscussion:\nThanks for the report! Sounds like a bug.\n---\nhttps://github.com/jwilm/alacritty/pull/1569 resolves this issue on i3. I'd love some testing on macOS/Wayland if possible, but it should be good to go the way it is."}
{"project_id": "Alacritty", "bug_id": "36", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Underlining \"jumps\" spaces between underlined text\n\nDescription:\n## System | | | |------------------|-------------------------------| | Operating System | Arch Linux | | Rust Version | Stable, 1.31.1 | | Display Server | X11 | ## Summary Ever since proper underlining was implemented in #1078, standalone Alacritty renders underlines that \"jump\" the spaces between underlined sections of text (see image below). Using #1921 does not change this behavior. ![image](https://user-images.githubusercontent.com/28582702/50556234-3888fd00-0c8b-11e9-9504-75f4daa90d52.png) ## Extra I only noticed this because I fired up an Alacritty instance outside of tmux. For whatever reason, tmux properly handles the underlines between underlined-but-not-connected sections of text. See below for \"expected\" output, produced from within a tmux session: ![image](https://user-images.githubusercontent.com/28582702/50556586-f0200e00-0c8f-11e9-9a29-34cfa56ad2ee.png) Potentially relevant `alacritty -vvv`:\n\nDiscussion:\nFixed in https://github.com/jwilm/alacritty/pull/1961. Thanks for the report!"}
{"project_id": "Alacritty", "bug_id": "37", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: [regression] padding is breaking few things\n\nDescription:\nUsing f182afa > Which operating system does the issue occur on? OSX. This is a regression. ### 1. the documentation says it's using non-DNPI-scaled values But I don't think that's true. For example, `18` looks like `72` hardware pixels. ### 2. the last line of the terminal is not rendered. STR: - set padding y to `2` - run terminal - press enter until the prompt reaches the last line - press enter one more time, see how the prompt is hidden ### 3. the mouse coordinate is calculated wrong - set padding y to `20` - run terminal - type `man man` - double click on any word, see how the wrong word is select (one line below)\n\nDiscussion:\n8161798 doesn't have these issues.\n---\n@paulrouget Could you share the output of `alacritty -v`? Specifically the cell size, window size and number of columns and lines. Also would you mind testing https://github.com/jwilm/alacritty/commit/dba3cccf6948fb993e02d03ca8891fbc7f6cd3e6? If the issue doesn't happen with that commit, it might be good to just revert the last change temporarily to fix the stable release. Also it is true that the padding is scaled by DPI now. The documentation needs to be updated.\n---\nNote that I was able to reproduce this on my system, so it's not necessary anymore to produce further debug output. I'll try to fix this asap."}
{"project_id": "Alacritty", "bug_id": "38", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Crash when I `cat` a file\n\nDescription:\nOn windows, I tried cat attached txt file and it crashed. [protonmail_gray.txt](https://github.com/jwilm/alacritty/files/2488781/protonmail_gray.txt)\n\nDiscussion:\nThe only thing I can see with this which might cause issues is that it's missing a newline at the end of the file. That shouldn't crash anything, but would you mind adding a newline to the end of the file, just to troubleshoot where the issue is coming from? Also, just to make sure: When you say 'it crashed', you're talking about Alacritty? Or are you talking about `cat`?\n---\nI tried with missing newline and Alacritty still crashes, the window suddenly disappears [protonmail_gray.txt](https://github.com/jwilm/alacritty/files/2488813/protonmail_gray.txt)\n---\nDoes `cat` work with any other file? It looks like there should be nothing special about the new version of the file you've sent. No special characters, escape sequences or missing newlines.\n---\n[tags.txt](https://github.com/jwilm/alacritty/files/2488826/tags.txt) This file works fine, it'sâ€¦ really strange ^^'\n---\n@Geobert When starting Alacritty from a different instance of Alacritty and you make it crash, is there any error output?\n---\nUnfortunately, no :(\n---\nOh, that seems quite unusual. So Alacritty just closes and you get thrown back to the shell in the terminal emulator you've used to start it? Is the return code `0`?\n---\nOo yes it isâ€¦ this is beyond weird ![image](https://user-images.githubusercontent.com/72570/47111192-c20f5e00-d24a-11e8-8b46-6da8a6c630df.png)\n---\nI can't test on Windows, but it looks like Alacritty chooses to close down itself. It probably shouldn't be super complicated to figure out why that is, but it would require some debugging. Maybe @zacps can take a look at this? Would be interesting to see if this can be reproduced first.\n---\nI suppose on your system, it does not crash?\n---\nHi. @chrisduerr, I noticed both protonmail_gray.txt start with Byte Order Mark `EF BB BF`. Is it problem?\n---\nGood catch @PrsPrsBK I've changed the encoding and it does not crash any more!\n---\n@Geobert It does not crash on my system, since I'm running Linux. But great catch @PrsPrsBK. Not sure why this would be a problem though.\n---\n@Geobert It's nice! @chrisduerr I had bad experiences due to BOM. I see, it need to see `cat`'s output (if exists), if I would like to know in detail. thanks. *added later* I did not experience the problem, I had just noticed BOM and wrote."}
{"project_id": "Alacritty", "bug_id": "39", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Can't clear warning/error with `clear` or `CTRL-L` in tmux\n\nDescription:\nWhich operating system does the issue occur on? Fedora release 29 (Twenty Nine) If on linux, are you using X11 or Wayland? X11 The warning/error which is displayed by Alacritty at the bottom of the terminal doesn't go away, if I press `CTRL-L` or type `clear` inside the terminal. It obviously works, if I'm outside of tmux, just not inside.\n\nDiscussion:\nThanks for reporting this issue. I haven't considered tmux when adding the keybinding, but it makes sense that there might be some conflicts here. I'm not sure if there would be a way to fix this so that `C-L` and `clear` work, but it should definitely work to add a new keybinding, so hopefully that will fix it for everyone.\n---\nI've looked into which escape sequences are sent in `tmux` when running the `clear` command, just to check if there's something Alacritty could hook into to remove the errors and warnings when running that. Based on my testing, there's no nice escape sequence sent which would allow for that, so I'd probably just recommend adding a new key action which then can be used. Just for documentation, these escapes are sent when running `clear` inside of `tmux` on my system:\n---\n> Based on my testing, there's no nice escape sequence sent which would allow for that, so I'd probably just recommend adding a new key action which then can be used. Yeah, no worries, I'm just going to do that. Maybe an option inside the config to disable the warning displayed on the bottom would be a good idea? I don't know.\n---\n@OkanEsen I'm not a huge fan of that idea. These warnings should be fixed, rather than ignored. Most cases this is something which can be easily resolved by the user.\n---\nYeah, just gave it a second thought and I agree with you. I think the issue can be closed, if that's okay.\n---\nI'll close it with the PR for the action. I'll open that in a sec.\n---\nI've opened the PR (https://github.com/jwilm/alacritty/pull/1814), feel free to test if this resolves the problem for you."}
{"project_id": "Alacritty", "bug_id": "40", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Selection misses first character\n\nDescription:\nSelecting in alacritty often misses the first character. Other terminals (such as urxvt and xterm) always include the first character in the selection even if only part of it is selected. Edit: I should add that this was tested on scrollback@4631ca4 Alacritty: ![alacritty_selection](https://user-images.githubusercontent.com/11533746/41203662-c6730ec4-6cc9-11e8-8bc7-17063ada0a63.gif) Urxvt ![urxvt_selection](https://user-images.githubusercontent.com/11533746/41203932-76730916-6ccd-11e8-8411-eb5b864c4065.gif)\n\nDiscussion:\nThis was an intentional design decision and I'm not sure if there's any intention to change it. As far as I'm concerned I think it's the proper behavior to select a cell only if most of it is inside the selection.\n---\nPerhaps it isn't what I thought. Fiddling with text selection in chrome, I see similar behaviour where it only includes the character beneath the cursor if more than half of it is selected. This logically makes sense; however, in practice, alacritty is consistently failing to select as expected. Though I am now noticing another issue that may be the root cause of this. The start of the selection does not seem to be tied to where the mouse down event happened. You can click on a cell, wait, and then move the mouse quickly to start selecting and if you moved fast enough, the first cell of the selection will not be where you first clicked. ![alacritty_fast_selection](https://user-images.githubusercontent.com/11533746/41206251-db244258-6cf0-11e8-949e-a823315400ff.gif)\n---\nI'm not able to reproduce this, could you provide some additional system information?\n---\nHardware: Asus UX430UA OS: Arch Linux x64 Kernel: 4.13.12-1-ARCH GPU: Intel UHD Graphics 620 GPU Driver: i915 Window Manager: I3 Let me know if you need any more specifics. At some point in the next week I should be able to run some tests in more generic environments\n---\nI've tried this on a slower machine and there I'm able to reproduce this issue. I'm not quite sure what's going on here but it seems like a bug. It's potentially possible that this is caused by winit but I'd say it's unlikely, once the mouse down event is received alacritty should know the start position, so it's likely that there's some kind of problem in alacritty. Now the only question left is if this is also present on the scrollback branch. I'll try to test this whenever I've got the time, but if you want to test this on your machine too @jrouleau it would be much appreciated. **EDIT:** Note that I'd personally say that the original issue mentioned here is probably a wontfix. I can imagine that a configuration option could be introduced if someone is willing to do the work, but it's unlikely the default behavior is going to be changed. However the bug should definitely be fixed, so I'd use this issue to track the progress on fixing that bug. If you want to create a separate issue for tracking a configuration option for sub-cell selection start, feel free to do so. But it's probably going to be low priority, at least for me.\n---\nI have this issue on my laptops as well, and I can confirm that it also happens on the master branch. It should be noted that this issue doesn't seem to be caused by a selection starting just in the middle, you can drag your cursor over almost the whole letter and have it missed. Further, if you click, and very slowly drag after a short pause it works as intended pretty reliably.\n---\n@chrisduerr I use and discovered the issue on the scrollback branch so it is definitely present there too.\n---\nThanks for looking into this! I'll take a peek at the code when I've got some time. Sounds like it's either a super simple fix or some really painful racing condition or something like that. :D\n---\nI've opened a PR which should fix this (#1389). I don't think there are going to be any issues with this, but testing is still always welcome! :)"}
{"project_id": "Alacritty", "bug_id": "41", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: How to disable URL launcher?\n\nDescription:\nHow to completely disable URL launcher? Every time I am trying to highlight an URL and then browser shows up, I would like to disable it.\n\nDiscussion:\nIt seems like this regression has been introduced when the configuration files have been merged. It's still possible to disable URL launching by setting the `launcher` to `true`, but an option to disable this completely should be supported explicitly.\n---\nFixed in #2059.\n---\n@joeky888 I'm assuming you mean that when you try to select that sometimes you simply click on accident and it then opens the URL. If you are seeing the URL open when clicking and dragging your cursor over a URL to select, that is a bug, which I cannot reproduce on my machine.\n---\n> you simply click on accident Yeah, that's not a bug. > Fixed in #2059. Thanks.\n---\nWith the version 0.8.0 the `url.launcher` is deprecated, to disable xdg launcher in version 0.8.0:\n---\n> With the version 0.8.0 the `url.launcher` is deprecated, to disable xdg launcher in version 0.8.0: > > its working. when you hover with the mouse on `git:(master)`, for example, its not a URL anymore. yay. thanks man.\n---\nFyi mouse is disabled by default for hints. So you can just remove the entire `mouse` section.\n---\nFor my fellow Googlers, you can actually have it both ways. I don't like that URLs open when I double-click them, because that makes them annoying to select for copying. However, I also often want to open URLs in my default browser, so it would be nice to be able to do that as well. This configuration enables ctrl+click on links to open them using xdg-open: And I can now double-click to select.\n---\ni can say you are a pro googler\n---\nThe solutions in this report seem to work for regular links but not for all cases. When I get certain errors in gcc, there are often hyperlinks included. Running a hello world without stdio.h will result in: `warning: implicit declaration of function â€˜printfâ€™ [-Wimplicit-function-declaration]` where -Wimplicit-function-declaration will be a hyperlink to gcc.gnu.org No matter how I configure alacritty, it seems impossible to disable the link feature and a single click on the error message will open a browser. How do I disable ALL hyperlinks in alacritty?\n---\nYou set the `hyperlinks: false` for the default regex hint?\n---\n> You set the hyperlinks: false for the default regex hint? This seems to be ignored no matter how I set it. Here is the config: It still executes xdg-open when a link is clicked on.\n---\nHow does this work in the new Alacritty where it uses TOML instead of Yaml? The above regex when converted to TOML doesn't load.\n---\nFound it: https://github.com/alacritty/alacritty/issues/5246#issuecomment-1878166299"}
{"project_id": "Alacritty", "bug_id": "42", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Decreasing font size too much causes division by zero\n\nDescription:\nWhich operating system does the issue occur on? Windows. I have also tested on Linux/X11 and could not reproduce there. Version of alacritty: 4380d0864b1098909bdcfec132b866c34924517e How to reproduce: 1. Open alacritty 2. Press `Ctrl`+`-` to scale the font down until it disappears 3. Move mouse over the window 4. alacritty crashes with the following stack trace: When I add a following check, it hits the newly added panic on hitting the last `Ctrl`+`-` to scale the font down:\n\nDiscussion:\nThere is a check for font size in [change_font_size](https://github.com/jwilm/alacritty/blob/4380d0864b1098909bdcfec132b866c34924517e/src/term/mod.rs#L895) that ensures font size is `FONT_SIZE_STEP` (0.5) at minimum. However, I think that a check for font size is not sufficient, since the cell size depends on the font metrics (and so only indirectly on font size). So I think a proper fix would be to calculate the font metrics for new size first and only update the font size and glyph cache if the new cell dimensions are valid."}
{"project_id": "Alacritty", "bug_id": "43", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Crash when live reloading history size\n\nDescription:\nWhen reducing the history size at runtime by changing the config with live reload enabled, Alacritty will crash if the user isn't scrolled all the way to the bottom. The history will also never grow, but only shrink.\n\n"}
{"project_id": "Alacritty", "bug_id": "44", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Reset not resetting alternate screen correctly\n\nDescription:\nWhen entering the alternate screen buffer (`echo -e \"\\e[?1049h\"`) and resetting the terminal (`reset`), the screen is cleared and everything is reset, however Alacritty is not back in the normal screen buffer. This shows itself in no scrollback history being available, even after trying to switch out of the alt screen buffer again.\n\n"}
{"project_id": "Alacritty", "bug_id": "45", "source_type": "github", "label": "Other", "llm_input_text": "Title: Alacritty can't start with a full disk\n\nDescription:\nAlacritty does not seem to be able to start if it is not able to write to the disk. This is not ideal in case you want to open a terminal to deal with that very situation and are unable to. This is on Linux, with xorg.\n\nDiscussion:\n@NotAFile This is hopefully fixed by https://github.com/jwilm/alacritty/pull/1991. I had to take a guess what specifically caused this issue for you, but this should be the only file creation which is done by Alacritty that hasn't been handled until now. Please let me know if this did not solve your problem. In that case it would probably be helpful to provide a stack trace to pinpoint the exact problem."}
{"project_id": "Alacritty", "bug_id": "46", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Mocp drawing is broken\n\nDescription:\n> Which operating system does the issue occur on? Linux > If on linux, are you using X11 or Wayland? X11 I could have sworn this was fixed in the past. But I can not find the previous issue for this, so I guess this might have been on IRC (or it was only in my dreams...) The issue is that mocp uses a terminal command to draw/redraw the progress bar. However it seems like this command is not working as it should in alacritty. The issue happens when playing an audio file and the progress bar is moving along the bottom: ![mocp2](https://user-images.githubusercontent.com/312503/50513401-e03dd980-0a97-11e9-80c3-a6edf6f861a0.png) The the progress bar hits the same position as the square bracket time stamp, the left most cell will vanish and there will be a gap in the progress bar too. IIRC, this was a problem in the early days of alacritty too. But back then it was because the terminal command code used in this operation was not implemented. So this is a regression of sorts. But I don't know when the regression happened... This happens with `TERM` set to either alacritty or xterm\n\nDiscussion:\nIs [this](https://github.com/jwilm/alacritty/issues/612) the previous issue you're talking about? I'm not sure if the space in the line above the bar is related, I don't see how that would affect things. However I'm unaware of how mocp draws things, so I'm not sure why this wouldn't work. A complete background change shouldn't be an issue and the escape sequence from the previous issue works just fine for me.\n---\n@chrisduerr nope, that was a separate issue. That still works as it should. EDIT: IIRC, the space was relevant as mocp would trigger an optimized redraw command when the progress bar reached that location.\n---\nThe problem with an `optimized redraw command` is that it might not be 100% sound and cause issues with Alacritty, since some programs rely on slow drawing terminals or just partial damaging of the viewport instead of full redraws. Would be good to find an independent example to make it clear that this is actually an issue with Alacritty and not just `mocp` trying to use a 'hack' for redrawing faster which isn't guaranteed to work properly by the various terminal specifications.\n---\nI think was a simple term code that it used. It's using ncurses from drawing IIRC. It there a way to see the term codes sent in a debug mode?\n---\nThe command `alacritty -vv` will print all unhandled escape codes sent. To print every escape code, you'd have to modify the code. However there will likely be A LOT of escape codes.\n---\nThis works as it should in the 0.1.1 release. So this seems to be a regression. I'll try to narrow down the commit that broke it.\n---\nThanks, that will likely help a ton. Especially if it was a small commit which broke things.\n---\nIt seems like it is 0c3e28617a95b4ca30ad9bdbb9114f1e4d41dce5 that breaks it. 21f888ec4149e3078830dfcf9a17adda0ec7623a works as it should.\n---\n~~Here's a simple minimal command for reproducing this issue:~~ ~~It seems like the `\\e[10X` escape sequence should change the color for the next 10 cells, however since tabs are more than one cell long, things get messed up.~~ **Edit:** It seems that this escape looks similar to the issue, but comparing Alacritty to XTerm, Termite and URxvt here looks like Alacritty is doing everything correct.\n---\nI should note that this is a redraw issue. It renders fine at first. But some new draw commands seems to mess up the existing cells. I also noticed some problems in weechat where letters disappear from the input field if I move the text cursor over them. But I haven't checked if it is 0c3e286 that is the cause for this too yet...\n---\nI have never encountered anything like that in weechat and I'm using that on a daily basis. Are you running these inside of tmux?\n---\nNo, I'm running it without tmux/screen. ![out](https://user-images.githubusercontent.com/312503/50561632-c953ed00-0d0c-11e9-8052-1abab3939115.gif) ![out2](https://user-images.githubusercontent.com/312503/50561727-cc031200-0d0d-11e9-9d07-683f0bb47e8b.gif)\n---\nI can not reproduce this. Which shell are you running? Are you certain this is caused by the commit you've linked (do both these issues get fixed with the previous commit?)?\n---\nYes both gets fixed if I revert the changes made to `src/term/mod.rs` in 0c3e286\n---\nI'm also affected by this in Emacs terminal mode and can confirm that reverting [0c3e286](https://github.com/jwilm/alacritty/commit/0c3e28617a95b4ca30ad9bdbb9114f1e4d41dce5) resolves the issue. The symptoms are exactly the same as the animated GIFs as shown in [the comment above](https://github.com/jwilm/alacritty/issues/1933#issuecomment-450649585): when moving the cursor to the right, the character glyph under the previous position randomly vanishes. (BTW, reverting has a minor conflict because of some refactor that has already happened in `src/renderer/mod.rs`.)\n---\nIf it helps, my `TERM` is `xterm-24bits` whose terminfo definition came from this: https://www.gnu.org/software/emacs/manual/html_node/efaq/Colors-on-a-TTY.html ."}
{"project_id": "Alacritty", "bug_id": "47", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: alacritty-0.2.4: URLs can be incorrectly extended onto the next line\n\nDescription:\nWhich operating system does the issue occur on? Probably any If on linux, are you using X11 or Wayland? X11, but I don't think that's relevant There is a minor bug in the URL grabber. I'm running irssi in an alacritty, and this is an excerpt of my session: 13:17 * Grimes examines the latest issue of Stars and Stripes 13:22 https://www.geologyin.com/2018/12/largest-known-diamond-in-north-america.html 13:22 * ShowTitle Largest Known Diamond in North America Found It just so happens that the URL in the middle line ends **EXACTLY** in the last column of the terminal. When I click the link to open it, alacritty does not realize that the URL ends there, and wraps around and grabs the timestamp from the next line and appends it to the URL, which then does not resolve because largest-known-diamond-in-north-america.html13:22 does not exist. I'm not certain how alacritty can best detect this condition. Clearly I can work around it **in this use case** by making my URL handler strip anything that looks like an Irssi timestamp off the end of the URL, but that's not going to work for everyone.\n\nDiscussion:\nIt should be possible to check the last cell of the row for the line break flag and only wrap around if this is not present.\n---\nThis has been fixed in #2192. Please let me know if this does not solve the problem for you.\n---\nI will keep a watch out for an opportunity to retest this as soon as 0.3.0 hits Gentoo."}
{"project_id": "Alacritty", "bug_id": "48", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Crash when resizing with URL highlight\n\nDescription:\nThe URL highlight stores the state of the last URL highlight with the position of the URL start position. However when resizing, it's possible that the indices of this point change which will cause a crash if the old positions are not within the grid anymore. The best approach to fix this seems to be to clear the URL highlight state when the window is resized.\n\n"}
{"project_id": "Alacritty", "bug_id": "49", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Alacritty doesn't close until the first event after exiting shell\n\nDescription:\nWhich operating system does the issue occur on? Linux, Ubuntu 18.04 If on linux, are you using X11 or Wayland? Running Wayland with XWayland (`env WAYLAND_DISPLAY= alacritty`) When I leave the shell with ^d or \"exit\", alacritty will stay alive until I do the next thing (move my mouse, click, type a character, or defocus). I'd expect it to die immediately after exiting the shell. Screen recording of the issue: https://webmshare.com/DdYGG glxinfo:\n\nDiscussion:\nAccording to #1342 this issue is not only present with Wayland, so removing the wayland tag and changing the title to be more accurate. More information about this problem on X11 is present in the referenced issue.\n---\nI took a peek at this one. Looks like when https://github.com/jwilm/alacritty/blob/6cbae83f174fa6d114ea66b1f8dd6185950ca835/src/event.rs#L384 is blocking, it doesn't notice `SHOULD_EXIT` until an event occurs. This blocks the main loop as well. New to the codebase, but it seems like the super hacky solution is to send a `notify` to the process handler upon `SIGCHLD`; the more reasonable solution is finding out how to do away with the unsafe `SHOULD_EXIT`.\n---\nThis is the same as #915 right?\n---\nYes it is, thanks for the heads-up."}
{"project_id": "Alacritty", "bug_id": "50", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Crash on startup Windows: not yet implemented\n\nDescription:\nWhich operating system does the issue occur on? Windows Crashing on launch of a fresh install of v0.2.6 with no prior installs I tried removing the font settings completely from the genereated alacritty.yml but it didn't change anything\n\nDiscussion:\nDoes this occur with the default config? @zacps This is the first time I've seen this. Is there any reason why this should lead to a hard crash instead of falling back to the normal weight/slant and printing a log message?\n---\nYes, it was the default config alacritty generated\n---\nI've created a PR here: #2021. Testing would be appreciated since I don't have a Windows 10 machine myself. I'll release another version once this is resolved."}
{"project_id": "Alacritty", "bug_id": "51", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Crash when clicking on highlighted URL\n\nDescription:\nWhich operating system does the issue occur on? **Linux** If on linux, are you using X11 or Wayland? **X11** Hi, I am running 022f0782 and when I click on a link inside vim, alacritty closes abruptly and outputs:\n\nDiscussion:\nDo you have xclip installed? Can you reproduce this with a previous commit or did this commit introduce the regression? Or has this never worked before?\n---\nHi @chrisduerr, >Do you have xclip installed? Yes: `xclip/testing,now 0.13-1 amd64 [installed]` (Debian testing) I tried many revisions trying to bissect the problem but couldn't find a previous working commit. It seems to me it's a dependency problem (cargo taking latest available version of a crate so whatever I choose as a commit revision I still get the bug once compiled). Do you have any hint of what crate might be failing so I could 'force' some kind of version?\n---\nAre you running a 32bit system or running the 32bit binary on a 64 bit system? Does this only happen when launching URLs or does this happen in other cases too? If you click on links in vim, are you pressing `shift`? Because otherwise this wouldn't open the URL. So just clicking in vim does not break things, right? Or are you using some kind of vim plugin for this? Can this be reproduced outside of vim at all? In something like `less` or `man` for example? Is this only with a precompiled binary, or does this issue happen also when compiling Alacritty yourself? Also if you click on links, are these links in a huge text document or can this be reproduced when the file in vim is *only* a short URL? Sorry for such a barrage of questions, but hopefully these should help quickly narrow down the issue. Feel free to answer only those you can easily answer so we can quickly get an idea of what might be going on.\n---\n> Are you running a 32bit system or running the 32bit binary on a 64 bit system? I am compiling via `cargo build --release` each time, I am on a 64 bit system. > Does this only happen when launching URLs or does this happen in other cases too? I though it was vim but actually this happens whenever I click on a url, in a program or not, simply cat test.txt and then clicking on a displayed url makes it crash! ðŸ˜• > If you click on links in vim, are you pressing `shift`? Because otherwise this wouldn't open the URL. So just clicking in vim does not break things, right? Or are you using some kind of vim plugin for this? Crash happens when I use shift or not. I don't use any `vim` plugin. > Can this be reproduced outside of vim at all? In something like `less` or `man` for example? Yes, even in the terminal within no other text editor. > Is this only with a precompiled binary, or does this issue happen also when compiling Alacritty yourself? I haven't tested with a precompiled binary yet, will do :+1: > Also if you click on links, are these links in a huge text document or can this be reproduced when the file in vim is _only_ a short URL? No, a simple one liner file with a url to let say https://google.com will do it. > Sorry for such a barrage of questions, but hopefully these should help quickly narrow down the issue. Feel free to answer only those you can easily answer so we can quickly get an idea of what might be going on. No matter, tell me if I can help / do some further testing!\n---\n> I though it was vim but actually this happens whenever I click on a url, in a program or not, simply cat test.txt and then clicking on a displayed url makes it crash! confused That's very odd. Can you get it to crash when clicking on non-url text? Or when selecting text? That would indicate that the clicking itself is the problem and nothing URL related. If it is URL related then there are two options really. Either it's related to URL parsing, or it's related to launching the URL. You can try setting the `launcher` to `None` (as documented in the config file) and that should disable URL launching. So that would be a good way to test if things still crash in that case. If this fixes the crash, the next step would be to check if something trivial like `/bin/true` also produces the crash.\n---\n> > I though it was vim but actually this happens whenever I click on a url, in a program or not, simply cat test.txt and then clicking on a displayed url makes it crash! confused > > That's very odd. Can you get it to crash when clicking on non-url text? Or when selecting text? That would indicate that the clicking itself is the problem and nothing URL related. It doesn't crash when I click on non-url text, nor when selecting text. I guess it's URL related then :thinking: > If it is URL related then there are two options really. Either it's related to URL parsing, or it's related to launching the URL. You can try setting the `launcher` to `None` (as documented in the config file) and that should disable URL launching. So that would be a good way to test if things still crash in that case. You are right: setting `launcher` to `None` fixes the crash! > If this fixes the crash, the next step would be to check if something trivial like `/bin/true` also produces the crash. Setting `launcher` to `/bin/true` makes it crashing again. Having error message homologous to my first post: We are making progress aren't we? Don't hesitate to ask further tests, as I can reproduce this rather easily :+1:\n---\n> You are right: setting launcher to None fixes the crash! > Setting launcher to /bin/true makes it crashing again. Having error message homologous to my first post. That's very interesting, so it must be related to code which is only run when the launcher is enabled, significantly reducing the possible culprits. Assuming you're not on the latest commit, this can only mean the error is in this part of the codebase: https://github.com/jwilm/alacritty/blob/master/src/input.rs#L675-L683 I've recently changed the way that daemon processes are launched, so I think the best bet would be to revert that change. Can you check if 32cb48774ad139c7f4fe9864e28fefeaa1009c79 is a broken commit and if c6ab2a8867ad0d064d67dc5e32138cbb3d3ab833 is working? If that's the case, then something's wrong with the double fork.\n---\n* c6ab2a8 is working â†’ Yes * 32cb487 is a broken commit â†’ Yes\n---\nCan you verify if adding `::libc::setsid();` after [this line](https://github.com/jwilm/alacritty/blob/master/src/util.rs#L102) (before the `Ok(())`) resolves the issue?\n---\nHi, I am afraid it doesn't... ðŸ˜• Error message is different though, `xlib` related?\n---\nJust one more attempt out of desperation, what happens if you move the `setsid` call *before* the call to fork?\n---\nJust to shorten the feedback loop a bit, I've got two more things I'd like you to try if moving the setsid does not work.: This creates a 1:1 copy of glibc's daemon method assuming it's called with the parameters `1, 1`, so if daemon doesn't crash, neither should this. And just to make sure the issue isn't the callsite and the problem is unrelated to redirection of stdout/in/err, this is worth another shot: If you're willing to help with troubleshooting and testing these three things, that would help a lot. Unfortunately everything's working great on my system. If neither of these give any new insights, I think it would be fine to just revert the code and suppress the deprecation warning, since macos hasn't actually deprecated `daemon` but is just discouraging its use.\n---\nHehey good news! :sparkles: * Test 1: >Just one more attempt out of desperation, what happens if you move the setsid call before the call to fork? Still crash ðŸ˜• * Test 2: Still having a crash ðŸ˜• * Test 3: Works! ðŸ˜Ž No crash at all!\n---\n> Hehey good news! Unfortunately this does not mean good news. Test 2 was an attempt from me to reproduce exactly what `libc::daemon(1, 1)` does without having to use the `libc::daemon` call. As far as I can tell this is identical to the code in glibc's `daemon` function, but at this point I'm fine with reverting this change. Thanks for all the help with debugging this."}
{"project_id": "Alacritty", "bug_id": "52", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: MacOS keymap assumes QWERTY\n\nDescription:\nI use a normal keyboard with the System Settings >> Keyboard layout remapping to the Dvorak layout. Everything with respect to the keymap works great (as far as I can tell) except for Cmd-key combinations. Here's what I'm seeing with `--print-events` when I type Cmd-v (which should paste, but instead just types 'v'): Period on the QWERTY keyboard corresponds to \"v\" in Dvorak, so it seems as though for some reason, with the Cmd-key down, alacritty is getting the raw- not OS-remapped- key events? In the event in question, both `Some(Period)` and `Some(\"v\")` are in the event. An awkward but effective workaround is to use these keybindings:\n\nDiscussion:\nJust want to add that Alacritty uses `Control-Shift-C` and `Control-Shift-V` for copy and paste out-of-the-box, so you can always just use these keyboard shortcuts instead.\n---\nI can confirm that this is happening for me on OSX (10.13.1) using Colemak instead of Qwerty. I added a custom keybinding to create new windows, as follows: I thought that this simply wasn't working. Then I hit `cmd+k` (which is normally `cmd+n` on a qwerty keyboard), and it popped open a new window.\n---\nSee https://github.com/tomaka/winit/issues/343 regarding the handling of dead keys which may or may not relate to this issue. The TL;DR is that there's work that need to happen in winit to support this\n---\nI can confirm this issue on macOS 10.13.3 using bÃ©po instead of qwerty. Any updates?\n---\nI, too, am a DVORAK user on the Mac where the **Command**-key combinations are being interpreted as the QWERTY key. For completeness in the workaround listed above, I also added bindings for the font size keybindings as I use those frequently. Here is my complete list with the original version above the hack-y workaround.\n---\nI can also confirm this is still an issue. Nothing but querty is supported it seems.\n---\nFor anyone interested: I have added the following for macOS with german (qwertz) keyboard layout\n---\nThe following PR attempts to fix this upstream: https://github.com/tomaka/winit/pull/755. If anyone is willing to test that this resolves that problem, the help would be much appreciated.\n---\nWithout digging into winit more than that PR itself: I'm not sure. What I can say is with the current tomaka:master I see `Period` is registered as pressed twice, the second time with a `ReceivedCharacter('v')` (still): However with the current Toqozz:master I see the `Period` press once, then a `Press` and `Release` for `V`:\n---\n@guildencrantz Is that running the example in the winit repo? Also which key are you actually pressing, with which keyboard layout (so what would there be at the same position with qwerty)? Is there never any Release event for Period?"}
{"project_id": "Alacritty", "bug_id": "53", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Can't input \"@\" on German keyboard with\n\nDescription:\nI'm using alacritty on Windows with WSL via wslbridge (from wslttz 1.9.3) On my Windows laptop I've got a German keyboard layout which has the right ` ` key called ` ` and that is used to input `\"@\"` via ` + `. However in alacritty that combination does nothing.\n\nDiscussion:\nCan confirm that this does not work with norwegian layout as well. Norwegian layout meta-key button creates works AltGr 0 } &#xa0; AltGr 2 @ &#xa0; AltGr 3 Â£ yes AltGr 4 $ &#xa0; AltGr 5 â‚¬ yes AltGr 7 { &#xa0; AltGr 8 [ &#xa0; AltGr 9 ] &#xa0; AltGr \\ Â´ yes AltGr Â¨ ~ yes\n---\nDoes using Ctrl-AltGr work?\n---\n@zacps no.\n---\nJust for the record, it seems this only applies to windows. I can insert @ with AltGr+Q without any issues on linux.\n---\nIt certainly applies to macOS (10.13.x).\n---\nSame here on French Azerty, none of the AltGr combinations are working\n---\nI'm seeing a version of this on macOS with a UK keyboard. AltGr + the number keys gives me the expected characters (AltGr + 2 = â‚¬, AltGr + 4 = Â¢) for every number... _except_ for AltGr + 3, which should give a `#`, and which is the only one I actually care about being able to enter into terminal. This key combination just does nothing at all. On the plus side, I guess I have an excuse not to comment my code any more.\n---\nsame here macos (just installed with brew)\n---\nThis still persists on Windows 1809 with v0.2.5 and ConPTY but only in WSL, it works fine in PowerShell. Interestingly when running `ssh` (the Windows native one) from PowerShell it doesn't work in `ssh` either. Both works in `cmd.exe`\n---\n@niklas88 What output do you get when running `alacritty --print-events` and press AltGr + Q? I'd imagine it should be possible to work around this using a scancode mapping.\n---\nmacOS here (`AltGr` + `L` should result in `@`):\n---\n@ncreuschling Since you're getting the `event: ReceivedCharacter('@')` output, it seems like a keybinding might be triggered that prevents this from working properly. Something similar shows up for @thisconnect who also appears to be running macos. On Windows it might be different, so it might be helpful to get confirmation if `ReceivedCharacter('@')` is also printed. In the following is a patch which applies additional debug information. It would be helpful if anyone who runs into the issue, but `ReceivedCharacter('@')` is printed, could run this. The `--print-events` flag is not necessary: *Note: This can be applied simply by saving it to a file and running `git apply /path/to/file` in the Alacritty git repository.*\n---\nFirst of all - thank you for your effort. The patched Alacritty (against c54115516717d6fd429065158d81a93c0818fefa) now prints: Then: I have not modified any settings in the `key_bindings:` block. They remain the same as the original `alacritty_macos.yml`.\n---\n@ncreuschling Looks like removing the `Quit` mapping on `Command + Q` should resolve this problem for you. Though I'm not entirely sure why `RAlt + L` would trigger a keybinding for `Command + Q`. I'd like some feedback on the Windows side of things, it would be interesting if this is caused by the same thing. @ncreuschling I've got another patch if you're willing to help out. It seems like the `--print-events` code can't really be what's received by Alacritty, because the virtual keycodes are different from the bindings in the config. The following should print exactly which keys are received: Maybe that can get us a step closer to figuring out what exactly is going on. This should hopefully print the `Command + Q` keys that are actually getting triggered."}
{"project_id": "Alacritty", "bug_id": "54", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Keybinding open -n -a /Application/Alacritty.app not working\n\nDescription:\nWe've had a hack for a while on macOS to open multiple windows as a workaround to #607. I dusted of my MBP this morning and found that it's not working. Running the command from a shell in Alacritty works just fine, but the keybinding version causes Alacritty to exit immediately. Seems that this may be a problem with how we create child processes. If this is a dupe, I blame GitHub search\n\nDiscussion:\nThis seems to fix it, but it's not a 100% solution. Including a `wait()` here means all commands are blocking, but removing the `wait()` would result in zombies accumulating (#976).\n---\nI'm using a MBP at work on a regular basis and at least the `SpawnNewInstance` action has worked great for me before. I'll test this again later just to make sure, but I'd be surprised if it suddenly broke.\n---\nI tried that as well; for me, it flashes a new window for fraction of a second. ðŸ˜ž\n---\nMy MBP is on macOS 10.13... may be part of my `SpawnNewInstance` issue. Haven't looked at the code for it though.\n---\nI'm using 10.14.3 and just re-tested and `SpawnNewInstance` works great. However running `open -na /Applications/Alacritty.app` as a command in a key binding results in a -10810 error. Could you try applying this change again: https://github.com/jwilm/alacritty/pull/2193/files? This fixed the issue for me. I had to revert this change because of issues on some Linux systems (https://github.com/jwilm/alacritty/issues/2211) even though I'm unsure what caused these issues. But potentially we could use `daemon` on Linux and `fork` on Linux. Though if you have any idea what could have caused these issues on Linux, I'd be very curious to hear. I basically recreated glibc's `daemon` call 1:1 and it still didn't show the same behavior.\n---\nOne difference between glibc's `daemon()` and yours is that glibc calls `_exit(2)`, while you call `std::process::exit(0)`, which I assume maps to `exit(3)`. `exit(3)` will cause at-exit handlers to run (registered with either `atexit(3)` or `on_exit(3)`). `_exit(2)` terminates the process \"immediately\".\n---\nHuh that's interesting, I wasn't aware of that. Though I'm not sure why that would cause a fatal X IO error on some systems, it seems like it shouldn't do that.\n---\nMe neither. But there may be a system-installed at-exit handler that closes/frees something that triggers the X IO error maybe. Just one example; C++ uses at-exit handlers to execute global variables' destructors. In any case, I think `_exit()` is the appropriate call to use in this scenario.\n---\nIt actually looks like glibc calls `_exit(0)` and not `_exit(2)`. @dvergeylen if you're willing to look into this, I'd be curious if you can make this work by changing things to either `libc::_exit(0)`.\n---\n> It actually looks like glibc calls _exit(0) and not _exit(2). I meant `_exit(2)` as in `man 2 _exit` ;)\n---\nOoooooh, that explains a lot of things. And it does indeed [call `libc::exit`](https://github.com/rust-lang/rust/blob/9ebf47851a357faa4cd97f4b1dc7835f6376e639/src/libstd/sys/unix/os.rs#L540-L542) instead of `libc::_exit`. So it might be worth to test that out. Though maybe that will cause macOS to fail again, I'm not sure.\n---\n> Though maybe that will cause macOS to fail again, I'm not sure. If it does, maybe it's related to `setsid`? Your PR that changed daemon -> fork didn't call `setsid()`.\n---\nIf you take a look at the linked issue, you'll be able to see that `setsid` was one of the first things we've tested. So I don't think that's it. Good idea though.\n---\n> I tried that as well; for me, it flashes a new window for fraction of a second. ðŸ˜ž Also getting this with `SpawnNewInstance` on latest master (090842bd), on macOS 10.14.4.\n---\nInterestingly, for me: works well for me in version 0.3.0, commit [`6757acb`](https://github.com/jwilm/alacritty/commit/6757acbb824e8be9968529a66e9a75a0a2ea2f5d), on MacOS 10.11.6. For the record, I replaced this old keybinding:\n---\nI'm on macOS 10.14.4, and compiled Alacritty from source on revision 22eff1b5506faa13da65f84f761a462e8f1fd01b. I can confirm that `SpawnNewInstance` has stopped working for me as well, when it previously worked on `v0.2.7`. Edit: Seems to work without issue on `v0.2.9`.\n---\nUsing a variant of @jwilm 's workaround on macOS 10.14.4 (18E226). Made similar patch in `ActionContext::spawn_new_instance()`.\n---\n@leonbreedt Could you test the patch I've proposed? Here is it again to make applying a little simpler:\n---\n@chrisduerr applied to 651823192495d6e70e98bd09fce4f233028384fa (no other changes, reverted the workaround in `src/event.rs`). Tested using the following key binding: seems to do the trick so far."}
{"project_id": "Alacritty", "bug_id": "55", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Freeze prompt during reflow\n\nDescription:\nIf scrollback history is available, but the prompt currently is *not* at the bottom of the terminal emulator, resizing Alacritty with lines longer than the current width of the terminal will continually move down the prompt. Demonstration: ![bug](https://giant.gfycat.com/LittlePoliteGrosbeak.gif) The behavior for alt screen and normal screen when the prompt is at the bottom of the terminal (or there is no scrollback) seems correct. So the goal would be to fix this without touching anything else.\n\n"}
{"project_id": "Alacritty", "bug_id": "56", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Double-width characters breaking URL launching\n\nDescription:\nAlacritty's URL launcher is checking for empty cells to stop parsing URLs. However if a character is double-width, the cell after it is always empty even though it's technically still occupied by the previous character. As a result of this, the URL https://çŒ«.ç§»åŠ¨/ is parsed as https://çŒ«, which is a valid URL but does not match the desired outcome.\n\n"}
{"project_id": "Alacritty", "bug_id": "57", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Cursor has different dimensions depending on shape\n\nDescription:\nThis is probably best demonstrated with a picture: ![image](https://user-images.githubusercontent.com/9433472/54887059-9beb8b00-4e86-11e9-802d-b41382a6a5c4.png) With the hollow cursor, there's a 2-pixel gap between the top of the cursor and the edge of the cell. Interestingly, the size of the gap appears to stay at 2 pixels even with an increased font size (36 instead of 12): ![image](https://user-images.githubusercontent.com/9433472/54887098-0bfa1100-4e87-11e9-8fa7-8e12f9c29a9d.png) It also happens with the vertical bar cursor (which I hadn't noticed until I increased the font size!): ![image](https://user-images.githubusercontent.com/9433472/54887085-ecfb7f00-4e86-11e9-85d1-9f573221d593.png) Ubuntu 18.04, X11, Alacritty 0.2.9 and still present on latest master (3e36d714fec8139a1e506036a394b343bd1a8bb4)\n\nDiscussion:\nI'd assume that these issues are only present with the hollow and I-Beam cursors, right? So the underline and block are both correct?\n---\nYep, underline and block cursors both look fine.\n---\n@anowlcalledjosh Do you have a font offset set? I think that might be the cause of this.\n---\nI do! Changing the offsets doesn't appear to affect the height or width of the hollow cursor, or the height of the beam cursor, so I think you're right.\n---\n(and so the underline cursor *is* affected, I just didn't have an x-offset specified when I originally tested it)\n---\nThanks, I've identified the issues then and am working on a fix. Will update once there's a PR."}
{"project_id": "Alacritty", "bug_id": "58", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: screen is just black\n\nDescription:\nWindows 10 home edition, Alacritty-v0.2.5.exe. I've also tried with 0.2.4 and get the same results. I suppose this is something environmental - I mean you'd have noticed if this thing just didn't work on Windows! - but I've no idea what. When I run Alacritty, I just get a black screen, and a cursor. Typing gives the impression that I might be getting black text on a black background, the cursor looks as though it's moving the right amount.\n\nDiscussion:\nMight be a font rendering issue maybe? Try running Alacritty from a different terminal like the cmd.exe, does it produce any output? Errors should be written to stderr if anything went wrong. I'd assume you're using the default config, right?\n---\nSame output whether starting from cmd.exe or from file explorer. No errors visible. Yes, default config. Edit: You weren't suggesting that I'd get a different result from cmd.exe; you were suggesting that I might see some errors. I don't.\n---\nWhich GPU do you have? Might been an issue with OpenGL shader support.\n---\nATI Radeon HD 3600\n---\nIn theory that should just support the minimum required OpenGL version for Alacritty. Would you mind testing out the example in the glutin repository? You can find it here: https://github.com/tomaka/glutin. If you've got Rust setup, you can just run that using `cargo run --example window` after cloning the repository. That also uses OpenGL to draw a Window, but if that doesn't work it's not something caused by Alacritty directly.\n---\nthat glutin example works fine (I see a pink background and a many-hued triangle)\n---\nCould you share the output of `alacritty -v`? Maybe that'll give some more insights.\n---\n(the log file contains the same things)\n---\nI threw some more `v`s at it - it doesn't look much more interesting to me, but here goes anyway:\n---\nIt looks like a font is actually found and the glyph cache is filled properly. Testing the ConPTY backend by enabling the `enable_experimental_conpty_backend` might be another thing that could be tested, but I'm pretty sure this has to be related to rendering and OpenGL.\n---\nI set `enable_experimental_conpty_backend: true` in the config - and it made no difference at all that I can see. (I also set `enable_experimental_conpty_backend: foo` and got a warning about that, so I'm pretty sure I'm changing the right file).\n---\nThe output of `alacritty -v` should change from printing `[INFO] Using Winpty agent` to `[INFO] Using Conpty agent`. Unless your Windows 10 install is not up to date, in which case you should probably update first.\n---\nack, I do see that change - but the alacritty window remains black.\n---\nJust noting that I don't see this problem on my Windows PC at work (the problem persists at home, though). Well, it was always near-certain that this must be something environmental; but I guess it's reassuring to have that confirmed.\n---\nYeah, as mentioned before my suspicion is an issue with the GPU and potentially OpenGL/GLSL support. The best way to confirm that would probably be to swap out the GPU, but obviously that's easier said than done.\n---\nSame issue here, only my cursor won't even move when I type ðŸ¤£ `.\\alacritty.exe -vvv` only responds on resizing the window. Task Manager says Alacritty is running on __GPU 0__, i.e. UHD 630 integrated graphics in my case (instead of the dedicate GTX1050m), dunno if this helps...\n---\n@smdsbz Can you force it to run on the dedicated GPU?\n---\n> @smdsbz Can you force it to run on the dedicated GPU? Unfortunately, no luck, it just stays blank like it's dead (but it __does__ respond to config changes like `render_time` on the fly, which gets displayed properly and fluctuates on mouse over). One thing worth noticing is that it initially starts with GPU 1, then after few seconds, it falls back to GPU 0. I've tried both starting it with the _Run with graphics processor_ option in the right-click menu, and changing the default config in the nVidia panel, behaves the same. Looks like it fails to communicate with the shell to me.\n---\nCould you test a different shell? Like powershell, cmd and maybe bash?\n---\nActivity on this thread prompted me to have another go with the latest version - 0.3.0 RC 3 - and with that I get this interesting-looking error message: Does that help? (I suspect that @smdsbz and I are seeing different issues.)\n---\nHmm, the code in my latest failure looks new since I opened this, so I imagine we now have three problems cluttering this single issue. Sorry about that."}
{"project_id": "Alacritty", "bug_id": "59", "source_type": "github", "label": "Other", "llm_input_text": "Title: crashes on cat /dev/urandom\n\nDescription:\nWhich operating system does the issue occur on? linux If on linux, are you using X11 or Wayland? x11 alacritty @ 28636923e02a6cfac0fc950b963623cbcad5fda9 build with `RUSTFLAGS=\"-C opt-level=3 -C debuginfo=2 -C debug-assertions=y\"` `\n\nDiscussion:\nLooks like the issue is at https://github.com/jwilm/alacritty/blob/master/src/url.rs#L114, which clearly has absolutely no respect for Unicode at all. In general I'd say that most instances of `chars().enumerate()` are probably a bad idea and this is actually done correctly (using `char_indices()` just a couple of lines above that. I've included a fix for this in https://github.com/jwilm/alacritty/pull/2230 since it's kinda related to URL issues, that fixes the issue."}
{"project_id": "Alacritty", "bug_id": "60", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: URL highlight issues\n\nDescription:\nThe URL \"test@https://example.org\" does not get highlighted correctly. This is likely related to trimming the start of URLs with special characters, the origin should be updated appropriately to fix this. If the mouse is over a URL and the URL is recognized and highlighted, but the user presses enter until the URL moves away from the cursor, the URL will still be highlighted making it impossible to remove the highlight. If the display offset is not equal to 0 (so user is scrolled up), there is another issue with URL detection which will highlight the wrong cells. Adding the display offset to the line number might fix this.\n\n"}
{"project_id": "Alacritty", "bug_id": "61", "source_type": "github", "label": "Other", "llm_input_text": "Title: Rendering issue with vifm\n\nDescription:\n_Thank you for an awesome terminal!_ :pray: I'm seeing an issue with the cursor rendering with [`vifm`](https://github.com/vifm/vifm) in `alacritty`. This is the first time I've noticed it - I'm not seeing this issue with any other curses app. ![Peek 2019-04-21 16-18](https://user-images.githubusercontent.com/2284724/56471421-a03da080-6452-11e9-8b61-b1cea7c2fc21.gif) Here's my cursor settings in alacritty: I'd love to see this fixed, give me a ping if **I can help in any way**. :beers:\n\nDiscussion:\nI didn't try to reproduce it (too long to install this terminal) and just guess this is a stable behaviour of the terminal. If that's the case, this is likely to be a problem of `alacritty`, as the issue doesn't appear in other terminals as far as I can tell and I know that the blacked out character appears where hardware cursor is positioned by `vifm`. In normal mode the terminal cursor is invisible, yet `alacritty` displays it.\n---\n@sQVe Which version of Alacritty are you using? Can you reproduce this with the latest master?\n---\n@chrisduerr Sorry for not providing it in the initial report. I'm running the latest code from `master`, so yeah - I can reproduce it.\n---\n@chrisduerr I just tried to downgrade to `0.2.9` and I'm not getting this issue with that release.\n---\nI'm asking because this was fixed in https://github.com/jwilm/alacritty/commit/0d060d5d801e3abb55035269138d819d38fc175b, so please make sure you're running the latest version not just the latest master from a few days ago. If it still occurs then I can't reproduce this. Does this happen inside of vim too? Or inside of the normal bash/zsh/shell prompt? Or only in vifm?\n---\n@chrisduerr I just ran a rebuild and still seeing the issue. I can replicate in both zsh and bash normal / default prompt. I cannot replicate it inside `nvim`. Did you set the cursor to a specific color?\n---\nYou said that downgrading to 0.2.9 fixed the issue, but I'd assume that 0.3.0 would do it too? Since the cursor rework was just recently after 0.3.0. Otherwise this would be a separate issue. I haven't been able to test this with vifm yet though, since it does not install on my system.\n---\n@chrisduerr, what's the issue with the installation? Regular `./configure && make` should give you a build to try (just run it as `src/vifm`).\n---\n@chrisduerr Yes I would think so. I don't have the possibility to try it out now currently though. I can try later if it is useful.\n---\nIt would be. Knowing which commit broke it is extremely helpful for figuring out what the issue might be.\n---\n@chrisduerr Roger. I'll try it out ASAP. Most likely in an hour or two. If possible I'll try to narrow it down further to a specific commit.\n---\n@chrisduerr I've now had the time to debug this further. With `HEAD` at 0d060d5d801e3abb55035269138d819d38fc175b, I'm seeing the issue I initially reported: ![0d060d5d801e3abb55035269138d819d38fc175b](https://user-images.githubusercontent.com/2284724/56476075-380eaf00-6492-11e9-9e83-de289ccfab98.png) With `HEAD` at 371d13f8ef95157c97f7de9964bcbc89d4a8e930, I'm also seeing an issue, but inverted: ![371d13f8ef95157c97f7de9964bcbc89d4a8e930](https://user-images.githubusercontent.com/2284724/56476077-3ba23600-6492-11e9-8415-28b562462e41.png) With `HEAD` at a47d716daace7c197392854754406a06454ec380, I'm seeing **no issue**: ![a47d716daace7c197392854754406a06454ec380](https://user-images.githubusercontent.com/2284724/56476080-3f35bd00-6492-11e9-9d45-15d0a4e176a7.png)"}
{"project_id": "Alacritty", "bug_id": "62", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Alacritty window rescales during startup\n\nDescription:\nWhen I start alacrity, it first creates a large window which is then very quickly resized to the final size (~70%). The resizing is really fast and wouldn't bother me but my window manager (fvwm2) places the window based on the original size and that means that the window position ends up not being what it is supposed to be. Ubuntu 16.10. Default alacritty.yml except that I changed the font size to 13.\n\nDiscussion:\nThanks for filing this issue. The problem here is we need to know some font metrics to know the proper window size to create, but we can't know the font metrics without having the DPI scaling factor which comes from the window. Glutin needs a way to get the DPI scaling info for a monitor without actually creating a window.\n---\nA workaround might be to open a window to get the DPI scaling factor, then close it and open a new one with the correct size. Not great but perhaps better than the current state of affairs.\n---\nSent from Alto On Monday, February 13, 2017 at 12:28 PM Titus von der Malsburg wrote: A workaround would be to open a window to get the DPI scaling factor, then close it and open a new one with the correct size. Not great but perhaps better than the current state of affairs. â€” You are receiving this because you are subscribed to this thread. Reply to this email directly, view it on GitHub, or mute the thread.ï¿¼\n---\nI personally find the resizing extremely distracting, especially for something I open on a regular basis. A possible workaround could be allowing one to detect the dpi scaling factor (e.g launch with a flag, giving the output), which could then be added to alacritty.yml (if it's found in there, there then wouldn't be a need to resize)\n---\nAlacritty will resize the window after it has been mapped even if the window size has already been altered (e.g. by an `xdotool` command). As an example of where this might happen, tdrop (which is a wrapper to run programs as dropdowns) uses xdotool to set the window size before alacritty resizes itself (see noctuid/tdrop#38 for the original issue). This behavior is not a big issue w.r.t. using xdotool since `-d 0 0` can be used to prevent it, but I found it unexpected.\n---\n@jwilm Could you change the parameters we enter in the config file so that we enter dimensions in pixels and you calculate the lines and columns after you initialize the window? At least that way, the window manager can make good decisions on where to place the window.\n---\nI also find the offset placement of the initial window after resizing for font metric, to be irritating. Indeed the font metrics should be available first (as noted in the comments inside the source code), _then_ window dimensions and correct position can be determined, before the window gets mapped to the screen, thereby allowing the WM to put it in the correct spot. I've been perusing the sourcecode to see if I can help here, as I've done some amount of simple window programming in C against xlib, but Rust is brand new to me and I'm rather lost trying to follow the code. Therefore I can only offer some thoughts on this issue: CLI tools like xdpyinfo, query the X Server for data; if there's an X server running, there's a $DISPLAY which can be queried for DPI info and other stuff; DISPLAY can be queried before making any windows, so shouldn't need to create a (hidded or unmapped or invisible) window just to query it for info about its DISPLAY. But in line with what jwilm wrote above on 07 Jan., seems to me it should be something for Glutin to deal with, not Alacritty. If Glutin supplied the DPI early on, Alacritty could compute size and window placement before mapping, negating need of a resize. Meanwhile: 2) assuming that font size will not typically be changed once the user has a font he/she is happy with, perhaps the glyph-cache (and/or associated metric data) could be saved in ~/.config/alacritty or similar location. Then, upon startup, Alacritty could see if the font & size is the same as it was last time (compare saved cache data against font in config file); if it is, window dimensions and therefore position, can be already known before mapping. But if the font/size HAVE changed since last execution, we're back at square one, with a resize needed that will result in the window placement being \"off\" after resize. Again, as mentioned in comments in source code: ideally this stuff be calculated before the window gets created/mapped, then at least the WM can place it just once, in the right spot.\n---\nCan someone check if https://github.com/jwilm/alacritty/pull/2307 fixes this?\n---\n@chrisduerr still seeing the behavior with that branch. The default size will typically stick and be fine, but is not a realistic use-case. If you set the configuration file to a given terminal size in cols/lines (e.g my preferred ratio of 90/27) it still resizes down. I suspect that the issue you were trying to address is a secondary one mentioned in a comment (resizing even if the size was already set by xdotool or similar), rather than the resizing on startup in general (the actual bug). The original comment by @jwilm suggests that the issue is with lack of API support within glutin, but as per the two bugs above (tomaka/glutin#1096 and tomaka/winit#785) that's not apparently an issue. What exactly is stopping us from figuring out the font metrics before actually creating a window at this point? If there is something, could the one with that knowledge also follow up in tomaka/winit#785?\n---\n> If you set the configuration file to a given terminal size in cols/lines (e.g my preferred ratio of 90/27) it still resizes down. If you set window dimensions and the DPI factor is not equal to 1, it's impossible not to resize at startup. > The original comment by @jwilm suggests that the issue is with lack of API support within glutin, but as per the two bugs above (tomaka/glutin#1096 and tomaka/winit#785) that's not apparently an issue. The issue is exactly what vberger has said in the winit issue. It's pointless that we're able to get the DPI for all displays when we do not know which display the window is going to be spawned on.\n---\nAt this point, I think the question becomes \"how do other terminals handle it?\" I don't experience the same problems in, say, Konsole. All of my displays (at least at home) have a non-1 DPI factor, but all of my displays per-system also have identical DPI factors (same-size displays with same resolution in all multi-display setups). Surely there's some way for alacritty to handle these common scenarios with equal grace to virtually every other alternative?"}
{"project_id": "Alacritty", "bug_id": "63", "source_type": "github", "label": "Timing :: Resource Lifecycle (CWE-664)", "llm_input_text": "Title: Alacritty freezes on pasting from empty clipboard\n\nDescription:\nWhen pasting from empty clipboard alacritty gets frozen for 3-4 seconds. Arch Linux with X11 ( #2391 doesn't fixed it for me )\n\nDiscussion:\nI can confirm this is happening to me as well, in the same OS environment. Alacritty hangs, then prints the following:\n---\nRelated issue in one of our new dependencies: aweinstock314/rust-clipboard#54.\n---\nThis is a bug in x11-clipboard, I just published 0.3.2 to fix it.\n---\n@quininer Thanks a lot for that! The fix seems to work great based on my testing. What is the need for the timeout if this is not intentional? Is there a different way this might timeout?\n---\nX11 has many different implementations (both client and server) and it's hard to keep them reliable. If the other party panic after sending notify, we may never receive message."}
{"project_id": "Alacritty", "bug_id": "64", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Index out of bounds when selecting during `yes`\n\nDescription:\nWhen creating a selection while running the `yes` command, Alacritty will crash with an index out of bounds exception.\n\nDiscussion:\nFor further info: I can reproduce this using `while true; do echo no; done` and selecting. Theoretically, any high-output command that induces fast scrolling would cause this.\n---\nAnother interesting detail might be that I *think* I've specifically tested this in the past, so it's possible that there has been a regression and it might be worth bisecting this issue.\n---\nYou were right. Bisect gives me bf353059a0f10bbccec754deb0e182cec3f6efe0 as the first bad commit. I don't think I'll have enough time to try to fix it this week, but hopefully this helps you or somebody else who wants to fix it.\n---\nThanks for bisecting, that should hopefully make troubleshooting a lot simpler!\n---\nDoing a bit more testing: the problem appears to stem from the `span.map()` at https://github.com/jwilm/alacritty/commit/bf353059a0f10bbccec754deb0e182cec3f6efe0#diff-7e09fea17462febd06d3b5bdd2b4512aR145. Commenting out both branches makes the problem disappear, and uncommenting either one reveals it again. I've also noticed that lowering the `history.scrollback` config makes the issue appear earlier (I've been testing at 100 lines). ---- I think I've narrowed it down further... maybe: using `grid[span.{start,end}.line][span.{start,end}.col]` anywhere inside that `map` causes the same issue. Using `span.{start,end}.line` or `.col` in e.g. a tuple, the issue does not manifest. Maybe there's a problem with indexing the Grid?\n---\n> Maybe there's a problem with indexing the Grid? Most definitely. I'd assume that the selection is stored at a specific position and then rotated (moved up) until it leaves the grid. So trying to access it then will lead to an access outside of the grid, leading to an IOOB. Though I haven't had the time to look at this yet, so this is only a guess.\n---\n> I'd assume that the selection is stored at a specific position and then rotated (moved up) until it leaves the grid. So trying to access it then will lead to an access outside of the grid, leading to an IOOB. I did some testing and this seems to be exactly what the issue is. If I prevent span.{start,end}.line from going larger than the number of lines in the grid then no IOOB will occur."}
{"project_id": "Alacritty", "bug_id": "65", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Characters inserted into neovim since foreground/background request escape codes added\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 Seemingly randomly (I can't tell what causes the bug to occur some times but not others, or why one escape is displayed in one instance but another at another time) when starting neovim since f790070, escapes get input as if I typed them, for example after starting nvim the most recent time it starts in command mode with `:.rgb:0/0/0^G` as the typed out command, another one is starting in search mode with either `/0` or `/0/0`. ![image](https://user-images.githubusercontent.com/24554283/59545850-b3b93500-8ef2-11e9-8956-40c600879214.png)\n\nDiscussion:\nGetting the output of `alacritty -vvv | grep \"Writing escape sequence for dynamic color code\"` would be very helpful I think. I personally can't reproduce this with the latest master, so I can only take guesses here. Could you try this with an empty nvim config and give detailed instructions on how you're causing this? I'd also be very interested in seeing if this can be reproduced with XTerm. The following patch might also solve it already, please give that a try if you've got some time:\n---\nOh, I think I've figured it out. I think this will be fixed if you set your background color to anything above hex `0F/0F/0F`. I think the problem is that `0/0/0` is written as single-digits.\n---\nAttempted to fix this in https://github.com/jwilm/alacritty/pull/2544, please let me know if that does it for you.\n---\nEach line looks the same to me, each one is for one opening of nvim the exact same way (and I didn't this time but I previously tested with both `nvim -u NORC` and `nvim -u NONE`, #2544 seems to have just increased how many 0s there are. The first picture attached is related to the second line, the second picture to the third line, the third one to the last line, and all other lines had nothing weird upon opening nvim ![Screenshot 2019-06-15 10-33-51](https://user-images.githubusercontent.com/24554283/59552830-bd29b800-8f59-11e9-94ec-213bca56a82a.png) ![Screenshot 2019-06-15 10-34-11](https://user-images.githubusercontent.com/24554283/59552838-cfa3f180-8f59-11e9-9d41-de74df7ce13b.png) ![Screenshot 2019-06-15 10-39-03](https://user-images.githubusercontent.com/24554283/59552841-d29ee200-8f59-11e9-9d3b-f4a0e519e971.png)"}
{"project_id": "Alacritty", "bug_id": "66", "source_type": "github", "label": "Build :: Dependency (CWE-1357)", "llm_input_text": "Title: Alacritty v0.3.0-rc2 does not start (Error creating GL context)\n\nDescription:\nAlacritty release: v0.3.0-rc2 OS: Debian GNU/Linux buster/sid x86_64 Kernel: 4.19.0-4-amd64O DE: GNOME 3.30.2 GPU: NVIDIA Quadro FX 880M using X11 ## notes: * alacritty version v0.2.9 works fine * `cargo run --example window` works fine when cloned glutin master * tried both installing from released deb file and building from sources\n\nDiscussion:\nCould you bisect which exact commit broke this for you?\n---\n0f96a62218cfc78b56606f0dcc334d59202edf7c is the first bad commit Also I chacked last commit (e98ea64c748f1cce673c97adbc72e6a9a3c11e5f) and the same error still occurs.\n---\nI just investigated glutin repo and found that example window works on master, but it does not work with 0.20 release, the commit that did fix the issue was tomaka/glutin@600030ac41abdb7a03e0ed735a179ea10e249a4f\n---\nSounds like it would be beneficial to wait for the next glutin release before releasing 0.3. Thanks for looking into this.\n---\n@doubleloop I'd be interested in getting feedback on #2253. Does that PR fix the build issues for you?\n---\nJust verified it does not (it produces segfault, I posted stack trace in [PR comment](https://github.com/jwilm/alacritty/pull/2253#issuecomment-480236516))\n---\nThat backtrace is kinda surprising because it fails at the following code: Which is actually before any of Alacritty's OpenGL routines run. So in theory you should be able to repro this with my glutin fork. Could you take the glutin `window.rs` example and add all these flags (you can test both `with_srgb(true)` and `with_srgb(false)` and report back if you can make the glutin example fail like that? If it does fail, it would also be interesting which option causes the failure, so removing them until the failure is gone would likely be another good troubleshooting step as follow-up.\n---\nGlutin example segfaults if `with_vsync(true)` is added: I tested all other flags and they do not cause any problem. `with_vsync` segfaults both on glutin master and on your fork\n---\nSo does removing this from Alacritty allow you to run it again?\n---\nYes, just checked this.\n---\nThen I'd propose a temporary workaround for BSD which disables vsync. Does removing vsync cause any issues that would deem Alacritty unusable to you? It wouldn't be worth adding this as a workaround if Alacritty is still unusable though technically working.\n---\n> a temporary workaround for BSD I use debian >Does removing vsync cause any issues I can not observe any, alacrity is fully usable for me.\n---\nOh, sorry. For some reason I confused this issue with https://github.com/jwilm/alacritty/issues/2244. I'm not entirely sure why vsync was enabled since I can't reproduce any errors of the original commit message, so I'm not sure if I want to make this change before the 0.3.0 release. It's also possible that it might have impact on performance and resource usage, the latter being difficult to benchmark for me.\n---\nReported upstream in https://github.com/tomaka/glutin/issues/1135."}
{"project_id": "Alacritty", "bug_id": "67", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Windows: Focus with mouse highlights text\n\nDescription:\nOperating System: Windows Pretty sure this doesn't happen in Linux. ### Behavior summary When focusing the window with a mouse click, all characters are highlighted up until the character clicked on. ### Expectation The window is simply focused, no extra selection occurs. ### Extra This is especially irritating in combination with #2050. (`selection: save_to_clipboard: false` doesn't seem to work, resulting in pasting half the terminal screen back into the prompt)\n\nDiscussion:\nThis issue was already raised for macOS [here](https://github.com/jwilm/alacritty/issues/1291) where it was initially implemented for all platforms. The behavior was then reverted for Linux/BSD because it's not expected there in [this PR](https://github.com/jwilm/alacritty/pull/1540). This was all before Windows support was added, so it made sense back then to just check if the platform is not macOS. It seems like all that is needed here, would be to add another check to make sure that this behavior is also present on Windows to match macOS. I've created a PR to fix this issue, I'd appreciate help with testing: https://github.com/jwilm/alacritty/pull/2172\n---\nI built from this PR (with the build fix) and I'm still getting the same behaviour. Just to verify, I built this with `cargo build --release`. Is this correct? (Not sure if you can/how to download binaries build by TravisCI?)\n---\nYou can not download binaries build by travis. However you do build using `cargo build`, the release is optional in this case. Please make sure you have the right branch selected. Please let me know if you can't make it work and I'll have to test myself.\n---\nI can confirm the issue is not yet fixed. ![2019-03-13_16-20-12](https://user-images.githubusercontent.com/28582702/54320921-ff82d800-45ab-11e9-9c53-fb9d11c0d91f.gif)\n---\nI've just tested this on my Windows test system and can not reproduce it. Could someone confirm that this issue still exists when running powershell in both ConPTY and WinPTY?\n---\nHow would I do that? If it's just toggling \"Use legacy console\" in Powershell: nothing changed, unfortunately. I also tried toggling every possible setting in options, but there was no change. Running it from `cmd` and doing the same things exhibits the same behavior. Windows 10 Version 1803 (OS Build 17134.648) -- from `winver`, if it helps.\n---\nYour Windows 10 version seems extremely outdated (about 1 year?). Could you try updating to see if that fixes the problem?\n---\nI'm on version 1809, build 17763.379. Unfortunately still the same with both Winpty and Conpty (didn't know this was a thing). I'm definitely running the correct build, I checked that the PR changed lines exist in my source, and changed the window title to be sure it's a fresh build.\n---\nConPTY does not exist until version 1810. Please make sure you're using the latest version of Windows to ensure that this is not caused by some issues with the outdated WinPTY.\n---\nThanks for the tip on 1809. Dunno why I never got it. However, issue is the same and I can't find any mention of an 1810 update. I assume your system is part of the Insider program, then?\n---\nI believe 1809 is actually the latest. I am experiencing this issue as well, however I am on an older windows version 1803 build 17134.523 as this is my work laptop. Tonight I would be able to test this at home on my own PC.\n---\n> Thanks for the tip on 1809. Dunno why I never got it. However, issue is the same and I can't find any mention of an 1810 update. I assume your system is part of the Insider program, then? That was my mistake actually, sorry. Since this was the October update, I thought the version number would be 1810 (2018.10). If that version is present (1809), then the ConPTY option will work and is available. Could the people who are able to reproduce share a bit more information about how to reproduce this? I feel like this would be a pretty simple bug to fix, but unfortunately I can not reproduce it. It would be interesting to get some information about the system, is this reproducible with both mouse and touchpad? Does it matter which other application is open? Since it might not be trivial for me to fix it, this would probably be a great issue for someone interested in trying to contribute to Alacritty. I can help with getting started if someone is willing to dive in.\n---\nTurns out I've managed to reproduce it. The issue is that the `Focused` event comes *after* the `MouseInput` event, so when clicking the window it will always be focused.\n---\nWell that would explain it. I tried some different commits. Issue was introduced in [104b866cb6fa1b0674abdd2bdd3668f280939ca8](https://github.com/jwilm/alacritty/commit/104b866cb6fa1b0674abdd2bdd3668f280939ca8) I think.\n---\nTurns out a straight-forward and simple fix for this issue is currently not possible with the window library Alacritty is using. I've opened a bug upstream to discuss this issue and possible solutions for it: https://github.com/tomaka/winit/issues/817\n---\nThanks to Osspial, this just got fixed upstream. Can anyone recompile Alacritty against the latest winit git version to confirm this works? The easiest way to test that is probably to put the following in the last line of Alacritty's Cargo.toml:\n---\nConfirmed fixed! Woohoo! ðŸŽ‰\n---\nYep, it also works on my machine!"}
{"project_id": "Alacritty", "bug_id": "68", "source_type": "github", "label": "Build :: Configuration (CWE-16)", "llm_input_text": "Title: Panic due to error in config\n\nDescription:\n## System OS: Antergos Linux, Kernel v. 5.0.6 Display Server: X11 WM: i3 Compositor: compton (afaik irrelevant here) Alacritty version 0.2.9 (similar problems occurred in previous versions as well, though) ## Summary In case of certain configuration errors, e.g. when the colors: primary: background property is set twice in a row, alacritty will panic: ## Expectation Fallback to default setting ## Output\n\nDiscussion:\nOur upstream parsing dependency does not strive to propagate errors if the file is invalid, giving no guarantees that there will not be a runtime crash. The best approach might be to verify the validity of the input file first before starting to try and parse it with serde, https://github.com/chyh1990/yaml-rust might be a good choice for this.\n---\n:+1: Also happened to me. I was tweaking the font settings, and copied the current `family: ` line and pasted it below, and alacritty immediately crashed and wouldn't relaunch. I had to launch a different terminal to edit the alacritty.yml file before I could start it again. Not a showstopper, but kinda annoying."}
{"project_id": "Alacritty", "bug_id": "69", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Cursor colour is incorrect after displaying ~2000 lines of dmesg\n\nDescription:\nUbuntu 18.04, X11, alacritty 0.3.0 This is the weirdest bug: if I open a new terminal and run `dmesg`, the cursor consistently turns red. ![image](https://user-images.githubusercontent.com/9433472/56462153-3b346d00-63b6-11e9-84b6-beee4a1361ce.png) Typing doesn't make it change colour, but backspacing over characters makes it turn white (the original colour). Running `dmesg` again in the same terminal results in it turning white also; after this, I can't reliably reproduce the bug in the same terminal window. The following file reproduces this (just `cat` it): [dmesg.txt](https://github.com/jwilm/alacritty/files/3100590/dmesg.txt) If I truncate that file much more, it no longer causes this to happen. Here's my alacritty config:\n\nDiscussion:\nI can't reproduce this myself, but chances are there's just an escape sequence in there that changes the cursor colors? Can you reproduce this in a different terminal emulator?\n---\nMore investigation (slightly stream-of-consciousness, sorry): At some point, the background for selected text after the end of the line changes colour, which is approximately when the cursor ends up red instead of white: ![image](https://user-images.githubusercontent.com/9433472/56463429-f9aebc80-63cb-11e9-9e25-b033cebae147.png) Interestingly if I tab-complete the filename (printing an extra 3 lines of text) before printing the file, the selected-text background changes colour 3 lines earlier: ![image](https://user-images.githubusercontent.com/9433472/56463435-0a5f3280-63cc-11e9-95be-11d645263833.png) Pasting all the text from the start of the session until the line before the colour change into a file results in a file 1024 lines long, which seems suspicious. (This isn't just due to some weirdness of a particular line in the test file â€“ I can remove the first line, and the first strange line still appears after 1024 lines have been printed.) I also just tested and I can reproduce this on latest master, 0d060d5d801e3abb55035269138d819d38fc175b. I've never seen it happen in any other terminal emulator (I've just tested gnome-terminal and xterm). It's not to do with cursor-colour codes; I can reproduce it by running this Python program:\n---\nThat actually sounds extremely similar to an issue that has been solved in https://github.com/jwilm/alacritty/pull/2328. The only differente being that in this issue it was about underline/strikeout and not background color. Which is kinda interesting because this was likely introduced with scrollback in 0.2 (a long time ago) and I've just noticed it the other day. I've actually tried out a more aggressive change but that lead to some test failure, however I'd propose trying that to see if it solves the issue for you. Could you try changing the `&template` [here](https://github.com/chrisduerr/alacritty/blob/e3a20a2c840330540e3943d1fb67f2c8b0a20640/src/term/mod.rs#L1323-L1338) (in both cases), to `&Cell::default()` and see if that fixes it for you?\n---\nYep, that appears to fix it.\n---\nI'll investigate this issue further, thanks for letting me know.\n---\n@anowlcalledjosh Could you test if #2599 fixes this for you?\n---\nbelatedly: yep, af30f3735a5e402509cb14b994576d0ea4799557 fixes it. thanks!"}
{"project_id": "Alacritty", "bug_id": "70", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Insert cursor disappearing in Neovim\n\nDescription:\nI've have noticed an issue with the cursor in **INSERT** mode in `neovim`. After having `neovim` open in `alacritty` for a while the cursor disappears when in insert mode. I'm having a hard time replicating the issue. ![Peek 2019-04-23 10-52](https://user-images.githubusercontent.com/2284724/56567834-0989f480-65b6-11e9-895f-042eb233d43e.gif) Worth noting is that restarting `neovim` does not fix the issue. I have to restart `alacritty` for it to disappear. I did not notice this issue with version `0.3.0`. **EDIT:** I also now noted that the cursor does not respect my set color. I have: But it looks like this: ![Peek 2019-04-23 10-58](https://user-images.githubusercontent.com/2284724/56568327-09d6bf80-65b7-11e9-8bcb-1b450abefa0f.gif) I'm running `alacritty` built from https://github.com/jwilm/alacritty/commit/4fbae5e397c514c245432a6415a4c99c52b7978f on **Arch Linux** with Xorg.\n\nDiscussion:\nIt's not just NeoVim... for me it disappears in normal ZSH shell... [![asciicast](https://asciinema.org/a/SciyUWI6u7eSJX49faYToor4C.svg)](https://asciinema.org/a/SciyUWI6u7eSJX49faYToor4C)\n---\nGetting the same issue as @sQVe. Are there some new configuration variables we should be aware of? I haven't updated mine since 0.3.0.\n---\nI've start noticing the same issue in neovim (in my case, since in fish shell cursor is fine). Alacritty respects the cursor colors in my config at startup, but it's stops doing so after some time spending in neovim ( 1 - 2 hours, maybe I'm lucky and not getting it triggered very fast).\n---\nThat looks extremely odd and I'm not able to reproduce it at all. I think some more background information might help out here. When you say it's hard to reproduce, do you mean this rarely happens? Or does it happen reliably, but it seems to happen after an arbitrary amount of time? Also does this happen with every cursor, or do only certain cursors like the underline and beam go invisible? Or only the block cursor? If you try changing the cursor using `printf \"\\e[?1Xq\"` (replace X with 1/3/5), are all the cursors invisible or can you get it to show up again with certain cursors? Does `reset` fix this issue? > I also now noted that the cursor does not respect my set color. Does this also only happen after a certain time, or will these never get accepted?\n---\n@chrisduerr For me this wrong behaviour hits me immediately when I try to move my cursor back... It seems to be that regression has been introduced after `a47d716` - so in the `cfc20d4f34`\n---\nIf a47d716daace7c197392854754406a06454ec380 broke this for you that would certainly be very surprising to me. I would have expected 371d13f8ef95157c97f7de9964bcbc89d4a8e930 to cause this problem. Can someone else maybe help with bisecting? I'd be curious if a47d716 is actually the culprit.\n---\nI should clarify, the issue is only happening to me while inside Neovim. I just ran `reset` and it _seems_ to have fixed the issue. If it happens again I'll keep an eye out for any patterns that trigger it.\n---\n@chrisduerr It's hard to reproduce because it seems to happen randomly, at least for me. It does happen quite quickly though. I had to restart my terminal around 30-40 times today, 8 hour work day. I've only seen an issue with the \"insert cursor\", i.e. the narrow line cursor. The cursor color had the same behavior as above. At first it works and when the insert cursor disappears the cursors are reverted to default setting. I'll try to check the rest later today. ðŸ‘Š\n---\nIf `reset` fixes the issue that would at least indicate that there's some terminal state which gets corrupted. Though getting the exact commit breaking this would probably still help out a ton. I currently don't have any clue where this could be coming from, so anything that would help me repro or narrow down the issue would be extremely helpful. So far the only reported platform is Arch with X11, is anyone here not running X11?\n---\nYes, I have the same issue when using neovim on my mac. And in my case it happens immediately when I open neovim.\n---\nAlso seeing something similar on neovim + tmux immediately after opening neovim. Not only the cursor disappears, but the screen also goes blank (and different parts of it show up and go blank as I navigate through the file). Testing on Mac. Interestingly enough, if I open neovim with no plugins/custom configurations (``nvim -u NONE``), the issue is gone. So it works fine with barebone neovim, but it also works fine when using other terminal emulators. I'll try to identify which neovim configuration/plugin is triggering the issue and I'll see if I can find some time to bisect alacritty too\n---\nI've tried adding some debug statements in hope that this might shed some more light on what exactly is going on when the cursor disappears. If someone who's capable of reproducing this reliably could try running this diff and send me the output it would be much appreciated.\n---\nI have the same issue on Fedora, although not reliably. I tried compiling with your debug statements, and it stopped happening :/\n---\nCannot reproduce on a47d716daace7c197392854754406a06454ec380 . Was using this commit all day.\n---\n@chrisduerr I've ran alacritty with your diff. I was able to get the broken cursor behavior, but the output, in the moment of switching to the wrong behavior, was the same as with the 'normal' cursor. Anyway here is the log. I've opened the file with neovim and start moving my cursor down and then up, until I got my cursor inverted, then closed terminal ( when HollowBlock messages appear). [log.txt](https://github.com/jwilm/alacritty/files/3109885/log.txt) I will try to debug it with rr and gdb. I hope that I'll find something.\n---\nI've done some testing under gdb and figured out that this [`if`](https://github.com/jwilm/alacritty/blob/e9813031f6e308984cb5547aa1049839cb75745f/src/term/mod.rs#L379) in pair with its `else` returns absolutely the same things whether cursor final colors are broken or not, so probably the colors are fine here. In my test I was moving from `(0,0)` cell in alacritty to `(1,0)`, both times from the same line in the file. CursorStyle - block, `cursor.cursor == Rgb(171,178, 191)`, `cursor.text == Rgb(40,44,52)`. Compiled alacritty with `--debug` and used `rust-gdb` as a debugger. The results of examining `return` statements with gdb `p` command are in the file. `If` branch is marked with `if:` and `else` with `else:` [log_next.txt](https://github.com/jwilm/alacritty/files/3110369/log_next.txt)\n---\n@kchibisov @chrisduerr For me a47d716 is fine, cfc20d4f34 introduced the problem."}
{"project_id": "Alacritty", "bug_id": "71", "source_type": "github", "label": "Other", "llm_input_text": "Title: Weird carat behavior when scrolling\n\nDescription:\nUsing the latest Alacritty, on Gentoo, and under Sway I see this interesting behavior when scrolling. I think the best way to describe it is to show it: [![Demo](https://i.imgur.com/Z9PlPfP.gif)](https://i.imgur.com/tLckMYA.mp4) P.S. Click on image for full video.\n\nDiscussion:\nCan you reproduce this in X or XWayland? Also does setting a different cursor (using `printf '\\e[4q'` for example) fix this?\n---\n@chrisduerr If the issue is about cursor, I can reproduce it on X11 with zsh just by opening new `alacritty` instance typing `ls -laF` bunch of times, then `Ctrl + l`, `ls -laF` and scroll up. It only happens when your prompt isn't at the bottom of the screen though (in the middle e.g). Update: Cursor will become hidden, when the current prompt will go offscreen .\n---\nHuh, I don't think I was able to reproduce this in bash on macOS at work, but on X11/Arch/zsh I can reproduce it when following your steps. I'm surprised I haven't noticed this, so my guess would be that this might be a regression. Testing the previous versions and bisecting the broken commit if those work might be a good idea.\n---\n@chrisduerr I'll bisect in a moment.\n---\nThat would be much appreciated, thanks for the help!\n---\n@chrisduerr This one cfc20d4f34dca535654cc32df18e785296af4cc5\n---\nMy best bet would be the following line which hasn't been carried over in the cursor rework: https://github.com/jwilm/alacritty/commit/cfc20d4f34dca535654cc32df18e785296af4cc5#diff-7b3174257e73247b46a5a32b142d45beL440 I'm not sure *why* it is required, but replacing `self.cursor.line` with `self.inner.line` might be worth investigating. If that's not it, I'd have to look into this a bit more.\n---\n@chrisduerr I've applied the following diff on top of the cfc20d4 and it seems like it resolves the issue.\n---\nHuh, that seems like an interesting pitfall. Do you want to send a PR or should I do that later? I think it might be worthwhile to add a comment to this line to state that this is intentional and why it's needed.\n---\n@chrisduerr I'll send it."}
{"project_id": "Alacritty", "bug_id": "72", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Double binding - ScrollPageUp\n\nDescription:\nWhen setting a binding like: The ScrollPageUp gets triggered twice, and I miss lines in the buffer. After a suggestion from irc, I removed the keybinding, and it works as expected. There might be an issue that register binding twice. The issues appears on: Linux X11 using git master from 2019/07/05\n\n"}
{"project_id": "Alacritty", "bug_id": "73", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Double-click selects trailing tab\n\nDescription:\nRun this: and double-click `select`. Observe that the cell after the word is also highlighted, and pressing ctrl-shift-C will copy the tab character. Alacritty 0.3.3, Ubuntu 18.04, X11\n\nDiscussion:\nI've verified this on the latest master branch.\n---\nAdding `\\t` to `semantic_escape_chars` in alacritty.yml fixes this for me.\n---\nSounds like that might be a reasonable change. I don't see why it wouldn't be part of it already, since a normal whitespace is already in there. So likely just an oversight."}
{"project_id": "Alacritty", "bug_id": "74", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Regression with scrolling performance\n\nDescription:\nWhile doing some tests with profile guided optimization, I've noticed that normal scrolling (the type that is done by `yes`), is extremely slow on the latest master. I've tested this with the version I'm currently running (f002171) and there's no such performance issue there. So somewhere in between 707f4293667d4d8564ab0afc13128463c2ee7fd5 and f002171 there must have been a change significantly impacting the performance of scrolling content inside of Alacritty. My best bet would be https://github.com/jwilm/alacritty/commit/0815774cbfb9d1421b8077d5d9d641faf5f818c1, however I haven't bisected it yet, so I'll update this issue when I've got some additional information.\n\nDiscussion:\n@chrisduerr I've decided to bisect it (I'm always running `perf` to test for the performance changes, when sending `PR`s, so was a little bit surprised, that I didn't noticed it in a first place). So, af30f37 has introduced the issue. The result of `perf stat -r 10 vtebench -b 10000000 scrolling` on 0815774 is on af30f37 and on f002171\n---\nThat definitely makes some sense, though it surprises me the impact is so huge. I'll take a look if there's a good way to resolve this properly. The `occ` of Row might have to be fixed/reworked a bit."}
{"project_id": "Alacritty", "bug_id": "75", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Underline starting in last line not rendered when scrolled up\n\nDescription:\nIf an underline is started in the last line while scrolled up in the terminal, the underline is not rendered correctly. This applies both for underlines printed using the escape sequence and for underlines created for URL highlighting. Quick investigation shows this might be caused by the `update_lines` method or some other step in the rendering process. It seems like the cells have the underline flag set correctly, or at least some flags have an underline flag set, I haven't checked if they're the correct cells yet.\n\nDiscussion:\nSeems like `strikethrough` is also affected. However selecting any cell (even empty) on line with underline + strikethrough shows both underline and strikethrough correctly.\n---\nSince strikeout and underline are handled pretty much exactly the same way, this does make sense. Good catch on the selection though. I'd expect this to be relatively easy to resolve once the cause is found, however I was caught up with finishing up my PR for moving Alacritty to rfind_url.\n---\n@chrisduerr I guess, I've found a starting point and it seems like something is super weird here. The code, which is seems to be responsible for it is [here](https://github.com/jwilm/alacritty/blob/54dca06bfbac50da0adb33c928e376b5c7986c4a/alacritty_terminal/src/renderer/rects.rs#L78). This \"if\" condition is **always** false and the cell.column, cell.line values are super odd. Also I've never seen `cell.line == size_info.lines()`. You're probably have more ideas on what's going on here, since I'm not very familiar with rendering code atm. I'll continue watching into this to learn about rendering, but anyway waiting for your feedback on this one. Edit: I've never hit `process::exit(127)` in 5mins of outputting/scrolling/0 scrollback.\n---\nThe issue was caused by this rework 6716c81c08c10477d2370d7e1ca56e31348a7fa3. The `cell.lines` seems correct on the commit before rework I've mentioned(they're counted from zero, but values looks fine, since they can reach size_info.lines()).\n---\nI'll take a look at the code later, but `cell.line == size_info.lines()` looks like an off-by-one error to me. I'd assume `cell.line` is zero based. However I don't understand why it would have worked previously. Same with the columns.\n---\n> I'll take a look at the code later, but cell.line == size_info.lines() looks like an off-by-one error to me. ~~For me, it's off by 7(random number) in case I create underline on the last line.~~ Nevermind, `alacritty` was rendering debug output too fast (instant update) and the needed lines were sent out of scrollback buffer without noticeable screen update. So yeah, seems like off-by-one. I think I can send a PR to fix this in an hour or less.\n---\nJust an update to the issue. The issue is presented only with the last underline in the last line ![Screenshot_Tue 30 Jul 2019 11:58:34 PM MSK](https://user-images.githubusercontent.com/27620401/62165193-92879900-b326-11e9-9d85-b571c394a944.png) This is also presented when underlining on a prompt regardless of the position, but your cursor should be to the left to underlined text. Just move a cursor across the url to get the broken behavior. Oh, and in case of current prompt, you should just place any symbol to the right of underlined text, and it will be highlighted properly (with cursor on the left side)."}
{"project_id": "Alacritty", "bug_id": "76", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Interpretation of \"private\" CSI diverges from other terminals.\n\nDescription:\nPlease don't threat CSI sequences with \"private use\" ( , ?) chars the same as sequences without with the same final character. These are code space extensions and often have quite different functions. Interpreting them the same as the sequence without will create glitches and confuse applications. The same applies to the intermediates (` !\\\"#$%&'()*+,-./`). Properly ignoring unknown sequences is essential for the ongoing terminal ecosystem evolution as new sequences are allocated. The current code in ansi.rs: `csi_dispatch` seems to get both these sequence parts in `intermediates` but mostly ignores them, except for select cases. The following is based on information of the sequences interpreted by xterm, vte/gnome-terminal, konsole and rxvt-unicode. Also see my ongoing [documentation project](https://terminalguide.netlify.com/seq/) for further details. I think for the currently implemented sequences the only ones that should trigger with an non empty `intermediates` are: * `J` and `K` for `intermediates` exactly `?`. Strictly this is for protected cells, but it's commonly implemented on terminals that don't actually implement protected cells (if protected cells are not supported it behaves like the non `?` version) * And of course `h` and `l` for `intermediates` exactly `?`. Similar to what alacritty currently does. * possibly `n` for `intermediates` exactly `?`. The expected behavior here is different from the not `?` versions and alacritty should either ignore them or properly implement this different behavior. alacritty currently only supports 5 and 6 so a proper implementation can just add a additional `?` in the output for the dec private variants. * `q` should set cursor style only when `intermediates` is exactly ` ` (space). Without it's a different sequence understood by xterm (and DEC compatible terminals; DECLL). Currently i think the following claimed sequences are misinterpreted: But in the future there are a lot more that have different meanings with non empty `intermediates`\n\nDiscussion:\nThanks for going into so much detail about the issue. It sounds like a very sane suggestion though I'd have to look into it myself to get a full grasp of the issue at hand.\n---\nAny news on this? Anything i can do to help this along?\n---\nWhile I think I understand the general situation, it's hard for me to judge what exactly needs to be done to resolve this. I'm also not aware of any serious bugs this *currently* causes in the wild. Because of this other issues have had priority for now. The best way to help is obviously always to contribute, but I don't expect that from anyone. Other than that this will just have to wait until I can get around to it.\n---\nI don't have much clue about rust. So i'm reluctant to open a PR, because i expect whatever i come up would be highly unidiomatic. Basically csi_dispatch in ansi.rs would need to include `intermediates` in addition to `action` in the matching. With almost all matches only triggering if `intermediates` is empty. The 'q' match would need to be modified to match on `action == 'q' && intermediates == [' ']`. The matches for 'l' (reset mode) and 'h' (set mode) would need to work with both `intermediates == []` and `intermediates == ['?']` but the modes are different namespaces (i.e. `\\e[12h` is [send receive mode](https://terminalguide.netlify.com/mode/12/) while `\\e[?12h` is [cursor blinking mode](https://terminalguide.netlify.com/mode/p12/)) I think alacritty might work with just those sequences. One step more would be to think about the other combination from my start post and thinking about what alacritty should respond to \"Secondary Device Attributes\" (`\\e[>c`). If you want to see which sequences (`action` + `intermediates`) other terminals support the documentation for vte (gnome-terminal, etc) at https://terminalguide.netlify.com/seq/ is fairly complete (all toplevel CSI sequences are listed and most have a description). I'm happy to help reviewing a possible PR for this, or course. I'm not sure if this currently causes bugs in the wild, i would expect software that does terminal identification based on responses to get confused by getting a \"Primary Device Attributes\" when asking for \"Secondary Device Attributes\". The library i'm working with certainly does."}
{"project_id": "Alacritty", "bug_id": "77", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Pasting from empty clipboard throws error\n\nDescription:\nMinor observation, pasting from an empty clipboard, e.g. after a reboot, throws an error. OS: macOS Mojave 10.14.4 Alacritty version: bf353059a0f10bbccec754deb0e182cec3f6efe0\n\nDiscussion:\nThis has been fixed in #2391, thanks for the report."}
{"project_id": "Alacritty", "bug_id": "78", "source_type": "github", "label": "Checking :: Input Validation (CWE-20)", "llm_input_text": "Title: Hovering mouse over message bar results in crash\n\nDescription:\nWhen you hover mouse over message bar `alacritty` will crash, this issue was introduced by 9dddf649a15d103295f4ce97b8ae4c178c9623e0 and presented on master.\n\n"}
{"project_id": "Alacritty", "bug_id": "79", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Wayland clipboard intermittently broken\n\nDescription:\nWhich operating system does the issue occur on? Fedora 30, on both alacritty 0.3.3 and alacritty master. I'm running in gnome-session-wayland-session 3.32.0. If on linux, are you using X11 or Wayland? Wayland. This issue doesn't occur in X11 at all. I noticed that sometimes, neither the Selection nor Clipboard works at all. I can't fix it without restarting alacritty. I ran a test just running it from my shell from another alacritty instance many times, and it's 50-50 each trial if the clipboard is either completely broken, and never works, or always works. I've added some debug statements: The output is as follows: So it seems the data is passed into `smithay-clipboard`, but it doesn't come out again.\n\nDiscussion:\nWhen I'm in a broken alacritty session, pasting text copied from other applications into alacritty doesn't work as well, but copying text in alacritty and then pasting to another application works. So it seems to me that just the clipboard loading is broken in any case. That it either fails all the time or never within one session could indicate a race-condition during startup.\n---\n@trimental Any idea?\n---\n@chrisduerr i have a suspicion this could be to do with registering a seat for the clipboard however Iâ€™ll have to do a bit of testing\n---\n@pschyska replicating this issue whilst using WAYLAND_DEBUG=1 could be useful. And if you know how to, putting a debug here https://github.com/Smithay/smithay-clipboard/blob/master/src/threaded.rs#L206 would be useful Iâ€™ll continue trying to replicate it on my machine\n---\n> @pschyska replicating this issue whilst using WAYLAND_DEBUG=1 could be useful. Attached a logfile. [debug.log](https://github.com/jwilm/alacritty/files/3317153/debug.log) > And if you know how to, putting a debug here https://github.com/Smithay/smithay-clipboard/blob/master/src/threaded.rs#L206 would be useful I'm afraid I don't. I don't know much about rust and I keep getting compile errors because the types don't implement Display or Debug. Additionally, the changes I do make directly in \".cargo/registry/src/github.com-1ecc6299db9ec823/smithay-clipboard-0.3.3/\" don't seem to take effect on subsequent alacritty builds. (I used `cargo build` in the .cargo directory above). If you can send me a patch with useful println!() statements and tell me how to build it I'm happy to try it out.\n---\nSorry @trimental, disregard above log. I had some changes I did for testing in copypaste. Here is a log taken when it *works*: [debug.working.log](https://github.com/jwilm/alacritty/files/3317175/debug.working.log) Here is a log when it doesn't: [debug.log](https://github.com/jwilm/alacritty/files/3317176/debug.log)\n---\nI use alacritty 0.3.3 on arch with Gnome 3.32, and after 0.3.3 neither primary nor secondary buffers work for me on wayland session at all. Never, no conditions like OP mentioned, it simply doesn't work. Although Ctrl-Shift-c and pasting to Firefox works, neither Ctrl-Shift-c nor primary selection works in alacritty.\n---\nSo I tried some inspection in lldb on the line you indicated earlier. First of all, I found it odd that lldb stopped *two* threads on that breakpoint at the same time. Is that supposed to happen? The breakpoint was immediately hit after I ran the program. I then evaluated the arguments to `implement_seat`. I have to admit I have no clue about any of this :smirk:. Can you tell me what you are looking for specifically @trimental ?\n---\nI think I'm seeing two threads because alacritty actually starts two clipboard context. When I change this I'm unable to reproduce the issue anymore! (I tried it about 20 times so far). Could there be a race because two clipboard threads are started simultaneously.\n---\n@pschyska @Freyr666 If you could test branch https://github.com/Smithay/smithay-clipboard/tree/roundtrip-before-n-after with it would be appreciated :)"}
{"project_id": "Alacritty", "bug_id": "80", "source_type": "github", "label": "Other", "llm_input_text": "Title: Color issue introduced in commit 629e24\n\nDescription:\nWhich operating system does the issue occur on? >(linux 5.1.5) If on linux, are you using X11 or Wayland? > Wayland (sway) While testing the latest master I ran into an issue where the entire terminal will turn green. Doing a git bisect points towards commit 629ea247cdccc33c6df0037f357ba9be48c7178d I looked over the commit but could not find any obvious issues with the code, but then again I barely know rust. Let me know I you need any more info in order to debug.\n\nDiscussion:\nWould you mind creating ref test `alacritty --ref-test` in case you can reliably repro the issue? P.s. Close your alacritty with WM hotkey and not `Ctrl-D` (due to this #2625)\n---\nHere's the output from --ref-test, is it supposed to be like this? [alacritty.recording](https://gist.github.com/7415963987456321/818b56394fb1de8374e6f115c7d11609) I thought for a second that the issue was with my greeting message, a small ascii logo and output from neofetch run through lolcat, however it seems that disabling that feature still results in everything being green.\n---\nJust realized that runnng alacritty with -e `alacritty -e htop` results in normal output.\n---\nI want to believe this is a configuration issue, could you try running without any custom shell configurations (backup your `.bashrc` or equivalents). The fact `alacritty -e htop` works makes me think something your shell is doing is causing this.\n---\nDo you have a script which tries to set your terminal colors outside from what is done through the Alacritty config? Also, just to make clear, when you shut down the ref test, the entire terminal was green at that point, right? Ref tests replay all escapes that were sent to the application, so this is only useful if the last state your terminal was in was erroneous.\n---\n@nixpulvis I usually run fish shell, setting the shell to bash(I have no custom options in my bash setup) with chsh results in the shell being displayed normally. @chrisduerr Ah, yes of course, forgot to mention that I run pywal, that might be the culprit. I just tried reloading another pywal colorscheme and that changes the result. So my pywal color-scheme is generated from my wallpaper, while rolling through some wallpapers I noticed that about half of them give the terminal the green color, sometimes varying in tint, while others work normally. So it seems the issue lies with how pywal is changing the colorscheme of the terminal. I don't know why it has started doing the green background all of a sudden though... is this a bug with how alacritty interprets the colorscheme from pywal? Everything used to work fine before commit 629ea247cdccc33c6df0037f357ba9be48c7178d .\n---\nSeems like the #rrggbb format has been broken with the xparsecolor rework. Minimal repro: `echo -e \"\\e]11;#090B13\\007\"`.\n---\nFixed in https://github.com/jwilm/alacritty/pull/2763."}
{"project_id": "Alacritty", "bug_id": "81", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: Links without a space after it\n\nDescription:\nIf there is text after a link with non white space delimiter between them hovering over this text will show the underline under the link and clicking it will open the link but the underline is only under the link not the text. Additionally if there is a second link in this text it will not detected. Example: A markdown link `[http://example.com](http://example.com)` I'm on macos using 0.3.2\n\nDiscussion:\nI can reproduce, looks like there's a bit of a problem with the combination of brackets here. > the underline is only under the link not the text If I understand you correctly, you mean that the [text] part of the URL should get underlined? This is not intended and will not be supported. So I'd like to limit this feature to the incorrect detection of URLs with the combination of brackets here.\n---\nThe correct text is underlined. The bug is that the text after the link when click will cause the link before it to open even though the link wasn't clicked"}
{"project_id": "Alacritty", "bug_id": "82", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: message bar displays ANSI escape codes on warning/error\n\nDescription:\nWhich operating system does the issue occur on? - Fedora 29 - alacritty-0.3.2 - rustup 1.18.3 If on linux, are you using X11 or Wayland? - X11 --- I am missing `xclip` on my system, so alacritty is (correctly) giving me an error about this in the message bar. However, it looks like the message has ANSI color escapes that aren't being handled: ![image](https://user-images.githubusercontent.com/1066487/58286397-80581000-7d63-11e9-972d-9395df6245a7.png) I'm guessing these escapes correspond with the color red, since that's what's displayed when I invoke alacrity from another terminal: ![image](https://user-images.githubusercontent.com/1066487/58286454-9ebe0b80-7d63-11e9-8929-1ae4d2d80002.png) **Expected Behavior**: alacritty should either: 1) Parse the ANSI codes and use the correct color (harder to implement) or 2) Filter out the ANSI escape codes (easier to implement)\n\nDiscussion:\nI think the second suggestion is probably the most reasonable, it should give the best balance. However, there is a third option: Not using color when logging. If possible the other options should be preferred since they are less limited, but that would obviously be the easiest solution of all of them.\n---\nI think I kinda like just not printing color when logging. That's how many programs handle this. Otherwise, option 2 seems better if only because I don't want to deal with contrast on a colored message bar."}
{"project_id": "Alacritty", "bug_id": "83", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: 0 Width Vertical Block Selections\n\nDescription:\nI've uncovered a bug while testing #2719 (as noted there). Basically we shouldn't allow empty vertical block selections of width 0. This can cause a situation where it looks like there is no selection, but in fact there is one. Since a selection prevents actions like clicking a URL, this can lead to strange user interactions. ![block-selection-url-bug-2019-09-07_00 03 52](https://user-images.githubusercontent.com/715947/64469624-18a3b600-d103-11e9-91bb-0f7f675d2fda.gif) To reproduce on master, create a 0 width N height block selection, and then attempt to click a URL. I believe a proper fix for this is to disallow 0 width block selections, similarly to how other selections disappear.\n\nDiscussion:\nFix was extremely simple, let me know if https://github.com/jwilm/alacritty/pull/2793 solves all the problems you've found!"}
{"project_id": "Alacritty", "bug_id": "84", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Visual bell animation stalls\n\nDescription:\nThe event loop stalls before completion of visual bell animation, even when the dirty bit is still set.\n\nDiscussion:\nI'm still seeing (what I think is) this issue on 0.4.0. I cause a bell, it mostly finishes the animation, but there's still an overlay of red (bell color) until I type another key. The opaqueness varies from bell to bell. Using Xorg version 1.20.6 GPU: 08:00.0 VGA compatible controller: NVIDIA Corporation GK208B [GeForce GT 710] (rev a1) Bell config: visual_bell: animation: Linear duration: 200 color: '0xff0000'\n---\nNote: I'm able to reproduce this on one computer with the above information, but not my laptop.\n---\n@virtualdxs Would you mind opening a separate issue for this?\n---\nWill do."}
{"project_id": "Alacritty", "bug_id": "85", "source_type": "github", "label": "Checking :: Boundary/Buffer (CWE-119)", "llm_input_text": "Title: Crash on `ESC [ Pn; Pn r` with Invalid Range\n\nDescription:\nCurrently if you run `echo -e '\\e[15;1r'` in debug mode, Alacritty will panic. This is because a range should start with a smaller number than it ends with. XTerm (and I) think that a sequence like this should simply be ignored. It's also worth noting that XTerm also ignores a range where `A=B` so `echo -e '\\e[15;15r'` would also be ignored.\n\n"}
{"project_id": "Alacritty", "bug_id": "86", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: reset selection when removing chars from before selection?\n\nDescription:\nalacritty @ 9ff2838844df45b6a1f20621ced870e9e1855ec8 I can type something like `Hello, this is a test.`, then I select the word \"this\", move the cursor to the start of \"this\" and remove the substring \"Hello, \" which will cause the selection to become \" a t\" as the text shifts to the left but the selection stays in place. This looks odd imo. It even looks a bit stranger when I double-click-select and the selection will automatically select the 1-2 words that are under the position that I clicked at initially, as the text scrolls by during deletion. The actual clipboard content still represents the initially clicked test at least. Which operating system does the issue occur on? linux If on linux, are you using X11 or Wayland? linux 5.3.5-1-MANJARO, x11\n\n"}
{"project_id": "Alacritty", "bug_id": "87", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: hovering over very long lines slows down alacritty\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? Wayland Reproduce: `head -c81920 /dev/urandom | base64 | tr -d '\\n'` It also seems to happen with /dev/zero\n\nDiscussion:\n\"Slows down\" sounds like major understatement: it freezes Alacritty 0.3.2 (on X11) with 100% CPU usage for 20s. The longer the line, the harder it hits: 163840 causes 53 seconds hang.\n---\nJust to clarify, this should already be fixed by https://github.com/jwilm/alacritty/pull/2413, however that introduces some other problems so I'm not ready to mark this as resolved yet. Hopefully that PR will end up in a state that automatically resolves this issue too though."}
{"project_id": "Alacritty", "bug_id": "88", "source_type": "github", "label": "Interface :: Data Encoding (CWE-707)", "llm_input_text": "Title: If an SGR escape sequence sets the background color to the terminal background color, it is not opaque\n\nDescription:\n> Which operating system does the issue occur on? Arch Linux > If on Linux, are you using X11 or Wayland? Wayland --- I realized this when a [truecolor program](https://gitlab.com/xPMo/snippets/blob/master/c/truecolors.c) I wrote appeared with a noticeable hole in it. Because I use opacity in my terminal, I can see the background through it, instead of it being completely opaque due to the escape code. Example using `0x303030` background with opacity `0.0`: ![iExample](https://i.imgur.com/9NgL3Am.png) As you can see, when `\\e[48;2;48;48;48m ` is printed, instead of a solid grey, it is completely transparent.\n\nDiscussion:\nItâ€™s a known thing and not a bug, since it was done intentionally iirc. The main problem with this behavior is that itâ€™s not documented in config file. This thing exist for achieving transparency in alt-screen apps like alsamixer/vim/mutt etc. If you dont want this behavior just change background color a bit.\n---\n> This thing exist for achieving transparency in alt-screen apps like alsamixer/vim/mutt etc. Ah, I'm used to urxvt, which does not do this. I understand why this behavior exists; a program explicitly setting the background to the same as its default color probably has the intention of resetting the background. The program I was using broke this assumption, since it intends to print arbitrary colors. [`pixterm` is another program](https://github.com/eliukblau/pixterm) which will have this issue; if an image is printed which happens to have a pixel match the background color, a noticeable hole will appear. I would like to disable this behavior for this reason, or even better change it so that only the 16-color black causes this. I'll try and patch this myself, so leave this issue closed unless someone else wants this behavior.\n---\n> I would like to disable this behavior for this reason, or even better change it so that only the 16-color black causes this. I'll try and patch this myself, so leave this issue closed unless someone else wants this behavior. As I said, just slightly change your background color, you're already using opacity setting, so you shouldn't notice it. Otherwise you have to change how alacritty rendering works.\n---\n> slightly change your background color ... you shouldn't notice it If I'm understanding you correctly, you're talking about something like setting `black: '0x000020'` and `background: '0x00001F'`, right? That way `\\e[40m` will display in `#000020`, and not trigger the opacity setting. This won't help if I want to use `pixterm` or a similar program. If my background is `0x000020`, then I'll see a hole whenever pixterm displays an image with `#000020`. If I slightly change it to `0x00001F`, then I'll see a hole whenever pixterm displays an image with `#00001F`. I could view any image with any colors in pixterm, so any background will cause this papercut somewhere.\n---\nWhile setting the color to the background color should give transparency, specifying a truecolor should not cause any transparency. @kchibisov is already working on a patch to fix this, so hopefully we can get the best of both worlds here again (seems like there was a regression in e964af8a5ea390d96667e80873060d33079134fd)."}
{"project_id": "Alacritty", "bug_id": "89", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Background is semi opaque during visual bell animation\n\nDescription:\nArch Linux, Wayland(sway) and X11 (i3 + compton) During visual bell animation background is transparent(not fully though) with disabled transparency. Edit: Was able to repro on v0.3.3, so probably an old bug.\n\nDiscussion:\nAlso note that the animation does not finalize. 1. Set duration to 500ms 2. Cause bell to trigger 3. Observe 3 draws with opacity ~0.8, ~0.7 and ~0.4 4. Observe that no further draw calls is made, resulting in an unfinished animation. Typing will cause the animation to progress (however, it doesn't always finalize completely). terminal.dirty is still true, so it would appear that the event loop is stalled. Maybe we need to force a draw event somehow if the terminal is still dirty.\n---\nThis is a bit surprising to me since we draw our visual bell *above* the normal terminal background. There might be an issue with the operations we perform (say we render in replace, instead of merging). > terminal.dirty is still true, so it would appear that the event loop is stalled. Maybe we need to force a draw event somehow if the terminal is still dirty. The terminal's `dirty` flag shouldn't be cleared when an animation is still going on. You can see that in `event.rs` pretty clearly.\n---\n> The terminal's dirty flag shouldn't be cleared when an animation is still going on. You can see that in event.rs pretty clearly. As I said, the terminal is set to dirty, but no further draw calls are made. Either something else ends up clearing the bit outside of the assignment in event.rs, or the event loop has stalled. I did not investigate further yesterday.\n---\nSplit out as #2914\n---\n> As I said, the terminal is set to dirty, but no further draw calls are made. Either something else ends up clearing the bit outside of the assignment in event.rs, or the event loop has stalled. I did not investigate further yesterday. Yeah, I didn't understand what you meant with your initial comment, however it seems like you've already figured it out. Thanks."}
{"project_id": "Alacritty", "bug_id": "90", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Modifier state is wrongly set while switching between windows\n\nDescription:\nWhich operating system does the issue occur on? Linux, Fedora 30. If on linux, are you using X11 or Wayland? X11, i3. I'm using latest master branch. Sometime, randomly, the up arrow key doesn't work. Switching focus to another window and focus back again fix the issue. I saw this issue since #2438 , I also remember some guy mentioned it in the discussion. EDIT: Scenario: I use i3wm, switching between windows is done by Logo+L. Which certain timing of Logo+L, logo modifier is turn on when it should not be, this can be seen in --print-events. The state was wrong right after it was passed from glutin in the event loop, this suggests the bug is of glutin.\n\nDiscussion:\nWhile using Vim, `k` doesn't work as well, not only up arrow.\n---\n@nixpulvis I think you've run into this before, right? > While using Vim, k doesn't work as well, not only up arrow. This sounds interesting, does the key not work at all, so is it just swallowed? Can you reliably reproduce this?\n---\n@chrisduerr I did notice an issue with the up arrow key once, but never anything with 'k'. This does indeed sound like the same issue, sadly I haven't noticed it again in a while, and I have no idea how to reproduce.\n---\n@nixpulvis I recommend you to read though #2907. Since this issues are identical imho.\n---\n@juchiast would you mind to post `print-events` logs, since iirc you can reliably repro this issue now? Also type some random character(e.g. `a`) for us to understand when the issue start happening.\n---\n[Alacritty-8292.log](https://github.com/jwilm/alacritty/files/3767026/Alacritty-8292.log) [Alacritty-8293.log](https://github.com/jwilm/alacritty/files/3767029/Alacritty-8293.log) The bug happens on Alacritty-8292.log. 8293 is the other terminal that I use to reproduce the bug. The bug happens on the section after the last `Focused(true)`.\n---\nUpdated the description, I think this can be reproduced with glutin-only.\n---\nI was also able to repro it occasionally, while I was using X11, pretty strange issue though.\n---\nReported upstream in https://github.com/rust-windowing/winit/issues/1259.\n---\nWell, I have a similar issue on Wayland."}
{"project_id": "Alacritty", "bug_id": "91", "source_type": "github", "label": "Other", "llm_input_text": "Title: Black border around terminal area\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 Ever since commit d76bb0c69793eda42d0e46d4a7c7218b8a3a4a37, after resizing the window, I have a black bar around the terminal area within the terminal window. Also text rendering is kind of fuzzy (and smaller) compared to previous versions.\n\nDiscussion:\nHere is a screenshot of `make menuconfig` from the Linux kernel to show what I mean, this is supposed to take up the entire terminal: ![image](https://user-images.githubusercontent.com/33690/67920989-7c76b800-fb63-11e9-8c2a-e6dec887e84f.png)\n---\nThanks for the report, this is a known issue though it hasn't been tracked as issue yet. There's an upstream fix here: https://github.com/rust-windowing/winit/pull/1252 So once that is merged, this will be resolved."}
{"project_id": "Alacritty", "bug_id": "92", "source_type": "github", "label": "Algorithm :: Calculation Error (CWE-682)", "llm_input_text": "Title: Don't delete lines above the cursor on CSI Ps M\n\nDescription:\n`Alacritty` should clamp `Ps` to not go above cursor, so if you're on the bottom line, typing `echo -e '\\e[1000;M'` shouldn't delete all the thing above and should be clamped to `1`. P.s. All the other terminals clamp it(vte based, xterm, kitty).\n\nDiscussion:\nAh, interesting, thanks for investigating this.\n---\nShould be fixed in https://github.com/jwilm/alacritty/pull/2985."}
{"project_id": "Alacritty", "bug_id": "93", "source_type": "github", "label": "Function :: Logic Mismatch (CWE-573)", "llm_input_text": "Title: Key binding mode replacement consistency\n\nDescription:\nThis is a follow-up to https://github.com/jwilm/alacritty/pull/2642. Currently the idea is that whenever a user defines a binding with a bigger scope `mode`, that the default binding is overwritten. The idea behind this is that the user's binding will always work for all scopes he has defined, while default bindings are left untouched as much as possible. This already works well when staying either only in positive, or in negative modes, but as soon as modes are mixed like `Alt` and `~Alt` things get messed up. Overwriting a default binding by only overwriting the `~Alt` one for example, will currently also disable the `Alt` binding. This is inconsistent with what would be expected by the user, since he has only requested a change in Alacritty's behavior in this specific mode. I think to make sure that we do not create a regression in another area by fixing this, it's probably useful to lay out a table with all possible relevant combinations and creating dedicated tests for them to assure that the specification and implementation match up properly this time.\n\nDiscussion:\nHere's a table of the currently intended overwriting behavior: **ALL:** All terminal modes. **A:** A terminal mode other than **B**. **B:** A terminal mode other than **A**. **~Y:** Mode **Y** not set. **X:** Replace binding. **0:** Keep binding. | | ALL | A | ~A | B | ~B | A + B | ~A + B | A + ~B | ~A + ~B | |---------|-----|---|-----|---|-----|-------|---------|---------|---------| | ALL | X | X | X | X | X | X | X | X | X | | A | X | X | 0 | 0 | 0 | X | 0 | X | 0 | | ~A | X | 0 | X | 0 | 0 | 0 | X | 0 | X | | B | X | 0 | 0 | X | 0 | X | X | 0 | 0 | | ~B | X | 0 | 0 | 0 | X | 0 | 0 | X | X | | A + B | X | X | 0 | X | 0 | X | X | X | 0 | | ~A + B | X | 0 | X | X | 0 | X | X | 0 | X | | A + ~B | X | X | 0 | 0 | X | X | 0 | X | X | | ~A + ~B | X | 0 | X | 0 | X | 0 | X | X | X | A short summary would be that a binding is removed, when either of the bindings contains any mode of the opposing binding."}
{"project_id": "Alacritty", "bug_id": "94", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: Windows: startup_mode: Maximized no longer works\n\nDescription:\nSystem: Windows 10, Alacritty 0.3.3. Using `startup_mode: Maximized` has the same effect as `startup_mode: Windowed`. However, `Fullscreen` works fine. This seems to be a regression compared to before.\n\nDiscussion:\nWhen you say regression, where did it regress from? I'd assume you mean 0.3.2? Generally it would be nice to have a specific commit hash which broke it, but I'd assume that was a winit/glutin update. So before testing that, the #2438 PR should probably be tested, which updates Alacritty to the latest version of winit.\n---\nI am able to replicate this, but different behavior I think. If I use `startup_mode: Maximized` the window starts at the top left of my screen and \"thinks\" it is maximized. (i.e it displays the \"Restore\" icon vs Maximize icon), example: https://i.imgur.com/Jc4CWw0.png If I restore it and maximize again, it then maximizes correctly. Also, I tested several older versions of Alacrity, `Maximized` does nothing for me before v0.3.3-rc1. All builds before that just start the window normally. All builds after cause the behavior mentioned. I've also tested the #2438 PR, it behaves identically to the most current release (0.3.3)\n---\nI confirm @JDTX comment: it does not exactly behaves like `Windowed` like I said, but like JDTX described. I can only test further after the weekend for the previous working version (the option used to be called `start_maximized` then).\n---\nOkay, but then it's not a regression. The following patch might fix this, could someone try it?\n---\n@chrisduerr Your patch had some issues, There was an extra \")\" character from \"any\" that wasn't removed, I removed the extra \")\" and got another compilation error: I removed `if window.is_x11()`, it compiled, but `startup_mode: Maximized` still behaves the same.\n---\nIt would be nice if someone could test the examples of https://github.com/rust-windowing/glutin. The normal window example can be run with `cargo run --example window`, though the following diff needs to be applied first: If that doesn't work, this needs to be reported to winit.\n---\n@chrisduerr The example had the same results, I've reported the issue upstream w/ winit. https://github.com/rust-windowing/winit/issues/1009\n---\nSeems like upstream is fixed now with https://github.com/rust-windowing/winit/pull/1013"}
{"project_id": "Alacritty", "bug_id": "95", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: Lagging while using nano, vim, etc.\n\nDescription:\nWhich operating system does the issue occur on? `Ubuntu 16.04` If on linux, are you using X11 or Wayland? `X11` When I use nano it isn't loaded immediately, after I press a key it gets rendered. even while typing in nano, A key press will load the previous key and not the current key. Even when exiting, the save file option is shown only after I press some key. This issue remains with any editor I use. Even when using `git log --graph --pretty='\\''%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue) %Creset'\\'' --abbrev-commit` command, it gets rendered only after I press some key. Following is the video to showcase the issue. ![simplescreenrecorder-2019-03-26_14 22 30](https://user-images.githubusercontent.com/26005890/54984228-6ce32f80-4fd4-11e9-98c0-f0c079789787.gif) If you need any other info related to system config or want me to try out some experiments, I can help. EDIT 1 : Using `alacritty 0.2.7`\n\nDiscussion:\nAnother thing I noticed is, everything works perfectly when I use a new instance of alacritty. But when an instance stays inactive for a while, it starts lagging. Sometimes writing in the terminal starts lagging.\n---\nCan you reproduce this in another terminal emulator? What if you try a different shell (`bash`, `zsh`, `fish`)? And finally, can you see if this is reproducible on the latest master? I don't have this issue and that's what I'm currently running. Even checking out the 0.2.7 tag doesn't give me the same behavior.\n---\nCould you try running Alacritty with `alacritty --print-events` to show if Alacritty is updated with a delay or if the key events are actually coming in *after* the key is pressed (with a delay).\n---\n@cole-h > What if you try a different shell (`bash`, `zsh`, `fish`)? The issue remains irrespective of what I use. > Can you reproduce this in another terminal emulator? I'm unable to reproduce. > can you see if this is reproducible on the latest master? I will try it and let you know.\n---\n@chrisduerr, Following is the output of the `print-events`.\n---\n@svaderia I'm sorry if I've been a bit unspecific, but the event log itself doesn't actually help. I'd like to know if the events arrive when you press the keys, or if they are delayed. The goal here is to find out if the key events arrive late, or if they arrive as soon as you press the key, but Alacritty doesn't update for a while.\n---\n@chrisduerr I got your point. I checked it, the event arrives at the time of key press but alacritty doesn't update till I press the next key. Another thing I noticed is, the delay only happens when I'm using alacritty in full screen mode (That is my default and preffered choice). It works perfectly fine when I resize it.\n---\n> @chrisduerr I got your point. I checked it, the event arrives at the time of key press but alacritty doesn't update till I press the next key. That's very odd, it would mean that Alacritty is not redrawing appropriately. Do you use compton as a compositor or a full package like Gnome/KDE?\n---\nI'm using Gnome and not Compton.\n---\nIf you have the chance to easily test on Wayland, it might be interesting to see if that changes things. Some hardware information might also be useful. Which GPU and driver are you using?\n---\n> If you have the chance to easily test on Wayland, it might be interesting to see if that changes things. Will let you know. > Some hardware information might also be useful. Which GPU and driver are you using? GPU : GM108M [GeForce 840M] driver : i915\n---\n> driver : i915 That's an intel iGPU driver though, right? So probably not what's being used for the 840M? If you're actually using the Nvidia GPU with the correct driver, that shouldn't be an issue though.\n---\nAh, my bad. Using `NVIDIA binary driver - version 387.26 from Nvidia-387`\n---\n@chrisduerr I'm using Alacritty's latest \"master\" (91aa683bcd060b2ac2f621a388a6448f564d0537) and am experiencing this issue with any program that makes frequent updates to the terminal (eg, apt install , vim [:PlugUpdate], etc). Few screen updates take place until I press a key on my keyboard, then everything updates at once. This issue does NOT exist in Alacritty v0.2.9 for me; everything works flawlessly there. Both \"latest master\" and \"v0.2.9\" were compiled from source on my machine. OS: Linux Mint 19.1 Laptop: Dell XPS 15 GPU: GeForce GTX 1050 Nvidia Driver Version: 390.116\n---\nSee below for a screencast using Vim and the latest version of Alacritty. The left terminal is alacritty, the right terminal is Gnome-Terminal. I'm using Screenkey to print my keys at the end so you can see exactly when I press them: ![screencast](https://user-images.githubusercontent.com/3723671/55291365-dcc63100-53ab-11e9-964b-32804fb6b8ce.gif)"}
{"project_id": "Alacritty", "bug_id": "96", "source_type": "github", "label": "Other", "llm_input_text": "Title: focused terminal turns invisible with chunkwm when opening another application\n\nDescription:\nWhich operating system does the issue occur on? MacOS 10.13.3 Alacritty version: 03f9e0cd9a417550d53f34f7b9671a488363d411 A focused alacritty terminal turns invisible when another app is opened. I'm using [chunkwm](https://github.com/koekeishiya/chunkwm) (a tiling window manager) so the alacritty terminal gets resized when I open another app. The contents of the alacritty terminal become visible when I focus the window again. I attached a gif showing this in action, the red outline shows which window has focus. If I had to guess, this weird combination of a window being resized but losing focus that causes the terminal to stay invisible. This is really just an annoyance :) ![alac](https://user-images.githubusercontent.com/86304/36497669-ce8a28ce-16f0-11e8-970a-3477855cbdb9.gif)\n\nDiscussion:\nHmm If I had to guess the window probably isn't redrawn even though it should be. However there should be a redraw issued after resizing, not sure why it doesn't happen. There have been some issues with transparency in the past, would you mind testing this with transparency disabled? You can disable it by setting the `true` ![here](https://github.com/jwilm/alacritty/blob/master/src/window.rs#L200) to `false`.\n---\nI still see the same behavior with that change. FWIW I have transparency off in my config `background_opacity: 1.0`. I also tried running alacritty with `-vvv` and this is what I see: There's no output when the terminal gets resized and turns invisible. I see the following output when I focus the terminal.\n---\nLooks like it's not receiving resize events until the window is focused. That's a bit odd.\n---\n@chrisduerr it's due to the macOS event loop model and winit's implementation. There's a PR in the pipeline which runs the event loop on a coroutine which is then suspended when receiving resize events thereby allowing us to redraw as it's received. https://github.com/tomaka/winit/pull/237\n---\nHmm seems like the author of that PR got frustrated :(\n---\nI have exactly the same problem. Waiting for [winit PR](https://github.com/tomaka/winit/pull/237).\n---\nThere's some more interesting info about this in https://github.com/jwilm/alacritty/issues/1798.\n---\nThis happens to me as well, but I'm running **Amethyst v0.12.2**\n---\nIssue is still there with the newest stable Alacritty and Amethyst (0.3 and 0.13). Any updates?\n---\nIf you're interested in tracking progress, I'd recommend subscribing to the upstream issue. I'm struggling with this myself on macOS, however there's nothing Alacritty can do here. Once it's fixed upstream, it will be resolved in Alacritty within a short period of time.\n---\nThanks\n---\nIt looks like that PR has been closed due to the creation of EventLoop 2.0. See https://github.com/rust-windowing/winit/issues/459 for the new Event Loop system PR.\n---\n@alexmaras you can follow the work being done on the new event loop integration in #2438. I'd be curious to hear if this solves the issue @jwkvam described.\n---\n@nixpulvis `run_return` is steel not implemented in `winit` on macOs, so you can't run #2438 on macOs atm. For reference [winit#1005](https://github.com/rust-windowing/winit/issues/1005).\n---\nI've noticed that https://github.com/jwilm/alacritty/pull/2438 seems to fix this issue. If anyone is interested in confirming this for other WMs (I've been using yabai), please let me know."}
{"project_id": "Alacritty", "bug_id": "97", "source_type": "github", "label": "Checking :: Missing Check (CWE-754)", "llm_input_text": "Title: Unable to launch when a virtual display is connected: 'assertion failed: validate_hidpi_factor(dpi_factor)'\n\nDescription:\nArch 5.2.4 and X11. I am using `intel-virtual-output` for my virtual display. [here](https://gist.github.com/Zer0897/4ac7d084fd9c924ad76f445ca3cd643d) is the output of `xrandr`. Let me know if you need anything else.\n\nDiscussion:\nI'd assume when you clone https://github.com/rust-windowing/winit and then run `cargo run --example window`, you get the same crash?\n---\nEverything seems to work fine with `winit`\n---\n@Zer0897 Could you test #2438 or `winit v0.19.1`?\n---\nNo luck with #2438\n---\n`winit v0.19.1` does give me the same error\n---\nDo you have `Xft.dpi` set in `.Xresources`?\n---\nI did not. Adding it has no affect.\n---\nOdd, would you mind restarting x11/rebooting. The assertion that was triggered can be reached if winit fails to retrieve Xft.dpi.\n---\nNo change I am using [a minimal display manager](https://wiki.archlinux.org/index.php/CDM) and [xmonad](https://xmonad.org/) as my window manager. Not sure if that means anything.\n---\nCould you try this one `env WINIT_HIDPI_FACTOR=1 alacritty`?\n---\nThat worked! The virtual display must not be picking up the settings correctly.\n---\nIf winit works, but v0.19.1 doesn't, that sounds like it has been fixed in the latest winit. Could you test the latest glutin (https://github.com/rust-windowing/glutin) and downgrading glutin to the latest release in case the latest master works.\n---\nBoth `gluten` master and `v0.21.0` work fine.\n---\nAre you *positive* you've tested #2438? The text in the code snippet says you're on your master branch.\n---\nOh nice catch! Forgot to checkout the branch after cloning the fork. That runs perfectly! @chrisduerr\n---\nThanks for checking again, then everything makes sense. Marking this issue as fixed by the mentioned PR."}
{"project_id": "Alacritty", "bug_id": "98", "source_type": "github", "label": "Interface :: API Misuse (CWE-628)", "llm_input_text": "Title: window.decorartions: none not working on Windows 10\n\nDescription:\nOS: Windows 10 Enterprise (10.0.17763 Build 17763) alacritty version: alacritty 0.3.3 (cc3e4d3) My config: It all works fine, until I set the `decorations` attribute to `none`. When I start alacritty with that config, a **window opens without any error, but it is not visible** Output of alacritty.exe -vv run in Powershell:\n\nDiscussion:\nCould you try running the `window` examlpe in https://github.com/rust-windowing/glutin? This is the patch you need to apply to disable decorations for the example: You can apply patches using `git apply patch.file` and then run the example using `cargo run --example window`.\n---\n@chrisduerr I was able to replicate the problem that was described by the OP. Figured I'd lend a hand. The glutin example you provided with the patch runs fine on my machine. It just shows a white empty window. I tested a few Alacritty releases and discovered [0.3.0](https://github.com/jwilm/alacritty/releases/tag/v0.3.0) introduced the bug. [0.3.0 RC3](https://github.com/jwilm/alacritty/releases/tag/v0.3.0-rc3) works fine. I decided to spot test the commits between 0.3.0 RC3 and 0.3.0 and found that [this commit to window.rs](https://github.com/jwilm/alacritty/commit/6757acbb824e8be9968529a66e9a75a0a2ea2f5d#diff-2ce3f8d26915325bbd02de9e0056281e) caused it. Every commit before then works fine when `decorations: none` is used. Hope that helps you.\n---\nCould you try with #2438?\n---\nI got a runtime error trying to run that PR ![image](https://user-images.githubusercontent.com/24833917/59957950-96d9b000-9464-11e9-8703-e3a1e7ac81e6.png) This is what I ran to get that PR and build it:\n---\nCould you uncomment this line: https://github.com/jwilm/alacritty/pull/2438/files#diff-65362e8e7fbdb92518e6216cd7f10722R575 I think that's causing the unimplemented error, but it should be irrelevant for working properly.\n---\nDid you mean comment the line out instead of uncomment? If so, I commented it out, got a warning about dead_code, but it compiled. Running it didn't result in a runtime error, but the problem persists.\n---\nSince the glutin example was just a white window instead of the rectangle it is supposed to render, I've reported this problem upstream: https://github.com/rust-windowing/winit/issues/979\n---\n@JDTX This should have been fixed 4 days ago in winit, I'm not sure if the version you've tested already had that fix in or not. Could you test the #2438 PR again, I've bumped it again so the IME failure should not arise anymore and the latest winit version should be included. Would be much appreciated.\n---\n@chrisduerr I received a compilation error with the latest code from the PR.\n---\n@chrisduerr That looks like you use the former name of `with_visible` which was renamed in https://github.com/rust-windowing/winit/commit/2b89ddec15c897 on June 12 (almost 2 weeks ago).\n---\n@felixrabe Thanks for the information. I ran these two commands against the PR to update them, @chrisduerr It built with the above changes, and it works now with decorations set to none! ![image](https://user-images.githubusercontent.com/24833917/60081257-0cf54580-96f7-11e9-8f6c-216054d88313.png)\n---\nThanks for the help with testing, looks like this will get fixed as soon as the glutin Evlp2 PR is merged."}
{"project_id": "Alacritty", "bug_id": "99", "source_type": "github", "label": "Other", "llm_input_text": "Title: Opacity setting not applied\n\nDescription:\nWhich operating system does the issue occur on? Linux -- Ubuntu 19.04 dev If on linux, are you using X11 or Wayland? X11 This issue might be more question on how to debug this rather than there is an actual issue. Recently I updated alacritty to the latest master (dbce674d7012fe09b3ab9ac0aeeb1c748bb7afce) and install using `cargo deb --install`. My opacity setting is no longer being applied. I have also recently gotten an external gpu and have been messing with the gpu drivers (switching between nvidia versions and nouveau) so I'm not necessarily convinced this is an issue with the latest Alacritty. When running under sway window manager the opacity works, but under gnome (3.32) on X11 the opacity setting does not. I have tried running alacritty with the `-vvv` option but haven't seen any errors or logs that seem relevant. I'm still learning about how all the pieces work together recently switching over from mac to linux so I'm not sure where to look next for why the opacity is not working.\n\nDiscussion:\nI'm not aware of an isuse with opacity on Linux. The only two things that are commonly issues with this is that people think it's a transparency (not opacity, which is the opposite) setting and that no compositor is running. I'd expect GNOME on X11 to be running a compositor by default, however making sure that compositing is working properly is probably your best bet. There's likely no logging in Alacritty's output because Alacritty doesn't run into any issues. If Alacritty attempts to render a transparent window and there is no issue, but the window manager doesn't render it with transparency, there's little Alacritty can do since it doesn't know anything about that.\n---\nAfter updating alacritty I had similar issues, now transparency doesn't work. I am using xcompmgr as the compositor, and all the settings are the same than before updating alacritty.\n---\nI've verified myself with `compton` and i3 and I can not reproduce this issue. Transparency works as expected. I'm curious if a fully transparent window with `background_opacity: 0` will have a black background or if it will have the background set in the `colors` section?\n---\nI tried with compton just in case, and still transparency doesn't work on alacritty. When opacity is set to 0 it seems that alacritty only displays a black background\n---\nUpdate, I don't have this problem with version 0.2.9\n---\nUpdate2: Seems that the commit which introduced the problem was \"0f96a62\"\n---\nI am also experiencing this issue, after upgrading to 0.3.0. The `background_opacity` setting does change the background, but just the shade (`0.0` is plain black, `1.0` is the set color) `i3` with `compton`, on `0.3.0-rc1` ([latest ebuild](https://gitweb.gentoo.org/repo/gentoo.git/tree/x11-terms/alacritty/alacritty-0.3.0_rc1.ebuild))\n---\n> i3 with compton, on 0.3.0-rc1 (latest ebuild) Now that is interesting, it's pretty much the same system I've just tested it on and things worked great. Could you share some more system information (especially GPU+drivers and kernel version)?\n---\nAlso would be interesting to have this re-tested with latest master since this bumps the Glutin version.\n---\nI use the kernel driver for intel graphics (integrated gpu) I'll try with master and see if things change\n---\nMaster does seem to fix the issue, though I'm not entirely sure (when I run `target/debug/alacritty --version`, it returns `alacritty 0.2.9`). I've seen the ebuild for 0.3.0 which uses sed to replace version number, so I'm guessing someone just forgot to bumb the version number somewhere ? Or am I going the wrong way about this ?\n---\nThe version number usually stays the same until the next release is made, so that's intentional. I would have expected you to run maybe Nvidia since that's the most likely to show difficulties, but I guess you're running mesa too then. Note that I'm running amdgpu with mesa on Archlinux and everything's working for me. I'd be interested in getting some more hardware information from everyone who can reproduce this issue, including kernel version, gpu driver, glxinfo output and compositor/WM. Maybe that can give us some hints. Since this was apparently caused by an upstream change, I've also reported the issue upstream here: https://github.com/tomaka/winit/issues/832 If anyone here is willing to bisect winit to check where this issue might be coming from, that would be very helpful. It might be a bit laborious but would hopefully give us a pretty good idea of what caused this. If someone is interested and needs help, please let me know. If someone found the bad commit, please report it to the upstream issue.\n---\n[Here](http://dpaste.com/1AQT5BA.txt) is my glxinfo output\n---\nSame for me, with master it seems to work fine. I'm using Gentoo, Linux 5.0.5, nvidia, xcompmgr and dwm. Here is my glxinfo http://dpaste.com/1EVK7XQ\n---\nOh I totally misunderstood @FliiFe and thought he said master does **not** fix the issue, oops. Looks like the issue is resolved then.\n---\nStill cannot apply opacity since alacritty 0.3.0 OS: Arch Linux WM: kwin5 GPU driver: xf86-video-radeon Tried both glutin 0.21.0-rc1 and 0.21.0-rc2 (changing `PossiblyCurrentContext` to `PossiblyCurrent`)\n---\nMy glxinfo is pasted here: https://fars.ee/5J07\n---\nI've reopened the upstream issue: https://github.com/tomaka/winit/issues/832\n---\nThe same problem is also reproduced on my another PC with Intel integrated GPU. OS: Arch Linux WM & Compositor: kwin5 Mesa: 19.0.1-2 GPU driver: modesetting DDX with i965 kernel driver glxinfo: https://fars.ee/YoO6 On this Intel machine, I did a git bisect on the commit history of alacritty. the last good commit (that can show transparency) is cd8d537bed98559ed49c1465db84ecec5393119f and the first bad commit (that shows total opacity) is 6757acbb824e8be9968529a66e9a75a0a2ea2f5d ."}
{"project_id": "Alacritty", "bug_id": "100", "source_type": "github", "label": "Timing :: Race Condition (CWE-362)", "llm_input_text": "Title: crash on suspend-resume cycle with 0.2.3\n\nDescription:\nWhich operating system does the issue occur on? Linux If on linux, are you using X11 or Wayland? X11 Crash after suspending and resuming my laptop, this is 100% reproducible. Setting RUST_BACKTRACE=1 does not produce anything meaningful, I would probably need debugging symbols in my system C libraries.\n\nDiscussion:\nCan you check if this is reproducible with the winit example? It's available here: https://github.com/tomaka/winit. You should be able to test it by running the following command: `git clone https://github.com/tomaka/winit && cd winit && cargo run --example window` If this can be reproduced with just the winit example, this should probably be reported upstream in the winit issue tracker. Feel free to open an issue yourself if you can reproduce it, otherwise I'll create one.\n---\nThe same thing happens with the winit example, this is at least somewhat recently added. I know I have been able to suspend/resume with alacritty running before.\n---\nI filed a but upstream at winit: https://github.com/tomaka/winit/issues/705\n---\nhttps://github.com/rust-windowing/winit/pull/1158 was merged, which should in turn fix this alacritty crash.\n---\nThis will be fixed with https://github.com/jwilm/alacritty/pull/2438.\n---\nThis still happens on my machine\n---\nThis also happens on my machine every morning, alacritty just hangs, but can see a cursor on the top left, but thats it. When the pc suspends for just an hours, alacritty usually just takes a few minutes to redraw."}
